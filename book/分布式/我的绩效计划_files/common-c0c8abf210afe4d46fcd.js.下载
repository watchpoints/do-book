/*! For license information please see common-c0c8abf210afe4d46fcd.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+29R":function(e,t,n){var i;n("4mDm"),n("oVuX"),n("07d7"),n("PKPk"),n("3bBZ"),n("Kz25"),window.JPEGEncoder=function(e){function t(e,t){var n,i,o=0,a=0,l=new Array;for(n=1;16>=n;n++){for(i=1;i<=e[n];i++)l[t[a]]=[],l[t[a]][0]=o,l[t[a]][1]=n,a++,o++;o*=2}return l}function n(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&($|=1<<O),n--,0>--O&&(255==$?(i(255),i(0)):i($),O=7,$=0)}function i(e){k.push(S[e])}function o(e){i(255&e>>8),i(255&e)}function a(e,t){var n,i,o,a,l,r,c,s,d,u,_,p,m,f,h,g,v,b,y,x,k,$,O,D,C,M,S,E,P,j,T,A,I,L,F,R,B,U,q,W,z,N,K,H,V,Y,G,J,X=0;for(d=0;8>d;++d)n=e[X],i=e[X+1],o=e[X+2],a=e[X+3],l=e[X+4],r=e[X+5],c=e[X+6],_=n-(s=e[X+7]),m=i-c,h=o-r,v=a-l,b=(u=n+s)+(g=a+l),y=u-g,x=(p=i+c)+(f=o+r),k=p-f,e[X]=b+x,e[X+4]=b-x,$=.707106781*(k+y),e[X+2]=y+$,e[X+6]=y-$,D=.5411961*(b=v+h)+(O=.382683433*(b-(k=m+_))),C=1.306562965*k+O,S=_+(M=.707106781*(x=h+m)),E=_-M,e[X+5]=E+D,e[X+3]=E-D,e[X+1]=S+C,e[X+7]=S-C,X+=8;for(X=0,d=0;8>d;++d)n=e[X],i=e[X+8],o=e[X+16],a=e[X+24],l=e[X+32],r=e[X+40],c=e[X+48],j=n-(s=e[X+56]),A=i-c,L=o-r,R=a-l,B=(P=n+s)+(F=a+l),U=P-F,q=(T=i+c)+(I=o+r),W=T-I,e[X]=B+q,e[X+32]=B-q,z=.707106781*(W+U),e[X+16]=U+z,e[X+48]=U-z,K=.5411961*(B=R+L)+(N=.382683433*(B-(W=A+j))),H=1.306562965*W+N,Y=j+(V=.707106781*(q=L+A)),G=j-V,e[X+40]=G+K,e[X+24]=G-K,e[X+8]=Y+H,e[X+56]=Y-H,X++;for(d=0;64>d;++d)J=e[d]*t[d],w[d]=J>0?0|J+.5:0|J-.5;return w}function l(){var e,t;for(o(65499),o(132),i(0),e=0;64>e;e++)i(u[e]);for(i(1),t=0;64>t;t++)i(_[t])}function r(){var e,t,n,a,l,r,c,s;for(o(65476),o(418),i(0),e=0;16>e;e++)i(T[e+1]);for(t=0;11>=t;t++)i(A[t]);for(i(16),n=0;16>n;n++)i(I[n+1]);for(a=0;161>=a;a++)i(L[a]);for(i(1),l=0;16>l;l++)i(F[l+1]);for(r=0;11>=r;r++)i(R[r]);for(i(17),c=0;16>c;c++)i(B[c+1]);for(s=0;161>=s;s++)i(U[s])}function c(e,t,i,o,l){var r,c,s,d,u,_,p,m,f,h,g=l[0],v=l[240];for(c=a(e,t),s=0;64>s;++s)x[j[s]]=c[s];for(d=x[0]-i,i=x[0],0==d?n(o[0]):(n(o[y[r=32767+d]]),n(b[r])),u=63;u>0&&0==x[u];u--);if(0==u)return n(g),i;for(_=1;u>=_;){for(m=_;0==x[_]&&u>=_;++_);if((f=_-m)>=16){for(p=f>>4,h=1;p>=h;++h)n(v);f&=15}r=32767+x[_],n(l[(f<<4)+y[r]]),n(b[r]),_++}return 63!=u&&n(g),i}function s(e){if(0>=e&&(e=1),e>100&&(e=100),P!=e){(function(e){var t,n,i,o,a,l,r,c,s,f=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(t=0;64>t;t++)1>(n=d((f[t]*e+50)/100))?n=1:n>255&&(n=255),u[j[t]]=n;for(i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;64>o;o++)1>(a=d((i[o]*e+50)/100))?a=1:a>255&&(a=255),_[j[o]]=a;for(l=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],r=0,c=0;8>c;c++)for(s=0;8>s;s++)p[r]=1/(8*u[j[r]]*l[c]*l[s]),m[r]=1/(8*_[j[r]]*l[c]*l[s]),r++})(50>e?Math.floor(5e3/e):Math.floor(200-2*e)),P=e,console.log("Quality set to: "+e+"%")}}var d,u,_,p,m,f,h,g,v,b,y,w,x,k,$,O,D,C,M,S,E,P,j,T,A,I,L,F,R,B,U,q,W;Math.round,d=Math.floor,u=new Array(64),_=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),y=new Array(65535),w=new Array(64),x=new Array(64),k=[],$=0,O=7,D=new Array(64),C=new Array(64),M=new Array(64),S=new Array(256),E=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250],this.encode=function(e,t){var a,d,u,_,b,y,w,x,S,P,j,T,A,I,L,F,R,B,U,q,W=(new Date).getTime();for(t&&s(t),k=new Array,$=0,O=7,o(65496),o(65504),o(16),i(74),i(70),i(73),i(70),i(0),i(1),i(1),i(0),o(1),o(1),i(0),i(0),l(),function(e,t){o(65472),o(17),i(8),o(t),o(e),i(3),i(1),i(17),i(0),i(2),i(17),i(1),i(3),i(17),i(1)}(e.width,e.height),r(),o(65498),o(12),i(3),i(1),i(0),i(2),i(17),i(3),i(17),i(0),i(63),i(0),a=0,d=0,u=0,$=0,O=7,this.encode.displayName="_encode_",_=e.data,b=e.width,y=e.height,w=4*b,S=0;y>S;){for(x=0;w>x;){for(I=A=w*S+x,L=-1,F=0,R=0;64>R;R++)I=A+(F=R>>3)*w+(L=4*(7&R)),S+F>=y&&(I-=w*(S+1+F-y)),x+L>=w&&(I-=x+L-w+4),P=_[I++],j=_[I++],T=_[I++],D[R]=(E[P]+E[j+256>>0]+E[T+512>>0]>>16)-128,C[R]=(E[P+768>>0]+E[j+1024>>0]+E[T+1280>>0]>>16)-128,M[R]=(E[P+1280>>0]+E[j+1536>>0]+E[T+1792>>0]>>16)-128;a=c(D,p,a,f,g),d=c(C,m,d,h,v),u=c(M,m,u,h,v),x+=32}S+=8}return O>=0&&((B=[])[1]=O+1,B[0]=(1<<O+1)-1,n(B)),o(65497),U="data:image/jpeg;base64,"+btoa(k.join("")),k=[],q=(new Date).getTime()-W,console.log("Encoding time: "+q+"ms"),U},W=(new Date).getTime(),e||(e=50),function(){var e,t=String.fromCharCode;for(e=0;256>e;e++)S[e]=t(e)}(),f=t(T,A),h=t(F,R),g=t(I,L),v=t(B,U),function(){var e,t,n,i=1,o=2;for(e=1;15>=e;e++){for(t=i;o>t;t++)y[32767+t]=e,b[32767+t]=[],b[32767+t][1]=e,b[32767+t][0]=t;for(n=-(o-1);-i>=n;n++)y[32767+n]=e,b[32767+n]=[],b[32767+n][1]=e,b[32767+n][0]=o-1+n;i<<=1,o<<=1}}(),function(){for(var e=0;256>e;e++)E[e]=19595*e,E[e+256>>0]=38470*e,E[e+512>>0]=7471*e+32768,E[e+768>>0]=-11059*e,E[e+1024>>0]=-21709*e,E[e+1280>>0]=32768*e+8421375,E[e+1536>>0]=-27439*e,E[e+1792>>0]=-5329*e}(),s(e),q=(new Date).getTime()-W,console.log("Initialization "+q+"ms")},function(){function n(e,t,n,i){var o,a,l,r,c,s,d,u,_,p,m=e.naturalWidth,f=e.naturalHeight,h=n.width,g=n.height,v=t.getContext("2d");for(v.save(),function(e,t,n,i,o){switch(o){case 5:case 6:case 7:case 8:e.width=i,e.height=n;break;default:e.width=n,e.height=i}switch(o){case 2:t.translate(n,0),t.scale(-1,1);break;case 3:t.translate(n,i),t.rotate(Math.PI);break;case 4:t.translate(0,i),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-i);break;case 7:t.rotate(.5*Math.PI),t.translate(n,-i),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-n,0)}}(t,v,h,g,n.orientation),function(e){var t,n,i=e.naturalWidth;return i*e.naturalHeight>1048576&&((t=document.createElement("canvas")).width=t.height=1,(n=t.getContext("2d")).drawImage(e,1-i,0),0===n.getImageData(0,0,1,1).data[3])}(e)&&(m/=2,f/=2),o=1024,(a=document.createElement("canvas")).width=a.height=o,l=a.getContext("2d"),r=i?function(e,t,n){var i,o,a,l,r,c,s=document.createElement("canvas");for(s.width=1,s.height=n,(i=s.getContext("2d")).drawImage(e,0,0),o=i.getImageData(0,0,1,n).data,a=0,l=n,r=n;r>a;)0===o[4*(r-1)+3]?l=r:a=r,r=l+a>>1;return 0===(c=r/n)?1:c}(e,0,f):1,c=Math.ceil(o*h/m),s=Math.ceil(o*g/f/r),d=0,u=0;f>d;){for(_=0,p=0;m>_;)l.clearRect(0,0,o,o),l.drawImage(e,-_,-d),v.drawImage(a,0,0,o,o,p,u,c,s),_+=o,p+=c;d+=o,u+=s}v.restore(),a=l=null}function o(e){var t,n,i;if(window.Blob&&e instanceof Blob){if(t=new Image,!(n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null))throw Error("No createObjectURL function found to create blob url");t.src=n.createObjectURL(e),this.blob=e,e=t}e.naturalWidth||e.naturalHeight||(i=this,e.onload=function(){var e,t,n=i.imageLoadListeners;if(n)for(i.imageLoadListeners=null,e=0,t=n.length;t>e;e++)n[e]()},this.imageLoadListeners=[]),this.srcImage=e}o.prototype.render=function(e,t,i){var o,a,l,r,c,s,d,u,_,p,m;if(this.imageLoadListeners)return o=this,void this.imageLoadListeners.push((function(){o.render(e,t,i)}));for(p in t=t||{},a=this.srcImage.naturalWidth,l=this.srcImage.naturalHeight,r=t.width,c=t.height,s=t.maxWidth,d=t.maxHeight,u=!this.blob||"image/jpeg"===this.blob.type,r&&!c?c=l*r/a<<0:c&&!r?r=a*c/l<<0:(r=a,c=l),s&&r>s&&(c=l*(r=s)/a<<0),d&&c>d&&(r=a*(c=d)/l<<0),_={width:r,height:c},t)_[p]=t[p];"img"===(m=e.tagName.toLowerCase())?e.src=function(e,t,i){var o=document.createElement("canvas");return n(e,o,t,i),o.toDataURL("image/jpeg",t.quality||.8)}(this.srcImage,_,u):"canvas"===m&&n(this.srcImage,e,_,u),"function"==typeof this.onrender&&this.onrender(e),i&&i()},void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}()},"+6tr":function(e,t,n){"use strict";n.r(t);var i=n("CoJ3");n("i24V"),n("+6tr"),n("/aoR"),n("c87V"),n("ruka"),i.a.controller("hcCommonImportCtrl",["$scope","$upload","hcImportCommonService",function(e,t,n){e.init=function(){e.category=e.params.category,e.category_name=e.params.category_name,e.title=e.params.title,e.params=e.params.params,e.$dialog.options.params.needCloseFunc&&e.$dialog.setClose(e.close)},e.close=function(){e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.download_template=function(){n.download_template(e.category,e.show_tip)},e.download=function(){n.download_report(e.category,e.show_tip)},e.show_tip=function(t){e.show_warning(t)},e.operation=function(t){n.operation(t,e.category,e.category_name,e.params)}}])},"+E5y":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("oVuX"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("sMBO"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("toAj"),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("07d7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rB9j"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("JfAA"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Rm1S"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("UxlC"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("EnZy"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("TTrh"),_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9__),_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("zLi2"),_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_stable_object_entries__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("i5y0"),_babel_runtime_corejs3_core_js_stable_object_entries__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_entries__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_stable_date_now__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("MAKL"),_babel_runtime_corejs3_core_js_stable_date_now__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_date_now__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("pPxq"),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("guyh"),_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("6UaR"),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_15__),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("WxoT"),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("+oHS"),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("BF1V"),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("Vi3r"),_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("KYsz"),_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20__),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("mnMc"),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21__),_babel_runtime_corejs3_core_js_stable_object_get_own_property_names__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("7Gle"),_babel_runtime_corejs3_core_js_stable_object_get_own_property_names__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_names__WEBPACK_IMPORTED_MODULE_22__),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("UtpJ"),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_23__),_babel_runtime_corejs3_core_js_stable_parse_float__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("D3kx"),_babel_runtime_corejs3_core_js_stable_parse_float__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_parse_float__WEBPACK_IMPORTED_MODULE_24__),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ZbhI"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25__),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("RXMP"),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26__),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("lHQ6"),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27__),_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("RKTd"),_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_28__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29__),_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("nhkr"),_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30__),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("5PDf"),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31__),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("BkRI"),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_32__),_app__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("CoJ3"),_tree_filter__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("ry0J"),moment__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("wd/R"),moment__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_35__),marked__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("fFwQ"),marked__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(marked__WEBPACK_IMPORTED_MODULE_36__),xss__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("Xjjk"),xss__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(xss__WEBPACK_IMPORTED_MODULE_37__),_components_pageComponent_list_reactive_index_ts__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("h0OH"),_utils_hash_key__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("4eRX");_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"beforeCurrentTime",["$filter",function(e){return function(t){if(""===t)return"";switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(t)){case"undefined":return"";case"string":t=new Date(t.replace(/-/g,"/"));break;case"object":break;default:return""}var n=new Date,i=n.getTime()-t.getTime(),o="",a=6e4,l=60*a,r=Math.floor;if(r(i/1e3)<60)o=e("translate")("hcm_current_time_tip");else if(r(i/a)<60)o=r(i/a)+e("translate")("hcm_current_time_min_tip");else if(r(i/l)<24)o=r(i/l)+e("translate")("hcm_current_time_hour_tip");else{var c=t.getFullYear()===n.getFullYear(),s=r(i/l)<48,d="";c&&s?d="MM/dd HH:mm":c&&!s?d="MM/dd":!c&&s?d="yyyy/MM/dd HH:mm":c||s||(d="yyyy/MM/dd"),o=e("date")(t,d)}return o}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"formatCharsMaxLength",(function(){return function(s,l){var r,p;return!s||!l||l<=0?r="":s.length>l?(p=eval("/([\\s\\S]{"+(l-1)+"})([\\s\\S]+)/"),r=s.replace(p,"$1...")):r=s,r}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeStampToDate",(function(){return function(e){switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(e)){case"undefined":return"";case"string":case"number":case"object":break;default:return""}if(""===e)return"";var t=new Date;return t.setTime(e),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"toArray",(function(){return function(e){return e?_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()($).call($,e,(function(e,t){return[e]})):[]}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"fileSize",(function(){return function(e){switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(e)){case"undefined":return"";case"string":case"number":case"object":break;default:return""}return""===e||null==e?"":e/1024/1024/1024>=1?(e/1024/1024/1024).toFixed(2).toString()+"GB":e/1024/1024>=1?(e/1024/1024).toFixed(2).toString()+"MB":e/1024>=1?(e/1024).toFixed(2).toString()+"KB":0===e?"0字节":e.toString()+"字节"}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"yymmdd",(function(){return function(e){if(""===e||null==e)return"";var t,n=(t="string"==typeof e?new Date(Date.parse(e.replace(/-/g,"/"))):e).getDate(),i=t.getMonth()+1,o=t.getFullYear()+"-";return o=i>=10?o+i+"-":o+"0"+i+"-",n>=10?o+=n:o=o+"0"+n,o}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"day",(function(){return function(e){return""===e||null==e?"":new Date(Date.parse(e.replace(/-/g,"/"))).getDate()}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"month",(function(){return function(e){return""===e||null==e?"":new Date(Date.parse(e.replace(/-/g,"/"))).getMonth()+1}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"year",(function(){return function(e){return""===e||null==e?"":new Date(Date.parse(e.replace(/-/g,"/"))).getFullYear()}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hour",(function(){return function(e){if(""===e||null==e)return"";var t=new Date(Date.parse(e.replace(/-/g,"/"))).getHours();return t<10&&(t="0"+t),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"minute",(function(){return function(e){if(""===e||null==e)return"";var t=new Date(Date.parse(e.replace(/-/g,"/"))).getMinutes();return t<10&&(t="0"+t),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dayOfWeek",(function(){return function(e){if(!(e instanceof Date)){if("string"!=typeof e||""===e)return"";e=new Date(Date.parse(e.replace(/-/g,"/")))}return"周"+["日","一","二","三","四","五","六"][e.getDay()]}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dateParse",(function(){return function(e){return e instanceof Date||("number"==typeof e?e=new Date(e):"string"==typeof e&&""!==e&&(e=(e=e.replace("T"," ")).replace(/\..+$/g,""),/\d{4}[^\d]\d{1,2}$/.test(e)&&(e+="/01"),/\d{4}[^\d]\d{1,2}[^\d]$/.test(e)&&(e+="01"),e=e.replace(/[^\d: ]/g,"/"),e=new Date(Date.parse(e)))),e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dateFormat",["$filter",function($filter){return function(date,format){if(!date)return date;var suffix="";if("string"==typeof date){if(!_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_28___default()(date).call(date))return"";var split=date.split(";");date=split[0],2===split.length&&(suffix=split[1])}format||(format="yyyy-MM-dd"),date=$filter("dateParse")(date);var formats={"y+":date.getFullYear(),"Q+":_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default()((date.getMonth()+1)/3)+((date.getMonth()+1)%3==0?0:1),"H+":_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default()((date.getMonth()+1)/6)+((date.getMonth()+1)%6==0?0:1),"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"w+":["日","一","二","三","四","五","六"][date.getDay()]};return $.each(formats,(function(key,item){format=format.replace(eval("/"+key+"/g"),(function(e){return/Q+/.test(e)?"Q"+item:/H+/.test(e)?"H"+item:1===e.length?item:("0"+item).substr(("0"+item).length-e.length)}))})),format+suffix}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dateAddDays",["$filter",function(e){return function(t,n,i){if(!t)return"";if(!(t=e("dateFormat")(t,"yyyy/MM/dd hh:mm:ss")))return"";var o=new Date(t);return isNaN(o.getDate())?"":(n&&(o=o.setDate(o.getDate()+n)),e("dateFormat")(o,i))}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dayDiff",["$filter",function(e){return function(t,n){return t=new Date(e("dateFormat")(t,"yyyy/MM/dd")),1+((n=new Date(e("dateFormat")(n,"yyyy/MM/dd")))-t)/1e3/60/60/24}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hourDiff",["$filter",function(e){return function(t,n){return t=new Date(e("dateFormat")(t,"2000/01/01 hh:mm")),((n=new Date(e("dateFormat")(n,"2000/01/01 hh:mm")))-t)/1e3/60/60}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"parseFormat",(function(){return function(e,t){if("number"==typeof e&&(e=e.toString()),"string"==typeof e&&e&&t){var n=e.replace(/[^\d]+/gi," ").split(" "),i=t.replace(/[^yHQMdhms]+/gi," ").split(" ");if(n.length>=i.length){var o={y:2e3,M:1,d:1,h:0,m:0,s:0};if(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(i).call(i,(function(e,t){o[e[0]]=n[t]})),~_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(i).call(i,"Q")&&~_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(e).call(e,"Q")){var a=3*(n[1]-1)+1;e=o.y+"/"+a+"/"+o.d+" "+o.h+":"+o.m+":"+o.s}else if(~_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(i).call(i,"H")&&~_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(e).call(e,"H")){var l=6*(n[1]-1)+1;e=o.y+"/"+l+"/"+o.d+" "+o.h+":"+o.m+":"+o.s}else e=o.y+"/"+o.M+"/"+o.d+" "+o.h+":"+o.m+":"+o.s;return new Date(e)}}return e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dayOfWeekMini",(function(){return function(e){if(!(e instanceof Date)){if("string"!=typeof e||""===e)return"";e=new Date(Date.parse(e.replace(/-/g,"/")))}return["日","一","二","三","四","五","六"][e.getDay()]}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dayOrMinute",(function(){return function(e){if(""===e||null==e)return"";var t="";return _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(e).call(e,"天")>-1&&(t="天"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(e).call(e,"小时")>-1&&(t="小时"),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"opinionNoneFilter",(function(){return function(e){return(e||"").replace(/((\s|.)*审批结论[:：])([^；。;.]+)([；。;.]|$).*/gi,"$3")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"decimalPrecision",(function(){return function(e,t){if(e&&("string"==typeof e&&(e=_babel_runtime_corejs3_core_js_stable_parse_float__WEBPACK_IMPORTED_MODULE_24___default()(e)),"number"==typeof e)){var n=Math.pow(10,t||0);e=Math.round(e*n)/n}return e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"replaceEnter",(function(){return function(e){if(void 0!==e)return e.replace(/\r\n/gi,"<br/>&nbsp;&nbsp;")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"textToHtml",(function(){return function(e){return e&&(e=e.replace(/\r\n|\n/g,"<br/>")),e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"toTrusted",["$sce",function(e){return function(t,n){var i;"number"==typeof t&&(t=String(t)),"boolean"==typeof t&&(t=String(t));try{i=e.trustAsHtml(t)}catch(e){n?console.log("配置错误:"+t,"字段:"+(n.label||n.name)+","+n.key):console.log("配置错误:"+t)}return i}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"convertFromHtml",(function(){return function(e){if(""===e||void 0===e||null==e)return e;var t={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,n){return t[n]})).replace(/<br\s*\/?>/g," ")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"encodeUri",["$window",function(e){return e.encodeURIComponent}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dashboardDataListToString",(function(){return function(e){var t="";return _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(angular).call(angular,e,(function(e,n){t=t+e.value+","})),t=t.substring(0,t.length-1)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"creatCode",(function(){return function(e,t){return e=e?encodeURIComponent(e):"",window.cdn_domain+window.hcm_wengen+"/qrcode?data="+e+(t?"&size="+t.toString():"")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeOfDateTime",["$filter",function(e){return function(t){return"string"!=typeof t&&(t=__webpack_require__("wd/R")(t).format("YYYY-MM-DD hh:mm:ss")),e("dateFormat")(t,"hh:mm")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dateOfDateTime",["$filter",function(e){return function(t){return e("dateFormat")(t,"yyyy-MM-dd")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"detailTimeOfDateTime",["$filter",function(e){return function(t){return e("dateFormat")(t,"hh:mm:ss")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hourOfDateTime",["$filter",function(e){return function(t){return"string"!=typeof t&&(t=__webpack_require__("wd/R")(t).format("YYYY-MM-DD hh:mm:ss")),e("dateFormat")(t,"hh")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"minuteOfDateTime",["$filter",function(e){return function(t){return"string"!=typeof t&&(t=__webpack_require__("wd/R")(t).format("YYYY-MM-DD hh:mm:ss")),e("dateFormat")(t,"mm")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"periodOfDateTime",["$filter",function(e){return function(t){return"string"!=typeof t&&(t=__webpack_require__("wd/R")(t).format("YYYY-MM-DD")),e("dateFormat")(t,"yyyy年MM月")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"companyLogo",(function(){return function(e,t,n,i,o,a){null===e&&(e="company_default");var l="/img?index=";return a&&(l=a),window.cdn_domain+window.hcm_wengen+l+e+(t?"&size="+t.toString():"")+(n?"&blur="+n.toString():"")+(i?"&bright="+i.toString():"")+window.hcm_env_post}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"mmddOfDateTime",["$filter",function(e){return function(t){return e("dateFormat")(t,"MM-dd")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"fileType",(function(){return function(e){var t="",n=e.split(".");return 1===n.length?"unknown":(n.length>1&&(t=n.pop()),t)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"number2IP",(function(){return function(e){return(e>>24)+"."+(e>>16)%256+"."+(e>>8)%256+"."+e%256}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"YearMDtoYearM",(function(){return function(e){return"string"==typeof e&&10===e.length?_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_23___default()(e).call(e,0,7).replace("-","."):e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"employeeName",["contextService",function(e){return function(t){var n=e.getContext("auth");return n&&n.employee&&n.employee.id===t.id?"我":t.name}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"ages",["contextService",function(){return function(e){return(new Date).getFullYear()-new Date(e).getFullYear()}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"isEmptyObject",(function(){return function(e){for(var t in e)return!1;return!0}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"activityListValue",(function(){return function(e,t,n,i){return null==e?null:(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(e).call(e,(function(e){e.id===n&&(i=e.name||e.activity_name)})),i)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"listValue",(function(){return function(e,t,n,i){if(null==e)return null;var o=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,(function(e){return e?e[t]===n:null}));return o.length>0?i?o[0][i]:o[0]:null}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeToAge",(function(){return function(e){if("string"==typeof e&&""===e)return"";var t,n=new Date,i=new Date(e),o=n.getMonth()+1,a=i.getMonth()+1,l=n.getDate()+1,r=i.getDate()+1;return t=n.getFullYear()-i.getFullYear(),a<o||a===o&&r<=l||(t-=1),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"staticImageIconList",(function(){return function(e){return window.cdn_domain+window.hcm_wengen+"/img?index=icon_list_"+e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"staticImageChart",(function(){return function(e){return null===e&&(e=""),"../../resources/img/chart-"+e+".png"}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"objEqual",(function(){return function(e,t){if(!e||!t||"object"!==_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(e)||"object"!==_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(t))return!1;var n=_babel_runtime_corejs3_core_js_stable_object_get_own_property_names__WEBPACK_IMPORTED_MODULE_22___default()(e),i=_babel_runtime_corejs3_core_js_stable_object_get_own_property_names__WEBPACK_IMPORTED_MODULE_22___default()(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++){var a=n[o];if(e[a]!==t[a])return!1}return!0}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hrrecJobExperience",(function(){return function(e){switch(e=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default()(e)){case 0:return"不限";case 1:return"1年以下";case 2:return"1-3年";case 3:return"3-5年";case 4:return"5-10年";case 5:return"10年以上";default:return""}}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"highlight",(function(e,t){return function(t){return e.trustAsHtml(t)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hoursToMinutes",(function(){return function(e){return""===e||null===e?0:e/60===_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default()(e/60)?e/60:Math.round(e/60*100)/100}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"typeof",(function(){return function(e){return _babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"tryInteger",(function(){return function(e){return/^\d+$/.test(e)?_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_27___default()(e):e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"valueToFunc",["$rootScope",function(e){var t=function(e){return"function"==typeof e?e:function(){return e}},n="__show_err_mark__";return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){try{for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return t(e).apply(i,a)}catch(t){return void((null==e?void 0:e[n])||(console.error(t),"function"==typeof e&&(e[n]=!0)))}}}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"formatNumber",(function(e){return(e+"").replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,")})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"numberFormat",(function(){return function(e){if(null!==e){if(e>0){var t=/(?=(?!^)(\d{3})+$)/g;return(e+"").replace(/^\d+/g,(function(e){return e.replace(t,",")}))}return(""+e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hcNumber",["$filter",function(e){return function(t,n){return"number"==typeof t?e("number")(t,n):t}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hcListValueParse",(function(){return function(e,t,n,i){var o;return null==e?"":("object"!=_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(e)&&(e=e.toString().split(",")),e=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(e).call(e,(function(e){return e.toString()})),n=n||"value",i=i||"label",null==t||t instanceof Array&&!t.length?e.join():_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(o=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(t).call(t,(function(t){return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(e).call(e,t[n].toString())}))).call(o,(function(e){return e[i]})).join(","))}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"compareParse",["$filter",function(e){return function(t,n){var i=["eq","gt","lt","gte","lte","neq","like","in"],o=["=",">","<",">=","<=","!=","like","in"],a=[e("translate")("common_query_panel_equal"),e("translate")("common_query_panel_greater"),e("translate")("common_query_panel_less"),e("translate")("common_query_panel_greater_or_equal"),e("translate")("common_query_panel_less_or_equal"),e("translate")("common_query_panel_not_equal"),e("translate")("common_query_panel_like"),e("translate")("common_query_panel_in")];return"character"===n?o[_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(i).call(i,t)]:"translate"===n?a[_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(i).call(i,t)]:i[_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(o).call(o,t)]}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"arrayRemoveDuplicate",(function(){return function(e,t){if(t){var n={};return _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20___default()(e).call(e,(function(e,i){return!n[i[t]]&&(n[i[t]]=!0)&&e.push(i),e}),[])}return _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_19___default()(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_18___default.a(e))}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"arrayUnique",[function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(n){var i=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(t).call(t,(function(e){return e[n]}));return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,(function(e){return!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(i).call(i,e[n])}))}return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,(function(e){return!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(t).call(t,e)}))}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"arrayRepeat",[function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(n){var i=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(t).call(t,(function(e){return n?e[n]:e}));return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,(function(e){return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(i).call(i,e[n])}))}return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,(function(e){return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(t).call(t,e)}))}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"arrayMerge",["$filter",function(e){return function(t,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",a=arguments.length>3?arguments[3]:void 0,l=e("deepMerge")(e("toObj")(t,o),e("toObj")(n,o),a);return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(i=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(l)).call(i,(function(e){return l[e]}))}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"toObj",(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20___default()(e).call(e,(function(e,n){var i;e[n[t]]?_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(i=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(n)).call(i,(function(i){void 0!==n[i]&&(e[n[t]][i]=n[i])})):e[n[t]]=n;return e}),{})}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"objectKey",(function(){return function(e){return e?_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(e):[]}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"getArrEqual",(function(){return function(e,t){for(var n=[],i=0;i<t.length;i++)for(var o=0;o<e.length;o++)e[o]===t[i]&&n.push(e[o]);return n}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"isJSON",(function(){return function(e){return!angular.isArray(e)&&angular.isObject(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"deepMerge",["$filter",function(e){return function(t,n,i){return function t(n,o){var a;return _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(a=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(o)).call(a,(function(a){if(e("isJSON")(n[a]||{})&&e("isJSON")(o[a]))(n[a]||(n[a]={}))&&t(n[a],o[a]);else if(angular.isArray(n[a])&&angular.isArray(o[a]))if(e("isJSON")(n[a][0])&&n[a][0].key&&e("isJSON")(o[a][0])&&n[a][0].key){var l,r=e("toObj")(n[a]),c=e("toObj")(o[a]),s=t(r,c);n[a]=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(l=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(s)).call(l,(function(e){return s[e]}))}else _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(n[a])!==_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(o[a])&&(n[a]=o[a]);else{var d;if(i)i(n,o,a);else _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(d=[null,void 0]).call(d,o[a])||(n[a]=o[a])}})),n}(t,n)}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"getDocUrl",[function(){return function(e){return location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+e+window.hcm_env_pre}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"securityFilter",[function(){return function(e,t){var n=function(e,t){return("mce"===t?/<script|<html|<image|alert\(|prompt\(/:t?/<script|<html|<div|<td|<image|<table|alert\(|prompt\(|<style/:/<script|<html|<div|<a|<td|<image|<img|<table|alert\(|prompt\(|<style/).test(e)?null:e};return e=function e(i){if(angular.isArray(i))_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(i).call(i,(function(t,o){if(!Object(_components_pageComponent_list_reactive_index_ts__WEBPACK_IMPORTED_MODULE_38__.c)(t))return angular.isArray(t)||angular.isObject(t)?e(t):void(i[o]=n(t))}));else if(angular.isObject(i)){var o;_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(o=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(i)).call(o,(function(o){var a;if(!(null==t||null===(a=t[o])||void 0===a?void 0:a.xss_ignore)){if(angular.isArray(i[o])||angular.isObject(i[o]))return e(i[o]);var l,r;"hc-mark-down"===(null==t||null===(l=t[o])||void 0===l?void 0:l.component)?i[o]=n(i[o],!0):"hc-input-mce"===(null==t||null===(r=t[o])||void 0===r?void 0:r.component)?i[o]=n(i[o],"mce"):i[o]=n(i[o])}}))}else angular.isString(i)&&(i=n(i));return i}(e)}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"xss_filter",[function(){return function(e,t){return"string"==typeof e?xss__WEBPACK_IMPORTED_MODULE_37___default()(e):e}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"deepRemoveDop",["$filter",function(e){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",o=function t(n,o){var a,l,r;return _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_15___default()(n)&&_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_15___default()(o)?(r=!0,n=e("toObj")(n),o=e("toObj")(o)):r=!1,_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(a=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(o)).call(a,(function(a){var l;if(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(n[a])===_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(o[a])&&a!==i&&delete n[a],e("isJSON")(n[a])&&e("isJSON")(o[a])&&t(n[a],o[a]),angular.isArray(n[a])&&angular.isArray(o[a])&&e("isJSON")(n[a][0])&&e("isJSON")(o[a][0])){var r,c=e("toObj")(n[a]),s=e("toObj")(o[a]),d=t(c,s);n[a]=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(r=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(d)).call(r,(function(e){return d[e]}))}_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(l=["{}","[]","null",void 0]).call(l,_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(n[a]))&&delete n[a]})),r?_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(l=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(n)).call(l,(function(e){return n[e]})):n};return o(t,n)}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"slice",(function(){return function(e,t){return _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_23___default()(e).call(e,0,t)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeFormat",(function(){return function(e){var t=(e||"YYYY-MM-DD").toUpperCase(),n=t.match(/:..:..|:../);if(n){var i=n[0],o=t.split(i);o.length>1&&(t=o[0]+i.toLowerCase()+o[1])}return t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"parseQuaterAndHalfYear",(function(){return function(e){return"zh_cn"===window.hcm_language?null==e?void 0:e.replace(/(\d+)-(H|Q)(\d)/,(function(e,t,n,i){if("H"===n){if("1"===i)return t+" 上半年";if("2"===i)return t+" 下半年"}else if("Q"===n){if("1"===i)return t+" 一季度";if("2"===i)return t+" 二季度";if("3"===i)return t+" 三季度";if("4"===i)return t+" 四季度"}return e})):e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"convertYearQuarterToNumber",(function(){return function(e,t){var n;if("H"===t){if((n=e.replace(/上半年/g,"1"))!==e)return n;if((n=e.replace(/下半年/g,"2"))!==e)return n}if("Q"===t){if((n=e.replace(/一季度/g,"1"))!==e)return n;if((n=e.replace(/二季度/g,"2"))!==e)return n;if((n=e.replace(/三季度/g,"3"))!==e)return n;if((n=e.replace(/四季度/g,"4"))!==e)return n}return""}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"hash_key",(function(){return function(e){return Object(_utils_hash_key__WEBPACK_IMPORTED_MODULE_39__.a)(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"isValidValue",(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0,null,""];return!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(t).call(t,e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"getValue",["$filter",function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(null==n?void 0:n.length)?_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20___default()(n).call(n,(function(t,n){return e("isValidValue")(t)?t[n]:t}),t):t}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"getValid",["$filter",function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[null,void 0,""],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null===n&&(n=[null,void 0,""]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(t).call(t,(function(t){return!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_21___default()(n).call(n,e("getValue")(t,i))}))}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"firstValid",["$filter",function(e){return function(t,n,i){return e("getValid")(t,n,i)[0]}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"themeColor",["contextService",function(e){var t;return((null===(t=e.getContext("auth"))||void 0===t?void 0:t.company)||{}).theme_color||"#03a9f4"}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"sortByKey",(function(){return function(e){return function e(t){var n,i,o;(n=angular.isArray(t)?[]:angular.isObject(t)?{}:t,"object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(n)&&n)&&_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(i=_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_14___default()(o=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(t)).call(o)).call(i,(function(i){n[i]=t[i],"object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(n[i])&&(n[i]=e(n[i]))}));return n}(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"exprToArr",(function(){return function(e){var t=[],n=function e(n){for(var i in n){var o;"object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(n[i])?e(n[i]):"string"==typeof n[i]&&_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_13___default()(o=n[i]).call(o,"expression")&&t.push(n[i])}};return n("string"==typeof e?{content:e}:e),t}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"arrToOriginObject",(function(){return function(e,t){var n=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_32___default()(t),i=0;return"string"==typeof n?n=e[i]:function t(n){for(var o in n){var a;"object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(n[o])?t(n[o]):"string"==typeof n[o]&&_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_13___default()(a=n[o]).call(a,"expression")&&(n[o]=e[i],i++)}}(n),n}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"deepCopy",(function(){return function(e){return JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e))}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"createVersion",(function(){return function(e){return e+_babel_runtime_corejs3_core_js_stable_date_now__WEBPACK_IMPORTED_MODULE_12___default()()}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"indexOf",(function(){return function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"key";return _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_25___default()(n=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_29___default()(e).call(e,(function(e){return e[i]}))).call(n,t[o])}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"strMask",(function(){return function(e,t){var n;return _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_26___default()(n=t.split(";")).call(n,(function(t){var n=t.split(",");(e===n[0]||""===n&&null==e)&&(e=n[1])})),e}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"attachmentToArray",(function(){return function(e){return null==e?void 0:e.split("#")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeFormatOne",["$filter",function(e){return function(t){if(""===t)return"";switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(t)){case"undefined":return"";case"string":t=new Date(t.replace(/-/g,"/"));break;case"number":t=new Date(t);break;case"object":break;default:return""}var n=new Date,i=n-n%864e5-288e5-t.getTime(),o=36e5,a=Math.floor;if(isNaN(i))return data;if(a(i/o)<=0){return e("date")(t,"HH:mm")}if(a(i/o)<=24)return"昨天";if(a(i/864e5)<=6){return["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}var l=t.getFullYear()===n.getFullYear(),r="";return l?r="MM/dd":l||(r="yyyy/MM/dd"),e("date")(t,r)}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeFormatTwo",["$filter",function(e){return function(t){if(""===t)return"";switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(t)){case"undefined":return"";case"string":t=new Date(t.replace(/-/g,"/"));break;case"number":t=new Date(t);break;case"object":break;default:return""}var n=new Date,i=n-n%864e5-288e5-t.getTime(),o=36e5,a=Math.floor;if(isNaN(i))return data;if(a(i/o)<=0){return e("date")(t,"HH:mm")}if(a(i/o)<=24)return"昨天";if(a(i/864e5)<=6){return["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][t.getDay()]}var l=t.getFullYear()===n.getFullYear(),r="";return l?r="MM-dd":l||(r="yyyy-MM-dd"),e("date")(t,r)}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"timeFormatThree",["$filter",function(e){return function(t){if(""===t)return"";switch(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_30___default()(t)){case"undefined":return"";case"string":t=new Date(t.replace(/-/g,"/"));break;case"number":t=new Date(t);break;case"object":break;default:return""}return e("date")(t,"yyyy-MM-dd")}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"objectFilter",(function(){return function(e,t){var n,i;return _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_20___default()(n=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(i=_babel_runtime_corejs3_core_js_stable_object_entries__WEBPACK_IMPORTED_MODULE_11___default()(e)).call(i,(function(e){var n=_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10___default()(e,2),i=n[0],o=n[1];return t(i,o)}))).call(n,(function(e,t){var n=_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10___default()(t,2),i=n[0],o=n[1];return e[i]=o,e}),{})}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"dayOfMonthEnd",(function(){return function(e){return moment__WEBPACK_IMPORTED_MODULE_35___default()(e+"-01").endOf("month").format("YYYY-MM-DD")}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"marked",(function(){return function(e){return Object(marked__WEBPACK_IMPORTED_MODULE_36__.marked)(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"recDetailEliminateLabel",["contextService",function(e){return function(t){var n=e.getContext("auth").company_setting.recruit_service_resume_eliminate_display,i=n?null==n?void 0:n.resume_detail_eliminate_label:null;return i&&"淘汰"!==i&&(t=t.replace("淘汰",i)),t}}]),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"htmlEncode",(function(){return function(e){return function(e){return null==e?e:0===(null==e?void 0:e.length)?"":(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\//g,"&#x2F;")}(e)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"recInterviewAvg",(function(){return function(e){return e<=5?_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9___default()(e):e<=10?_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9___default()(e/10*5):_babel_runtime_corejs3_core_js_stable_math_trunc__WEBPACK_IMPORTED_MODULE_9___default()(e/100*5)}})),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_31___default()(_app__WEBPACK_IMPORTED_MODULE_33__.a).call(_app__WEBPACK_IMPORTED_MODULE_33__.a,"addBracket",(function(){return function(e){return"（".concat(e,"）")}}))},"+HzY":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("526F"),o=n.n(i),a=n("mrSG"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.use_more_paging={pc:!1,mobile:!1},n.setTitle=!0,o()(n,t),n}return Object(a.d)(t,e),t}((function(e){o()(this,e)}))},"+JCO":function(e,t,n){e.exports='\x3c!--移动端顶部tab移动到此处--\x3e\n\x3c!--<div class="hcm-nav-mobile"--\x3e\n\x3c!--     ng-if="client===\'mobile\'&&multi_level==false&&base_config.tab_position!==\'bottom\'&&!child_select_status">--\x3e\n\x3c!--    <div class="tab" ng-style="{transform: scrollIntoView()}">--\x3e\n\x3c!--        <div ng-repeat="_item in nav_items |orderBy: \'sequence\' track by $index" class="tab-item"--\x3e\n\x3c!--             ng-click="goChild(_item,$event)"--\x3e\n\x3c!--             ng-class="{\'selected\':isCurrent(_item)}"--\x3e\n\x3c!--             ng-hide="(_item.hide|valueToFunc)() || !isValidNavItem(_item)"--\x3e\n\x3c!--             ng-style="nav_items.length>3?{width: \'33.33%\', flex: \'none\'}:{flex: 1}"--\x3e\n\x3c!--        >--\x3e\n\x3c!--            <div class="tab-label">--\x3e\n\x3c!--                {{_item.label}}--\x3e\n\x3c!--                <span  ng-if="_item.showCount" class="badge">--\x3e\n\x3c!--                        {{_item.count}}--\x3e\n\x3c!--                    </span>--\x3e\n\x3c!--            </div>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--    </div>--\x3e\n\x3c!--</div>--\x3e\n<div class="mobile-title" ng-if="list_config.mobile_title">\n    <div class="mobile-title-line">\n        <div class="image">\n            <img class="title-image" ng-src="{{list_config.title_image}}">\n        </div>\n        <span class="title"\n              ng-bind-html="((list_config.title|valueToFunc)() || model_meta.description || model_meta.name)|toTrusted">\n        </span>\n    </div>\n    <div class="mobile-title-btn">\n        <span class="outside-action-icon sys-color {{list_btn_model.mobile_outside_actions().options.icon ? list_btn_model.mobile_outside_actions().options.icon : \'icon-hcm-refresh\'}}"\n              ng-click="list_btn_model.$itemFunc(list_btn_model.mobile_outside_actions())"\n              ng-if="list_config.mobile_title"\n        ></span>\n        <div class="title-show-more-button">\n            <hc-mobile-header-btn model="$dialog ? null : list_btn_model" position="\'header\'"></hc-mobile-header-btn>\n        </div>\n    </div>\n</div>\n<div class="operates-box"\n     ng-class="{\'topFilter\':findTopFilters(model_meta.filters)}"\n     ng-hide="(hideComponents || []).includes(\'hcm-hc-list-mobile-search-box\')">\n    <div class="top-filter"\n         ng-if="findTopFilters(model_meta.filters)">\n        <hc-form model="top_filter"></hc-form>\n    </div>\n    <div class="operates"\n         ng-class="hide_search !== \'pause\'? (hide_search? \'hide-top\':\'show-top\'):\'\'"\n         ng-style="{\'box-shadow\': model_meta.advance_query.mobile_outside_query === true ? \'none\' : \'\'}">\n        \n        \n         <hc-tabs ng-if="category_field && category_type===\'tabs\' && !category_tabs_style && !mobile_content_category"\n                 value="category_id"\n                 ng-hide="tabPanes && !tabPanes.length"\n                 on-value-change="onTabsValueChange">\n            <hc-tab-pane\n                ng-repeat="tab in tabPanes track by $index"\n                label="tab.name"\n                name="tab.id"\n                count="tab.count"\n                children="tab.children"\n                hide-count="list_config.hide_count"\n            ></hc-tab-pane>\n        </hc-tabs>\n        \n\n        <div class="tabs scrollTabs" ng-if="category_field && category_type===\'tabs\' && category_tabs_style"\n            ng-hide="tabPanes && !tabPanes.length">\n            <span ng-repeat="tab in tabPanes track by $index" \n                    ng-class="{\'selected\':category_id === tab.id}"\n                    ng-click="onTabsValueChange(tab.id)">\n                {{tab.name}}\n                <span ng-if="!list_config.hide_count">{{tab.count}}</span>\n            </span>\n        </div>\n        <div class="linear-background" ng-if="category_field && category_type===\'tabs\' && category_tabs_style"></div>\n\n\n        <div class="operates-line operates-height blur-query"\n        ng-if="!(model_meta.advance_query.mobile_outside_query === \'attendance\' || list_config.mobile_title)"\n        ng-class="{\'blur-query-white\': mobile_search_white}"\n        ng-hide="(hideComponents || []).includes(\'hcm-hc-list-mobile-query\')">\n        <span class="icon-hcm-menu operates-icon left"\n              ng-if="!params.disableEdit\n              && (category_type===\'nav\' && category_field\n                  || nav_items && multi_level\n              ) && !bottom_switch"\n              ng-click="showMenu()"></span>\n            <div class="search">\n                <span class="icon icon-hcm-check"></span>\n                <form action="" ng-submit="$event.preventDefault()">\n                    <input ng-model="searchKey.key"\n                    placeholder="{{blur_fields}}" type="search"\n                    ng-change="searchKey.change()"\n                    ng-model-options="{debounce:500}">\n                </form>\n                <span class="icon icon-hcm-delete-circle-solid right"\n                      ng-if="searchKey.key"\n                      ng-click="searchKey.clear()"></span>\n            </div>\n            <div class="operates-icon">\n                <div ng-click="showQuery()" class="show-filter" ng-if="!show_mobile_simple_query && !model_meta.advance_query.mobile_outside_query">\n                    <span class="icon-hcm-screening"></span>\n                </div>\n                \x3c!--            <div class="show-filter"--\x3e\n                \x3c!--                 ng-repeat="a in list_btn_model.common_used_actions"--\x3e\n                \x3c!--                 ng-class="{\'sys-color\':a.is_important}"--\x3e\n                \x3c!--                 ng-click="list_btn_model.$itemFunc(a)"--\x3e\n                \x3c!--                 ng-if="!selector_flag&&list_btn_model.common_used_actions.length">--\x3e\n                \x3c!--                <span ng-class="a.icon"></span>--\x3e\n                \x3c!--            </div>--\x3e\n                \x3c!-- 切换list_view --\x3e\n\n                <div class="change-list-view"\n                    data-ng-if="((list_model.view_list_config|objectKey).length>1)||model_meta.analyse.open"\n                    data-ng-click="clickChangeListView()">\n                    <div class="view-menu">\n                        <div class="icon {{viewSwitch.current[\'icon\']}}"></div>\n                    </div>\n                </div>\n\n                <hc-mobile-header-btn model="$dialog ? null : list_btn_model" position="\'header\'"></hc-mobile-header-btn>\n\x3c!--                <hc-mobile-btn model="$dialog ? null : list_btn_model" position="\'header\'"></hc-mobile-btn>--\x3e\n            </div>\n        </div>\n        <div class="operates-line operates-content">\n            \x3c!--<div ng-if="list_model.selector_type==2&&[\'list\',\'card\', \'rec\'].indexOf(list_model.view)>=0" class="select-all">--\x3e\n            \x3c!--'+n("Whvs")+'--\x3e\n            \x3c!--</div>--\x3e\n            \x3c!--<div class="org-filter" ng-if="mobile_tree_config">--\x3e\n            \x3c!--<hc-selector-depart ng-model="tree_model.selectedNode.id"--\x3e\n            \x3c!--ng-if="mobile_tree_config.options.tree_type!==\'common\'"--\x3e\n            \x3c!--options="mobile_tree_config.options"></hc-selector-depart>--\x3e\n\n            \x3c!--<hc-tree-selector ng-model="mobile_tree_id"--\x3e\n            \x3c!--ng-if="mobile_tree_config.options.tree_type===\'common\'"--\x3e\n            \x3c!--options="mobile_tree_config.options"></hc-tree-selector>--\x3e\n            \x3c!--</div>--\x3e\n            <div class="advance-query operates-height">\n                \x3c!--移动端暂时不需要方案--\x3e\n                <div class="plan" ng-click="showSubTitle($event)" ng-if="sub_title_model">\n                    <span class="input-icon icon-hcm-copy"></span>\n                </div>\n                <hc-form model="sub_title_model" class="sub-mobile-title"></hc-form>\n            </div>\n        </div>\n        <div class="count" ng-if="list_config.showMobileTotal && paging.total_count>0">\n            共 <span class="number">&nbsp;{{paging.total_count}}&nbsp;</span> 条\n            <span class="more" ng-click="showCount()" ng-if="stat_meta.length>0 && stat_data.length>0">查看合计</span>\n        </div>\n    </div>\n    <div ng-if="show_select_operates" class="enter_select_status">\n    <span ng-click="selectListData()"\n          ng-style="{visibility:list_model.selector_type===2?\'visible\':\'hidden\'}">全选</span><span\n        ng-click="leaveSelected()">退出</span>\n    </div>\n    <div class="mobile-show-filter"\n         ng-if="!selector_flag&&list_btn_model.common_used_actions.length">\n        <div class="show-filter show-filter-btn"\n             ng-repeat="a in list_btn_model.common_used_actions"\n             ng-hide="(a.hide|valueToFunc)()"\n             ng-class="{\'sys-color\':a.is_important}"\n             ng-click="list_btn_model.$itemFunc(a)"\n        >\n            {{a.label}}\n        </div>\n    </div>\n    <div class="mobile-outside-mode-query"\n         ng-class="{\'mobile-attendance-mode-query\':model_meta.advance_query.mobile_outside_query === \'attendance\',\n                    \'tip-area\':list_config.attendance_tip,\n                    \'mobile-title-mode-query\':list_config.mobile_title,\n                    \'has-tabs\':category_field && category_type===\'tabs\',\n                    \'content-category\': mobile_content_category}"\n         ng-if="model_meta.advance_query.mobile_outside_query\n             || model_meta.advance_query.mobile_outside_query === \'attendance\'\n             || list_config.mobile_title"\n         ng-show="!list_model.select_status || $dialog.isActive"\n    >\n        <hc-query model=\'advance_query\'\n                  ng-if="!model_meta.advance_query.close&&!use_new_query"\n        ></hc-query>\n        <span class="search-icon sys-color {{list_btn_model.mobile_outside_actions().options.icon ? list_btn_model.mobile_outside_actions().options.icon : \'icon-hcm-refresh\'}}"\n              ng-click="list_btn_model.$itemFunc(list_btn_model.mobile_outside_actions())"\n              ng-if="model_meta.advance_query.mobile_outside_query === \'attendance\'"\n        ></span>\n        <div class="model_list_tip"\n             ng-style="list_config.attendance_tip_config.style.tip_content"\n             ng-if="list_config\n                 && list_config.attendance_tip\n                 && list_config.attendance_tip_config.mobile\n                 && model_meta.advance_query.mobile_outside_query === \'attendance\'"\n             style=""\n        >\n            <span class="text"\n                  ng-style="list_config.attendance_tip_config.style.text"\n            >\n                {{(list_config.attendance_tip|valueToFunc)()}}\n            </span>\n        </div>\n        <hc-query-new model=\'advance_query\'\n                      ng-if="!model_meta.advance_query.close&&use_new_query"\n        ></hc-query-new>\n    </div>\n</div>\n'},"+KAf":function(e,t){e.exports='<div class="board-anchors" ng-init="init()">\n    <div class="anchor-items">\n        <div ng-repeat="anchor in anchor_list track by $index" class="anchor-item">\n            <div class="label" ng-click="selectNav(anchor, $event)">{{anchor.label}}</div>\n            <div class="sub-anchor" ng-if="anchor.child&&anchor.child.length>0" ng-repeat="sub in anchor.child"\n                 ng-click="selectNav(sub, $event)">\n                {{sub.label}}\n            </div>\n        </div>\n    </div>\n</div>'},"+UZt":function(e,t,n){"use strict";var i=n("7X6o"),o=n.n(i);n("qQ3m"),n("zk52"),n("/8mQ");app.controller("HCMMetaChangeCtrl",["$q","$scope","metaService","CompanyMetaService",function(e,t,n,i){t.model=t.params.model,t.biz_type=t.params.biz_type,t.state=t.params.state,i.getChangeList(t.params.meta_key,t.model,t.state,t.biz_type,t.params.type).then((function(e){t.meta_list=e})),t.changeMeta=function(e){t.$dialog.resolve_data(e),t.$dialog.dialog_close()}}]),t.a={controller:"HCMMetaChangeCtrl",title:"切换元数据",template:o.a}},"+YUs":function(e,t){e.exports='<div class="query-input-datetime" ng-init="init()">\n    <hc-form model="base_form"></hc-form>\n</div>\n'},"+hqv":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("4mDm"),n("oVuX"),n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JfAA"),n("PKPk"),n("UxlC"),n("EnZy"),n("GKVU"),n("x83w"),n("3bBZ");var i=n("TEMH"),o=n.n(i),a=n("ZbhI"),l=n.n(a),r=n("OBge"),c=n.n(r),s=n("KYsz"),d=n.n(s),u=n("+oHS"),_=n.n(u),p=n("M5Mt"),m=n.n(p),f=n("nhkr"),h=n.n(f),g=n("RXMP"),v=n.n(g),b=n("/FZm"),y=n.n(b),w=n("6UaR"),x=n.n(w),k=n("eLKs"),O=n.n(k),D=n("FLGM"),C=n.n(D),M=n("5PDf"),S=n.n(M),E=n("WxoT"),P=n.n(E),j=n("526F"),T=n.n(j),A=n("Kwsy"),I=n.n(A),L=n("mnMc"),F=n.n(L),R=n("o+MX"),B=n.n(R),U=n("d8FT"),q=n.n(U),W=n("QkVN"),z=n.n(W),N=n("mrSG"),K=n("8Auy"),H=n("xAfy"),V=n("R91f"),Y=n("UtpJ"),G=n.n(Y),J=n("CoJ3"),X=n("OrM7"),Q=n("2eFn"),Z=n.n(Q),ee=(n("1LhX"),n("k2n1"),function(e){function t(t,n,i,o,a,l,r,c,s,d,u,_){var p=e.call(this,t,n,i,o,a,l,r,c,s,_)||this;p.queryService=d,p.metaEditorService=u;var m=p;return p.submit=function(){return Object(N.c)(p,void 0,void 0,(function(){var e,n,i,o,l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return[4,m.getVisualizationMeta()];case 1:return e=r.sent(),n=P()(e),[4,m.metaEditorService.validate_and_fix_meta("list",n)];case 2:return i=r.sent(),o=i?P()(i):n,[4,a.setMetaWithModifier(t.params.meta_key,o)];case 3:return l=r.sent(),m.$dialog.resolve_data(l),m.$dialog.dialog_close(),[2]}}))}))},p}return Object(N.d)(t,e),t.prototype.initMetaInfo=function(){var t;return Object(N.c)(this,void 0,void 0,(function(){var n;return Object(N.e)(this,(function(i){switch(i.label){case 0:return n=this,[4,this.service.getBizMeta(this.params.biz_type||"list",null===(t=this.params)||void 0===t?void 0:t.state,!0)];case 1:return n.meta_info=i.sent(),this.origin_meta_info=angular.copy(this.meta_info),[4,e.prototype.initMetaInfo.call(this)];case 2:return i.sent(),[2]}}))}))},t.prototype.transMetaInfo=function(){var t;e.prototype.transMetaInfo.call(this),this.meta_info.filters=G()(t=this.queryService.transCompleteFields(this.AvailableFields,this.meta_info.filters)[2]).call(t,0,this.meta_info.advance_query.default_meta_length||3)},t.prototype.getVisualizationMeta=function(){var e,t;return Object(N.c)(this,void 0,void 0,(function(){var n,i,o,a;return Object(N.e)(this,(function(l){var r,c,s;switch(l.label){case 0:return n=angular.copy(this.meta_info),i=[],C()(r=this.AvailableFields).call(r,(function(e){i=B()(i).call(i,e.info_fields)})),o=this.$filter("deepRemoveDop")(angular.copy(this.meta_info.filters),i),n.filters=this.setSequence(o),C()(c=_()(n)).call(c,(function(e){var t,i;F()(t=["fields","filters","sorts","statistics"]).call(t,e)&&(n[e]=C()(i=n[e]).call(i,(function(t){if(delete t.category_key,delete t.category_name,delete t.name,"filters"===e&&delete t.oldIndex,"statistics"===e&&(delete t.sequence,delete t.data_type),"sorts"===e){delete t.label;var n={};n.key=t.key,n.type=t.type,n.sequence=t.sequence,t=n}return t})))})),n.advance_query.default_meta_length=this.meta_info.filters.length,a=null===(e=n.fields)||void 0===e?void 0:C()(e).call(e,(function(e){return e.key})),C()(s=this.origin_meta_info.fields).call(s,(function(e){F()(a).call(a,e.key)||n.fields.push({key:e.key,hide:!0})})),(null===(t=this.columnDefsService.column_defs)||void 0===t?void 0:t.length)&&(n.column_defs={children:this.columnDefsService.column_defs}),[4,this.service.generate_diff_meta(this.$scope.params.meta_key,P()(n))];case 1:return[2,l.sent()]}}))}))},t.$inject=["$scope","$controller","$q","BaseCRUDService","CompanyMetaService","$hcReportDataset","$hcQueryField","$filter","$hcDialog","queryService","MetaEditorService","columnDefsService"],t}(X.a)),te={controller:"listVisualizationInfo as $ctrl",name:"listVisualization",title:"列表设计",template:Z.a};J.a.controller("listVisualizationInfo",ee);var ne=n("gj9F"),ie=n("mJ0u"),oe=n("wd/R"),ae=n.n(oe),le=(n("TWNs"),n("iYz8")),re=n.n(le),ce=n("Dcj1"),se=n.n(ce),de=n("O0yt"),ue=n.n(de),_e=n("0lTi"),pe=n.n(_e),me=n("a0dU"),fe=n.n(me),he=n("Vi3r"),ge=n.n(he),ve=(n("ls82"),n("SPx3")),be=n.n(ve),ye=n("NjHp"),we=n.n(ye);function xe(e){if(void 0===ue.a||null==se()(e)){if(x()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return ke(e,t);var i=G()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return pe()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ke(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=re()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}window.app.controller("BaseCountDialogCtrl",["$controller","$rootScope","$scope","$hcListNew","$filter","$hcQuery",function(e,t,n,i,o,a){n.init=be()(fe.a.mark((function e(){var t,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.data=n.params.data,n.dialogOperate(),n.initSearch(),"async"!==n.params.stat_mode){e.next=16;break}return e.next=6,(i=n.params).loader.apply(i,ge()(n.params.load_params));case 6:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===t;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=t.list;case 15:n.data=e.t2;case 16:n.initList();case 17:case"end":return e.stop()}}),e)}))),n.initList=function(){var e,t=[];null===(e=n.params.meta)||void 0===e||C()(e).call(e,(function(e){var i=n.data[0][e.key]||n.data[0][e.field];t.push({key:e.label,value:o("number")(i,e.decimal||n.params.statistics_decimal||e.precision||0)||i})})),n.all_data=t,n.list_model=i.createList().$setRowSelector(0).$setOptions(n.list_config).$setColumns(n.list_meta).$setData(t)},n.initSearch=function(){n.advance_query=a.create(),n.advance_query.close=!0,n.advance_query.display_callback=function(){var e=function(e){var t,i=new RegExp(e),o=[],a=xe(n.all_data);try{for(a.s();!(t=a.n()).done;){var l=t.value;i.test(l.key)&&o.push(l)}}catch(e){a.e(e)}finally{a.f()}return o}(n.advance_query.filter_str);n.list_model.$setData(e)}},n.dialogOperate=function(){n.$dialog.title("数据合计"),n.$dialog.operates([{label:"返回",left:!0,func:n.$dialog.dialog_close},{label:"确定",func:n.$dialog.dialog_close,default:!0}])},n.list_meta=[{key:"key",label:"名称",field:["key"]},{key:"value",label:"总额",field:["value"]}],n.list_config={list_meta:{content:{top_left_area:[{key:"key",class:"font-16"}],top_right_area:[{key:"value",class:"font-20"}]},dynamic_template:!0,hide_label:!0}}}]);var $e={controller:"BaseCountDialogCtrl",template:we.a},Oe=n("1hbj"),De=n("SaSt"),Ce=(n("PO7L"),n("0iTM")),Me=n.n(Ce);window.app.controller("ProcessTips",["$scope","dataService",function(e,t){e.init=function(){e.process_status="notify",e.process_tips={notify:[{info:"任务开始...",status:"notify"}],error:[],success:[]},e.executeWsApi(),e.$dialog.title(e.params.title).operates(e.params.operates||[{label:"关闭",func:e.close,default:!1}])},e.executeWsApi=function(){t.callHcmOpenWebSocket(e.params.ws_api,e.params.ws_param).then((function(t){e.process_tips.notify.push({info:"任务结束...",status:"success"}),e.showResult(),e.params.success&&e.params.success(t)}),(function(t){e.process_tips.notify.push({info:"任务结束...",status:"error"}),e.showResult(),e.params.error&&e.params.error(t)}),(function(t){var n;v()(n=_()(e.process_tips)).call(n,(function(n){t[n]&&e.process_tips[n].push({info:t[n],status:n})})),e.params.notify&&e.params.notify(t)}))},e.showResult=function(){var t;v()(t=_()(e.process_tips)).call(t,(function(t){e.process_tips[t].length&&(e.process_status=t)}))},e.selectNav=function(t){e.process_status=t},e.close=function(){e.$dialog.resolve_data(),e.$dialog.dialog_close()}}]);var Se={controller:"ProcessTips",template:Me.a},Ee=n("1GJp"),Pe=(n("mfck"),n("Y/Ez")),je=(n("TeQF"),n("c4uG"),n("b/Sd"),n("srGB"),n("bQov"));window.app.directive("baseAnalyses",(function(){return{restrict:"E",template:n("KNvP"),scope:{model:"="},controller:["$scope","$rootScope","$hcDialog","BaseCRUDService","$q","dataToolService",function(e,t,n,i,o,a){var l=i.getModelService("CommonDashBoardDefine");e.init=function(){e.getThemeList(),e.setOperate(),e.sortable_config={sort:!1,animation:300}},e.getThemeList=function(){i.getModelService("CommonDashBoardDefine").getItemList(null,e.model.theme_filter).then((function(t){t&&t.list.length>0&&(e.theme=t.list[0],e.getPluginList())}))},e.switchTheme=function(){n.getDialog(Object(je.a)("CommonDashBoardDefine","state")).show({filter_dict:e.model.theme_filter,current_plan:e.model.current_plan}).then((function(t){e.theme=t,e.getPluginList()}))},e.getPluginList=function(){l.getItemInfo(e.theme.id).then((function(t){var n;e.plugins=C()(n=t.analysis||[]).call(n,(function(t){return t.filter=S()(e.model),t}))}))},e.add_plugin=function(){n.getDialog(a.getWidget()["home-widget-dashboard"]).params({category:e.model.theme_filter,filter:S()(e.model)}).show().then((function(n){e.plugins.push(n),l.editItem(e.theme.id,{analysis:e.plugins}).then((function(e){e&&t.show_warning("添加成功")}))}))},e.edit_plugin=function(t,i){"dashboard_child"===t.key&&n.getDialog(a.getWidget()["home-widget-dashboard"]).params(angular.extend(t.params,{category:e.model.theme_filter,filter:S()(e.model)})).show().then((function(t){e.plugins[i]=t}))},e.delete_plugin=function(n){var i;e.plugins=S()(i=e.plugins).call(i,(function(e){return e!==n})),l.editItem(e.theme.id,{analysis:e.plugins}).then((function(e){e&&t.show_warning("删除成功")}))},e.model.refresh=function(){e.refresh_chart()},e.refresh_chart=function(){var t;C()(t=e.plugins).call(t,(function(t){t.filter=S()(e.model)})),e.init()},e.restore_layout=function(){n.confirm("是否恢复默认布局?",[{caption:"确认",func:function(){e.modifyPlugins([])}}])},e.adjust_layout=function(){e.sortable_config.sort=!0},e.cancel_adjust_layout=function(){e.sortable_config.sort=!1},e.save_adjust_layout=function(){l.editItem(e.theme.id,{analysis:e.plugins}).then((function(n){n&&t.show_warning("修改成功"),e.sortable_config.sort=!0}))},e.setOperate=function(){e.plugins_set=[],e.operate=[{key:"refresh_chart",icon:"icon-hcm-refresh",label:"刷新视图",hide:!0,click:function(){this.hide=!0,e.refresh_chart()}},{key:"add_plugins",icon:"icon-hcm-add-circle-solid",label:"添加插件",click:e.add_plugin},{key:"adjust_layout",icon:"icon-production",label:"调整布局",click:e.adjust_layout}]}}]}}));n("ortS");window.app.directive("analysesBoard",(function(){return{restrict:"E",template:n("F6/P"),scope:{model:"="},controller:["$scope","$rootScope","$hcDialog","BaseCRUDService","$q","dataToolService","$hcBoard","$hcListBtn",function(e,t,n,i,o,a,l,r){var c,s=i.getModelService("AnalysisBoardDefine");e.meta_info={},e.init=function(){e.getThemeList(),e.sortable_config={sort:!1,animation:300}},e.getThemeList=function(){i.getModelService("AnalysisBoardDefine").getItemList(null,angular.extend(e.model.theme_filter,{scheme:S()(e.model).filter_dict.program_id})).then(function(){var t=be()(fe.a.mark((function t(n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n&&n.list.length>0)){t.next=4;break}return e.theme=n.list[0],t.next=4,e.initTheme();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.switchTheme=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("setup"!==e.state){t.next=3;break}return t.next=3,n.confirm("设计模式下切换主题将会丢失未保存的配置，是否继续？");case 3:n.getDialog(Object(je.a)("AnalysisBoardDefine","board")).show({filter_dict:angular.extend(e.model.theme_filter,{scheme:S()(e.model).filter_dict.program_id}),current_plan:e.model.current_plan}).then(function(){var t=be()(fe.a.mark((function t(n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.theme=n,t.next=3,e.initTheme();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),e.initTheme=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadMetaInfo();case 2:e.initAction(),e.initBoard(),e.applyMetaInfo(),e.state="view",I()((function(){e.refreshData()}));case 7:case"end":return t.stop()}}),t)}))),e.initBoard=function(){e.board_model=l.createBoard()},e.initAction=function(){e.action_model=r.createListBtn().$setMeta(e.action_meta)},e.applyMetaInfo=function(){e.applyFilterMeta(),e.applyBordMeta()},e.applyBordMeta=function(){var t;e.board_model.setComponent((null===(t=e.meta_info)||void 0===t?void 0:t.components)||[])},e.applyFilterMeta=function(){var t;e.board_model.setContextMeta((null===(t=e.meta_info)||void 0===t?void 0:S()(t))||[])},e.saveMetaInfo=function(){s.editItem(e.theme.id,{meta_info:P()(e.meta_info)}).then((function(){e.sortable_config.sort=!0}))},e.loadMetaInfo=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getItemInfo(e.theme.id);case 2:e.board_info=t.sent,e.meta_info=T()({components:[]},angular.copy(JSON.parse(e.board_info.meta_info)));case 4:case"end":return t.stop()}}),t)}))),e.setupBoard=function(){e.state="setup",e.board_model.setState("setup"),e.board_meta_listener=e.$watch("board_model.components",(function(){e.meta_info.components=angular.copy(e.board_model.components)}),!0),e.origin_meta_info=angular.copy(e.meta_info)},e.discardSetup=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state="view",e.board_model.setState("view"),e.board_meta_listener(),angular.equals(e.origin_meta_info,e.meta_info)){t.next=8;break}return e.meta_info=angular.copy(e.origin_meta_info),e.applyMetaInfo(),t.next=8,e.refreshData();case 8:case"end":return t.stop()}}),t)}))),e.confirmSetup=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state="view",e.board_model.setState("view"),e.board_meta_listener(),angular.equals(e.origin_meta_info,e.meta_info)){t.next=6;break}return t.next=6,e.saveMetaInfo();case 6:case"end":return t.stop()}}),t)}))),e.addComponent=function(){n.getDialog(Object(je.a)("HCMBoardWidget","selector",!0)).params({filter_dict:{id:["00001","00027"]}}).show().then((function(t){var n={};switch(t.component){case"hc-board-data-chart":n={title:t.name,data:[{class:"list",key:"main",name:"main",source:{type:"model",model:e.model.theme_filter.model,state:e.model.theme_filter.state}}]};break;case"hc-board-stat-report":var i=function(e){var t,n="";return v()(t=e.field).call(t,(function(e,t){n=0===t?n+e:n+".".concat(e)})),n},o=T()({},e.model.model_meta.fields[0],{dim:{field:i(e.model.model_meta.fields[0])}}),a=T()({},e.model.model_meta.fields[1],{dim:{field:i(e.model.model_meta.fields[1])}});n={title:t.name,block_info:{class:"list",source:{type:"model",model:e.model.theme_filter.model,state:e.model.theme_filter.state}},class:"list",source:{type:"model",model:e.model.theme_filter.model,state:e.model.theme_filter.state},data:{dim:[o,a],aggr:[{label:"id",key:"master_id",field:["master_id"],aggr:{ag:"count",field:"id"}}]}}}e.board_model.addComponent({key:"component_".concat(Object(H.m)()),title:t.name,options:n,position:"1,1,12,9",component:t.component})}))},e.model.refresh=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initTheme();case 2:case"end":return t.stop()}}),t)}))),e.advanceSetting=function(){n.getDialog(Ee.a).title("高级设置").show({data:e.meta_info}).then(function(){var t=be()(fe.a.mark((function t(n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.meta_info=JSON.parse(n),t.next=3,e.applyMetaInfo();case 3:return t.next=5,e.refreshData();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.refreshData=function(){e.board_model.setContext(S()(e.model).filter_dict),e.board_model.refreshBoard(!0)},e.action_meta=[{key:"refresh",label:"刷新",icon:"icon-hcm-refresh",func:(c=be()(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshData(!0);case 2:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)}),hide:function(){return"view"!==e.state},is_important:!0},{key:"setup",label:"设计",icon:"icon-production",func:e.setupBoard,hide:function(){return"view"!==e.state},is_important:!1},{key:"add",label:"添加图表",func:e.addComponent,hide:function(){return"setup"!==e.state},is_important:!0},{key:"save",label:"保存",icon:"icon-hcm-add-circle-solid",func:e.confirmSetup,hide:function(){return"setup"!==e.state},is_important:!1},{key:"discard",label:"放弃",icon:"icon-hcm-delete-circle-solid",func:e.discardSetup,hide:function(){return"setup"!==e.state},is_important:!1},{key:"adv_setting",label:"高级设置",icon:"icon-hcm-set",func:e.advanceSetting,hide:function(){return"setup"!==e.state},is_important:!1}]}]}}));n("WIX+");J.a.controller("GridSettingController",["contextService","$scope","$filter",function(e,t,n){t.init=function(){t.grid_setting_item=[{key:"row_type",label:n("translate")("row_height"),list:[{value:"tight",label:n("translate")("tight")},{value:"moderate",label:n("translate")("moderate")},{value:"loose",label:n("translate")("loose")}]},{key:"font_size",label:"字号",list:[{value:"small",label:"小"},{value:"medium",label:"中"},{value:"large",label:"大"}]}]},t.changeRowType=function(e,n){t.$dialog.resolve_data({key:e,value:n.value}),t.$dialog.dialog_close()}}]);var Te={controller:"GridSettingController",template:n("dbhL"),mask:!1,width:205,maskClose:!0,calculateDirection:"right",name:"grid_setting"},Ae=n("55J8"),Ie=n("yATM"),Le=n("K6BF"),Fe=n("fqcw"),Re=(n("XhYy"),n("u7Fk"),n("lq6P")),Be=n("gdJK"),Ue=n.n(Be),qe=(n("I189"),n("q8I/")),We=n.n(qe);n("zuSw");window.app.controller("queryMobileDialogCtrl",["$controller","$rootScope","$scope","$hcDialog",function(e,t,n,i){var o;e(Re.a,{$scope:n,CRUDService:""}),n.info_meta=C()(o=n.params.meta).call(o,(function(e){var t;return F()(t=["hc-select","hc-super-selector","hc-tree-list-selector","hc-selector-depart"]).call(t,e.component)&&(e.options.inDrawer=!0),e})),n.showMore=be()(fe.a.mark((function e(){var t,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C()(t=n.params.all_info_meta).call(t,(function(e){var t;return F()(t=["hc-select","hc-super-selector","hc-tree-list-selector","hc-selector-depart","hc-tree-selector"]).call(t,e.component)&&(e.options.inDrawer=!0),e})),e.next=3,i.getDialog({controller:"queryMorePanelController",template:We.a,name:"query-more",height:null,width:null,mask:!1,maskClose:!0}).size(null).slideInConfig("right").show({multi:!0,originObject:n.base_form.fields,list:n.params.all_info_meta});case 3:o=e.sent,T()(n.params.meta,o),n.base_form.$setMeta(o);case 6:case"end":return e.stop()}}),e)}))),n.submit=function(){n.$dialog.resolve_data(n.base_form.data),n.$dialog.dialog_close()},n.setFormData=function(){n.params.data&&n.params.data.id&&CRUDService.getItemInfo?n.loadData():(n.form_data_in_param&&(n.data=n.params.data),n.base_form.$setMeta(n.info_meta,n.group_meta).$setData(n.data),n.model_meta&&n.initSubList(n.model_meta.childrens),n.base_form.$getDefault().then((function(){"new"===n.mode&&n.base_form.$dealFormDataChange(n.base_form.data,{}),n.startWatch()})),n.initAfter(n.data))}}]);var ze={name:"query-mobile",controller:"queryMobileDialogCtrl",template:Ue.a,mask:!0},Ne=n("nR2m"),Ke=n("L+3z"),He=n.n(Ke);window.app.controller("BaseCRUDViewDialogCtrlDialog",["BaseCRUDService","$controller","$rootScope","$scope","$hcDialog","$state",function(e,t,n,i,o,a){var l=e.getModelService(i.$dialog.options.model_name);t(Ne.a,{$scope:i,CRUDService:l,InfoDialog:null}),i.getMetaState=function(){return i.$dialog.options.meta_state}}]);var Ve=n("+HzY"),Ye=n("gh/P"),Ge=n("Er0w"),Je=n.n(Ge),Xe=(n("jkzn"),n("uuav"));window.app.controller("ListViewDialog",["$scope","$controller","BaseCRUDService",function(e,t,n){var i=n.getModelService(e.$dialog.options.model_name);t(Xe.a,{$scope:e,CRUDService:i,InfoDialog:Object(Oe.a)(e.$dialog.options.model_name,e.$dialog.options.meta_state)}),e.leftViewParams={model:e.$dialog.options.model_name,id:null},e.showListView=!0,e.transBaseMessage=function(t){e.list_model.selected_item=t,e.leftViewParams.id=t.id,e.showListView=!1,I()((function(){e.showListView=!0}),500)},e.defaultAction=function(){var t=be()(fe.a.mark((function t(n){var i,o,a,l,r;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.transBaseMessage(n),o=S()(i=e.list_btn_model.actions).call(i,(function(e){return e.default})),"mobile"!==e.client||!e.list_model.select_status){t.next=6;break}e.list_model.selectItem(n),t.next=14;break;case 6:if(!(o.length>0)){t.next=13;break}return t.next=9,e.parseAction(o[0],n);case 9:r=t.sent,(null===(a=o[0])||void 0===a?void 0:a.after_func)&&(null===(l=o[0])||void 0===l||l.after_func(r)),t.next=14;break;case 13:e.model_meta?e.list_model.selectItem(n):e.editItem(n);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initAfter=function(){e.$dialog.title(e.$dialog.options.dialog_title)},e.fetchDataSuccess=function(){e.transBaseMessage(e.list_model.data[0])},e.getMetaState=function(){return e.$dialog.options.meta_state}}]);var Qe=n("N41K"),Ze=n.n(Qe);n("dp6z");window.app.controller("commonUserAgreementDialog",["$scope","$timeout","$interval",function(e,t,n){e.has_read=!1,e.can_has_read=!1,e.time=5,e.client=window.client,t((function(){e.can_has_read=!0}),5e3);var i=n((function(){e.time>0&&e.time--}),1e3);e.has_read_tip=function(){e.$dialog.resolve_data({success:!0}),e.$dialog.dialog_close(),clearInterval(i)},e.$dialog.setClose((function(){e.$dialog.reject_data({success:!1}),e.$dialog.dialog_close(),clearInterval(i)}))}]);var et={controller:"commonUserAgreementDialog",template:Ze.a,name:"commonUserAgreementDialog"},tt=n("mshF");window.app.controller("BaseCRUDController",["$rootScope","$scope","$state","$timeout","$filter","$q","$http","$hcListNew","$hcForm","$hcDialog","$hcListBtn","$hcPaging","$hcQuery","$hcQueryNew","$hcSimpleTree","hcDialogSelector","hcCommonImport","hcUploadFile","InfoDialog","HCMCRUDImpExpService","CRUDService","AuthService","dataService","templateService","contextService","crudSettingService","commonSelectorService","commonTreeLoaderService","selectorService","workflowOnlineService","wfCreateService","componentDefaultService","listGlobalConfigService","documentPreviewService","WfPrintListDialogService","toPrintService","BaseCRUDService","$base64","hcmDraftsService","hcImageViewerService","$commonAction",function(e,t,n,i,a,r,s,u,p,f,g,b,w,k,D,M,E,j,A,L,R,U,W,Y,G,J,X,Q,Z,ee,oe,le,re,ce,se,de,ue,_e,pe,me,fe){var he=this;t.is_data_changed=!1,t.client=window.client,t.template=n.params.template,t.auth=G.getContext("auth"),t.icon_list=["icon-hcm-view-list","icon-hcm-view-card"],t.no_advance_query=!1,t.refresh_tree=!1,t.separate_list_count=!0,t.fetch_count=!0,t.checkBoxIcon="pc"===window.client?{empty:"icon-hcm-none-rectangle-radius",full:"icon-hcm-click-rectangle-radius-solid"}:{empty:"icon-hcm-none-circle",full:"icon-submit"},t.isolatedUuid=Object(H.g)();var ge=fe.createCommonAction(t);t.isLoading=!1,t.paging={},t.isNewStyle=!1,t.initChangePageListFlag=!1,t.is_visualization=!1,t.use_more_paging={pc:!1,mobile:!0},t.no_advance_query=!1,t._updateList=function(e,n,i){var o,a,l;n?t.list_model.$setData(B()(l=t.list_model.data).call(l,e),!0):"tree"!==(null===(a=t.list_model)||void 0===a?void 0:a.view)||F()(o=[null,"",void 0]).call(o,t.getFilterStr())?(t.list_model.$setData(e,t.selector_flag||i),t.isLoading=!1,t.list_model.current_page=t.paging.current_page,t.list_model.page_size=t.paging.page_size):t.list_model.$setTreeSearchData(e)},t.card_env={},t.actionInstanceMap={},t.init=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return t.isLoading=!0,t.fetched_category_meta=!1,t.initBefore(),[4,null===(e=t.initBeforeAsync)||void 0===e?void 0:e.call(t)];case 1:return o.sent(),[4,t.initPaging()];case 2:return o.sent(),[4,r.all(t.getRequireFunc())];case 3:return o.sent(),function(){var e,n,i,o,l,r,c,s,d=t.model_meta||{};t.refresh_tree=null!==(n=null===(e=d.list_config)||void 0===e?void 0:e.refresh_tree)&&void 0!==n?n:t.refresh_tree,t.refresh_nav_attachment=null!==(o=null===(i=d.list_config)||void 0===i?void 0:i.refresh_nav_attachment)&&void 0!==o?o:t.refresh_nav_attachment,T()(t.use_more_paging,null===(l=d.list_config)||void 0===l?void 0:l.use_more_paging),t.mobile_search_white="pc"!==t.client&&(null===(r=d.list_config)||void 0===r?void 0:r.mobile_search_white),"mobile"===t.client&&(null===(c=d.list_config)||void 0===c?void 0:c.background_img_mobile)&&(t.background_img_mobile=a("commonImage")(null===(s=d.list_config)||void 0===s?void 0:s.background_img_mobile,["hcDocumentImg",window.screen.width+",180"]))}(),(null===(i=null===(n=t.model_meta)||void 0===n?void 0:n.list_config)||void 0===i?void 0:i.use_more_paging)?[4,t.initPaging()]:[3,5];case 4:o.sent(),o.label=5;case 5:return t.selector_flag&&(t.list_model.select_status=!0),t.setViewSwitch(),[4,t.getTreeAndFetchData()];case 6:return o.sent(),"mobile"===t.client&&(t.setScrollListener(),I()((function(){var e,n;(null===(n=null===(e=null==t?void 0:t.model_meta)||void 0===e?void 0:e.list_config)||void 0===n?void 0:n.auto_featch_data)&&(t._is_fetching_data=!1,t.paging.current_page_scroll=t.paging.current_page,angular.element(".for-calc-scroll")[0].onscroll=function(){t.isScrollToBotton(300)&&!t._is_fetching_data&&Math.ceil(t.paging.total_count/t.paging.page_size)>t.paging.current_page_scroll&&(t._is_fetching_data=!0,t.paging.current_page_scroll=t.paging.current_page_scroll+1,t.fetchData(null,!0).then((function(){t._is_fetching_data=!1})))})}),1e3)),[2]}}))}))},t.isScrollToBotton=function(e){var t=angular.element(".for-calc-scroll")[0].scrollTop,n=angular.element(".for-calc-scroll")[0].scrollHeight;return t+angular.element(".for-calc-scroll")[0].clientHeight+e>=n},t.initPaging=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i,o,a,l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return e=null,e=t.use_more_paging[t.client]?{onPagingChangeMore:function(e){return void 0===e&&(e=!1),t.fetchData(null,!e)}}:{onPagingChange:function(){return t.fetchData(null,!1,!0)}},n=t,o=(i=b).createPaging,l=(a=angular).extend,[4,t.getPagingParams()];case 1:return n.paging=o.apply(i,[l.apply(a,[r.sent(),e])]),[2]}}))}))},t.getPagingParams=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,i,o,a;return Object(N.e)(this,(function(l){switch(l.label){case 0:return[4,re.getListGlobalConfig()];case 1:return e=l.sent(),i=e.paging,o=i.page_size_list,a=i.page_size,t.$dialog?[2,{page_size_list:o,current_page:1,page_size:t.page_size||a}]:[2,{page_size_list:o,current_page:n.params.page_index,page_size:n.params.page_size||t.page_size||a}]}}))}))},t.getDefaultPlan=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n;return Object(N.e)(this,(function(i){switch(i.label){case 0:return e=t,[4,J.getAvailablePlan(null,{model:t.getModel(),state:t.getMetaState(),biz_type:t.getBizType()},1,50,{})];case 1:return e.advance_plan_list=null===(n=i.sent())||void 0===n?void 0:n.list,[2,t.advance_plan_list]}}))}))},t.getTreeAndFetchData=function(){if(!t.model_meta&&!t.tree_loader)return t.fetchData(),void t.initAfter();t.getPlanAndFetchData()},t.getPlanAndFetchData=function(){if(t.no_advance_query)return t.fetchData(),void t.initAfter();((t.model_meta||{}).advance_query||{}).close?(t.setSimpleFormDefault(),"{}"===P()(t.list_filter_model.data)&&t.fetchData(),t.initAfter()):(t.initAdvanceQuery(!0),t.initAfter())},t.getTreeLoader=function(e){var n;e.model&&(t.tree_params=e.params,F()(n=["Department","OrgDepartment"]).call(n,e.model)?t.tree_loader=Q.getNewOrgTreeLoader(t.tree_params).org_tree_loader:t.tree_loader=Q.getNewCommonTreeLoader(e.model,null,t.tree_params).common_tree_loader)},t.setListColumns=function(e){var n,i=S()(n=t.list_meta).call(n,(function(e){return e.label}));(function(){var t,n=r.defer();return e?(t=e,J.mergeSetting(i,t),n.resolve()):n.resolve(),n.promise})().then((function(){var e=S()(i).call(i,(function(e){return!a("valueToFunc")(e.hide)()&&e.fixed})).length;t.list_model.$setColumns(i,e)}))},t.setRowSelector=function(e){C()(e).call(e,(function(e){"MULTI_ITEM"===(null==e?void 0:e.condition)&&t.list_model.$setRowSelector(2)}))},t.initList=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,i,o,a,l,r,c,s;return Object(N.e)(this,(function(d){switch(d.label){case 0:return t.list_model=u.createList().$setName(R?R.identity:null).$setView(t.list_default_view).$setCardMeta(t.list_card_meta).$setOperateSort(t.setSortMeta).$setStyle("full row-select").$setOperateDefault(t.defaultAction).$setOperateAlter(t.triggerAction).$setRowSelector(1).$setCancelWatch(t.cancel_watch).$setOperateExpand(t.setExpand).$setSelectStatusCallback(t.setSelectStatus),t.list_btn_model=g.createListBtn(t.list_model).$setActionParser(t.parseAction),t.list_filter_model=p.createForm().$setMeta(t.list_filter_meta).$setData(Object(N.a)(Object(N.a)({},t.reserve_filter_dict||{}),JSON.parse(t.$dialog?"{}":n.params.filter_dict||"{}"))),t.setListAlterOptions(),(null===(e=t.list_btn_meta)||void 0===e?void 0:e.length)&&t.list_btn_model.$setMeta(t.list_btn_meta),(null===(i=t.list_meta)||void 0===i?void 0:i.length)?(t.setListColumns(),[3,3]):[3,1];case 1:return[4,t.loadModelMeta()];case 2:d.sent(),(null===(o=t.list_config)||void 0===o?void 0:o.row_type)&&t.list_model.$setRowType(t.list_config.row_type),(null===(a=t.list_config)||void 0===a?void 0:a.list_row_style)&&t.list_model.$setRowStyle(null===(l=t.list_config)||void 0===l?void 0:l.list_row_style),t.tip_status=null!==(s="expand"===(null===(c=null===(r=t.list_config)||void 0===r?void 0:r.tip_config)||void 0===c?void 0:c.init_status))&&void 0!==s&&s,d.label=3;case 3:return[2]}}))}))},t.initChildDataCollector=function(){var e,n;T()(t.dirtyModify,{getModel:t.getModel,getMetaState:t.getMetaState,getBizType:t.getBizType,getDirty:O()(e=t.list_model.getDirty).call(e,t.list_model),setDirty:O()(n=t.list_model.setDirty).call(n,t.list_model)}),t.$emit("init_child_collector",t.dirtyModify)},t.checkRoles=function(e){if(null==e?void 0:e.role)try{U.checkRole(e.role)}catch(e){t.dealRolesErr(e)}},t.showCommDialog=function(e,n,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=null),Object(N.c)(he,void 0,void 0,(function(){var l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return[4,tt.a.getCustomDialogCtrl("HCMChatDialog")];case 1:return l=r.sent(),[2,f.getDialog(l).size("mobile"===t.client&&"hc-dialog-full-title").show({instance_id:e,target:n,sender:i,meta_state:o,alter_data:a})]}}))}))},t.showCommTaskDialog=function(e,n,i,o,a,l){return void 0===e&&(e=null),void 0===n&&(n=null),Object(N.c)(he,void 0,void 0,(function(){var r;return Object(N.e)(this,(function(c){switch(c.label){case 0:return[4,tt.a.getCustomDialogCtrl("HCMChatTaskDialog")];case 1:return r=c.sent(),[2,f.getDialog(r).size("mobile"===t.client?"hc-dialog-full-title":"super-max").show({instance_id:e,target:n,sender:i,meta_state:o,alter_data:a,code:l})]}}))}))},t.dealRolesErr=function(e){U.dealErr(e,{name:n.current.name},n.params)},t.getMetaEngine=function(){return R.getBizMeta},t.loadModelMeta=function(e){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c,s,d,u,_,p,m,f,h,g,v,b,w,k,O,D,M,E,j,T,A,I,L,F,U,q,W,z,K,H,V,Y,G,J,X,Q,Z,ee,te,ne,ie,oe,ae,le,ce,se,de,ue,_e,pe,me,fe,he,ge,ve,be,ye,we,xe,ke,$e,Oe,De;return Object(N.e)(this,(function(Ce){var Me,Se,Ee,Pe,je,Te,Ae;switch(Ce.label){case 0:return[4,t.getMetaEngine().apply(void 0,Object(N.h)(t.getModelMetaParams(e)))];case 1:return o=Ce.sent(),t.checkRoles(o.role),o=t.individualParse(o),t.model_meta=o,[4,re.getListGlobalConfig()];case 2:return l=Ce.sent(),(null===(w=null==t?void 0:t.model_meta)||void 0===w?void 0:w.list_config)&&(t.model_meta.list_config.list_meta=Object(N.a)(Object(N.a)({},(null===(k=null==l?void 0:l.list_config)||void 0===k?void 0:k.list_meta)||{}),t.model_meta.list_config.list_meta||{}),(null===(O=null==l?void 0:l.list_config)||void 0===O?void 0:O.customRowClass)&&(t.model_meta.list_config.customRowClass=null!==(D=t.model_meta.list_config.customRowClass)&&void 0!==D?D:null===(M=null==l?void 0:l.list_config)||void 0===M?void 0:M.customRowClass),(null===(E=null==l?void 0:l.list_config)||void 0===E?void 0:E.set_title)&&(t.model_meta.list_config.set_title=null!==(j=t.model_meta.list_config.set_title)&&void 0!==j?j:null===(T=null==l?void 0:l.list_config)||void 0===T?void 0:T.set_title)),t.initMetaHooks(),r=t.metaParse({list_config:t.model_meta.list_config,fields:t.model_meta.fields,extend:t.model_meta.extend,statistics:t.model_meta.statistics||[],sorts:t.model_meta.sorts||[],description:t.model_meta.description,actions:t.model_meta.actions,filters:t.model_meta.filters||[],static_filters:t.model_meta.static_filters||[]}),c=r.fields,s=r.actions,d=r.filters,u=r.list_config,_=r.extend,p=r.statistics,m=r.sorts,f=r.description,h=r.static_filters,(null===(I=null===(A=t.model_meta)||void 0===A?void 0:A.list_config)||void 0===I?void 0:I.additional_statistics)&&"table-footer"!==(null===(U=null===(F=null===(L=t.model_meta)||void 0===L?void 0:L.list_config)||void 0===F?void 0:F.stat_config)||void 0===U?void 0:U.stat_mode)&&(p=B()(p).call(p,null===(z=null===(W=null===(q=t.model_meta)||void 0===q?void 0:q.list_config)||void 0===W?void 0:W.additional_statistics)||void 0===z?void 0:z.statistics)),t.parsed_static_filters=h,t.parsed_filters=d,t.list_config=new Ve.a(u),t.no_advance_query||(null===(K=t.model_meta.advance_query)||void 0===K?void 0:K.close)?[3,4]:[4,t.getDefaultPlan()];case 3:Ce.sent(),Ce.label=4;case 4:return t.modiCellBefore&&t.list_model.$setModiCellBefore(t.modiCellBefore),t.page_change=null===(H=t.model_meta.list_config)||void 0===H?void 0:H.page_change,t.base_model||(t.base_model=null===(V=t.page_change)||void 0===V?void 0:V.base_model),t.reserve_advance_filter_dict_keys||(t.reserve_advance_filter_dict_keys=null===(Y=t.page_change)||void 0===Y?void 0:Y.reserve_advance_filter_dict),t.reserve_filter_dict_keys||(t.reserve_filter_dict_keys=null===(G=t.page_change)||void 0===G?void 0:G.reserve_filter_dict),void 0!==t.reserve_meta_params||(t.reserve_meta_params=null===(J=t.page_change)||void 0===J?void 0:J.reserve_meta_params),t.changePageRefreshTree||(t.changePageRefreshTree=null===(X=t.page_change)||void 0===X?void 0:X.refresh_tree),t.changePageBefore||(t.changePageBefore=null===(Q=null==u?void 0:u.page_change)||void 0===Q?void 0:Q.changePageBefore),t.base_model&&!t.initChangePageListFlag?[4,t.initChangePageList()]:[3,6];case 5:Ce.sent(),Ce.label=6;case 6:return!t.base_model&&(null===(Z=t.page_change)||void 0===Z?void 0:Z.component)&&!t.initChangePageListFlag&&t.initChangePageComponent(),[4,null===(ee=t.setMetaBeforeAsync)||void 0===ee?void 0:ee.call(t,t.getEnvironmentParams())];case 7:return Ce.sent(),t.setRowSelector(o.actions),t.list_meta=c,t.extend_meta=_,o.hasOwnProperty("count_async")&&(t.separate_list_count=!!o.count_async),g=[],C()(Me=t.list_meta).call(Me,(function(e){e.is_blur&&!e.hide&&e.label&&g.push(e.label)})),null===(te=o.relations)||void 0===te||C()(te).call(te,(function(e){var n;e.blur&&x()(e.blur)&&e.blur.length&&C()(n=e.blur).call(n,(function(n){var i;C()(i=t.list_meta).call(i,(function(t){t.field&&t.field.toString()===e.key+","+n&&!t.hide&&t.label&&g.push(t.label)}))}))})),t.blur_fields=g.join("、")||a("translate")("No searchable fields")||"暂无可搜索字段",t.paging._page_size="tree"===(null===(ne=o.list_config)||void 0===ne?void 0:ne.view)?1e5:null!==(ae=null===(oe=null===(ie=o.list_config)||void 0===ie?void 0:ie.paging)||void 0===oe?void 0:oe.page_size)&&void 0!==ae?ae:t.paging._page_size,(null===(ce=null===(le=o.list_config)||void 0===le?void 0:le.paging)||void 0===ce?void 0:ce.page_size_list)&&(t.paging.page_size_list=null===(de=null===(se=o.list_config)||void 0===se?void 0:se.paging)||void 0===de?void 0:de.page_size_list),t.stat_meta=p,t.sort_meta=m,"index"!==n.current.name&&t.setTitle(a("valueToFunc")(f)()),t.setTip(a("valueToFunc")(t.list_config.tip)()),t.list_btn_all=t.actionParse(s,!0),t.$dialog||t.cancel_history_back_action||"1"!==(null===(_e=null===(ue=t.auth)||void 0===ue?void 0:ue.company_setting)||void 0===_e?void 0:_e.open_history_back_action)||(null===(pe=t.list_btn_all)||void 0===pe?void 0:y()(pe).call(pe,(function(e){return"back"===e.key})))||t.list_btn_all.unshift({key:"back",action:"BACK",label:"返回",hide:function(){var e;return 1===window.history.length||"no_back"===(null===(e=n.params)||void 0===e?void 0:e.no_bottom)}}),v=S()(Se=t.list_btn_all).call(Se,(function(e){return!1!==e.is_menu_action})),C()(Ee=S()(v).call(v,(function(e){return e.actions}))).call(Ee,(function(e){var t;e.actions=S()(t=e.actions).call(t,(function(e){return!1!==e.is_menu_action}))})),t.list_btn_model.$setMeta(v),C()(Pe=S()(je=t.list_btn_all).call(je,(function(e){return e.actions}))).call(Pe,(function(e){var n;C()(n=e.actions).call(n,(function(e){t.list_btn_all.push(e)}))})),t.list_btn_meta=t.list_btn_model.actions,t.list_filter_model.$setMeta(B()(Te=t.actionParse(d,!0)).call(Te,t.list_filter_meta||[])),t.list_model.$setOperateDefault(t.defaultAction).$setOptions(t.list_config).$setActionFunc(t.tableActionProcess),t.sort_meta.length>0&&t.list_model.$setSort(t.sort_meta[0]),t.stat_meta.length>0&&t.list_model.$setStatMeta(t.stat_meta),t.category_type=null!==(fe=null===(me=t.model_meta.list_config)||void 0===me?void 0:me.category_type)&&void 0!==fe?fe:"nav",t.category_tabs_style=null!==(ge=null===(he=t.model_meta.list_config)||void 0===he?void 0:he.category_tabs_style)&&void 0!==ge&&ge,t.mobile_content_category=null!==(be=null===(ve=t.model_meta.list_config)||void 0===ve?void 0:ve.mobile_content_category)&&void 0!==be&&be,t.hideComponents=null===(ye=t.model_meta.list_config)||void 0===ye?void 0:ye.hideComponents,(null===(xe=null===(we=o.column_defs)||void 0===we?void 0:we.children)||void 0===xe?void 0:xe.length)?t.list_model.$setColumnDefs(o.column_defs,t.list_meta):t.setListColumns(),t.model_meta.modi_state&&R.getBizMeta("info",t.model_meta.modi_state).then((function(e){t.list_model.$setModiMeta(t.metaParse(e.fields),e.state),t.list_model.$setModiRelation((null==e?void 0:e.form_relations)||[],R)})),null===(ke=t.dirtyModify)||void 0===ke||ke.reset(),t.metaLoaded(t.model_meta),[4,null===($e=t.metaLoadedAsync)||void 0===$e?void 0:$e.call(t,t.getEnvironmentParams())];case 8:return Ce.sent(),[4,t.initCustomPackage()];case 9:var Ie;if(Ce.sent(),t.initChildDataCollector(),t.default_fold=null===(Oe=t.list_config.header)||void 0===Oe?void 0:Oe.default_fold,t.header_expanded=!t.default_fold,i((function(){t.header_element=$(".hcm-content-top"),t.resizer_element=$(".hc-list-resizer hc-resizer"),t.expanded_element=$(".hcm-content-top:not(#board-top-animi) >div:not(.hcm-content-title):not(.hc-list-resizer)"),t.default_fold&&(t.resizer_element.addClass("close"),t.expanded_element.css("display","none"))}),300),b=t.findTopFilters(angular.copy(d)),"mobile"===window.client&&b)t.findTopFilters(d).options.hide=!0,b.options.unShowFold=!0,t.setMobileTopForm(B()(Ie=t.actionParse([b],!0)).call(Ie,t.list_filter_meta||[]));return t.show_mobile_simple_query=(null===(De=t.model_meta.advance_query)||void 0===De?void 0:De.close)&&0===S()(Ae=t.model_meta.filters).call(Ae,(function(e){var t=a("getValue")(e,["options","hide"]);return!(a("isValidValue")(t)&&a("valueToFunc")(t)())})).length,t.simple_query={simple_form:angular.copy(t.list_filter_model),action_meta:[{key:"submit",label:"确定",func:function(){t.show_query=!1,t.list_filter_model.data=angular.copy(t.simple_query.simple_form.data)},is_important:!0}]},!t.listFilterModelWatch&&(t.listFilterModelWatch=t.$watch("list_filter_model.data",(function(e,n){var i,o;e&&!t.no_advance_query&&(null===(o=null===(i=t.model_meta)||void 0===i?void 0:i.advance_query)||void 0===o?void 0:o.close)&&("{}"!==P()(e)||n&&"{}"!==P()(n))&&("mobile"===t.client&&t.use_more_paging[t.client]?t.fetchData(null,!1,!0):t.paging.current_page=1)}),!0)),[4,t.getListBtnMax()];case 10:return Ce.sent(),[2]}}))}))},t.setMobileTopForm=function(e){e[0].options.change=function(n,i){var o,a,l,r;!t.no_advance_query&&(null===(a=null===(o=t.model_meta)||void 0===o?void 0:o.advance_query)||void 0===a?void 0:a.close)?t.list_filter_model.data[e[0].key]=i:(null===(r=null===(l=t.advance_query)||void 0===l?void 0:l.query_model)||void 0===r?void 0:r.data)&&(t.advance_query.query_model.data[e[0].key]=i)},t.top_filter=p.createForm().$setMeta(e)},t.findTopFilters=function(e){return null==e?void 0:y()(e).call(e,(function(e){var t;return!0===(null===(t=e.options)||void 0===t?void 0:t.topFilter)}))},t.setSimpleFormDefault=function(){if("mobile"===t.client){var e,n={};C()(e=t.list_filter_model.fields).call(e,(function(e){return Object(N.c)(he,void 0,void 0,(function(){var i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return[4,le.setComponentDefault(t.list_filter_model.data[e.key],e.component,e.options)];case 1:return i=o.sent(),a("isValidValue")(i)&&(n[e.key]=i),[2]}}))}))})),t.list_filter_model.data=n}},t.multi_import=function(e){var i=a("valueToFunc")(e)()||{},o=null!==i.empty_selector&&void 0!==i.empty_selector&&i.empty_selector;f.getDialog(Le.default).params({category:i.category||t.model_meta.model,category_name:i.title||t.model_meta.description,params:{action_key:i.action_key,file_name:i.file_name||t.model_meta.description+".xlsx",is_from_config:i.is_from_config||!1,import_class:i.import_class,role:i.role,impMethod:null===i.imp_method||void 0===i.imp_method?2:i.imp_method,choose_method:i.choose_method,imp_tips:i.imp_tips,is_sublist:i.is_sublist||!1,imp_type:i.imp_type||null,show_business_key:!1,empty_mode:null===i.empty_mode||void 0===i.empty_mode?o?1:0:i.empty_mode,empty_selector:o,empty_des_list:null===i.empty_des_list||void 0===i.empty_des_list?[]:i.empty_des_list,childs:i.childs||[],business_key_list:i.business_key_list||[],use_column_defs:i.use_column_defs||!1,data_row:i.data_row||2,extend_property:angular.extend({id:n.params.id,relate_field:n.params.parent_field,filter_dict:angular.extend(t.list_filter_model.$getFilters()||{},t.getFilterDict()),extra_property:t.getExtraProperty()},a("valueToFunc")(i.extend_property)()||{})},callback:i.fetch_category?function(){t.fetched_category_meta=!1,t.fetchData()}:t.fetchData}).size("middle").title("批量导入").show()},t.ImpMethodSelector=function(){return f.getDialog(Object(Oe.a)("ImpMethodVirtualModel","setting")).size("small").show()},t.common_import=function(e){return Object(N.c)(he,void 0,void 0,(function(){var i,o,l,r,c,s=this;return Object(N.e)(this,(function(d){switch(d.label){case 0:return i=a("valueToFunc")(e)()||{},o=(null==i?void 0:i.choose_imp_method)||!1,l=2,o?[4,t.ImpMethodSelector()]:[3,2];case 1:l=d.sent(),d.label=2;case 2:return r=null!==i.empty_selector&&void 0!==i.empty_selector&&i.empty_selector,c=angular.extend({id:n.params.id,relate_field:n.params.parent_field,filter_dict:angular.extend(t.list_filter_model.$getFilters()||{},t.getFilterDict()),extra_property:t.getExtraProperty()},a("valueToFunc")(i.extend_property)()||{}),"SUB_IMPORT"===i.imp_type&&(c.list_data=t.list_model.data),f.getDialog(Le.default).params({category:i.category||t.model_meta.model,category_name:i.title||t.model_meta.description,params:{imp_type:i.imp_type||"COMMON_IMPORT",file_name:i.file_name||t.model_meta.description+".xlsx",is_from_config:i.is_from_config||!1,import_class:i.import_class,role:i.role,use_column_defs:i.use_column_defs||!1,data_row:i.data_row||2,impMethod:null===i.imp_method||void 0===i.imp_method?l:i.imp_method,imp_tips:i.imp_tips,empty_mode:null===i.empty_mode||void 0===i.empty_mode?r?1:0:i.empty_mode,empty_selector:r,empty_des_list:null===i.empty_des_list||void 0===i.empty_des_list?[]:i.empty_des_list,choose_method:i.choose_method,show_business_key:i.show_business_key,components_hide_config:i.components_hide_config,show_keys:i.show_keys,action_state:i.action_state,extend_property:c,callback:function(e){return Object(N.c)(s,void 0,void 0,(function(){return Object(N.e)(this,(function(n){return t.model=e,[2]}))}))}},callback:i.fetch_category?function(){t.fetched_category_meta=!1,t.fetchData()}:t.fetchData}).size("middle").title(a("translate")("common_hcm_import_dialog_title")).show(),[2]}}))}))},t.dynamic_file_upload=function(e){var t=a("valueToFunc")(e||{})();return L.dynamic_file_upload(!0,t.category,t)},t.getExportFields=function(e){var n,i,o,a,l;return(null===(i=null===(n=null==e?void 0:e.extend_property)||void 0===n?void 0:n.extra_property)||void 0===i?void 0:i.state)&&(null==e?void 0:e.select)?W.callHcmOpenApi("hcm.model.meta",{biz_type:"list",model:e.category||t.model_meta.model,state:null===(a=null===(o=e.extend_property)||void 0===o?void 0:o.extra_property)||void 0===a?void 0:a.state}).then((function(e){var n=e.fields,i=[];return n&&v()(n).call(n,(function(e){!0!==e.hide&&i.push(e)})),C()(i).call(i,(function(e,n){var i;t.model_meta.fields&&v()(i=t.model_meta.fields).call(i,(function(t){t.merge&&e.key===t.key&&(e.label=t.label)}));return Object(N.a)(Object(N.a)({},e),{sequence:10*(n+1)})}))})):C()(l=t.list_model.merge_columns).call(l,(function(e,n){var i;t.model_meta.fields&&v()(i=t.model_meta.fields).call(i,(function(t){t.merge&&e.key===t.key&&(e.label=t.label)}));return Object(N.a)(Object(N.a)({},e),{sequence:10*(n+1)})}))},t.printDownWebSocket=function(n){return Object(N.c)(he,void 0,void 0,(function(){var o;return Object(N.e)(this,(function(a){switch(a.label){case 0:return o=(new Date).getTime(),n.time_key=o,t.show_progress=!0,t.progress={value:0,message:"套打准备中..."},e.show_waiting(),[4,W.callHcmOpenWebSocket("print.batch.download",{params:n}).then((function(e){t.show_warning("套打完成","success"),t.show_progress=!1,t.fetchData()}),(function(t){t instanceof Event?(console.log(t),e.show_warning("WebSocket连接错误","warning")):e.show_warning(t,"warning")}),(function(e){t.progress={value:e.progress,message:e.message}})).finally((function(){i((function(){t.show_progress=!1}),1e3),e.hide_waiting()}))];case 1:return a.sent(),100!==t.progress.value?[3,3]:[4,W.callHcmOpenWebSocket("get.download.file.info",{time_key:o}).then((function(e){window.open(window.hcm_wengen+"/document/get_file_by_type?temp="+e.temp+"&index="+e.index+"&type="+e.file_type+"&file_name="+e.source_name+window.hcm_env_post)}))];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},t.close_window=function(){window.history.length<2?U.closeCurPage():t.$dialog?t.$dialog.dialog_close():window.history.back()},t.Download=function(e,t){W.callHcmOpenApi("hcm.short.url.generator",{url_type:"source",expire_time:"3600",params:{uri:window.hcm_wengen+"/print/source?index="+e+"&display_name="+t+window.hcm_env_post},_host:window.location.host}).then((function(e){if("pc"===window.client)window.open(e);else{var t,n=document.createElement("a");n.href=e,n.click();var i=G.getContext("auth");if(i&&i.sso&&F()(t=["common_third","customer_sso"]).call(t,i.sso.sso_type)){var o={name:"hcm",event:"openurl",e_data:e};window.parent.postMessage(P()(o),"*")}}}))},t.printDialog=function(i,o){if(!t.print_status){var l=[];if((i=a("valueToFunc")(i||{})()).ids&&i.ids.length>=1)l=i.ids;else if(!x()(o)&&o)l=[o.id];else{var r;l=C()(r=t.list_model.selected_items).call(r,(function(e){return e.id}))}if(l.length<1)e.show_warning("请选择数据");else{var c=i.extra_property||{};if("object"===h()(c)){var d=t.getExtraProperty(),u=T()(d,c);u.only_list=!0,u.state||(u.state=t.getMetaState());var _=20;_=i.page_size?i.page_size:l.length>0?l.length:t.paging.page_size;var p={api_name:i.api_name,model_id:i.model_id,dept_id:i.dept_id,multi:"single",model:i.model,view_type:"pdf",api_param:{ids:l},filter_str:t.getFilterStr(),filter_dict:l.length>0?angular.extend(t.getAllFilterDict()||{},{id:{in:l}}):t.getAllFilterDict()||{},page_index:l.length>0?1:t.paging.current_page,page_size:_,extra_property:u,file_type:"docx",file_name:i.file_name||null,print_type:i.print_type||"common_api",doc_type:i.doc_type,random:(new Date).getTime(),temp:i.temp||!0,syn_type:!0,un_empty_page:i.un_empty_page||!1};i.view_config;(null==i?void 0:i.msg)&&e.show_warning(null==i?void 0:i.msg),t.print_status=!0,t.btn_state=i.btn_state,W.callHcmOpenApi("print.batch.download",{params:p}).then((function(e){return Object(N.c)(he,void 0,void 0,(function(){var o,a,l,r,c,d,u;return Object(N.e)(this,(function(_){switch(_.label){case 0:return t.print_status=!1,"pc"!==window.client?[3,1]:(t.print_status=!1,de.gettoPrintDialog({index:e.index,btn_state:t.btn_state,file_name:e.file_name,temp:e.temp,cl_type:t.cl_type,view_mode:i.view_mode,btn_not_view:t.btn_not_view,toolbar:t.toolbar,title:i.title,pdf_js_params:i.pdf_js_params||{},dialog_size:i.dialog_size,dialog_options:i.dialog_options,view_config:i.view_config||{}}),[3,3]);case 1:return o=[{key:"close",func:t.close,label:"关闭"},{key:"download",func:function(){return t.Download(e.index,e.file_name)},label:"下载"}],a=t.$dialog?null===(u=t.params)||void 0===u?void 0:u.btn_state:n.params.btn_state,[4,ue.getModelService("PrintData").getBizMeta("list",a||"to_print")];case 2:l=_.sent(),r=l.actions||[],c={angular:angular,SCOPE:t,STATE:n,location:window.location,history:window.history,document:document,$http:s,MOMENT:ae.a,dataService:W,WINDOW:window,ITEM:function(){return t.list_model.selected_item},ITEMS:function(){return t.list_model.selected_items}},r=K.a.jsonEval(r,c,{}),d=[],v()(r).call(r,(function(e){var t=!0;v()(o).call(o,(function(n,i){if(e.key===n.key){var a=T()(n,e);d.push(a),m()(o).call(o,i,1),t=!1}})),t&&d.push(e)})),v()(o).call(o,(function(e,t,n){d.push(e)})),console.log(d),ce.preViewDocument(e.index,"",d,i.view_config||{},!1),_.label=3;case 3:return[2]}}))}))}))}else e.show_warning("请检查元数据配置的extra_property格式")}}},t.dictToUrl=function(e){var t,n="";return v()(t=_()(e)).call(t,(function(t){n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&"})),n},t.printDownload=function(n,i){if((n=a("valueToFunc")(n||{})())&&n.api_name&&n.model_id){var o;t._ids=C()(o=t.list_model.selected_items).call(o,(function(e){return e.id}))||[];var l=n.extra_property||{};if("object"!==h()(l))return e.show_warning("请检查元数据配置的extra_property格式"),void e.show_waiting(2e3);var r=t.getExtraProperty(),c=T()(r,l);c.only_list=!0,c.state||(c.state=t.getMetaState());var s=20;s=n.page_size?n.page_size:t._ids.length>0?t._ids.length:t.paging.page_size;var d="";n&&(null==n?void 0:n.pdf_js_params)&&(d=t.dictToUrl(n.pdf_js_params));var u={client:window.client,api_name:n.api_name,model_id:n.model_id,dept_id:n.dept_id,model:n.model,view_type:"html"==n.view_mode?"html":"pdf",api_param:{ids:t._ids.length>0?t._ids:i?[i.id]:[]},filter_str:t.getFilterStr(),filter_dict:t._ids.length>0?angular.extend(t.getAllFilterDict()||{},{id:{in:t._ids}}):t.getAllFilterDict()||{},page_index:t._ids.length>0?1:t.paging.current_page,page_size:s,extra_property:c,file_type:"pdf",file_name:n.file_name||null,print_type:n.print_type||"common",doc_type:n.doc_type,syn_type:!0,random:(new Date).getTime(),temp:n.temp||!0,notify:n.notify,un_empty_page:n.un_empty_page||!1},_={api_name:n.api_name,model_id:n.model_id,dept_id:n.dept_id,multi:n.multi||"multi",model:n.model,view_type:n.view_type||"docx",api_param:{ids:t._ids.length>0?t._ids:i?[i.id]:[]},filter_str:t.getFilterStr(),filter_dict:t._ids.length>0?angular.extend(t.getAllFilterDict()||{},{id:{in:t._ids}}):t.getAllFilterDict()||{},page_index:t._ids.length>0?1:t.paging.current_page,page_size:s,extra_property:c,file_type:"zip",file_name:n.file_name||null,print_type:n.print_type||"common_api",doc_type:n.doc_type,random:(new Date).getTime(),temp:n.temp||!0,notify:n.notify,un_empty_page:n.un_empty_page||!1};if(t.btn_state=n.btn_state,t.cl_type=n.cl_type||"pc",t.btn_not_view=n.btn_not_view,t.toolbar=n.toolbar,n.is_select){var p=n.model_id+":";tt.a.getCustomDialogCtrl("PrintBillTemplateSelectorCtrl").then((function(o){f.getDialog(o).params({bill_key:p}).show().then((function(o){if(o.doc_index||e.show_warning("请选择模版"),t.print_data={doc_index:o.doc_index,template_name:o.template_name,id:o.id},n.is_print&&"is_download"!==(null==n?void 0:n.is_print)){var l=u;(0===t._ids.length||t._ids.length>1)&&!i?0===t._ids.length?e.show_warning("请选择数据"):e.show_warning("请勿多选"):(l.print_data=t.print_data,W.callHcmOpenApi("print.batch.download",{params:l}).then((function(e){n.is_dialog?de.gettoPrintDialog({btn_state:t.btn_state,index:e.index,file_name:e.file_name,temp:e.temp,view_mode:n.view_mode,cl_type:t.cl_type,pdf_js_params:n.pdf_js_params||{},btn_not_view:t.btn_not_view,toolbar:t.toolbar,view_config:n.view_config||{}}):n.view_mode&&"pdf_js"===n.view_mode?window.location.href=location.protocol+"//"+location.host+window.hcm_wengen+"/static/resources/lib/PDFjs/web/viewer.html?"+d+"file="+encodeURIComponent(location.protocol+"//"+location.host+window.hcm_wengen+"/document/get_pdf_by_index/"+e.file_name+"?index="+e.index+".pdf"+window.hcm_env_post):t.super_go("to_print",{btn_state:t.btn_state,index:e.index,file_name:e.file_name,temp:e.temp,view_mode:n.view_mode,cl_type:t.cl_type,btn_not_view:t.btn_not_view,toolbar:t.toolbar,view_config:n.view_config||{}})})))}else{var r=function(i){var o=_;o.print_data=t.print_data,o.view_type=i.view_type,t._ids&&"is_download"===(null==n?void 0:n.is_print)&&1<=t._ids.length&&t._ids.length<=5?(o.syn_type=!0,W.callHcmOpenApi("print.batch.download",{params:o}).then((function(e){window.open(window.hcm_wengen+"/document/get_file_by_type?temp="+e.temp+"&index="+e.index+"&type="+e.file_type+"&file_name="+e.file_name+window.hcm_env_post)}))):!1===n.notify?t.printDownWebSocket(o):W.callHcmOpenApi("print.batch.download",{params:o}).then((function(t){e.show_warning(t.success?"文件正在生成，请稍候在消息通知中查看下载，如超30分钟未收到消息，请联系系统管理员":t.errorMsg,"warning")}))};"pdf"===_.view_type||n.ignore_file_type?r({view_type:n.view_type||"pdf"}):f.simpleForm(a("translate")("select_file_format"),[{key:"view_type",label:a("translate")("select_print_file_type"),component:"hc-input-radio",options:{tip:a("translate")("select_print_file_type_tip"),default:_.view_type,width:"col-12",list:[{name:_.view_type,value:_.view_type},{name:"pdf",value:"pdf"}],items_inline:!0,required:!0,singleLine:!0}}]).then(r)}}))}))}else if((null==n?void 0:n.is_print)&&"is_download"!==(null==n?void 0:n.is_print)){var m=u;(0===t._ids.length||t._ids.length>1)&&!i?0===t._ids.length?e.show_warning("请选择数据"):e.show_warning("请勿多选"):W.callHcmOpenApi("print.batch.download",{params:m}).then((function(e){n.is_dialog?de.gettoPrintDialog({btn_state:t.btn_state,index:e.index,file_name:e.file_name,temp:e.temp,view_mode:n.view_mode,cl_type:t.cl_type,pdf_js_params:n.pdf_js_params||{},btn_not_view:t.btn_not_view,toolbar:t.toolbar,view_config:n.view_config||{}}):n.view_mode&&"pdf_js"===n.view_mode?window.location.href=location.protocol+"//"+location.host+window.hcm_wengen+"/static/resources/lib/PDFjs/web/viewer.html?"+d+"file="+encodeURIComponent(location.protocol+"//"+location.host+window.hcm_wengen+"/document/get_pdf_by_index/"+e.file_name+"?index="+e.index+".pdf"+window.hcm_env_post):t.super_go("to_print",{btn_state:t.btn_state,index:e.index,file_name:e.file_name,temp:e.temp,view_mode:n.view_mode,cl_type:t.cl_type,btn_not_view:t.btn_not_view,toolbar:t.toolbar,view_config:n.view_config||{}})}))}else{var g=function(i){var o=_;o.view_type=i.view_type,t._ids&&"is_download"===(null==n?void 0:n.is_print)&&1<=t._ids.length&&t._ids.length<=5?(o.syn_type=!0,W.callHcmOpenApi("print.batch.download",{params:o}).then((function(e){window.open(window.hcm_wengen+"/document/get_file_by_type?temp="+e.temp+"&index="+e.index+"&type="+e.file_type+"&file_name="+e.file_name+window.hcm_env_post)}))):!1===n.notify?t.printDownWebSocket(o):W.callHcmOpenApi("print.batch.download",{params:o}).then((function(t){e.show_warning(t.success?"文件正在生成，请稍候在消息通知中查看下载，如超30分钟未收到消息，请联系系统管理员":t.errorMsg,"warning")}))};"pdf"===_.view_type||n.ignore_file_type?g({view_type:n.view_type||"pdf"}):f.simpleForm(a("translate")("select_file_format"),[{key:"view_type",label:a("translate")("select_print_file_type"),component:"hc-input-radio",options:{tip:a("translate")("select_print_file_type_tip"),default:_.view_type,width:"col-12",list:[{name:_.view_type,value:_.view_type},{name:"pdf",value:"pdf"}],items_inline:!0,required:!0,singleLine:!0}}]).then(g)}}else e.show_warning("条件不符合要求，请检查")},t.uploadFilesByIndex=function(n){if((n=a("valueToFunc")(n||{})()).model_index)if(n.model)if(n.business_list){var i={params:{},size:2048,upload_desc:n.tips||"zip压缩包小于2G",success_tips:n.success_tips};j.upload(i).then((function(i){f.closeTarget("hcUploadFile");var o=n.extra_property||{};if("object"!==h()(o))return e.show_warning("请检查元数据配置的extra_property格式"),void e.show_waiting(2e3);var a=t.getExtraProperty(),l=T()(a,o);l.only_list=!0;var r={filter_dict:n.filter_dict||t.getAllFilterDict(),page_index:n.page_index||t.paging.current_page,page_size:n.page_size||t.paging._page_size,extra_property:l,filter_str:n.filter_str||t.getFilterStr()},c={page_size:n.page_size,model:n.model,model_index:n.model_index,doc_index:i.index,business_list:n.business_list,template_name:i.name,api_name:"hcm.model.list",api_params:r,file_convert:n.file_convert||!1,is_insert:n.is_insert||!1,split_str:n.split_str,msg_error:n.msg_error,msg_success:n.msg_success,state:n.state||null,parent_field:n.parent_field||null};"UPLOAD_FILES"===n.imp_type?W.callHcmOpenApi("base.imp.file.syn",{params:c}).then((function(t){e.show_warning(t.success?"附件正在导入，请稍后在消息中查看导入结果":t.errorMsg,"warning")})):W.callHcmOpenApi("imp.update.file.syn",{params:c}).then((function(t){e.show_warning(t.success?"附件正在导入，请稍后在消息中查看导入结果":t.errorMsg,"warning")}))}))}else e.show_warning("请配置模型业务主键作为文件名命名!");else e.show_warning("请配置模型model!");else e.show_warning("请配置模型中文件类型的index!")},t.exportFilesByIndex=function(n){var i,o,l;if((n=a("valueToFunc")(n||{})()).file_index)if(n.model)if(n.business_list){var r=t.getExtraProperty();r.only_list=!0,t.ids=C()(i=t.list_model.selected_items).call(i,(function(e){return e.id})),t.filter_dict=n.filter_dict||t.getAllFilterDict(),(null===(o=null==t?void 0:t.model_meta)||void 0===o?void 0:o.model)&&(null===(l=null==t?void 0:t.model_meta)||void 0===l?void 0:l.model)==n.model&&t.ids.length>0&&(t.filter_dict.id={in:t.ids});var c={filter_dict:t.filter_dict,page_index:t.paging.current_page,page_size:n.page_size||t.paging._page_size,extra_property:r,filter_str:n.filter_str||t.getFilterStr()},s={model:n.model,template_name:n.template_name,file_index:n.file_index,business_list:n.business_list,api_name:n.api_name||"hcm.model.list",api_params:c,file_page_size:n.file_page_size||500,split_str:n.split_str,is_img:n.is_img||!1};W.callHcmOpenApi("exp.model.files.by.index.syn",{params:s}).then((function(t){e.show_warning(t.success?"附件正在导出，请稍后在消息中查看导出结果":t.errorMsg,"warning")}))}else e.show_warning("请配置模型业务主键作为文件名命名!");else e.show_warning("请配置模型model!");else e.show_warning("请配置模型中文件类型的index!")},t.multiExportFiles=function(e){var n,i;e=a("valueToFunc")(e||{})();var o=a("valueToFunc")(e)()||{},l=o.category||t.model_meta.model,r=C()(n=t.list_model.selected_items).call(n,(function(e){return e.id})),c=r.length>0?{id:{in:r}}:{};t.targets=o.targets||[],L.list_export({is_img:e.is_img||!1,childs:o.childs||[],targets:t.targets||[],message:o.message||"send",exp_type:"MULTI_EXPORT_FILES",category:l,api_name:o.api_name,name_list:e.name_list,split_str:e.split_str,file_name:o.file_name||t.model_meta.description,final_name:o.final_name||"主子集附件导出_"+(new Date).getTime(),file_index:e.file_index,celery_mode:o.celery_mode||!1,file_page_size:o.file_page_size||500,extend_property:Object(N.a)(Object(N.a)({},o.extend_property||{}),{page_size:o.page_size||500,page_index:o.page_index||1,filter_str:(o.extend_property||{}).filter_str||t.getFilterStr(),filter_dict:Object(N.a)(Object(N.a)(Object(N.a)({},t.getAllFilterDict()),c),null===(i=o.extend_property)||void 0===i?void 0:i.filter_dict),extra_property:angular.extend(t.getExtraProperty(),(o.extend_property||{}).extra_property||{},{only_list:!0})})})},t.silentDownload=function(e,t){Object(H.p)("/document/temp/download?index="+e+(t?"&name="+t+".zip":"")+window.hcm_env_post)},t.templateExport=function(e,t){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o;return Object(N.e)(this,(function(a){switch(a.label){case 0:return n=x()(e)?C()(e).call(e,(function(e){return null==e?void 0:e.id})):null!==(o=null==e?void 0:e.id)&&void 0!==o?o:null,[4,R.templateExport(n,t)];case 1:return i=a.sent(),Object(H.p)("/document/temp/download?index="+i.index+".zip"+((null==t?void 0:t.export_name)?"&name="+t.export_name+".zip":"")+window.hcm_env_post),[2]}}))}))},t.templateDeploy=function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return[4,j.upload({url:"/document/temp/upload"+window.hcm_env_pre,type:"file",file_type:["zip"],size:30,is_silent:!0,params:{},upload_desc:a("translate")("Please upload the template in zip format")})];case 1:return n=o.sent(),f.closeTarget("hcUploadFile"),n&&n.data?[4,R.templateDeploy(n.data,a("valueToFunc")(null!==(i=null==e?void 0:e.add_info)&&void 0!==i?i:{})(t.getEnvironmentParams()),null==e?void 0:e.extend_type)]:[2];case 2:return o.sent(),[4,t.fetchData()];case 3:return o.sent(),[2]}}))}))},t.common_export=function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o,l,r,c,s,d,u,_,p,m,h;return Object(N.e)(this,(function(g){var v;switch(g.label){case 0:return n=a("valueToFunc")(e)()||{},i=n.select||!1,o=n.selected_data||[],i?[4,t.getExportFields(n)]:[3,3];case 1:return l=g.sent(),r=[],o.length>0&&C()(o).call(o,(function(e){C()(l).call(l,(function(t){t.key==e&&r.push(t)}))})),c=t,[4,f.getDialog(Object(Oe.a)("ImpMapVirtualModel","export")).size("large").show({data:{fields:l,select_items:r}})];case 2:c.force_fields=g.sent(),g.label=3;case 3:return s=C()(v=t.list_model.selected_items).call(v,(function(e){return e.id})),d=s.length>0?{id:s}:{},(null===(m=t.force_fields)||void 0===m?void 0:m.length)>0?(_=t.force_fields,[3,8]):[3,4];case 4:return((n.extend_property||{}).extra_property||{}).state,[4,t.getExportFields(n)];case 5:return p=g.sent(),[3,7];case 6:p=[],g.label=7;case 7:_=p,g.label=8;case 8:return u=_,L.list_export({category:n.category||t.model_meta.model,file_name:n.file_name||t.model_meta.description,is_from_config:n.is_from_config||!1,celery_mode:n.celery_mode||!1,export_class:n.export_class,column_defs:n.column_defs||t.list_model.columnDefs,is_column_defs:n.is_column_defs||!1,message:n.message||"send",extend_property:Object(N.a)(Object(N.a)({},n.extend_property||{}),{index_by_id:n.index_by_id||!1,filter_dict:Object(N.a)(Object(N.a)(Object(N.a)({},t.getAllFilterDict()),d),null===(h=n.extend_property)||void 0===h?void 0:h.filter_dict),filter_str:(n.extend_property||{}).filter_str||t.getFilterStr(),extra_property:angular.extend(t.getExtraProperty(),{fields:u},(n.extend_property||{}).extra_property||{})})}),[2]}}))}))},t.multi_export=function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o,l,r,c,s,d,u;return Object(N.e)(this,(function(_){var p;switch(_.label){case 0:return n=a("valueToFunc")(e)()||{},i=n.category||t.model_meta.model,(null===(d=null===(s=n.extend_property)||void 0===s?void 0:s.extra_property)||void 0===d?void 0:d.state)||"",o=C()(p=t.list_model.selected_items).call(p,(function(e){return e.id})),l=o.length>0?{id:o}:{},t.targets=n.targets||[],((n.extend_property||{}).extra_property||{}).state,[4,t.getExportFields(n)];case 1:return c=_.sent(),[3,3];case 2:c=[],_.label=3;case 3:return r=c,L.list_export({category:i,file_name:n.file_name||t.model_meta.description,is_from_config:n.is_from_config||!1,celery_mode:n.celery_mode||!1,export_class:n.export_class,column_defs:t.list_model.columnDefs,is_column_defs:n.is_column_defs||!1,message:n.message||"send",exp_type:n.exp_type||"COMMON_EXPORT",childs:n.childs||[],targets:t.targets||[],extend_property:Object(N.a)(Object(N.a)({},n.extend_property||{}),{index_by_id:n.index_by_id||!1,filter_dict:Object(N.a)(Object(N.a)(Object(N.a)({},t.getAllFilterDict()),l),null===(u=n.extend_property)||void 0===u?void 0:u.filter_dict),filter_str:(n.extend_property||{}).filter_str||t.getFilterStr(),extra_property:angular.extend(t.getExtraProperty(),{fields:r},(n.extend_property||{}).extra_property||{})})}),[2]}}))}))},t.customer_export=function(e){var n,i=a("valueToFunc")(e||{})(),o=C()(n=t.list_model.selected_items).call(n,(function(e){return e.id})),l=o.length>0?{id:o}:{},r=(((i.extend_property||{}).extra_property||{}).state,t.getExportFields());L.customer_export({celery_mode:!!i.celery_mode||i.celery_mode,customer_params:i.customer_params,category:i.category||t.model_meta.model,export_class:i.export_class,message:i.message||!1,file_name:i.file_name||t.model_meta.description,filter_dict:angular.extend(t.getAllFilterDict(),(i.extend_property||{}).filter_dict||l),extra_property:angular.extend(t.getExtraProperty(),{fields:r},(i.extend_property||{}).extra_property||{})})},t.zip_file_export=function(e){var n,i=a("valueToFunc")(e||{})(),o=C()(n=t.list_model.selected_items).call(n,(function(e){return e.id})),l=o.length>0?{id:o}:{},r=(((i.extend_property||{}).extra_property||{}).state,t.getExportFields());L.zip_file_export({filter_dict:angular.extend(t.getAllFilterDict(),(i.extend_property||{}).filter_dict||l),filter_str:(i.extend_property||{}).filter_str||t.getFilterStr(),model:i.category||t.model_meta.model,celery_mode:!1,category:t.model_meta.model,category_name:i.category_name||t.model_meta.description,file_name:i.file_name,datetime_format:i.datetime_format,extra_property:angular.extend(t.getExtraProperty(),{fields:r},(i.extend_property||{}).extra_property||{})})},t.$watch("list_model.selector_type",(function(e){e&&t.list_btn_model.$setSelectorType(e)})),t.changeSelectStatus=function(e){var n,i,o,a;if(!t.list_model.is_child_list){"mobile"===window.client&&e&&!t.list_model.outside_select&&(null===(n=t.list_model)||void 0===n||n.unSelectAll()),t.show_select_operates=e,t.list_model&&(t.list_model.select_status=e),null===(i=$("dragging-navigate"))||void 0===i||i.css(e?{visibility:"hidden"}:{visibility:"visible"});var l=$(".operates"),r=$(".top-filter"),c=$(".mobile-outside-mode-query"),s=e?"-"+l.height():t.findTopFilters(t.model_meta.filters)?r.height():0,d=e?"-"+r.height():0,u=e?"-"+(c.height()+(null===(o=c.offset())||void 0===o?void 0:o.top)):47;l.animate({top:s},"fast"),r.animate({top:d},"fast"),c.animate({top:u},"fast");var _=t.findTopFilters(t.model_meta.filters)?!0===(null===(a=t.model_meta.advance_query)||void 0===a?void 0:a.mobile_outside_query)?l.height()+r.height()+c.height():l.height()+r.height():l.height(),p=t.list_btn_model.common_used_actions.length>0?"60px":"0",m=$(".body-container >.content");(m=m.length?m:$(".model-mobile-body >.content")).css({"padding-top":e?"60px":_}),m.css({"padding-bottom":e?"60px":p});var f=$(".ui-view");$(".select-actions-list").css({bottom:e?f.css("bottom"):"0"})}},t.setSelectStatus=function(e){t.changeSelectStatus(e),t.$broadcast("btn_select_status",e)},t.$on("select_status",(function(e,n){t.changeSelectStatus(n)})),t.leaveSelected=function(){t.changeSelectStatus(!1),t.list_btn_model.select_status=!1,t.clearSelected(),t.$emit("select_status",!1),t.findTopFilters(t.model_meta.filters)&&t.calculateTopFilterPadding($(".operates").height())},t.selectListData=function(){t.list_model.selected_items.length&&t.list_model.selected_items.length===t.list_model.data.length?t.list_model.unSelectAll():t.list_model.selectAll()},t.triggerAction=function(e,n,i){return void 0===i&&(i={}),Object(N.c)(he,void 0,void 0,(function(){var o;return Object(N.e)(this,(function(a){switch(a.label){case 0:return(o=t.list_btn_model.getAction(e))?[4,t.parseAction(o,n,i)]:[3,2];case 1:return[2,a.sent()];case 2:return[2]}}))}))},t.parseAction=function(i,o,l){return void 0===l&&(l={}),Object(N.c)(he,void 0,void 0,(function(){var s,u,_,p,m,g,v,b,y,w,k,$,O,D,M,S,E,P,A,I,L,F,U,q,z,K,V,Y,G,J,X,Q,Z,ee,te,ne,ie,oe,ae,le,re,ce,se,de,ue,_e,me,fe,he,ve,be,ye,we,xe,ke,$e,Oe,De,Ce,Me,Se,Ee,Pe,je,Te,Ae,Ie,Le,Fe,Re,Be,Ue,qe,We,ze,Ne,Ke,He,Ve,Ge,Xe,Qe,Ze,et,nt,it,ot,at,lt,rt,ct,st,dt,ut,_t,pt,mt,ft,ht,gt,vt,bt,yt,wt,xt,kt,$t,Ot,Dt,Ct,Mt,St=this;return Object(N.e)(this,(function(Et){var Pt,jt,Tt,At,It;switch(Et.label){case 0:return s=o||("MULTI_ITEM"===i.condition?t.list_model.selected_items:t.list_model.selected_item),u=d()(Pt=C()(jt=t.list_model.selected_items).call(jt,(function(e){return e.name}))).call(Pt,(function(e,t){return e+(e&&t?",":"")+(t||"")}),""),_=function(e){return a("valueToFunc")(e)({selected:s,env:t.getEnvironmentParams(),exec_context:l})},[4,ge.canEnterAction(i,l,t.getExprContext(s))];case 1:return Et.sent()?[4,ge.validateAction(i,l,t.getExprContext(s))]:[2];case 2:if(Et.sent(),p=function(e,t,n){return Object(N.c)(St,void 0,void 0,(function(){var i,o,l,r,c,s,d;return Object(N.e)(this,(function(u){switch(u.label){case 0:return a("valueToFunc")(e.confirm)()?"pc"!==window.client?[3,5]:(o=(i=f).confirm,e.confirm_tip?[4,a("valueToFunc")(e.confirm_tip)()]:[3,2]):[3,10];case 1:return l=u.sent(),[3,3];case 2:l=n||"确认执行"+(t||"")+a("valueToFunc")(e.label)()+"操作？",u.label=3;case 3:return[4,o.apply(i,[l,[{caption:e.confirm_label||a("translate")("confirm")}],e.confirm_style])];case 4:return u.sent(),[3,10];case 5:return"mobile"!==window.client?[3,10]:(r=[{label:"取消",key:"close"},{label:e.confirm_label||"确认",key:"confirm"}],s=(c=f).prompt,e.confirm_tip?[4,a("valueToFunc")(e.confirm_tip)()]:[3,7]);case 6:return d=u.sent(),[3,8];case 7:d=n||"确认执行"+(t||"")+a("valueToFunc")(e.label)()+"操作？",u.label=8;case 8:return[4,s.apply(c,[d,{theme:"light-theme",operates:r},e.confirm_style])];case 9:u.sent(),u.label=10;case 10:return[2]}}))}))},m=null,!i.confirm_api_params||!i.confirm_api)return[3,7];g="function"==typeof i.confirm_api_params?a("valueToFunc")(i.confirm_api_params)(s,t.getEnvironmentParams()):i.confirm_api_params,Et.label=3;case 3:return Et.trys.push([3,5,,6]),[4,W.callHcmOpenApi(i.confirm_api,g)];case 4:return v=Et.sent(),[3,6];case 5:return Et.sent(),[2];case 6:m=i.parse_message_func?i.parse_message_func(v):v.message,Et.label=7;case 7:return[4,p(i,u,m)];case 8:return Et.sent(),i.func&&i.func_first?[2,i.func(s,l)]:(b=i,x()(i.action)?(i.key&&(l[i.key+"_action"]=i,(y=null===(ut=null===(dt=null===(st=(ct=i.key).split)||void 0===st?void 0:st.call(ct,">"))||void 0===dt?void 0:dt.pop)||void 0===ut?void 0:ut.call(dt))&&(l[y+"_action"]=i)),[4,ge.actionChain(i.action,l,{select_item:s},t.parseAction)]):[3,10]);case 9:return[2,Et.sent()];case 10:if(ge.isCommonAction(i))return[2,ge.execCommonAction(i,l,t.getExprContext(s))];switch(i.action){case"SETUP":return[3,11];case"FLEX_FIELD":return[3,12];case"NEW":return[3,13];case"DELETE":return[3,16];case"DELETE_BATCH":return[3,18];case"EDIT":return[3,20];case"EDIT_BATCH":return[3,23];case"EDIT_DIRTY":return[3,25];case"EDIT_COLUMN":return[3,27];case"VIEW":return[3,29];case"REFRESH":return[3,31];case"UPLOAD_FILE":return[3,34];case"PRINT":return[3,37];case"PREVIEW_PDF":return[3,39];case"MULTI_PRINT":return[3,42];case"DYNAMIC_INFO":return[3,44];case"VIEW_DYNAMIC_INFO":return[3,46];case"DYNAMIC_LIST":return[3,48];case"REVERSE":return[3,52];case"STATE":return[3,54];case"CALC":return[3,58];case"BASE_IMPORT":return[3,60];case"BASE_EXPORT":return[3,62];case"DYNAMIC_UPLOAD_FILE":return[3,64];case"COMMON_IMPORT":return[3,66];case"COMMON_EXPORT":return[3,68];case"SUB_IMPORT":return[3,70];case"SUB_EXPORT":return[3,72];case"CUSTOMER_EXPORT":return[3,74];case"ZIPFILE_EXPORT":return[3,76];case"PRINT_DOWNLOAD":return[3,78];case"PRINT_DIALOG":return[3,80];case"UPLOAD_FILES":return[3,82];case"EXPORT_FILES":return[3,84];case"TPL_DEPLOY":return[3,86];case"TPL_EXPORT":return[3,88];case"ACTION":return[3,90];case"ACTION_PARAM":return[3,91];case"ACTION_PARAM_EX":return[3,92];case"P_ACTION":return[3,93];case"MODEL_ACTION":return[3,94];case"C_ACTION":return[3,95];case"DYNAMIC_ACTION":return[3,97];case"HYPER_LINK":return[3,98];case"CUSTOM_ACTION":return[3,100];case"WEBSOCKET_ACTION":return[3,102];case"WORKFLOW_SUBMIT":return[3,105];case"WF_START":return[3,106];case"SHOW_PROCESS":return[3,109];case"UP":return[3,114];case"DOWN":return[3,115];case"SHOW_SELECTOR_DIALOG":return[3,116];case"CHECK_CONFIRM_ACTION":return[3,122];case"VIEW_INFO_DIALOG":return[3,129];case"CUSTOM_DIALOG":return[3,132];case"SHOW_MULTI_NAV":return[3,138];case"PROCESS_TIP":return[3,139];case"CODE_EDITOR":return[3,141];case"CLEAR_SELECTED":return[3,143];case"BIZ_STORE":return[3,144];case"SHORTCUT":return[3,145];case"SET_FILTER_DICT":return[3,147];case"OPEN_DRAFTS":return[3,149];case"DRAFT_INFO_DIALOG":return[3,151];case"COMMON_LIST_VIEW_DIALOG":return[3,155];case"LOOP":return[3,158];case"SET_DIRTY_ITEM":return[3,160];case"DEAL_FIELD_LIST_DATA":return[3,162]}return[3,164];case 11:return t.metaSetup(i.data),[3,169];case 12:return t.fieldSetup(i.data),[3,169];case 13:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 14:return w=Et.sent(),[4,t.createItem(T()({},b,{options:w}))];case 15:return[2,Et.sent()];case 16:return[4,t.removeItem(s)];case 17:return[2,Et.sent()];case 18:return[4,t.removeItemBatch(s)];case 19:return[2,Et.sent()];case 20:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 21:return k=Et.sent(),[4,t.editItem(s,T()({},b,{options:k}))];case 22:return[2,Et.sent()];case 23:return[4,t.editItemBatch(s,b)];case 24:return[2,Et.sent()];case 25:return[4,t.dirtyModify.start(b)];case 26:return[2,Et.sent()];case 27:return[4,t.columnModify.swithStatus()];case 28:return[2,Et.sent()];case 29:return[4,t.viewItem(s,b)];case 30:return[2,Et.sent()];case 31:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 32:return $=Et.sent(),[4,t.fetchData(null,!1,null==$?void 0:$.reserve_selected)];case 33:return[2,Et.sent()];case 34:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 35:return O=Et.sent(),[4,j.upload(O)];case 36:return D=Et.sent(),f.closeTarget("hcUploadFile"),[2,D];case 37:return[4,t.printItem(s,i.params,b)];case 38:return[2,Et.sent()];case 39:return[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 40:return(null==(M=Et.sent())?void 0:M.index)?[4,t.previewPdf(null==M?void 0:M.index)]:(e.show_warning("未找到pdf文件，请检查！"),[2,""]);case 41:return[2,Et.sent()];case 42:return[4,t.multiPrint(s,i.params,b)];case 43:return[2,Et.sent()];case 44:return[4,t.openDynamicDialog(s,i.params,b)];case 45:return[2,Et.sent()];case 46:return[4,t.viewAppointItem(s,i.options.params,b)];case 47:return[2,Et.sent()];case 48:return[4,t.openDynamicList(s,i.params||{},b)];case 49:return S=Et.sent(),(E=i.options||{}).process_result_api?(P=("function"==typeof E.process_result_params?E.process_result_params(s,n.params,x()(S)?S:[S]):E.process_result_params)||{},[4,W.callHcmOpenApi(null==E?void 0:E.process_result_api,P)]):[3,51];case 50:A=Et.sent(),E.result_tip&&A&&f.notify(A.message?A.message:u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),Et.label=51;case 51:return t.fetchData(),[2,S];case 52:return[4,t.reverseItem(s)];case 53:return Et.sent(),[3,169];case 54:return L=(I=e).super_go,F=[i.params.state],"function"!=typeof i.params.params?[3,56]:[4,i.params.params(s)];case 55:return U=Et.sent(),[3,57];case 56:U=i.params.params,Et.label=57;case 57:return L.apply(I,B()(F).call(F,[U,i.params.options?i.params.options:null,i.params.open_new_page])),[3,169];case 58:return[4,t.calc(i,l)];case 59:return[2,Et.sent()];case 60:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 61:return q=Et.sent(),q=a("valueToFunc")(q)(),"SUB_IMPORT"===(z=q.imp_type||null)?[2,t.sub_import(q)]:"MULTI_IMPORT"===z?[2,t.multi_import(angular.extend(q,{action_key:i.key}))]:"UPLOAD_FILES"===z?(K=(null==q?void 0:q.category)||t.model_meta.model,(V=q).model=K,V.success_tips="附件导入完成！",[2,t.uploadFilesByIndex(V)]):[2,t.common_import(q)];case 62:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 63:return Y=Et.sent(),"SUB_EXPORT"===(G=Y.exp_type||null)?[2,t.sub_export(Y)]:"MULTI_EXPORT"===G?[2,t.multi_export(Y)]:"MULTI_EXPORT_FILES"===G?[2,t.multiExportFiles(Y)]:[2,t.common_export(Y)];case 64:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 65:return J=Et.sent(),[2,t.dynamic_file_upload(J)];case 66:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 67:return X=Et.sent(),[2,t.common_import(X)];case 68:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 69:return Q=Et.sent(),t.common_export(Q),[3,169];case 70:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 71:return Z=Et.sent(),[2,t.sub_import(Z)];case 72:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 73:return ee=Et.sent(),[2,t.sub_export(ee)];case 74:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 75:return te=Et.sent(),[2,t.customer_export(te)];case 76:return[4,ge.exprParse(i.data,l,t.getExprContext(s))];case 77:return ne=Et.sent(),[2,t.zip_file_export(ne)];case 78:return[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 79:return ie=Et.sent(),[2,t.printDownload(ie,s)];case 80:return[4,ge.exprParse(i.params,t.getExprContext(s),l)];case 81:return oe=Et.sent(),[2,t.printDialog(oe,s)];case 82:return i.params||e.show_warning("请配置导入参数设置！"),[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 83:return ae=Et.sent(),[2,t.uploadFilesByIndex(ae)];case 84:return i.params||e.show_warning("请配置导出参数设置！"),[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 85:return le=Et.sent(),[2,t.exportFilesByIndex(le)];case 86:return[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 87:return re=Et.sent(),[2,t.templateDeploy(re)];case 88:return[4,ge.exprParse(i.params,l,t.getExprContext(s))];case 89:return ce=Et.sent(),[2,t.templateExport(s,ce)];case 90:return R.actionItem(s.id,i.command).then((function(){f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()})),[3,169];case 91:return R.modelActionParam("function"==typeof i.params?i.params(s):i.params,i.command).then((function(){f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()})),[3,169];case 92:return R.modelAction(i.command,"function"==typeof i.params?i.params(s):i.params).then((function(){f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()})),[3,169];case 93:return f.confirm("确认执行"+u+a("valueToFunc")(i.label)()+"操作？").then((function(){R.actionItem(s.id,i.command).then((function(){f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()}))})),[3,169];case 94:return R.modelActionItem(s.id,i.command).then((function(n){if(n.action)switch(n.action){case"goto":e.super_go(n.params.state,n.params.param)}else n.message?f.notify(n.message):f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()})),[3,169];case 95:return[4,t[i.command](s,i.data)];case 96:return[2,Et.sent()];case 97:return t.dynamicAction(i.api,"function"==typeof i.params?i.params():i.params).then((function(){f.notify(u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.fetchData()})),[3,169];case 98:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 99:return se=Et.sent(),[2,t.windowOpen(s,T()({},i.params,se))];case 100:return de="function"==typeof i.params?i.params(s):i.params,[4,W.callHcmOpenApi(i.api,de)];case 101:return ue=Et.sent(),(i.result_tip||(null===(_t=i.options)||void 0===_t?void 0:_t.result_tip))&&ue&&f.notify(ue.message?ue.message:u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.is_data_changed=!0,t.fetchData(),i.post_fetchData&&i.post_fetchData(),(null===(pt=i.options)||void 0===pt?void 0:pt.post_fetchData)&&(null===(mt=i.options)||void 0===mt||mt.post_fetchData()),[2,ue];case 102:return[4,ge.exprParse(i,l,t.getExprContext(s))];case 103:return i=Et.sent(),[4,t.openWebSocket(s,i)];case 104:return[2,Et.sent()];case 105:if(i.params&&("function"==typeof i.params||i.params.business_id||i.params.business_number))"3"!==(_e="function"==typeof i.params?i.params():i.params).version?W.callHcmOpenApi("workflow.get.wf.all",{business_id:_e.business_id,business_number:_e.business_number}).then((function(e){t.workflow_submit(!0,e,_e)})):W.callHcmOpenApi("business.mode.and.version.get",{business_id:_e.business_id,business_number:_e.business_number}).then((function(e){_e.business_id=_e.business_id||e.business_id,W.callHcmOpenApi("wf.meta",{biz_type:"info",model:"wf_form_data_flex_data."+_e.business_id}).then((function(e){t.workflow_submit(!0,e,_e)}))}));else{if(!i.params)return[2,!1];r.all({form_data:i.params.getFormData(),wf_id:i.params.getWfId()}).then((function(e){t.workflow_submit(null,e,i.params)}))}return[3,169];case 106:return[4,ge.exprParse(null==i?void 0:i.options,l,t.getExprContext(s))];case 107:return me=Et.sent(),[4,t.wf_start(s,Object(N.a)(Object(N.a)({},i.params||{}),(null==me?void 0:me.params)||{}))];case 108:return[2,Et.sent()];case 109:return[4,ge.exprParse(null==i?void 0:i.options,l,t.getExprContext(s))];case 110:return fe=Et.sent(),(he=(null==fe?void 0:fe.wf_inst_id)||t.list_model.selected_items[0].wf_inst_id)?[4,tt.a.getCustomDialogCtrl("billProcessCtrlDialog")]:[3,112];case 111:return ve=Et.sent(),f.getDialog(ve).params({wf_inst_id:he}).size("middle").show().then((function(e){})),[3,113];case 112:e.show_warning("该流程不存在，请联系管理员"),Et.label=113;case 113:return[3,169];case 114:return t.up(i,s,t.list_model.data),[3,169];case 115:return t.down(i,s,t.list_model.data),[3,169];case 116:return be=null,(ye=i.options).init_data_api?(we="function"==typeof ye.init_data_params?a("valueToFunc")(ye.init_data_params)(s,t.getEnvironmentParams()):ye.init_data_params,[4,W.callHcmOpenApi(ye.init_data_api,we)]):[3,118];case 117:be=Et.sent(),Et.label=118;case 118:return xe=ye.component_alter_param&&a("valueToFunc")(ye.component_alter_param)(s,t.getEnvironmentParams(),be),[4,t.openSelectorDialog(i,xe||{})];case 119:return ke=Et.sent(),ye.process_result_func&&ye.process_result_func(ke),ye.process_result_api?($e=("function"==typeof ye.process_result_params?ye.process_result_params(s,t.getEnvironmentParams(),x()(ke)?ke:[ke]):params.process_result_params)||{},[4,W.callHcmOpenApi(ye.process_result_api,$e)]):[3,121];case 120:Oe=Et.sent(),ye.result_tip&&Oe&&f.notify(Oe.message?Oe.message:u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),Et.label=121;case 121:return ye.no_fetch_data||t.fetchData(),[2,ke];case 122:De=i.options,Ce="function"==typeof De.check_api_params?a("valueToFunc")(De.check_api_params)(s,t.getEnvironmentParams()):De.check_api_params,Et.label=123;case 123:return Et.trys.push([123,125,,126]),[4,W.callHcmOpenApi(De.check_api,Ce)];case 124:return Me=Et.sent(),[3,126];case 125:return Et.sent(),[2];case 126:return Se=De.parse_message_func?De.parse_message_func(Me):Me,[4,f.confirm(null==Se?void 0:Se.message)];case 127:return Et.sent(),Ee="function"==typeof De.process_result_params?De.process_result_params(s,t.getEnvironmentParams(),Me):De.process_result_params,[4,W.callHcmOpenApi(De.process_result_api,Ee)];case 128:return Pe=Et.sent(),De.result_tip&&Pe&&f.notify(Pe.message?Pe.message:u+a("valueToFunc")(i.label)()+a("translate")("successfully_executed")),t.is_data_changed=!0,t.fetchData(),[3,169];case 129:return je="function"==typeof i.options.model?a("valueToFunc")(i.options.model)(s,t.getEnvironmentParams()):i.options.model,Te=i.options.data?i.options.data(s,t.getEnvironmentParams()):{id:s.id},[4,f.getDialog(Object(N.a)(Object(N.a)({},Object(Ye.a)(je,i.options.state)),(null===(ft=i.options)||void 0===ft?void 0:ft.dialog_options)||{})).name(null===(ht=i.options)||void 0===ht?void 0:ht.name_model).size(i.options.size||"super-max").show({data:Te,alter:i.options,mode:"edit"})];case 130:return Et.sent(),[4,t.fetchData()];case 131:return Et.sent(),[3,169];case 132:return[4,t.getCustomDialogCtrl(i.options.ctrl)];case 133:return Ae=Et.sent(),i.options.action_chain?[4,ge.exprParse(i.options,l,t.getExprContext(s))]:[3,135];case 134:return Ie=Et.sent(),Le=Ie.data,Fe=Ie.dialog_func_param,[3,136];case 135:Le="function"==typeof i.options.data?a("valueToFunc")(i.options.data)(s,t.getEnvironmentParams()):i.options.data,Fe="function"==typeof i.options.dialog_func_param?a("valueToFunc")(i.options.dialog_func_param)(s,t.getEnvironmentParams()):i.options.dialog_func_param,Et.label=136;case 136:return Re=null!==(gt=i.options.direct_params)&&void 0!==gt&&gt,Be=Re?Le:{data:Le,alter:i.options},"function"==typeof Ae&&(Ue=[],null!=Fe&&""!==Fe&&("object"===h()(Fe)&&angular.isArray(Fe)&&(Ue=Fe),"object"===h()(Fe)&&angular.isObject(Fe)&&(qe=/\(\s*([\s\S]*?)\s*\)/.exec(Ae)[1].split(/\s*,\s*/),C()(qe).call(qe,(function(e){Ue.push(Fe[e])})))),Ae=Ae.apply(void 0,Object(N.h)(Ue))),[4,f.getDialog(T()(Ae,(null===(vt=i.options)||void 0===vt?void 0:vt.dialog_options)||{})).size(i.options.size||"super-max").show(Be)];case 137:return We=Et.sent(),i.options.action_chain?[2,We]:(t.fetchData(),[3,169]);case 138:return t.showMultiNav(s,i.options),[3,169];case 139:return[4,t.openProcessTipDialog(s,i.options)];case 140:return Et.sent(),[3,169];case 141:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 142:return ze=Et.sent(),[2,t.openCodeEditor(s,ze)];case 143:return t.clearSelected(),[3,169];case 144:return t.showBizStore(i.params),[3,169];case 145:return[4,t.shortcutExec(i.options.name,_(null===(bt=i.options)||void 0===bt?void 0:bt.params))];case 146:return[2,Et.sent()];case 147:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 148:for(Ve in Ne=Et.sent(),Ke=Ne.params||{},He=null,He=t.advance_query_enabled&&(t.advance_query||{}).$getFilterDict?null===(yt=t.advance_query)||void 0===yt?void 0:yt.query_model:t.list_filter_model,Ke)Object.prototype.hasOwnProperty.call(Ke,Ve)&&(null===(wt=He.field_metas)||void 0===wt?void 0:wt[Ve])&&(He.data[Ve]=Ke[Ve]);return[3,169];case 149:return[4,pe.openDrafts(angular.extend(t.getEnvironmentParams()||{},{model_meta:t.model_meta}),Object(N.a)({createInfo:t.createItem,editInfo:t.editItem},(null===(xt=i.options)||void 0===xt?void 0:xt.draftAction)||{}),i.options)];case 150:return Ge=Et.sent(),t.fetchData(),[2,Ge];case 151:return(null===(kt=t.params)||void 0===kt?void 0:kt.draftAction)?[2,"edit"===s.mode?t.params.draftAction.editInfo(s.draft,{form_data_in_param:!0,options:{alter_info:{draft_id:s.id}}}):t.params.draftAction.createInfo({options:{init_data:s.draft,alter_info:{draft_id:s.id}}})]:[3,152];case 152:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 153:return Xe=Et.sent(),[4,t.openInfoDialog(s,Xe,b)];case 154:return[2,Et.sent()];case 155:return[4,ge.exprParse(i.options,l,t.getExprContext(s))];case 156:return Qe=Et.sent(),[4,f.getDialog((Tt=Qe.model,At=Qe.state,It=Qe.title,{controller:"ListViewDialog",template:Je.a,model_name:Tt,meta_state:At,dialog_title:It})).params({}).size("large").name("list_view").show()];case 157:return Et.sent(),[2];case 158:return(null===($t=i.options)||void 0===$t?void 0:$t.loop_action)?[4,ge.exprParse(i.options.iterator,l,t.getExprContext(s))]:[2];case 159:return Ze=Et.sent(),(null===(Ot=i.options)||void 0===Ot?void 0:Ot.sync_loop)?(et=ge.getTaskQueue({delay:i.options.delay||0,timeout:i.options.timeout||0,chunkSize:i.options.chunkSize||1}),nt=C()(Ze).call(Ze,(function(e){return function(){return t.parseAction(i.options.loop_action,s,angular.extend({},l,{_item:e}))}})),et.addTasks(nt),it=ge.useProgress(i.options),ot=it.instance,at=it.sendMessage,i.options.stoppable&&ot.operates([{key:"stop",label:"停止",func:function(){et.stop(),ot.dialog_close()}}]),ot.show(),at(0,null!==(Ct=null===(Dt=i.options)||void 0===Dt?void 0:Dt.begin_tip)&&void 0!==Ct?Ct:"开始"+a("valueToFunc")(i.label||"")()+"..."),[2,et.run().then((function(e){var t,n,o,a;return at(100,"resolve"===e.status?null!==(n=null===(t=i.options)||void 0===t?void 0:t.completeTip)&&void 0!==n?n:"已完成":null!==(a=null===(o=i.options)||void 0===o?void 0:o.interruptTip)&&void 0!==a?a:"已中断"),c.a.resolve(e)}),(function(e){return c.a.reject(e)}),(function(e){var t;at(e.progress,a("valueToFunc")(null===(t=i.options)||void 0===t?void 0:t.processingMsg)(e)||e.msg)}))]):[2,c.a.all(C()(Ze).call(Ze,(function(e){return t.parseAction(i.options.loop_action,s,angular.extend({},l,{_item:e}))})))];case 160:return[4,ge.exprParse(i.options.dirtyItem,l,t.getExprContext(s))];case 161:return(null==(lt=Et.sent())?void 0:lt.id)&&t.list_model.setDirtyRow(lt),[2];case 162:return[4,ge.exprParse(i.options.params,l,t.getExprContext(s))];case 163:return rt=Et.sent(),null===(Mt=t.deal_field_list_data)||void 0===Mt||Mt.call(t,rt.data,rt.mode,rt.item),[2];case 164:return i.func?Object(H.h)(i.func)?[4,i.func(s,l)]:[3,166]:[3,168];case 165:return[2,Et.sent()];case 166:return[2,i.func(s,l)];case 167:return[3,169];case 168:return[2,!1];case 169:return[2]}}))}))},t.getCustomDialogCtrl=function(e){return tt.a.getCustomDialogCtrl(e||"CustomDialogCtrl")},t.shortcutExec=function(n,o){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(a){return e.show_waiting(),t.show_progress=!0,t.progress={value:0,message:"开始计算..."},[2,ue.getModelService("HCMShortcut").modelActionWs("exec",{name:n,params:o}).then((function(e){return t.hide_waiting(),i((function(){t.show_progress=!1}),1e3),f.notify(n+"执行成功！"),e}),(function(t){e.show_warning("计算错误："+t,"warning")}),(function(e){t.progress={value:e.progress,message:e.message}})).finally((function(){i((function(){t.show_progress=!1}),1e3),e.hide_waiting()}))]}))}))},t.openCodeEditor=function(e,n){return Object(N.c)(he,void 0,void 0,(function(){var i,o,l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return[4,"function"==typeof(null==n?void 0:n.data)?a("valueToFunc")(null==n?void 0:n.data)(e,t.getEnvironmentParams()):null==n?void 0:n.data];case 1:return i=r.sent(),[4,tt.a.getCustomDialogCtrl("HCMCodeEditorCtrl")];case 2:return o=r.sent(),[4,f.getDialog(o).title("function"==typeof(null==n?void 0:n.title)?a("valueToFunc")(null==n?void 0:n.title)(e,t.getEnvironmentParams()):(null==n?void 0:n.title)||"脚本编辑").show(angular.extend(i,{modifier:null==n?void 0:n.modifier}))];case 3:return l=r.sent(),t.fetchData(),[2,{data:l,item:e}]}}))}))},t.openProcessTipDialog=function(e,t){return Object(N.c)(he,void 0,void 0,(function(){var n,i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return[4,"function"==typeof(null==t?void 0:t.ws_param)?a("valueToFunc")(null==t?void 0:t.ws_param)(e):null==t?void 0:t.ws_param];case 1:return n=o.sent(),i={title:null==t?void 0:t.title,ws_api:null==t?void 0:t.ws_api,ws_param:n},[4,f.getDialog(Se).params(i).size((null==t?void 0:t.size)||"middle").show()];case 2:return o.sent(),[2]}}))}))},t.fetchTplAddInfo=function(){return{}},t.showBizStore=function(e){var n=e.add_info||t.fetchTplAddInfo();f.getDialog(Object(je.a)("BizStore",e.state||"selector",!0)).show({filter_dict:{model:t.model_meta.model}}).then((function(e){ue.getModelService("BizStore").modelActionItem(e.id,"get_package").then((function(e){R.templateDeploy(e.index,n).then((function(){f.notify("引入成功！"),t.fetchData()}))}))}))},t.reIndexList=function(e,t){void 0===t&&(t="sequence"),t=t||"sequence",v()(e).call(e,(function(e,n){e[t]=n+1}))},t.up=function(e,n,i){var o,a,r=l()(i).call(i,n);0!==r&&(o=Object(N.f)([i[r-1],i[r]],2),i[r]=o[0],i[r-1]=o[1]),t.reIndexList(i,null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.order_key),t.list_model.data=i,t.list_model.$refreshData()},t.down=function(e,n,i){var o,a,r=l()(i).call(i,n);r!==i.length-1&&(o=Object(N.f)([i[r+1],i[r]],2),i[r]=o[0],i[r+1]=o[1]),t.reIndexList(i,null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.order_key),t.list_model.data=i,t.list_model.$refreshData()},t.tableActionProcess=function(e,n,i,o,a){return Object(N.c)(he,void 0,void 0,(function(){var a;return Object(N.e)(this,(function(l){var r;return[2,(a=y()(r=t.list_btn_all).call(r,(function(t){return t.key===e})))?t.parseAction(a,n,{clicked_field:i,_target:null==o?void 0:o.target}):console.log("table_action_not_found"+e)]}))}))},t.calc=function(n,o){return Object(N.c)(he,void 0,void 0,(function(){var l,r,c;return Object(N.e)(this,(function(s){switch(s.label){case 0:return t.show_progress=!0,t.progress={value:0,message:"开始计算..."},l=angular.copy(n),r=l,[4,a("valueToFunc")(l.params)(o)];case 1:return r.params=s.sent(),l.params.params?(c=l.params,[4,a("valueToFunc")(l.params.params)(o)]):[3,3];case 2:c.params=s.sent(),s.label=3;case 3:return e.show_waiting(),[4,W.callHcmOpenWebSocket(l.api,l.params).then((function(e){return t.fetchData(),t.hide_waiting(),i((function(){t.show_progress=!1}),1e3),e}),(function(t){e.show_warning("计算错误："+t,"warning")}),(function(e){t.progress={value:e.progress,message:e.message}})).finally((function(){i((function(){t.show_progress=!1}),1e3),e.hide_waiting()}))];case 4:return[2,s.sent()]}}))}))},t.metaSetup=function(e,n){return void 0===n&&(n={}),Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(i){switch(i.label){case 0:return t.is_visualization?[4,f.getDialog(te).size("super-max").show(Object(N.a)({meta_key:e,biz_type:"list",model:t.model_meta.model,state:t.getMetaState(),filter_dict:t.getAllFilterDict(),CRUDService:R},n))]:[3,3];case 1:return i.sent(),[4,t.loadModelMeta(!0)];case 2:return i.sent(),t.getPlanAndFetchData(),[3,6];case 3:return[4,f.getDialog(V.a).show(Object(N.a)({meta_key:e,biz_type:"list",model:t.model_meta.model,state:t.getMetaState()},n))];case 4:return i.sent(),[4,t.loadModelMeta(!0)];case 5:i.sent(),t.getPlanAndFetchData(),i.label=6;case 6:return[2]}}))}))},t.fieldSetup=function(e){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(n){switch(n.label){case 0:return[4,f.getDialog(ne.a).title(a("translate")("Field maintenance")).show({model_name:e})];case 1:return n.sent(),[4,t.loadModelMeta(!0)];case 2:return n.sent(),t.getPlanAndFetchData(),[2]}}))}))},t.fetch={getting:!1,waiting:!1},t.listFetch=null,t.countFetch=null,t.getDataEngine=function(){return R.getItemList},t.fetchData=function(n,i,o){return void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=null),Object(N.c)(he,void 0,void 0,(function(){var l,s,d,u,p,m,f,h,g,v,b,y,w,x,k,$,O,D,C,M,E,P,j,T,A,I,L,F,B=this;return Object(N.e)(this,(function(U){switch(U.label){case 0:if(e.tergetUuid=t.isolatedUuid,t.alter_extra_property=n||{fields:t.merged_fields},t.advance_query_enabled=!((t.model_meta||{}).advance_query||{}).close&&_()(t.advance_query||{}).length&&t.advance_query,t.advance_query){if(t.advance_query_enabled&&!0!==(null===(v=null===(g=t.advance_query.query_model)||void 0===g?void 0:g.$validData)||void 0===v?void 0:v.call(g)))return console.log("invalid: ",null===(y=null===(b=t.advance_query.query_model)||void 0===b?void 0:b.$validData)||void 0===y?void 0:y.call(b)),[2]}else if(t.list_filter_model&&!0!==t.list_filter_model.$validData())return console.log(t.list_filter_model.$validData()),[2];return[4,null===(w=t.beforeFetchDataAsync)||void 0===w?void 0:w.call(t,t.getEnvironmentParams())];case 1:return U.sent(),[4,t.fetchCategoryBefore()];case 2:return U.sent(),t.checkFetch()?((null===(x=t.listFetch)||void 0===x?void 0:x.is_loading)&&(null===($=null===(k=t.listFetch)||void 0===k?void 0:k.cancel)||void 0===$||$.call(k)),t.setState(),l=r.defer(),t.stat_mode=null===(D=null===(O=t.model_meta)||void 0===O?void 0:O.list_config)||void 0===D?void 0:D.stat_mode,(t.listFetch=t.getDataEngine().apply(void 0,Object(N.h)(t.getLoadDataParams()))).then((function(e){return Object(N.c)(B,void 0,void 0,(function(){var n,a;return Object(N.e)(this,(function(l){switch(l.label){case 0:return[4,null===(n=t.afterFetchDataAsync)||void 0===n?void 0:n.call(t,t.getEnvironmentParams(),e.list)];case 1:return l.sent(),t._updateList(e.list,i,o),t.separate_list_count||(t.paging.total_count=e.count),t.fetchDataSuccess(e),null===(a=t.analyses_model)||void 0===a||a.refresh(),[2]}}))}))})).catch((function(e){console.log(e)})).finally((function(){t.genCardEnv(),l.resolve()})),s=t.separate_list_count&&t.fetch_count,d=t.stat_meta&&t.stat_meta.length>0,s||d?((null===(C=t.countFetch)||void 0===C?void 0:C.is_loading)&&(null===(E=null===(M=t.countFetch)||void 0===M?void 0:M.cancel)||void 0===E||E.call(M)),t.paging.is_waitting_show=!0,u=t.countFetch=R.getItemCount.apply(R,Object(N.h)(t.getLoadCountParams(t.state_mode))),p=[u],(null===(P=null==t?void 0:t.list_config)||void 0===P?void 0:P.additional_statistics)&&"table-footer"!==(null===(T=null===(j=null==t?void 0:t.list_config)||void 0===j?void 0:j.stat_config)||void 0===T?void 0:T.stat_mode)?(m=null===(I=null===(A=null==t?void 0:t.list_config)||void 0===A?void 0:A.additional_statistics)||void 0===I?void 0:I.api,[4,ge.exprParse(null===(F=null===(L=null==t?void 0:t.list_config)||void 0===L?void 0:L.additional_statistics)||void 0===F?void 0:F.params,{},t.getExprContext())]):[3,4]):[3,5]):[2];case 3:f=U.sent(),h=W.callHcmOpenApi(m,f),p.push(h),U.label=4;case 4:c.a.all(p).then((function(e){return Object(N.c)(B,void 0,void 0,(function(){var n,i,o,l,r,c,d,u,_,p,m;return Object(N.e)(this,(function(f){var h;(n=(null===(o=null==t?void 0:t.list_config)||void 0===o?void 0:o.additional_statistics)&&"table-footer"!==(null===(r=null===(l=null==t?void 0:t.list_config)||void 0===l?void 0:l.stat_config)||void 0===r?void 0:r.stat_mode)?Object(N.a)(Object(N.a)({},e[0]),{list:[Object(N.a)(Object(N.a)({},null===(d=null===(c=e[0])||void 0===c?void 0:c.list)||void 0===d?void 0:d[0]),null===(_=null===(u=e[1])||void 0===u?void 0:u.list)||void 0===_?void 0:_[0])]}):e[0],s)?("async"!==t.stat_mode&&(t.stat_data=n.list),i=null===(m=null===(p=n.list)||void 0===p?void 0:p[0])||void 0===m?void 0:m.id,t.paging.total_count=void 0===i?100:i,t.paging.is_waitting_show=!1,t.list_model.$setStat(t.stat_data).$setStatMeta(S()(h=t.stat_meta).call(h,(function(e){return!a("valueTofunc")(e.hide)()}))),t.fetchCountSuccess(i,n)):(t.stat_data=null==n?void 0:n.list,t.list_model.$setStat(t.stat_data));return t.paging.is_waitting_show=!1,[2]}))}))})).catch((function(e){console.log(e)})).finally((function(){t.genCardEnv()})),U.label=5;case 5:return[2,l.promise]}}))}))},t.genCardEnv=function(){var e;t.card_env.data=t.list_model.data,t.card_env.stat_data=t.list_model.stat_data,t.card_env.env=angular.extend(t.getEnvironmentParams(),{filter_str:t.getFilterStr(),filter_dict:t.getAllFilterDict(),extra_property:t.getExtraProperty(),model_meta:t.model_meta,display_meta:(null===(e=t.advance_query)||void 0===e?void 0:e.current_plan)?t.advance_query.merged_meta:t.merged_fields,paging:t.paging})},t.getLoadCountParams=function(e){var n,i,o,a,l,r;void 0===e&&(e="sync");var c=function(e){return x()(e.field)?e.key:e.field},s="async"===e?S()(n=t.stat_meta).call(n,(function(e){return e.pre_load})):t.stat_meta,d=(null==s?void 0:C()(i=S()(s).call(s,(function(e){return"count"===e.type}))).call(i,(function(e){return c(e)})))||[],u=(null==s?void 0:C()(o=S()(s).call(s,(function(e){return"sum"===e.type}))).call(o,(function(e){return c(e)})))||[],_=(null==s?void 0:C()(a=S()(s).call(s,(function(e){return"avg"===e.type}))).call(a,(function(e){return c(e)})))||[],p=(null==s?void 0:C()(l=S()(s).call(s,(function(e){return"min"===e.type}))).call(l,(function(e){return c(e)})))||[],m=(null==s?void 0:C()(r=S()(s).call(s,(function(e){return"max"===e.type}))).call(r,(function(e){return c(e)})))||[];return t.separate_list_count&&(F()(d).call(d,"id")||d.push("id")),[d,u,null,_,p,m,t.getFilterStr(),t.getAllFilterDict(),null,null,angular.extend(t.getExtraProperty(),t.alter_extra_property),"all",!1,t.getBizType(),t.getAppendConditions(),t.getQuery()]},t.showCount=function(){var e;f.getDialog($e).show({mode:"update",data:t.stat_data,meta:t.stat_meta,statistics_decimal:null===(e=t.list_config)||void 0===e?void 0:e.statistics_decimal,alter:t.getInfoAlterParam(),stat_mode:t.stat_mode,loader:R.getItemCount,load_params:t.getLoadCountParams()}).then((function(){}))},t.showMultiView=function(){var e;t.multi_view_key="multiView"+(null===(e=t.auth)||void 0===e?void 0:e.employee.id)+ae()(),window.sessionStorage.setItem(t.multi_view_key,P()(t.list_model.selected_items)),t.defaultAction(t.list_model.selected_items[0])},t.showViewWithNav=function(e,n){var i,o;void 0===n&&(n={}),e?(t.multi_view_key="viewNavAll"+(null===(i=t.auth)||void 0===i?void 0:i.employee.id)+ae()(),window.sessionStorage.setItem(t.multi_view_key,P()({loadParams:t.getLoadDataParams(),model:t.getModel(),options:n})),t.defaultAction(e)):(t.multi_view_key="viewNavSelected"+(null===(o=t.auth)||void 0===o?void 0:o.employee.id)+ae()(),window.sessionStorage.setItem(t.multi_view_key,P()({item_list:t.list_model.selected_items,model:t.getModel(),options:n})),t.defaultAction(t.list_model.selected_items[0]))},t.showMultiNav=function(e,n){var i,o;void 0===e||x()(e)||t.list_model.selected_item?(t.multi_view_key="viewNavSelected"+(null===(o=t.auth)||void 0===o?void 0:o.employee.id)+ae()(),window.sessionStorage.setItem(t.multi_view_key,P()({item_list:t.list_model.selected_items,loadParams:t.getLoadDataParams(),model:t.getModel(),options:n}))):(t.multi_view_key="viewNavAll"+(null===(i=t.auth)||void 0===i?void 0:i.employee.id)+ae()(),window.sessionStorage.setItem(t.multi_view_key,P()({loadParams:t.getLoadDataParams(),model:t.getModel(),options:n})))},t.getAllFilterDict=function(){var e,n,i=t.advance_query_enabled&&(t.advance_query||{}).$getFilterDict?angular.extend(t.getFilterDict()||{},(angular.copy(t.advance_query)||{}).$getFilterDict()||{}):angular.extend(q()(t.getFilterDict()||{},(function(e,n){return!t.list_filter_model.field_metas[n]})),null===(e=t.list_filter_model)||void 0===e?void 0:e.$getFilters());return Object(N.a)(Object(N.a)({},t.transFilterDict(angular.copy(i))),null===(n=t.getExtraFilterDict)||void 0===n?void 0:n.call(t,t.getEnvironmentParams(),i))},t.getFilterStr=function(){var e;return t.advance_query_enabled&&"pc"===window.client&&angular.element("hc-query").length||angular.element("hc-query-new").length?(t.advance_query||{}).filter_str:null===(e=t.searchKey)||void 0===e?void 0:e.key},t.searchKey={key:null,blur:function(e){var n;13===(null!==(n=e.keyCode)&&void 0!==n?n:e.which)&&(t.list_model.data=[],t.list_model.expanded_items=[],t.paging.refreshPage())},change:function(){t.list_model.data=[],t.paging.refreshPage()},clear:function(){t.searchKey.key=null,$(".search input").focus(),t.searchKey.change()}},t.super_go=function(t,i,o,a){var l,r,c;(null===(l=n.current)||void 0===l?void 0:l.name)===t&&(i.model&&i.model!==(null===(r=n.params)||void 0===r?void 0:r.model)||i.meta_state!==(null===(c=n.params)||void 0===c?void 0:c.meta_state))&&(o=T()({inherit:!1},o||{})),e.super_go(t,i,o,a)},t.getEnvironmentParams=function(){return angular.extend({},n.params,t.params||{},{hcm_wengen:window.hcm_wengen,hcm_env_post:window.hcm_env_post,hcm_env_pre:window.hcm_env_pre},t.customEnvironmentParams||{})},t.customEnvironmentParams={},t.openDynamicDialog=function(e,n,i){return void 0===n&&(n={}),Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c=this;return Object(N.e)(this,(function(s){switch(s.label){case 0:return o=function(n){return Object(N.c)(c,void 0,void 0,(function(){var o;return Object(N.e)(this,(function(l){switch(l.label){case 0:return[4,f.getDialog(Object(Oe.a)(n.model,n.state,n.base_object_str)).size(i.size).show({mode:n.mode,data:n.data,meta_params:n.meta_params,alter:angular.extend(t.getInfoAlterParam()||{},a("valueToFunc")(n.alter)(e,t.getEnvironmentParams()))})];case 1:return o=l.sent(),n.no_fetch_data?[3,3]:[4,t.fetchData()];case 2:l.sent(),l.label=3;case 3:return[2,o]}}))}))},n.async?[4,n.data(e)]:[3,3];case 1:return l=s.sent(),[4,o({model:n.model,state:n.state,mode:n.mode,size:n.size,data:l,alter:angular.extend(t.getInfoAlterParam()||{},a("valueToFunc")(n.alter)(e,t.getEnvironmentParams()))})];case 2:return[2,s.sent()];case 3:return r=a("valueToFunc")(n)(e,t.getEnvironmentParams()),[4,o(r)];case 4:return[2,s.sent()]}}))}))},t.openInfoDialog=function(e,t,n){return void 0===t&&(t={}),Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(i){return[2,ge.getCommonAction("COMMON_INFO_DIALOG")(Object(N.a)(Object(N.a)({},n),{options:t}),{},{select_item:e})]}))}))},t.windowOpen=function(e,t){return window.open(a("valueToFunc")(t.url)(e))},t.viewAppointItem=function(e,n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c,s,d,u,_,p,m;return Object(N.e)(this,(function(h){switch(h.label){case 0:return o=a("valueToFunc")(n)(e),r=(l=f.getDialog((g=o.model,v=o.state,{controller:"BaseCRUDViewDialogCtrlDialog",template:He.a,model_name:g,object_str:b,meta_state:v,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}})).size(null===(_=i||{})||void 0===_?void 0:_.size)).show,c={mode:"view",id:o.id},d=(s=angular).extend,u=[t.getInfoAlterParam()||{}],[4,a("valueToFunc")(null!==(m=null===(p=null==i?void 0:i.options)||void 0===p?void 0:p.alter)&&void 0!==m?m:{})(e,t.getEnvironmentParams())];case 1:return[4,r.apply(l,[(c.alter=d.apply(s,B()(u).call(u,[h.sent()])),c)])];case 2:return[2,h.sent()]}var g,v,b}))}))},t.openDynamicList=function(e,n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c,s,d,u,_,p,m,f,h;return Object(N.e)(this,(function(g){switch(g.label){case 0:return o=i.options||{},l=n.model||o.model,c=(r=X).categoryListSelectorDialog,s={selectorModel:l,state:o.state},u=(d=angular).extend,_=[n.filter_dict||{}],o.filter_dict?[4,a("valueToFunc")(o.filter_dict)(e,t.getEnvironmentParams())]:[3,2];case 1:return p=g.sent(),[3,3];case 2:p={},g.label=3;case 3:return s.filter_dict=u.apply(d,B()(_).call(_,[p])),s.selectorType=o.selector_type,s.dialogTitle=o.dialog_title,s.size=i.size,f=(m=angular).extend,h=[t.getInfoAlterParam()||{}],[4,a("valueToFunc")(o.alter)(e,t.getEnvironmentParams())];case 4:return[2,c.apply(r,[(s.alter=f.apply(m,B()(h).call(h,[g.sent()])),s)])]}}))}))},t.openSelectorDialog=function(e,t){return Object(N.c)(he,void 0,void 0,(function(){var n;return Object(N.e)(this,(function(i){return[2,ge.getCommonAction("COMMON_LIST_DIALOG")(Object(N.a)(Object(N.a)({},e),{options:Object(N.a)(Object(N.a)(Object(N.a)({},e.options),(null===(n=e.options)||void 0===n?void 0:n.component_options)||{}),t||{})}))]}))}))},t.openListDialog=function(e,t){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(n){return[2,ge.getCommonAction("COMMON_LIST_DIALOG")(Object(N.a)(Object(N.a)({},t),{options:e}))]}))}))},t.openWebSocket=function(n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r;return Object(N.e)(this,(function(s){switch(s.label){case 0:return o=(null==i?void 0:i.options)||{},[4,a("valueToFunc")(i.params)(n,t.getEnvironmentParams())];case 1:return l=s.sent(),t.show_progress=!0,t.progress={value:0,message:null!==(r=null==o?void 0:o.begin_tip)&&void 0!==r?r:"开始"+a("valueToFunc")(i.label)()+"..."},e.show_waiting(),[2,W.callHcmOpenWebSocket(i.api||o.api,l||o.params).then((function(e){return a("valueToFunc")(null==o?void 0:o.post_func)(e),t.is_data_changed=!0,(null==o?void 0:o.no_fetch_data)||t.fetchData(),t.hide_waiting(),t.show_progress=!1,e}),(function(t){return t instanceof Event?(console.log(t),e.show_warning("WebSocket连接错误","warning")):e.show_warning(t,"warning"),c.a.reject(t)}),(function(e){t.progress={value:e.progress,message:e.message}})).finally((function(){t.show_progress=!1,e.hide_waiting()}))]}}))}))},t.funcParse=function(e){var o={angular:angular,SCOPE:t,FORM_DATA:function(e){var n;return null===(n=t.list_model.context_data)||void 0===n?void 0:n[e]},STATE:n,location:window.location,history:window.history,document:document,$timeout:i,$http:s,$q:r,$base64:_e,$filter:a,MOMENT:ae.a,dataService:W,CRUDService:R,contextService:G,BaseCRUDService:ue,hcDialogSelector:M,selectorService:Z,$hcDialog:f,InfoDialog:A,ViewDialog:ie.a,CommonModelDialogCtrl:Oe.a,CommonModelListDialog:je.a,CommonInfoDialog:Oe.a,JSONEditorDialog:Ee.a,PrintToPreview:Pe.default,toPrintService:de,commonSelectorService:X,documentPreviewService:ce,HCMCRUDImpExpService:L,workflowOnlineService:ee,WfPrintListDialogService:se,CommonModelViewDialog:ie.a,WINDOW:window,ITEM:function(){return t.list_model.selected_item},ITEMS:function(){return t.list_model.selected_items}};return angular.extend(o,t.getAlterEvalContext()),K.a.jsonEval(e,o,{})},t.getExprContext=function(e){return Object(N.a)({SELECT_ITEM:function(){return e},SELECT_DIRTY_ITEM:function(){return z()({},e,t.list_model.dirty[e.id]||{})},SELECT_ITEMS:function(){return t.list_model.selected_items},ENV:function(){var e;return angular.extend(t.getEnvironmentParams(),{filter_str:t.getFilterStr(),tree_node:null===(e=t.tree_model)||void 0===e?void 0:e.selectedNode,extra_property:t.getExtraProperty(),model_meta:t.model_meta,display_meta:t.list_model.merge_columns,paging:t.paging,advance_query:t.advance_query})},AUTH:function(){return t.auth},FILTER_DICT:function(){return t.getAllFilterDict()},GET_LIST:function(){return angular.copy(t.list_model.data)},GET_DIRTY:function(){return angular.copy(t.list_model.dirty)}},t.getAlterExprContext())},t.getAlterExprContext=function(){return{}},t.metaParse=function(e){return t.funcParse(e)},t.actionParse=function(e,i){void 0===i&&(i=!1);var o=i?e:t.funcParse(e)||[],l=function(e,t){return e.individualDisabled?t||angular.isFunction(e.individualDisabled)?e.individualDisabled():e.individualDisabled:t},r=function(e){var i;if((i=e).roles?i.permissionDisabled=a("actionPermission")(i.roles,{DATA:function(){return t.list_model.selected_items},SCOPE:function(){return t},STATE:function(){return n},AUTH:function(){return t.auth},TREE_MODEL:function(){return t.tree_model},FILTER_DICT:function(){var e,n,i,o;return t.no_advance_query||(null===(e=t.model_meta.advance_query)||void 0===e?void 0:e.close)?null===(o=t.list_filter_model)||void 0===o?void 0:o.data:null===(i=null===(n=t.advance_query)||void 0===n?void 0:n.query_model)||void 0===i?void 0:i.data}}):i.permissionDisabled=!1,"MULTI_ITEM"===(null==e?void 0:e.condition)){if(e.disabled)return l(e,e.disabled);e.disabled=function(){var n=0===(t.list_model.selected_items||{}).length;return!n&&e.permissionDisabled&&(n=a("valueToFunc")(e.permissionDisabled)()),l(e,n)}}else if("ITEM"===(null==e?void 0:e.condition)){if(e.disabled)return l(e,e.disabled);e.disabled=function(){var n=!t.list_model.selected_item;return!n&&e.permissionDisabled&&(n=a("valueToFunc")(e.permissionDisabled)()),l(e,n)}}else!e.disabled&&e.permissionDisabled&&(e.disabled=function(){return a("valueToFunc")(e.permissionDisabled)()})};return v()(o).call(o,(function(e){var t;r(e),x()(e.actions)&&v()(t=e.actions).call(t,(function(e){return r(e)}))})),o},t.dynamicAction=function(e,n){return R.dynamicAction(t.model_meta.model,t.getMetaState(),"list",e,n)},t.getSortMeta=function(){return t.sort_meta},t.setSortMeta=function(e){if(e.key){var n,i=y()(n=t.list_model.columns).call(n,(function(t){return t.key===e.key}));t.sort_meta=i?[{key:i.sort_key||i.field.join("."),type:e.type}]:[]}else t.sort_meta=[];t.fetchData()},t.setExpand=function(e){var n,i;if(!y()(n=t.list_model.tree_list).call(n,(function(n){return n[t.list_model.parent_id_key||"parent_id"]===e}))){var o=((i={})[t.list_model.parent_id_key||"parent_id"]=e,i);t.getDataEngine()(null,angular.extend(t.getAllFilterDict(),o),1,1e5,t.getExtraProperty(),t.getBizType()).then((function(e){t.list_model.$setTreeData(e.list)}))}},t.getTreeModeFilterDict=function(){var e,n,i,o;if("tree"===(null===(i=t.list_model)||void 0===i?void 0:i.view)&&F()(e=[null,"",void 0]).call(e,t.getFilterStr()))return(n={})[t.list_model.parent_id_key||"parent_id"]=B()(o=[null]).call(o,t.list_model.expanded_items),n.category_id=null,n},t.initCustomPackage=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i=this;return Object(N.e)(this,(function(o){return(e=(null===(n=t.hooks_meta)||void 0===n?void 0:n.custom_pkg_list)||[])&&e.length&&v()(e).call(e,(function(e){return Object(N.c)(i,void 0,void 0,(function(){var t;return Object(N.e)(this,(function(n){switch(n.label){case 0:return[4,Y.getTemplate(e.index)];case 1:return t=n.sent().template_config,K.a.windowEval(t),[2]}}))}))})),[2]}))}))},t.clearSelected=function(){t.list_model.selected_item=null,t.list_model.selected_items=[]},t.createItem=function(e){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c,s;return Object(N.e)(this,(function(d){switch(d.label){case 0:return o=(null==e?void 0:e.options)||{},[4,f.getDialog(A).size((null==e?void 0:e.size)||("terminal"===n.params.display_type?"full":void 0)).show({mode:"new",data:angular.extend({},t.getInitData(),o.init_data?a("valueToFunc")(o.init_data)(t.getEnvironmentParams()):{}),meta_params:angular.extend({},a("valueToFunc")(o.meta_params)(t.getEnvironmentParams())),alter:angular.extend({filter:(null===(s=null===(c=t.advance_query)||void 0===c?void 0:c.query_model)||void 0===s?void 0:s.data)||{}},t.getInfoAlterParam()||{},o.alter_info?a("valueToFunc")(o.alter_info)(t.getEnvironmentParams()):{}),parentBaseForm:t.parentBaseForm})];case 1:return l=d.sent(),t.deal_field_list_data?(t.deal_field_list_data(l,"new"),[3,7]):[3,2];case 2:return t.refresh_tree?[4,t.getTreeAndFetchData()]:[3,4];case 3:return r=d.sent(),[3,6];case 4:return[4,t.fetchData()];case 5:r=d.sent(),d.label=6;case 6:r,d.label=7;case 7:return t.refresh_nav_attachment&&t.refreshNavAttach(),i((function(){t.afterSubmit(l)})),t.clearSelected(),t.is_data_changed=!0,[2,l]}}))}))},t.editItem=function(e,n){return Object(N.c)(he,void 0,void 0,(function(){var i,o,l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return i=(null==n?void 0:n.options)||{},[4,f.getDialog(A).size((n||{}).size).show({mode:"edit",data:e,meta_params:angular.extend({},a("valueToFunc")(i.meta_params)(t.getEnvironmentParams())),alter:angular.extend(t.getInfoAlterParam()||{},i.alter_info?a("valueToFunc")(i.alter_info)(e,t.getEnvironmentParams()):{}),parentBaseForm:t.parentBaseForm,form_data_in_param:null==n?void 0:n.form_data_in_param})];case 1:return o=r.sent(),t.deal_field_list_data?(t.deal_field_list_data(o,"edit",e),[3,7]):[3,2];case 2:return t.refresh_tree?[4,t.getTreeAndFetchData()]:[3,4];case 3:return l=r.sent(),[3,6];case 4:return[4,t.fetchData()];case 5:l=r.sent(),r.label=6;case 6:l,r.label=7;case 7:return t.refresh_nav_attachment&&t.refreshNavAttach(),t.clearSelected(),t.is_data_changed=!0,t.afterEdit(),[2,o]}}))}))},t.editItemBatch=function(n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,s,d;return Object(N.e)(this,(function(u){switch(u.label){case 0:return o=i.params||{},l=(null==i?void 0:i.options)||{},r=Object(De.a)(o.model||A.model_name,o.state||A.meta_state,o.open_api,t.deal_field_list_data?function(e){return new c.a((function(t){return t(e)}))}:l.submit_func?function(e){return new c.a((function(t){return t(a("valueToFunc")(l.submit_func)(e))}))}:void 0),[4,f.getDialog(r).size((i||{}).size).show({mode:"edit",ids:C()(n).call(n,(function(e){return e.id})),alter:angular.extend(t.getInfoAlterParam()||{},l.alter_info?a("valueToFunc")(l.alter_info)(n,t.getEnvironmentParams()):{}),parentBaseForm:t.parentBaseForm})];case 1:return s=u.sent(),t.deal_field_list_data?(t.deal_field_list_data(s,"batchEdit",n),[3,7]):[3,2];case 2:return t.refresh_tree?[4,t.getTreeAndFetchData()]:[3,4];case 3:return d=u.sent(),[3,6];case 4:return[4,t.fetchData()];case 5:d=u.sent(),u.label=6;case 6:d,u.label=7;case 7:return t.clearSelected(),t.is_data_changed=!0,e.show_warning("批量操作成功！"),[2]}}))}))},t.dirtyModify={status:0,caption:"请开始编辑数据...",actions:[],defer:null,start:function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o;return Object(N.e)(this,(function(a){return t.dirtyModify.defer=r.defer(),t.dirtyModify.status=1,t.dirtyModify.caption=(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.caption)||"请开始编辑数据...",t.dirtyModify.actions=null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.actions,t.list_model.$setModify("dirty"),[2,null===(o=t.dirtyModify.defer)||void 0===o?void 0:o.promise]}))}))},end:function(e){return Object(N.c)(he,void 0,void 0,(function(){var n;return Object(N.e)(this,(function(i){return t.list_model.$endModify(),t.dirtyModify.status=0,null===(n=t.dirtyModify.defer)||void 0===n||n.resolve(e),[2]}))}))},resolve:function(e){var n;null===(n=t.dirtyModify.defer)||void 0===n||n.resolve(e)},actionParse:function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o;return Object(N.e)(this,(function(a){switch(a.label){case 0:return n=(e.options||{}).no_exit,[4,t.list_model.getDirty(!0)];case 1:return i=a.sent(),[4,e.func(i)];case 2:return o=a.sent(),n?[3,4]:[4,t.dirtyModify.end(o)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},reset:function(){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(e){return t.dirtyModify.status=0,t.dirtyModify.defer=null,t.columnModify.status=0,"view"!==t.list_model.state&&t.list_model.$resetModify(),[2]}))}))}},t.columnModify={status:0,swithStatus:function(){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(e){switch(e.label){case 0:return 1!==t.columnModify.status?[3,2]:(t.columnModify.status=0,[4,t.list_model.getDirty(!0)]);case 1:return e.sent(),t.list_model.$endModify(),[3,4];case 2:return t.columnModify.status=1,[4,t.list_model.$setModify("column")];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}},t.printItem=function(e,n){return Object(N.c)(he,void 0,void 0,(function(){var i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return i={actions:n},[4,f.getDialog(Fe.a).show({model:t.model_meta.model,obj_id:e.id,params:i})];case 1:return o.sent(),[2]}}))}))},t.previewPdf=function(e){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(t){return ce.preViewDocument(e),[2]}))}))},t.multiPrint=function(t,n){return Object(N.c)(he,void 0,void 0,(function(){var i,o,a,l,r,c,s;return Object(N.e)(this,(function(d){return i=C()(t).call(t,(function(e){return e.id})),o=n.model,a=n.state,l=n.view_type||"primary",r=n.multi||"multi",c=n.temp||!0,n.is_select,s={view_type:l,model:o,state:a,multi:r,send_message:!0,temp:c},W.callHcmOpenApi("model.report.calc.report.list.syn",{obj_ids:i,report_id:null,params:s}).then((function(t){e.show_warning(t.success?"文件正在生成，请稍候在消息通知中查看下载，如超30分钟未收到消息，请联系系统管理员":t.errorMsg,"warning")})),[2]}))}))},t.updateItem=function(e){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(n){switch(n.label){case 0:return[4,f.getDialog(A).show({mode:"update",data:e,alter:t.getInfoAlterParam()})];case 1:return n.sent(),[4,t.fetchData()];case 2:return n.sent(),t.clearSelected(),t.is_data_changed=!0,[2]}}))}))},t.viewItem=function(e,n){return Object(N.c)(he,void 0,void 0,(function(){var i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return[4,f.getDialog(Object(ie.a)(t.model_meta?t.model_meta.model:t.options.model,null===(i=t.model_meta)||void 0===i?void 0:i.state)).size((n||{}).size).show({mode:"view",data:e,id:e.id})];case 1:return o.sent(),[2]}}))}))},t.reverseItem=function(e){return Object(N.c)(he,void 0,void 0,(function(){var n;return Object(N.e)(this,(function(i){switch(i.label){case 0:return n=e.name||"",[4,f.confirm("是否确认还原"+n+"？")];case 1:return i.sent(),[4,R.reverseItem(e.id)];case 2:return i.sent(),[4,t.fetchData()];case 3:return i.sent(),t.clearSelected(),t.is_data_changed=!0,[2]}}))}))},t.removeItem=function(e){return Object(N.c)(he,void 0,void 0,(function(){var n;return Object(N.e)(this,(function(i){switch(i.label){case 0:return n=e.name||"",t.deal_field_list_data?(t.deal_field_list_data(e,"delete"),[3,8]):[3,1];case 1:return[4,f.confirm("是否确认删除"+n+"？")];case 2:return i.sent(),[4,R.removeItem(e.id)];case 3:return i.sent(),t.refresh_tree?[4,t.getTreeAndFetchData()]:[3,5];case 4:return i.sent(),[3,7];case 5:return[4,t.fetchData()];case 6:i.sent(),i.label=7;case 7:t.clearSelected(),t.is_data_changed=!0,t.afterEdit(),i.label=8;case 8:return[2,!0]}}))}))},t.removeItemBatch=function(n){return Object(N.c)(he,void 0,void 0,(function(){var i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return i=C()(n).call(n,(function(e){return e.id})),t.deal_field_list_data?(t.deal_field_list_data(n,"batchDelete"),[3,8]):[3,1];case 1:return[4,f.confirm("是否确认删除？")];case 2:return o.sent(),[4,R.removeItemBatch(i)];case 3:return o.sent(),t.refresh_tree?[4,t.getTreeAndFetchData()]:[3,5];case 4:return o.sent(),[3,7];case 5:return[4,t.fetchData()];case 6:o.sent(),o.label=7;case 7:t.clearSelected(),t.is_data_changed=!0,e.show_warning("删除成功"),o.label=8;case 8:return[2]}}))}))},t.workflow_submit=function(n,i,o){return Object(N.c)(he,void 0,void 0,(function(){var a,l,r,c,s,d,u,_,p,m,f,g,v,b;return Object(N.e)(this,(function(y){switch(y.label){case 0:return n&&"3"!==o.version?(o.business_id=i.data.business_open.business_id,1!==(null===(v=t.list_model.selected_items)||void 0===v?void 0:v.length)?[3,3]:(a=JSON.parse(i.data.form_data_define.content),l=i.data.wf.id,s=t.list_model.selected_items[0].id,[4,R.getItemInfo(s)])):[3,5];case 1:return r=y.sent(),r=t.getWfInitData(r),c={},C()(a).call(a,(function(e){var t=e.fields,n={},i=C()(t).call(t,(function(e){if(null!==r[e.key]&&void 0!==r[e.key])return n[e.key]=r[e.key],n})),o=S()(i).call(i,(function(e){return void 0!==e}))[0];if("form"===e.type){for(var a in o)o.hasOwnProperty(a)&&null!==o[a]&&("object"===h()(o[a])&&null!==o[a]?(o[a].id||o[a].key)&&(o[a]={value:o[a].id?o[a].id:o[a].key,content:o[a].id?o[a].id:o[a].key}):"boolean"==typeof o[a]?o[a]={value:o[a],content:o[a]}:o[a]={value:o[a]?o[a]:"",content:o[a]?o[a]:""});o.wf_emp={name:r.business&&r.business.name,state:"new",wf_inst:null}}c[e.key]=o})),g={form_data:c,wf_id:l},[4,t.createAndStart(g,o)];case 2:return y.sent(),[3,4];case 3:t.list_model.selected_items.length>1?e.show_warning("一次只能提交一条流程"):e.show_warning("请选择单据"),y.label=4;case 4:return[3,12];case 5:return n&&"3"===o.version?1!==(null===(b=t.list_model.selected_items)||void 0===b?void 0:b.length)?[3,8]:(s=t.list_model.selected_items[0].id,[4,R.getItemInfo(s)]):[3,10];case 6:return d=y.sent(),d=t.getWfInitData(d),(u={}).childrens={},_={},p=i.fields,m=i.childrens,f=C()(p).call(p,(function(e){if(C()(m).call(m,(function(t){t.key===e.key&&(u.childrens[t.key]=d[e.key])})),null!==d[e.key]&&void 0!==d[e.key])return _[e.key]=d[e.key],_})),u=S()(f).call(f,(function(e){return void 0!==e}))[0],g={form_data:u},[4,t.createAndStart(g,o)];case 7:return y.sent(),[3,9];case 8:t.list_model.selected_items.length>1?e.show_warning("一次只能提交一条流程"):e.show_warning("请选择单据"),y.label=9;case 9:return[3,12];case 10:return[4,t.createAndStart(i,o)];case 11:y.sent(),y.label=12;case 12:return[2]}}))}))},t.workflowCreate=function(e){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(t){switch(t.label){case 0:return[4,oe.createAndStartWorkflow(Object(N.a)({wf_edit:!0},e))];case 1:return[2,t.sent()]}}))}))},t.wf_start=function(n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,l=this;return Object(N.e)(this,(function(r){switch(r.label){case 0:return(null==i?void 0:i.business_id)||!i.business_number?[3,2]:[4,W.callHcmOpenApi("business.mode.and.version.get",{business_number:i.business_number})];case 1:o=r.sent(),i.business_id=null==o?void 0:o.business_id,r.label=2;case 2:return n?(W.callHcmOpenApi("hcm.model.ote",{model:"wf_form_data_flex_data."+i.business_id,source_id:n.id,state:i.ote,source_item:n,is_preview:!0,group_filter:i.group_filter?a("valueToFunc")(i.group_filter)(n,t.getEnvironmentParams()):{}}).then((function(n){return Object(N.c)(l,void 0,void 0,(function(){var o,a;return Object(N.e)(this,(function(l){switch(l.label){case 0:return i.wf_edit?[4,tt.a.getCustomDialogCtrl("WorkflowDetailNewInfoDialogCtrl")]:[3,2];case 1:return o=l.sent(),f.getDialog(o()).params({mode:"new",business_id:i.business_id,form_data:n}).show().then((function(e){t.fetchData()}),(function(){t.fetchData(),e.show_warning("流程创建失败，请联系管理员")})),[3,3];case 2:a={bill_obj:"@bill_obj_name=form_data_detail@bill_obj_type=table@",business_id:i.business_id,form_description:""},ee.createAndStartWorkflowInstanceV3({wf_data:a,form_data:n}).then((function(n){n.success?(e.show_warning("流程创建成功"),t.fetchData()):e.show_warning("流程创建失败，请联系管理员")}),(function(){e.show_warning("流程创建失败，请联系管理员")})),l.label=3;case 3:return[2]}}))}))})),[2]):(t.show_warning("请选择数据！"),[2])}}))}))},t.createAndStart=function(n,i){return Object(N.c)(he,void 0,void 0,(function(){var o,a,l,r,c,s,d;return Object(N.e)(this,(function(u){switch(u.label){case 0:return n&&"object"===h()(n)?(o={bill_obj:"@bill_obj_name=form_data_detail@bill_obj_type=table@",wf_id:n.wf_id,business_id:i.business_id,form_description:""},i.wf_edit?[4,tt.a.getCustomDialogCtrl("3"!==i.version?"WorkflowDetailInfoDialogCtrl":"WorkflowDetailNewInfoDialogCtrl")]:[3,4]):[3,10];case 1:return a=u.sent(),l=f.getDialog(a()).params({mode:"3"!==i.version?"view":"business_new",business_id:i.business_id,business_number:i.business_number,form_data:n.form_data}).size("full").show(),("object"===h()(l)?null==l?void 0:l.success:l)?[4,t.fetchData()]:[3,3];case 2:u.sent(),u.label=3;case 3:return[3,10];case 4:return r="3"!==i.version?ee.createAndStartWorkflowInstance:ee.createAndStartWorkflowInstanceV3,[4,Object(H.c)(O()(r).call(r,ee)({wf_data:o,form_data:n.form_data}))];case 5:return c=N.f.apply(void 0,[u.sent(),2]),s=c[0],(d=c[1])?d.success?(e.show_warning("流程创建成功"),[4,t.wfCallBack(d)]):[3,8]:[3,9];case 6:return u.sent(),[4,t.fetchData()];case 7:return u.sent(),[3,9];case 8:e.show_warning("流程创建失败，请联系管理员"),u.label=9;case 9:s&&e.show_warning("流程创建失败，请联系管理员"),u.label=10;case 10:return[2]}}))}))},t.$watch("sub_title_meta",(function(e){e&&e.length&&(t.sub_title_model=p.createForm("sub_title").$setMeta(t.sub_title_meta))})),t.initChangePageList=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,i,a,l,r,c,s,d,u,_;return Object(N.e)(this,(function(p){var m,f;switch(p.label){case 0:return t.initChangePageListFlag=!0,e=t,a=(i=t).transChild,[4,t.getPageListFunc()];case 1:return e.changePageList=a.apply(i,[p.sent()]),t.isNewStyle=t.isNewStyle||!!(null===(s=null===(c=t.list_config)||void 0===c?void 0:c.page_change)||void 0===s?void 0:s.is_new_style),t.initValue=(null===(d=y()(m=t.changePageList).call(m,(function(e){if(e.id){var t="number"==typeof e.id?e.id:e.id.split("-")[0];return n.params.meta_state?t===n.params.model&&e.meta_state===n.params.meta_state:t===n.params.model}})))||void 0===d?void 0:d.id)||(null===(_=null===(u=t.changePageList)||void 0===u?void 0:u[0])||void 0===_?void 0:_.id),t.current_tab_index=o()(f=t.changePageList).call(f,(function(e){return e.id===t.initValue})),l=t,r={key:"change_page",component:"hc-super-selector"},[4,t.getChangePageOptions()];case 2:return l.sub_title_meta=[(r.options=p.sent(),r)],[2]}}))}))},t.initChangePageComponent=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i,o;return Object(N.e)(this,(function(a){switch(a.label){case 0:return t.initChangePageListFlag=!0,e=t,n={key:"change_page",component:null===(o=null===(i=t.list_config)||void 0===i?void 0:i.page_change)||void 0===o?void 0:o.component},[4,t.getChangePageOptions()];case 1:return e.sub_title_meta=[(n.options=a.sent(),n)],[2]}}))}))},t.showSubTitle=function(e){f.getDialog(Ae.a).anchor("pc"===window.client&&angular.element(e.target).closest("hc-select")).size("middle").show(angular.extend(t.sub_title_meta[0].options,{data:t.model})).then((function(e){t.sub_title_meta[0].options.originObject=e,t.pageChangeFunc(null,e.id)}))},t.place_holder=null,t.transChild=function(e){var n;e.childs=t.actionParse(e.childs);var i=B()(n=[e.base]).call(n,e.childs);return C()(i).call(i,(function(e){return Object(N.c)(he,void 0,void 0,(function(){var n,i,o,l;return Object(N.e)(this,(function(r){switch(r.label){case 0:return e.list_api?(n=e.list_func.api_name,i=a("valueToFunc")(e.list_func.api_params)(e.model,e.meta_state,t.getEnvironmentParams())||{},o=e,[4,W.callHcmOpenApi(n,i)]):[3,2];case 1:o.list=r.sent(),r.label=2;case 2:var c;if(null===(l=e.list)||void 0===l?void 0:l.length)C()(c=e.list).call(c,(function(e){e.name=e.label,e.meta_state?e.id=e.model+"-"+e.meta_state:e.id=e.model}));else e.meta_state?e.id=e.model+"-"+e.meta_state:e.id=e.model;return e.name=e.label,[2]}}))}))})),i},t.getChangePageOptions=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i;return Object(N.e)(this,(function(o){return[2,Object(N.a)(Object(N.a)({default:t.getPageDefault(),no_delete:!0,placeholder:t.place_holder,change:t.pageChangeFunc,skipInitChange:!0,icon:"icon-hcm-arrow-down-solid",list:t.changePageList||[],readOnly:t.funcParse(null===(e=t.page_change)||void 0===e?void 0:e.readOnly)},null===(i=null===(n=t.list_config)||void 0===n?void 0:n.page_change)||void 0===i?void 0:i.component_options),{seletor_type:1})]}))}))},t.pageChangeFunc=function(e,n){var i;if(null===(i=t.page_change)||void 0===i?void 0:i.component){var o={model:n[t.page_change.model_field||"model"],meta_state:n[t.page_change.model_field||"meta_state"]},a=o.model,l=o.meta_state;t.changePage(a,l)}else t.changePage(n)},t.getPageListFunc=function(){return R.getPageList("base",t.base_model,t.getPageChangeState(),t.getPageChangeExtraParams())},t.getPageChangeState=function(){var e,n;return(null===(n=null===(e=t.list_config)||void 0===e?void 0:e.page_change)||void 0===n?void 0:n.meta_state)||null},t.getPageChangeExtraParams=function(){var e,n,i;return(null===(i=null===(n=null===(e=t.list_config)||void 0===e?void 0:e.page_change)||void 0===n?void 0:n.getPageChangeExtraParams)||void 0===i?void 0:i.call(n))||{}},t.getPageDefault=function(){return n.params.meta_state?n.params.model+"-"+n.params.meta_state:n.params.model},t.changePage=function(e,n){return Object(N.c)(he,void 0,void 0,(function(){var i,o;return Object(N.e)(this,(function(a){var l;switch(a.label){case 0:return i=e.split("-")[0],t.menuChangeState(i),(null==A?void 0:A.model_name)&&(A.model_name=i),t.merged_fields=null,R=t.getChildCrudService(i),t.base_model=null,t.list_meta=null,t.changePageRefreshTree||(t.tree_loader=null),t.meta_state=n||(null===(o=y()(l=t.changePageList).call(l,(function(t){return t.id===e})))||void 0===o?void 0:o.meta_state)||null,t.getPageChangeStateParams=function(){return{model:i,meta_state:t.meta_state}},t.changePageBefore&&t.changePageBefore(e),t.category_id&&(t.category_id=null),[4,t.init()];case 1:return a.sent(),t.fetched_category_meta=!1,[2]}}))}))},t.getChildCrudService=function(e){return angular.extend(R,ue.getModelService(e))},t.getPageList=function(e){var t;return B()(t=[e.base]).call(t,e.childs)},t.getOuterAdvanceParams=function(){return{}},t.initAdvanceQueryAfter=function(){},t.getMetaFilters=function(){var e,n;return t.parsed_static_filters?B()(e=t.parsed_static_filters||[]).call(e,t.parsed_filters||[]):t.metaParse(B()(n=t.model_meta.static_filters||[]).call(n,t.model_meta.filters||[]))},t.initAdvanceQuery=function(e){void 0===e&&(e=!0);var o=[];t.setFilterDict&&o.push(t.setFilterDict()),r.all(o).then((function(o){var a=this;t.advance_query=(t.use_new_query?k:w).create().$setOptions(angular.extend({loader:R.getQueryFields,data:t.query_fields_data,model:t.getModel(),state:t.getMetaState(),biz_type:t.getBizType(),get_plan:e,plan_list:t.advance_plan_list,description:t.model_meta.description,page_state:n.current.name,state_params:n.params,getFilterStr:t.parseUrlFilterStr,getQueryStr:t.parseUrlQueryStr,default_filter_dict:o[0],reserve_filter_dict:t.reserve_advance_filter_dict,current_plan:t.current_plan,advance_query_config:angular.extend(t.model_meta.advance_query||{},t.advance_query_config||{}),right_hide:t.model_meta.advance_query.right_hide,filters:t.getMetaFilters(),list_meta:t.list_meta,column_defs:t.model_meta.column_defs,relations:t.getAppendRelations(),selector_flag:t.selector_flag,blur_fields:t.blur_fields,func_parse:t.funcParse,force_refresh:t.force_refresh,query_str_value_parser:R.convertQueryStrToObj(t.getMetaState(),t.getBizType()),tree_config:function(){var e;return null===(e=t.tree_model)||void 0===e?void 0:e.tree_config},mobile_tree_config:t.mobile_tree_config,display_callback:function(e,n,i,o,l,r,c,s,d){return Object(N.c)(a,void 0,void 0,(function(){return Object(N.e)(this,(function(a){switch(a.label){case 0:return[4,t.refreshList(e,n,i,o,l,r,c,s,d)];case 1:return a.sent(),[2]}}))}))},setListColumns:t.setListColumns,paging:t.paging,meta_sorts:t.model_meta.sorts},t.getOuterAdvanceParams())),i((function(){t.advance_query.$initQuery(),t.initAdvanceQueryAfter(),t.isLoading=!1}))}))},t.showQuery=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n;return Object(N.e)(this,(function(i){var o;switch(i.label){case 0:return t.advance_query_enabled?(t.tree_model&&((null===(n=t.advance_query.query_model.data)||void 0===n?void 0:n[t.getTreeKey()])||(t.advance_query.query_model.data[t.getTreeKey()]=t.tree_model.selectedNode.id)),e=t.advance_query.query_model,[4,f.getDialog(ze).params({meta:t.advance_query.query_model.fields,data:t.advance_query.query_model.data,remove_info_meta:t.advance_query.advance_query_config.remove_info_meta,all_info_meta:S()(o=t.advance_query.all_info_meta).call(o,(function(e){return!e.options.hide}))}).slideInConfig("right").show()]):[3,2];case 1:return e.data=i.sent(),t.list_model.data=[],t.advance_query.$search(),[3,3];case 2:t.show_query=!t.show_query,i.label=3;case 3:return[2]}}))}))},t.showRowConfig=function(e){e&&e.stopPropagation(),f.getDialog(Te).size("pc"===window.client?"small":null).anchor(angular.element(e.target).closest(".grid-setting-content")).show({row_type:t.list_model.row_type,row_space:t.list_model.row_space,font_size:t.list_model.font_size_type}).then((function(e){if(e)switch(e.key){case"row_type":t.list_model.$setRowType(e.value),t.list_model.$setStorage({model:"hc_list_row_type"},e.value),t.list_model.$setTableHeight();break;case"row_space":t.list_model.$setRowStyle(e.value),t.list_model.$setStorage({model:"hc_list_row_space"},e.value);break;case"font_size":t.list_model.$setFontSize(e.value),t.list_model.$setStorage({model:"hc_list_font_size"},e.value)}}))},t.refreshList=function(e,n,i,o,a,l,r,c,s){return Object(N.c)(he,void 0,void 0,(function(){var d,u,_,p,m,f,h,g,v,b,y,w;return Object(N.e)(this,(function(x){switch(x.label){case 0:return r&&(t.stat_meta=r),l&&l.length&&(t.sort_meta=l,t.list_model.$setSort(t.sort_meta[0])),c&&(t.cate_meta=c),s&&(t.paging._page_size=s),[4,t.refreshListAsync(o)];case 1:return x.sent(),[4,t.getPagingParams()];case 2:var k;if(d=x.sent().current_page,u=n?1:d,n&&(null===(p=t.list_config)||void 0===p?void 0:p.query_clear_selected)&&(null===(m=t.list_model)||void 0===m||m.$clearSelectedItems()),e&&e.length)_=S()(e).call(e,(function(e){return!e.hide&&e.fixed})).length,a=a||(null===(f=t.model_meta)||void 0===f?void 0:f.column_defs),(null===(h=null==a?void 0:a.children)||void 0===h?void 0:h.length)?t.list_model.$setColumnDefs(a,e):t.list_model.$setColumns(e,_),t.merged_fields=B()(e).call(e,S()(k=t.list_meta).call(k,(function(t){var n;return!F()(n=C()(e).call(e,(function(e){return e.key}))).call(n,t.key)&&1!==t.ondemand})));else i&&((null===(b=null===(v=null===(g=t.model_meta)||void 0===g?void 0:g.column_defs)||void 0===v?void 0:v.children)||void 0===b?void 0:b.length)?t.list_model.$setColumnDefs(null===(y=t.model_meta)||void 0===y?void 0:y.column_defs,null===(w=t.model_meta)||void 0===w?void 0:w.fields):t.setListColumns());return t.paging.refreshPage(u),[2]}}))}))},t.parseUrlFilterStr=function(){return n.params.filter_str},t.parseUrlQueryStr=function(){return n.params.query_str},t.dumpReportFilter=function(e){return Ie.a.dump(e||{})},t.createSubjectAnalysis=function(e){return void 0===e&&(e={}),t.params&&t.params.filter_dict&&angular.extend(e,t.params.filter_dict),f.getDialog(Object(Oe.a)("CommonDashBoardDefine","com")).show({data:angular.extend({model:t.model_meta.model,description:t.model_meta.description,state:t.getMetaState(),scheme:t.params.current_plan.id,scheme_name:t.params.current_plan.name},e),mode:"new"}).then((function(){t.params&&t.params.filter_dict&&t.fetchData()}))},t.createAnalysisTheme=function(e){return void 0===e&&(e={}),t.params&&t.params.filter_dict&&angular.extend(e,t.params.filter_dict),f.getDialog(Object(Oe.a)("AnalysisBoardDefine","com")).show({data:angular.extend({model:t.model_meta.model,description:"分析图表",state:t.getMetaState()},e),mode:"new"}).then((function(){t.params&&t.params.filter_dict&&t.fetchData()}))},t.setViewSwitch=function(){var n;t.viewSwitch={current:null,get list(){var n,i,o=angular.copy((null===(n=t.list_model)||void 0===n?void 0:n.view_list_config)||{});return((t.model_meta||{}).analyse||{}).open&&"pc"===e.client&&("board"===t.model_meta.analyse.open?o.analyses_board={icon:"icon-gaugeboard"}:o.analyses={icon:"icon-chart-line"}),!this.current&&t.list_model.view&&(this.current={key:t.list_model.view,icon:null===(i=null==o?void 0:o[t.list_model.view])||void 0===i?void 0:i.icon}),"{}"===P()(o)?null:o},click:function(e){var t,n=this.list[e];this.current={key:e,icon:n.icon},null===(t=n.click)||void 0===t||t.call(n)}},null===(n=t.viewSwitch)||void 0===n||n.list},t.clickChangeListView=function(){var e,n,i=[],o=0;for(var a in null===(e=t.viewSwitch)||void 0===e?void 0:e.list)i.push({key:a,item:null===(n=t.viewSwitch)||void 0===n?void 0:n.list[a]});v()(i).call(i,(function(e,n){e.key===t.viewSwitch.current.key&&(o=n===i.length-1?0:n+1)})),t.viewSwitch.click(i[o].key)},t.analyses_model={get filter(){return{filter_str:t.getFilterStr(),filter_dict:t.getAllFilterDict()}},get current_plan(){return t.advance_query.current_plan},get theme_filter(){return{model:t.model_meta.model,state:t.getMetaState()}},get model_meta(){return t.model_meta},refresh:function(){}},t.show_warning=function(t,n,i){e.show_warning(t,n,i)},t.showVGA=function(e,t){j.showVGA({name:e,fileId:t})},t.getIdentityName=function(){var e=t.getMetaState()?t.getModel()+"-"+t.getMetaState():t.getModel();return(null==e?void 0:e.replace(/(\s|\.|\$|\+|\#|\|)/g,""))||""},t.getModel=function(){var e;return null===(e=t.model_meta)||void 0===e?void 0:e.model},t.defaultAction=function(i){return Object(N.c)(he,void 0,void 0,(function(){var o,l,r,c,s,d;return Object(N.e)(this,(function(u){var _;switch(u.label){case 0:return o=S()(_=t.list_btn_model.actions).call(_,(function(e){return e.default})),"mobile"===t.client&&t.list_model.select_status?(t.list_model.selectItem(i),[3,8]):[3,1];case 1:if(!(o.length>0))return[3,7];if(!(null===(r=o[0])||void 0===r?void 0:r.roles))return[3,5];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,a("actionPermissionAsync")(null===(c=o[0])||void 0===c?void 0:c.roles,{DATA:function(){return i},SCOPE:function(){return t},STATE:function(){return n},AUTH:function(){return t.auth},TREE_MODEL:function(){return t.tree_model},FILTER_DICT:function(){var e,n,i,o;return t.no_advance_query||(null===(e=t.model_meta.advance_query)||void 0===e?void 0:e.close)?null===(o=t.list_filter_model)||void 0===o?void 0:o.data:null===(i=null===(n=t.advance_query)||void 0===n?void 0:n.query_model)||void 0===i?void 0:i.data}})];case 3:return u.sent(),[3,5];case 4:return u.sent(),[2,e.show_warning("无权操作该数据")];case 5:return[4,t.parseAction(o[0],i)];case 6:return l=u.sent(),(null===(s=o[0])||void 0===s?void 0:s.after_func)&&(null===(d=o[0])||void 0===d||d.after_func(l)),[3,8];case 7:t.model_meta?t.list_model.selectItem(i):t.editItem(i),u.label=8;case 8:return[2]}}))}))},t.setTitle=function(e){!t.$dialog&&t.list_config.setTitle&&e&&(document.title=e)},t.setTip=function(e){t.$dialog&&e&&t.$dialog.tip(e)},t.fetchCategoryBefore=function(){},t.list_meta=null,t.list_btn_meta=[],t.list_filter_meta=[],t.sub_title_meta=[],t.list_card_meta=null,t.list_default_view=null,t.initBefore=function(){},t.initAfter=function(){},t.getFilterDict=function(){return null},t.batchEditItemSubmit=function(){},t.getExtraProperty=function(){return{state:t.getMetaState(),sorts:t.getSortMeta(),query_str:t.getQueryStr(),relations:t.getRelations(),filter_params:Object(N.a)(Object(N.a)(Object(N.a)({},n.params),{page_index:t.paging.current_page,page_size:t.paging.page_size}),t.getStateParams())}},t.getAlterEvalContext=function(){return{}},t.getQueryStr=function(){var e;if(!((t.model_meta||{}).advance_query||{}).close)return null===(e=t.advance_query)||void 0===e?void 0:e.trans_query_str},t.getModel=function(){return(t.model_meta||{}).model||n.params.model},t.menuChangeState=function(e){var i,o,a,r;n.params.model=e;var c=t.reserve_meta_params?["query_str","filter_str","show_fields_key","meta_sate","tree_filter_mode"]:["query_str","filter_str","show_fields_key","meta_sate","tree_filter_mode","meta_params"];if(C()(c).call(c,(function(e){delete n.params[e]})),t.category_field=null,(null===(i=t.reserve_advance_filter_dict_keys)||void 0===i?void 0:i.length)>0){var s=JSON.parse(n.params.advance_filter_dict||"{}");null===(o=_()(s))||void 0===o||v()(o).call(o,(function(e){var n;~l()(n=t.reserve_advance_filter_dict_keys).call(n,e)||delete s[e]})),t.reserve_advance_filter_dict=s}if((null===(a=t.reserve_filter_dict_keys)||void 0===a?void 0:a.length)>0){var d=JSON.parse(n.params.filter_dict||"{}");null===(r=_()(d))||void 0===r||v()(r).call(r,(function(e){var n;~l()(n=t.reserve_filter_dict_keys).call(n,e)||delete d[e]})),t.reserve_filter_dict=d}delete n.params.advance_filter_dict,delete n.params.filter_dict},t.setState=function(){t.templocal||(t.templocal=n.$current.locals["@main"]),t.$dialog||t.list_model.is_child_list||e.super_go(n.current.name,t.getStateParams(),{location:"replace",notify:!1})},t.getStateParams=function(){var e,i=t.advance_query||{},o=t.list_filter_model||{},a="{}"===P()(o.data)?void 0:o.data;return angular.extend({tree_id:t.tree_model&&t.tree_model.selectedNode&&t.tree_model.selectedNode.t_id,tree_filter_mode:t.tree_filter_mode,effect_date:t.effect_date,filter_str:t.getFilterStr(),filter_dict:a||n.params.filter_dict,page_index:t.paging.current_page,page_size:t.paging.page_size,advance_filter_dict:i.query_model&&i.query_model.data||n.params.advance_filter_dict,query_str:i.query_str,show_fields_key:C()(e=i.show_fields||[]).call(e,(function(e){return e.key}))},t.getPageChangeStateParams(),t.getAlterStateParams())},t.secondCheckPassword=function(e,n,i,o){return void 0===n&&(n=600),void 0===o&&(o=!1),Object(N.c)(he,void 0,void 0,(function(){var a,l,r;return Object(N.e)(this,(function(c){switch(c.label){case 0:return[4,W.callHcmOpenApi(i||"common.second.password.check",{category:e,user_check:o})];case 1:return c.sent().success?[2,!0]:[4,W.callHcmOpenApi("second.password.has.password",{user_check:o})];case 2:return a=c.sent(),"DoubleCheckPassword",l=a?"pwd":"setting",[4,t.openDynamicDialog(null,{model:"DoubleCheckPassword",state:l,data:null,alter:{category:e,expire:n,user_check:o},no_fetch_data:!0},{size:"small"})];case 3:return r=c.sent().success,"setting"===l&&r?(t.show_warning("设置密码成功!"),[4,t.secondCheckPassword(e,n,i,o)]):[3,5];case 4:return c.sent(),[3,6];case 5:return[2,r];case 6:return[2]}}))}))},t.checkSignTheAgreement=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i;return Object(N.e)(this,(function(o){switch(o.label){case 0:return t.auth.privacy_agreement?[2,!0]:"pc"!==window.client?[3,7]:[4,f.getDialog(angular.extend(et,{title:"用户协议"})).size("normal").show()];case 1:return(null==(n=o.sent())?void 0:n.success)?[4,W.callHcmOpenApi("auth/sign_agreement",{privacy_agreement:!0})]:[3,5];case 2:return o.sent().privacy_agreement?(e=t,[4,U.getAuth()]):[3,4];case 3:e.auth=o.sent(),t.checkSignTheAgreement(),o.label=4;case 4:return[3,6];case 5:return[2,!1];case 6:return[3,13];case 7:return[4,f.getMessageDialog(angular.extend(et,{title:"用户协议"})).show()];case 8:return(null==(n=o.sent())?void 0:n.success)?[4,W.callHcmOpenApi("auth/sign_agreement",{privacy_agreement:!0})]:[3,12];case 9:return o.sent().privacy_agreement?(i=t,[4,U.getAuth()]):[3,11];case 10:i.auth=o.sent(),t.checkSignTheAgreement(),o.label=11;case 11:return[3,13];case 12:return[2,!1];case 13:return[2]}}))}))},t.transFilterDict=function(e){return e},t.getAlterStateParams=function(){return{}},t.getPageChangeStateParams=function(){return{}},t.getInitData=function(){return{}},t.getWfInitData=function(e){return e},t.wfCallBack=function(e){var t=r.defer();return t.resolve(e),t.promise},t.getInfoAlterParam=function(){return{}},t.checkFetch=function(){return!0},t.fetchDataSuccess=function(e){},t.fetchCountSuccess=function(e){},t.individualParse=function(e){return e},t.meta_state=null,t.getMetaState=function(){return t.meta_state||n.params.meta_state},t.biz_type=null,t.getBizType=function(){return t.biz_type||n.params.biz_type||"list"},t.afterSubmit=function(){},t.metaLoaded=function(e){},t.setListAlterOptions=function(){},t.getListBtnMax=function(){return Object(N.c)(he,void 0,void 0,(function(){var e,n,i,o,a;return Object(N.e)(this,(function(l){switch(l.label){case 0:return[4,re.getListGlobalConfig()];case 1:return e=l.sent(),t.list_config.list_btn_max_num=t.list_config.list_btn_max_num?t.list_config.list_btn_max_num:(null===(n=null==e?void 0:e.list_config)||void 0===n?void 0:n.list_btn_max_num)?null===(i=null==e?void 0:e.list_config)||void 0===i?void 0:i.list_btn_max_num:4,t.list_config.list_btn_max_num_mobile=t.list_config.list_btn_max_num_mobile?t.list_config.list_btn_max_num_mobile:(null===(o=null==e?void 0:e.list_config)||void 0===o?void 0:o.list_btn_max_num_mobile)?null===(a=null==e?void 0:e.list_config)||void 0===a?void 0:a.list_btn_max_num_mobile:1,t.list_btn_model.$setShowMax(t.list_config.list_btn_max_num),"mobile"==t.client&&t.list_btn_model.$setMobileShowMax(t.list_config.list_btn_max_num_mobile),[2]}}))}))},t.getRequireFunc=function(){return[t.initList()]},t.refreshListAsync=function(){},t.initMetaHooks=function(){var e,n,i,o;(null===(e=t.model_meta)||void 0===e?void 0:e.hooks)&&"{}"!==P()(null===(n=t.model_meta)||void 0===n?void 0:n.hooks)?(t.hooks_meta=t.metaParse(t.model_meta.hooks),v()(i=_()(t.hooks_meta)).call(i,(function(e){var n;"function"==typeof t.hooks_meta[e]?t[e]=t.hooks_meta[e]:"object"===h()(t.hooks_meta[e])&&(null===(n=t.hooks_meta[e])||void 0===n?void 0:n.action)&&null!==t.hooks_meta[e]&&(t[e]=function(){var n;return Object(N.c)(this,void 0,void 0,(function(){return Object(N.e)(this,(function(i){switch(i.label){case 0:return[4,t.tableActionProcess(null===(n=t.hooks_meta[e])||void 0===n?void 0:n.action)];case 1:return[2,i.sent()]}}))}))})}))):(C()(o=["metaLoadedAsync","setMetaBeforeAsync","beforeFetchDataAsync","afterFetchDataAsync"]).call(o,(function(e){t[e]=function(e){return Object(N.c)(he,void 0,void 0,(function(){return Object(N.e)(this,(function(e){return[2,!0]}))}))}})),t.getExtraFilterDict=function(e){return{}})},t.setCache=function(e,t){localStorage.setItem(e,t)},t.getCache=function(e){localStorage.getItem(e)},t.getModelMetaParams=function(e){var n;return B()(n=[t.getBizType(),t.getMetaState(),t.force_refresh||e]).call(n,t.getModelMetaExtendParams())},t.getModelMetaExtendParams=function(){var e,n,i,o,a,l,r,c;return Object(N.h)([null!==(c=t.$dialog?null===(e=t.parmas)||void 0===e?void 0:e.meta_params:JSON.parse(angular.isObject(null!==(i=null===(n=t.getEnvironmentParams())||void 0===n?void 0:n.meta_params)&&void 0!==i?i:"{}")?P()(null!==(a=null===(o=t.getEnvironmentParams())||void 0===o?void 0:o.meta_params)&&void 0!==a?a:"{}"):null!==(r=null===(l=t.getEnvironmentParams())||void 0===l?void 0:l.meta_params)&&void 0!==r?r:"{}"))&&void 0!==c?c:{}])},t.getAppendConditions=function(){},t.changePageAfter=function(){},t.getAppendRelations=function(){},t.getRelations=function(){},t.getQuery=function(){},t.getLoadDataParams=function(){var e,n,i=1;return i=(null===(n=null===(e=null==t?void 0:t.model_meta)||void 0===e?void 0:e.list_config)||void 0===n?void 0:n.auto_featch_data)&&"mobile"===t.client?t.paging.current_page_scroll||1:t.paging.current_page,[t.getFilterStr(),angular.extend({},t.getTreeModeFilterDict(),t.getAllFilterDict()),i,t.paging.page_size,angular.extend(t.getExtraProperty(),{only_list:t.separate_list_count},t.alter_extra_property),t.getBizType()]},t.setScrollListener=function(){t.hide_search="pause",t.$watch((function(){var e;return(t.show_select_operates?$(".model-mobile-body .enter_select_status"):y()(e=$("div[name="+t.getIdentityName()+"]")).call(e,".model-mobile-body .operates")).last().outerHeight()}),(function(n,i){var o,a=y()(o=$("div[name="+t.getIdentityName()+"]")).call(o,".model-mobile-body >.content");(a=a.length?a:$(".model-mobile-body >.content")).css({"padding-top":n+"px"}),t.findTopFilters(t.model_meta.filters)&&!t.list_model.select_status&&t.calculateTopFilterPadding(n),e()}));var e=function(){var e;"edit_table"===(null===(e=t.list_model)||void 0===e?void 0:e.view)&&i((function(){var e,n,i,o=(t.show_select_operates?$(".model-mobile-body .enter_select_status"):$(".operates")).last().outerHeight(),a=y()(e=$("div[name="+t.getIdentityName()+"]")).call(e,".model-mobile-body >.content"),l=(null===(i=null===(n=t.list_btn_model)||void 0===n?void 0:n.common_used_actions)||void 0===i?void 0:i.length)?60:0,r=a.innerHeight()-o-l;t.list_model.$setMaxHeight(r)}),800)};t.$on("tip_collapse",e)},t.calculateTopFilterPadding=function(e){i((function(){var n,i,o=$(".top-filter"),a=$(".mobile-outside-mode-query"),l=y()(n=$("div[name="+t.getIdentityName()+"]")).call(n,".model-mobile-body >.content"),r=!0===(null===(i=t.model_meta.advance_query)||void 0===i?void 0:i.mobile_outside_query)?e+o.height()+a.height():e+o.height();l.css({"padding-top":r+"px"})}),300)},t.resizeStart=function(){t.header_element.removeClass("enable-transition"),t.resizer_element.removeClass("close"),t.resizer_element.addClass("moving")},t.resizeEnd=function(){t.header_element.addClass("enable-transition"),t.resizer_element.removeClass("moving"),t.header_expanded?(t.resizer_element.addClass("close"),t.expanded_element.slideUp(200),t.header_expanded=!t.header_expanded):(t.expanded_element.slideDown(200),t.header_expanded=!t.header_expanded)},t.tabsValueChange=function(e){var n;t.current_tab_index=o()(n=t.changePageList).call(n,(function(t){return t.id===e})),t.pageChangeFunc(null,t.changePageList[t.current_tab_index].id)},t.refreshNavAttach=function(){e.$broadcast("refresh_nav_attachment",{meta_state:t.meta_state})},t.refreshHeaderAttach=function(n){e.$broadcast("refresh_header_attachment",T()({},{meta_state:t.meta_state},n))},t.refreshWaterfallNav=function(){e.$broadcast("refresh_waterfall_nav")},t.afterRemove=function(){},t.afterEdit=function(){},t.$on("$destroy",(function(){var e;try{null===(e=t.afterDestory)||void 0===e||e.call(t)}catch(e){console.log(e)}}))}]);t.a="BaseCRUDController"},"+mD9":function(e,t){e.exports='<style>\n    .qq-map {\n        width: 100%;\n        height: 100%;\n    }\n\n    #map {\n        width: 100%;\n        height: 100%;\n    }\n\n    #map img{\n        background: transparent;\n    }\n\n    .message_map {\n        width: 100%;\n        height: 100%;\n        display: table;\n        background-color: #666;\n    }\n\n    .message_map > div {\n        display: table-cell;\n        text-align: center;\n        vertical-align: middle;\n    }\n\n    .retry-btn {\n        display: inline-block;\n        width: 90px;\n        height: 28px;\n        line-height: 28px;\n        background-color: #ff0000;\n        color: #fff;\n        border-radius: 3px;\n        font-size: 14px;\n        margin-top: 10px;\n    }\n</style>\n<div class="qq-map" data-ng-init="init()">\n    <div class="message_map" ng-hide="status.code==1">\n        <div>\n            <div>{{status.code==-1?\'地图初始化失败\':\'正在初始化地图...\'}}</div>\n            <div ng-if="status.code==-1">\n                <div ng-click="init()" class="retry-btn">重试</div>\n            </div>\n        </div>\n    </div>\n    <div id="map" ng-show=\'status.code==1\'>\n    </div>\n</div>\n'},"+rOd":function(e,t,n){e.exports='<style type="text/css">\n    .msg-bar-no-photo {\n        margin-bottom: 15px;\n        display: table;\n        width: 100%;\n        background: #03a9f4;\n        color: #ffffff;\n    }\n\n    .msg-bar-no-photo .msg-logo-box {\n        display: table-cell;\n        vertical-align: middle;\n    }\n\n    .msg-bar-no-photo .msg-content {\n        display: table-cell;\n        vertical-align: middle;\n        /* line-height: 60px; */\n        font-size: 14px;\n        padding-left: 15px;\n        line-height: 20px;\n        /* color: #666; */\n        padding-right: 10px;\n        padding-top: 10px;\n    }\n\n    .msg-bar-no-photo .msg-btn {\n        text-align: center;\n        font-size: 14px;\n        line-height: 28px;\n        border: 1px solid;\n        border-radius: 3px;\n        /* background: #03a9f4; */\n        width: 60px;\n        color: #ffffff;\n        /* padding-left: 10px; */\n        margin-left: 15px;\n        margin-top: 10px;\n        padding-left: 10px;\n        padding-right: 10px;\n        float: right;\n        margin-right: 15px;\n    }\n\n    .msg-bar-no-photo .msg-content-box {\n\n    }\n\n    .msg-bar-no-photo .msg-content-box span {\n        font-size: 18px;\n        /* font-style: italic; */\n        font-weight: bold;\n    }\n\n    .msg-bar-no-photo .msg-logo-box {\n        width: 120px;\n        height: 120px;\n    }\n\n    .msg-bar-no-photo .msg-logo {\n        width: 100px;\n        height: 100px;\n        text-align: center;\n        background: #fff;\n        border-radius: 50px;\n        margin: auto;\n    }\n\n    .msg-bar-no-photo .msg-logo img {\n        width: 60px;\n        margin-top: 20px;\n    }\n\n    .bottom {\n        position: fixed;\n        bottom: 0;\n        height: 40px;\n        background: #ffffff;\n        width: 100%;\n        line-height: 40px;\n        text-align: center;\n        display: table;\n    }\n\n    .upload-img {\n        background: #000000;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        z-index: 99;\n\n    }\n\n    .my-img {\n        width: 100%;\n        margin-top: 20%;\n    }\n\n    .upload-img-bottom {\n        position: fixed;\n        top: 0;\n        height: 60px;\n\n        width: 100%;\n        line-height: 60px;\n        text-align: center;\n        display: table;\n        background: rgb(20, 20, 20);\n        color: #fff\n    }\n\n    .upload-img-bottom > div {\n        display: table-cell;\n        width: 50%;\n    }\n\n    .uploading-box {\n        position: absolute;\n        top: 30%;\n        width: 100%;\n    }\n\n    .uploading-item {\n        height: 100px;\n        line-height: 100px;\n        width: 120px;\n        margin: auto;\n        background: rgba(20, 20, 20, 0.8);\n        border-radius: 10px;\n        color: #ffffff;\n        font-size: 14px;\n        text-align: center;\n\n    }\n\n</style>\n\n<div class="msg-bar-no-photo">\n    <div class="msg-logo-box">\n        <div class="msg-logo">\n            <img src="'+n("eYhR")+'">\n        </div>\n\n    </div>\n\n    <div class="msg-content-box">\n        <div class="msg-content">\n            <span class="f18">微笑！</span> <br> 添加您的照片，让您的同事可以识别您的身份。\n        </div>\n        <div class="msg-btn tg" img-resize-upload l-width="600" l-quality="1" ng-model="pic"\n             callback="selectImg">\n            添加照片\n        </div>\n    </div>\n\n</div>\n\n\n<div class="upload-img" ng-show="img_selected">\n    <img class="my-img" ng-src={{my_img}}>\n\n    <div class="upload-img-bottom">\n        <div ng-click="img_selected = false">取消</div>\n        <div ng-click="UploadImg()">确定</div>\n    </div>\n    <div class="uploading-box" ng-show="uploading">\n        <div class="uploading-item">图片上传中...</div>\n    </div>\n</div>\n\n'},"+tyM":function(e,t){e.exports='<div class="time-node-content">\n    <div class="left-content"\n         ng-click="model.options.multi ? model.$selectNodeMulti(item,$event) : model.$selectNode(item,$event)">\n        <div class="tree-check-box"\n             ng-if="model.options.selector_type.includes(item.org_type)||!model.options.selector_type"\n             ng-switch="model.options.multi\n                                    ?model.options.mode===\'self\'\n                                        ?model.selected_list.includes(item)\n                                        :item.selected_status\n                                    :model.selectedNode.id===item.id"\n             style="padding: 8px 0;">\n            <div class="tag-to-select icon-hcm-none-circle"\n                 ng-switch-default></div>\n            <div class="tag-selected icon-hcm-minus-circle-solid"\n                 ng-switch-when=0></div>\n            <div class="tag-selected icon-hcm-right-circle-solid"\n                 ng-switch-when=1></div>\n            <div class="tag-selected icon-hcm-right-circle-solid"\n                 ng-switch-when="true"></div>\n        </div>\n        <div class="node-info-box">\n            <div class="node-info">\n                <div class="base-info">\n                    <div class="base-info-content">\n                        <div class="node-icon {{model.getNodeIcon(item)}}"></div>\n                        <div class="node-name embed_text">{{item.name}}</div>\n                    </div>\n                    <div class="node-number embed_text">{{item.number}}</div>\n                </div>\n                <div class="attend-info">{{item._attachment.percent}}</div>\n            </div>\n            <div class="attend-count-info"\n                 style="width: 100%; padding-top: 8px">\n                <div class="group" style="width: 100%; display: flex; flex: 1 1 auto; text-align: center; justify-content: space-around;\n             height: 48px; ">\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.schedule || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">排班</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{(item._attachment.work_onjob || 0) + (item._attachment.overtime_work_onjob || 0)}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">出勤</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.work_absence || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">旷工</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.work_rest || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">休息</div>\n                    </div>\n                </div>\n                <div class="group" style="width: 100%; display: flex; flex: 1 1 auto; text-align: center; justify-content: space-between;\n             height: 48px; ">\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.work_early || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">早退</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.work_late || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">迟到</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.leave || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">休假</div>\n                    </div>\n                    <div class="count-info">\n                        <div class="count"\n                             style="font-family: \'D-DIN-Bold\'; font-size: 16px">{{item._attachment.trip || 0}}</div>\n                        <div class="label" style="font-size: 12px; color: #999;">出差</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="right-content">\n        <div ng-hide="item.is_leaf" class="icon-hcm-arrow-right arrow" ng-click="expandNode(item)"></div>\n    </div>\n</div>\n'},"+uNe":function(e,t){e.exports='<div class="hcm-nav full-height">\n    <div class="hcm-nav-fixed">\n        <hc-dataset model="dataset_model"></hc-dataset>\n    </div>\n    <hc-resizer></hc-resizer>\n</div>'},"/8mQ":function(e,t,n){"use strict";var i=n("a0dU"),o=n.n(i),a=(n("ls82"),n("SPx3")),l=n.n(a),r=(n("srGB"),n("NYRg"));window.app.service("CompanyMetaService",["BaseCRUDService","dataService","$hcDialog","$base64",function(e,t,n,i){var a=this;angular.extend(this,e.getBaseService("hcm.company.meta")),this.getMeta=function(e){return t.callHcmOpenApi("hcm.company.meta.load?category="+encodeURIComponent(e),{meta_key:e})},this.getMetaSign=function(e,n){return t.callHcmOpenApi("hcm.company.meta.load.sign?category="+encodeURIComponent(e),{meta_key:e,_type:n})},this.getChangeList=function(e,n,i,o,a){return t.callHcmOpenApi("hcm.company.meta.get.change.list?category="+encodeURIComponent(e),{meta_key:e,_model:n,_state:i,biz_type:o,_type:a})},this.setMeta=function(e,n,o){return t.callHcmOpenApi("hcm.company.meta.set?category="+encodeURIComponent(e),{meta_key:e,info_:i.encode(unescape(encodeURIComponent(n))),is_encode:!0,pre_version_md5:o})},this.setModifier=function(e){return t.callHcmOpenApi("hcm.company.meta.set.meta.modifier",{name:e})},this.getModifier=function(){return t.callHcmOpenApi("hcm.company.meta.get.meta.modifier",{})},this.setMetaWithModifier=function(){var e=l()(o.a.mark((function e(t,i,l){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getModifier();case 2:if(c=e.sent){e.next=7;break}return e.next=6,n.getDialog(r.a).params({btnType:"footerBtn"}).size("small").show();case 6:c=e.sent;case 7:if(!c){e.next=9;break}return e.abrupt("return",a.setMeta(t,i,l));case 9:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()}])},"/AtL":function(e,t){e.exports='<div class="hc-primary-photo" ng-init="init()"\n     ng-style="{\'height\':client===\'mobile\'?photo_size[1]: \'auto\', \'width\':client===\'mobile\'?\'100vw\': \'100%\'}">\n    <div class="primary-photo" ng-click="!options.readOnly"\n         ng-style="{\'width\':client===\'mobile\'?\'100%\': \'fit-content\'}">\n        <img class="primary-photo-img" ng-if="photo_size && client===\'mobile\'"\n             ng-click="headerShowMore()"\n             ng-right-click="handleImgRightClick($event)"\n             ng-class="{\'circle\':photo_size[0]===photo_size[1] && photo_type!==\'square\', {{photo_type}}}"\n             ng-src="{{(model||init_model)|commonImage:[options[\'image_config\'] || \'hcPhoto\',photo_size]}}" alt=""\n             ng-style="{width:photo_size[0],height:photo_size[1]||photo_size[0]}">\n        <img class="primary-photo-img" ng-if="photo_size && client===\'pc\'"\n             ng-right-click="handleImgRightClick($event)"\n             ng-class="{\'circle\':photo_size[0]===photo_size[1] && photo_type!==\'square\', {{photo_type}}}"\n             ng-src="{{(model||init_model)|commonImage:[options[\'image_config\'] || \'hcPhoto\',photo_size]}}" alt=""\n             ng-style="{width:photo_size[0],height:photo_size[1]||photo_size[0]}">\n\n        <div class="icon icon-hcm-more-point-x trans" ng-click="showMore($event)"\n             ng-if="btn_meta.length && btn_meta.length>2">\n        </div>\n\n        <div ng-show="false" class="hc-input-img-add" img-resize-upload use-camera="options.camera"\n             l-quality="1" ng-model="pic" callback="addImg" controller="img_upload_controller" use-we-chat>\n        </div>\n\n        <div class="mask" ng-if="btn_meta.length && btn_meta.length===1 && client===\'pc\'"\n             ng-click="headerShowMore()"\n             ng-class="{\'no-photo\':!model,\'circle\':photo_size[0]===photo_size[1] && photo_type!==\'square\', {{photo_type}}}"\n             ng-style="{\'width\':photo_size[0], \'height\':photo_size[1]}">\n            <div>\n                <div class="icon {{btn_meta[0].icon}}"></div>\n                <div class="tip">{{options.tip || btn_meta[0].placeholder}}</div>\n            </div>\n        </div>\n        <div class="icon-mask" ng-if="btn_meta.length && btn_meta.length===2 && client===\'pc\'"\n             ng-class="{\'no-photo\':!model,\'circle\':photo_size[0]===photo_size[1] && photo_type!==\'square\', {{photo_type}}}"\n             ng-style="{\'width\':photo_size[0], \'height\':photo_size[1]}">\n            <div ng-repeat="item_ in btn_meta">\n                <div class="icon {{item_.icon}}" ng-click="item_.func()"></div>\n            </div>\n        </div>\n    </div>\n    <div class="btn-list" ng-if="is_show_operate">\n        <div class="btn" ng-repeat="btn_ in btn_meta" ng-click="btn_.func()">{{btn_.label}}\n        </div>\n    </div>\n</div>\n'},"/EOG":function(e,t,n){"use strict";n("TeQF");var i=n("/FZm"),o=n.n(i),a=n("OBge"),l=n.n(a),r=n("mrSG"),c=n("XQQm"),s=n("GO4b"),d=function(e){function t(t,n,i,o,a,l,r){var c=e.call(this,t,n,i,o,a)||this;return c.scope=t,c.rootScope=n,c.hcDialog=i,c.hcForm=o,c.filter=a,c.dataService=l,c.$q=r,c}return Object(r.d)(t,e),t.prototype.$onInit=function(){return Object(r.c)(this,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=s,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(r.e)(this,(function(i){return e=angular.copy(this.setting_form_meta.fields),(this.scope.params.data.object||this.scope.params.data.refer)&&((t=o()(e).call(e,(function(e){return"sorts.fields"===e.key}))).options=Object(r.a)(Object(r.a)({},t.options),{hide:!1,individual_name:"name",selector:function(){return n.dataService.callHcmOpenApi("hcm.paas.object.field.list",{filter_dict:{model:[n.scope.params.data.object||n.scope.params.data.refer],has_name:!0,is_logic:!0,without_convert_id:!0},extra_property:{}})},selectorMapper:function(e,t){var i=n.$q.defer();return n.dataService.callHcmOpenApi("hcm.paas.object.field.list",{filter_dict:{model:[n.scope.params.data.object||n.scope.params.data.refer],keys:e,has_name:!0,is_logic:!0,without_convert_id:!0},extra_property:{}}).then((function(e){i.resolve(e)})),i.promise}})),[2,e]}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","$filter","dataService","$q"],t}(c.a),u=n("z/LF"),_=n.n(u);t.a={title:"维度设置",controller:d,template:_.a,size:"small",name:"dimInfoSetting"}},"/PXk":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("TeQF"),n("07d7"),n("5s+n"),n("p532");var i=n("eLKs"),o=n.n(i),a=n("5PDf"),l=n.n(a),r=n("OBge"),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("mrSG"),_=function(){function e(e,t,n,i,o){this.scope=e,this.rootScope=t,this.hcDialog=n,this.hcForm=i,this.filter=o,this.options={}}return e.prototype.$onInit=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){switch(e.label){case 0:return[4,this.initDialog()];case 1:return e.sent(),[4,this.initOptions()];case 2:return e.sent(),[4,this.initForm()];case 3:return e.sent(),[2]}}))}))},e.prototype.initOptions=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return this.options=this.scope.params.options||{},[2]}))}))},e.prototype.getData=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2,angular.copy(this.scope.params.data,{})]}))}))},e.prototype.getMeta=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2,this.scope.params.meta]}))}))},e.prototype.getGroupMeta=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2,this.scope.params.groups]}))}))},e.prototype.initForm=function(){var e;return Object(u.c)(this,void 0,void 0,(function(){var t,n,i,o,a,l;return Object(u.e)(this,(function(r){switch(r.label){case 0:return t=this,o=(i=this.hcForm.createForm()).$setMeta,[4,this.getMeta()];case 1:return a=[r.sent()],[4,this.getGroupMeta()];case 2:return l=(n=o.apply(i,d()(a).call(a,[r.sent()])).$setTip(this.options.tip)).$setData,[4,this.getData()];case 3:return t.form_model=l.apply(n,[r.sent()]).$setValidRule((null===(e=this.options)||void 0===e?void 0:e.validRule)||[]),this.scope.$apply(),[2]}}))}))},e.prototype.getAlterOperator=function(){return Object(u.c)(this,void 0,c.a,(function(){return Object(u.e)(this,(function(e){return[2,[]]}))}))},e.prototype.initDialog=function(){return Object(u.c)(this,void 0,void 0,(function(){var e;return Object(u.e)(this,(function(t){var n,i,a;switch(t.label){case 0:return[4,this.getAlterOperator()];case 1:return e=t.sent(),this.scope.$dialog.operates(d()(e).call(e,[{label:l()(n=this).call(n,"translate")("confirm"),func:o()(i=this.submit).call(i,this),default:!0},{label:l()(a=this).call(a,"translate")("cancel"),func:this.scope.$dialog.dialog_close,left:!0}])),[2]}}))}))},e.prototype.parseData=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2,this.form_model.data]}))}))},e.prototype.submit=function(){return Object(u.c)(this,void 0,void 0,(function(){var e,t=this;return Object(u.e)(this,(function(n){return!0!==(e=this.form_model.$validData())?(this.hcDialog.notify(e,"warning"),[2]):(this.parseData().then((function(e){t.options.submit?(t.rootScope.show_waiting(),t.options.submit(e).then((function(e){t.scope.$dialog.resolve_data(e),t.scope.$dialog.dialog_close()})).finally((function(){t.rootScope.hide_waiting()}))):(t.scope.$dialog.resolve_data(e),t.scope.$dialog.dialog_close())}),(function(e){t.rootScope.show_warning(e)})),[2])}))}))},e.$inject=["$scope","$rootScope","$hcDialog","$hcForm","$filter"],e}()},"/QJt":function(e,t){e.exports='<div class="hc-expandable-list">\n    <expandable-list meta="$ctrl.list_meta" data="$ctrl.model.data"></expandable-list>\n</div>\n'},"/WzU":function(e,t){e.exports='<style>\n    .form-button {\n        display: inline-block;\n    }\n\n    /*.form-button .form-button-style {*/\n        /*border-radius: 2px;*/\n        /*background-color: #03a9f4;*/\n        /*cursor: pointer;*/\n        /*font-size: 14px;*/\n        /*height: 30px;*/\n        /*line-height: 30px;*/\n        /*padding: 0 30px;*/\n        /*color: #fff;*/\n    /*}*/\n\n</style>\n<div class="form-button" ng-init="init()">\n    <div ng-class="{\'hcmui-button-default\':true,\'form-button-style-click\':is_clicked}" ng-click="button_click()">\n        {{button_text}}\n    </div>\n</div>'},"/aoR":function(e,t,n){"use strict";n.r(t),n("CoJ3").a.factory("hcImportCommonService",["dataService","$q","$hcDialog","hcUploadFile",function(e,t,i,o){var a={getCheckStatus:function(n){var i=t.defer();return e.callHcmOpenApi("imp.check.status?category="+n,{category:n},null,!0).then((function(e){i.resolve(e)})),i.promise},getCategoryList:function(){var n=t.defer();return e.callHcmOpenApi("imp.get.common.category",{},null,!0).then((function(e){n.resolve(e)})),n.promise},getImpInfo:function(t){return e.callHcmOpenWebSocket("imp.get.info",{category:t},t)},getShowTip:function(e,t){return i.getDialog({controller:"commonImportTipController",template:n("tmxC")}).params({title:e,category:t}).size("middle").show()},statusCheck:function(e){return"true"===e||!0===e},getTemplateStatus:function(n){var i=t.defer();return e.callHcmOpenApi("deploy.template.list.category",{categorys:n},null,!0).then((function(e){i.resolve(e)})),i.promise},show_import:function(e,t,n){var i=n+(a.statusCheck(e)?"校验":"导入");a.getShowTip(i,t).then((function(){}))},upload:function(e,t,n,l){var r={url:"/document/imp/common_upload?category="+t,params:{category:t,check:!!e,params:l},size:15,file_type:["zip","xlsx","xls"]};o.upload(r).then((function(){i.closeTarget("hcUploadFile"),a.show_import(e,t,n)}))},operation:function(e,t,n,i){a.getCheckStatus(t).then((function(o){o.running?a.show_import(e,t,n):a.upload(e,t,n,i)}))},download_report:function(e,t){a.getCheckStatus(e).then((function(n){n.running?t("数据生成中..."):n.download?window.open(window.hcm_wengen+"/document/imp/download?category="+e+window.hcm_env_post):t("请导入数据...")}))},download_template:function(e,t){a.getTemplateStatus([e]).then((function(t){t.success&&t.data[e]?window.open(window.hcm_wengen+"/document/loadsourcedocument/"+t.data[e]+window.hcm_env_pre):window.open(window.hcm_wengen+"/document/imp/download_template?category="+e+window.hcm_env_post)}))},download_multi_template:function(e,t){window.open(window.hcm_wengen+"/document/imp/batch_download_template_zip?category="+e+"&template="+t+window.hcm_env_post)}};return a}])},"/fjs":function(e,t){e.exports='<hc-simple-tree model="tree_model"></hc-simple-tree>\n'},"/nOd":function(e,t){e.exports='<div class="fieldwork-rec-interview-result" ng-init="init()">\n    <div class="interview-result-total" ng-if="filed_show">\n        <div class="total-item">\n            <div class="item-label">\n                {{total_obj[\'overall_score\'] ||"综合评分"}}\n            </div>\n            <div class="item-value">\n                {{fieldwork_item.star || fieldwork_item.overall_score}}\n            </div>\n        </div>\n        <div class="total-item">\n            <div class="item-label">\n                {{total_obj[\'conclusion\'] || "建议结论"}}\n            </div>\n            <div class="item-value">\n                {{fieldwork_item.conclude || fieldwork_item.conclusion}}\n            </div>\n        </div>\n    </div>\n    <div class="interview-result-txt" ng-if="filed_show && fieldwork_item.txt != \'\' && fieldwork_item.txt">\n        <div class="item-label">\n            {{total_obj[\'comments\'] || "面试意见"}}\n        </div>\n        <div class="item-value">\n            {{fieldwork_item.txt}}\n        </div>\n    </div>\n    <div class="interview-result-template"\n         ng-if="fieldwork_item!=\'\' && hasInterviewResultTemplate.length">\n        <div class="interview-result-template-content" ng-repeat="item in hasInterviewResultTemplate track by $index">\n            <div class="item-label">\n                {{item.label}}\n            </div>\n            <div class="item-value" ng-if="item.component != \'hc-star\'">\n                {{item.value}}\n            </div>\n            <div class="item-star" ng-if="item.component == \'hc-star\'">\n                <hc-star ng-model="item.value" options="{readOnly: true}"></hc-star>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},"/uXk":function(e,t,n){"use strict";var i=n("526F"),o=n.n(i),a=n("1hbj"),l=n("UTk3"),r=n.n(l),c=n("uPlf"),s=n.n(c),d=(n("srGB"),n("F1QS"),n("uuav"));window.app.controller("ReportListDialogCtrl",["$scope","$controller","$rootScope","$q","BaseCRUDService",function(e,t,n,i,l){var r=l.getModelService(e.$dialog.options.model_name);t(d.a,{$scope:e,CRUDService:r,InfoDialog:Object(a.a)(e.$dialog.options.model_name,e.$dialog.options.meta_state)}),e.meta_state=e.$dialog.options.meta_state,e.getQueryStr=function(){return e.params.query_str},e.initAfter=function(){e.list_model.seletor_type=0,e.list_model.$refreshData()},e.setFilterDict=function(){return e.params.filter_dict},e.getAllFilterDict=function(){var t,n;return o()({},e.params.filter_dict||{},(null===(t=e.list_filter_model)||void 0===t?void 0:t.$getFilters())||{},(null===(n=e.advance_query)||void 0===n?void 0:n.$getFilterDict())||{})}}]),t.a=function(e,t,n){return{controller:"ReportListDialogCtrl",model_name:e,meta_state:t,template:n?s.a:r.a}}},"/zKR":function(e,t,n){"use strict";n("CoJ3").a.factory("treeLoaderService",["$timeout","dataService",function(e,t){return{getSubOrg:function(e,n,i,o){return t.callHcmOpenApi("department.get.sub.org",{role:i||"cm-org-emp",filter_org_type:n||40,need_mapping:!1,dept_id:e,is_show_disable:o},null,!0)},getMyDepartmentByRole:function(e,n){return t.callHcmOpenApi("dept.my.list",{role:e,is_display_unit:n},"local,240",!0)},getMyOrgList:function(e){return t.callHcmOpenApi("root.org.list.get",e,"local,240",!0)},getMySubOrgList:function(e){return t.callHcmOpenApi("org.sub.get.by.date",e,"local,240",!0)},getMySubTopoList:function(e){return t.callHcmOpenApi("org.topo.get.sub",e,"local,240",!0)},getNumCount:function(e){return t.callHcmOpenApi("dept.emp.count.org.struct.get",e,"local,240",!0)}}}])},"06j9":function(e){e.exports=JSON.parse('[{"key":"drill","sequence":100,"label":"是否穿透","component":"hc-input-radio","options":{"singleLine":true,"width":"col-12","items_inline":true,"default":false,"change":"=function(_item,_model){if(_model && !SCOPE.form_model.data.drill_model && !SCOPE.form_model.data.drill_state){if(meta_info.type===\'meta\'){SCOPE.form_model.data.drill_model=meta_info.meta.model;SCOPE.form_model.data.drill_state=\'默认\'}else if(meta_info.type===\'model\'){SCOPE.form_model.data.drill_model=meta_info.model;SCOPE.form_model.data.drill_state=meta_info.state}}}","list":[{"name":"是","value":true},{"name":"否","value":false}]}},{"key":"drill_type","label":"自定义穿透方式","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","placeholder":"请输入统计字段","hide":"=function(){return !SCOPE.form_model?.data?.drill}","required":false,"default":"DEFAULT","change":"=function(_item,_model){let _drill_model=null;let _drill_state=null;if(SCOPE.form_model.data.drill){if(meta_info.type===\'meta\'){_drill_model=meta_info.meta.model;_drill_state=\'默认\'}else if(meta_info.type===\'model\'){_drill_model=meta_info.model;_drill_state=meta_info.state}if([\'DIALOG_LIST\',\'JUMP_LIST\'].indexOf(_model)>-1 && !SCOPE.form_model.data.drill_model && SCOPE.form_model.data.drill){SCOPE.form_model.data.drill_model=_drill_model;SCOPE.form_model.data.drill_state=_drill_state;}else if(_model===\'DEFAULT\'){SCOPE.form_model.data.drill_filter && delete SCOPE.form_model.data.drill_filter;if(SCOPE.form_model.data.drill_model!==_drill_model){SCOPE.form_model.data.drill_model=_drill_model;SCOPE.form_model.data.drill_state=_drill_state;}}}}","list":[{"id":"DEFAULT","name":"默认弹框"},{"id":"DIALOG_LIST","name":"自定义模型弹框"},{"id":"JUMP_LIST","name":"自定义跳转模型列表页"},{"id":"JUMP_STATE","name":"自定义页面跳转"}]}},{"key":"drill_model","label":"模型","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","placeholder":"请输入穿透模型","selectorObject":"hcm.db.object","hide":"=function(){return SCOPE.form_model?.data?.drill_type == \'JUMP_STATE\' || !SCOPE.form_model?.data?.drill}","readOnly":"=function(){return SCOPE.form_model?.data?.drill_type == \'DEFAULT\'}","required":"=function(){return (SCOPE.form_model?.data?.drill ? [\'DIALOG_LIST\', \'JUMP_LIST\', \'DEFAULT\'] : []).indexOf(SCOPE.form_model?.data?.drill_type) > -1}","returnFormat":"name"}},{"key":"drill_filter","label":"筛选条件","component":"hc-input-script","options":{"singleLine":true,"width":"col-12","mode":"json","placeholder":"请输入筛选条件","hide":"=function(){return SCOPE.form_model?.data?.drill_type == \'JUMP_STATE\' || !SCOPE.form_model?.data?.drill}","readOnly":"=function(){return SCOPE.form_model?.data?.drill_type == \'DEFAULT\'}","required":"=function(){return (SCOPE.form_model?.data?.drill ? [\'DIALOG_LIST\', \'JUMP_LIST\'] : []).indexOf(SCOPE.form_model?.data?.drill_type) > -1}"}},{"key":"drill_state","label":"场景","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","placeholder":"请输入场景","hide":"=function(){return SCOPE.form_model?.data?.drill_type == \'JUMP_STATE\' || !SCOPE.form_model?.data?.drill}","required":"=function(){return (SCOPE.form_model?.data?.drill ? [\'DIALOG_LIST\', \'JUMP_LIST\', \'DEFAULT\'] : []).indexOf(SCOPE.form_model?.data?.drill_type) > -1}","returnFormat":"name"}},{"key":"jump_state","label":"跳转场景","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入跳转场景","hide":"=function(){return SCOPE.form_model?.data?.drill_type != \'JUMP_STATE\' || !SCOPE.form_model?.data?.drill}","required":"=function(){return SCOPE.form_model?.data?.drill && SCOPE.form_model?.data?.drill_type == \'JUMP_STATE\'}"}},{"key":"jump_params","label":"跳转参数","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入跳转参数","hide":"=function(){return SCOPE.form_model?.data?.drill_type != \'JUMP_STATE\' || !SCOPE.form_model?.data?.drill}","required":false}},{"key":"open_new_page","label":"是否打开新页面","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","placeholder":"请输入跳转参数","hide":"=function(){return [\'JUMP_STATE\', \'JUMP_LIST\'].indexOf(SCOPE.form_model?.data?.drill_type) == -1 || !SCOPE.form_model?.data?.drill}","required":"=function(){return (SCOPE.form_model?.data?.drill ? [\'JUMP_STATE\', \'JUMP_LIST\'] : []).indexOf(SCOPE.form_model?.data?.drill_type) > -1}","default":false,"list":[{"name":"是","value":true},{"name":"否","value":false}]}}]')},"0F0B":function(e,t){e.exports='<span class="hc-input-search">\n    <input class="input_word component-input-inner" ng-class="{\'component-input\':client == \'mobile\'}" type="{{options.type}}" placeholder="{{placeholder}}" ng-model="model" ng-change="method.timeflash()"  ng-focus="method.searchData()" maxlength="{{options.maxlength}}"\n                    ng-disabled="options.readOnly" ng-keydown="method.keyDownEvent($event)"/>\n    <span class="search-list" ng-show="vm.dataList.length > 0 && isShow" >\n              <a  ng-repeat="data in vm.dataList | limitTo:10" ng-class="{\'selected\':aFocus == $index}" ng-mouseover="method.mouseOverEvent($index)" ng-click="method.enterKeyEvent(data,$event)">{{data.value}}</a>\n    </span>\n</span>\n'},"0F5k":function(e,t){function n(){return{createTable:function(e){return{name:e,html:"<table></table>",dirty_data:{},cell_click:null,$setHtml:function(e){return this.html=e,this.dirty_data={},this},$setCell:function(e,t,n){var i=e.getAttribute("coordinate"),o=e.getAttribute("row_idx")-1,a=e.getAttribute("col_idx")-1,l=e.getAttribute("key"),r=e.getAttribute("index");return this.dirty_data.hasOwnProperty(i)||(this.dirty_data[i]={cell:e,address_sheet:0,address_row:o,address_col:a,origin_value:e.innerText,key:l,index:r}),this.dirty_data[i].value=t,this.dirty_data[i].data=n,$(e).addClass("dirty"),e.innerText=t,this},$setCellClick:function(e){return this.cell_click=e,this},$resetCell:function(e){var t=e.getAttribute("coordinate");return this.dirty_data.hasOwnProperty(t)&&($(e).removeClass("dirty"),e.innerText=this.dirty_data[t].origin_value,delete this.dirty_data[t]),this},getCellDirtyData:function(e){var t=e.getAttribute("coordinate");return this.dirty_data[t]},getDirtyData:function(){var e=[];for(var t in this.dirty_data)if(this.dirty_data.hasOwnProperty(t)){var n=this.dirty_data[t];e.push({address_sheet:0,address_row:n.address_row,address_col:n.address_col,value:n.value,data:n.data,key:n.key,index:n.index})}return e},$reset:function(){for(var e in this.dirty_data)if(this.dirty_data.hasOwnProperty(e)){var t=this.dirty_data[e].cell;$(t).removeClass("dirty"),t.innerText=this.dirty_data[e].origin_value}return this.dirty_data={},this},$confirm:function(){for(var e in this.dirty_data)if(this.dirty_data.hasOwnProperty(e)){var t=this.dirty_data[e].cell;$(t).removeClass("dirty")}return this.dirty_data={},this}}}}}window.app.factory("$hcReportTable",n),n.$inject=[]},"0HFc":function(e,t){e.exports='<div class="home-widget">\n    <div class="home-widget-body">\n        <hc-count options="$ctrl.model.params"></count>\n    </div>\n</div>'},"0IgF":function(e,t){e.exports='\x3c!--公共组件hc-common-select的树结构--\x3e\n<div ng-sortable="sortable_config" ng-init="init()">\n    <div class="hc-tree-node" ng-repeat="_node in list track by $index">\n        <div ng-if="_node.children&&_node.children.length"\n             ng-class="_node.expanded?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"\n             class="hc-tree-node-more" ng-click="toggle_expand($event,_node)"></div>\n        <div ng-if="!options.multi"\n             ng-click="(!(_node.children&&_node.children.length)||_node[\'parent_select_enabled\'])?node_select($event,_node,list):toggle_expand($event,_node)">\n            <div class="hc-tree-node-template"\n                 ng-class="{\'selected\':(_node[options.key]==options.selected[options.key])}">\n                <span class="hc-tree-node-icon"\n                      ng-class="_node.expanded?\'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></span>\n                <span>{{_node[options.value]}}</span>\n            </div>\n        </div>\n        <div class="hc-tree-node-template" ng-if="options.multi" ng-class="{\'selected\': _node==options.search_parent}"\n             ng-click="(!(_node.children&&_node.children.length)||_node[\'parent_select_enabled\'])?node_select($event,_node,list):toggle_expand($event,_node)">\n            <span ng-if="(!(_node.children&&_node.children.length)||_node[\'parent_select_enabled\'])"\n                  class="hc-tree-node-multi {{multi_checked_css(_node,options)}}"\n                  ng-click="node_select($event,_node,list);">\n            </span>\n            <span ng-if="!template">\n                <span class="hc-tree-node-icon"\n                      ng-class="_node.expanded?\'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></span>\n                <span>{{_node.name}}</span>\n            </span>\n        </div>\n        <hc-tree-select ng-if="_node.children.length" ng-show="(_node.expanded)"\n                        data-options="options" data-list="_node.children"></hc-tree-select>\n    </div>\n</div>'},"0Teu":function(e,t){e.exports='<div class="hc-search-box" ng-if="model" ng-init="init()">\n    <div class="operate">\n        <div class="input-frame" ng-click="showTip($event,true)">\n            <div ng-class="{\'input-active\':inputActive}">\n                <input input-operate\n                       placeholder="{{model.placeholder||\'请输入信息进行检索...(例 姓名:李)\'}}"\n                       autocomplete="off"\n                       operate="$parent.inputOperate"\n                       ng-model="$parent.keywords"\n                       ng-keydown="operate($event,keywords)"\n                       ng-change="keywordsChange(keywords)"/>\n                <span class="icon icon-hcm-check" ng-click="operate($event,keywords)"></span>\n            </div>\n            <div class="auto-complete" ng-show="resultSearchTip.length>0">\n                <div class="tip-list">\n                    <div ng-click="selectTip(item)" ng-repeat="item in resultSearchTip track by $index"\n                         ng-class="{choose:tipIndex===$index}">{{item}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="filter">\n        <div ng-repeat="item in model.filters track by $index">\n            <span>{{item.content}}</span>\n            <span class="icon icon-hcm-delete" ng-click="deleteFilter($index)"></span>\n        </div>\n    </div>\n</div>'},"0Xdj":function(e,t,n){"use strict";var i=n("zl2E");window.app.controller("BaseComplexBaseCtrl",["$scope","dataService","contextService","$hcDialog","$hcForm","$filter","$rootScope","$controller","CRUDService","$state","InfoDialog",function(e,t,n,o,a,l,r,c,s,d,u){c(i.a,{$scope:e,CRUDService:s,InfoDialog:u}),e.getInfoAlterParam=function(){return{model:d.params.model}},e.$watch("view_model.data",(function(t){t&&e.setItemInfo&&e.setItemInfo(t)}),!0),e.setState=function(){}}]),t.a="BaseComplexBaseCtrl"},"0YYn":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i,o=n("+oHS"),a=n.n(o),l=n("mnMc"),r=n.n(l),c=n("i5y0"),s=n.n(c),d=n("mrSG");!function(e){e.asc="asc",e.desc="desc"}(i||(i={}));var u=function(){function e(e){this.key="",this.type=i.asc,this.prune(e)}return e.prototype.prune=function(e){var t,n;try{for(var i=Object(d.i)(s()(e)),o=i.next();!o.done;o=i.next()){var l,c=Object(d.f)(o.value,2),u=c[0],_=c[1];r()(l=a()(this)).call(l,u)&&(this[u]=_)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}()},"0gKY":function(e,t){e.exports='<div class="component-container" \n    ng-init="init();hover=false" \n    ng-click="onClick($event)"\n    ng-mouseover="hover=true"\n     ng-mouseleave="hover=false">\n    <div class=\'component-input-inner\'ng-class=\'{placeholder:!model}\' ng-disabled=\'(options.readOnly|valueToFunc)()\'>{{model||options.placeholder}}</div>\n\n    <div ng-show="!(options.readOnly|valueToFunc)() && options.custom_click"\n         ng-click="([null,undefined].includes(model)||options.no_delete)\n             ? onClick($event)\n             : del($event)"\n         class="input-icon"\n         ng-class="(![null,undefined].includes(model) && (client===\'mobile\'||hover))\n             ?\'icon-hcm-delete\'\n             : options.icon\n                ?options.icon\n                :\'icon-hcm-arrow-right\'"></div>\n</div>'},"0iTM":function(e,t){e.exports='<div class="process-tips-style" ng-init="init()">\n    <div class="process-nav">\n        <div class="process-nav-item" ng-class="process_status===\'notify\' ? \'selected\':\'\'"\n             ng-click="selectNav(\'notify\')" ng-show="process_tips[\'notify\'].length">提示信息\n        </div>\n        <div class="process-nav-item" ng-class="process_status===\'error\' ? \'selected\':\'\'"\n             ng-click="selectNav(\'error\')" ng-show="process_tips[\'error\'].length">错误信息\n        </div>\n        <div class="process-nav-item" ng-class="process_status===\'success\' ? \'selected\':\'\'"\n             ng-click="selectNav(\'success\')" ng-show="process_tips[\'success\'].length">成功信息\n        </div>\n    </div>\n    <div class="process-imp-content">\n        <div ng-repeat="item in process_tips[process_status] track by $index" class="process-tip">\n            <div class="item-name">{{item[\'info\']}}</div>\n            <div class="item-status">\n                <span class="icon-hcm-info-normal item-notify" ng-show="item.status===\'notify\'"></span>\n                <span class="icon-hcm-info-succeed item-success" ng-show="item.status===\'success\'"></span>\n                <span class="icon-hcm-info-error item-error" ng-show="item.status===\'error\'"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'},"0j7C":function(e){e.exports=JSON.parse('{"tip":"维护过滤显示属性","fields":[{"key":"label","label":"显示名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"key","label":"过滤字段","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入字段","required":true}}]}')},"0wIu":function(e,t){e.exports="<div class=\"component-container\" ng-class=\"{'with-unit': options.unit}\">\n    <input \n           class='component-input-inner'\n           name='{{options.name}}'\n           placeholder='{{(options.readOnly|valueToFunc)()?\"\":(options.placeholder || placeholder)}}'\n           type='{{options.type}}'\n           step='{{options.step}}'\n           accept='{{options.accept}}'\n           alt='{{options.alt}}'\n           autocomplete='{{options.autocomplete}}'\n           capture='{{options.capture}}'\n           checked='{{options.checked}}'\n           dirname='{{options.dirname}}'\n           formnovalidate='{{options.formnovalidate}}'\n           formtarget='{{options.formtarget}}'\n           height='{{options.height}}'\n           list='{{options.list}}'\n           pattern='{{options.pattern || \".*\"}}'\n           size='{{options.size}}'\n           src='{{options.src}}'\n           value='{{options.value}}'\n           width='{{options.width}}'\n           ng-model='$ctrl.displayValue'\n           hc-title=\"{{$ctrl.displayValue}}\"\n           options=\"{mode: 'tip', showOnOverflow: true}\"\n           ng-trim='{{options.trim==undefined?true:options.trim}}'\n           ng-click='options.customClick()'\n           ng-class=\"{'readonly': (options.readOnly|valueToFunc)(),\n               'bordered': $ctrl.client==='mobile'&&options.bordered,\n               'with-unit': options.unit\n               }\"\n           ng-style=\"(options.styles|valueToFunc)()\"\n           ng-blur='$ctrl.customBlur()'\n           ng-Keypress='$ctrl.keyPressCheck($event)'\n           ng-readonly='options.unedit || (options.readOnly|valueToFunc)()'\n           ng-focus='$ctrl.focusForKeyboard()'\n           maxlength='{{options.maxlength}}'\n           ng-model-options='{debounce:options.change?(options.debounce||300):(options.debounce||0)}'\n    >\n    <div class=\"input-unit\" ng-if=\"options.unit\">{{options.unit}}</div>\n    <div ng-show=\"false\"\n         class=\"component-input-inner\">\n        {{model}}\n    </div>\n    <div class=\"text-length\" ng-if=\"options.showRate\" ng-show=\"!(options.readOnly|valueToFunc)()\">\n        {{(model.length || 0 )+ '/' + options.maxlength}}</div>\n</div>\n"},"1GJp":function(e,t,n){"use strict";n("07d7"),n("5s+n"),n("p532");var i=n("5PDf"),o=n.n(i),a=n("WxoT"),l=n.n(a),r=n("nhkr"),c=n.n(r),s=n("a0dU"),d=n.n(s),u=n("o+MX"),_=n.n(u),p=(n("ls82"),n("SPx3")),m=n.n(p),f=n("eLKs"),h=n.n(f),g=n("M5Mt"),v=n.n(g),b=n("RXMP"),y=n.n(b),w=n("CoJ3"),x=(n("D9XP"),n("WT49")),k=n.n(x),O=n("sYAY"),D=n("NYRg"),C=(n("/8mQ"),n("r2xJ")),M=n("TYOo");w.a.controller("HCMCodeEditorCtrl",["$scope","$rootScope","$hcDialog","$timeout","$filter","CompanyMetaService","dataService","contextService",function(e,t,i,a,r,s,u,p){var f={json:"ace/mode/json",js:"ace/mode/javascript",html:"ace/mode/html",css:"ace/mode/css",python:"ace/mode/python",yaml:"ace/mode/yaml"},g={};e.init=function(){var t;e.context=p.getContext("auth"),console.log(e.context);var n=e.getDefaultOperates();y()(t=e.getAlterOperator()).call(t,(function(e){v()(n).call(n,1,0,e)})),e.$dialog.operates(n),a(e.loaded)},e.ai_check=function(){i.getDialog(M.default).show({tip:"你好啊，您的云函数代码优化建议如下",agent_name:"代码优化",params:{code:e.editor.getValue()}})},e.getDefaultOperates=function(){var t,n,i,o;return[{label:"返回",key:"back",func:e.close,default:!1,left:!0,hide:e.isReadOnly},{label:"语法检查",func:h()(t=this.check).call(t,this),left:!0,hide:"python"!==e.params.mode},{label:"智能优化",func:h()(n=this.ai_check).call(n,this),left:!0,hide:!(null===(i=e.context)||void 0===i||null===(o=i.company_setting)||void 0===o?void 0:o.LLM_PERCEPTION)},{label:r("translate")("codeViewerFormat")||"格式化",key:"format",func:e.format,default:!1,left:!0,hide:e.isReadOnly},{label:"确定",key:"submit",func:e.submit,default:!0,hide:e.isReadOnly}]},e.isReadOnly=function(){var t;return null==e||null===(t=e.params)||void 0===t?void 0:t.readOnly},e.getAlterOperator=function(){return[]},e.getMode=function(){return e.params.mode||"json"},e.getReadOnly=function(){return e.params.readOnly||!1},e.loaded=m()(d.a.mark((function t(){var i,o,a,l,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(80).then(n.t.bind(null,"5VLF",7));case 2:return o=t.sent,a=o.default,g={json:a.js,js:a.js},l=document.createElement("div"),$(".hcm-code-editor").last().append(l),t.next=9,Object(O.a)();case 9:r=t.sent,c=_()(i="".concat(window.cdn_domain)).call(i,window.hcm_wengen?window.hcm_wengen:"","/static/resources/lib/ace"),r.config.set("basePath",c),r.config.set("modePath",c),r.config.set("themePath",c),r.config.set("workerPath",c),e.editor=r.edit(l),e.getMode()in f&&e.editor.session.setMode(f[e.getMode()]),e.editor.setHighlightActiveLine(!1),e.editor.setHighlightGutterLine(!1),e.editor.setOption("showPrintMargin",!1),e.editor.setReadOnly(e.getReadOnly()),e.loadData();case 22:case"end":return t.stop()}}),t)}))),e.format=function(){e.getMode()in g&&e.editor.setValue(g[e.getMode()](e.editor.getValue()),-1)},e.check=m()(d.a.mark((function t(){var n,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=function(){var e=m()(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.callHcmOpenApi("hcm.formula.check",{formula_str:t,domain:"common"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"python"!==e.getMode()){t.next=6;break}return t.next=4,n(e.editor.getValue());case 4:(o=t.sent).success?e.show_warning("语法检查通过"):i.getDialog(C.a).show({validate:o,fixedCode:e.editor.getValue(),checkValidCallback:n}).then((function(t){e.editor.setValue(t,-1)}));case 6:case"end":return t.stop()}}),t)}))),e.loadData=function(){e.params.data&&("object"==c()(e.params.data)&&(e.params.data=l()(e.params.data)),e.editor.setValue(e.params.data,-1)),e.params.load&&e.params.load().then((function(t){e.editor.setValue(t,-1)})),e.format()},e.close=function(){e.$dialog.dialog_close()},e.submitExec=function(){var n=e.editor.getValue();e.params.submit?(t.show_waiting(),e.params.submit(n).then((function(t){e.$dialog.resolve_data(t),e.$dialog.dialog_close()})).finally((function(){t.hide_waiting()}))):(e.$dialog.resolve_data(n),e.$dialog.dialog_close())},e.extendValidFunc={};var b=function(n){var i=angular.extend({json:function(){var n=e.editor.getValue();try{JSON.parse(n)}catch(e){return t.show_warning("配置存在问题，错误信息： "+e.message,"error",5e3),!1}return!0}},e.extendValidFunc);try{var o;return(null!==(o=i[n])&&void 0!==o?o:function(){return!0})()}catch(e){return console.error(e),!1}};e.submit=m()(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(n=e.params)||void 0===n?void 0:n.modifier)){t.next=3;break}return t.next=3,s.getModifier().then((function(e){if(!e)return i.getDialog(D.a).params({btnType:"footerBtn"}).size("small").show()}));case 3:o()(a=e.editor.getSession().getAnnotations()).call(a,(function(e){return"error"===e.type})).length>0?i.confirm("脚本存在语法错误，继续保存将导致系统不可预知的错误，继续吗？").then((function(){e.submitExec()})):e.editor.getValue()&&!b(e.getMode())||e.submitExec();case 5:case"end":return t.stop()}}),t)}))),t.$on("dialog-size-change",(function(){var t;null===(t=e.editor)||void 0===t||t.resize()}))}]),t.a={controller:"HCMCodeEditorCtrl",title:"脚本编辑",template:k.a}},"1KcY":function(e,t){e.exports='<div class="home-widget" ng-init="init()">\n    <div class="home-widget-header">\n        <div class=\'icon icon-news\'></div>\n        <div class="header-label">{{model.params.label}}</div>\n    </div>\n    <div class="home-widget-body">\n        <hc-list-new model="list_model"></hc-list-new>\n        <hc-list-no-data model="list_model" caption="{{no_content_caption||\'没有找到相应的业务数据方案\'}}"></hc-list-no-data>\n        <hc-paging paging="paging" ng-if="paging.page_count>0"></hc-paging>\n    </div>\n</div>\n'},"1LhX":function(e,t,n){"use strict";n("rB9j"),n("UxlC"),n("EnZy");var i=n("TEMH"),o=n.n(i),a=n("M5Mt"),l=n.n(a),r=n("ZbhI"),c=n.n(r),s=n("/FZm"),d=n.n(s),u=n("guyh"),_=n.n(u),p=n("o+MX"),m=n.n(p),f=n("nhkr"),h=n.n(f),g=n("6UaR"),v=n.n(g),b=n("pPxq"),y=n.n(b),w=n("UtpJ"),x=n.n(w),k=n("5PDf"),$=n.n(k),O=n("lHQ6"),D=n.n(O),C=n("04Ix"),M=n.n(C),S=n("zLi2"),E=n.n(S),P=n("STz3"),j=n.n(P),T=n("FLGM"),A=n.n(T),I=n("WxoT"),L=n.n(I),F=n("mnMc"),R=n.n(F),B=n("+oHS"),U=n.n(B),q=n("RXMP"),W=n.n(q),z=n("CoJ3"),N=n("wd/R"),K=n.n(N),H=n("TFHr");n("McUH");z.a.service("queryService",["$state","$filter","dataService","$q","contextService","$hcDialog","advanceService","componentDefaultService",function(e,t,n,i,a,r,s,u){return{transFilterDict:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,o=t("toObj")(n);return W()(e=U()(i||{})).call(e,(function(e){var n,a,l,r,c,s=(null===(n=o[e])||void 0===n?void 0:n.options)||{};if(R()(a=["",void 0,null]).call(a,i[e])||"{}"===L()(i[e]))delete i[e];else switch((o[e]||{}).component){case"hc-super-selector":var d,u,_,p;if(i[e]&&(-1===i[e]||(null===(l=R()(r=i[e]))||void 0===l?void 0:l.call(r,-1))))if(!(null===(d=(o[e]||{}).options)||void 0===d?void 0:d.hasNull))return;if(angular.isArray(i[e]))if(1===i[e].length)i[e]=R()(u=[-1,"空"]).call(u,i[e][0])?[null]:i[e];else i[e]=A()(_=i[e]).call(_,(function(e){var t;return R()(t=[-1,"空"]).call(t,e)&&(e=null),e}));else R()(p=[-1,"空"]).call(p,i[e])&&(i[e]=null);break;case"hc-select":break;case"hc-selector-depart":t("isJSON")(i[e])||(i[e]={child_include:i[e],ignore_root_filter:s.ignore_root_filter});break;case"hc-standard-tree-selector":-1===i[e]?i[e]={}:i[e]=s.child_include?{child_include:i[e],ignore_root_filter:s.ignore_root_filter}:i[e];break;case"hc-tree-selector":case"hc-tree-list-selector":i[e]=s.child_include?{child_include:i[e],ignore_root_filter:s.ignore_root_filter}:i[e];break;case"hc-query-panel":case"hc-selector":var m,f;if(s.range_format&&"hc-input-datetime"===s.component)if("timestamp"===s.range_format){var h=i[e];1===U()(h).length?i[e][U()(h)[0]]=K()(j()(h)[0]).valueOf():2===U()(i[e]).length&&(m=K()(h.gte).valueOf(),f=K()(h.lte).valueOf(),i[e]={gte:m,lte:f})}else{var g,v=t("timeFormat")(s.range_format);switch(v){case"YYYY-MM-DD":g="month";break;case"YYYY-MM-DD HH:mm:ss":g="day"}var b=i[e];if("month"===g&&"YYYY-MM"!==t("timeFormat")(s.format)||"day"===g&&"YYYY-MM-DD"!==t("timeFormat")(s.format))return;1===U()(b).length?"eq"===U()(b)[0]?(m=K()(b.eq).format(v),f=K()(b.eq).endOf(g).format(v),i[e]={gte:m,lte:f}):i[e][U()(b)[0]]=K()(j()(b)[0]).format(v):2===U()(i[e]).length&&(m=K()(b.gte).format(v),f=K()(b.lte).endOf(g).format(v),i[e]={gte:m,lte:f})}break;case"hc-input-datetime":if(s.range_key){var y,w,x,k,$,O,C,S;if("function"==typeof s.range_format){var P=s.range_format(i[e]),T=E()(P,2);w=T[0],x=T[1]}else{var I,F={"YYYY-H":"month","YYYY-MM":"month","YYYY-MM-DD":"day","YYYY-MM-DD HH:mm:ss":"second"}[t("timeFormat")(s.format)]||"month";if(R()(I=["YYYY-H","YYYY-Q"]).call(I,t("timeFormat")(s.format))){var B,q=t("parseFormat")(i[e],s.format),W=t("timeFormat")(s.range_format)||"YYYY-MM-DD";w=K()(q).format(W),x=R()(B=i[e]).call(B,"Q")?K()(q).endOf("quarter").format(W):K()(q).add(5,"month").endOf("month").format(W)}else switch(t("timeFormat")(s.range_format)||"YYYY-MM-DD"){case"YYYY-MM":w=K()(i[e]).format("YYYY-MM"),x=K()(i[e]).endOf(F).format("YYYY-MM");break;case"YYYY-MM-DD":w=K()(i[e]).format("YYYY-MM-DD"),x=K()(i[e]).endOf(F).format("YYYY-MM-DD");break;case"YYYY-MM-DD HH:mm:ss":w=K()(i[e]).format("YYYY-MM-DD HH:mm:ss"),x=K()(i[e]).endOf(F).format("YYYY-MM-DD HH:mm:ss");break;default:w=K()(i[e]).format("YYYY-MM-DD HH:mm:ss"),x=K()(i[e]).endOf(F).format("YYYY-MM-DD HH:mm:ss")}}if(1===s.range_key.length)i[s.range_key[0]]=(S={},M()(S,null!==(k=null===($=s.range_operator)||void 0===$?void 0:$[0])&&void 0!==k?k:"gte",w),M()(S,null!==(O=null===(C=s.range_operator)||void 0===C?void 0:C[1])&&void 0!==O?O:"lte",x),S);else if(2===s.range_key.length){var z,N,H,V;i[s.range_key[0]]=M()({},null!==(z=null===(N=s.range_operator)||void 0===N?void 0:N[0])&&void 0!==z?z:"gte",w),i[s.range_key[1]]=M()({},null!==(H=null===(V=s.range_operator)||void 0===V?void 0:V[1])&&void 0!==H?H:"lte",x)}R()(y=s.range_key).call(y,e)||delete i[e]}break;case"hc-datetime-range":i[e]={gte:i[e].start,lte:i[e].end};break;case"hc-datetime-picker-range":if(/Q+/.test(s.format)&&i[e][0]&&i[e][1]){var Y=i[e][0].replace("Q","").split("-"),G=i[e][1].replace("Q","").split("-"),J={month:"YYYY-MM",day:"YYYY-MM-DD",hour:"YYYY-MM-DD HH",minute:"YYYY-MM-DD HH:mm",second:"YYYY-MM-DD HH:mm:ss"}[s.trans_quarter_unit||"second"];i[e][0]=K()(Y[0]).quarter(Y[1]).format(J),i[e][1]=K()(G[0]).quarter(D()(G[1])+1).subtract(1,s.trans_quarter_unit||"second").format(J)}var X,Q,Z;if(s.range_format&&i[e][0]&&i[e][1])R()(Z=["timestamp"]).call(Z,s.range_format)?(X=K()(i[e][0]).valueOf(),Q=K()(i[e][1]).valueOf()):(X=K()(i[e][0]).format(t("timeFormat")(s.range_format)),Q=K()(i[e][1]).endOf({"YYYY-H":"month","YYYY-MM":"month","YYYY-MM-DD":"day","YYYY-MM-DD HH:mm:ss":"second"}[t("timeFormat")(s.format)]||"month").format(t("timeFormat")(s.range_format)));else X=i[e][0],Q=i[e][1];if(s.range_key&&i[e][0]&&i[e][1]){var ee,te,ne,ie,oe,ae;if(1===s.range_key.length)i[s.range_key[0]]=(ae={},M()(ae,null!==(te=null===(ne=s.range_operator)||void 0===ne?void 0:ne[0])&&void 0!==te?te:"gte",X),M()(ae,null!==(ie=null===(oe=s.range_operator)||void 0===oe?void 0:oe[1])&&void 0!==ie?ie:"lte",Q),ae);else if(2===s.range_key.length){var le,re,ce,se;i[s.range_key[0]]=M()({},null!==(le=null===(re=s.range_operator)||void 0===re?void 0:re[0])&&void 0!==le?le:"gte",X),i[s.range_key[1]]=M()({},null!==(ce=null===(se=s.range_operator)||void 0===se?void 0:se[1])&&void 0!==ce?ce:"lte",Q)}R()(ee=s.range_key).call(ee,e)||delete i[e]}else i[e]={gte:X,lte:Q}}if(s.filter_mode&&!R()(c=["child_include","self"]).call(c,s.filter_mode)){var de={};de["fm:".concat(s.filter_mode.key)]=i[e],i[e]=de}})),i},getInfoEnableComponent:function(){return["hc-super-selector","hc-input-datetime","hc-select","hc-input","hc-input-radio","hc-input-number","hc-input-label-multi","hc-text-area","hc-selector-depart","hc-tree-list-selector","hc-tree-selector","hc-category-list-selector","hc-standard-tree-selector"]},getFilterEnableComponent:function(){return["hc-super-selector","hc-input-datetime","hc-select","hc-input","hc-input-radio","hc-input-number","hc-input-label-multi","hc-text-area","hc-selector-depart","hc-tree-list-selector","hc-tree-selector","hc-category-list-selector","hc-selector","hc-compose-selector","hc-standard-tree-selector"]},setQueryDefault:function(e){var t,n,i=e.data||{},o=this;return A()(t=$()(n=e.fields).call(n,(function(e){return!(e.options||{}).hide}))).call(t,(function(e){if(!angular.isDefined(i[e.key])){var t,n,a=e.options;if("hc-input-datetime"===a.component)if(a.range_default){var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return x()(e).call(e,0,t.length)};"month"===a.range_default?i[e.key]={gte:l(K()().subtract(1,"months").format("yyyy-MM-dd".toUpperCase())+" 00:00:00",a.format),lte:l(K()().format("yyyy-MM-dd".toUpperCase())+" 23:59:59",a.format)}:"next_month"===a.range_default&&(i[e.key]={gte:l(K()().format("yyyy-MM-dd".toUpperCase())+" 00:00:00",a.format),lte:l(K()().subtract(-1,"months").format("yyyy-MM-dd".toUpperCase())+" 23:59:59",a.format)})}else!0===a.default?i[e.key]={eq:K()().format(a.format.toUpperCase())}:R()(t=[void 0,null]).call(t,a.range_type)?R()(n=[void 0,null]).call(n,a.range_step)||(i[e.key]=o.setDynamicTime(a)):i[e.key]=o.setRangeTime(a)}})),i},setRangeTime:function(e){var n=t("timeFormat")(e.format),i=u.setComponentDefault(void 0,"hc-input-datetime",angular.extend({defualt:!0},e)),o=e.range_unit||"months",a=e.range_step;if(a)if(y()(a).call(a,"+")){var l=x()(a).call(a,1);i=K()(i).subtract(-l,o).format(n)}else if(y()(a).call(a,"-")){var r=x()(a).call(a,1);i=K()(i).subtract(r,o).format(n)}var c={};switch(e.range_type){case"eq":c={eq:i};break;case"gt":c={gt:i};break;case"gte":c={gte:i};break;case"lt":c={lt:i};break;case"lte":c={lte:i};break;case"neq":c={neq:i};break;case"range":if(i=e.default?K()(e.default).format(n):K()().format(n),y()(a).call(a,"+")){var s=x()(a).call(a,1);c={gte:K()(i).format(n),lte:K()(i).subtract(-s,o).format(n)}}else if(y()(a).call(a,"-")){var d=x()(a).call(a,1);c={gte:K()(i).subtract(d,o).format(n),lte:K()(i).format(n)}}else"0"===a&&(c={gte:K()(i).month(K()().month()).startOf(o).format(n),lte:K()(i).month(K()().month()).endOf(o).format(n)})}return c},setDynamicTime:function(e){var n,i=e.range_unit||"months",o=t("timeFormat")(e.format),a=e.range_step;if(y()(a).call(a,"+")){var l=x()(a).call(a,1);n={gte:K()().startOf("day").format(o),lte:K()().subtract(-l,i).endOf("day").format(o)}}else if(y()(a).call(a,"-")){var r=x()(a).call(a,1);n={gte:K()().subtract(r,i).startOf("day").format(o),lte:K()().endOf("day").format(o)}}else"0"===a&&(n={gte:K()().month(K()().month()).startOf(i).format(o),lte:K()().month(K()().month()).endOf(i).format(o)});return n},getAdvanceFilter:function(e,t,o,a){var l=this,r=i.defer(),c=n.callHcmOpenApi("hcm.model.meta",{biz_type:a||"list",model:e,state:t}),s=n.callHcmOpenApi("hcm.model.query.fields",{biz_type:a||"list",model:e,state:t});return i.all([c,s]).then((function(e){var t=l.transCompleteFields(e[1],e[0].filters)[1];r.resolve(l.transFilterDict(t,o))})),r.promise},getInChargeOrg:function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manager",l=arguments.length>2?arguments[2]:void 0,r=i.defer();return(e=(null===(t=e)||void 0===t?void 0:t.child_include)?e.child_include:e)&&(!l||v()(e)||!R()(l).call(l,e)&&"object"!==h()(e))?n.callHcmOpenApi("org.department.get.in.charge.org",{dept_id:e,role:o}).then((function(t){if(v()(t)&&t.length)r.resolve(t);else if(!v()(t)&&t)r.resolve(t);else{var n,i=a.getContext("auth").roles[o];(i||[]).length>0&&(n=i[0].id),r.resolve(v()(e)?[n]:n)}})):r.resolve(e),r.promise},transCompleteFields:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this,o=[],a=[],r=[],s=t("toObj")(n),u=A()(e).call(e,(function(e){var t;"common_used"!==e.key&&(o=m()(o).call(o,angular.copy(e.list_fields)),a=m()(a).call(a,_()(t=e.info_fields).call(t,(function(e,t){return(e.sequence||9999)-(t.sequence||9999)}))));return e})),p=A()(a).call(a,(function(e){return e.key})),f=function(e){var t,i,o,u=n[e];if((null===(t=s[u.key])||void 0===t?void 0:t.component)&&!(null===(i=s[u.key])||void 0===i||null===(o=i.options)||void 0===o?void 0:o.disabled)){var _;u.category_name=null===(_=d()(a).call(a,(function(e){return e.key===u.key})))||void 0===_?void 0:_.category_name,r.push(u);var m=c()(p).call(p,u.key);~m&&(l()(a).call(a,m,1),l()(p).call(p,m,1))}},h=0;h<n.length;h++)f(h);return a=m()(r).call(r,a),W()(angular).call(angular,i.all_list_meta,(function(e){return e.sortable=angular.isArray(e.field)&&(1===e.field.length||e.sort_key)})),[u,o,a]},designMeta:function(e){return r.getDialog(H.a).show(e)},setDefaultPlan:function(t){var n,i,o,a,l,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(t.state_params=t.state_params||{},t.state_params.advance_plan_id)?t.current_plan=null===(o=$()(r).call(r,(function(e){return e.id===t.state_params.advance_plan_id})))||void 0===o?void 0:o[0]:t.current_plan=(null===(a=$()(r).call(r,(function(e){return!0===e.default&&"private"===e.is_shared})))||void 0===a?void 0:a[0])||(null===(l=$()(r).call(r,(function(e){return!0===e.default&&"shared"===e.is_shared})))||void 0===l?void 0:l[0]);t.current_plan||(t.current_plan={}),e.params.custom_params&&JSON.parse(e.params.custom_params).planId&&W()(r).call(r,(function(n){n.id==JSON.parse(e.params.custom_params).planId&&(t.current_plan=n)}));var c=t.current_plan.config||{};return c.isExpansion=null===(n=t.auth)||void 0===n||null===(i=n.company_setting)||void 0===i?void 0:i.plan_filter_form_expansion,c},dealUrlParams:function(e,n){var i={};if(!e.selector_flag){var a,l,r,c=JSON.parse(e.state_params.advance_filter_dict||null),d=e.getFilterStr?e.getFilterStr():e.state_params.filter_str,u=e.getQueryStr?e.getQueryStr():e.state_params.query_str;u&&!s.validQueryStrFields(u,e.trans_complete_fields)&&(u=void 0);var _,p=JSON.parse(e.state_params.show_fields_key||null)||[];if(t("isJSON")(c)&&n.filter_dict)W()(_=U()(c)).call(_,(function(e){var t;R()(p).call(p,e)||p.push(e),(R()(t=["",void 0,null]).call(t,c[e])||"{}"===L()(c[e]))&&delete c[e]}));var m,f={},h=!1;if(n.filter_dict){for(var g in c)if(L()(c[g])!==L()((n.filter_dict||{})[g])){h=!0;break}}else h=!0;if(R()(a=["{}","null"]).call(a,L()(c))||!h||e.selector_flag||(f.filter_dict=c,f.show_fields_key=p,n.display_setting&&(f.display_setting=n.display_setting),n.dynamic_filter_list&&(f.dynamic_filter_list=n.dynamic_filter_list),e.current_plan={}),i="{}"===L()(f)||e.selector_flag?n:f,(null===(l=e.filters)||void 0===l?void 0:l.length)&&~o()(r=e.filters).call(r,(function(e){return e.plan_exclude})))i.filter_dict||(i.filter_dict={}),W()(m=e.filters).call(m,(function(e){e.plan_exclude&&(null==c?void 0:c.hasOwnProperty(e.key))&&(i.filter_dict[e.key]=c[e.key])}));return!e.selector_flag&&d&&i&&angular.extend(i,{filter_str:d}),!e.selector_flag&&u&&i&&angular.extend(i,{query_str:u}),i}return n}}}])},"1Nz0":function(e,t){e.exports='<div style="{{$ctrl.meta.style}}">\n    <span class="text"\n          style="{{$ctrl.meta.style_inner}}"\n          ng-if="$ctrl.meta.text"\n          ng-bind-html="$ctrl.meta.text|toTrusted">\n    </span>\n\n    <span ng-class="$ctrl.meta.icon || $ctrl.meta.field.icon"\n          ng-if="$ctrl.meta.icon || $ctrl.meta.field.icon"></span>\n\n    <span class="field"\n          style="{{$ctrl.meta.style_inner}}"\n          ng-if="$ctrl.meta.field && $ctrl.meta.options.html"\n          ng-bind-html="($ctrl.getData($ctrl.meta)|hcListCellData:$ctrl.meta||$ctrl.meta.options.default)|toTrusted">\n    </span>\n    <div class="field"\n         style="{{$ctrl.meta.style_inner}}"\n         ng-if="$ctrl.meta.field && !$ctrl.meta.options.html">\n        {{($ctrl.getData($ctrl.meta)|hcListCellData:$ctrl.meta) || $ctrl.meta.options.default}}\n    </div>\n    <img class="image"\n         style="{{$ctrl.meta.style_inner}}"\n         ng-if="$ctrl.meta.image"\n         ng-src="{{$ctrl.getData($ctrl.meta)|hcListCellData:$ctrl.meta.image|hcPhoto:(($ctrl.meta.options&&$ctrl.meta.options.size)||32)}}"\n    >\n    <hc-custom-card ng-repeat="_m in $ctrl.meta.children" meta="_m" params="$ctrl.params"></hc-custom-card>\n</div>\n\n'},"1Puc":function(e){e.exports=JSON.parse('[{"key":"key","label":"字段标识","component":"hc-input","options":{"required":true,"width":"col-6","placeholder":"字段标识，建议使用英文"}},{"key":"label","label":"字段名称","component":"hc-input","options":{"required":true,"width":"col-6","placeholder":"字段名称"}},{"key":"data_type","label":"字段类型","component":"hc-super-selector","options":{"required":true,"no_delete":true,"width":"col-6","default":"float","list":[{"id":"float","name":"数值型"},{"id":"string","name":"字符型"}]}},{"key":"length","label":"字段长度","component":"hc-input","options":{"required":true,"width":"col-6","default":100,"placeholder":"字段长度"}},{"key":"width","label":"字段宽度","component":"hc-input","options":{"required":true,"width":"col-6","default":100,"placeholder":"字段宽度"}},{"key":"align","label":"字段类型","component":"hc-super-selector","options":{"required":true,"no_delete":true,"width":"col-6","default":"left","list":[{"id":"left","name":"居左"},{"id":"center","name":"居中"},{"id":"right","name":"居右"}]}},{"key":"expression","label":"计算公式","component":"hc-input-compute","options":{"required":true,"returnFormat":"content","placeholder":"请在此处编辑计算公式","formula_type":"only_formula","form_tips":"操作提示:\\n1、双击字段自动插入替换值\\n2、单击字段可以选择字段可选值插入\\n3、单击可选函数有具体说明，请仔细阅读后使用"}},{"key":"precision","label":"数据精度","component":"hc-input","options":{"singleLine":true,"data_type":"number","width":"col-6"}},{"key":"format","label":"格式化数据","component":"hc-super-selector","options":{"singleLine":true,"width":"col-6","list":[{"name":"千分位符","value":"numberFormat"},{"name":"货币","value":"currency"}]}}]')},"1a+C":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("oVuX"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("sMBO"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rB9j"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Rm1S"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("UxlC"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("hByQ"),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("EnZy"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("rZ3M"),core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("LYCE"),_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("HnXd"),_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9__),_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("qjzJ"),_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("fHi0"),_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("OWCx"),_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("526F"),_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("KYsz"),_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("a0dU"),_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ls82"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("SPx3"),_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("lHQ6"),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("6UaR"),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("M5Mt"),_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_20__),_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("04Ix"),_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_21__),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("5PDf"),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22__),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("pPxq"),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_23__),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("+oHS"),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_24__),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("RXMP"),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25__),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("mnMc"),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_26__),_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("nhkr"),_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28__),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("WxoT"),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29__),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("UtpJ"),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30__),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("ZbhI"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31__),_app__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("CoJ3"),_utils_super_json__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("8Auy"),_utils_utils__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("xAfy"),_socketioservice__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("JQAc"),_controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("dj1t"),url_search_params__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("SnzR"),url_search_params__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(url_search_params__WEBPACK_IMPORTED_MODULE_37__);function ownKeys(e,t){var n=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_24___default()(e);if(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_12___default.a){var i=_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_12___default()(e);t&&(i=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default()(i).call(i,(function(t){return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_11___default()(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25___default()(n=ownKeys(Object(i),!0)).call(n,(function(t){_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_21___default()(e,t,i[t])}));else if(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_10___default.a)_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9___default()(e,_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_10___default()(i));else{var o;_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25___default()(o=ownKeys(Object(i))).call(o,(function(t){_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default()(e,t,_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_11___default()(i,t))}))}}return e}var system_role=[{id:"all",name:"虚拟权限",description:"",need_include:!1},{id:"employee",name:"员工",description:"",need_include:!1},{id:"manager",name:"经理人",description:"",need_include:!1},{id:"cm-org-emp",name:"人事专员",description:"",need_include:!0},{id:"cm-org-emp.org",name:"人事专员.组织管理",description:"",need_include:!0},{id:"cm-org-emp.emp",name:"人事专员.人员信息",description:"",need_include:!0},{id:"cm-org-emp.emp_transfer",name:"人事专员.人员变动",description:"",need_include:!0},{id:"cm-org-emp.contract",name:"人事专员.合同管理",description:"",need_include:!0},{id:"cm-org-emp-manager",name:"人事管理员",description:"",need_include:!0},{id:"cm-cadre",name:"干部专员",description:"",need_include:!0},{id:"cm-cadre-manager",name:"干部管理员",description:"",need_include:!0},{id:"cm-ssc-manager",name:"共享中心管理员",description:"",need_include:!0},{id:"cm-salary",name:"薪酬专员",description:"",need_include:!0},{id:"cm-salary-manager",name:"薪酬管理员",description:"",need_include:!0},{id:"cm-salary-assistant",name:"薪酬助理",description:"",need_include:!0},{id:"cm-social",name:"社保专员",description:"",need_include:!0},{id:"cm-time",name:"考勤专员",description:"",need_include:!0},{id:"cm-time-manager",name:"考勤管理员",description:"",need_include:!0},{id:"cm-recruit",name:"招聘专员",description:"",need_include:!0},{id:"cm-recruit-manager",name:"招聘管理员",description:"",need_include:!0},{id:"cm-perf",name:"绩效专员",description:"",need_include:!0},{id:"cm-perf-manager",name:"绩效管理员",description:"",need_include:!0},{id:"cm-train",name:"培训专员",description:"",need_include:!0},{id:"cm-train-manager",name:"培训管理员",description:"",need_include:!0},{id:"cm-support",name:"支持人员",description:"",need_include:!0},{id:"cm-executive",name:"高管",description:"",need_include:!0},{id:"sys-manager",name:"系统管理员",description:"",need_include:!0},{id:"sec-manager",name:"密级管理员",description:"",need_include:!0},{id:"idm-manager",name:"IDM管理员",description:"",need_include:!0},{id:"default_role",name:"默认角色",description:"",need_include:!1}];_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("AuthService",["$http","$rootScope","dataService","contextService","$q","$state","weChatService","$location","cryptoService",function(e,t,n,i,o,a,l,r,c){var s={"wechat-request":function(){var e;if(!(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e=navigator.userAgent.toLowerCase()).call(e,"micromessenger")<0)){var t=i.getContext("auth");if(t&&t.sso&&"wechatcomponent"===t.sso.sso_type)return t;throw{reason:"no-wechat",name:"no-wechat"}}},auth:function(){var e=i.getContext("auth");if(e)return e;throw{reason:"no-auth",name:""}},company:function(){var e=s.auth();if(e.company)return e;throw{reason:"company",name:"company"}},hcmcompany:function(){var e=s.auth();if(e.company)return e;throw{reason:"hcmcompany",name:"hcmcompany"}},user:function(){var e=s.auth();if(e.user)return e;throw{reason:"user",name:"用户"}},emp:function(){var e=s.user();if(e.employee)return e;throw{reason:"emp",name:"员工"}},employee:function(){return s.emp()},all:function(){return s.auth()},"cm-org-emp":function(){var e=s.emp();if(e.roles&&"cm-org-emp"in e.roles)return e;throw{reason:"cm-org-emp",name:"人事专员"}},"cm-perf":function(){var e=s.emp();if(e.roles&&"cm-perf"in e.roles)return e;throw{reason:"cm-perf",name:"绩效专员"}},"cm-time":function(){var e=s.emp();if(e.roles&&"cm-time"in e.roles)return e;throw{reason:"cm-time",name:"时间管理专员"}},"cm-recruit":function(){var e=s.emp();if(e.roles&&"cm-recruit"in e.roles)return e;throw{reason:"cm-time",name:"招聘专员"}},"sys-manager":function(){var e=s.emp();if(e.roles&&"sys-manager"in e.roles)return e;throw{reason:"sys-manager",name:"系统管理员"}},hcmsysmanager:function(){var e=s.user();if(e.roles&&"hcmsysmanager"in e.roles)return e;throw{reason:"sys-manager",name:"超级管理员"}},owner:function(){return!0},candidate:function(){var e=s.user();if(e.candidate)return e;throw{reason:"candidate",name:"候选人",state:"candidate_error"}},candidate_owner:function(){var e=s.user();if(e.candidate)return e;throw{reason:"candidate_owner",name:"候选人本人",state:"candidate_error"}},partner:function(){var e=s.user();if(e.partner)return e;throw{reason:"partner",name:"合作伙伴",state:"partner_error"}},entry:function(){var e=s.user();if(e.entry)return e;throw{reason:"entry",name:"待入职员工",state:"entry_error"}},emp_enter:function(){var e=s.user();if(e.emp_enter)return e;throw{reason:"emp_enter",name:"采集系统",state:"emp_enter_error"}},pre_emp_enter:function(){var e=s.user();if(e.pre_emp_enter)return e;throw{reason:"pre_emp_enter",name:"新版采集系统",state:"pre_emp_enter_error"}},emp_entry:function(){var e=s.user();if(e.emp_entry)return e;throw{reason:"emp_entry",name:"待入职员工",state:"emp_entry_error"}},enter:function(){var e=s.user();if(e.enter)return e;throw{reason:"enter",name:"员工信息录入系统",state:"enter_error"}},emp_quit:function(){var e=s.user();e.emp_quit;if(e.emp_quit)return e;throw{reason:"emp_quit",name:"离退休政策查询系统",state:"emp_quit_error"}},ops:function(){var e=s.user();if(!e.ops)throw{reason:"ops",name:"运维平台",state:"ops_error"};return e},train:function(){var e=s.user();if(!e.train)throw{reason:"train",name:"培训系统",state:"train_error"};return e}};return{getStateFullUrl:function(e){if(console.log(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default()(e)),!e)return console.log("getStateFullUrl null"),"";var t=e.split("."),n=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(t).call(t,(function(e,n){var i=a.get(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(t).call(t,0,n+1).join("."));return i?i.url:""})).join("");return console.log(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default()(n)),n},getAssociation:function(e,t){var i={key:e};return n.callHcmOpenApi(t,i,null,!0)},getValidCode:function(e){return n.callHcmOpenApi("send_phone_auth_code",{phone:e,except:[12001,40006]},null,!0)},sendVoiceCode:function(e){return n.callHcmOpenApi("send_voice_auth_code",{phone:e},null,!0)},getValidCodeSecond:function(e){return n.callHcmOpenApi("second.password.send.valid.code",{send_type:e},null,!0)},getAuth:function(n){var a=o.defer();if(n&&i.getContext("auth"))a.resolve(i.getContext("auth"));else{var l,s=null===(l=r.search())||void 0===l?void 0:l.company_id;s||(s=new url_search_params__WEBPACK_IMPORTED_MODULE_37___default.a(window.location.search).get("company_id")),s=/^[0-9]*$/.test(s)?"&company_id="+s:"";var d=window.hcm_wengen+"/api/auth/get_auth?app_type="+window.app_type+"&v="+Math.random()+(new Date).getTime()+s;window[c.HCM_ENCRYPT_KEY()]&&(d=d+"&hcm_transfer_strategy="+window[c.HCM_ENCRYPT_KEY()]),d+=window.hcm_env_post,e.get(d).then((function(e){var n,o,l,r,s;e.data||uploadError("10045",_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default()({error:e,url:window.hcm_wengen+"/api/auth/get_auth"+window.hcm_env_pre,param:{},cause:"succ"})),e="object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27___default()(e.data)&&(null===(n=e.data)||void 0===n?void 0:n[c.HCM_ENCRYPT_KEY()])?(o=e.data)[c.HCM_ENCRYPT_KEY()]===c.HB_MIXIN()||o[c.HCM_ENCRYPT_KEY()]===c.HB_MIXIN(4)?JSON.parse(decodeURIComponent(escape(_controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.a.decode(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(l=o[c.HCM_ENCRYPT_VALUE_KEY()]).call(l,3))))):o[c.HCM_ENCRYPT_KEY()]===c.HA_MIXIN().toUpperCase()||o[c.HCM_ENCRYPT_KEY()]===c.HA_MIXIN("")||o[c.HCM_ENCRYPT_KEY()]===c.HA_MIXIN(4)?JSON.parse(decodeURIComponent(escape(c.HA_Decrypt(_controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.a.decode(o[c.HCM_ENCRYPT_VALUE_KEY()]))))):o[c.HCM_ENCRYPT_KEY()]===c.HB_MIXIN(5)?JSON.parse(decodeURIComponent(escape(_controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.a.decode(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(r=o[c.HCM_ENCRYPT_VALUE_KEY()]).call(r,3).replaceAll("a","5").replaceAll("!","a"))))):o[c.HCM_ENCRYPT_KEY()]===c.HA_MIXIN(5)?JSON.parse(decodeURIComponent(escape(c.HA_Decrypt(_controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.a.decode(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(s=o[c.HCM_ENCRYPT_VALUE_KEY()]).call(s,3).replaceAll("a","5").replaceAll("!","a")),c.HA_KEY())))):o:e.data,i.setContext("auth",e),_utils_utils__WEBPACK_IMPORTED_MODULE_34__.i.remove(e),window.hcm_language=e.language,t.changeLanguage(window.hcm_language),a.resolve(e)}),(function(e,t,n,i,o,l){e.data||uploadError("10046",_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default()({error:e,url:window.hcm_wengen+"/api/auth/get_auth"+window.hcm_env_pre,param:{},cause:"error",statusText:o,xhrStatus:l})),e=e.data,a.reject(e)}))}return a.promise},login:function(e){return n.callHcmCloudApi("/auth/auth",{name:e.name,mail:e.mail,mobile:e.mobile,code:e.code,password:e.password,app_type:e.app_type||window.app_type,company:e.company||(window.app_company?window.app_company.id:null),image_code:e.image_code,image_code_index:e.image_code_index,except:[80001,11006,11002,11019]},"POST").then((function(e){i.setContext("auth",e),t.changeLanguage(window.hcm_language)}))},login_by_sso:function(e,t){e=e.split("?")[0];var n,i,o,a=encodeURI((n=location.protocol+"//"+location.host+window.hcm_wengen+"/"+window.app_type+"/"+window.hcm_env_pre+"#"+e,i=t,o="",$.each(i,(function(e,t){t&&(o+="&"+e+"="+t)})),(o=n+(o.length>1?"?"+o.substr(1):"")).replace(" ","")));console.log("login_by_sso_url:",a),window.location=location.protocol+"//"+location.host+window.hcm_wengen+"/api/auth/login_by_sso?next="+encodeURIComponent(a)+"&app_type="+window.app_type+window.hcm_env_post},sso_bind:function(e){return n.callHcmCloudApi("/auth/sso_bind",{name:e.name,mail:e.mail,mobile:e.mobile,code:e.code,app_id:e.app_id,password:e.password,image_code:e.image_code,company_id:window.app_company.id,app_type:window.app_type,except:[80001,11006,11002]},"POST").then((function(e){i.setContext("auth",e)}))},qr_code_login:function(e){var t=o.defer();return n.callHcmCloudApi("/pc/qr_code_login",{code:e.code,except:[80001,11006,11002]},"POST").then((function(e){i.setContext("auth",e.auth),t.resolve(e)})),t.promise},query_login_result:function(e){var t=o.defer();return n.callHcmCloudApi("/pc/login_result_query",{login_job:e,except:[80001,11006,11002]},"POST").then((function(e){e.success&&i.setContext("auth",e.auth),t.resolve(e)})),t.promise},logout:function(){return n.callHcmCloudApi("/auth/logout",{},"POST").then((function(e){i.setContext("auth",e)}))},logoutAndDelBind:function(){return n.callHcmCloudApi("/auth/logout",{del_bind:!0},"POST").then((function(e){i.setContext("auth",e)}))},isSSO:function(){var e=i.getContext("auth");return e&&e.sso&&e.sso.id&&e.sso.sso_type},reLogin:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e||(/_error/.test(location.hash)?"":location.pathname+location.hash);console.log(i);var o=document.cookie,a=null===(t=r.search())||void 0===t?void 0:t.company_id;if(a=/^[0-9]*$/.test(a)?"&company_id="+a:"",n&&_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(n).call(n,"mode=")){var l=encodeURIComponent(location.protocol+"//"+location.host+i);window.location=window.hcm_wengen+"/login?next="+l+"&app_type="+window.app_type+a+n+window.hcm_env_post}else{var c="PWD";o&&/login_mode=/.test(o)&&(c="GETCODE");var s=encodeURIComponent(location.protocol+"//"+location.host+i);window.location=window.hcm_wengen+"/login?next="+s+"&mode="+c+"&app_type="+window.app_type+a+n+window.hcm_env_post}},goLogin:function(e){var t,n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(t=navigator.userAgent.toLowerCase()).call(t,"emmcloud")>=0,s=null===(n=r.search())||void 0===n?void 0:n.company_id;s=/^[0-9]*$/.test(s)?"&company_id="+s:"",c&&0!==_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,"http")&&(0===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,"/")&&(e=_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(e).call(e,1)),0===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,window.app_type)&&(e=_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(e).call(e,window.app_type.length)),0===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,"/")&&(e=_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(e).call(e,1)),e=_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e).call(e,"?")<0?e+"?v11="+(new Date).getTime():e+"&v11="+(new Date).getTime(),e=location.protocol+"//"+location.host+location.pathname+e);var d="";if(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(i=navigator.userAgent.toLowerCase()).call(i,"micromessenger")<0&&_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(o=navigator.userAgent.toLowerCase()).call(o,"emmcloud")<0){try{var u=JSON.parse('{"'+e.replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');d=u.sso&&u.name&&u.password?window.hcm_wengen+"/login?v="+(new Date).getTime()+"&next="+encodeURIComponent(e)+"&app_type="+window.app_type+"&sso="+u.sso+"&name="+u.name+"&password="+encodeURIComponent(u.password)+window.hcm_env_post:window.hcm_wengen+"/login?v="+(new Date).getTime()+"&next="+encodeURIComponent(e)+"&app_type="+window.app_type+s+a+window.hcm_env_post}catch(t){d=window.hcm_wengen+"/login?v="+(new Date).getTime()+"&next="+encodeURIComponent(e)+"&app_type="+window.app_type+s+a+window.hcm_env_post}l.isDing()&&"android"==window.navigator.userAgent.toLowerCase().match(/android/i)&&(console.log("before in ding talk"),l.ding_config().then((function(){console.log("after in ding talk"),window.location.replace(d)}),(function(e){console.log("ding config error2"),console.log(e),window.location.replace(d)})))}else console.log("in login"),d=window.hcm_wengen+"/login?v="+(new Date).getTime()+"&next="+encodeURIComponent(e)+"&app_type="+window.app_type+s+a+window.hcm_env_post;uploadError("LOGREQ",d),l.isDing()&&"android"==window.navigator.userAgent.toLowerCase().match(/android/i)||(console.log("in replace"),window.location.replace(d))},getUrlByState:function(e,t,n){return location.pathname+location.search+decodeURIComponent(a.href(angular.isObject(e)?e.name:e,t,n))},reBind:function(e){var t=document.cookie,n="GETCODE";t&&/login_mode=/.test(t)&&(n="PWD");var o=i.getContext("auth"),a=encodeURIComponent(location.protocol+"//"+location.host+(e||location.pathname+location.search));o&&o.sso&&o.sso.id&&o.sso.sso_type?window.location=window.hcm_wengen+"/login?next="+a+"&func=SSO_BIND&sso="+o.sso.sso_type+"&sso_id="+o.sso.id+"&app_id="+o.sso.app_id+"&mode="+n+"&app_type="+window.app_type+window.hcm_env_post:alert("SSO 上下文不存在，无法进行重新绑定操作")},checkRole:function(e){var t,n=null==e?void 0:e.split(".");if(!s.hasOwnProperty(e)){var i,o=s.emp();if(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_25___default()(i=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_24___default()(o.roles)).call(i,(function(i){var o=null==i?void 0:i.split(".");(null==n?void 0:n.length)>(null==o?void 0:o.length)?n[0]===o[0]&&(t=!0):_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_23___default()(i).call(i,e)&&(t=!0)})),t)return o;throw{reason:e,name:(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default()(system_role).call(system_role,(function(t){return t.id===e}))[0]||{}).name}}s[e]()},getCompanyList:function(){return n.callHcmOpenApi("get_company_list",{},null,!0)},goNext:function(e){(e=null==e?null:JSON.parse(e))&&"login"!=e.state?t.super_go(e.state,e.params,{location:"replace",animator:""}):t.super_go("index",{},{location:"replace",animator:""})},remote_help:function(e,t){return n.callHcmOpenApi("base.add.remote.url.local",_objectSpread({url:e},t||{}))},closeCurPage:function(){var e,t,n,i;_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(e=navigator.userAgent).call(e,"MSIE")>0?_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(i=navigator.userAgent).call(i,"MSIE 6.0")>0?(window.opener=null,window.close()):(window.open("","_top"),window.top.close()):_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(t=navigator.userAgent).call(t,"Firefox")>0||_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_31___default()(n=navigator.userAgent).call(n,"Presto")>0?(window.location.href="about:blank",window.close()):(window.opener=null,window.open("","_self",""),window.close())},dealErr:function(e,n,o,l){if("user"===e.reason){i.clear("auth");var r=this.getUrlByState(n,o,l);this.goLogin(r)}else if("no-wechat"===e.reason)this.getAuth(!0).then((function(e){e.sso&&"wechatcomponent"===e.sso.sso_type?a.go(n.name,o,l):window.location.replace(window.hcm_wengen+"/login?sso=wechatcomponent&is_only_sso=1&next="+encodeURIComponent(this.getUrlByState(n,o,l))+"&app_type="+window.app_type+window.hcm_env_post)}),(function(){window.location.replace(window.hcm_wengen+"/login?sso=wechatcomponent&is_only_sso=1&next="+encodeURIComponent(this.getUrlByState(n,o,l))+"&app_type="+window.app_type+window.hcm_env_post)}));else{var c=location.pathname+location.hash;c=/_error/.test(c)?"":c,e.state?t.super_go(e.state,{next:c},{location:"replace"}):t.super_go("role_error",{role_name:e.name,next:c})}}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("templateService",["$q","$http","dataService",function(e,t,n){var i={getTemplateList:function(){var t=e.defer();return n.callHcmCloudApi("/template/get_template_list",{},"POST").then((function(e){t.resolve(e)})),t.promise},get_customer_list:function(){var t=e.defer();return n.callHcmOpenApi("template.get.customer.list",{},null,!0).then((function(e){t.resolve(e)})),t.promise},getTemplate:function(e){return n.callHcmOpenApi("get_template",{key:e},null,!0)},setFlexTemplate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return n.callHcmOpenApi("set_flex_template_service",{key:e,template_config:t,data_type:i},null,!0)},previewFlexTemplate:function(e,t){return n.callHcmOpenApi("preview_flex_template",{key:e,template_config:t},null,!0)},setTemplate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return n.callHcmOpenApi("set_template_service",{key:e,template_config:t,data_type:i},null,!0)},loadTemplate:function(t,i){var o=e.defer(),a={key:t,company:i};return n.callHcmCloudApi("/template/load_template",a,"POST").then((function(e){o.resolve(e)})),o.promise},maintain_loadTemplate:function(t,i){var o=e.defer(),a={key:t,company:i};return n.callHcmCloudApi("/template/maintain_load_template",a,"POST").then((function(e){o.resolve(e)})),o.promise},loadGlobalTemplate:function(t){var i=e.defer(),o={key:t};return n.callHcmCloudApi("/template/load_template_pub",o,"POST").then((function(e){i.resolve(e)})),i.promise},storeTemplate:function(t){var i=e.defer();return n.callHcmCloudApi("/template/store_template",t,"POST").then((function(e){i.resolve(e.data)})),i.promise},deleteTemplate:function(t){var i=e.defer();return n.callHcmCloudApi("/open_api/delete_template",t,"POST").then((function(e){i.resolve(e)})),i.promise}};return i}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("contextService",["$rootScope","$http","$q","$timeout",function(e,t,n,i){var o={},a=new _socketioservice__WEBPACK_IMPORTED_MODULE_35__.a(e);return{setContext:function(e,t){o[e]=t,"auth"===e&&t&&a.open(t)},getContext:function(e){return o[e]},clear:function(e){o&&o[e]&&delete o[e]},has_login:function(e){return"auth"in o&&(!!o.auth.roles&&e in o.auth.roles)}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("historyService",["contextService","$http","$q",function(e,t,n){return function(){var t=window.md5(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_29___default()({user:e.getContext("auth").employee.id,state:"history-selector"}));return{loadHistory:function(e,n){var i=window.storage.getItem("local",t);i=i?JSON.parse(i):[];var o=e?_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default()(i).call(i,(function(t){return t.class==e})):i;return n&&(o=_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(o).call(o,0,n)),o},pushHistory:function(e,n){var i=window.storage.getItem("local",t),o=null==i?[]:JSON.parse(i);o=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default()(o).call(o,(function(t){return t.id!=n.id||t.class!=e})),_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_20___default()(o).call(o,0,0,$.extend(n,{class:e})),window.storage.setItem("local",t,_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_30___default()(o).call(o,0,100))}}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("localStorageService",(function(){return{setItem:function(e,t){window.storage.setItem("local",e,t)},getItem:function(e){return window.storage.getItem("local",e)},removeItem:function(e){window.storage.removeItem("local",e)}}})),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("attachService",["dataService",function(e){return{saveAttach:function(t,n,i){return e.callHcmOpenApi("common.service.save.bill.attch",{bill_id:t,attch_list:i,domain:n},null,!0)},getAttach:function(t){return e.callHcmOpenApi("common.service.get.bill.attch",{bill_id:t},null,!0)},annexInfo:function(t){return e.callHcmOpenApi("document.get.info",{index:t},null,!0)},annexInfoMore:function(t,n){return e.callHcmOpenApi(n||"documents.get.info",{index_list:t},null,!0)},updateFileName:function(t,n){return e.callHcmOpenApi("document.update.source.filename",{index:t,file_name:n},null,!0)}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("simplePagingService",["$state","$q","$http","dataService",function(e,t,n,i){return function(e,t,n){var i={perpage:n,totalPage:0,endPage:0,pages:[],data:[],currentPage:1,_load_first_data:function(){e().then((function(e){i.totalPage=Math.ceil(e/n),i.endPage=i.totalPage,i.currentPage>1&&i.currentPage<i.totalPage?i.pages=[i.currentPage-1,i.currentPage,i.currentPage+1]:1==i.currentPage&&i.totalPage>1?i.pages=[i.currentPage,i.currentPage+1]:i.currentPage==i.totalPage&&i.totalPage>1&&(i.pages=[i.currentPage-1,i.currentPage]),i.totalPage>0?t(0,n).then((function(e){i.data=e}),(function(e){})):i.data=[]}),(function(e){}))},loadPage:function(e){i.currentPage=e,t(i.perpage*(i.currentPage-1),i.perpage*i.currentPage).then((function(e){i.data=e}),(function(e){}))},next:function(){i.currentPage<i.totalPage&&(i.currentPage++,i.loadPage(i.currentPage))},prev:function(){i.currentPage>1&&(i.currentPage--,i.loadPage(i.currentPage))}};return i._load_first_data(),i}}]).factory("simplePagingService2",["$state","$q","$http","dataService",function(e,t,n,i){return function(e,t){var n={perpage:t,pages:[],data:[],currentPage:1,_load_first_data:function(){e(0,t).then((function(e){n.data=e}),(function(e){}))},loadPage:function(t){n.currentPage=t,e(n.perpage*(n.currentPage-1),n.perpage*n.currentPage).then((function(e){n.data=e}),(function(e){}))},next:function(){n.currentPage++,n.loadPage(n.currentPage)},prev:function(){n.currentPage>1&&(n.currentPage--,n.loadPage(n.currentPage))}};return n._load_first_data(),n}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("$base64",(function(){return _controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.a})),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("cryptoService",(function(){return _controller_hcm_crypto__WEBPACK_IMPORTED_MODULE_36__.b})),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("paramMix",["$base64","cryptoService",function(e,t){return{encryption:function(n){return e.encode(t.DES("df7d1995-28b9-4f1e-8e2f-6537007871e6",(n||"")+""))},decryption:function(e){}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("formStructureService",["$timeout","contextService","$q","$state","$hcDialog","dataService","templateService",function(e,t,n,i,o,a,l){return{getDictionaryConfig:function(e,t){return a.callHcmOpenApi("department.position.get.config",{org_type:e,fields:t},"session",!1)},getDictionaryBasicConfig:function(e,t){return a.callHcmOpenApi("dictionary.get.config",{category:e,fields:t},"session",!1)},getSingleConfig:function(e){return a.callHcmOpenApi("dictionary.get.field.config",{field:e},"session",!1)},getFileSelectByKey:function(e,t){return a.callHcmOpenApi("dictionary.get.field.select.value.by.key",{field:e,key:t},"session",!1)},getFileSelectByValue:function(e,t){return a.callHcmOpenApi("dictionary.get.field.select.value.by.value",{field:e,name:t},"session",!1)},getFileSelect:function(e,t,n){return a.callHcmOpenApi("dictionary.get.field.selector",{field:e,filter_key:t,filter_value:n},"session,0.5",!1)},setFormData:function(e,t){var n=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(e).call(e,(function(n){for(var i=0;i<t.length;i++)if(t[i]&&(n.key==t[i].number||n.key==t[i].key)){var o=t[i].control_type;if(!n.component)switch(!0){case/(baseitem_multi_value)/.test(o):n.component="hc-common-select",n.options.multi=!0;break;case/(link|baseitem|enum)/g.test(o):n.component="hc-common-select";break;case/(integer|string|float)/.test(o):case/(text)/.test(o):n.component="hc-input";break;case/(date)/.test(o):n.component="hc-input-datetime";break;default:n.component="hc-input"}return n.label="label"in e[i]?e[i].label:t[i].name,n.options=$.extend("options"in n?n.options:{},{selectKey:t[i].key}),n.options.control_type=o,n}}));return n=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_22___default()(n).call(n,(function(e){return!!e||(console.log("存在没有的数据"),!1)}))},setComponent:function(e){return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(e).call(e,(function(e){if(!e.component){var t=e.control_type||e.options&&e.options.control_type;switch(!0){case/(baseitem_multi_value)/.test(t):e.component="hc-common-select",e.options.multi=!0;break;case/(link|baseitem|enum)/g.test(t):e.component="hc-common-select";break;case/(integer|string|float)/.test(t):case/(text)/.test(t):e.component="hc-input";break;case/(date)/.test(t):e.component="hc-input-datetime";break;default:e.component="hc-input"}}return e}))},changeFormData:function(e){for(var t in e){var n;if(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_19___default()(e[t]))e[t]=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(n=e[t]).call(n,(function(e){return"key"in e?e.value:e.name})).join(",");else"object"==_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27___default()(e[t])&&(e[t]&&"name"in e[t]?e[t]=e[t].name:e[t]&&"value"in e[t]&&(e[t]=e[t].value))}return e}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("billService",["dataService",function(dataService){return{getComponent:function getComponent(_item,_allow_edit){var component={key:_item.key,label:_item.label,options:{required:_item.options.required,readOnly:!_allow_edit||_item.options.readOnly,singleLine:_item.options.singleLine,width:_item.property.width||"w-33",field_type:_item.field_type,relation:"display"==_item.field_type?_item.property.relation:null},placeholder:"display"==_item.field_type?" ":""};switch(_item.property.hasOwnProperty("default")&&(component.options.default=_item.property.default),_item.property.hasOwnProperty("params")&&(component.options.params=_item.property.params),_item.property.hasOwnProperty("operate")&&(component.options.operate=_item.property.operate),_item.type){case"linkfield":component.component="hc-link-field",component.options={col:"col-1",label:component.label,state:(component.options||{}).state},delete component.label;break;case"photo":component.component="hc-photo-field",component.options.col="col-1";break;case"text_area":component.component="hc-text-area",component.options.col="col-1";break;case"select":var _context15;if(component.component="hc-select","list"==_item.options.source)component.options.list=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(_context15=_item.options.list).call(_context15,(function(e){return{label:e.label||e.value,value:e.value}}));else dataService.callHcmOpenApi(_item.options.api,{}).then((function(e){component.options.list=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_28___default()(e).call(e,(function(e){return{label:e.name,value:e.id}}))}));break;case"date_time":component.component="hc-input-datetime",_item.options&&(component.options.format=_item.options.format);break;case"selector":component.component="hc-selector",_item.options&&(component.options.selector=eval(_item.options.selector),component.options.selectorMapper=eval(_item.options.selectorMapper),component.options.selectorParse=eval("("+_item.options.selectorParse+")"),component.options.refreshRelationField=_item.options.refreshRelationField);break;case"list":component.component="hc-data-grid",component.options.fields=_item.options.fields,component.options.column=_item.options.column,component.options.width="col-12";break;case"job_info_selector":component.component=" hc-job-info-selector";break;default:component.component="hc-input"}return component}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("watermark",["listGlobalConfigService","contextService","$filter",function(e,t,n){var i=!1;return{addWatermark:function(e){var t,n={watermark_txt:"text",ele_id:"",ele_selector:null,watermark_x:20,watermark_y:20,watermark_rows:20,watermark_cols:20,watermark_x_space:100,watermark_y_space:50,watermark_level:null,watermark_color:"#ccc",watermark_alpha:.4,watermark_fontsize:"15px",watermark_width:210,watermark_height:80,watermark_angle:15};if(1===arguments.length&&"object"===_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_27___default()(arguments[0])){var i=arguments[0]||{};for(var o in i)i[o]&&(n[o]=i[o])}if(t=n.ele_id?document.getElementById(n.ele_id):$(n.ele_selector).last()[0],document.getElementsByClassName("mask_div").length)for(var a=document.getElementsByClassName("mask_div"),l=a.length-1;l>=0;l--)t.getElementsByClassName("mask_div").length&&t.removeChild(a[a.length-1]);var r=document.createDocumentFragment(),c=Math.max(document.body.scrollWidth,document.body.clientWidth,t.clientWidth),s=.015*c;c-=s;var d,u,_=Math.max(t.scrollHeight,t.clientHeight),p=Math.sqrt(Math.pow(.5*n.watermark_height,2)+Math.pow(.5*n.watermark_width,2)),m=Math.atan(n.watermark_height/n.watermark_width)/(Math.PI/180)+n.watermark_angle,f=p*Math.sin(m*(Math.PI/180));_-=f-=.5*n.watermark_height,(0===n.watermark_cols||_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()(n.watermark_x+n.watermark_width*n.watermark_cols+n.watermark_x_space*(n.watermark_cols-1))>c)&&(n.watermark_cols=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()((c-n.watermark_x+n.watermark_x_space)/(n.watermark_width+n.watermark_x_space)),n.watermark_x_space=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()((c-n.watermark_x-n.watermark_width*n.watermark_cols)/(n.watermark_cols-1))),(0===n.watermark_rows||_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()(n.watermark_y+n.watermark_height*n.watermark_rows+n.watermark_y_space*(n.watermark_rows-1))>_)&&(n.watermark_rows=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()((n.watermark_y_space+_-n.watermark_y)/(n.watermark_height+n.watermark_y_space)),n.watermark_y_space=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_18___default()((_-n.watermark_y-n.watermark_height*n.watermark_rows)/(n.watermark_rows-1)));for(var h=0;h<n.watermark_rows;h++){u=n.watermark_y+(n.watermark_y_space+n.watermark_height)*h;for(var g=0;g<n.watermark_cols;g++){d=n.watermark_x+(n.watermark_width+n.watermark_x_space)*g;var v=document.createElement("div");v.id="mask_div"+h+g,v.className="mask_div",v.appendChild(document.createTextNode(n.watermark_txt)),v.style.webkitTransform="rotate(-"+n.watermark_angle+"deg)",v.style.MozTransform="rotate(-"+n.watermark_angle+"deg)",v.style.msTransform="rotate(-"+n.watermark_angle+"deg)",v.style.OTransform="rotate(-"+n.watermark_angle+"deg)",v.style.transform="rotate(-"+n.watermark_angle+"deg)",v.style.visibility="",v.style.position="absolute",v.style.left=d+"px",v.style.top=u+"px",v.style.overflow="hidden",v.style.zIndex="depth"===n.watermark_level?10002:500,v.style.pointerEvents="none",v.style.opacity=n.watermark_alpha,v.style.fontSize=n.watermark_fontsize,v.style.color=n.watermark_color,v.style.textAlign="center",v.style.whiteSpace="pre-wrap",v.style.width=n.watermark_width+"px",v.style.height=n.watermark_height+"px",v.style.display="block","pc"!==window.client&&(v.style.zIndex=10002),r.appendChild(v)}}t.appendChild(r)},addWatermarkWhenConfig:function(t){var n=this;return _babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17___default()(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.mark((function o(){var a;return _babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.getListGlobalConfig();case 2:a=o.sent,!i&&a.enableWatermark&&n.addWatermark(t);case 4:case"end":return o.stop()}}),o)})))()},addFullScreenWatermarkWhenConfig:function(o){var a=this;return _babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17___default()(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.mark((function l(){var r,c,s,d,u,_,p,m;return _babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.getListGlobalConfig();case 2:r=l.sent,!i&&r.enableFullScreenWatermark&&((null==r||null===(c=r.dynamicWatermark)||void 0===c?void 0:c.enabled)&&(u=t.getContext("auth"),_=_utils_super_json__WEBPACK_IMPORTED_MODULE_33__.a.jsonEval(null==r?void 0:r.dynamicWatermark.fields),p=function(e,t){try{return e+n("hcListCellData")(u,t)+"\n "}catch(t){return e}},s=_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_14___default()(_).call(_,p,""),m={watermark_txt:s},_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_13___default()(m,null==r||null===(d=r.dynamicWatermark)||void 0===d?void 0:d.config),_babel_runtime_corejs3_core_js_stable_object_assign__WEBPACK_IMPORTED_MODULE_13___default()(o,m)),a.addWatermark(o),i=!0);case 4:case"end":return l.stop()}}),l)})))()},removeAllWatermark:function(){if(document.getElementsByClassName("mask_div").length>0)for(var e=document.getElementsByClassName("mask_div"),t=e.length-1;t>=0;t--)e[t].remove();i=!1}}}]),_app__WEBPACK_IMPORTED_MODULE_32__.a.factory("mainMobileService",["dataService",function(e){return{getMobileMenuMeta:(t=_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17___default()(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.mark((function t(){var n;return _babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_15___default.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.callHcmOpenApi("hcm.model.meta",{model:"HcmMobilePortal",biz_type:"base",state:"common"});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})};var t}])},"1fhX":function(e,t){e.exports='<div class="hcm-content-title" ng-if="!selector_flag || isNewStyle">\n    <div class="text" ng-if="!isNewStyle">\n        <span class="text-name"\n            ng-bind-html="((list_config.title|valueToFunc)() || model_meta.description || model_meta.name)|toTrusted">\n        </span>\n        <span class="current-plan" ng-if="advance_query.current_plan.name"\n              hc-title="{{advance_query.current_plan.name}}"\n              options="{mode: \'tip\', seconds: 0}">{{advance_query.current_plan.name}}</span>\n        <span class="tip icon-hcm-info-warning" ng-if="list_config && list_config.tip && list_config.tip_config.pc !== \'tile\'"\n              hc-title="{{(list_config.tip|valueToFunc)()}}"\n              options="{mode: \'tip\', seconds: 0}"></span>\n        <hc-form model="sub_title_model" class="sub-title"></hc-form>\n    </div>\n    <hc-tabs\n            ng-if="isNewStyle"\n            value="initValue"\n            class="tabs"\n            on-value-change="tabsValueChange"\n            disable-show-more=true>\n        <div class="tab-pane" ng-repeat="tab in changePageList track by $index">\n            <hc-tab-pane\n                    label="tab.label"\n                    name="tab.id"\n                    count="tab.count"\n                    hide-count="!tab.count"\n                    is-selected-new-style=true\n            ></hc-tab-pane>\n            <span class="current-plan" ng-if="current_tab_index === $index && advance_query.current_plan.name"\n                  hc-title="{{advance_query.current_plan.name}}"\n                  options="{mode: \'tip\', seconds: 0}">{{advance_query.current_plan.name}}</span>\n            <span class="tip icon-hcm-info-warning" ng-if="current_tab_index === $index && list_config && list_config.tip && list_config.tip_config.pc !== \'tile\'"\n                  hc-title="{{(list_config.tip|valueToFunc)()}}"\n                  options="{mode: \'tip\', seconds: 0}"></span>\n        </div>\n    </hc-tabs>\n    <hc-list-btn model="list_btn_model" ng-if="!selector_flag"></hc-list-btn>\n    <div class="transparent-mask" ng-show="dirtyModify.status === 1"></div>\n</div>\n'},"1hbj":function(e,t,n){"use strict";n("srGB");var i=n("lq6P"),o=n("CGID"),a=n.n(o);n("8npG");window.app.controller("CommonModelDialogCtrl",["BaseCRUDService","$controller","$rootScope","$scope",function(e,t,n,o){var a=o.$dialog.options.model_name?e.getModelService(o.$dialog.options.model_name):e.getBaseService(o.$dialog.options.object_str);t(i.a,{$scope:o,CRUDService:a}),o.meta_state=o.$dialog.options.meta_state}]),t.a=function(e,t,n){return{controller:"CommonModelDialogCtrl",template:a.a,model_name:e,object_str:n,meta_state:t,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}}}},"1maE":function(e,t,n){e.exports='\x3c!--pc--\x3e\n<div class="hcm-nav-content" ng-if="client===\'pc\'">\n    <div ng-if="tree_flag && !dataset_flag" class="hcm-left-content">\n        '+n("BBF0")+'\n    </div>\n    <div ng-if="category_field && category_type===\'nav\' && !dataset_flag" class="hcm-left-content">\n        '+n("1pOw")+'\n    </div>\n    <div ng-if="dataset_flag" class="hcm-left-content">\n        '+n("+uNe")+'\n    </div>\n    <div class="hcm-content flex">\n        <div class="hcm-content-top" ng-hide="(hideComponents || []).includes(\'hcm-content-top\')">\n            '+n("1fhX")+"\n            "+n("S7p3")+"\n            "+n("iJxR")+"\n            "+n("pyRK")+"\n            "+n("Y23d")+"\n            "+n("jl73")+"\n            "+n("30Yt")+"\n        </div>\n        "+n("IGAs")+'\n        <div id="ModelPdfPrint" class="hcm-hc-list-container" data-ng-show="is_pdf_print">\n\n        </div>\n    </div>\n</div>\n'},"1nnc":function(e,t,n){"use strict";n.r(t),n.d(t,"WorkflowEmployeeSelectorPanel",(function(){return M}));n("TeQF");var i=n("3xDC"),o=n.n(i),a=n("WxoT"),l=n.n(a),r=n("RXMP"),c=n.n(r),s=n("+oHS"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("eLKs"),m=n.n(p),f=n("M5Mt"),h=n.n(f),g=n("FLGM"),v=n.n(g),b=n("ZbhI"),y=n.n(b),w=n("o+MX"),x=n.n(w),k=n("5PDf"),$=n.n(k),O=n("TEMH"),D=n.n(O),C=n("mrSG"),M=(n("m64a"),n("02Tl"),function(){function e(e,t,n,i,o,a,l){var r,c,s,d,u,_,p,f,g,b,w,k,O,M,P,j,T,A,I=this;this.rootScope=e,this.hcDialog=t,this.scope=n,this.filter=i,this.timeout=o,this.contextService=a,this.dataService=l,this.isSelected=function(e){var t;return~(null===(t=I.chooseEmployees)||void 0===t?void 0:D()(t).call(t,(function(t){return t.id===e.id})))},this.showMore=function(){I.pageIndex+=1,I.onSearch()},this.getMetaState=function(){var e,t,n;return $()(I).call(I,"valueToFunc")(null!==(n=null===(t=null===(e=I.scope)||void 0===e?void 0:e.params)||void 0===t?void 0:t.state)&&void 0!==n?n:"workflowSimple")()},this.getExtraProperty=function(){var e,t,n,i,o,a,l,r={state:I.getMetaState()};return(null===(t=null===(e=I.scope)||void 0===e?void 0:e.params)||void 0===t?void 0:t.role)&&(r.role=null===(i=null===(n=I.scope)||void 0===n?void 0:n.params)||void 0===i?void 0:i.role),Object(C.a)(Object(C.a)({},r),$()(I).call(I,"valueToFunc")(null!==(l=null===(a=null===(o=I.scope)||void 0===o?void 0:o.params)||void 0===a?void 0:a.extra_property)&&void 0!==l?l:{})())},this.onSearch=function(){return Object(C.c)(I,void 0,void 0,(function(){var e,t,n,i,o,a;return Object(C.e)(this,(function(l){var r;switch(l.label){case 0:return this.isSearchIng=!0,e=this,1===this.pageIndex&&(this.searchModel=[],this.searchResultCount=0),this.cacheCount&&!this.filterStr?(this.isSearchIng=!1,this.initCacheData(),[2]):this.scope.params.disableNull&&!this.filterStr?(this.isSearchIng=!1,[2]):(t={model:"Employee",page_size:50,page_index:e.pageIndex,extra_property:e.getExtraProperty()},n=(null===(a=this.scope.params)||void 0===a?void 0:a.useStrict)?{filter_dict:!0===this.scope.params.useStrict?{name:this.filterStr}:(o={},o[this.scope.params.useStrict]=this.filterStr,o)}:{filter_str:this.filterStr},[4,this.dataService.callHcmOpenApi("hcm.model.list",Object(C.a)(Object(C.a)({},t),n))]);case 1:return i=l.sent(),this.showCount=!0,this.searchResultCount=i.count,this.searchModel=x()(r=this.searchModel).call(r,i.list),this.isSearchIng=!1,[2]}}))}))},this.choose=function(e){if(2===this.selectorType){var t,n,i,o=y()(t=v()(n=this.chooseEmployees).call(n,(function(e){return e.id}))).call(t,e.id);if(~o)h()(i=this.chooseEmployees).call(i,o,1);else this.chooseEmployees.push(e)}else this.chooseEmployees[0]=e},this.initCacheData=function(){var e;this.showCount=!1,this.searchModel=[],this.searchModel=x()(e=this.searchModel).call(e,E(this.auth.employee.id,this.cacheKey)),this.cacheCount=this.searchResultCount=this.searchModel.length,!this.cacheCount&&this.onSearch()},this.resolveData=function(){if(!I.chooseEmployees.length)return I.rootScope.show_warning("请选择审批人"),0;I.scope.$dialog.resolve_data(2===I.scope.params.selectorType?I.chooseEmployees:I.chooseEmployees[0]),I.scope.$dialog.dialog_close(),I.useCache&&S(I.auth.employee.id,I.cacheKey,I.chooseEmployees)},this.close=function(){this.scope.$dialog.reject_data({option:"cancel"}),this.scope.$dialog.dialog_close()},this.enterKeyPress=function(e,t){this.scope._search_timeout&&this.timeout.cancel(this.scope._search_timeout),13===e.keyCode&&this.onSearch()},this.setCurrentNode=function(e){this.currentEmployee={_index:e}},this.delNode=function(e){var t;h()(t=this.chooseEmployees).call(t,e,1)},this.clearEmpCache=function(){S(I.auth.employee.id,I.cacheKey,[]),I.initCacheData()},this.auth=this.contextService.getContext("auth"),this.client=window.client,this.scope.searchKey={key:null,blur:function(e){window.event?e.keyCode:e.which}},this.showCount=!1,this.selectorType=null!==(b=null===(g=null===(f=this.scope)||void 0===f?void 0:f.params)||void 0===g?void 0:g.selectorType)&&void 0!==b?b:2,this.pageIndex=1,this.searchModel=[],this.chooseEmployees=(null===(w=this.scope.params)||void 0===w?void 0:w.originObject)?2!==(null===(O=null===(k=this.scope)||void 0===k?void 0:k.params)||void 0===O?void 0:O.selectorType)?[null===(M=this.scope.params)||void 0===M?void 0:M.originObject]:null===(P=this.scope.params)||void 0===P?void 0:P.originObject:[],this.searchResultCount=0,this.filterStr="",this.currentEmployee={_index:-1},this.useCache=!!(null===(j=this.scope.params)||void 0===j?void 0:j.useHistory),this.cacheKey=$()(r=this).call(r,"valueToFunc")(null!==(A=null===(T=this.scope.params)||void 0===T?void 0:T.cacheKey)&&void 0!==A?A:"common")(),this.scope.$watch("searchKey.key",m()(c=function(e,t){if(e!==t){this.scope._search_timeout&&this.timeout.cancel(this.scope._search_timeout);var n=this;n.filterStr=e,this.scope._search_timeout=this.timeout((function(){n.pageIndex=1,n.onSearch(e)}),1e3)}}).call(c,this)),this.scope.$dialog.setClose(m()(s=this.close).call(s,this)).operates([{label:$()(d=this).call(d,"translate")("Cancel"),func:m()(u=this.close).call(u,this),default:!1},{label:$()(_=this).call(_,"translate")("confirm"),func:m()(p=this.resolveData).call(p,this),default:!0}]),this.useCache&&this.cacheKey?this.initCacheData():this.onSearch()}return e.prototype.$onInit=function(){},e.$inject=["$rootScope","$hcDialog","$scope","$filter","$timeout","contextService","dataService","frameworkSelectorService","workflowOnlineService"],e}());t.default={controller:M,template:n("ff9T"),controllerAs:"$ctrl"};var S=function(e,t,n){var i,o,a="hcm:search:selected:emp:history:"+e,r=JSON.parse(localStorage.getItem(a)||"{}"),s=t?String(t):"common",u=_()(i=d()(r)).call(i,s)?r[s]:[];n&&n.length?(c()(n).call(n,(function(e){return function(e){var t=["id","name","job_title","department","company_name"],n={};c()(t).call(t,(function(t){return n[t]=e[t]}));var i=D()(u).call(u,(function(t){return t.id===e.id}));~i&&h()(u).call(u,i,1),u.length>=20&&u.shift(),u.push(n)}(e)})),r[s]=u):_()(o=d()(r)).call(o,s)&&delete r[s];localStorage.setItem(a,l()(r))},E=function(e,t){var n,i="hcm:search:selected:emp:history:"+e;console.log("get.history.cache.index: "+t);var a=JSON.parse(localStorage.getItem(i)||"{}"),l=t?String(t):"common",r=_()(n=d()(a)).call(n,l)?a[l]:[];return o()(r).call(r),r}},"1pOw":function(e,t){e.exports='<div class="hcm-nav full-height">\n    <div class="hcm-nav-title">\n        <div class="text">{{category_meta.name}}</div>\n        <div class="btn-icon-groups" ng-if="showCategoryEdit">\n            <div class="btn-icon {{list_config.category.icon ? list_config.category.icon : \'icon-hcm-menu\'}}" ng-click="categoryEdit()"></div>\n        </div>\n    </div>\n    <div class="nav-search-toolbar" ng-if="showCategorySearch">\n        <input type="search"\n               class="nav-search"\n               placeholder="输入关键字搜索"\n               ng-model="search.navKeyword"\n               ng-model-options="{debounce:{default:500,blur:0}}">\n        <span ng-click="navSearch(category_list ,search.navKeyword)" class="search-icon icon-hcm-check"></span>\n    </div>\n    <div class="hcm-nav-fixed">\n        <div ng-repeat="_category in tabPanes track by $index"\n             ng-click="changeCategory(_category.id)"\n             class="hcm-nav-item count-category" title="{{_category.name}}"\n             ng-class="{\'selected\':_category.id==category_id}">\n            <span class="category-name">{{_category.name}}</span>\n            <span class="count" ng-if="_category.count" ng-bind-html="_category.count|toTrusted"></span>\n        </div>\n    </div>\n    <hc-resizer></hc-resizer>\n</div>\n'},"1yxs":function(e,t){e.exports='<div class="hc-slider">\n    <rzslider rz-slider-model="$ctrl.$scope.model" rz-slider-options="$ctrl.sliderOptions" ng-if="$ctrl.loaded"\n        class="custom-slider" ng-class="{\'graduation\': $ctrl.options.graduation}"></rzslider>\n    <input class="slider-with-input" type="number" ng-model="$ctrl.model" ng-model-options="{\'debounce\':400}" ng-if="$ctrl.options.withInput"\n        max="{{$ctrl.sliderOptions.ceil}}" min="{{$ctrl.sliderOptions.floor}}" step="{{$ctrl.sliderOptions.step}}"\n        ng-blur="$ctrl.onBlur()" ng-readonly="{{($ctrl.sliderOptions.readOnly|valueToFunc)()}}">\n</div>\n'},"1z33":function(e,t){e.exports='<div class="model-dialog-style" ng-init="init()">\n    <hc-form model="base_form"></hc-form>\n</div>\n'},"1zKg":function(e,t){e.exports='<div class="rec-jump" ng-click="go_apply()">\n    <span class="icon icon-hcm-click-finger animated fadeIn"></span>\n    <span>点击查看详情</span>\n    <div class="rec-jump">\n    </div>\n</div>\n'},"263P":function(e,t){e.exports='<div class="hc-input-photo-content">\n    <div class="hc-input-photo-pic" ng-repeat="_photo in list_photo" ng-switch on="_photo.uploading"\n         style="width:{{options.width||70}}px"\n         ng-click="photo_view($index)">\n        <div ng-switch-when="true" class="photo-uploading">\n            上传中...\n        </div>\n        <div ng-switch-default>\n            <img ng-src="{{_photo.index|commonImage:(options.type ? [options.type] : [\'hcImage\',\'70,70\'])}}"/>\n            <div ng-show="options&&!options.readOnly" class="hc-input-photo-remove" ng-click="photo_remove($index,$event)">\n                <div class="icon-hcm-delete"></div>\n            </div>\n        </div>\n    </div>\n    <div ng-show="options&&!options.readOnly" class="hc-input-photo-add icon-hcm-add"\n         img-resize-upload l-width="600" l-quality="1" ng-model="pic"\n         callback="photo_add" controller="img_upload_controller" use-we-chat>\n    </div>\n</div>\n'},"2M/t":function(e,t){e.exports='<div class="crud-import-tip-style" ng-init="init()">\n    <div>\n        <div class="upload-imp-content">\n            <div ng-repeat="item in data track by $index" class="upload-imp-tip">\n                <div class="item-name">{{item}}</div>\n                <div class="item-status" ng-show="!$last">\n                    <span class="item-success icon-hcm-info-succeed">&nbsp;&nbsp;处理完成</span>\n                </div>\n                <div class="item-status" ng-show="$last && task_running">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{tip}}处理中...</div>\n            </div>\n        </div>\n    </div>\n    <div ng-show="data.lenght>0" class="upload-imp-console">\n        <div>\n            <span class="icon-hcm-clock-solid item-success"></span>\n            <span>任务处理中...</span>\n        </div>\n    </div>\n</div>\n'},"2P52":function(e,t){e.exports='<div class="component-container"\n     ng-init="init();hover=false"\n     ng-click="onClick($event)"\n     ng-mouseover="hover=true"\n     ng-mouseleave="hover=false">\n    <div class=\'component-input-inner\'\n         ng-bind-html=\'selector_label||((options.readOnly|valueToFunc)()?"":options.placeholder)\'\n         ng-class=\'{placeholder:!model}\'\n         ng-disabled=\'(options.readOnly|valueToFunc)()\'\n         hc-title="{{selector_label}}"\n         options="{mode: \'tip\', showOnOverflow: true}"></div>\n    <div ng-show="!(options.readOnly|valueToFunc)()"\n         ng-click="([null,undefined].includes(model)||options.no_delete)? onClick($event) : del($event)"\n         class="input-icon"\n         ng-class="(![null,undefined].includes(model) && (client===\'mobile\'||hover) && !options.no_delete)\n                        ?\'icon-hcm-delete\'\n                        : options.icon\n                            ?options.icon\n                            :client===\'pc\'\n                                ?\'icon-hcm-screening\'\n                                :\'icon-hcm-arrow-right\'"\n    >\n    </div>\n</div>\n'},"2Ql6":function(e){e.exports=JSON.parse('{"tip":"维护字段显示属性","fields":[{"key":"key","label":"标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入标识","required":true}},{"key":"label","label":"名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"description","label":"字段描述","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"鼠标悬停表头时会在表格上显示的文字内容","required":false}},{"key":"aggr.field","dataPath":["aggr","field"],"label":"统计字段","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入统计字段","required":true}},{"key":"aggr.ag","dataPath":["aggr","ag"],"label":"统计方式","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","placeholder":"请输入统计字段","required":true}},{"key":"total_expression","label":"小计汇总公式","component":"hc-input-compute","options":{"tip":"为空时默认按照统计方式汇总","returnFormat":"content","tabs_list":["function_list","field_list"],"computeService":{"domain":"base.report","need_check":false}}},{"key":"avg_expression","label":"平均汇总公式","component":"hc-input-compute","options":{"tip":"为空时默认按照平均汇总","returnFormat":"content","tabs_list":["function_list","field_list"],"computeService":{"domain":"base.report","need_check":false}}},{"key":"align","label":"对齐","component":"hc-input-radio","options":{"singleLine":true,"width":"col-12","items_inline":true,"list":[{"name":"居左","value":"left"},{"name":"居中","value":"center"},{"name":"居右","value":"right"}]}},{"key":"width","label":"宽度","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入宽度","required":false,"data_type":"number"}},{"key":"precision","label":"数据精度","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入保留小数位数","required":false,"data_type":"number"}},{"key":"format","label":"格式化数据","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","items_inline":true,"list":[{"name":"千分位符","value":"numberFormat"},{"name":"货币","value":"currency"}]}}]}')},"2R/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("o+MX"),o=n.n(i),a=n("5PDf"),l=n.n(a),r=n("RXMP"),c=n.n(r),s=n("pPxq"),d=n.n(s),u=n("WxoT"),_=n.n(u),p=n("mnMc"),m=n.n(p),f=n("eLKs"),h=n.n(f),g=n("OBge"),v=n.n(g),b=n("mrSG"),y=n("wTxN"),w=n("VxaH"),x=n("8Auy"),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(b.d)(t,e),t.prototype.initFormBefore=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return this.form_meta={fields:angular.copy(y.fields),groups:angular.copy(y.groups),tip:y.tip},[4,this.fetchExtraTemplateMeta(this.setting_panel_data.base_template||"")];case 1:return e.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(b.c)(this,void 0,v.a,(function(){var e,t,n;return Object(b.e)(this,(function(i){var o,a,l,r,c;switch(i.label){case 0:return e=this,(t=this.form_meta.fields).getKey("data").options.mask=h()(o=this.dataBlockMask).call(o,this),t.getKey("data").options.onClick=h()(a=this.dataBlockSetting).call(a,this),t.getKey("base_template").options.changeValidate=h()(l=this.validateChartTypeChange).call(l,this),t.getKey("base_template").options.change=h()(r=this.onChartTypeChange).call(r,this),t.getKey("chart").options.change=h()(c=this.onChartTplChange).call(c,this),t.getKey("chart")?(n=t.getKey("chart").options,[4,e.getTemplateRefer()]):[3,2];case 1:n.refer_data=i.sent(),i.label=2;case 2:return[2,t]}}))}))},t.prototype.getGroupMeta=function(){return Object(b.c)(this,void 0,v.a,(function(){return Object(b.e)(this,(function(e){return[2,this.form_meta.groups]}))}))},t.prototype.validateTemplateData=function(){var e;return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){var n;return m()(n=["custom","",null,void 0]).call(n,this.setting_panel_data.base_template)||(null===(e=this.setting_panel_data.data)||void 0===e?void 0:e.getKey("main"))||this.rootScope.show_warning("请前往数据定义指定'main'数据块"),[2]}))}))},t.prototype.refreshViewModel=function(e){return void 0===e&&(e=null),Object(b.c)(this,void 0,v.a,(function(){var t;return Object(b.e)(this,(function(n){switch(n.label){case 0:return e=e||this.setting_panel_data.chart,this.validateTemplateData(),e?[4,this.dataService.callHcmOpenApi("flex.template.calc",{template:e,block_info:this.setting_panel_data.data,params:this.options.context_data,base_:this.setting_panel_data.base_template})]:[2];case 1:return t=n.sent(),t=JSON.parse(_()(t),(function(e,t){return t&&"string"==typeof t&&d()(t).call(t,"function")?"="+t:t})),t=x.a.jsonEval(t,{SCOPE:this},{},!0,!1),this.parent.preview_model=t,this.parent.validate_update=!0,[2]}}))}))},t.prototype.validateChartTypeChange=function(e,t){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.hcDialog.confirm("切换模版将覆盖现图表定义,是否确认?")];case 1:return e.sent()?[2,!0]:[2,!1]}}))}))},t.prototype.onChartTypeChange=function(e,t){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.fetchBaseTemplate(t)];case 1:return e.sent(),[4,this.fetchExtraTemplateMeta(t)];case 2:return e.sent(),[4,this.initForm()];case 3:return e.sent(),[4,this.refreshViewModel()];case 4:return e.sent(),[2]}}))}))},t.prototype.onChartTplChange=function(e,t){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.refreshViewModel(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.adjustChartData=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){return[2]}))}))},t.prototype.fetchBaseTemplate=function(e){return Object(b.c)(this,void 0,void 0,(function(){var t;return Object(b.e)(this,(function(n){switch(n.label){case 0:return e?(t=this.setting_panel_data,[4,this.dataService.callHcmOpenApi("flex.template.base.template",{base_:e})]):[2];case 1:return t.chart=n.sent(),[2]}}))}))},t.prototype.fetchExtraTemplateMeta=function(e){var t;return Object(b.c)(this,void 0,void 0,(function(){var n,i;return Object(b.e)(this,(function(a){var r,s;switch(a.label){case 0:return e?(n=this,[4,this.dataService.callHcmOpenApi("flex.template.base.form.meta",{base_:e})]):[2];case 1:return i=a.sent(),null===(t=i.fields)||void 0===t||c()(t).call(t,(function(e){var t,i;e.options=x.a.jsonEval(e.options,{}),e.options.change=h()(t=n.onExtraChartOptionChange).call(t,n);var o=n.setting_panel_data[e.key]||e.options.default;if(!e.options.readOnly&&!m()(i=[null,void 0]).call(i,o)){var a=l()(n).call(n,"getJSON")(e.options.dataPath,n.setting_panel_data.chart);n.setting_panel_data[e.key]=a||o,a||n.onExtraChartOptionChange(e,o)}})),this.form_meta.fields=o()(r=y.fields).call(r,i.fields||[]),this.form_meta.groups=o()(s=y.groups).call(s,i.groups||[]),[2]}}))}))},t.prototype.onExtraChartOptionChange=function(e,t){return Object(b.c)(this,void 0,void 0,(function(){var n;return Object(b.e)(this,(function(i){var o,a;return(n=e.options).dataFormat&&"function"==typeof n.dataFormat&&(t=n.dataFormat(t)),l()(o=this).call(o,"setJSON")(n.dataPath,this.setting_panel_data.chart,t),l()(a=this).call(a,"setJSON")(n.dataPath,this.parent.preview_model,t),this.parent.validate_update=!0,[2]}))}))},t.prototype.afterDataBlockSetting=function(e){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return this.adjustChartData(),[4,this.initForm()];case 1:return e.sent(),[4,this.refreshViewModel()];case 2:return e.sent(),[2]}}))}))},t}(w.a)},"2cJo":function(e,t,n){"use strict";n("rB9j"),n("Rm1S"),n("EnZy");var i=n("WxoT"),o=n.n(i),a=n("mrSG"),l=n("CoJ3"),r=n("1GJp"),c=n("WT49"),s=n.n(c);n("/8mQ");l.a.controller("HCMMetaEditorCtrl",["$scope","$controller","$hcForm","templateService","$hcDialog","dataService","CompanyMetaService","MetaEditorService",function(e,t,n,i,l,c,s,d){var u=this;t(r.a.controller,{$scope:e});e.$dialog.title("元数据编辑："+e.params.meta_key),e.getMode=function(){var t=e.params.meta_key.split(".");return t.length>1?t.pop():""},e.loadData=function(t,n){s.getMetaSign(t||e.params.meta_key,n||e.params.type).then((function(t){e.pre_version_md5=t.sign;var n=e.params.is_visualization&&e.params.meta_key===e.params.origin_meta_key?o()(e.params.visualization_meta):t.meta;e.editor.setValue(n,-1),e.format()}))},e.submitExec=function(){return Object(a.c)(u,void 0,void 0,(function(){var t,n,i;return Object(a.e)(this,(function(o){switch(o.label){case 0:return t=e.editor.getValue(),[4,d.validate_and_fix_meta((e.params.meta_key.match(/\.meta(.*)+\.json/)||[])[1]?e.params.biz_type:"model",t,e.params.meta_key)];case 1:return(n=o.sent())?(e.editor.setValue(n),[2]):[4,s.setMetaWithModifier(e.params.meta_key,t,e.pre_version_md5)];case 2:return i=o.sent(),e.$dialog.resolve_data(i),e.$dialog.dialog_close(),[2]}}))}))}}]),t.a={controller:"HCMMetaEditorCtrl",title:"元数据编辑",template:s.a}},"2eFn":function(e,t,n){e.exports='<div class="meta-visualization hcm-nav-content" data-ng-init="$ctrl.initBase()">\n    <div class="available-fields-container">\n        <div class="fields-tabs">\n            <div class="tab">可选字段</div>\n            <div class="operate-list">\n                <div class="{{(operate.icon|valueToFunc)()}} operate-icon icon"\n                     data-ng-repeat="operate in $ctrl.operate_list track by $index"\n                     data-ng-click="operate.func()"\n                     hc-title="{{(operate.label|valueToFunc)()}}"\n                     options="{}"></div>\n            </div>\n        </div>\n        <hc-dataset model="$ctrl.availableFieldsModel"\n                           data-ng-if="$ctrl.availableFieldsModel.data&&$ctrl.current_panel.key!==\'column_defs\'"></hc-dataset>\n        <hc-sortable-tree model="$ctrl.ableFieldsTree"\n                          ng-show="$ctrl.current_panel.key===\'column_defs\'"></hc-sortable-tree>\n    </div>\n    <div class="selected-fields-container">\n        <div class="fields-tabs">\n            <hc-super-selector ng-model="$ctrl.current_panel_key" options="$ctrl.tabOptions"\n                               data-ng-if="$ctrl.tabOptions"></hc-super-selector>\n            <div class="operate-list">\n                <div class="icon-hcm-add operate-icon icon"\n                     data-ng-repeat="operate in $ctrl.setting_operate_list track by $index"\n                     data-ng-show="!(operate.hide|valueToFunc)()"\n                     data-ng-click="operate.func($event)" hc-title="添加计算字段" options="{}" style=""></div>\n            </div>\n        </div>\n        <div class="selected-fields-content">\n            <hc-query-field model="$ctrl.current_panel.model"\n                            data-ng-show="$ctrl.current_panel.model&&$ctrl.current_panel.key!==\'column_defs\'">\n            </hc-query-field>\n            <hc-sortable-tree model="$ctrl.sortTree" class="column-defs-tree"\n                              ng-show="$ctrl.current_panel.key===\'column_defs\'"></hc-sortable-tree>\n        </div>\n    </div>\n    <div class="hcm-content flex">\n        <div class="hcm-content-title" data-ng-if="!selector_flag">\n            <div class="text">\n                <span class="text-name">{{$ctrl.meta_info.description}}</span>\n                <span class="text-name dataset-name" data-ng-if="dataset">\n                        {{dataset.name}}\n                    <span class="icon {{mode===\'setting\'&&\'icon-hcm-forwarding\'}}"\n                          data-ng-if="$ctrl.dataset"\n                          title="前往数据集配置"\n                          data-ng-click="$ctrl.goDatasetSetting()"></span>\n                    </span>\n            </div>\n\n            <hc-list-btn ng-if="client===\'pc\'" model="$ctrl.list_btn"></hc-list-btn>\n        </div>\n\n        <div data-ng-show="client===\'pc\'&&!print_view" class="hcm-content-indicator operate-banner flex flex-start">\n            <hc-query model=\'advance_query\' ng-if="!model_meta.advance_query.close"></hc-query>\n        </div>\n        '+n("iJxR")+"\n        "+n("IGAs")+"\n    </div>\n</div>\n"},"2eYA":function(e,t,n){"use strict";var i=n("a0dU"),o=n.n(i),a=n("5PDf"),l=n.n(a),r=(n("ls82"),n("SPx3")),c=n.n(r),s=n("Vi3r"),d=n.n(s),u=n("526F"),_=n.n(u),p=(n("srGB"),n("PX3v")),m=n("UAnq"),f=n.n(m),h=n("y/Cr"),g=(n("mqRb"),n("1hbj"));window.app.controller("HCCategoryListSelectorPanelCtrl",["$controller","BaseCRUDService","commonPanelService","$scope","$q","$hcDialog","$state","$filter",function(e,t,n,i,a,r,s,u){var m,f;i.selector_flag=!0,i.selectorModel=i.params.model||i.params.selectorModel;var v=(null===(m=i.params)||void 0===m?void 0:m.selectorObject)?t.getBaseService(i.params.selectorObject):t.getModelService(i.selectorModel);s.params.page_size=null,i.page_size=i.params.page_size,e(h.a,{$scope:i,CRUDService:v,InfoDialog:(null===(f=i.params)||void 0===f?void 0:f.selectorObject)?Object(g.a)(void 0,void 0,i.params.selectorObject):Object(g.a)(i.selectorModel)}),i.params.dialogTitle?i.setTitle=function(){i.$dialog.title(i.params.dialogTitle)}:i.setTitle=function(){},i.setRowSelector=function(){},i.initAfter=function(){var e;2===i.params.selectorType&&(i.list_model.tree_list=!0),i.list_model.$setRowSelector(null!==(e=i.params.selectorType)&&void 0!==e?e:1),i.list_model.selector_flag=!0,i.params.originObject&&(2===i.params.selectorType?i.list_model.selected_items=i.params.originObject:i.list_model.selected_item=i.params.originObject)},i.getFilterDict=function(){var e=i.params.filter_dict||{};return e=i.funcParse(angular.isFunction(e)?e():e)},i.getInitData=function(){var e={};return i.category_id&&(e[i.category_meta.key]=i.category_id),_()(e,i.params.init_data)},i.getOuterAdvanceParams=function(){var e;return{default_filter_dict:u("valueToFunc")(null===(e=i.params)||void 0===e?void 0:e.advance_filter_dict)()}},i.getModelMetaExtendParams=function(){var e,t;return d()((null===(e=i.params)||void 0===e||null===(t=e.alter)||void 0===t?void 0:t.modelMetaExtendParams)||(i.params.meta_params?[i.params.meta_params]:[]))},i.setState=function(){},i.defaultAction=function(){var e=c()(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l()(n=i.list_btn_model.actions).call(n,(function(e){return e.default})),!("mobile"===i.client&&!i.list_model.select_status&&a.length>0||a.length>0&&"selector"===a[0].type)){e.next=8;break}return e.next=4,i.parseAction(a[0],t);case 4:s=e.sent,(null===(r=a[0])||void 0===r?void 0:r.after_func)&&(null===(c=a[0])||void 0===c||c.after_func(s)),e.next=9;break;case 8:i.list_model.selectItem(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.$dialog.operates(n.getDialogOperates(i)),i.$dialog.close=function(){i.is_data_changed&&i.$dialog.resolve_data(),i.$dialog.dialog_close()},i.getMetaState=function(){return i.meta_state||i.params.state||"categoryListSelector"},i.getQueryStr=function(){return i.params.query_str?i.params.query_str:!((i.model_meta||{}).advance_query||{}).close&&(i.advance_query||{}).isAdvance?i.advance_query.trans_query_str:null},i.$watch("list_btn_model.actions",(function(){i.list_btn_model&&i.list_btn_model.actions.length&&i.$dialog.operates(n.getEnabledActions(i))})),i.getInfoAlterParam=function(){return{meta:i.list_model.columns,model:i.model,state:i.params.selector_state}},i.SelectedInfo=function(){r.getDialog(p.a).show({mode:"edit",data:i.list_model.selected_items,alter:i.getInfoAlterParam()}).then((function(e){i.list_model.selected_items=angular.copy(e),i.list_model.$refreshData()}))}}]),t.a={controller:"HCCategoryListSelectorPanelCtrl",template:f.a,title:"选择器",name:"category-list-selector"}},"2kE+":function(e,t){e.exports='<div class="input_interval">\n    <hc-input-number class="single_line_component" ng-model="model.min_value" options="options.min_demand_options" ng-if="options.min_demand_component === \'hc-input-number\'"></hc-input-number>\n    <hc-input-number-super class="single_line_component" ng-model="model.min_value" options="options.min_demand_options" ng-if="options.min_demand_component === \'hc-input-number-super\'"></hc-input-number-super>\n    <hc-super-selector class="single_line_component" ng-model="model.min_value" options="options.min_demand_options" ng-if="options.min_demand_component === \'hc-super-selector\'"></hc-super-selector>\n    <hc-input-datetime class="single_line_component" ng-model="model.min_value" options="options.min_demand_options" ng-if="options.min_demand_component === \'hc-input-datetime\'"></hc-input-datetime>\n    <hc-input class="single_line_component" ng-model="model.min_value" options="options" ng-if="!options.min_demand_component"></hc-input>\n    <div class="single_line_center">至</div>\n    <hc-input-number class="single_line_component" ng-model="model.max_value" options="options.max_demand_options" ng-if="options.max_demand_component === \'hc-input-number\'"></hc-input-number>\n    <hc-input-number-super class="single_line_component" ng-model="model.max_value" options="options.max_demand_options" ng-if="options.max_demand_component === \'hc-input-number-super\'"></hc-input-number-super>\n    <hc-super-selector class="single_line_component" ng-model="model.max_value" options="options.max_demand_options" ng-if="options.max_demand_component === \'hc-super-selector\'"></hc-super-selector>\n    <hc-input-datetime class="single_line_component" ng-model="model.max_value" options="options.max_demand_options" ng-if="options.min_demand_component === \'hc-input-datetime\'"></hc-input-datetime>\n    <hc-input class="single_line_component" ng-model="model.max_value" options="options" ng-if="!options.min_demand_component"></hc-input>\n</div>\n'},"2u0U":function(e,t){e.exports='<div class="common-meida-view" ng-init="$ctrl.init()">\n    <video class="media-video" controls autoplay controlslist="nodownload" ng-src="{{$ctrl.src}}" ng-if="$ctrl.src"></video>\n</div>'},"30Yt":function(e,t){e.exports='<div class="hc-list-resizer" ng-if="list_config.header.fold">\n    <hc-resizer direction="horizontal"\n                undraggable="true"\n                start-callback="resizeStart" end-callback="resizeEnd">\n        <a class="arrow-icon" hc-title="{{header_expanded ? \'收起\' : \'展开\'}}" options="{mode: \'tip\', direction: \'row\'}">\n            <span class="left-bar"></span>\n            <span class="right-bar"></span>\n        </a>\n    </hc-resizer>\n</div>'},"36qD":function(e,t,n){"use strict";n("mwol");var i=n("WJU/"),o=n.n(i);n("8nBp");window.app.controller("HCMCRUDImportCtrl",["$scope","HCMCRUDImpExpService",function(e,t){e.init=function(){e.category=e.params.category,e.category_name=e.params.category_name,e.params=e.params.params},e.$dialog.operates([{key:"back",label:"返回",func:function(){e.$dialog.resolve_data(),e.$dialog.check_close()}}]),e.download_template=function(){t.dynamic_download_template(e.category,e.show_tip,e.params.is_from_config,e.params.extend_property.extra_property,e.params.file_name)},e.download=function(){var n;t.download_report(e.category,e.show_tip,null===(n=e.params)||void 0===n?void 0:n.report_name)},e.show_tip=function(t){e.show_warning(t)},e.operation=function(n){var i,o;e.params.is_sublist&&(null===(i=e.params)||void 0===i?void 0:i.mediately)?t.subListMediateOperation(n,e.category,e.category_name,e.params).then((function(t){e.params.callback(t)})):e.params.is_sublist&&!(null===(o=e.params)||void 0===o?void 0:o.mediately)?t.subListOperation(n,e.category,e.category_name,e.params).then((function(t){e.params.callback(t)})):t.operation(n,e.category,e.category_name,e.params)}}]),t.a={controller:"HCMCRUDImportCtrl",template:o.a}},"3bjL":function(e,t,n){"use strict";n("mwol");var i=n("2M/t"),o=n.n(i);n("4Hgq");window.app.controller("CRUDImpExpTipCtrl",["$scope","$rootScope","HCMCRUDImpExpService","$hcDialog",function(e,t,n){e.init=function(){e.category=e.params.category,e.task_running=!0,e.title=e.params.title||"数据"+e.tip,e.file_name=e.params.file_name||e.title+".xlsx",e.data=[];var t="关闭";e.params.is_sub_list&&(t="刷新数据"),e.get_data(),e.$dialog.title(e.title).operates([{label:t,func:e.close,default:!1,right:!0}])},e.get_data=function(){n.getImpInfo(encodeURIComponent(e.category)).then((function(t){e.task_running=!1,e.data.push(t||"导出完成"),e.params.file_name&&n.downLoad(e.file_name,e.category)}),(function(t){e.task_running=!1,e.data.push(t||"导出失败")}),(function(t){e.data.push(t)}))},e.close=function(){e.$dialog.resolve_data("close"),e.$dialog.dialog_close()}}]),t.a={controller:"CRUDImpExpTipCtrl",template:o.a}},"3pjH":function(e,t){e.exports='<div class="component-container"\n     ng-init="init();hover=false"\n     ng-click="onClick($event)"\n     ng-mouseover="hover=true"\n     ng-mouseleave="hover=false"\n     ng-if="options.type !== \'outside\'"\n>\n    <div class=\'component-input-inner\'\n         ng-bind-html="(selector_label||((options.readOnly|valueToFunc)()?\'\':options.placeholder)) | toTrusted"\n         ng-class=\'{placeholder:[null,undefined].includes(model)}\'\n         ng-disabled=\'options.readOnly\'\n         ng-style="(options.styles|valueToFunc)(model)"\n         hc-title="{{selector_label}}"\n         options="{mode: \'tip\', showOnOverflow: true}"></div>\n\n    <div ng-show="!(options.readOnly|valueToFunc)()"\n         ng-click="([null,undefined].includes(model)||options.no_delete)\n             ? onClick($event)\n             : del($event)"\n         class="input-icon"\n         ng-class="(![null,undefined].includes(model) && (client===\'mobile\'||hover) && !options.no_delete)\n             ?\'icon-hcm-delete\'\n             : options.icon\n                ?options.icon\n                :client===\'pc\'\n                    ?\'icon-hcm-screening\'\n                    :\'icon-hcm-arrow-right\'"></div>\n</div>\n\n<div class="outside-component-container"\n     ng-init="init();hover=false"\n     ng-mouseover="hover=true"\n     ng-mouseleave="hover=false"\n     ng-if="options.type === \'outside\'"\n>\n    <outside-select-panel options="panelOptions" ng-if="panelOptions"></outside-select-panel>\n</div>\n\n'},"3tLH":function(e,t){e.exports='<div class=\'article-item\' ng-class="{\'recruit\':\'article-recruit\'}[item.type]" ng-hide="item.enabled!=1">\n    <div class="article-content " ng-class="{\'article-content-left\':client==\'mobile\'&&!item.is_owner,\n    \'article-content-right\':client==\'mobile\'&&item.is_owner}">\n        \x3c!--头部--\x3e\n        <div class="header" ng-init="arr=[{\'num\':1,\'name\':\'头条\'},{\'num\':2,\'name\':\'推荐\'},{\'num\':3,\'name\':\'置顶\'}]">\n            <div class="article-photo" ng-class="{true:\'article-photo-right\'}[item.is_owner]">\n                <img ng-src="{{item.owner.photo|hcPhoto:36}}">\n            </div>\n            <div class="name" ng-if="!item.is_owner">\n                <span class="owner tg">{{item.owner.name}}</span>\n                <span class="to-top" ng-if="item.order_num"\n                      ng-repeat="u in arr|filter:{\'num\':item.order_num}">[{{u.name}}]</span>\n                <div class="to tg" ng-if="scene==\'single\' && item.feed.biz_id && item.feed.biz_id.indexOf(\'recruit\')<0">\n                    <div class="to-arrow">\n                        <svg viewBox="0 0 48 48" height="100%" width="100%">\n                            <path d="M20 14l10 10-10 10z"></path>\n                        </svg>\n                    </div>\n                    <feed-biz-object-mini biz-id="item.feed.biz_id" biz-name="item.feed.biz_name"\n                                          biz-state="item.feed.biz_state"></feed-biz-object-mini>\n                </div>\n            </div>\n            <div class="name" ng-if="item.is_owner">\n                <span class="owner tg">{{\'oneself\'|translate}}</span>\n            </div>\n            <div class="inner-lock" ng-if="item.public==1">\n                {{\'perf_private\'|translate}}\n            </div>\n            <div class="date">\n                <div>{{item.date|timeStampToDate|beforeCurrentTime}}</div>\n            </div>\n            <div ng-if="item.is_owner || isAdmin" class="delete icon-hcm-trash" ng-click="article_delete()"></div>\n            <div ng-if="(item.is_feed_owner || isAdmin)&&!item.order_num&&item.feed.biz_id.indexOf(\'group\')>=0"\n                 class="top icon-hcm-upload" ng-click="article_top()"></div>\n            <div ng-if="(item.is_feed_owner || isAdmin)&&item.order_num&&item.feed.biz_id.indexOf(\'group\')>=0"\n                 class="top icon-hcm-download" ng-click="article_cancleTop()"></div>\n            <div class="operate-recruit-delete" ng-if="isRecruitAdmin&&isRecruitActicle"\n                 ng-click="article_delete()">\n                <span class="icon icon-hcm-trash"></span>\n            </div>\n        </div>\n        \x3c!--看板发送者的所属部门跟岗位--\x3e\n        <div></div>\n        \x3c!--文本内容--\x3e\n        <div class="content con-text" ng-show="item.content" ng-click="go_article()">\n            <span ng-bind-html="item.content|toTrusted"></span>\n        </div>\n        \x3c!--展示图片--\x3e\n        <div class="imgs" ng-show="item.images.length>0">\n            <img ng-repeat="_img in item.images track by $index"\n                 ng-src="{{_img|hcImage:\'200,200\'}}"\n                 ng-click="show_img($index)" ng-class="item.images.length>1?\'img-multi\':\'img-1\'">\n        </div>\n        \x3c!--看板附加内容展示--\x3e\n        <div class="attachment" ng-show="item.attachments.length>0">\n            <dynamic-article-attachment item="_att.attachment_class"\n                                        object-id="_att.attachment_id"\n                                        object-data="_att.attachment_data"\n                                        approve-record="approveRecord"\n                                        public="item.public"\n                                        ng-repeat="_att in item.attachments"></dynamic-article-attachment>\n        </div>\n        \x3c!--看板操作--\x3e\n        <div class="operate">\n            <div class="date">\n                <div>{{item.date|timeStampToDate|beforeCurrentTime}}</div>\n            </div>\n            <div class="operate-like oper-item" ng-if="(item.feed.need_like==true)" ng-click="article_like()"\n                 ng-class="{\'operated\':item.likes.is_liked}">\n                <span class="icon icon-hcm-love-solid"></span>\n                <span class="content" ng-show="item.likes.list.length">{{item.likes.list.length}}</span>\n\n            </div>\n            <div class="operate-comment oper-item" ng-click="article_comment()">\n                <span class="icon icon-hcm-chat"></span>\n            </div>\n        </div>\n        \x3c!--看板评论--\x3e\n        <div class="article-comments"\n             ng-show="scene!=\'single\' &&(item.comments.list.length>0 || item.likes.list.length>0)">\n            <div class="likes comment-item" ng-show="item.likes.list.length>0">\n                <span class="icon-hcm-love icon"></span>\n                <span class="content">&nbsp;\n                    <span ng-repeat="_like in like_list track by $index" class="blue tg">&nbsp;{{_like.name}}&nbsp;</span>\n                    <span class="blue tg" ng-if="!need_extend"\n                          ng-click="extend()">{{\'etc_person\'|translate}}{{item.likes.list.length}}{{\'etc_person_man\'|translate}}</span>\n                    </span>\n\n            </div>\n            <div ng-repeat="_c in item.comments.list|orderBy :\'date\':desc track by _c.id" class="comment-item tg"\n                 ng-click="comment_click(_c)">\n                <span class="comment-name">{{_c.logger.name}}</span>\n                <span ng-if="_c.reply_to.id">\n                    <span class="gray">&nbsp;{{\'perf_reply\'|translate}}&nbsp;</span>\n                    <span class="comment-name tg">{{_c.reply_to.name}}</span>\n                </span>:\n                <span class=\'article-comment\' ng-bind-html="_c.comment|toTrusted"></span>\n                <span class="article-date">\n                    {{_c.date|timeStampToDate|beforeCurrentTime}}\n                    <span ng-if="item.is_owner || isAdmin" class="delete icon-hcm-trash ng-scope"\n                          ng-click="delete_comment(_c.id, $event)"></span>\n                </span>\n            </div>\n            <div class="comments-more tg" ng-show="item.comments.count>3" ng-click="go_article()">\n                {{\'perf_view_more\'|translate}}{{item.comments.count - 3}}{{\'pageCountUnit\'|translate}}{{\'perf_comment_other\'|translate}}\n            </div>\n        </div>\n    </div>\n\n</div>\n'},"3tSd":function(e,t){e.exports='<div class="hc-breadcrumb">\n    <hc-breadcrumb-item \n        ng-repeat="item in $ctrl.items track by item.id"\n        item="item"\n        ng-class="{\'current\': $index === $ctrl.items.length - 1, \'disabled\': item.disabled}"\n    ></hc-breadcrumb-item>\n</div>'},"44dG":function(e,t){e.exports='<div class="hcm-btn-list" id="hcm-btn" ng-init="init()">\n\x3c!--    一级按钮列表--\x3e\n    <div class="btn-item"\n         ng-class="{left: _action.left}"\n         ng-repeat="_action in model.visible_actions().splice(0,(model.visible_actions().length > model.max? model.max - 1 : model.max)) track by $index"\n         ng-hide="(_action.hide|valueToFunc)()">\n        <button\n            class="{{model.style}}"\n            hcm-key="{{_action.key}}"\n            type="button"\n            ng-class="{\'primary\': highLight(_action),\'secondary\': !highLight(_action)}"\n            ng-disabled="(_action.disabled|valueToFunc)() || _action.debounce_disabled"\n            ng-click="_action.actions? showMoreDialog($event, _action):item_func(_action, $event)">\n            <span class="label" ng-bind-html="(_action.label|valueToFunc)()|toTrusted" ng-hide="_action.count>0"></span>\n            <span class="label" ng-bind="_action.count" ng-hide="_action.count<=0"></span>\n            <span ng-if="_action.actions">&nbsp;\n                <i class="{{(_action.direction===\'up\'||_action.options.direction===\'up\') ?\'icon-hcm-arrow-up-solid\':\'icon-hcm-arrow-down-solid\'}}"></i>\n            </span>\n            \n        </button>\n        \x3c!--        二级按钮菜单--\x3e\n        <div class="drop-down-list"\n             ng-class="{up:_action.direction===\'up\'||_action.options.direction===\'up\'}"\n             ng-if="_action.actions"\n             ng-show="itemIsMoreShow(_action.key)">\n            <div ng-repeat="_action in model.visible_actions(_action.key) track by $index"\n                 ng-hide="(_action.hide|valueToFunc)()">\n                <button class="drop-down-btn-item"\n                        type="button"\n                        ng-disabled="(_action.disabled|valueToFunc)()"\n                        ng-click="item_func(_action)">\n                    {{(_action.label|valueToFunc)()}}\n                    <i ng-if="_action.actions" class="icon-hcm-arrow-right-solid"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    \x3c!--    更多操作--\x3e\n    <div class="btn-item" ng-if="model.visible_actions().length > model.max" id="showMoreBtn">\n        <button class="{{model.style}} secondary"\n                type="button"\n                ng-click="showMoreDialog($event, {\'key\':\'>__more_actions__\'})">\n            <span>{{\'more_operate\'|translate}}</span>\n            <i ng-class="direction === \'up\'?\'icon-hcm-arrow-up-solid\':\'icon-hcm-arrow-down-solid\'"></i>\n        </button>\n    </div>\n</div>\n'},"467A":function(e,t){e.exports='<div class="article">\n    <header class="head">\n        <h1 class="title">{{$ctrl.model.title}}</h1>\n        <div class="time">{{$ctrl.model.create_time}}</div>\n    </header>\n    <section>\n        <div class="article-content">\n            <hc-mark-down ng-model="$ctrl.model.content" options="{mode:\'view\'}"></hc-mark-down>\n        </div>\n    </section>\n    <div class="attachments" ng-if="$ctrl.model.attachments">\n        <div class="attachment" ng-repeat="att in $ctrl.model.attachments">\n            <div class="att-name" ng-click="$ctrl.viewAttachment(att.index, att.att_type)">{{att.name}}</div>\n            <div class="content-box">\n                <div class="icon icon-hcm-download" hc-title="点击下载" ng-click="$ctrl.downloadAttachment(att.index)"></div>\n                \x3c!-- <div class="icon icon-hcm-download" hc-title="点击下载" ng-if="client == \'mobile\'"\n                        ng-click="downloadAttachment(att.index)"></div> --\x3e\n            </div>\n        </div>\n    </div>\n</div>'},"49nm":function(e,t){e.exports='<div class="hc-mini-paging">\n    <button ng-click="onPagingClick(\'previous\')" ng-disabled="model==1">\n        <div class="icon icon-hcm-arrow-left"></div>\n    </button>\n    <div class="paging-tag">第&nbsp;{{model}}&nbsp;页</div>\n    <button ng-class="{\'disable\':paging.current_page >= paging.page_count}"\n         ng-click="onPagingClick(\'next\')">\n        <div class="icon icon-hcm-arrow-right"></div>\n    </button>\n</div>'},"4Yc9":function(e,t){e.exports="<div class='hc-dialog-select' ng-click='!options.readOnly&&!options.operate_type&&show_dialog()'>\n    <input ng-if=\"!options.readOnly||currentValue\" class='component-input-inner'\n           ng-class=\"{'view':!options.operate_type}\"\n           ng-model='$parent.$parent.$parent.$parent.currentValue'\n           placeholder=\"{{options.operate_type?'--请输入--':'--请选择--'}}\"\n           ng-disabled=\"!options.operate_type\" ng-change='editChange()'/>\n    <div ng-if=\"!options.operate_type&&!options.readOnly\" class='icon icon-hcm-delete'\n         ng-click='clear($event)'></div>\n    <div ng-if=\"options.operate_type&&!options.readOnly\" class='icon select icon-hcm-screening'\n         ng-click='show_dialog()'></div>\n</div>"},"4YoY":function(e,t){e.exports='<div class=\'article-item\' ng-class="{\'recruit\':\'article-recruit\'}[item.type]" ng-hide="item.enabled!=1">\n    <div class="article-content " ng-class="{\'article-content-left\':client==\'mobile\'&&!item.is_owner,\n    \'article-content-right\':client==\'mobile\'&&item.is_owner}">\n        \x3c!--头部--\x3e\n        <div class="header" ng-init="arr=[{\'num\':1,\'name\':\'头条\'},{\'num\':2,\'name\':\'推荐\'},{\'num\':3,\'name\':\'置顶\'}]">\n            <div class="article-photo" ng-class="{true:\'article-photo-right\'}[item.is_owner]">\n                <img ng-src="{{item.owner.photo|hcPhoto:36}}">\n            </div>\n            <div class="name" ng-if="!item.is_owner">\n                <span class="owner tg">{{item.owner.name}}</span>\n                <span class="to-top" ng-if="item.order_num"\n                      ng-repeat="u in arr|filter:{\'num\':item.order_num}">[{{u.name}}]</span>\n                <div class="to tg" ng-if="scene==\'single\' && item.feed.biz_id && item.feed.biz_id.indexOf(\'recruit\')<0">\n                    <div class="to-arrow">\n                        <svg viewBox="0 0 48 48" height="100%" width="100%">\n                            <path d="M20 14l10 10-10 10z"></path>\n                        </svg>\n                    </div>\n                    <feed-biz-object-mini biz-id="item.feed.biz_id" biz-name="item.feed.biz_name"\n                                          biz-state="item.feed.biz_state"></feed-biz-object-mini>\n                </div>\n            </div>\n            <div class="name" ng-if="item.is_owner">\n                <span class="owner tg">我</span>\n            </div>\n            <div class="inner-lock" ng-if="item.public==1">\n                私密\n            </div>\n            <div class="date">\n                <div>{{item.date|timeStampToDate|beforeCurrentTime}}</div>\n            </div>\n            <div ng-if="item.is_owner || isAdmin" class="delete icon-hcm-trash" ng-click="article_delete()"></div>\n            <div ng-if="(item.is_feed_owner || isAdmin)&&!item.order_num&&item.feed.biz_id.indexOf(\'group\')>=0"\n                 class="top icon-hcm-upload" ng-click="article_top()"></div>\n            <div ng-if="(item.is_feed_owner || isAdmin)&&item.order_num&&item.feed.biz_id.indexOf(\'group\')>=0"\n                 class="top icon-hcm-download" ng-click="article_cancleTop()"></div>\n            <div class="operate-recruit-delete" ng-if="isRecruitAdmin&&isRecruitActicle"\n                 ng-click="article_delete()">\n                <span class="icon icon-hcm-trash"></span>\n            </div>\n        </div>\n        \x3c!--看板发送者的所属部门跟岗位--\x3e\n        <div></div>\n        \x3c!--文本内容--\x3e\n        <div class="content con-text" ng-show="item.content">\n            <span ng-bind-html="item.content|toTrusted"></span>\n        </div>\n        \x3c!--展示图片--\x3e\n        <div class="imgs" ng-show="item.images.length>0">\n            <img ng-repeat="_img in item.images track by $index"\n                 ng-src="{{_img|hcImage:\'200,200\'}}"\n                 ng-click="show_img($index)" ng-class="item.images.length>1?\'img-multi\':\'img-1\'">\n        </div>\n        \x3c!--看板附加内容展示--\x3e\n        <div class="attachment" ng-show="item.attachments.length>0">\n            <dynamic-article-attachment item="_att.attachment_class"\n                                        object-id="_att.attachment_id"\n                                        object-data="_att.attachment_data"\n                                        approve-record="approveRecord"\n                                        public="item.public"\n                                        ng-repeat="_att in item.attachments"></dynamic-article-attachment>\n        </div>\n        \x3c!--看板操作--\x3e\n        <div class="operate">\n            <div class="date">\n                <div>{{item.date|timeStampToDate|beforeCurrentTime}}</div>\n            </div>\n            <div class="operate-like oper-item" ng-if="(item.feed.need_like==true)" ng-click="article_like()"\n                 ng-class="{\'operated\':item.likes.is_liked}">\n                <span class="icon icon-hcm-love-solid"></span>\n                <span class="content" ng-show="item.likes.list.length">{{item.likes.list.length}}</span>\n\n            </div>\n            <div class="operate-comment oper-item" ng-click="article_comment()">\n                <span class="icon icon-hcm-chat"></span>\n            </div>\n        </div>\n        \x3c!--看板评论--\x3e\n        <div class="article-comments"\n             ng-show="scene!=\'single\' &&(item.comments.list.length>0 || item.likes.list.length>0)">\n            <div class="likes comment-item" ng-show="item.likes.list.length>0">\n                <span class="icon-hcm-love icon"></span>\n                <span class="content">&nbsp;\n                    <span ng-repeat="_like in like_list track by $index" class="blue tg">&nbsp;{{_like.name}}&nbsp;</span>\n                    <span class="blue tg" ng-if="!need_extend"\n                          ng-click="extend()">等{{item.likes.list.length}}人</span>\n                    </span>\n\n            </div>\n            <div ng-repeat="_c in item.comments.list|orderBy :\'date\':desc track by _c.id" class="comment-item tg"\n                 ng-click="comment_click(_c)">\n                <span class="comment-name">{{_c.logger.name}}</span>\n                <span ng-if="_c.reply_to.id">\n                    <span class="gray">&nbsp;回复&nbsp;</span>\n                    <span class="comment-name tg">{{_c.reply_to.name}}</span>\n                </span>:\n                <span class=\'article-comment\' ng-bind-html="_c.comment|toTrusted"></span>\n                <span class="article-date">\n                    {{_c.date|timeStampToDate|beforeCurrentTime}}\n                    <span ng-if="item.is_owner || isAdmin" class="delete icon-hcm-trash ng-scope"\n                          ng-click="delete_comment(_c.id, $event)"></span>\n                </span>\n            </div>\n            <div class="comments-more tg" ng-show="item.comments.count>3" ng-click="go_article()">\n                查看更多{{item.comments.count - 3}}条评论\n            </div>\n        </div>\n    </div>\n</div>\n'},"4eRX":function(e,t,n){"use strict";n("07d7"),n("JfAA");var i=n("WxoT"),o=n.n(i),a=n("RXMP"),l=n.n(a),r=n("guyh"),c=n.n(r);t.a=function(e){return window.md5(o()(function e(t){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i);c()(n).call(n);var o={};return l()(angular).call(angular,n,(function(n){"[object object]"===Object.prototype.toString.call(t[n]).toLowerCase()?o[n]=e(t[n]):o[n]=t[n]})),o}(e)))}},"4imo":function(e,t){e.exports='<div class="expandable-list">\n    <expandable-item\n        ng-repeat="_row in $ctrl.data"\n        ng-init="expandable=$ctrl.getRowExpandable(_row)"\n        prefix="$ctrl.getFieldContent(_row, \'prefix\')"\n        e-title="$ctrl.getFieldContent(_row, \'title\')"\n        body="$ctrl.getFieldContent(_row, \'body\')"\n        description="$ctrl.getFieldContent(_row, \'description\')"\n        extra="$ctrl.getFieldContent(_row, \'extra\')"\n        ng-click="$ctrl.onRowClick(_row, $event)"\n        clickable="!!$ctrl.meta.operate_default">\n        <div ng-if="$ctrl.isValidExpandable(expandable)">\n            <p ng-if="!$ctrl.isArray(expandable)"\n               ng-bind-html="expandable">\n            </p>\n            <expandable-list\n                ng-if="$ctrl.isArray(expandable)"\n                meta="$ctrl.expandable_list_meta"\n                data="expandable">\n            </expandable-list>\n        </div>\n    </expandable-item>\n</div>\n'},"55+V":function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return D}));n("oVuX"),n("sMBO"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA");var i=n("5PDf"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("UtpJ"),c=n.n(r),s=n("RXMP"),d=n.n(s),u=n("M5Mt"),_=n.n(u),p=n("526F"),m=n.n(p),f=n("ZbhI"),h=n.n(f),g=n("eLKs"),v=n.n(g),b=n("mrSG"),y=n("GGvc"),w=n("LB+2"),x=n("1Puc"),k=function(){function e(){}return e.prototype.getAlterOperates=function(){return[]},e}(),$=function(e){function t(t,n,i,o){var a=e.call(this)||this;return a.scope=t,a.rootScope=n,a.hcList=i,a.hcDialog=o,a}return Object(b.d)(t,e),t.prototype.getAlterOperates=function(){var e;return[{label:"新增",func:v()(e=this.editItem).call(e,this),left:!0}]},t.prototype.$onInit=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.initList()];case 1:return e.sent(),[2]}}))}))},t.prototype.getData=function(){return this.scope.params.data},t.prototype.getMeta=function(){return[{key:"key",label:"标识",field:["key"]},{key:"name",label:"名称",field:["name"]}]},t.prototype.getRowOperator=function(){var e;return[{key:"delete",label:"删除",func:v()(e=this.removeItem).call(e,this)}]},t.prototype.getInfoDialog=function(){return y.a},t.prototype.initList=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){var t;return this.list_model=this.hcList.createList().$setColumns(this.getMeta()).$setOperateDefault(v()(t=this.editItem).call(t,this)).$setOperateRow(this.getRowOperator(),200).$setData(this.getData()),[2]}))}))},t.prototype.getInfoOptions=function(){return{}},t.prototype.upItem=function(e){var t,n,i=h()(t=this.list_model.data).call(t,e);i>0&&(n=Object(b.f)([this.list_model.data[i-1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i-1]=n[1],this.list_model.$refreshData())},t.prototype.downItem=function(e){var t,n,i=h()(t=this.list_model.data).call(t,e);i<this.list_model.data.length-1&&(n=Object(b.f)([this.list_model.data[i+1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i+1]=n[1],this.list_model.$refreshData())},t.prototype.editItem=function(e){var t=this,n=this.getInfoDialog();n&&this.hcDialog.getDialog(n).show({data:e,options:this.getInfoOptions()}).then((function(n){e?e=m()(e,n):(t.list_model.data=t.list_model.data||[],t.list_model.data.push(n)),t.list_model.$refreshData()}))},t.prototype.removeItem=function(e){var t=this;this.hcDialog.confirm("确认要删除"+(e.name||e.label)+"吗？").then((function(){var n,i,o=h()(n=t.list_model.data).call(n,e);o>-1&&(_()(i=t.list_model.data).call(i,o,1),t.list_model.$refreshData())}))},t.$inject=["$scope","$rootScope","$hcListNew","$hcDialog"],t}(k),O=function(e){function t(t,n,i,o,a){var l=e.call(this)||this;return l.scope=t,l.metaVisService=n,l.hcListNew=i,l.hcSimpleTree=o,l.hcDialog=a,l.options={},l.reIndexList=function(e,t){void 0===t&&(t="sequence"),d()(e).call(e,(function(e,n){e[t]=10*(n+1)}))},l.appendItem=function(e){return Object(b.c)(l,void 0,void 0,(function(){var t,n;return Object(b.e)(this,(function(i){switch(i.label){case 0:return e.is_leaf?(n=(t=this.list_model.data).push,[4,this.getItemByNode(e)]):[3,2];case 1:n.apply(t,[i.sent()]),this.reIndexList(this.list_model.data),this.list_model.$refreshData(),i.label=2;case 2:return[2]}}))}))},l.upItem=function(e){var t,n,i=h()(t=l.list_model.data).call(t,e);i>0&&(n=Object(b.f)([l.list_model.data[i-1],l.list_model.data[i]],2),l.list_model.data[i]=n[0],l.list_model.data[i-1]=n[1],l.reIndexList(l.list_model.data),l.list_model.$refreshData())},l.downItem=function(e){var t,n,i=h()(t=l.list_model.data).call(t,e);i<l.list_model.data.length-1&&(n=Object(b.f)([l.list_model.data[i+1],l.list_model.data[i]],2),l.list_model.data[i]=n[0],l.list_model.data[i+1]=n[1],l.reIndexList(l.list_model.data),l.list_model.$refreshData())},l.removeItem=function(e){var t,n,i=h()(t=l.list_model.data).call(t,e);i>-1&&(_()(n=l.list_model.data).call(n,i,1),l.reIndexList(l.list_model.data),l.list_model.$refreshData())},l}return Object(b.d)(t,e),t.prototype.$onInit=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return this.data=this.scope.params.data,[4,this.initOptions()];case 1:return e.sent(),[4,this.initPage()];case 2:return e.sent(),[2]}}))}))},t.prototype.initOptions=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){return this.options.model_relation=this.scope.params.model_relation,[2]}))}))},t.prototype.initPage=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.initTree()];case 1:return e.sent(),[4,this.initList()];case 2:return e.sent(),[2]}}))}))},t.prototype.initTree=function(){return Object(b.c)(this,void 0,void 0,(function(){var e=this;return Object(b.e)(this,(function(t){var n;return this.tree_model=this.hcSimpleTree.createTree((function(t){return Object(b.c)(e,void 0,void 0,(function(){return Object(b.e)(this,(function(e){switch(e.label){case 0:return[4,this.metaVisService.getTreeLoaderByModelRelation(t,this.options.model_relation)];case 1:return[2,e.sent()]}}))}))}),{}),this.tree_model.$setDblClick(v()(n=this.appendItem).call(n,this)),this.tree_model.$initTree(),[2]}))}))},t.prototype.initList=function(){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){var t;return this.list_model=this.hcListNew.createList().$setColumns(this.getListMeta()).$setOperateDefault(v()(t=this.editItem).call(t,this)).$setOperateRow(this.getListOperate(),200).$setData(this.getData()),[2]}))}))},t.prototype.getListMeta=function(){return[{key:"label",label:"显示",field:["label"]},{key:"key",label:"标识",field:["key"]}]},t.prototype.getListOperate=function(){return[{key:"up",icon:"icon-hcm-arrow-cross-up-solid",desc:"上移",func:this.upItem},{key:"down",icon:"icon-hcm-arrow-cross-down-solid",desc:"下移",func:this.downItem},{key:"remove",icon:"icon-hcm-delete-circle-solid",desc:"移除",func:this.removeItem}]},t.prototype.getData=function(){return this.scope.params.data},t.prototype._getRandomStr=function(e){var t;return void 0===e&&(e=4),c()(t=Math.random().toString(36)).call(t,0-e)},t.prototype.getItemByNode=function(e){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){return[2]}))}))},t.prototype.getInfoDialog=function(){return null},t.prototype.editItem=function(e){var t=this;this.hcDialog.getDialog(this.getInfoDialog()).show({data:e}).then((function(n){e?e=m()(e,n):(t.list_model.data=t.list_model.data||[],t.list_model.data.push(n)),t.list_model.$refreshData()}))},t.prototype.search_key_press=function(e){13!==(null==e?void 0:e.keycode)&&"Enter"!==(null==e?void 0:e.code)||this.search_click()},t.prototype.search_click=function(){this.tree_model.last_keyword!==this.tree_model.keyword&&(this.tree_model.keyword?(this.tree_model.last_keyword=this.tree_model.keyword,this.search_tree()):this.initTree())},t.prototype.search_tree=function(){var e,t=new RegExp(this.tree_model.keyword);this.tree_model.search_data=this.tree_model.search_data||angular.copy(this.tree_model.data),this.tree_model.data=l()(e=angular.copy(this.tree_model.search_data)).call(e,(function(e){var n;return e.expand=!0,e.child=o()(n=angular.copy(e.child)).call(n,(function(e){return e.layer=1,t.test((null==e?void 0:e.label)||(null==e?void 0:e.name))})),e}))},t.$inject=["$scope","metaVisService","$hcListNew","$hcSimpleTree","$hcDialog"],t}(k),D=function(){function e(e,t,n,i,o){var a,l,r;this.scope=e,this.rootScope=t,this.metaVisService=n,this.hcDialog=i,this.dataService=o,this.sortable_model={sort:!0,animation:150,onSort:v()(a=this.onSort).call(a,this)},this.item_operate=[{icon:"icon-hcm-edit",title:"编辑字段",func:v()(l=this.itemEdit).call(l,this)},{icon:"icon-hcm-trash",title:"清除字段",func:v()(r=this.itemRemove).call(r,this)}]}return e.prototype.getInfoDialog=function(){return y.a},e.prototype.getInfoOptions=function(){return{}},e.prototype.itemRemove=function(e,t){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){var n;switch(e.label){case 0:return _()(n=this.data).call(n,t,1),[4,this.parent.parent.refreshMeta()];case 1:return e.sent(),[4,this.parent.parent.refreshData()];case 2:return e.sent(),[2]}}))}))},e.prototype.itemEdit=function(e,t){var n;return Object(b.c)(this,void 0,void 0,(function(){var t,i,o,a,l,r,c,s,d,u,_,p=this;return Object(b.e)(this,(function(f){switch(f.label){case 0:if(!(null==e?void 0:e.compute))return[3,4];for(t=this,i=-1,o=this.parent.current_domain.dataKey,this.parent.scope.meta_info[o]=angular.copy(this.parent.data[o]),s=0;s<this.parent.scope.meta_info[o].length;s++)this.parent.scope.meta_info[o][s].expression||(this.parent.scope.meta_info[o][s].key="aggr"===o||"stat"===o?this.parent.scope.meta_info[o][s].aggr.field:this.parent.scope.meta_info[o][s].field.join(".")),this.parent.scope.meta_info[o][s].key===e.key&&-1===i&&(i=s);return a={model:null,relations:null},"analyze"!==this.parent.scope.meta_info.data.source.type?[3,2]:[4,this.dataService.callHcmOpenApi("analyze.model.fetch.script",{analyze:this.parent.scope.meta_info.data.source.analyze})];case 1:return a=f.sent(),[3,3];case 2:"meta"===this.parent.scope.meta_info.data.source.type&&(a=this.parent.scope.meta_info.data.source.meta),f.label=3;case 3:return[2,this.hcDialog.getDialog(w.a).params({dataset_meta:{loader:this.parent.baseCRUDService.getModelService("model"===this.parent.scope.meta_info.data.source.type?this.parent.scope.meta_info.data.source.model:a.model).getQueryFields,append_relations:"model"===this.parent.scope.meta_info.data.source.type?null:a.relations},selected_fields:"aggr"!==o?this.parent.scope.meta_info[o]:null,compute_type:{},compute_field:null,meta_type:this.meta_type,need_check:"aggr"!==o,filter_dict:this.parent.scope.getAllFilterDict(),relations:(null===(n=this.parent.scope.meta_info.data.source.meta)||void 0===n?void 0:n.relations)||null,service:this.parent.baseCRUDService.getModelService("model"===this.parent.scope.meta_info.data.source.type?this.parent.scope.meta_info.data.source.model:a.model),data:e}).show().then((function(e){t.parent.refreshList(e,!1,i)}))];case 4:if(null==e?void 0:e.expression){for(l=this,r=-1,c=this.parent.current_domain.dataKey,this.parent.scope.meta_info[c]=angular.copy(this.parent.data[c]),s=0;s<this.parent.scope.meta_info[c].length;s++)this.parent.scope.meta_info[c][s].key===e.key&&-1===r&&(r=s);return(d=angular.copy(x)).getKey("expression").options.computeService={domain:"base.report",getFieldList:function(){return[{key:"selected_fields",name:"列表已选字段",fields:p.parent.scope.meta_info[c]||[]}]}},[2,this.hcDialog.simpleForm("公式字段编辑器",d,e,{size:"large"}).then((function(e){e.field=[e.key],l.parent.refreshList(e,!1,r)}))]}u=this,(_=this.getInfoDialog())&&this.hcDialog.getDialog(_).show({data:e,options:this.getInfoOptions()}).then((function(t){return Object(b.c)(p,void 0,void 0,(function(){return Object(b.e)(this,(function(n){switch(n.label){case 0:return e?e=m()(e,t):u.data.push(t),[4,u.parent.parent.refreshMeta()];case 1:return n.sent(),[4,u.parent.parent.refreshData()];case 2:return n.sent(),[2]}}))}))})),f.label=5;case 5:return[2]}}))}))},e.prototype.onSort=function(e){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return[4,this.parent.parent.refreshMeta()];case 1:return t.sent(),console.log(e),[2]}}))}))},e.prototype.$onInit=function(){this.data=this.scope.params.data,this.parent=this.scope.params.parent},e.prototype.addItemByNode=function(e){return Object(b.c)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return this.data.push(this.getItemByNode(e)),[4,this.parent.parent.refreshMeta()];case 1:return t.sent(),[4,this.parent.parent.refreshData()];case 2:return t.sent(),[2]}}))}))},e.prototype.getItemByNode=function(e){return this.metaVisService.getVisItemByNode(e,this.meta_type)},e.prototype.search_key_press=function(e){13!==(null==e?void 0:e.keycode)&&"Enter"!==(null==e?void 0:e.code)||this.search_click()},e.prototype.search_click=function(){var e,t,n;(null===(e=this.search_model)||void 0===e?void 0:e.keyword)!==(null===(t=this.search_model)||void 0===t?void 0:t.last_keyword)&&((null===(n=this.search_model)||void 0===n?void 0:n.keyword)||this.$onInit(),this.search_model.last_keyword=this.search_model.keyword,this.search_panels())},e.prototype.search_panels=function(){var e;if(this.data){var t=new RegExp(this.search_model.keyword);this.search_model.data=this.search_model.data||angular.copy(this.data),this.data=o()(e=angular.copy(this.search_model.data)).call(e,(function(e){return t.test((null==e?void 0:e.label)||(null==e?void 0:e.name))}))}},e.$inject=["$scope","$rootScope","metaVisService","$hcDialog","dataService"],e}()},"55Hk":function(e,t){e.exports='<div class="hcm-import-style" ng-class="isPage&&\'hcm-import-page-style\'" ng-init="init()">\n    <div class="import-prepare" ng-show="import_status===\'un_import\'">\n        <div class="form-tip" ng-if="imp_tips" ng-show="show_imp_tip">\n            \x3c!-- 导入提示 --\x3e\n            <span class="icon icon-hcm-info-normal"></span>\n            <div class="text-area">\n                <span class="text" ng-repeat="tip in imp_tips">{{tip}}<br></span>\n            </div>\n        </div>\n        <div class="import-method" ng-if="choose_method" ng-show="show_choose_method">\n            \x3c!-- 导入模式选择 --\x3e\n            <div class="method-tip"> {{\'common_hcm_import_choose_method\'|translate}}<span class="warn-text">*</span></div>\n            <div class="radio"><hc-input-radio options="autoOptions" ng-model="import_params.impMethod"></hc-input-radio></div>\n        </div>\n        <div class="import-method" ng-if="empty_selector && import_params.impMethod !== 0"  ng-show="show_empty_selector">\n            \x3c!-- 单元格为空操作 --\x3e\n            <div class="method-tip"> {{\'common_hcm_import_empty_mode\'|translate}}<span class="warn-text">*</span><span class="tip icon icon-hcm-question ng-scope ng-isolate-scope" hc-title="{{empty_tip}}" options="{mode: \'tip\', seconds: 0}"></span></div>\n            <div class="radio-empty"><hc-input-radio options="emptyOptions" ng-model="import_params.empty_mode"></hc-input-radio></div>\n        </div>\n        <div class="business-key" ng-if="show_business_key" ng-show="show_key">\n            \x3c!-- 业务主键 --\x3e\n            <span class="key-label">{{\'common_hcm_import_business_key\'|translate}} </span>\n            <div hc-title="{{business_key_list}}" options="{mode: \'tip\', seconds: 0}" class="key-div"><hc-input ng-model="business_key_list" options="keyOptions" class="key-input"></hc-input></div>\n        </div>\n\x3c!--        <div class="import-template">--\x3e\n\x3c!--            <div class="template-text">--\x3e\n\x3c!--                {{\'common_hcm_import_dialog_please\'|translate}}--\x3e\n\x3c!--                <span class="text-tip" ng-click="downloadTemplate()">--\x3e\n\x3c!--                    {{\'common_hcm_import_dialog_click\'|translate}}</span>--\x3e\n\x3c!--                {{\'common_hcm_import_dialog_download\'|translate}}--\x3e\n\x3c!--            </div> &lt;!&ndash;请点击此处下载导入模版，按格式维护数据后导入&ndash;&gt;--\x3e\n\x3c!--        </div>--\x3e\n        <div class="import-file"\n             ng-disabled="upload_status!==\'un_upload\'"\n             ngf-multiple="false"\n             ngf-select ngf-drop\n             ngf-capture="other"\n             ngf-accept="accept"\n             ngf-change="selectFile($file)"\n        >\n\n            <div class="file-icon icon-hcm-attachment-excel"\n                 ng-class="file_status===\'selected\'?\'selected\':\'un-select\'"\n                 ng-show="upload_status===\'un_upload\'">\n            </div>\n            <div class="progress-bar" ng-show="upload_status!==\'un_upload\'">\n                <div class="number">{{ file_progress }}%</div>\n                <div class="total">\n                    <div class="progress" ng-style="{\'width\':file_progress+\'%\'}"></div>\n                </div>\n            </div>\n            <div class="file-name" ng-show="file[\'name\']">{{ file["name"] }}</div>\n            <div class="upload-failed" ng-show="upload_status===\'upload_failed\'">\n                <span>上传失败，请重新上传<br></span>\n            </div>\n            <div ng-show="file_status===\'un_select\'">\n                <span class="upload-text" ng-show="!show_download_template">{{upload_tip_line_1||\'common_hcm_import_dialog_tip_first_line\'|translate}}</span>\n                <br ng-show="!show_download_template">\n                <span class="upload-text" ng-show="!show_download_template">{{upload_tip_line_2||tips|translate}}</span>\n                <span class="upload-text" ng-show="show_download_template">{{upload_tip_line_1||\'common_hcm_import_dialog_tip_first_line\'|translate}}<br>{{upload_tip_line_2||tips|translate}}</span>\n                <span class="text-tip" ng-show="show_download_template" ng-click="downloadTemplate($event)">\n                    {{\'common_hcm_import_dialog_click\'|translate}}</span>\n            </div> \x3c!--点击选择文件或将文件拖拽至此处进行上传仅支持xlsx、xls和zip格式--\x3e\n        </div>\n    </div>\n    <div class="import-during" ng-show="import_status===\'importing\' || (import_status!==\'un_import\'&&import_status!==\'importing\'&&import_params.imp_type===\'emp\')">\n        <div class="import-message-block" ng-show="show_import_message">\n            <div ng-repeat="item in import_message track by $index" class="import-message-tip">\n                <div class="item-name">{{item}}</div>\n            </div>\n        </div>\n        <div class="import-no-data-block" ng-if="import_message.length == 0" ng-show="show_import_message">\n            <hc-svg options="{icon:\'hcm-no-content\'}" class="no-data-svg"></hc-svg>\n            <div class="desc">获取导入信息中</div>\n        </div>\n        <div class="import-info-btn" ng-show="isPage&&(import_status!==\'un_import\'&&import_status!==\'importing\')">\n            <div class="btn" ng-click="downloadReport()">\n                <span class="desc">下载导入报告</span>\n            </div>\n        </div>\n    </div>\n    <div class="import-post" ng-show="import_status!==\'un_import\'&&import_status!==\'importing\'&&import_params.imp_type!==\'emp\'">\n        <div class="import-result-block" ng-show="show_imp_result">\n            <div class="result-title">导入结果</div>\n            <div class="desc">{{import_result[\'result\'] || "暂无导入结果"}}</div>\n        </div>\n        <div class="import-info-list" ng-show="show_imp_msg">\n            <div class="result-title">导入详情</div>\n            <div ng-repeat="item in import_result.info_list track by $index" class="import-result-tip">\n                <div class="item-name">{{item[\'imp_status\'] + \': \' + item[\'imp_msg\']}}</div>\n            </div>\n            <div class="import-no-data-block" ng-if="import_result.info_list.length == 0">\n                <hc-svg options="{icon:\'hcm-no-content\'}" class="no-data-svg"></hc-svg>\n                <div class="desc">暂无导入详情</div>\n            </div>\n        </div>\n        <div class="import-info-btn" ng-show="isPage">\n            <div class="btn" ng-click="downloadReport()">\n                <span class="desc">下载导入报告</span>\n            </div>\n        </div>\n    </div>\n</div>\n'},"55J8":function(e,t,n){"use strict";n("sMBO"),n("07d7"),n("rB9j"),n("JfAA"),n("Rm1S");var i=n("Kwsy"),o=n.n(i),a=n("526F"),l=n.n(a),r=n("WxoT"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("/FZm"),_=n.n(u),p=n("o+MX"),m=n.n(p),f=n("mnMc"),h=n.n(f),g=n("5PDf"),v=n.n(g),b=n("a0dU"),y=n.n(b),w=n("eLKs"),x=n.n(w),k=n("M5Mt"),O=n.n(k),D=(n("ls82"),n("SPx3")),C=n.n(D);n("lFDD");n("CoJ3").a.controller("SelectorPanelController",["contextService","$scope","$timeout","$filter","superSelectorService","BaseCRUDService","dataService",function(e,t,n,i,a,r,s){t.selector=t.params.selector,t.client=window.client,t.tipOptions={mode:"tip",showOnOverflow:!0,hideArrow:!0,tipStyle:{"max-width":"80%"}},t.search_key={key:null,clear:function(){t.search_key.key="",$(".selector-search input").focus(),navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&window.scroll(0,0)}},t.showMobileSearch=!1,t.SubSelectedId=null,t.multi=t.params.multi,t.originObject=t.params.originObject||(t.multi?[]:null),t.selected_items_meta={},t.init=C()(y.a.mark((function e(){var o,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initInfo(),e.next=3,t.refreshData();case 3:t.showMobileSearch=t.data_count>10,t.params.hasNull&&-1!==(t.data_list[0]||{}).id&&O()(o=t.data_list).call(o,0,0,{name:i("translate")("common_super_selector_empty"),id:-1}),t.params.hasAll&&-1!==(t.data_list[0]||{}).id&&O()(a=t.data_list).call(a,0,0,{name:"全部",id:null}),"pc"===window.client?(t.params.operates||t.multi)&&t.setDialogOperates("all"):t.setDialogOperates(t.params.operates||t.multi?"all":null),n((function(){var e,n=!0;x()(e=$("hc-dialog .selector-list")).call(e,"scroll",function(){var e=C()(y.a.mark((function e(i){var o,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(".selector-search input").blur(),o=i.currentTarget.scrollTop/30,!(n&&o>=t.data_list.length-30)){e.next=7;break}return a=t.data_list.length,e.next=6,t.refreshData();case 6:t.waiting||a!==t.data_list.length||(n=!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),100);case 8:case"end":return e.stop()}}),e)}))),t.initInfo=function(){t.data_list=[],t.page_index=1,t.data_count=null},t.refreshData=function(){if(t.params.hasNull){if(t.data_list.length-1===t.data_count)return}else if(t.data_list.length===t.data_count)return;if(t.refresh)t.waiting=!0;else{if(t.refresh=!0,!t.params.list)return(t.params.individual?t.selector(t.params.selectorOptions):t.selector(t.search_key.key,t.page_index,t.params.selectorOptions)).then((function(e){var n,o,a;(t.page_index++,t.data_list=m()(n=t.data_list).call(n,"list"in e?e.list:e),t.is_append_show=!1,i("valueToFunc")(t.params.appendMode)())&&(!_()(a=t.data_list).call(a,(function(e){return e.name===t.search_key.key}))&&t.search_key.key&&(t.is_append_show=!0));if(t.is_append=_()(o=t.data_list).call(o,(function(e){return e.name===t.search_key.key})),t.data_count=e.count||e.length,t.refresh=!1,t.waiting)return t.waiting=!1,t.refreshData()}));var e=a.parseList(t.params.list,i("valueToFunc")(t.params.selectorFilter)()),n=a.parseList(t.origin_sub_list,i("valueToFunc")(t.params.selectorFilter)());t.search_key.key||t.search_sub_key?t.isSubShow?t.sub_list=v()(n).call(n,(function(e){var n;return h()(n=e.label?e.label:e.name).call(n,t.search_key.key)})):t.data_list=v()(e).call(e,(function(e){var n;return h()(n=(e.label?e.label:e.name).toString()).call(n,t.search_key.key)})):(t.sub_list=n,t.data_list=e),t.refresh=!1}},t.$watch("search_key.key",(function(e){var n;(null!==e&&(t.initInfo(),t.refreshData()),""===e)&&(t.params.hasNull&&-1!==(t.data_list[0]||{}).id&&O()(n=t.data_list).call(n,0,0,{name:i("translate")("common_super_selector_empty"),id:-1}))})),t.isSelected=function(e){if(t.originObject){var n,o=!1,a=function(e,t){var n;return n=i("isValidValue")(e.id)?"id":i("isValidValue")(e.key)?"key":"value",i("isValidValue")(e[n])&&e[n]===t[n]};if(t.multi)d()(n=t.originObject).call(n,(function(n,i){o||(o=a(n,e)),o&&(t.selected_items_meta[n.key||n.id]=i)}));else o=a(t.originObject,e);return o}},t.isSubSelected=function(e){return e.id===t.SubSelectedId},t.isDisabled=function(e){var n;return t.params.multi&&t.params.multi_limit&&!t.isSelected(e)&&((null===(n=t.originObject)||void 0===n?void 0:n.length)||0)>=t.params.multi_limit},t.itemSelect=function(e,n){var i,a,l,r,s,d;if(null===(i=e.list)||void 0===i?void 0:i.length)return t.isSubShow=!t.isSubShow,t.origin_sub_list=JSON.parse(c()(e.list)),t.sub_list=e.list,t.isSubShow?t.SubSelectedId=e.id:t.SubSelectedId=null,a=n.currentTarget,l=a.getBoundingClientRect(),r=l.x+l.width+30,s=l.top,void o()((function(){$("#child-list").css({left:r,top:s})}));(t.sub_list=[],t.origin_sub_list=[],t.SubSelectedId=null,t.multi)?(t.isSelected(e)?O()(d=t.originObject).call(d,t.selected_items_meta[e.key||e.id],1):t.originObject.push(e),t.$dialog.notify_data({originObject:t.originObject.length?t.originObject:null,selected_item:{index:t.selected_items_meta[e.key],data:e}})):(t.originObject=e,t.submit())},t.itemAppend=function(e){t.params.appendApi?s.callHcmOpenApi(t.params.appendApi,{info:i("valueToFunc")(t.params.appendData)(t.search_key.key)}).then((function(e){t.originObject=e,t.submit()})):t.params.selectorModel&&r.getModelService(t.params.selectorModel).createItem(l()({name:t.search_key.key},i("valueToFunc")(t.params.appendData)(t.search_key.key))).then((function(e){t.originObject=e,t.submit()}))},t.selectAll=function(){t.originObject=angular.copy(t.data_list)},t.unSelectAll=function(){t.originObject=[]},t.inverse=function(){var e;t.originObject=v()(e=t.data_list).call(e,(function(e){var n;return!_()(n=t.originObject).call(n,(function(t){return t.hasOwnProperty("name")?t.name===e.name:t.label===e.label}))}))},t.setDialogOperates=function(e){t.default_operate=[{label:i("translate")("Return")||"返回",func:t.close,left:!0}];var n={};t.multi&&("pc"===t.client?t.default_operate[0]={label:i("translate")("Reverse")||"反选",func:t.inverse,hide:function(){return t.params.multi_limit},left:!0}:t.default_operate.push({label:i("translate")("Reverse")||"反选",func:t.inverse,hide:function(){return t.params.multi_limit},left:!0}),t.default_operate.push({label:function(){return t.originObject.length===t.data_list.length||t.params.multi_limit?i("translate")("Reset")||"重置":i("translate")("selectAll")||"全选"},hide:function(){return t.params.multi&&t.params.multi_limit&&0===t.originObject.length},func:function(){t.originObject.length===t.data_list.length||t.params.multi_limit?t.unSelectAll():t.selectAll()}}),n.mobile_outer_btn_count=4),"all"===e&&t.default_operate.push({label:i("translate")("Confirm")||"确定",func:t.submit,default:!0}),t.$dialog.operates(t.default_operate,null,n)},t.submit=function(){t.$dialog.resolve_data(t.originObject),t.$dialog.dialog_close()},t.close=function(){t.$dialog.dialog_close()},t.isKeyHit=function(e,t){var n=_()(t).call(t,(function(t){return t.name===e}));return console.log(n),void 0!==n}}]),t.a={controller:"SelectorPanelController",template:n("nJdR"),mask:!1,height:"pc"===window.client?280:null,maskClose:!0,name:"hc-super-selector"}},"5N6W":function(e,t){e.exports='<div class="hcm-board-background-image" ng-if="$ctrl.model.background_image"\n    style="background-image: url(\'/img?type=image&index={{$ctrl.model.background_image}}\');opacity: {{$ctrl.model.background_image_opacity/100}}">\n</div>\n<div class="hcm-board"\n    ng-class="{\'has-group\': $ctrl.model.has_group, \'use-background-image\': $ctrl.model.background_image}">\n    <div class="lazy-parent">\n        <div class="hc-board-container grid-layout" ng-style="{\n        height:$ctrl.getContainerHeight(_group.components,$ctrl.GRID,$ctrl.LAYOUT_CLIENT, $index)\n    }" ng-repeat="_group in $ctrl.model.groups track by $index" ng-class="{\'fold\': _group.fold}"\n            ng-if="$ctrl.componentLoaded && $ctrl.LAYOUT_CLIENT === \'pc\'" ng-init="groupIndex = $index">\n            <div class="group-title" ng-if="_group.label && !(_group[\'hide\']|valueToFunc)()" key="{{_group.key}}">\n                <span class="arrow" ng-init="_group.fold=_group.default_fold" ng-class="{\n                       \'icon-hcm-arrow-down\': !_group.fold,\n                       \'icon-hcm-arrow-right\': _group.fold\n                    }" ng-click="_group.fold = !_group.fold"></span>\n                <span class="icon" ng-class="_group.icon"></span>\n                <span class="label">{{ _group.label }}</span>\n            </div>\n            <div class=\'hc-board-component-container\' ng-repeat="component in _group.components track by component.key"\n                ng-if="$ctrl.sholdShowBoard(groupIndex, $index)" ng-class="{\'use-background-image\': component.board_background_image,\n                \'resizing\': $ctrl.gridItemList[$index].isResizing,\n                \'draggable-dragging\': $ctrl.gridItemList[$index].isDragging,\n                \'disable-userselect\': $ctrl.gridItemList[$index].isDragging}"\n                ng-style="$ctrl.getAllComponentStyle(component,$ctrl.GRID,$ctrl.LAYOUT_CLIENT,groupIndex,$index)"\n                key="{{component.key}}" ng-hide="(component.hidden|valueToFunc)()&&!$ctrl.isSetup()">\n                <hc-board-component model="component" context="$ctrl.model.context"\n                    context_key="$ctrl.model.context_key"\n                    class="{{$ctrl.model.board_theme_list[groupIndex][$index].themeClass}}"\n                    style="{{$ctrl.model.board_theme_list[groupIndex][$index].themeStyle}}"\n                    ng-style="{background:\'rgba(255,255,255,\' + $ctrl.model.opacity/100 + \')\'}"></hc-board-component>\n                <div class="hc-board-component-setup" ng-if="$ctrl.model.state===\'setup\' && !component.only_drag">\n                    <div class="icon-hcm-set setup-operate" ng-click="$ctrl.model.setupComponent($index,groupIndex)">\n                    </div>\n                    <div class="icon-hcm-trash setup-operate" ng-click="$ctrl.model.removeComponent($index,groupIndex)">\n                    </div>\n                </div>\n                <div class="hc-board-component-setup" ng-if="$ctrl.model.state===\'setup\' && component.only_drag">\n                    <span class="icon-hcm-lock setup-operate" title="系统组件，仅支持修改位置"></span>\n                </div>\n                <span ng-class="$ctrl.gridItemList[groupIndex][$index].resizableHandleClass"\n                    ng-show="$ctrl.isSetup()"></span>\n            </div>\n        </div>\n\n        <div class="hc-board-container"\n            ng-if="$ctrl.componentLoaded && $ctrl.LAYOUT_CLIENT === \'mobile\' && $ctrl.model.theme!==\'swiper\'">\n            <div class="hc-board-group-title" ng-if="$ctrl.model.groups.length > 1">\n                <div ng-repeat="group in $ctrl.model.groups track by $index" class="detail" id="nav-{{$index}}"\n                    ng-click="$ctrl.changeGroups($index)"\n                    ng-style="$ctrl.model.groups.length>4 ? {width: \'25%\', flex: \'none\'} : {flex: (100/$ctrl.model.groups.length) + \'%\', \'justify-content\': \'center\'}">\n                    <div class="title" ng-if="group.label" ng-class="{\'current-item\': $index === $ctrl.current_group }">\n                        <div class="label">{{ group.label }}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="hc-board-group" ng-repeat="group in $ctrl.model.groups track by $index"\n                ng-class="{\'hide-group-title\':$ctrl.model.groups.length <= 1}" ng-show="$index === $ctrl.current_group"\n                ng-init="groupIndex = $index">\n                <div class="content">\n                    <div class=\'hc-board-component-container board-component-{{component.component}}\'\n                        ng-repeat="component in group.components track by $index"\n                        ng-hide="(component.hidden|valueToFunc)()"\n                        ng-style="$ctrl.getPositionStyle(component,$ctrl.GRID,$ctrl.LAYOUT_CLIENT)"\n                        key="{{component.key}}" hc-resizable="$ctrl.model.state===\'setup\'"\n                        hc-resizable-success="$ctrl.onResizeEnd($index,$data)"\n                        hc-draggable="$ctrl.model.state===\'setup\'" hc-draggable-success="$ctrl.onDragEnd($index,$data)">\n                        <hc-board-component model="component" context="$ctrl.model.context"\n                            context_key="$ctrl.model.context_key"\n                            class="{{$ctrl.model.board_theme_list[groupIndex][$index].themeClass}}"\n                            style="{{$ctrl.model.board_theme_list[groupIndex][$index].themeStyle}}"\n                        ></hc-board-component>\n                        <div class="hc-board-component-setup" ng-if="$ctrl.model.state===\'setup\'">\n                            <div class="icon-hcm-set setup-operate"\n                                ng-click="$ctrl.model.setupComponent($index, groupIndex)"></div>\n                            <div class="icon-hcm-trash setup-operate"\n                                ng-click="$ctrl.model.removeComponent($index, groupIndex)"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="swiper-mode"\n            ng-if="$ctrl.componentLoaded && $ctrl.LAYOUT_CLIENT === \'mobile\' && $ctrl.model.theme === \'swiper\'">\n            <div class="swiper-container">\n                <div class="content swiper-wrapper">\n                    <div class=\'hc-board-component-container swiper-slide board-component-{{component.component}}\'\n                        ng-hide="(component.hidden|valueToFunc)()"\n                        ng-repeat="component in $ctrl.model.components track by $index" key="{{component.key}}"\n                        hc-resizable="$ctrl.model.state===\'setup\'"\n                        hc-resizable-success="$ctrl.onResizeEnd($index,$data)"\n                        hc-draggable="$ctrl.model.state===\'setup\'" hc-draggable-success="$ctrl.onDragEnd($index,$data)">\n                        <hc-board-component model="component" context="$ctrl.model.context"\n                            context_key="$ctrl.model.context_key"\n                            class="{{$ctrl.model.board_theme_list[$index].themeClass}}"\n                            style="{{$ctrl.model.board_theme_list[$index].themeStyle}}"></hc-board-component>\n                        <div class="hc-board-component-setup" ng-if="$ctrl.model.state===\'setup\'">\n                            <div class="icon-hcm-set setup-operate" ng-click="$ctrl.model.setupComponent($index)"></div>\n                            <div class="icon-hcm-trash setup-operate" ng-click="$ctrl.model.removeComponent($index)">\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="pagination"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="anchor-icon icon-hcm-document-symbol"\n     ng-class="{\'is-show\': $ctrl.model.isShowAnchors}"\n     ng-mouseover="($ctrl.model.anchor_type!==\'fixed\')&&$ctrl.client===\'pc\'&&$ctrl.showAnchors()"\n     hc-title="{{\'导航栏\'}}"\n     options="{mode: \'tip\'}"\n     ng-if="$ctrl.model.anchors && $ctrl.model.anchors.length>0"\n     ng-click="$ctrl.showAnchors()">\n</div>\n\n<div class="anchors" ng-if="$ctrl.model.anchors && $ctrl.model.anchors.length>0 && $ctrl.client===\'pc\'"\n    ng-class="{\'is-show\': $ctrl.model.isShowAnchors, \'fix-right\': $ctrl.model.isShowAnchors&&($ctrl.model.anchor_type===\'fixed\')}"\n    ng-mouseleave="$ctrl.anchorsLeave()" ng-mouseenter="$ctrl.anchorsEnter()">\n    <div class="close" ng-click="$ctrl.closeAnchors()">\n        {{\'收起\'}}<span class="icon-menu-open"></span>\n    </div>\n    <div class="anchor-list">\n        <div ng-repeat="anchor in $ctrl.model.anchors track by $index" class="anchor"\n            ng-click="$ctrl.scrollToAnchor(anchor, $event)">\n            <div class="text-block">\n                <div class="icon"\n                     ng-class="{\'selected\': true}"></div>\n                <div class="line" ng-hide="$ctrl.model.anchors.length===$index+1"></div>\n            </div>\n            <div class="text">\n                <div class="label">{{anchor.label}}</div>\n                <div class="sub-anchor" ng-if="anchor.child&&anchor.child.length>0" ng-repeat="sub in anchor.child"\n                    ng-click="$ctrl.scrollToAnchor(sub, $event)">\n                    {{sub.label}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},"5USo":function(e,t){e.exports='<div class="stage-list">\n    <div ng-repeat="stage in stage_list" class="stage">\n        <span class="spot" ng-class="{active:stage.order==current_order}"></span>\n        <span class="score" ng-show="(stage.score || stage.score == 0 )&& stage.order<current_order">{{stage.score}}{{\'perf_point\'|translate}}</span>\n        <span class="stage-name" ng-class="{crude:stage.order==current_order,is_score:(stage.score || stage.score == 0 )&& stage.order<current_order}">{{stage.name}}</span>\n    </div>\n</div>\n'},"5n6K":function(e,t){e.exports='<div class="info_card">\n    <div class="message-image">\n        <img class="print-head" ng-if="$ctrl.model.photo && $ctrl.model.type===1"\n            ng-src="{{($ctrl.model.photo||\'\') | hcPhoto:\'56\'}}">\n        <span ng-if="!$ctrl.model.photo && $ctrl.model.type===1" class="print-head"\n            ng-class="{1:\'boy\',2:\'girl\',3:\'boy\'}[$ctrl.model.gender]">\n            {{$ctrl.model.name.substring(0, 1)}}\n        </span>\n        <span ng-if="$ctrl.model.type===2" class="company"\n            ng-class="{1:\'boy\',2:\'girl\',3:\'boy\'}[$ctrl.model.gender]">\n            {{\'perf_org\'|translate}}\n        </span>\n    </div>\n    <div class="message-detail" ng-if="$ctrl.model.type===1">\n        <div>\n            <span class="obj-name">{{$ctrl.model.name}}</span>\n            <span class="activity-cycle">{{$ctrl.model.assess_cycle}}</span>\n        </div>\n        <div class="dept-position">\n            <div>\n                <span class="icon-hcm-organization"></span><span>{{$ctrl.model.dept_name}}</span>\n            </div>\n            <div class="split"></div>\n            <div>\n                <span class="icon-hcm-job"></span><span>{{$ctrl.model.position_name}}</span>\n            </div>\n            <div class="split" ng-if="($ctrl.options.length>3)"></div>\n            <div class="obj-detail-all" ng-if="($ctrl.options.length>3)"  ng-mouseenter="$ctrl.is_show_obj_detail=true" ng-mouseleave="$ctrl.is_show_obj_detail=false">\n                <span class="up-down icon-hcm-attention"></span>\n                <span class="detail-info">更多信息</span>\n                <div class="obj-detail" ng-show="$ctrl.is_show_obj_detail">\n                    <div class="obj-detail-info" ng-repeat="obj in $ctrl.options">\n                        <span class="obj-detail-info-label">{{obj.label}}</span>:\n                        <span class="obj-detail-info-name">{{$ctrl.detail[obj.key]}}</span></div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="message-detail" ng-if="$ctrl.model.type===2">\n        <div>\n            <p class="company-title">{{$ctrl.model.name}}</p>\n        </div>\n        <div class="dept-position">\n            <span>{{$ctrl.model.dept_name}}</span>\n            <div class="split" ng-if="($ctrl.options.length>2)"></div>\n            <div class="obj-detail-all" ng-if="($ctrl.options.length>2)"  ng-mouseenter="$ctrl.is_show_obj_detail=true" ng-mouseleave="$ctrl.is_show_obj_detail=false">\n                <span class="up-down icon-hcm-attention"></span>\n                <span class="detail-info">更多信息</span>\n                <div class="obj-detail" ng-show="$ctrl.is_show_obj_detail">\n                    <div class="obj-detail-info" ng-repeat="obj in $ctrl.options">\n                        <span class="obj-detail-info-label">{{obj.label}}</span>:\n                        <span class="obj-detail-info-name">{{$ctrl.detail[obj.key]}}</span></div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n'},"5pus":function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="go_evaluate()">\n    <div>点击进入,对面试者进行评价 <span class="icon-hcm-arrow-right"></span></div>\n</div>\n'},"69I9":function(e,t){e.exports='<div ng-init="init()" class="company-property-set">\n    <hc-form model="appoint_calendar"></hc-form>\n</div>\n'},"6S05":function(e,t){e.exports='<div class="picker-selector">\n    <div>\n        <div class="selector-view">\n            <div class="view-item"\n                 ng-class="{selected: _item.selected}"\n                 ng-repeat="_item in items">\n                {{_item[\'text\']||_item}}\n            </div>\n        </div>\n    </div>\n    <div class="selector-mask selector-mask-top"></div>\n    <div class="selector-mask selector-mask-bottom"></div>\n</div>\n'},"6hxS":function(e,t,n){"use strict";n("sMBO"),n("07d7"),n("rB9j"),n("JfAA"),n("UxlC");var i=n("iYz8"),o=n.n(i),a=n("Dcj1"),l=n.n(a),r=n("O0yt"),c=n.n(r),s=n("0lTi"),d=n.n(s),u=n("UtpJ"),_=n.n(u),p=n("LYCE"),m=n.n(p),f=n("HnXd"),h=n.n(f),g=n("qjzJ"),v=n.n(g),b=n("fHi0"),y=n.n(b),w=n("OWCx"),x=n.n(w),k=n("x1GB"),O=n.n(k),D=n("M5Mt"),C=n.n(D),M=n("ZbhI"),S=n.n(M),E=n("WxoT"),P=n.n(E),j=n("+oHS"),T=n.n(j),A=n("nhkr"),I=n.n(A),L=n("6UaR"),F=n.n(L),R=n("04Ix"),B=n.n(R),U=n("/FZm"),q=n.n(U),W=n("RXMP"),z=n.n(W),N=n("FLGM"),K=n.n(N),H=n("5PDf"),V=n.n(H),Y=n("o+MX"),G=n.n(Y),J=n("pPxq"),X=n.n(J),Q=n("a0dU"),Z=n.n(Q),ee=(n("ls82"),n("SPx3")),te=n.n(ee),ne=n("/eFo"),ie=n.n(ne),oe=n("DzJC"),ae=n.n(oe),le=n("R91f"),re=n("8Auy"),ce=n("TWJ7"),se=(n("CiMr"),n("rVjj"),n("wd/R")),de=n.n(se),ue=n("1hbj"),_e=n("mshF");function pe(e){if(void 0===c.a||null==l()(e)){if(F()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return me(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return d()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return me(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,s=!1;return{s:function(){i=o()(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fe(e,t){var n=T()(e);if(x.a){var i=x()(e);t&&(i=V()(i).call(i,(function(t){return y()(e,t).enumerable}))),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)z()(n=fe(Object(i),!0)).call(n,(function(t){B()(e,t,i[t])}));else if(v.a)h()(e,v()(i));else{var o;z()(o=fe(Object(i))).call(o,(function(t){m()(e,t,y()(i,t))}))}}return e}window.app.controller("BaseComplexParentCtrl",["templateService","$hcListBtn","$hcDialog","$scope","$rootScope","$state","CRUDService","$filter","contextService","$timeout","dataService","hcDialogSelector","selectorService","commonSelectorService","$q","$hcSteps","hcmDraftsService","workflowOnlineService","$commonAction",function(e,t,n,i,o,a,l,r,c,s,d,u,_,p,m,f,h,g,v){i.expand="terminal"!==a.params.display_type,i.nav_items_max_length=3,i.auto_go_first_child=!0,i.client=window.client;var b=v.createCommonAction(i);i.init=te()(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.auth=c.getContext("auth"),e.t0=i.initBeforeAsync,!e.t0){e.next=5;break}return e.next=5,i.initBeforeAsync();case 5:return e.next=7,i.loadModelMeta();case 7:return e.next=9,i.getItemInfo();case 9:i.initMultiView(),"mobile"===i.client&&s((function(){var e=$(".hcm-nav-mobile>.tab-container>.tab .tab-item.selected");e.length&&i.scrollIntoView(e[0])}),500);case 11:case"end":return e.stop()}}),e)}))),i.getCount=function(e){return"Message"===e.model&&(e.showCount?d.callHcmOpenApi("hcm.model.count",{model:e.model,filter_dict:e.params.filter_dict||{},extra_property:{state:e.meta_state},count_by:"id"}).then((function(t){e.count=t.list[0].count__id>99?99:t.list[0].count__id,e.showCount=e.showCount||!1})):(e.count=0,e.showCount=!1)),e},i.initMultiView=function(){var e;(null===(e=a.params.multi_view_key)||void 0===e?void 0:X()(e).call(e,"multiView"))&&(i.multi_view_config={position:"top",valueOnChange:function(e){var t=e[a.params.parent_field]||e.id;d.callHcmOpenApi("hcm.model.get",{model:i.model_meta.model,id_:t}).then((function(n){i.item_info=e,o.super_go(a.current.name,angular.extend(angular.copy(a.params),{id:t,name:n.name}))}))}},i.mutli_view_top=a.params.multi_view_key&&"top"===i.multi_view_config.position)},i.setItemInfo=function(e){i.item_info=e},i.getParams=function(e){return angular.extend({c_model:e.model,meta_state:e.meta_state,parent_field:e.parent_id,nav_model:a.params.nav_model,nav_meta_state:a.params.nav_meta_state,appoint:e.appoint,caption:e.label,hide:e.hide,func:e.func},e.params)},i.loadModelMeta=te()(Z.a.mark((function e(){var t,n,o,a,c,s,d,u,_,p,m,h,g,v,b,y,w,x,k,$,O,D,C,M,S;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.multi_level=!1,e.next=3,l.getBizMeta("base",i.getMetaState(),!0,i.getRestParams());case 3:return p=e.sent,i.initMetaHooks(p),e.next=7,null===(t=i.setMetaBeforeAsync)||void 0===t?void 0:t.call(i,i.getEnvironmentParams());case 7:if(p=i.individualParse(p),i.model_meta=p,i.base_config=i.funcParse(p.base_config||{}),i.nav_items_max_length=null!==(n=null===(o=i.base_config)||void 0===o?void 0:o.nav_items_max_length)&&void 0!==n?n:i.nav_items_max_length,p.childs&&(i.nav_items=r("orderBy")(i.funcParse(G()(m=[angular.extend({key:"base_info",label:r("translate")("common_basic_information"),sequence:0,jump_state:(i.child_states||{}).base},p.base||{})]).call(m,p.childs)),"sequence"),V()(h=i.nav_items).call(h,(function(e){return!r("valueToFunc")(e.hide)()})).length>i.nav_items_max_length&&(i.multi_level=!0),i.nav_items=V()(g=i.nav_items).call(g,(function(e){var t;(e.jump_state=e.jump_state||(i.child_states||{})[e.view],e.params=i.getParams(e),e.list)&&(K()(t=e.list).call(t,(function(e){return e.params=i.getParams(e),e})),i.multi_level=!0);return!r("valueToFunc")(e.hide)()})),z()(v=i.nav_items).call(v,(function(e){return i.getCount(e)}))),i.initWaterfallView(),!(null===(a=i.base_config)||void 0===a?void 0:a.header_attachment)){e.next=16;break}return e.next=16,i.getHeaderAttachment();case 16:if(!(null===(c=i.base_config)||void 0===c?void 0:c.attachment)){e.next=19;break}return e.next=19,i.getAttachment();case 19:if(!(null===(s=i.base_config)||void 0===s||null===(d=s.navigation)||void 0===d?void 0:d.attachment)){e.next=22;break}return e.next=22,i.setNavigationAttachment();case 22:return i.setState(),i.setCurrentNav(),(null===(u=i.base_config)||void 0===u?void 0:u.navigation)&&p.childs&&(i.steps_model=f.createHcSteps({meta:i.nav_items,current:i.current_nav,direction:null!==(b=null===(y=i.base_config)||void 0===y||null===(w=y.navigation)||void 0===w?void 0:w.direction)&&void 0!==b?b:"horizontal",callback:i.goChild,type:"navigate"===(null===(x=i.base_config)||void 0===x||null===(k=x.navigation)||void 0===k?void 0:k.type)?"navigate":"steps",size:(null===($=i.base_config)||void 0===$||null===(O=$.navigation)||void 0===O?void 0:O.size)||"small",stepsLength:(null===(D=i.base_config)||void 0===D||null===(C=D.navigation)||void 0===C?void 0:C.stepsLength)||5,validator:null===(M=i.base_config)||void 0===M||null===(S=M.navigation)||void 0===S?void 0:S.validator})),i.setBtnModel(),e.next=28,null===(_=i.metaLoadedAsync)||void 0===_?void 0:_.call(i,i.getEnvironmentParams());case 28:i.initAfter();case 29:case"end":return e.stop()}}),e)}))),i.setBtnModel=function(){var e;if(i.actions=V()(e=i.model_meta.actions).call(e,(function(e){return"setup"!==e.key&&"float"!==e.type})),"pc"===i.client){var n,o=q()(n=i.model_meta.actions).call(n,(function(e){return"float"===e.type}));o&&(o=i.funcParse(o),i.navigates=[he(he({},o),{},{caption:o.label,handler:function(){return i.parseParentAction(o)}})])}if(i.dev_btn_model=t.createListBtn().$setActionParser(i.parseParentAction).$setShowMax(i.base_config.max_btn_length||4),i.dev_btn_model.$setMeta(i.funcParse(i.actions)),i.actions.length){var a="pc"===window.client?".model-view-style":".mobile-waterfall-content";i.$watch("dev_btn_model.visible_actions().length",(function(e,t){e<1?$(a).css("height","100%"):$(a).css("height","calc(100% - 64px)")}))}},i.show_float_action=function(){var e;return V()(e=i.navigates||[]).call(e,(function(e){return!r("valueToFunc")(e.hide)()})).length>0},i.getHeaderAttachment=function(){var e=te()(Z.a.mark((function e(t){var n,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r("valueToFunc")(i.base_config.header_attachment.api_name)(),o=r("valueToFunc")(i.base_config.header_attachment.api_params)(i.getEnvironmentParams(),t),e.next=4,d.callHcmOpenApi(n,o);case 4:i.header_attachment=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getAttachment=function(){var e=te()(Z.a.mark((function e(t){var n,o,a,l,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r("valueToFunc")(i.base_config.attachment.api_name)(),l=r("valueToFunc")(i.base_config.attachment.api_params)(i.getEnvironmentParams(),t),e.next=4,d.callHcmOpenApi(a,l);case 4:c=e.sent,i.refreshAttachment(c),i.base_config.top_desecription=(null===(n=q()(c))||void 0===n||null===(o=n.call(c,(function(e){return"top_description"===e.key})))||void 0===o?void 0:o.desecription)||"";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.refreshAttachment=function(e){var t;z()(t=i.nav_items).call(t,(function(t){var n,i,o,a,l;(t.attachment=null===(n=q()(e))||void 0===n||null===(i=n.call(e,(function(e){return e.key===t.key})))||void 0===i?void 0:i.attachment,t.count=null===(o=t.attachment)||void 0===o?void 0:o.label,(null===(a=t.list)||void 0===a?void 0:a.length)>0)&&z()(l=t.list).call(l,(function(t){var n,i,o,a,l;(t.attachment=null===(n=q()(e))||void 0===n||null===(i=n.call(e,(function(e){return e.key===t.key})))||void 0===i?void 0:i.attachment,t.count=null===(o=t.attachment)||void 0===o?void 0:o.label,(null===(a=t.list)||void 0===a?void 0:a.length)>0)&&z()(l=t.list).call(l,(function(t){var n,i,o;t.attachment=null===(n=q()(e))||void 0===n||null===(i=n.call(e,(function(e){return e.key===t.key})))||void 0===i?void 0:i.attachment,t.count=null===(o=t.attachment)||void 0===o?void 0:o.label}))}))}))},i.setState=function(){var e,t=angular.extend({},{key:i.nav_items[0].key});(null===(e=a.params)||void 0===e?void 0:e.key)||o.super_go(a.current.name,t,{location:"replace",notify:!1})},i.setCurrentNav=function(){var e;K()(e=i.nav_items).call(e,(function(e,t){var n,o;e.list?K()(n=e.list).call(n,(function(e){i.isCurrent(e)&&(i.current_nav=t)})):i.isCurrent(e)&&(i.current_nav=t,null===(o=i.steps_model)||void 0===o||o.setCurrent(t))}))},i.showMenu=function(){n.getDialog(ce.a).params({nav_items:i.nav_items}).size("full").slideInConfig("left",!1).show().then((function(){}))},i.parseParentAction=function(){var e=te()(Z.a.mark((function e(t){var n,o,a,l=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,b.canEnterAction(t,o,i.getExprContext());case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=8,b.validateAction(t,o,i.getExprContext());case 8:if(!t.func||!t.func_first){e.next=10;break}return e.abrupt("return",null===(a=t.func)||void 0===a?void 0:a.call(t,o,o));case 10:if(!F()(t.action)){e.next=15;break}return t.key&&(o["".concat(t.key,"_action")]=t),e.next=14,b.actionChain(t.action,o,{},(function(e,t,n){return i.parseParentAction(e,n)}));case 14:return e.abrupt("return",e.sent);case 15:if(!b.isCommonAction(t)){e.next=17;break}return e.abrupt("return",b.execCommonAction(t,o,i.getExprContext()));case 17:e.t0=t.action,e.next="SETUP"===e.t0?20:"WF_START"===e.t0?22:"REFRESH_MULTI_NAV_LIST"===e.t0?24:26;break;case 20:return i.metaSetup(t.data),e.abrupt("break",27);case 22:return i.wf_start(i.item_info,t.params),e.abrupt("break",27);case 24:return i.refreshMultiNavList(),e.abrupt("break",27);case 26:return e.abrupt("return",null===(n=t.func)||void 0===n?void 0:n.call(t,o,o));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getExprContext=function(){return he({ENV:function(){return i.getEnvironmentParams()},AUTH:function(){return i.auth}},i.getAlterExprContext())},i.getAlterExprContext=function(){return{}},i.openInfoDialog=te()(Z.a.mark((function e(){var t,n,i=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,e.abrupt("return",b.getCommonAction("COMMON_INFO_DIALOG")(he(he({},n),{},{options:t})));case 3:case"end":return e.stop()}}),e)}))),i.openListDialog=function(){var e=te()(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.getCommonAction("COMMON_LIST_DIALOG")({options:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.dynamicAction=function(e,t){return l.dynamicAction(i.model_meta.model,i.getMetaState(),"base",e,t)},i.metaSetup=function(e){n.getDialog(le.a).show({meta_key:e,biz_type:"base",model:i.model_meta.model,state:i.getMetaState()}).then((function(){i.loadModelMeta()}))},i.wf_start=function(){var e=te()(Z.a.mark((function e(t,a){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.callHcmOpenApi("hcm.model.ote",{model:"wf_form_data_flex_data."+a.business_id,source_id:t.id,state:a.ote,source_item:t,is_preview:!0,group_filter:a.group_filter?r("valueToFunc")(a.group_filter)(t,i.getEnvironmentParams()):{}}).then(function(){var e=te()(Z.a.mark((function e(t){var l,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.wf_edit){e.next=7;break}return e.next=3,_e.a.getCustomDialogCtrl("WorkflowDetailNewInfoDialogCtrl");case 3:l=e.sent,n.getDialog(l()).params({mode:"new",business_id:a.business_id,form_data:t}).show().then((function(e){e.success?e.event&&"innerBack"===e.event||(o.show_warning("流程创建成功"),i.getItemInfo()):o.show_warning("流程创建失败，请联系管理员")}),(function(){o.show_warning("流程创建失败，请联系管理员")})),e.next=9;break;case 7:r={bill_obj:"@bill_obj_name=form_data_detail@bill_obj_type=table@",business_id:a.business_id,form_description:""},g.createAndStartWorkflowInstanceV3({wf_data:r,form_data:t}).then((function(e){e.success?(o.show_warning("流程创建成功"),i.getItemInfo()):o.show_warning("流程创建失败，请联系管理员")}),(function(){o.show_warning("流程创建失败，请联系管理员")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i.funcParse=function(e){var t={SCOPE:i,STATE:a,$q:m,$filter:r,MOMENT:de.a,dataService:d,WINDOW:window,location:window.location,CRUDService:l,hcDialogSelector:u,selectorService:_,$hcDialog:n,commonSelectorService:p,CommonInfoDialog:ue.a};return re.a.jsonEval(e,t)},i.getItemInfo=te()(Z.a.mark((function e(){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==I()(a.params.id)&&!a.params.id){e.next=4;break}return e.next=3,l.getItemInfo(a.params.id,i.getFrom(),i.getExtraProperty());case 3:i.item_info=e.sent;case 4:case"end":return e.stop()}}),e)}))),i.scrollIntoView=function(e){if(e&&e instanceof HTMLElement){var t=$(e);t.length&&t[0].scrollIntoView({inline:"center",behavior:"smooth"})}},i.goChild=function(e,t){var n;if(i.current_nav===t&&(null===(n=e.list)||void 0===n?void 0:n.length)&&!angular.isUndefined(t))i.current_nav=null;else{i.current_nav=t,"mobile"===i.client&&t.target instanceof HTMLElement&&i.scrollIntoView(t.target);var o=(e.list||[]).length&&!e.model?e.list[0]:e;e.list&&!i.auto_go_first_child||i.goFunc(o,t)}},i.goFunc=function(e,t){if(i.goFuncBefore(e),r("isValidValue")(t)&&(i.current_nav=t),i.current_hover=null,e.func)e.func(e);else{var n,l,c,s,d,u=angular.extend({},e.params,{key:e.key});if(/(\w+\_multi)|(\w+\.common_model_list)/.test(a.current.name)&&/(\w+\_multi)|(\w+\.common_model_list)/.test(e.jump_state)&&!(null===(n=i.base_config)||void 0===n?void 0:n.default_inherit)&&!(null===(l=e.jump_options)||void 0===l?void 0:l.inherit))z()(d=["advance_filter_dict","query_str"]).call(d,(function(e){!u[e]&&(u[e]=null)}));o.super_go(e.jump_state,u||{},"jump_options"in e?e.jump_options:{location:"replace",animator:"none-animation",inherit:null===(c=null===(s=i.base_config)||void 0===s?void 0:s.default_inherit)||void 0===c||c})}},i.super_go=function(e,t,n,i){o.super_go(e,t,n,i)},i.isCurrent=function(e){var t,n;if(e.key===a.params.key)return!0;if(e.no_model||!function(t,n){var i;if((null==e?void 0:e.jump_state)===n)return!0;var o,a=pe(null!==(i=null==t?void 0:t.list)&&void 0!==i?i:[]);try{for(a.s();!(o=a.n()).done;){if(o.value.jump_state===n)return!0}}catch(e){a.e(e)}finally{a.f()}return!1}(e,a.current.name))return!1;if(e.params)for(var i=0,o=T()(null!==(l=null==e?void 0:e.params)&&void 0!==l?l:{});i<o.length;i++){var l,r,c=o[i];if(void 0!==e.params[c]&&(a.params[c]&&a.params[c]!==(null===(r=e.params[c])||void 0===r?void 0:r.toString())))return!1}if(a.params.base_object_str!==(null==e||null===(t=e.params)||void 0===t?void 0:t.base_object_str))return!1;if(!a.params.c_model)return!0;if(e.meta_state&&e.meta_state!==a.params.meta_state)return!1;if(null==e||null===(n=e.params)||void 0===n?void 0:n.c_model){var s=e.params.c_model===a.params.c_model;return e.params.meta_state?s&&e.params.meta_state===a.params.meta_state:s}return!0},i.isValidNavItem=function(e){return e.func||e.jump_state||e.model||e.list&&e.list.length},i.isHover=function(e,t){return i.expand?i.current_nav!==t&&i.current_hover===t:i.current_hover===t},i.mouseHover=function(e,t){var n;if(s.cancel(i.hoverDelayTimeout),e.list=e.list?e.list:[],!i.expand||e.list.length){var o=angular.element(".h-c-main-content .hcm-nav-fixed")[0].scrollTop,a=-46-o,l=i.expand?e.list.length:e.list.length+1,r=angular.element(".h-c-main-content .category")[t].offsetTop;l>6&&(angular.element(".h-c-main-content .hover-list").eq(t).addClass(".h-c-main-content over-lay"),l=6),angular.element(".h-c-main-content .hcm-nav").height()-(r-o)<46*l&&(a-=46*(l-1));var c=$(".h-c-main-content .hcm-nav").last().width();$(".h-c-main-content  .hover-list").eq(t).css("transform",G()(n="translate3d(".concat(c,"px, ")).call(n,a,"px, 0)")),i.current_hover=t}},i.mouseLeave=function(){i.hoverDelayTimeout=s((function(){i.current_hover=null}),150)},i.collapseMenu=function(){i.expand=!i.expand,i.$broadcast("collapse-menu")},i.secondCheckPassword=function(){var e=te()(Z.a.mark((function e(t){var o,a,l,r,c,s,u=arguments;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>1&&void 0!==u[1]?u[1]:600,a=u.length>2?u[2]:void 0,e.next=4,d.callHcmOpenApi(a||"common.second.password.check",{category:t});case 4:if(!e.sent.success){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,d.callHcmOpenApi("second.password.has.password",{});case 9:return l=e.sent,r="DoubleCheckPassword",c=l?"pwd":"setting",e.next=14,n.getDialog(Object(ue.a)(r,c)).size("small").show({data:null,alter:{category:t,expire:o},no_fetch_data:!0});case 14:if(s=e.sent.success,"setting"!==c||!s){e.next=21;break}return i.show_warning("设置密码成功!"),e.next=19,i.secondCheckPassword(t,o);case 19:e.next=22;break;case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getEnvironmentParams=function(){return angular.extend({},i.customEnvironmentParams||{},a.params,i.params||{})},i.customEnvironmentParams={},i.initMetaHooks=function(e){var t,n;(null==e?void 0:e.hooks)&&"{}"!==P()(null==e?void 0:e.hooks)?(i.hooks_meta=i.funcParse(e.hooks),z()(t=T()(i.hooks_meta)).call(t,(function(e){var t;"function"==typeof i.hooks_meta[e]?i[e]=i.hooks_meta[e]:"object"===I()(i.hooks_meta[e])&&(null===(t=i.hooks_meta[e])||void 0===t?void 0:t.action)&&null!==i.hooks_meta[e]&&(i[e]=te()(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.actionFunc(null===(n=i.hooks_meta[e])||void 0===n?void 0:n.action);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))}))):z()(n=["setMetaBeforeAsync","metaLoadedAsync"]).call(n,(function(e){i[e]=function(){var e=te()(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))},i.getMetaState=function(){return null},i.getModel=function(){return(i.model_meta||{}).model||a.params.model},i.individualParse=function(e){var t,n;return K()(t=e.childs).call(t,(function(e){return e.hide=r("valueToFunc")(i.funcParse(e.hide||""))()})),e.childs=V()(n=e.childs).call(n,(function(e){return!e.hide})),e},i.data_collector=[],i.consumeDirtys=[],i.dirtyEdit=null,i.$on("init_child_collector",(function(e,t){var n,o;null==e||e.stopPropagation(),!~S()(n=i.data_collector).call(n,t)&&i.data_collector.push(t);for(var a,l,r,c,s,d,u=t.getModel(),_=t.getMetaState(),p=t.getBizType(),m=0;m<i.consumeDirtys.length;m++)if(i.consumeDirtys[m].model===u&&i.consumeDirtys[m].state===_&&i.consumeDirtys[m].biz_type===p){var f;t.setDirty(i.consumeDirtys[m].dirty),C()(f=i.consumeDirtys).call(f,m,1);break}(null===(o=i.base_config)||void 0===o?void 0:o.lazyLoad)?(i.dirtyEdit&&i.genDataCollectorAll(),1===(null===(a=i.data_collector)||void 0===a?void 0:a.length)&&(null===(l=i.collectorLoaded)||void 0===l||l.call(i))):(null===(r=i.nav_items)||void 0===r?void 0:r.length)&&(null===(c=i.data_collector)||void 0===c?void 0:c.length)===((null===(s=i.base_config)||void 0===s?void 0:s.collector_count)||i.nav_items.length)&&(null===(d=i.collectorLoaded)||void 0===d||d.call(i))})),i.startDirtyMode=te()(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.dirtyEdit){e.next=6;break}return i.dirtyEdit=null,e.next=4,i.getAllDirty(!0);case 4:return K()(n=i.data_collector).call(n,(function(e){e.reset()})),e.abrupt("return");case 6:return i.dirtyEdit=m.defer(),i.genDataCollectorAll(),!1===(null===(t=i.base_config)||void 0===t?void 0:t.useDraft)||i.checkDraft().then((function(e){var t;(null==e||null===(t=e.draft)||void 0===t?void 0:t.dirty)&&i.dirtyDistribution(e.draft.dirty)})).catch((function(e){return console.log(e)})),e.abrupt("return",i.dirtyEdit.promise);case 10:case"end":return e.stop()}}),e)}))),i.genDataCollectorAll=function(){var e,t;m.all(K()(e=V()(t=i.data_collector).call(t,(function(e){var t,n;return!1!==(null===(t=i.base_config)||void 0===t||null===(n=t.enableSubsetDirtyMode)||void 0===n?void 0:n.call(t,e.getModel(),e.getMetaState(),e.getBizType()))}))).call(e,function(){var e=te()(Z.a.mark((function e(t){var n,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=t.start)||void 0===n?void 0:n.call(t,{mode:"modify"});case 2:return i=e.sent,e.abrupt("return",{model:t.getModel(),state:t.getMetaState(),biz_type:t.getBizType(),dirty:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t,n;e.length<i.data_collector||(null===(t=i.dirtyEdit)||void 0===t||t.resolve(G()(n=V()(e).call(e,(function(e){return T()(e.dirty).length}))).call(n,i.consumeDirtys)),i.dirtyEdit=null)}),(function(e){console.log(e)}))},i.getAllDirty=function(){var e=te()(Z.a.mark((function e(t,n){var o,a,l,r,c,s,d,u,_,p,m,f,h;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],r=!0,c=!1,e.prev=3,d=ie()(i.data_collector);case 5:return e.next=7,d.next();case 7:return u=e.sent,r=u.done,e.next=11,u.value;case 11:if(_=e.sent,r){e.next=31;break}return p=_,e.prev=14,e.next=17,p.getDirty(t,n);case 17:if(m=e.sent,l.push({model:p.getModel(),state:p.getMetaState(),biz_type:p.getBizType(),dirty:m}),t){e.next=22;break}return e.next=22,null===(f=p.resolve)||void 0===f?void 0:f.call(p,m);case 22:e.next=28;break;case 24:if(e.prev=24,e.t0=e.catch(14),t){e.next=28;break}throw new Error("校验不通过");case 28:r=!0,e.next=5;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(3),c=!0,s=e.t1;case 37:if(e.prev=37,e.prev=38,r||null==d.return){e.next=42;break}return e.next=42,d.return();case 42:if(e.prev=42,!c){e.next=45;break}throw s;case 45:return e.finish(42);case 46:return e.finish(37);case 47:if(h=G()(o=V()(l).call(l,(function(e){return T()(e.dirty).length}))).call(o,i.consumeDirtys),!1===(null===(a=i.base_config)||void 0===a?void 0:a.useDraft)||!(null==h?void 0:h.length)){e.next=51;break}return e.next=51,i.saveDraft(h,"edit",!0);case 51:return e.abrupt("return",h);case 52:case"end":return e.stop()}}),e,null,[[3,33,37,47],[14,24],[38,,42,46]])})));return function(t,n){return e.apply(this,arguments)}}(),i.dirtyDistribution=function(e){var t;z()(t=e||[]).call(t,(function(e,t){var n,o=!1,a=e.model,l=e.state,r=e.biz_type,c=e.dirty;O()(n=i.data_collector).call(n,(function(e){return e.getModel()!==a||e.getMetaState()!==l||e.getBizType()!==r||(e.setDirty(c),o=!0,!1)})),!o&&i.consumeDirtys.push(e)}))},i.saveDraft=ae()((function(e,t,n){var o;return h.saveDraft(he(he({},i.model_meta),{},{mode:t||"edit",alter:{draft_id:null===(o=i.draft)||void 0===o?void 0:o.draft_id}}),{id:a.params.id,dirty:e},!!n)}),500),i.checkDraft=function(){return h.checkDraft(he(he({},i.model_meta),{},{data:{id:a.params.id}})).then((function(e){return e&&(i.draft=e),e}))},i.actionFunc=function(){var e=te()(Z.a.mark((function e(t){var n,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=null===(n=i.model_meta.actions)||void 0===n?void 0:q()(n).call(n,(function(e){return e.key===t})))&&(o=i.funcParse(o)),e.abrupt("return",o?i.parseParentAction(o):console.log("table_action_not_found".concat(t)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.$on("select_status",(function(e,t){i.child_select_status=t})),i.refreshMultiNavList=function(){o.$broadcast("refresh_multi_nav_list")},i.getIdentityName=function(){var e,t=i.getMetaState()?G()(e="".concat(i.getModel(),"-")).call(e,i.getMetaState()):i.getModel();return(null==t?void 0:t.replace(/(\s|\.|\$|\+|\#|\|)/g,""))||""},i.initAfter=function(){return null},i.initWaterfallView=function(){return!0},i.getFrom=function(){return"view"},i.getRestParams=function(){var e,t;return he(he({},{state_params:a.params}),JSON.parse(null!==(e=null===(t=i.getEnvironmentParams())||void 0===t?void 0:t.meta_params)&&void 0!==e?e:"{}"))},i.getExtraProperty=function(){return null},i.goFuncBefore=function(e){return e},i.refreshNav=function(){i.init()},o.$on("refresh_nav_attachment",function(){var e=te()(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getAttachment(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),o.$on("refresh_header_attachment",function(){var e=te()(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getHeaderAttachment(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),i.showWarning=function(e,t,n){o.show_warning(e,t,n)}}]),t.a="BaseComplexParentCtrl"},"70lZ":function(e,t){e.exports='<div class="plan-visualization hcm-nav-content" data-ng-init="$ctrl.initBase()">\n    <div class="tabPanes">\n        <hc-tabs value="$ctrl.current_tab"\n                 on-value-change="$ctrl.tabOnchange">\n            <hc-tab-pane\n                ng-repeat="tab in  $ctrl.tabOptions.list track by $index"\n                label="tab.name"\n                name="tab.id"\n                hide-count=true\n            ></hc-tab-pane>\n        </hc-tabs>\n    </div>\n    <div class="content">\n        <div class="available-fields-container">\n            <div class="fields-tabs">\n                <div class="operate-list">\n                    <div class="{{(operate.icon|valueToFunc)()}} operate-icon icon"\n                         data-ng-repeat="operate in $ctrl.operate_list track by $index"\n                         data-ng-click="operate.func()"\n                         hc-title="{{(operate.label|valueToFunc)()}}"\n                         options="{}"></div>\n                </div>\n            </div>\n            <hc-simple-tree model="$ctrl.availableFieldsModel[type.id]"\n                        ng-repeat="type in $ctrl.tabOptions.list"\n                        data-ng-if="$ctrl.current_panel.key==type.id&&$ctrl.current_panel.key!==\'column_defs\'"></hc-simple-tree>\n            <hc-sortable-tree model="$ctrl.ableFieldsTree"\n                              ng-show="$ctrl.current_panel.key===\'column_defs\'"></hc-sortable-tree>\n        </div>\n        <div class="selected-fields-container">\n            <div class="selected-fields-content">\n                <hc-query-field model="$ctrl.current_panel.model"\n                                data-ng-show="$ctrl.current_panel.model&&$ctrl.current_panel.key!==\'column_defs\'">\n                </hc-query-field>\n                <hc-sortable-tree model="$ctrl.sortTree" class="column-defs-tree"\n                                  ng-show="$ctrl.current_panel.key===\'column_defs\'"></hc-sortable-tree>\n            </div>\n        </div>\n    </div>\n</div>\n'},"7B2r":function(e,t){e.exports='<div class="home-widget home-widget-dashboard" ng-if="model" ng-init="initAnalysis()">\n    <div class="home-widget-header">\n        <div class=\'icon icon-chart-line\'></div>\n        <div class="header-label">{{model.params.label}}</div>\n    </div>\n    <div class="home-widget-body">\n        <portal-chart model="chart_option" on-click="go"></portal-chart>\n    </div>\n</div>\n'},"7Gu+":function(e,t){e.exports='<div  ng-init="init()" class="colorPickerBox">\n    <hc-input ng-model="model" options="options" type="string" id="justInput"></hc-input>\n</div>\n'},"7JZs":function(e,t){e.exports='<div class="time-calendar">\n    <div class="calendar-header">\n        <div class="header-left" ng-show="$ctrl.view_expanded && !$ctrl.disableGoto">\n            <div class="previous-month icon-hcm-arrow-left" ng-click="$ctrl.goPreviousMonth()"></div>\n        </div>\n        <span class="selected-date" ng-bind-html="$ctrl.selected_date_str"></span>\n        <div class="header-right" ng-show="!$ctrl.disableGoto">\n            <div class="header-operate" ng-show="!$ctrl.view_expanded"\n                 ng-click="$ctrl.goCurrentDate()" ng-bind="\'time_today_date\'|translate"></div>\n            <div class="next-month icon-hcm-arrow-right" ng-show="$ctrl.view_expanded"\n                 ng-click="$ctrl.goNextMonth()"></div>\n        </div>\n    </div>\n    <div class="calendar-content">\n        <div class="calendar-table" ng-class="$ctrl.disable_resize ? \'disable_resize\' : \'\'">\n            <div class="calendar-thead weekday">\n                <div ng-bind="\'Sun\'|translate"></div>\n                <div ng-bind="\'Mon\'|translate"></div>\n                <div ng-bind="\'Tue\'|translate"></div>\n                <div ng-bind="\'Wed\'|translate"></div>\n                <div ng-bind="\'Thu\'|translate"></div>\n                <div ng-bind="\'Fri\'|translate"></div>\n                <div ng-bind="\'Sat\'|translate"></div>\n            </div>\n            <div class="calendar-tbody">\n                <div class="trow-container">\n                    <div ng-repeat="_w in $ctrl.calendar_matrix" class="calendar-trow">\n                        <div ng-repeat="_d in _w track by $index" class="calendar-cell">\n                            <div class="day-content" ng-if="!_d.hide" ng-click="$ctrl.selectDate(_d.date)"\n                                 ng-class="$ctrl.getDateClass(_d)">\n                                <div class="day" ng-bind="_d.label"></div>\n                                <div class="desc" ng-bind-html="$ctrl.getDateDesc(_d.date)"></div>\n                                <div class="marker" ng-if="$ctrl.isDateMarked(_d.date)"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <hc-resizer ng-show="!$ctrl.disable_resize" direction="horizontal"\n                            resize-min="$ctrl.min_table_height" resize-max="$ctrl.max_table_height"\n                            start-callback="$ctrl.resizeStart" end-callback="$ctrl.resizeEnd">\n                    <a class="arrow-icon">\n                        <span class="left-bar"></span>\n                        <span class="right-bar"></span>\n                    </a>\n                </hc-resizer>\n            </div>\n        </div>\n    </div>\n    <div class="calendar-foot" ng-if="$ctrl.client===\'pc\'" ng-click="$ctrl.goCurrentDate()">今天</div>\n</div>\n'},"7QeL":function(e,t){e.exports='<div class="pc-score" ng-init="init()">\n    <div class="pc-score-content">\n        <div class="naire-obj-title">\n            <div class="obj-name">\n                {{naire_answer.scorer_info.object.name}}\n            </div>\n            <div class="title_right">\n                <div class="obj-score" ng-if=\'showScore && obj_score != null\'>得分: <span\n                    class="score">{{obj_score}}</span>\n                </div>\n            </div>\n        </div>\n        <div class="line" ng-if="scorer_id"></div>\n        <div class="naire-form"  ng-style={\'height\':scorer_id?contentHeight-90+\'px\':\'100%\'}>\n            <div class="naire-title">\n\n                <div class="name">{{naire.name}}</div>\n                <div class="desc">{{naire.content.desc}}</div>\n            </div>\n            <div class="naire-content">\n                <hc-form model="naire_form"></hc-form>\n            </div>\n        </div>\n    </div>\n</div>\n'},"7X6o":function(e,t){e.exports='<div class="meta-change">\n    <button class="btn-pc secondary" ng-repeat="item in meta_list" ng-click="changeMeta(item)">\n        {{item}}\n    </button>\n</div>'},"7iwl":function(e,t){e.exports='<div class="hcm-nav-content hcm-meta-vis-list" ng-init="$ctrl.$onInit()">\n    <div class="hcm-content flex">\n        <div class="hcm-hc-list-container">\n            <hc-list-new model="$ctrl.list_model"></hc-list-new>\n            <hc-list-no-data model="$ctrl.list_model" caption="没有设置任何元素"></hc-list-no-data>\n        </div>\n    </div>\n</div>\n'},"7pFR":function(e,t){e.exports='<div class="perf-card-modify-content" ng-init="init()">\n    <div ng-click="go_approval_process()" class="content say-approve-wf">{{\'perf_click_see_progress\'|translate}}</div>\n    <div ng-click="go_modify_comparison()" class="content say-modify-content">{{\'perf_click_view_adjustment_content\'|translate}}</div>\n</div>\n'},"7rEP":function(e,t){e.exports="<div class=\"component-container\"\n     ng-init=\"init();hover=false\"\n     ng-click=\"onClick($event)\"\n     ng-mouseover=\"hover=true\"\n     ng-if=\"client==='pc'\"\n     ng-mouseleave=\"hover=false\">\n    <div class='component-input-inner'\n         ng-bind='selector_label||options.placeholder'\n         ng-class='{placeholder:[null,undefined].includes(model)}'\n         ng-disabled='options.readOnly'\n         hc-title=\"{{selector_label}}\"\n         options=\"{mode: 'tip', showOnOverflow: true}\"></div>\n\n    <div ng-show=\"!(options.readOnly|valueToFunc)()\"\n         ng-click=\"options.no_delete||del($event)\"\n         class=\"input-icon\"\n         ng-class=\"(![null,undefined].includes(model)&&hover&&!options.no_delete)\n             ?'icon-hcm-delete'\n             : options.icon?options.icon:client==='pc'\n                 ?'icon-hcm-screening'\n                 :'icon-hcm-arrow-right'\"></div>\n</div>\n\n<div class=\"component-container\" ng-init=\"init()\" ng-click=\"onClick($event)\" ng-if=\"client==='mobile'\">\n    <div class='component-input-inner' ng-bind='selector_label||(options.readOnly?\"\":options.placeholder)'\n         ng-class='{placeholder:[null,undefined].includes(model)}'\n         ng-disabled='options.readOnly'></div>\n    \x3c!--    移动端不使用删除--\x3e\n    \x3c!--    <div ng-show=\"!options.readOnly&&model\" ng-click=\"del($event)\" class=\"delete icon-hcm-delete\"></div>--\x3e\n    <div ng-show=\"!options.readOnly\" class=\"input-icon icon-hcm-arrow-right\"></div>\n</div>\n\x3c!--<select ng-change='ngChange()' class='hc-select component-input-inner' ng-model='model'--\x3e\n\x3c!--ng-options='m.value as m.label for m in options.list' ng-disabled='(options.readOnly|valueToFunc)()'>--\x3e\n\x3c!--<option value=''>{{options.placeholder||'&#45;&#45;请选择&#45;&#45;'}}</option>--\x3e\n\x3c!--</select>--\x3e\n"},"86b4":function(e,t){e.exports='<div class="plan-container" ng-mousemove="togglePlanList($event)" ng-mouseleave="hidePlanList()">\n    <div class="plan-panel" ng-init="init()">\n        <div class="plan-actions" >\n            <div class="plan-action-item" ng-repeat="_a in action_list track by $index" ng-if="!(_a.hide|valueToFunc)()"\n                ng-click="actionClick(_a)" ng-class="{firstRow: $index === 0}">\n                <span>{{_a.label}}</span><span class="plan-title">{{_a.title}}</span>\n                <span class="icon-hcm-arrow-right" ng-if="$first"></span>\n            </div>\n        </div>\n    </div>\n\n\n    <div class="plan-list" id="plan-list-popup" ng-show="showPlan">\n        <div class="plan-list-content">\n            <div class="plan-item" ng-repeat="_d in plan_list track by $index" ng-click="itemSelect(_d)">\n                <div class="itemTag" ng-if="_d.is_shared === \'private\'">\n                    {{\'common_query_plan_panel_private\'|translate}}\n                </div> \x3c!--私有--\x3e\n                <div class=\'plan-name\' ng-class="isSelected(_d)?\'selected\':\'\'" hc-title="{{_d.name||_d.label}}" options="{mode:\'tip\',showOnOverflow:true}">\n                    {{_d.name || _d.label}}\n                </div>\n                <div class="icon-hcm-trash" ng-if="_d.is_shared === \'private\'||onlyoneowner"\n                    ng-click="delete($event,_d)"></div>\n                <div class="selectedIcon" ng-if="isSelected(_d)">\n                    <span class="icon-hcm-right selected"></span>\n                </div>\n            </div>\n            <div ng-if="!plan_list.length" class="plan-item">{{\'common_query_plan_panel_no_plan\'|translate}}</div>\n            \x3c!--暂无自定义方案--\x3e\n        </div>\n    </div>\n</div>'},"88R2":function(e,t){e.exports='<div class="component-container"\n     ng-init="hover=false"\n     ng-click="$ctrl.onClick($event)"\n     ng-mouseover="hover=true"\n     ng-mouseleave="hover=false">\n    <div class=\'map-header\' ng-if="!$ctrl.options.no_address">\n        <div class="component-input-inner address"\n             ng-bind=\'$ctrl.data.address || $ctrl.options.placeholder\'\n             ng-class=\'{placeholder:!$ctrl.model}\'\n             ng-disabled=\'($ctrl.options.readOnly|valueToFunc)()\'>\n        </div>\n    </div>\n    <div class="icon-hcm-delete"\n         ng-show="!($ctrl.options.readOnly|valueToFunc)() && ($ctrl.model|isValidValue) && hover &&\n         !$ctrl.options.no_delete"\n         ng-click="$ctrl.clear($event)">\n    </div>\n    <div class="map-img"></div>\n</div>\n'},"894O":function(e,t){e.exports='<div class="component-container" ng-init="init()">\n    <div class=\'component-input-inner\' ng-bind=\'model||((options.readOnly|valueToFunc)()?"":options.placeholder)\' ng-class=\'{placeholder:!model}\'\n         ng-disabled=\'(options.readOnly|valueToFunc)()\' ng-click="onClick($event)"></div>\n    <div ng-show="!(options.readOnly|valueToFunc)()" class="input-icon">\n        <div ng-mouseenter="mouseEnter()" ng-mouseleave="mouseLeave()" class="icon-item" ng-class=showIcon ng-click="clearInput()"></div>\n    </div>\n</div>\n\n'},"8Auy":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("07d7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("TWNs"),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rB9j"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("JfAA"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("UxlC"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("+oHS"),_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("RXMP"),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6__),_babel_runtime_corejs3_core_js_stable_instance_last_index_of__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("BfIq"),_babel_runtime_corejs3_core_js_stable_instance_last_index_of__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_last_index_of__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ZbhI"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_9__),_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("o+MX"),_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("UtpJ"),_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("pPxq"),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("WxoT"),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__),safer_eval__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("HPtm"),safer_eval__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(safer_eval__WEBPACK_IMPORTED_MODULE_14__),super_json={deepCopy:function(e){return JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(e))},jsonEval:function(e,t,n,i,o){var a=null;try{a=new safer_eval__WEBPACK_IMPORTED_MODULE_14___default.a.SaferEval(t)}catch(e){}return e&&JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(e),(function(e,l){if("string"!=typeof l||!_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12___default()(l).call(l,"=")||/^==+$/.test(l))return l;try{var r;if(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12___default()(r=l.replace(/\s*/g,"")).call(r,"=function")){var c="("+_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(l).call(l,1)+")";if(n&&n.hasOwnProperty(c))return n[c];var s=super_json.hcmEval(c,t,!1,a);return n&&(n[c]=s),s}if(i)return l;var d=super_json.hcmEval(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(l).call(l,1),t,!1,a);return o?d():d}catch(e){var u;console.log(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default()(u="%c错误配置：".concat(l,"\n")).call(u,e),"color:red")}}))},expressionEval:function(e,t,n){var i=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_9___default()(e).call(e,(function(e){var t=_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,"[",0)+1,n=_babel_runtime_corejs3_core_js_stable_instance_last_index_of__WEBPACK_IMPORTED_MODULE_7___default()(e).call(e,"]");return e.substring(t,n)}));return super_json.hcmEval("[".concat(i.toString(),"]"),t,n)},simpleJsonEval:function(e,t,n,i){return e&&JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(e),(function(e,o){if("string"!=typeof o||!_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12___default()(o).call(o,"=")||/^==+$/.test(o))return o;try{var a;if(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_12___default()(a=o.replace(/\s*/g,"")).call(a,"=function")){var l="("+_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(o).call(o,1)+")";if(n&&n.hasOwnProperty(l))return n[l];var r=super_json.simpleEval(l,t);return n&&(n[l]=r),r}return i?o:super_json.simpleEval(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(o).call(o,1),t)}catch(e){var c;console.log(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default()(c="%c错误配置：".concat(o,"\n")).call(c,e),"color:red")}}))},hcmEval:function hcmEval(func,context){var uncatch=arguments.length>2&&void 0!==arguments[2]&&arguments[2],superEvalInstance=arguments.length>3?arguments[3]:void 0;try{return superEvalInstance?superEvalInstance.runInContext(func):safer_eval__WEBPACK_IMPORTED_MODULE_14___default()(func,context)}catch(e){var _context5;if(uncatch)throw e;return _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default()(_context5=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5___default()(context)).call(_context5,(function(e){var t=new RegExp("(.?)("+e.replace("$","\\$")+")","g");func=func.replace(t,(function(e,t,n){return/^[a-zA-Z_0-9\.]$/.test(t)?e:(t||"")+"context."+n}))})),eval(func)}},simpleEval:function simpleEval(func){var _context6,context=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default()(_context6=_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5___default()(context)).call(_context6,(function(e){var t=new RegExp("(.?)("+e.replace("$","\\$")+")","g");func=func.replace(t,(function(e,t,n){return"."===t?e:(t||"")+"context."+n}))})),eval(func)},windowEval:function(e){return window.eval(e)}};__webpack_exports__.a=super_json},"8axT":function(e,t){e.exports='<div class="component-container" ng-init="hover=false" ng-click="$ctrl.onClick($event)" ng-mouseover="hover=true"\n    ng-mouseleave="hover=false">\n    <div class=\'component-input-inner\'\n        ng-bind-html=\'$ctrl.getModel($ctrl.model)||(($ctrl.options.readOnly|valueToFunc)()?"":$ctrl.options.placeholder)\'\n        ng-class=\'{placeholder:!$ctrl.model}\' ng-disabled=\'($ctrl.options.readOnly|valueToFunc)()\'\n        hc-title="{{$ctrl.model}}" options="{mode: \'tip\', showOnOverflow: true}"></div>\n    <div ng-show="!($ctrl.options.readOnly|valueToFunc)()"\n        ng-click="([null,undefined].includes($ctrl.model)||options.no_delete)? $ctrl.onClick($event) : $ctrl.del($event)"\n        class="input-icon" ng-class="(![null,undefined].includes($ctrl.model) && hover && !$ctrl.options.no_delete && $ctrl.client===\'pc\')\n                        ?\'icon-hcm-delete\'\n                        : $ctrl.options.icon\n                            ?$ctrl.options.icon\n                            :$ctrl.client===\'pc\'\n                                ?\'icon-hcm-screening\'\n                                :\'icon-hcm-arrow-right\'">\n    </div>\n</div>\n'},"8u5t":function(e,t){e.exports='<div class="hc-tree-menu" ng-init="init()">\n    <div class="hc-tree-menu-content" id="hc-tree-menu-content" ng-if="data && data.length > 0">\n        <div class="parent-items"\n             ng-repeat="item in data.slice(0, firstCategoryLimited) track by $index"\n             ng-mouseenter="dealMouseOver($event, item)"\n             ng-class="{\'no-children\': !item.children || item.children.length === 0}">\n            <div class="first-category">\n                <div class="first-category-item"\n                     ng-click="itemClick(item)"\n                     hc-title="{{item.name}}"\n                     options="{\n                        mode: \'tip\',\n                        showOnOverflow: true,\n                        tipStyle:{background:\'#fff\', color:\'#000\'},\n                        hideArrow: true}">{{item.name}}</div>\n            </div>\n            <div class="sec-category">\n                <div class="sec-category-item"\n                     ng-repeat="sec in item.children.slice(0,secondCategoryLimited) track by $index"\n                     ng-click="itemClick(sec)"\n                     hc-title="{{sec.name}}"\n                     options="{\n                            mode: \'tip\',\n                            showOnOverflow: true,\n                            tipStyle:{background:\'#fff\', color:\'#000\'},\n                            hideArrow: true}">{{sec.name}}</div>\n            </div>\n            <span class="icon icon-hcm-arrow-right" ng-if="item.children"></span>\n        </div>\n        <div class="view-all"\n             ng-if="data.length > firstCategoryLimited"\n             ng-mouseenter="dealMouseOver($event, viewAllItem)"\n             ng-click="itemClick(viewAllItem)">{{viewAllItem.name}}</div>\n    </div>\n</div>'},"9+eV":function(e,t){e.exports='<div class="hour-minute-select-panel" ng-init="init()">\n    <div id="hour-list" class="item-list border-right">\n        <div>\n            <div id="hour-item-{{_item}}" class="item" ng-repeat="_item in hour_list track by $index"\n                 ng-class="_item == hour ? \'selected\':\'\'"\n                 ng-click="onHourClick(_item,$event)">{{_item}}\n            </div>\n            <div class="mg"></div>\n        </div>\n    </div>\n    <div id="minute-list" class="item-list" i-scroll="minute_select_panel_list">\n        <div>\n            <div id="minute-item-{{_item}}" class="item" ng-repeat="_item in minute_list track by $index"\n                 ng-class="_item == minute ? \'selected\':\'\'"\n                 ng-click="onMinuteClick(_item,$event)">{{_item}}\n            </div>\n            <div class="mg"></div>\n        </div>\n    </div>\n</div>\n'},"9DwR":function(e,t,n){"use strict";n("sMBO"),n("rB9j"),n("EnZy");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("RXMP"),d=n.n(s),u=n("fHi0"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("OWCx"),h=n.n(f),g=n("+oHS"),v=n.n(g),b=n("/FZm"),y=n.n(b),w=n("o+MX"),x=n.n(w),k=n("a0dU"),$=n.n(k),O=(n("ls82"),n("SPx3")),D=n.n(O),C=n("04Ix"),M=n.n(C),S=n("TEMH"),E=n.n(S),P=n("y/Cr"),j=n("TWJ7");function T(e,t){var n=v()(e);if(h.a){var i=h()(e);t&&(i=m()(i).call(i,(function(t){return _()(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)d()(n=T(Object(i),!0)).call(n,(function(t){M()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;d()(a=T(Object(i))).call(a,(function(t){o()(e,t,_()(i,t))}))}}return e}window.app.controller("BaseComplexMultiCtrl",["$filter","$q","$controller","$scope","$state","$rootScope","CRUDService","InfoDialog","$hcDialog","listGlobalConfigService",function(e,t,n,i,o,a,l,r,c,s){n(P.a,{$scope:i,CRUDService:l,InfoDialog:r}),i.title=o.params.caption,i.refresh_nav_attachment=!1,i.initAfter=function(){i.list_model.$setTemplate(i.template)},i.getFilterDict=function(){var t,n,a,l,r={},c=null===(t=i.$parent.model_meta)||void 0===t?void 0:E()(n=t.childs).call(n,(function(e){return e.key===o.params.key})),s=o.params.parent_field||(null===(a=i.$parent.model_meta)||void 0===a||null===(l=a.childs[c])||void 0===l?void 0:l.parent_id);if(s){var d=o.params.appoint?o.params.appoint_id:o.params.id;r[s]=e("tryInteger")(d)}return r},i.getInitData=function(){var e={};return i.category_id&&(e[i.category_meta.key]=i.category_id),A(A({},i.getFilterDict()),e)},i.getInfoAlterParam=function(){return{model:o.params.c_model}},i.getPagingParams=D()($.a.mark((function e(){var t,n,a,l;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getListGlobalConfig();case 2:return t=e.sent,n=t.paging,a=n.page_size_list,l=n.page_size,e.abrupt("return",{page_size_list:a,current_page:(o.params.view_params||[]).page_index,page_size:(o.params.view_params||[]).page_size||i.page_size||l});case 5:case"end":return e.stop()}}),e)}))),i.parseUrlFilterStr=function(){return(o.params.view_params||[]).filter_str},i.showMenu=function(){c.getDialog(j.a).params({nav_items:i.nav_items}).size("full").slideInConfig("left",!1).show().then((function(){}))},i.getPageDefault=function(){var e;return x()(e="".concat(o.params.c_model,"-")).call(e,o.params.meta_state)},i.changePage=function(e){var t,n,o=e.split("-")[0];i.menuChangeState(o),(null==r?void 0:r.model_name)&&(r.model_name=o),i.merged_fields=null,l=i.getChildCrudService(o),i.base_model=null,i.list_meta=null,i.changePageRefreshTree||(i.tree_loader=null),i.meta_state=(null===(t=y()(n=i.changePageList).call(n,(function(t){return t.id===e})))||void 0===t?void 0:t.meta_state)||null,r&&(r.meta_state=i.meta_state),i.getPageChangeStateParams=function(){return{c_model:o,meta_state:i.meta_state}},i.changePageBefore&&i.changePageBefore(e),i.init()},i.initChangePageList=D()($.a.mark((function e(){var t,n,a,l,r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.initChangePageListFlag=!0,e.t0=i,e.next=4,i.getPageListFunc();case 4:return e.t1=e.sent,i.changePageList=e.t0.transChild.call(e.t0,e.t1),i.isNewStyle=i.isNewStyle||!!(null===(t=i.list_config)||void 0===t||null===(n=t.page_change)||void 0===n?void 0:n.is_new_style),i.initValue=(null===(a=y()(l=i.changePageList).call(l,(function(e){if(e.id){var t="number"==typeof e.id?e.id:e.id.split("-")[0];return o.params.meta_state?t===o.params.c_model&&e.meta_state===o.params.meta_state:t===o.params.c_model}})))||void 0===a?void 0:a.name)||(null===(r=i.changePageList)||void 0===r||null===(c=r[0])||void 0===c?void 0:c.name),e.next=10,i.getChangePageOptions();case 10:e.t2=e.sent,e.t3={key:"change_page",component:"hc-super-selector",options:e.t2},i.sub_title_meta=[e.t3];case 13:case"end":return e.stop()}}),e)})))}]),t.a="BaseComplexMultiCtrl"},"9MK4":function(e,t){e.exports='<div class="bill-third-process-detail-page-v3">\n    <div class="header">\n        <div class="header-box">\n            <div class="content border-right"><span>{{ $ctrl.completed }}</span> / {{ $ctrl.assignment_list.length }}\n            </div>\n            <div class="title">{{\'approval_status\'|translate}}</div>\n        </div>\n        <div class="header-box">\n            <div class="type">{{ $ctrl.wf_inst_detail.node ? ($ctrl.wf_inst_detail.node.one_approve_valid ?\n                (\'approval_strategy_one\'|translate) : (\'approval_strategy_multi\'|translate))\n                : $ctrl.wf_inst_detail.one_approve_valid ? (\'approval_strategy_one\'|translate) :\n                (\'approval_strategy_multi\'|translate) }}</div>\n            <div class="title">{{\'approval_strategy\'|translate}}</div>\n        </div>\n    </div>\n    <div class="assignment-list">\n        <div class="assignment" ng-repeat="_assignment in $ctrl.assignment_list">\n            <div class="info">\n                <div class="info-header">\n                    <div class="info-tab">\n                        <div class="photo-box">\n                            <img ng-src="{{ _assignment.executor.photo|hcPhoto:64}}">\n                        </div>\n                        <div class="emp">\n                            <div class="name">{{ _assignment.executor.id == $ctrl.employee_id ? (\'oneself\'|translate) :\n                                _assignment.executor.name}}</div>\n                            <div class="approve-status">\n                                {{$ctrl.translateLabel(_assignment, null, \'assignment\')}}\n                            </div>\n                        </div>\n                    </div>\n                    <div class="job-title">\n                        <span>{{ _assignment.executor.department }} {{ _assignment.executor.job_title}}</span>\n                        <span class="data-from">{{_assignment.execute_time || _assignment.create_time}}</span>\n                    </div>\n                    <div class="extra" ng-if="_assignment.from_assign || _assignment.category===5">\n                        <span class="data-from" ng-if="_assignment.from_assign ">\n                            来自{{$ctrl.assignmentFromName(_assignment)}}的{{$ctrl.assignmentCategory(_assignment)}}\n                        </span>\n                        <span class="data-from" ng-if="!_assignment.from_assign && _assignment.category===5">\n                            来自系统的{{$ctrl.assignmentCategory(_assignment)}}\n                        </span>\n                    </div>\n                </div>\n                <div class="info-content">\n                    <div class="sure_warning"\n                        ng-if="_assignment.comment&&(!_assignment.from_assign) && $ctrl.wf_inst_detail.show_comment">\n                        {{ _assignment.comment }}\n                    </div>\n                    <div class="sure_warning"\n                        ng-if="_assignment.comment&&_assignment.from_assign && $ctrl.wf_inst_detail.show_comment">\n                        {{$ctrl.assignmentComment(_assignment)}}\n                    </div>\n                    <div class="comment_content">\n                        <div class="assign-comment">\n                            <div class="" ng-if="$ctrl.wf_inst_detail.is_current && $ctrl.wf_inst_detail.show_comment">\n                                {{ _assignment.finish ? _assignment.assignment_comment : _assignment.category ? "" :\n                                $ctrl.translateLabel(_assignment, \'wf_running\', \'assignment\') }}\n                            </div>\n                            <div class=""\n                                ng-if="!$ctrl.wf_inst_detail.is_current && _assignment.category !== 5 && $ctrl.wf_inst_detail.show_comment">\n                                {{ _assignment.finish ? _assignment.assignment_comment ? _assignment.assignment_comment\n                                :\n                                (_assignment.comment && !_assignment.assignment_pass) ? "" : _assignment.assignment_pass\n                                ? $ctrl.translateLabel(_assignment, \'agree\', \'assignment\') :\n                                    $ctrl.translateLabel(_assignment, \'disagree\', \'assignment\') : $ctrl.translateLabel(_assignment, \'not_handle\', \'assignment\') }}\n                            </div>\n                        </div>\n                        <div class="assign-button">\n                            <div class="reminders" ng-click="$ctrl.sendReminders(_assignment)"\n                                ng-if="$ctrl.wf_inst_detail.is_current && !_assignment.finish && (_assignment.executor.id != $ctrl.employee_id || _assignment.category == 6)">\n                                {{\'Urge\'|translate}}\n                            </div>\n                            <div class="reminders" ng-class="\'trash\'" ng-click="$ctrl.removeTask(_assignment)"\n                                ng-if="$ctrl.isRemove(_assignment)">\n                                <div class="icon icon-hcm-trash"></div>\n                                <div class="desc">{{\'Cancel\'|translate}}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="other-assignment-content" ng-if="$ctrl.other_assignment.length>0">\n        <div class="assignment-list other-data">\n            <div class="other-category-title">\n                <div ng-class="$ctrl.is_show_list?\'show-list\':\'no-show-list\'" ng-click="$ctrl.showList()"></div>\n                <div class="category-name">参与人详情</div>\n            </div>\n            <div class="assignment" ng-class="\'un-use-data\'" ng-if="$ctrl.is_show_list"\n                ng-repeat="_assignment in $ctrl.other_assignment track by $index">\n                <div class="info">\n                    <div class="info-header">\n                        <div class="info-tab">\n                            <div class="photo-box">\n                                <img ng-src="{{ _assignment.executor.photo|hcPhoto:64}}">\n                            </div>\n                            <div class="emp">\n                                <div class="name">\n                                    {{ _assignment.executor.id == $ctrl.employee_id ? (\'oneself\'|translate) :\n                                    _assignment.executor.name}}\n                                </div>\n                                <div class="approve-status">{{_assignment.category_name}}</div>\n                            </div>\n                        </div>\n                        <div class="job-title">\n                            <span>{{ _assignment.executor.department }} {{ _assignment.executor.job_title}}</span>\n                            <span class="data-from">{{_assignment.execute_time || _assignment.create_time}}</span>\n                        </div>\n                    </div>\n                    <div class="info-content">\n                        <div class="sure_warning" ng-if="_assignment.comment && $ctrl.wf_inst_detail.show_comment">\n                            注意事项：{{ _assignment.comment }}\n                        </div>\n                        <div class="comment_content">\n                            <div class="assign-comment">\n                                <div class=""\n                                    ng-if="$ctrl.wf_inst_detail.is_current && $ctrl.wf_inst_detail.show_comment">\n                                    {{ _assignment.finish ? _assignment.assignment_comment : _assignment.category ? "" :\n                                    $ctrl.translateLabel(_assignment, \'wf_running\', \'assignment\') }}\n                                </div>\n                                <div class=""\n                                    ng-if="!$ctrl.wf_inst_detail.is_current && _assignment.category !== 5 && $ctrl.wf_inst_detail.show_comment">\n                                    {{ _assignment.finish ? _assignment.assignment_comment ?\n                                    _assignment.assignment_comment\n                                    :\n                                    (_assignment.comment && !_assignment.assignment_pass) ? "" :\n                                    _assignment.assignment_pass\n                                    ? $ctrl.translateLabel(_assignment, \'agree\', \'assignment\') :\n                                        $ctrl.translateLabel(_assignment, \'disagree\', \'assignment\') : $ctrl.translateLabel(_assignment, \'not_handle\', \'assignment\') }}\n                                </div>\n                            </div>\n                            <div class="assign-button">\n                                <div class="reminders" ng-click="$ctrl.sendReminders(_assignment)"\n                                    ng-if="$ctrl.wf_inst_detail.is_current && !_assignment.finish && (_assignment.executor.id != $ctrl.employee_id || _assignment.category == 6)">\n                                    {{\'Urge\'|translate}}\n                                </div>\n                                <div class="reminders" ng-class="\'trash\'" ng-click="$ctrl.removeTask(_assignment)"\n                                    ng-if="$ctrl.isRemove(_assignment)">\n                                    <div class="icon icon-hcm-trash"></div>\n                                    <div class="desc">{{\'Cancel\'|translate}}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},"9SWU":function(e,t){e.exports='<div ng-init="init()" class="dialog-simple-input">\n    <input placeholder="请输入{{params.title}}" ng-model="params.text">\n    <div class="help-text">\n        {{params.caption}}\n    </div>\n</div>'},"9hks":function(e,t){e.exports='<div class="yes-or-no-radio">\n    <li class="hc-input-check hc-input-check-item-single">\n        <span ng-click="valueChange(1)">\n        <input type="radio" name="inspur_20180628" value="" ng-checked="model!=0"\n               ng-disabled="options.readOnly" id="inspur_2018062801" class="hc-input-radio">\n        <label for="">\n            <div class="item-name">收到</div>\n        </label>\n        </span>\n    </li>\n    <li class="hc-input-check hc-input-check-item-single">\n        <span ng-click="valueChange(0)">\n        <input type="radio" name="inspur_20180628" value="0" ng-checked="model==0"\n               ng-disabled="options.readOnly" id="inspur_2018062802" class="hc-input-radio">\n        <label for="0">\n            <div class="item-name">未收到</div>\n        </label>\n        </span>\n    </li>\n</div>\n<div class="time-title" ng-hide="hide_time">请选择收到时间：</div>\n<div class="component-container" ng-hide="hide_time">\n    <input ng-show="!options.readOnly && !options.inputLock" class="component-input-inner" ng-blur="blur()"\n           ng-Keyup=\'keyUp($event)\'\n           ng-model="inner_model" placeholder="{{placeholder}}"/>\n    <div ng-show="options.readOnly || options.inputLock" class="component-input-inner">{{model||"&nbsp;"}}</div>\n    <div ng-show="!options.readOnly" ng-click="select()" class="input-icon icon-hcm-calendar"></div>\n</div>'},AjA1:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("EnZy");var i=n("ZbhI"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("5PDf"),c=n.n(r),s=n("/FZm"),d=n.n(s),u=n("OBge"),_=n.n(u),p=n("eLKs"),m=n.n(p),f=n("o+MX"),h=n.n(f),g=n("mrSG"),v=n("kXIO"),b=n("tphj"),y=n("Bs44"),w=n("M/kX"),x=(n("TeQF"),n("M5Mt")),k=n.n(x),$=n("526F"),O=n.n($),D=n("/PXk"),C=n("wis+"),M=function(e){function t(t,n,i,o,a,l){var r=e.call(this,t,n,i,o,l)||this;return r.scope=t,r.rootScope=n,r.hcForm=i,r.hcDialog=o,r.metaVisService=a,r.$filter=l,r}return Object(g.d)(t,e),t.prototype.getData=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){return[2,this._parseData(this.scope.params.data)]}))}))},t.prototype.initOptions=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){return this.options.submit=this.scope.params.submit,this.options.model_key=this.scope.$dialog.options.model_key,this.options.is_master=this.scope.$dialog.options.is_master,this.options.field_list=this.scope.$dialog.options.field_list,this.options.filter_list=this.scope.$dialog.options.filter_list,this.options.model_relations=this.scope.$dialog.options.model_relations,this.options.tip=C.tip,[2]}))}))},t.prototype.getMeta=function(){return Object(g.c)(this,void 0,_.a,(function(){var e,t,n=this;return Object(g.e)(this,(function(i){var o,a,r,s,d,u;switch(i.label){case 0:return(e=angular.copy(C.fields)).getKey("key").options.selectorMapper=m()(o=this.getFieldMapper).call(o,this),e.getKey("key").options.selector=this.getFieldTreeLoader(c()(a=this.options.model_relations).call(a,(function(e){return e.key===n.options.model_key}))),e.getKey("op").options.list=(d=this.metaVisService.OPERATE_LIST,l()(u=d||[]).call(u,(function(e){return{id:e.key,name:e.name||e.label}}))),e.getKey("value_field").options.selector=this.getFieldTreeLoader(c()(r=this.options.model_relations).call(r,(function(e){return e.key!==n.options.model_key}))),e.getKey("value_field").options.selectorMapper=m()(s=this.getFieldMapper).call(s,this),t=e.getKey("value_formula").options,[4,this.metaVisService.getFilterFormulaRefer(this.options.filter_list)];case 1:return t.refer_data=i.sent(),e.getKey("value_type").options.list=[{value:"formula",name:"公式"},{value:"const",name:"固定值"}],this.options.is_master||e.getKey("value_type").options.list.push({value:"field",name:"字段"}),e.getKey("value_field").options.hide=function(){return"field"!==n.form_model.data.value_type},e.getKey("value_formula").options.hide=function(){return"formula"!==n.form_model.data.value_type},e.getKey("value_const").options.hide=function(){return"const"!==n.form_model.data.value_type},[2,e]}}))}))},t.prototype.getFieldMapper=function(e){var t;return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(n){var i;return[2,null===(t=c()(i=this.options.field_list).call(i,(function(t){return t.key===e})))||void 0===t?void 0:t[0]]}))}))},t.prototype.getFieldTreeLoader=function(e){var t=this,n=this;return function(i){return Object(g.c)(t,void 0,void 0,(function(){return Object(g.e)(this,(function(t){var o,a;return i?[2,l()(o=c()(a=n.options.field_list).call(a,(function(e){return e.model_key===i.key}))).call(o,(function(e){return{key:e.key,model_key:i.key,name:e.short_name,is_leaf:!0,icon:n.metaVisService.FIELD_TYPE_ICON[e.type],id:e.key}}))]:[2,l()(e).call(e,(function(e){return{id:e.key,key:e.key,model:e.model,name:e.name,is_leaf:!1}}))]}))}))}},t.prototype.parseData=function(){return Object(g.c)(this,void 0,_.a,(function(){var e;return Object(g.e)(this,(function(t){return e=angular.copy(this.form_model.data,{}),[2,this._composeData(e)]}))}))},t.prototype._parseData=function(e){if(e){var t={key:e.key,op:e.op};return e.value&&(t.value_type=e.value.type,e.value.type&&(t["value_"+e.value.type]=e.value.value)),t}return{}},t.prototype._composeData=function(e){return e?{key:e.key,op:e.op,value:{type:e.value_type,value:e["value_"+e.value_type]}}:{}},t.$inject=["$scope","$rootScope","$hcForm","$hcDialog","metaVisService","$filter"],t}(D.a),S=n("z/LF"),E=n.n(S),P={title:"关联设置",controller:M,template:E.a,size:"small"},j=function(e){function t(t,n,i,o,a){var l=e.call(this,t,n,i,o)||this;return l.scope=t,l.rootScope=n,l.hcDialog=i,l.hcList=o,l.metaVisService=a,l}return Object(g.d)(t,e),t.prototype.initOptions=function(){return Object(g.c)(this,void 0,_.a,(function(){var e;return Object(g.e)(this,(function(t){switch(t.label){case 0:return this.options.submit=this.scope.params.submit,this.options.model_key=this.scope.params.model_key,this.options.relation_models=this.scope.params.relation_models,this.options.static_filters=this.scope.params.static_filters,this.options.is_master=this.scope.params.is_master,e=this.options,[4,this.metaVisService.getModelRelationFields(this.options.relation_models)];case 1:return e.field_list=t.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(g.c)(this,void 0,_.a,(function(){function e(e){if(e)switch(e.type){case"field":var n=t[e.value];return n?n.name:"字段解析错误";case"formula":case"const":return e.value}return""}var t,n=this;return Object(g.e)(this,(function(i){var o;return t=(this.options.field_list||[]).toObject((function(e){return e.key}),(function(e){return e})),[2,[{key:"key",label:"字段",field:["key"],mask:c()(o=this.options.field_list).call(o,(function(e){return e.model_key===n.options.model_key}))},{key:"op",label:"操作",field:["op"],mask:this.metaVisService.OPERATE_LIST},{key:"value",label:"值",field:["value"],mask:e}]]}))}))},t.prototype.getAlterOperator=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){var t;return[2,[{label:"新增",func:m()(t=this.editItem).call(t,this),left:!0}]]}))}))},t.prototype.getRowOperator=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){var t;return[2,[{key:"delete",label:"删除",func:m()(t=this.removeItem).call(t,this)}]]}))}))},t.prototype.getInfoDialog=function(){return O()({},P,{model_key:this.options.model_key,is_master:this.options.is_master,field_list:this.options.field_list,model_relations:this.options.relation_models,filter_list:this.options.static_filters})},t.prototype.removeItem=function(e){var t,n=this,i=c()(t=this.list_model.columns_metas.key.mask).call(t,(function(t){return t.key===e.key}));this.hcDialog.confirm("确认要删除"+(i.length>0?i[0].name:e.key)+"吗？").then((function(){var t,i,a=o()(t=n.list_model.data).call(t,e);a>-1&&(k()(i=n.list_model.data).call(i,a,1),n.list_model.$refreshData())}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","metaVisService"],t}(n("r/mB").a),T=n("nSVW"),A={title:"关联设置",controller:j,template:n.n(T).a},I=n("GGvc"),L=n("55+V"),F=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.alter_operates=[{label:"新增",func:m()(t=n.editItem).call(t,n),left:!0}],n}return Object(g.d)(t,e),t.prototype.getMeta=function(){return[{key:"key",label:"标识",field:["key"]},{key:"name",label:"名称",field:["name"]},{key:"model",label:"模型",field:["model"]}]},t.prototype.getRowOperator=function(){var e,t,n,i;return[{key:"up",icon:"icon-hcm-arrow-cross-up-solid",desc:"上移",func:m()(e=this.upItem).call(e,this)},{key:"down",icon:"icon-hcm-arrow-cross-down-solid",desc:"下移",func:m()(t=this.downItem).call(t,this)},{key:"remove",icon:"icon-hcm-delete-circle-solid",desc:"移除",func:m()(n=this.removeItem).call(n,this)},{key:"filter",icon:"icon-hcm-more-point-solid",desc:"关系",func:m()(i=this.editFilter).call(i,this)}]},t.prototype.getInfoOptions=function(){return{static_filters:this.scope.params.static_filters}},t.prototype.getInfoDialog=function(){return I.a},t.prototype.editFilter=function(e){this.hcDialog.getDialog(A).show({data:c()(e),model_key:e.key,is_master:"master"===e.key,relation_models:this.list_model.data,static_filters:this.scope.params.static_filters}).then((function(t){e.filter=t}))},t}(L.a),R=n("7iwl"),B=n.n(R),U=(n("9Q+z"),{title:"对象关系",controller:F,template:B.a}),q=n("XQQm"),W=n("TlkC"),z={title:"对象设置",controller:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(g.d)(t,e),t.prototype.$onInit=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=W,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t}(q.a),template:E.a,size:"small"},N={title:"对象关系",controller:function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.alter_operates=[{label:"新增",func:m()(t=n.editItem).call(t,n),left:!0}],n}return Object(g.d)(t,e),t.prototype.getMeta=function(){return[{key:"key",label:"标识",field:["key"]},{key:"label",label:"名称",field:["label"]}]},t.prototype.getInfoDialog=function(){return z},t}(L.a),template:B.a},K=n("Asg1"),H=function(){function e(e,t,n,i,o,a){this.scope=e,this.rootScope=t,this.metaVisService=n,this.hcPanel=i,this.dataService=o,this.hcDialog=a,this.options={}}return e.prototype.$onInit=function(){return Object(g.c)(this,void 0,void 0,(function(){var e,t,n,i,o;return Object(g.e)(this,(function(a){var l;switch(a.label){case 0:return e=this,[4,this.parseMeta(this.scope.params.data)];case 1:return e.data=a.sent(),this.options.submit=this.scope.params.submit,n=(t=this.scope.$dialog).operates,o=h()(i=[{key:"submit",label:"确认",func:m()(l=this.submit).call(l,this),default:!0}]),[4,this.getAlterOperates()];case 2:return n.apply(t,[o.apply(i,[a.sent()])]),this.selectDomain(this.domain_list[0]),[2]}}))}))},e.prototype.getAlterOperates=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){return[2,[]]}))}))},e.prototype.parseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){return[2,e]}))}))},e.prototype.unParseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){return[2,e]}))}))},e.prototype.selectDomain=function(e){var t,n,i,o;this.current_domain=e,this.data[e.dataKey]||(this.data[e.dataKey]=[]);var a=this.hcPanel.getPanel(e.panel).showPanel(d()(t=this.scope.$dialog.options.element).call(t,".panel-container"),{data:this.data[e.dataKey],model_relation:this.data.model_relation,static_filters:this.data.static_filters});this.current_panel=a,this.scope.$dialog.operates(h()(n=c()(i=this.scope.$dialog.options.operates).call(i,(function(e){return!("panel_alter"in e)}))).call(n,l()(o=a.$ctrl.getAlterOperates()).call(o,(function(e){return e.left=!0,e.panel_alter=!0,e}))))},e.prototype.submit=function(){return Object(g.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(g.e)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.unParseMeta(this.data)];case 1:return e=i.sent(),this.options.submit?(this.rootScope.show_waiting(),this.options.submit(e).then((function(e){n.scope.$dialog.resolve_data(e),n.scope.$dialog.dialog_close()})).finally((function(){n.rootScope.hide_waiting()}))):(this.scope.$dialog.resolve_data(e),this.scope.$dialog.dialog_close()),[3,3];case 2:return t=i.sent(),console.log(t),this.rootScope.show_warning(t.message),[3,3];case 3:return[2]}}))}))},e.$inject=["$scope","$rootScope","metaVisService","$hcPanel","dataService","$hcDialog"],e}(),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.domain_lib={field:{key:"field",name:"字段",panel:v.a,dataKey:"fields"},filter:{key:"filter",name:"过滤",panel:b.a,dataKey:"filters"},dim:{key:"dim",name:"维度",panel:y.a,dataKey:"aggr_dim"},aggr:{key:"aggr",name:"统计",panel:w.a,dataKey:"aggr_aggr"},model:{key:"model",name:"模型",panel:U,dataKey:"model_relation"},static:{key:"static",name:"参数",panel:N,dataKey:"static_filters"},sort:{key:"sort",name:"排序",panel:K.a,dataKey:"sorts"}},t}return Object(g.d)(t,e),t.prototype.parseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){switch(e.label){case 0:return[4,this.metaVisService.meta2VisMeta(this.scope.params.data)];case 1:return[2,e.sent()]}}))}))},t.prototype.unParseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return[4,this.metaVisService.visMeta2Meta(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.$onInit=function(){return Object(g.c)(this,void 0,void 0,(function(){var t=this;return Object(g.e)(this,(function(n){var i;switch(n.label){case 0:return this.domain_list=l()(i=this.scope.params.domain||["field","filter"]).call(i,(function(e){return t.domain_lib[e]})),[4,e.prototype.$onInit.call(this)];case 1:return[2,n.sent()]}}))}))},t}(H),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.domain_list=[{key:"static",name:"参数",panel:N,dataKey:"static_filters"},{key:"model",name:"模型",panel:U,dataKey:"model_relation"}],t}return Object(g.d)(t,e),t.prototype.$onInit=function(){return Object(g.c)(this,void 0,void 0,(function(){var t;return Object(g.e)(this,(function(n){var i;switch(n.label){case 0:return t=this.scope.params.exclude_domain||[],this.domain_list=c()(i=this.domain_list).call(i,(function(e){return o()(t).call(t,e.key)<=-1})),[4,e.prototype.$onInit.call(this)];case 1:return n.sent(),[2]}}))}))},t.prototype.getAlterOperates=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){var t;return[2,[{key:"refer",label:"参照",func:m()(t=this.referModelState).call(t,this),left:!0,default:!1}]]}))}))},t.prototype.referModelState=function(){return Object(g.c)(this,void 0,void 0,(function(){var e,t,n,i=this;return Object(g.e)(this,(function(o){switch(o.label){case 0:return e=this,t={model:null,state:null},(n=[{key:"model",label:"模型",component:"hc-super-selector",options:{singleLine:!0,selectorObject:"hcm.db.object",placeholder:"请输入模型",required:!1,returnFormat:"name"}},{key:"state",label:"场景",mode:"base",component:"hc-super-selector",options:{singleLine:!0,placeholder:"请输入场景",required:!1,returnFormat:"name"}}]).getKey("state").options.selector=function(e){return Object(g.c)(i,void 0,void 0,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return[4,this.getModelStates(n.getKey("model").options.originObject.id,e)];case 1:return[2,t.sent()]}}))}))},n.getKey("state").options.selectorMapper=function(e){return Object(g.c)(i,void 0,void 0,(function(){return Object(g.e)(this,(function(t){return[2,{id:e,name:e}]}))}))},[4,this.hcDialog.simpleForm("请选择参照对象",n,t)];case 1:return t=o.sent(),this.hcDialog.confirm("应用模型将清除现有定义，继续吗？").then((function(){i.dataService.callHcmOpenApi("hcm.model.meta",{model:t.model,state:t.state,biz_type:"list"}).then((function(t){return Object(g.c)(i,void 0,void 0,(function(){var n;return Object(g.e)(this,(function(i){switch(i.label){case 0:return[4,e.parseMeta(t)];case 1:return n=i.sent(),e.data.static_filters=n.static_filters,e.data.model_relation=n.model_relation,e.selectDomain(e.current_domain),[2]}}))}))}))})),[2]}}))}))},t.prototype.getModelStates=function(e,t){return Object(g.c)(this,void 0,_.a,(function(){var n;return Object(g.e)(this,(function(i){var o;switch(i.label){case 0:return e?[4,this.dataService.callHcmOpenApi("hcm.paas.object.layout.list?category="+encodeURIComponent(e),{biz_type:"list",filter_dict:{model:e,biz_type:"list"},filter_str:t})]:[2,[]];case 1:return n=i.sent(),[2,l()(o=n.list).call(o,(function(e){var t=e.name.split(".");return t.length>=5?{id:t[3],name:t[3]}:{id:null,name:"默认"}}))]}}))}))},t.prototype.parseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return[4,this.metaVisService.origin2VisDataSource(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.unParseMeta=function(e){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return[4,this.metaVisService.visDataSource2Origin(e)];case 1:return[2,t.sent()]}}))}))},t}(H),G=n("tsk0"),J=n.n(G),X=(n("5cMO"),{title:"元数据设置",controller:Y,template:J.a});t.b={title:"元数据设置",controller:V,template:J.a}},AkJS:function(e,t){e.exports='<div class="component-container" ng-click="$ctrl.onClick($event)">\n    <div class="component-input-inner"\n         ng-class="{placeholder:!$ctrl.model}"\n         ng-bind-html="$ctrl.model?$ctrl.valueMask($ctrl.model):(($ctrl.options.readOnly|valueToFunc)()?\'\':$ctrl.options.placeholder)"\n         ng-disabled="($ctrl.options.readOnly|valueToFunc)()"\n    >\n    </div>\n</div>\n'},Asg1:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));n("sMBO");var i=n("FLGM"),o=n.n(i),a=n("OBge"),l=n.n(a),r=n("mrSG"),c=n("DuDV"),s=n("55+V"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.initOptions=function(){return Object(r.c)(this,void 0,l.a,(function(){var t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initOptions.call(this)];case 1:return n.sent(),t=this.options,[4,this.metaVisService.getModelRelationFields(this.options.model_relation)];case 2:return t.field_list=n.sent(),[2]}}))}))},t.prototype.getInfoDialog=function(){return c.a},t.prototype.getListMeta=function(){var e;return[{key:"key",label:"字段",field:["key"],mask:o()(e=this.options.field_list).call(e,(function(e){return{key:e.key,name:e.name}}))},{key:"type",label:"类型",field:["type"],mask:[{key:"asc",name:"升序"},{key:"desc",name:"降序"}]}]},t.prototype.getItemByNode=function(e){return Object(r.c)(this,void 0,l.a,(function(){return Object(r.e)(this,(function(t){return[2,this.metaVisService.getVisItemByNode(e,"sort")]}))}))},t}(s.c),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.meta_type="sort",t}return Object(r.d)(t,e),t.prototype.getInfoDialog=function(){return c.a},t}(s.b),_=n("rLmf"),p=n.n(_),m=(n("9Q+z"),n("L1YK")),f={controller:u,template:n.n(m).a};t.a={controller:d,template:p.a}},B3qb:function(e,t){e.exports='<div class="hc-input-code">\n    <div class="code-content">\n        <div class="input-block">\n            <input ng-disabled="(options.readOnly|valueToFunc)()" name=\'validCode\' placeholder="请输入验证码" ng-model="bindData" required/>\n        </div>\n        <div class="operate-block">\n            <div class="operate green"\n                 ng-class="{invalid:(!is_phone_number_valid)||is_code_waiting}">\n                <span ng-hide="(options.readOnly|valueToFunc)() || is_code_waiting" ng-click="getValidateCode()">获取验证码</span>\n                <span ng-show="!(options.readOnly|valueToFunc)() && is_code_waiting">\n                    <timer id=\'timer\' autostart=false countdown="60" interval="1000"\n                           finish-callback="timerStop()">\n                        {{countdown}}\n                    </timer>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="voice-help" ng-show="is_show_voice||is_voice_sended">\n        <div ng-show="is_show_voice" class=\'voice-send\' ng-click="sendVoiceCode()">\n            没收到验证码？试试语音验证码\n        </div>\n        <div ng-show="is_voice_sended">\n            已为您请求语言验证码，请注意接听\n        </div>\n    </div>\n</div>'},BBF0:function(e,t){e.exports='<div class="tree hcm-nav full-height">\n    <div>\n        <div class="hcm-nav-title" ng-if="!selector_flag">\n            <div class="text">{{(model_meta.tree || {}).description || \'org_tree\' | translate}}\n            </div>\n            \x3c!--<div class="simple-form effect-date" ng-if="model_meta.tree[\'future_business\']">--\x3e\n                \x3c!--<hc-form model=\'effect_date_model\'></hc-form>--\x3e\n            \x3c!--</div>--\x3e\n            <div class="btn-icon-groups">\n                <span class="btn-icon {{model_meta.tree.action.icon||\'icon-hcm-edit\'}}"\n                ng-if="model_meta.tree.action"\n                ng-click="triggerAction(model_meta.tree.action.key)"></span>\n            </div>\n        </div>\n\n        <div class="hcm-simple-tree-container hcm-nav-fixed">\n            <div class="hcm-nav-fixed-content">\n                <hc-simple-tree model="tree_model"></hc-simple-tree>\n            </div>\n        </div>\n    </div>\n    <hc-resizer></hc-resizer>\n</div>\n'},"BHT/":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("TeQF"),n("sMBO"),n("rB9j"),n("UxlC");var i=n("WxoT"),o=n.n(i),a=n("526F"),l=n.n(a),r=n("pPxq"),c=n.n(r),s=n("Kwsy"),d=n.n(s),u=n("5PDf"),_=n.n(u),p=n("mnMc"),m=n.n(p),f=n("FLGM"),h=n.n(f),g=n("o+MX"),v=n.n(g),b=n("OBge"),y=n.n(b),w=n("mrSG"),x=n("g1Qd"),k=(n("IRHV"),n("H0Ds"));n("0F5k"),n("gFnd");window.app.controller("hcReportTableDialog",["$scope","$hcReportTable",function(e,t){e.init=function(){e.report_table=t.createTable("report_table"),e.report_table.$setCellClick(e.cellClick),e.report_table.$setHtml(e.params.html)},e.cellClick=function(t){var n=[t.getAttribute("coordinate"),e.params.sheet_index,t.getAttribute("row_idx"),t.getAttribute("col_idx")];e.$dialog.resolve_data(n),e.$dialog.dialog_close()},e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close}])}]);var $={controller:"hcReportTableDialog",template:"<hc-report-table ng-model='report_table' ng-init='init()'></hc-report-table>",name:"hcReportTableDialog"},O=n("r2xJ"),D=function(){function e(e,t,n,i,a,r,s,u){var p=this;this.scope=e,this.hcForm=t,this.q=n,this.hcDialog=i,this.filter=a,this.hcSortableTree=r,this.dataService=s,this.computeEditorService=u,e.init=function(){return Object(w.c)(p,void 0,y.a,(function(){var t,n,i,o=this;return Object(w.e)(this,(function(a){var l,r;switch(a.label){case 0:return[4,e.initData()];case 1:return a.sent(),[4,e.initFunctionList()];case 2:return a.sent(),[4,e.initFieldList()];case 3:return a.sent(),[4,e.initSheetList()];case 4:return a.sent(),[4,e.initSettingTabs()];case 5:return a.sent(),e.initForm(),e.$dialog.operates(v()(l=[{label:"取消",cancel:!0,func:function(){return e.$dialog.dialog_close()}},{key:"back",left:!0,label:"语法检查",hide:"python"!==e.params.mode||e.params.options.hide_syntax_check,func:function(){return Object(w.c)(o,void 0,void 0,(function(){return Object(w.e)(this,(function(t){switch(t.label){case 0:return[4,e.syntax_check()];case 1:return[2,t.sent()]}}))}))}},{key:"test",left:!0,label:"公式测试",hide:!(null===(n=null===(t=e.params.options)||void 0===t?void 0:t.test)||void 0===n?void 0:n.show),func:function(){return Object(w.c)(o,void 0,void 0,(function(){return Object(w.e)(this,(function(t){switch(t.label){case 0:return[4,e.test()];case 1:return[2,t.sent()]}}))}))}},{key:"submit",label:"确定",func:function(){return e.submit()},default:!0},{key:"format",label:"格式化",func:function(){return e.format()}}]).call(l,h()(r=(null===(i=e.params.options)||void 0===i?void 0:i.alter_operates)||[]).call(r,(function(t){return{label:t.label,left:!0,func:function(){return Object(w.c)(o,void 0,void 0,(function(){return Object(w.e)(this,(function(n){switch(n.label){case 0:return[4,t.func(e)];case 1:return n.sent(),[2]}}))}))}}})))),[2]}}))}))},e.initData=function(){return Object(w.c)(p,void 0,y.a,(function(){return Object(w.e)(this,(function(t){return e.model=e.params.compute||new x.a,e.function_type=e.params.function_type,e.service=angular.extend({},u,e.params.service||{}),e.operate_list=a("arrayMerge")([{key:"+",label:"加",icon:"icon-hcm-add-rectangle-radius"},{key:"-",label:"减",icon:"icon-hcm-minus-rectangle-radius"},{key:"*",label:"乘",icon:"icon-hcm-multiply-rectangle-radius"},{key:"/",label:"除",icon:"icon-hcm-divide-rectangle-radius"},{key:">",label:"大于",icon:"icon-hcm-greater-rectangle-radius"},{key:"<",label:"小于",icon:"icon-hcm-less-rectangle-radius"},{key:"==",label:"等于",icon:"icon-hcm-equal-double-rectangle-radius"},{key:"=",label:"参数赋值",icon:"icon-hcm-equal-rectangle-radius"},{key:">=",label:"大于等于",icon:"icon-hcm-greater-equal-rectangle-radius"},{key:"<=",label:"小于等于",icon:"icon-hcm-less-equal-rectangle-radius"},{key:"!=",label:"不等于",icon:"icon-hcm-not-equal-rectangle-radius"},{key:"&nbsp;",label:"空",icon:"icon-hcm-none-rectangle-radius"}],e.params.operate_list||[]),e.compute_meta=[{key:"content",label:"公式",component:"hc-code",options:{width:"col-12",placeholder:"请在此处编辑公式",mode:e.params.mode||"python",showGutter:!0}}],[2]}))}))},e.initFunctionList=function(){return Object(w.c)(p,void 0,y.a,(function(){var t,n,i;return Object(w.e)(this,(function(o){var l;switch(o.label){case 0:return e.service.domain?(t=e,[4,e.execServiceFunc("hcm.formula.group.list",{domain:a("valueToFunc")(e.service.domain)()})]):[3,2];case 1:return t.function_list=o.sent()||[],[3,4];case 2:return n=e,[4,e.execServiceFunc("flex_report"===e.function_type?e.service.getReportFunctionList:e.service.getFunctionList)];case 3:n.function_list=o.sent()||[],o.label=4;case 4:return e.function_model=r.createDataset({data:h()(l=e.function_list).call(l,(function(e){return e.function_fields=e.function_list,e})),mouseover_node_callback:e.FunctionMouseoverCallback,selected_node_callback:e.FunctionSelectedCallback,multi:!1,biz_type:"function",mode:"select",attachment:null===(i=e.params)||void 0===i?void 0:i.attachment}),[4,e.function_model.$initDataset()];case 5:return o.sent(),e.function_model.$setDblClick((function(t){e.FunctionSelectedCallback(t,"select"),e.setContent()})),[2]}}))}))},e.FunctionMouseoverCallback=function(e){},e.FunctionSelectedCallback=function(t,n){var i,o;m()(i=["select"]).call(i,n)&&(e.temp_function=e.selected_function=t,e.temp_function.value||e.temp_function.doc?document.getElementsByClassName("field-desc")[0].style.height="120px":document.getElementsByClassName("field-desc")[0].style.height="0px"),m()(o=["unSelect"]).call(o,n)&&(e.selected_function=null)},e.onResize=function(){e.compute_form.field_metas.content.options.onResize()},e.initFieldList=function(){return Object(w.c)(p,void 0,y.a,(function(){var t,n;return Object(w.e)(this,(function(i){switch(i.label){case 0:return t=e,[4,e.execServiceFunc(e.service.getFieldList)];case 1:return t.field_list=i.sent()||[],e.field_model=r.createDataset({data:e.field_list,selected_node_callback:e.FieldSelectedCallback,multi:!1,biz_type:"list",mode:"select",attachment:null===(n=e.params)||void 0===n?void 0:n.attachment}),[4,e.field_model.$initDataset()];case 2:return i.sent(),e.field_model.$setDblClick((function(t){e.FieldSelectedCallback(t,"select"),e.setContent()})),[2]}}))}))},e.initSheetList=function(){return Object(w.c)(p,void 0,y.a,(function(){var t,n,i,o=this;return Object(w.e)(this,(function(a){var l;switch(a.label){case 0:return e.params.options.need_sheet_cell?(t=e,[4,e.execServiceFunc(e.service.getSheetList)]):[3,3];case 1:return t.sheet_list=a.sent()||[],n=[{key:"sheet_list",expand:!0,selected_node_callback:e.ExtraSelectedCallback,fields:h()(l=e.sheet_list).call(l,(function(e){return angular.extend(e,{name:e.sheet_name,type:"table"})})),name:"可选页签"}],e.sheet_model=r.createDataset({data:n,multi:!1,biz_type:"list",mode:"select",attachment:null===(i=e.params)||void 0===i?void 0:i.attachment}),[4,e.sheet_model.$initDataset()];case 2:a.sent(),e.sheet_model.$setDblClick((function(t){return Object(w.c)(o,void 0,void 0,(function(){var n,i,o;return Object(w.e)(this,(function(a){switch(a.label){case 0:return[4,e.openReportTableDialog(t)];case 1:return n=a.sent(),i=(o=e.params.service).parseCellFunc.apply(o,Object(w.h)(n)),e.setContent(i),[2]}}))}))})),a.label=3;case 3:return[2]}}))}))},e.openReportTableDialog=function(e){return Object(w.c)(p,void 0,void 0,(function(){return Object(w.e)(this,(function(t){switch(t.label){case 0:return[4,this.hcDialog.getDialog($).params(e).show()];case 1:return[2,t.sent()]}}))}))},e.FieldSelectedCallback=function(n,i){var o,a,l;m()(o=["select"]).call(o,i)&&(e.selected_field=n,e.value_form=null,h()(l=e.field_list).call(l,(function(i){var o;null===(o=i.info_fields)||void 0===o||h()(o).call(o,(function(i){i.options=i.options||{},i.key===n.key&&(i.options.width="col-12",i.options.singleLine=!0,i.options.placeholder="字段可选值",i.label="",e.value_form=t.createForm("value_form").$setMeta([i]))}))})));m()(a=["unSelect"]).call(a,i)&&(e.selected_field=null,e.selected_function=null,e.value_form=null)},e.ExtraSelectedCallback=function(t,n){var i,o;m()(i=["select"]).call(i,n)&&(e.selected_field=t,e.value_form=null),m()(o=["unSelect"]).call(o,n)&&(e.selected_field=null,e.selected_function=null,e.value_form=null)},e.format=function(){e.$broadcast("code_format")},e.initSettingTabs=function(){return Object(w.c)(p,void 0,y.a,(function(){var t,n,i,o,a,l,r,c,s,d;return Object(w.e)(this,(function(u){var p;switch(u.label){case 0:var f;if(e.setting_tabs=[{key:"field_list",label:"可选项目",model:e.field_model},{key:"function_list",label:"可选函数",model:e.function_model}],e.params.options.need_sheet_cell&&e.setting_tabs.push({key:"sheet_list",label:"可选单元格",model:e.sheet_model}),null===(s=e.params.options)||void 0===s?void 0:s.tabs_list)e.setting_tabs=_()(f=e.setting_tabs).call(f,(function(t){var n,i;return null===(i=e.params.options)||void 0===i?void 0:m()(n=i.tabs_list).call(n,t.key)}));if(!(null===(d=e.params.options)||void 0===d?void 0:d.extra_tab))return[3,14];t=[],u.label=1;case 1:u.trys.push([1,7,8,13]),n=Object(w.b)(e.params.options.extra_tab),u.label=2;case 2:return[4,n.next()];case 3:return(i=u.sent()).done?[3,6]:(o=i.value,[4,e.extraTabToModel(o)]);case 4:a=u.sent(),t.push({key:o.key,label:o.label,model:a}),u.label=5;case 5:return[3,2];case 6:return[3,13];case 7:return l=u.sent(),r={error:l},[3,13];case 8:return u.trys.push([8,,11,12]),i&&!i.done&&(c=n.return)?[4,c.call(n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,12];case 11:if(r)throw r.error;return[7];case 12:return[7];case 13:e.setting_tabs=v()(p=e.setting_tabs).call(p,t),u.label=14;case 14:return e.current_tab=angular.copy(e.setting_tabs[0]),[2]}}))}))},e.extraTabToModel=function(t){return Object(w.c)(p,void 0,void 0,(function(){var n,i,o,a=this;return Object(w.e)(this,(function(l){switch(l.label){case 0:return[4,t.func()];case 1:return n=l.sent()||[],[4,(i=r.createDataset({data:n,selected_node_callback:e.ExtraSelectedCallback,multi:!1,biz_type:"list",mode:"select",attachment:null===(o=e.params)||void 0===o?void 0:o.attachment})).$initDataset()];case 2:return l.sent(),i.$setDblClick((function(n){return Object(w.c)(a,void 0,void 0,(function(){var i;return Object(w.e)(this,(function(o){switch(o.label){case 0:return t.dbClickCallBack&&"function"==typeof t.dbClickCallBack?[4,t.dbClickCallBack(n)]:[3,2];case 1:return i=o.sent()||void 0,[3,3];case 2:e.ExtraSelectedCallback(n,"select"),o.label=3;case 3:return e.setContent(i),[2]}}))}))})),[2,i]}}))}))},e.initForm=function(){var n;e.compute_form=t.createForm("compute_field"),e.compute_form.$setMeta(e.compute_meta).$setTip((null===(n=e.params.options)||void 0===n?void 0:n.form_tips)||"操作提示:\n1、双击字段自动插入替换值\n2、单击字段可以选择字段可选值插入\n3、单击可选函数有具体说明，请仔细阅读后使用").$setData(e.model),d()((function(){e.compute_form.field_metas.content.options.onResize()}),500)},e.execServiceFunc=function(e,t){return Object(w.c)(p,void 0,void 0,(function(){var n=this;return Object(w.e)(this,(function(i){return e?[2,"function"==typeof e?e(t):s.callHcmOpenApi(e,t||{})]:[2,Object(w.c)(n,void 0,void 0,(function(){return Object(w.e)(this,(function(e){return[2]}))}))]}))}))},e.selectTab=function(t){e.current_tab=angular.copy(t),e.selected_function=null,e.selected_field=null,e.temp_function=null,e.value_form=null,document.getElementsByClassName("field-desc")[0].style.height="0px"},e.insert=function(t){t?e.compute_form.field_metas.content.options.insert(""+t):e.setContent()},e.setContent=function(t){var n,i,o;t?o=t:"function_list"===e.current_tab.key?e.selected_function&&(o=e.selected_function.value):e.selected_field&&(o=(null===(n=e.params)||void 0===n?void 0:n.fieldFormat)?null===(i=e.params)||void 0===i?void 0:i.fieldFormat(e.selected_field):e.selected_field.key,a("indexOf")(e.model.args,e.selected_field)<0&&e.model.args.push({key:e.selected_field.key,name:e.selected_field.name})),o&&e.insert(o)},e.resolveField=function(){return Object(w.c)(p,void 0,void 0,(function(){var t,n,i,o,a,l,r,s=this;return Object(w.e)(this,(function(d){switch(d.label){case 0:return t=e.compute_form.field_metas.content.options.getValue(),"python"===e.params.mode&&c()(t).call(t,"# V2#")&&(t=t.replace("# V2#","#V2#"),e.compute_form.field_metas.content.options.setValue(t)),n="json"===e.params.mode?function(e){return Object(w.c)(s,void 0,void 0,(function(){return Object(w.e)(this,(function(t){return[2,{content:e,value:e}]}))}))}:e.service.computeParse,i=e,a=(o=angular).extend,l=[{},e.model],[4,e.execServiceFunc(n,"json"===e.params.mode?JSON.parse(t):t)];case 1:return i.model=a.apply(o,v()(l).call(l,[d.sent()||{}])),e.model.args=null===(r=e.model.args)||void 0===r?void 0:_()(r).call(r,(function(n){var i;return m()(t).call(t,(null===(i=e.params)||void 0===i?void 0:i.fieldFormat)?e.params.fieldFormat(n):n.key)})),[2]}}))}))},e.check=function(){return Object(w.c)(p,void 0,void 0,(function(){var t,n,o;return Object(w.e)(this,(function(a){var r;switch(a.label){case 0:return[4,e.resolveField()];case 1:return a.sent(),t={},e.model.args.length&&(null===(o=e.params)||void 0===o?void 0:o.check_args_input)?[4,i.simpleForm("请输入校验参数",h()(r=e.model.args).call(r,(function(t){var n;return{component:"hc-input",key:(null===(n=e.params)||void 0===n?void 0:n.fieldFormat)?e.params.fieldFormat({key:t.key}):t.key,label:t.label||t.name||t.key}})),{})]:[3,3];case 2:n=a.sent(),l()(t,n||{}),a.label=3;case 3:return[4,e.execServiceFunc(e.service.computeCheck,l()({},e.model,{domain:e.service.domain,context:t})).then((function(t){e.show_warning("公式校验通过!"),e.check_result=t,e.validate=!0}),(function(t){e.check_result=t.description,e.validate=!1}))];case 4:return a.sent(),[2]}}))}))},e.test=function(){return Object(w.c)(p,void 0,void 0,(function(){var t,n,a;return Object(w.e)(this,(function(l){switch(l.label){case 0:return t={},n=e.compute_form.field_metas.content.options.getValue(),e.params.options.test.form_meta?[4,i.simpleForm("请输入参数",e.params.options.test.form_meta,e.params.options.test.form_params||{},{})]:[3,2];case 1:t=l.sent(),l.label=2;case 2:return[4,s.callHcmOpenApi("hcm.formula.test",{formula_str:n,params:angular.extend(t,e.params.options.test.api_params||{}),engine:e.params.options.test.engine,domain:e.service.domain})];case 3:return a=l.sent(),i.confirm("本次计算结果为本次执行的结果为:\n"+o()(a)),[2]}}))}))},e.syntax_check=function(){return Object(w.c)(p,void 0,void 0,(function(){var t,n,o,a=this;return Object(w.e)(this,(function(r){switch(r.label){case 0:return"python"!==e.params.mode?[3,7]:(t=e.compute_form.field_metas.content.options.getValue(),[4,(n=function(t){return Object(w.c)(a,void 0,void 0,(function(){var n,i,o,a,l,r,c,d,u;return Object(w.e)(this,(function(_){var p;switch(_.label){case 0:return n=(null===(c=null===(r=e.params.options)||void 0===r?void 0:r.check)||void 0===c?void 0:c.api)||"hcm.formula.check",i={formula_str:t,domain:e.service.domain},(null===(u=null===(d=e.params.options)||void 0===d?void 0:d.check)||void 0===u?void 0:u.params)?"function"!=typeof e.params.options.check.params?[3,2]:[4,e.params.options.check.params()]:[3,4];case 1:return a=_.sent(),[3,3];case 2:a=e.params.options.check.params,_.label=3;case 3:return o=a,i=angular.extend(i,o),[3,5];case 4:l={},h()(p=e.field_list).call(p,(function(e){var t;h()(t=e.list_fields||e.fields).call(t,(function(e){l[e.key]=null}))})),i=angular.extend(i,{context:l}),_.label=5;case 5:return[4,s.callHcmOpenApi(n,i)];case 6:return[2,_.sent()]}}))}))})(t)]);case 1:return(o=r.sent()).success?e.service.computeCheck?[4,e.resolveField()]:[3,4]:[3,6];case 2:return r.sent(),[4,e.execServiceFunc(e.service.computeCheck,l()({},e.model,{domain:e.service.domain,context:{}}))];case 3:return r.sent(),[3,5];case 4:e.show_warning("语法校验通过！"),r.label=5;case 5:return[3,7];case 6:return[2,i.getDialog(O.a).show({validate:o,fixedCode:t,checkValidCallback:n,title:"公式校验"}).then((function(t){e.compute_form.field_metas.content.options.setValue(t)}))];case 7:return[2]}}))}))},e.submit=function(){return Object(w.c)(p,void 0,void 0,(function(){var t,n,i,o;return Object(w.e)(this,(function(a){switch(a.label){case 0:if("json"===e.params.mode)try{JSON.parse(e.compute_form.field_metas.content.options.getValue())}catch(t){return e.show_warning("JSON格式不规范"),[2]}return(null===(i=null===(n=e.params)||void 0===n?void 0:n.options)||void 0===i?void 0:i.formula_type)&&(t=e.compute_form.field_metas.content.options.getValue(),"only_formula"===e.params.options.formula_type&&t&&c()(t).call(t,"="))?(e.show_warning("此处不需要以等号开头"),[2]):[4,e.resolveField()];case 1:return a.sent(),(null===(o=e.params)||void 0===o?void 0:o.need_check)?[4,e.syntax_check()]:[3,3];case 2:a.sent(),a.label=3;case 3:return e.$dialog.resolve_data(e.model),e.$dialog.check_close(),[2]}}))}))}}return e.$inject=["$scope","$hcForm","$q","$hcDialog","$filter","$hcReportDataset","dataService",k.a],e}(),C=n("fuHy"),M=n.n(C);n("Xwqd"),t.a={title:"公式编辑器",template:M.a,controller:D}},BSnz:function(e,t){e.exports='<div class="hc-list-dialog-selector" ng-init="init()">\n    <div class="filter">\n        <div class="search">\n            <div class="button icon-user-search"></div>\n            <input type=\'search\' placeholder="输入关键字进行查找" autocapitalize="off" autocorrect="off" autocomplete="off"\n                   spellcheck="false" ng-model-options="{\'updateOn\':\'default blur\',\'debounce\':{\'defalut\':500,\'blur\':0}}"\n                   ng-model="search_key" ng-change="getFilterData()">\n        </div>\n    </div>\n    <div class="options-list">\n        <div class="item" ng-repeat="item in list track by $index" ng-click="choose(item,$index)"\n             ng-class="{\'selected\':item.select}"\n             ng-show="!search_key||item[params.value].indexOf(search_key)>=0">\n            <span>{{item[params.value]}}</span>\n            <span class="icon" ng-class="{\'icon-hcm-right\':item.select}"></span>\n        </div>\n    </div>\n    <div class="content-null">没有查找到信息，请换个检索词</div>\n</div>'},Bdp6:function(e,t){e.exports='<div class="sub-list" ng-if=\'model\' ng-init="init()">\n    <div class="hcm-content-body" ng-repeat="v in model.model_list track by $index" ng-if="!v.hide">\n        <div class="list-operate">\n            <div class="list-name">{{v.name}}</div>\n            <div class="btn-box" ng-click="a.func(v)" ng-repeat="a in v.list_btn_model">\n                <span class="btn-name">{{a.label}}</span>\n            </div>\n        </div>\n        <hc-list-new model=v.list_model></hc-list-new>\n    </div>\n</div>\n'},Bekm:function(e,t){e.exports='<div class="mobile-btn-list">\n    <div class="outer-list"\n         ng-class="{\'with-more\': model.mobile_actions(btn_in_dialog).length > model.outer_btn_count}">\n        <div ng-repeat="_action in model.mobile_actions(btn_in_dialog).slice(0, model.outer_btn_count + (model.mobile_actions(btn_in_dialog).length > (model.outer_btn_count + (model.show_third_btn ? 1 : 0))? 0 : 1))"\n             ng-click="item_func(_action)"\n             ng-style="_action.options.style"\n             class="hc-dialog-button"\n             ng-class="{\'default\': _action.default || _action.is_important || model.mobile_actions(btn_in_dialog).length == 1,\n             \'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled}">\n            <div class="tg" ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n        </div>\n        <div class="hc-dialog-button more"\n             ng-click="showMore($event)"\n             ng-if="model.mobile_actions(btn_in_dialog).length > (model.outer_btn_count + (model.show_third_btn ? 1 : 0))">\n            <div class="tg icon-hcm-more-point more-icon"></div>\n            <div class="more-text">更多</div>\n        </div>\n    </div>\n    <div class="mask" ng-show="itemIsMoreShow()">\n        <div class="mobile-drop-down-content">\n            <div class="drop-down-list">\n                <div class="tip" ng-if="model.mobile_actions(btn_in_dialog).slice(2).length > 8">共&ensp;\n                    <div class="high-light">\n                        {{model.mobile_actions(btn_in_dialog).slice(model.outer_btn_count).length}}\n                    </div>&ensp;个操作项\n                </div>\n                <div class="scroll-field">\n                    <div ng-repeat="_action in model.mobile_actions(btn_in_dialog).slice(model.outer_btn_count) track by $index"\n                         class="mobile-button"\n                         ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled}"\n                         ng-show="!(_action.hide|valueToFunc)()"\n                         ng-click="item_func(_action)"\n                         ng-bind-html="(_action.label|valueToFunc)()|toTrusted">\n                    </div>\n                </div>\n                <div class="mobile-button close-button" ng-click="hideMore()">取消</div>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},Bs44:function(e,t,n){"use strict";n.d(t,"b",(function(){return k}));var i=n("OBge"),o=n.n(i),a=n("mrSG"),l=n("/EOG"),r=(n("TeQF"),n("rB9j"),n("EnZy"),n("526F")),c=n.n(r),s=n("/FZm"),d=n.n(s),u=n("XQQm"),_=n("Mu9o"),p=n("1GJp"),m=function(e){function t(t,n,i,o,a,l,r){var c=e.call(this,t,n,i,o,a)||this;return c.scope=t,c.rootScope=n,c.hcDialog=i,c.hcForm=o,c.filter=a,c.dataService=l,c.$q=r,c}return Object(a.d)(t,e),t.prototype.$onInit=function(){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=_,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t.prototype.getData=function(){return Object(a.c)(this,void 0,void 0,(function(){return Object(a.e)(this,(function(e){return[2,angular.copy(this.parseFormatter(this.scope.params.data))]}))}))},t.prototype.getGroupMeta=function(){return Object(a.c)(this,void 0,void 0,(function(){return Object(a.e)(this,(function(e){return[2,this.setting_form_meta.groups]}))}))},t.prototype.getMeta=function(){return Object(a.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(a.e)(this,(function(i){return e=angular.copy(this.setting_form_meta.fields),(this.scope.params.data.object||this.scope.params.data.refer)&&((t=d()(e).call(e,(function(e){return"sorts.fields"===e.key}))).options=Object(a.a)(Object(a.a)({},t.options),{hide:!1,individual_name:"name",selector:function(){return n.dataService.callHcmOpenApi("hcm.paas.object.field.list",{filter_dict:{model:[n.scope.params.data.object||n.scope.params.data.refer],has_name:!0,is_logic:!0,without_convert_id:!0},extra_property:{}})},selectorMapper:function(e,t){var i=n.$q.defer();return n.dataService.callHcmOpenApi("hcm.paas.object.field.list",{filter_dict:{model:[n.scope.params.data.object||n.scope.params.data.refer],keys:e,has_name:!0,is_logic:!0,without_convert_id:!0},extra_property:{}}).then((function(e){i.resolve(e)})),i.promise}})),[2,e]}))}))},t.prototype.parseData=function(){return Object(a.c)(this,void 0,o.a,(function(){var e;return Object(a.e)(this,(function(t){return(e=angular.copy(this.form_model.data)).formatter="strMask:__total__,"+e.formatter_0+";,"+e.formatter_1+";__avg__,"+e.formatter_2,delete e.formatter_0,delete e.formatter_1,delete e.formatter_2,[2,e]}))}))},t.prototype.parseFormatter=function(e){var t,n=e.formatter.split(";");return e.formatter_0=n[0].split(",")[1],e.formatter_1=n[1].split(",")[1],e.formatter_2=(null===(t=n[2])||void 0===t?void 0:t.split(",")[1])||"平均",e},t.prototype.advanceEdit=function(){return Object(a.c)(this,void 0,void 0,(function(){var e,t,n,i,o,l=this;return Object(a.e)(this,(function(a){switch(a.label){case 0:return t=(e=this.hcDialog.getDialog(p.a)).show,n={readOnly:!1},o=(i=JSON).stringify,[4,this.parseData()];case 1:return t.apply(e,[(n.data=o.apply(i,[a.sent()]),n)]).then((function(e){c()(l.form_model.data,l.parseFormatter(JSON.parse(e)))})),[2]}}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","$filter","dataService","$q"],t}(u.a),f=n("z/LF"),h={title:"维度设置",controller:m,template:n.n(f).a,size:"small",name:"statDimInfoSetting"},g=n("55+V"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.getInfoDialog=function(){return l.a},t.prototype.getItemByNode=function(e){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){return[2,this.metaVisService.getVisItemByNode(e,"dim")]}))}))},t}(g.c),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.meta_type="dim",t}return Object(a.d)(t,e),t.prototype.getInfoDialog=function(){return h},t}(g.b),y=n("rLmf"),w=n.n(y),x=(n("9Q+z"),n("L1YK")),k={controller:b,template:n.n(x).a};t.a={controller:v,template:w.a}},Bvup:function(e,t){e.exports='<div class="hc-dragging" ng-class="is_collapsed?\'\':\'dragging-disabled\'"\n     hc-dragging>\n    <div class="dragging-navigate"\n         ng-class="is_collapsed?\'collapsed\':\'expanded\'">\n        <div class="navigate-main" ng-click="main_navigate.handler()">\n            <div class="navigate-main-normal" ng-class="(main_navigate.icon|valueToFunc)()"></div>\n            <div class="navigate-main-left icon-hcm-arrow-right"></div>\n            <div class="navigate-main-right icon-hcm-arrow-left"></div>\n        </div>\n        <div class="navigate-list" ng-style="{\'width\': (50+expand_navigates.length*45)+\'px\'}">\n            <div class="navigate-item"\n                 ng-repeat="navigate in expand_navigates" ng-click="navigate_click(navigate)"\n                 ng-class="navigate.disabled?\'disabled\':\'\'">\n                <div class="item-icon" ng-show="!!(navigate.icon|valueToFunc)()" ng-class="(navigate.icon|valueToFunc)()"></div>\n                <div class="item-caption">{{(navigate.caption|valueToFunc)()}}</div>\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-click="is_collapsed=true;" ng-show="!is_collapsed" class="hc-mask"></div>'},"C/bn":function(e,t){e.exports='<div class=\'hc-dialog-tour-mask\'>\n    <svg id="hc-dialog-tour-mask-svg" style="height: 100%; width: 100%">\n        <defs>\n            <mask id="hc-dialog-tour-mask:focus">\n                <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>\n            </mask>\n        </defs>\n        <rect x="0" y="0" width="100%" height="100%" fill="rgba(0,0,0,0.5)" mask="url(#hc-dialog-tour-mask:focus)"></rect>\n    </svg>\n</div>\n<div class=\'hc-dialog-window hc-dialog-tour-popover\'\n     ng-class="{\'no-target\': !current_step.element}">\n    <div class="hc-dialog-tour-arrow"></div>\n    <header>\n        <div class="popover-title" >\n            {{current_step.popover.title}}\n        </div>\n        <div class="icon-close icon-hcm-delete" ng-click="close()"></div>\n    </header>\n    <div class=\'hc-dialog-content\'\n         ng-bind-html="current_step.popover.description"\n    ></div>\n    <footer>\n        <div class="popover-indicator">{{current_index + 1}}/{{step_length}}</div>\n        <div class="popover-btn-group">\n            <div class="popover-btn"\n                 ng-click="previousStep()"\n                 ng-if="current_index > 0">\n                <div>{{current_step.popover.prevBtnText || \'上一步\'}}</div>\n            </div>\n            <div class="popover-btn primary"\n                 ng-click="nextStep()"\n                 ng-if="current_index < step_length && current_index !== step_length - 1">\n                <div>{{current_step.popover.nextBtnText || \'下一步\'}}</div>\n            </div>\n            <div class="popover-btn primary"\n                 ng-click="close()"\n                 ng-if="current_index === step_length - 1">\n                <div>{{current_step.popover.completeBtnText || \'结束\'}}</div>\n            </div>\n        </div>\n    </footer>\n</div>\n'},CGID:function(e,t){e.exports='<div class="model-dialog-style" name="{{getIdentityName()}}" ng-init="init()">\n    <hc-form model="base_form"></hc-form>\n    <hc-sub-list model="sub_model" ng-if="sub_model.parent_data"></hc-sub-list>\n</div>\n'},CVbs:function(e){e.exports=JSON.parse('{"tip":"维护字段显示属性","fields":[{"key":"key","label":"标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入标识","required":true}},{"key":"label","label":"名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"field","label":"字段","component":"hc-input-json","options":{"singleLine":false,"width":"col-12","placeholder":"请输入字段","required":true}},{"key":"description","label":"字段描述","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"鼠标悬停表头时会在表格上显示的文字内容","required":false}},{"key":"align","label":"对齐","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"list":[{"name":"居左","value":"left"},{"name":"居中","value":"center"},{"name":"居右","value":"right"}]}},{"key":"width","label":"宽度","component":"hc-input","options":{"data_type":"number","singleLine":false,"width":"col-12","placeholder":"请输入宽度","required":false}},{"key":"sequence","label":"顺序值","component":"hc-input","options":{"data_type":"number","singleLine":false,"width":"col-12","placeholder":"请输入顺序值","required":true}},{"key":"precision","label":"数据精度","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入保留小数位数","required":false,"data_type":"number"}},{"key":"format","label":"格式化数据","component":"hc-super-selector","options":{"singleLine":true,"width":"col-12","list":[{"name":"千分位符","value":"numberFormat"},{"name":"货币","value":"currency"}]}}]}')},CoJ3:function(e,t,n){"use strict";var i,o=n("xlHU"),a=n.n(o),l=n("RXMP"),r=n.n(l),c=n("KHwQ").module("hcm.common");window.app||(window.app=c),window.moment=n("wd/R"),c.config(["$stateProvider",function(e){e.state("role_error",{url:"/role_error?role_name&next",template:n("zylf"),controller:"RoleErrorCtrl",role:"user"}),e.state("login_error",{url:"/login_error",template:n("yjtT"),controller:"LoginErrorCtrl"})}]);var s=n("II0Q");r()(i=a()(s).call(s)).call(i,(function(e){c.config(["$stateProvider",s(e)])})),t.a=c},CsXa:function(e,t,n){"use strict";n("rB9j"),n("EnZy");var i=n("lHQ6"),o=n.n(i),a=n("ZbhI"),l=n.n(a),r=n("xS4f"),c=n.n(r),s=n("xscb"),d=n.n(s),u=(n("biZU"),n("vyYO"),n("wd/R")),_=function(){function e(e,t,n){this.scope=e,this.timeout=t,this.$filter=n}return e.prototype.init=function(){var e,t=this;this.initPickerConfig(),this.scope.model=this.$filter("parseFormat")(this.scope.params.model||new Date,(null===(e=this.scope.params.options)||void 0===e?void 0:e.format)||"yyyy-MM-dd"),this.scope.close=function(){t.scope.$dialog.reject_data(),t.scope.$dialog.dialog_close()}},e.prototype.initPickerConfig=function(){var e,t,n,i,o,a,r,s,d,u,_,p,m,f,h,g,v,b,y={enabledDate:(null===(n=this.scope.params.options)||void 0===n?void 0:n.enabledDate)||function(){return!0},format:(null===(i=this.scope.params.options)||void 0===i?void 0:i.format)||"yyyy-MM-dd",enableToday:null===(a=null===(o=this.scope.params.options)||void 0===o?void 0:o.enableToday)||void 0===a||a,enableTillNow:null!==(s=null===(r=this.scope.params.options)||void 0===r?void 0:r.enableTillNow)&&void 0!==s&&s,tillNowTip:(null===(d=this.scope.params.options)||void 0===d?void 0:d.tillNowTip)||"至今",disabledYear:null!==(_=null===(u=this.scope.params.options)||void 0===u?void 0:u.disabledYear)&&void 0!==_&&_,minuteStep:null!==(m=null===(p=this.scope.params.options)||void 0===p?void 0:p.minuteStep)&&void 0!==m?m:1,minYear:this.getRealYear(null===(f=this.scope.params.options)||void 0===f?void 0:f.minYear,"1900"),maxYear:this.getRealYear(null===(h=this.scope.params.options)||void 0===h?void 0:h.maxYear,"2199")};this.options=y;var w={m:"minute",h:"hour",d:"day",M:"month",Q:"quarter",H:"halfYear",y:"year"},x="d";c()(e="dMQHyhm".split("")).call(e,(function(e){var t;if(l()(t=y.format).call(t,e)>=0)return x=e,!0}));var k="d";c()(t="mhdMQHy".split("")).call(t,(function(e){var t;if(l()(t=y.format).call(t,e)>=0)return k=e,!0})),this.pickerConfig={enabledDate:y.enabledDate,enableToday:null===(g=y.enableToday)||void 0===g||g,enableTillNow:null!==(v=y.enableTillNow)&&void 0!==v&&v,tillNowTip:y.tillNowTip||"至今",minuteStep:y.minuteStep||5,disabledYear:null!==(b=y.disabledYear)&&void 0!==b&&b,startView:w[x],minView:w[k]}},e.prototype.getRealYear=function(e,t,n){return!0===e?e=u().format("YYYY"):e?"string"!=typeof e||n||(e=o()(e.substring(0,4))):t&&("string"==typeof t&&(t=o()(t)),e=t),e},e.prototype.setDate=function(e){this.scope.params.notify?this.scope.$dialog.notify_data(e):(this.scope.$dialog.resolve_data(e),this.scope.$dialog.dialog_close())},e.$inject=["$scope","$timeout","$filter"],e}();window.app.controller("hcDatetimePickerPanel",_),t.a={template:d.a,controller:"hcDatetimePickerPanel",mask:!1,overflow:"anchor",maskClose:!0,minHeight:277,name:"hc-datetime-picker-panel",size:"pc"===window.client?"small":""}},D3lZ:function(e,t){e.exports='<div class="home-widget-emp-change-timeline" ng-init="init()">\n    <div class="line-content">\n        <div class="border">\n            <div class="operate" ng-click="$ctrl.rollNode(\'left\')" ng-hide="$ctrl.left_flag">\n                <div class="icon-hcm-arrow-left"></div>\n            </div>\n        </div>\n        <div class="center">\n            <div class="center-line">\n                <div class="node" ng-repeat="item_ in $ctrl.model.data">\n                    <div>\n                        <img ng-src="{{ item_.photo|hcPhoto:64}}">\n                        <div class="text-normal">{{item_.name}}</div>\n                        <div class="icon-finish"></div>\n                        <div class="text-normal bold">{{item_.begin_date}}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="time-horizontal"></div>\n        </div>\n        <div class="border">\n            <div class="operate" ng-click="$ctrl.rollNode(\'right\')" ng-hide="$ctrl.right_flag">\n                <div class="icon-hcm-arrow-right"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},DKEN:function(e,t,n){"use strict";n("rB9j"),n("UxlC");var i=n("526F"),o=n.n(i),a=n("UtpJ"),l=n.n(a),r=(n("srGB"),n("qF75")),c=n("UAnq"),s=n.n(c),d=n("1hbj");window.app.controller("HCCommonSelectorPanelCtrl",["$controller","BaseCRUDService","$scope",function(e,t,n){var i=t.getModelService(n.params.model);e(r.a,{$scope:n,CRUDService:i,InfoDialog:Object(d.a)(n.params.model)}),n.refresh_tree=!0,n.getFilterDict=function(){var e,t,i=-1===n.tree_model.selectedNode.id?void 0:n.tree_model.selectedNode.id,a=l()(e=(n.params.tree_model||n.model_meta.tree.model).replace(/([A-Z])/g,"_$1").toLowerCase()).call(e,1),r={tree_node_id:i,enabled:!0};r[(null===(t=n.model_meta.tree.tree_key)||void 0===t?void 0:t.tree_node_key)||n.model_meta.tree.tree_key||a+"_id"]={child_include:i};var c=n.params.filter_dict||{};return c=n.funcParse(angular.isFunction(c)?c():c),o()(r,c)}}]),t.a={controller:"HCCommonSelectorPanelCtrl",template:s.a,title:"选择器",name:"tree-list-selector"}},DaBN:function(e,t){e.exports='<div class="portal-plugin-item-set dashboard-set" ng-init="initScheme()">\n    <div class="setting">\n        <hc-form model="scheme_form"></hc-form>\n    </div>\n    <div class="preview">\n        <div ng-if="!add_plugin_config" class="tip" ng-click="refresh_chard(true)">\n            当前分析配置信息还未完善<br>点击查看<span class="blue">提示</span>\n        </div>\n        <home-widget-dashboard ng-if="add_plugin_config" model="add_plugin_config"></home-widget-dashboard>\n    </div>\n</div>\n'},DcX3:function(e,t,n){"use strict";n("oVuX"),n("sMBO");var i=n("M5Mt"),o=n.n(i),a=n("xlHU"),l=n.n(a),r=n("o+MX"),c=n.n(r),s=n("5PDf"),d=n.n(s),u=n("BF1V"),_=n.n(u),p=n("Vi3r"),m=n.n(p),f=n("+oHS"),h=n.n(f),g=n("RXMP"),v=n.n(g),b=n("FLGM"),y=n.n(b),w=(n("2B1R"),n("UtpJ")),x=n.n(w),k=n("/FZm"),$=n.n(k),O=n("a0dU"),D=n.n(O),C=(n("ls82"),n("SPx3")),M=n.n(C),S=n("sEfC"),E=n.n(S),P=(n("rB9j"),n("EnZy"),n("KYsz")),j=n.n(P),T=n("5tqG"),A=n.n(T),I=n("6UaR"),L=n.n(I),F=n("lHQ6"),R=n.n(F),B=n("guyh"),U=n.n(B),q=n("mnMc"),W=n.n(q),z=n("nhkr"),N=n.n(z);n("X0ZH");window.app.service("portalChartService",["$q","contextService","$filter","dataService","$hcDialog",function(e,t,n,i,o){var a;this.getMap=function(e){return i.callHcmOpenApi("hcm.model.get",{model:"Maps",id_:e})},this.getData=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.defer();return i.callHcmOpenApi("hcm.model.count.for.dashboard",t,null,n).then((function(e){var t;e=y()(t=e.list).call(t,(function(e){var t;return v()(t=h()(e)).call(t,(function(t){var n;e[t]&&"object"===N()(e[t])&&W()(n=[null,void 0,""]).call(n,e[t].name)&&(e[t].name="未设置")})),e})),o.resolve(e)}),(function(){o.resolve([])})),o.promise},this.setChartOption=function(e,t,i){if(console.log("setChartOption"),U()(e)&&e.xAxis&&e.xAxis[0]&&e.xAxis[0].origin_list){var o,a=y()(o=e.xAxis[0].origin_list).call(o,(function(e,t){return i[0][t]+"_"+t}));U()(a).call(a,(function(t,n){return"ascend"===U()(e)?R()(t)-R()(n):R()(n)-R()(t)})),e.xAxis[0].origin_list=y()(a).call(a,(function(t){var n;return null===(n=e.xAxis[0])||void 0===n?void 0:n.origin_list[R()(t.split("_")[1])]}))}e=angular.copy(e),t=angular.copy(t),i=angular.copy(i),U()(e)&&r.sortFunc(e,t,i);var l=n("2DtoPercent")(i),c=r.defaultOption(e,t,i),s=e.chart.split("_")[0];return r[s+"Option"](c,e,t,i,l),r.valueTransform(c,e,l),r.showAdjust(c,e),e.setOptions&&(c=e.setOptions(c,e,t,i)),c};var l=null===(a=t.getContext("auth").company_setting)||void 0===a?void 0:a.PortalColorPalette;l="None"!==l?l.split(","):void 0;var r={defaultOption:function(e,t,n){return{color:l,version:(new Date).getTime(),grid:{left:"10",right:"10",bottom:"15",containLabel:!0},toolbox:{feature:{saveAsImage:{pixelRatio:2},myAmplification:{icon:"image:///img?type=image&index=amplification",show:!0,title:"查看大图",onclick:function(e,t){var n=t.getOption();delete n.toolbox[0].feature.myAmplification,o.getDialog({title:(null==n?void 0:n.title)||"  ",template:'<portal-chart id="hcm-chart-preview" model="params.chart_option" ></portal-chart>'}).size("large-middle").show({chart_option:n})}}},right:"5px"},legend:{backgroundColor:"#fff",type:e.zoom?"scroll":"plain",width:"85%",left:0,align:"left",data:t[t.length-1].list}}},pieOption:function(e,t,n,i){var o;angular.extend(e,{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:n[0].name,type:"pie",radius:["40%","70%"],data:y()(o=i[0]).call(o,(function(t,n){return{value:t,name:e.legend.data[n]}})),itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}},label:{normal:{show:!1}}}]})},mixedGraphOption:function(e,t,i,o,a){var l,r,s,d=["left","right"];angular.extend(e,{xAxis:{data:i[0].list,position:"bottom",axisLabel:{rotate:45}},yAxis:y()(i).call(i,(function(e,t){return{type:"value",position:d[t],axisLabel:{formatter:function(e){return n("numberFormat")(e)}}}})),tooltip:{trigger:i[1]&&i[1].list.length>8?"item":"axis",axisPointer:{type:"shadow"}},series:(r=y()(o).call(o,(function(e,t){return{name:i[1]?i[1].list[t]:i[0].name,type:"bar",yAxisIndex:t%2,data:e,animationDelay:function(e){return 10*e},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}}}})),s=angular.copy(r),v()(s).call(s,(function(e){return e.type="line"})),c()(l=[]).call(l,m()(r),m()(s))),animationEasing:"elasticOut",animationDelayUpdate:function(e){return 5*e}})},barOption:function(e,t,i,o,a){var l=[{data:i[0].list,axisLabel:{rotate:45}}],r=[{type:"value",axisLabel:{formatter:function(e){return n("numberFormat")(e)}}}],c=y()(o).call(o,(function(e,t){return{name:i[1]?i[1].list[t]:i[0].name,type:"bar",data:e,animationDelay:function(e){return 10*e},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}}}}));if(/_y$/.test(t.chart)){var s=angular.copy(l);l=angular.copy(r),r=s}/stack_/.test(t.chart)&&y()(c).call(c,(function(e){return e.stack="总量"})),angular.extend(e,{xAxis:l,yAxis:r,tooltip:{trigger:i[1]&&i[1].list.length>8?"item":"axis",axisPointer:{type:"shadow"}},series:c,animationEasing:"elasticOut",animationDelayUpdate:function(e){return 5*e}})},lineOption:function(e,t,i,o,a){angular.extend(e,{tooltip:{trigger:i[1]&&i[1].list.length>8?"item":"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:[{boundaryGap:!1,data:i[0].list,axisLabel:{rotate:45}}],yAxis:[{type:"value",axisLabel:{formatter:function(e){return n("numberFormat")(e)}}}],series:y()(o).call(o,(function(e,n){return{name:i[1]?i[1].list[n]:i[0].name,type:t.chart,data:e,smooth:!0,areaStyle:{},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.3)"}}}}))})},radarOption:function(e,t,n,i,o){var a;angular.extend(e,{tooltip:{},radar:{name:{textStyle:{color:"#fff",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:y()(a=n[0].list).call(a,(function(e){return{name:e}}))},series:[{type:"radar",data:y()(i).call(i,(function(e,t){return{name:n[1]?n[1].list[t]:n[0].list[t],value:e}}))}]})},funnelOption:function(e,t,n,i,o){var a=[{key:"expectation",name:"预期",label:{normal:{formatter:"{b}预期"},emphasis:{position:"inside",formatter:"{b}预期: {d}%"}},labelLine:{normal:{show:!1},name:"实际"}},{key:"reality",name:"实际",label:{normal:{position:"inside",formatter:"{d}%",textStyle:{color:"#fff"}},emphasis:{position:"inside",formatter:"{b}实际: {d}%"}}}];angular.extend(e,{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} {d}%"},series:y()(a).call(a,(function(t,n){var o;return angular.extend(t,{type:"funnel",left:"10%",width:"80%",itemStyle:{normal:{opacity:1-.2*(n+1)}},data:y()(o=i[0]).call(o,(function(t,n){return{value:t,name:e.legend.data[n]}}))})}))})},mapOption:function(e,t,n,i,o){var a,l,r,s={};v()(a=n[0].origin_list).call(a,(function(e){s[e.name]=e})),angular.extend(e,{backgroundColor:"#fff",tooltip:{trigger:"item"},visualMap:{min:Math.min.apply(Math,c()(l=[0]).call(l,m()(i[0]))),max:Math.max.apply(Math,m()(i[0])),itemWidth:10,realtime:!1,calculable:!0,inRange:{color:["#eee","lightskyblue","yellow","orangered"]}},series:[{name:n[0].name,type:"map",mapType:"china",roam:!0,label:{show:!1},data:y()(r=i[0]).call(r,(function(t,n){var i=e.legend.data[n],o=s[i];return{value:t,name:i,number:null==o?void 0:o.number,is_append:null==o?void 0:o.is_append}})),nameMap:{}}]})},sortFunc:function(e,t,n){var i,o;if(U()(e)&&W()(i=["descend","ascend"]).call(i,U()(e))&&!(t.length>1)){var a=y()(o=t[0].list).call(o,(function(e,t){return n[0][t]+"_"+e}));U()(a).call(a,(function(t,n){return"ascend"===U()(e)?R()(t)-R()(n):R()(n)-R()(t)})),t[0].list=y()(a).call(a,(function(e){return e.split("_")[1]})),n[0]=y()(a).call(a,(function(e){return R()(e.split("_")[0])}))}},valueTransform:function(e,t,i){var o;t.value_type=t.value_type||[];var a,l,r,s,d=function(e,i){return L()(e)||(e=[e]),n("arrayRepeat")(e,t.value_type).length>0?i:""};if(0!==t.value_type.length)if(/^(funnel|pie)/.test(t.chart))o={formatter:c()(a=c()(l=c()(r="".concat(d("name","{b|{b}}\n{hr|}"))).call(r,d(["value","percent"],"\n"))).call(l,d("value","{c|{c}} "))).call(a,d("percent"," {d|{d}%}")),backgroundColor:"#fafafa",borderColor:"#ccc",borderWidth:1,borderRadius:4,padding:[0,5],rich:{b:{color:"#999",lineHeight:22,align:"center"},hr:{borderColor:"#aaa",width:"100%",borderWidth:.5,height:0},c:{lineHeight:22},d:{color:"#eee",backgroundColor:"#6c747b",padding:[2,4],lineHeight:22,borderRadius:2}}},e.series[0].label=o,y()(s=e.series[0].data).call(s,(function(e,n){t.show_range&&t.show_range>i[0][n]&&(e.label={show:!1,position:"inside"})}));else if(/^(bar|line)/.test(t.chart)){var u;o={normal:{formatter:function(e){var n,o,a;if(t.show_range&&t.show_range>i[e.componentIndex][e.dataIndex])return"";var l="";return l+="".concat(d("name","".concat(e.seriesName))),l+="".concat(A()(n=t.chart).call(n,"_y")?"":"\n"),l+="".concat(d("value","".concat(e.value))),l+="".concat(d("percent",c()(o=c()(a="".concat(d("value","("))).call(a,i[e.componentIndex][e.dataIndex],"%")).call(o,d("value",")")))),l},show:!0,position:{line:"top",bar_x:"top",bar_y:"right",bar_stack_x:"insideBottom",bar_stack_y:"insideLeft"}[t.chart]}},e.tooltip.formatter=function(e){var t,n,o,a,l;return L()(e)?c()(t="".concat(e[0].name,"<br/>")).call(t,j()(n=y()(e).call(e,(function(e){var t,n;return c()(t=c()(n="".concat(e.seriesName,":")).call(n,e.data," (")).call(t,i[e.componentIndex][e.dataIndex],"%) <br/>")}))).call(n,(function(e,t){return e+t}))):c()(o=c()(a=c()(l="".concat(e.name,"<br/>")).call(l,e.seriesName,":")).call(a,e.data," (")).call(o,i[e.componentIndex][e.dataIndex],"%)")},y()(u=e.series).call(u,(function(e){e.label=o,e.labelLine=!1}))}},showAdjust:function(e,t){t.zoom&&/(bar|line)/.test(t.chart)&&(e.dataZoom=[{type:"slider",xAxisIndex:0},{type:"slider",yAxisIndex:0},{type:"inside",xAxisIndex:0},{type:"inside",yAxisIndex:0}])}}}]);n("XxAQ");window.app.directive("portalChart",["$timeout","portalChartService",function(e,t){return{restrict:"EA",template:'<div style="width: 100%;height: 100%;"></div>',scope:{model:"=",onClick:"="},link:function(i,o){var a,l;i.mapLevel=0,i.init=function(){n("E9k0").echarts().then(function(){var e=M()(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.echarts=t,e.next=3,i.setInit();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},i.setInit=M()(D.a.mark((function e(){var n,o,a,l,r,c,s,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(n=i.model)||void 0===n||null===(o=n.series)||void 0===o||null===(a=d()(o))||void 0===a||null===(l=a.call(o,(function(e){return"map"===e.type})))||void 0===l?void 0:l.length)>0)){e.next=5;break}return e.next=3,t.getMap("china");case 3:c=e.sent,i.registerMap("china",c);case 5:if(!(null===(r=i.model)||void 0===r?void 0:r.hcmMap)){e.next=12;break}return s=i.model.hcmMap.mapType,e.next=9,t.getMap(i.model.hcmMap.id);case 9:return u=e.sent,e.next=12,i.registerMap(s,u);case 12:i.initChart();case 13:case"end":return e.stop()}}),e)}))),i.registerMap=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"china",t=arguments.length>1?arguments[1]:void 0;i.mapLevel++,i.echarts.registerMap(e,t)},i.initChart=function(){i.echarts&&((a=$()(o).call(o,"div")[0]||o[0]).clientHeight||(a.style.height="".concat(o.height()||o.parent().height()||220,"px")),(l=i.echarts.init(a,"light")).showLoading({text:"加载中...",color:"#ccc"}),i.$watch("model.version",E()(function(){var e=M()(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===n){e.next=4;break}return i.mapLevel=1,e.next=4,i.setInit();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),500)),i.setChartOptions(),l.on("click",function(){var e=M()(D.a.mark((function e(n){var o,a,l,r,s,d,u,_;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==n||null===(o=n.data)||void 0===o||null===(a=o.number)||void 0===a?void 0:x()(a).call(a,0,6),s=null==n||null===(l=n.data)||void 0===l?void 0:l.is_append,!("map"===n.seriesType&&i.mapLevel<2&&r)){e.next=9;break}return e.next=5,t.getMap(c()(d="".concat(r,"·")).call(d,i.mapLevel));case 5:_=e.sent,y()(u=i.model.series).call(u,(function(e){e.mapType=r,e.map=r})),i.registerMap(r,_),i.setChartOptions();case 9:if("map"!==n.seriesType||!s){e.next=11;break}return e.abrupt("return");case 11:i.onClick&&i.onClick(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("resize",(function(){i.containerResize()})))},i.setChartOptions=function(){i.model&&(l.clear(),l.setOption(i.model,!0),i.containerResize(),l.hideLoading())},i.containerResize=function(){e((function(){l&&l.resize()}),100)},i.$on("onContainerResize",(function(){i.containerResize()})),i.init()}}}]);n("1LhX");var K=n("wd/R"),H=n.n(K);window.app.directive("homeWidgetDashboard",(function(){return{restrict:"E",template:n("7B2r"),scope:{model:"="},controller:["$scope","dataService","$q","crudSettingService","portalChartService","$rootScope","$state","queryService","$filter",function(e,t,n,i,a,r,s,u,p){e.$watch("model.version",(function(t,n){t!==n&&e.initAnalysis()})),e.initAnalysis=function(){e.params=angular.copy(e.model.params),e.params.xAxis=e.params.xAxis||[],e.getData().then((function(t){var n;e.params.originData=angular.copy(t),y()(n=e.params.xAxis).call(n,(function(e){e.origin_list=y()(t).call(t,(function(t){return t[e.key]})),e.origin_list=p("arrayRemoveDuplicate")(e.origin_list,"id")})),y()(t).call(t,(function(e){var t;v()(t=h()(e)).call(t,(function(t){angular.isObject(e[t])&&(e[t]=e[t].name)}))})),e.params.data=t;var i=e.params.axis.x;y()(i).call(i,(function(e){e.list=m()(new _.a(y()(t).call(t,(function(t){return t[e.key]}))))}));var o,l,r=[];1===i.length?(y()(o=i[0].list).call(o,(function(e,n){r[n]=(d()(t).call(t,(function(t){return t[i[0].key]===e}))[0]||{count:0}).count})),r=[r]):y()(l=i[1].list).call(l,(function(e,n){var o;r[n]=[];var a=d()(t).call(t,(function(t){return t[i[1].key]===e}));y()(o=i[0].list).call(o,(function(e,t){r[n][t]=(d()(a).call(a,(function(t){return t[i[0].key]===e}))[0]||{count:0}).count}))}));e.chart_option=a.setChartOption(e.params,i,r)}))},e.getFilter=function(t){var o=n.defer();return d()(e.model)?o.resolve(d()(e.model)):i.getAvailablePlan(null,{model:t.model,state:t.state,biz_type:t.biz_type},1,50).then((function(n){var i,a=d()(i=n.list).call(i,(function(e){return e.id===t.scheme}))[0];a||console.log("当前分析图("+e.model.params.label+")对应方案被删除"),a=a||{},e.filter_dict=angular.copy(a);var l=a.config&&a.config.filter_dict||{};l=angular.extend(l,t.filter_dict||{}),u.getAdvanceFilter(t.model,t.state,l,t.biz_type).then((function(){o.resolve({filter_dict:l})}))})),o.promise},e.getData=function(){var t,i,r,s,u=n.defer();angular.isArray(e.params.axis.x)||e.deleteOld();var _=[];v()(t=h()(e.params.axis)).call(t,(function(t){_=c()(_).call(_,e.params.axis[t])}));var p=d()(i=y()(r=d()(_).call(_,(function(e){return"sum"!==e.statistical_type}))).call(r,(function(e){return e.key}))).call(i,(function(e){return e})),f=y()(s=d()(_).call(_,(function(e){return"sum"===e.statistical_type}))).call(s,(function(e){return e.key}));return e.getFilter(e.params).then((function(t){var n=angular.extend(t,{count_by:["id"],group_by:p,sum_by:f,model:e.params.model,extra_property:{state:e.params.state},page_index:1,page_size:1e5,biz_type:e.params.biz_type});a.getData(n).then((function(t){var n;y()(t).call(t,(function(t){switch(e.params.axis.y[0].statistical_type){case"count":t.count=t.id;break;case"owner":case"sum":t.count=t[e.params.axis.y[0].key]}}));var i=t.length,a=d()(n=e.params.axis.x).call(n,(function(e){return e.date_format}));a.length>0&&(e.params.growth=!0,y()(a).call(a,(function(n){var a,r,c={};v()(a=m()(l()(r=Array(i)).call(r))).call(a,(function(a){var l,r,s=i-1-a,d=t[s];d[n.key]=H()(d[n.key]).format(n.date_format);var u=y()(l=y()(r=e.params.axis.x).call(r,(function(e){return e.key}))).call(l,(function(e){return d[e]})).join("");c[u]?(c[u].count+=d.count,o()(t).call(t,s,1)):c[u]=d}))}))),u.resolve(t)}),(function(){console.log("历史错误数据")}))})),u.promise},e.deleteOld=function(){console.log("调整后删除旧数据"),e.model.id&&"index"===s.current.name&&(r.show_warning("功能配置调整，相应的数据分析组件失效"),t.callHcmOpenApi("hcm.model.remove",{model:"PortalPlugin",id_:e.model.id}))},e.go=function(t){var n,i,o={};y()(n=e.params.xAxis).call(n,(function(e){o[e.key]=e}));var a=[];1===e.params.xAxis.length?a[0]=e.params.xAxis[0].origin_list[t.dataIndex]:2===e.params.xAxis.length&&(a[0]=e.params.xAxis[0].origin_list[t.dataIndex],a[1]=e.params.xAxis[1].origin_list[t.seriesIndex]);var l={};y()(i=e.params.xAxis).call(i,(function(e,t){e.is_sub_org?d()(a[t])?l=angular.extend({},d()(a[t])||{},l||{}):l[e.key]={child_include:a[t].id}:d()(a[t])?l=angular.extend({},d()(a[t])||{},l||{}):l[e.key]=a[t].id||null})),e.filter_dict&&e.filter_dict.config&&e.filter_dict.config.page_state&&r.super_go(e.filter_dict.config.page_state,{advance_filter_dict:angular.extend({},e.filter_dict.config.advance_filter_dict||{},l),filter_dict:angular.extend({},e.filter_dict.config.filter_dict||{},l),model:e.filter_dict.model,meta_state:e.filter_dict.state,biz_type:e.filter_dict.biz_type})}}]}}))},DuDV:function(e,t,n){"use strict";var i=n("OBge"),o=n.n(i),a=n("mrSG"),l=n("XQQm"),r=n("lhIL"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.$onInit=function(){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=r,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t}(l.a),s=n("z/LF"),d=n.n(s);t.a={title:"对象设置",controller:c,template:d.a,size:"small"}},"E/9S":function(e,t){e.exports='<div class="hcm-formula-page">\n    <hc-form model="formula_form"></hc-form>\n    <div class="help">\n        <div class="name-block">\n            <div class="title">公式参考</div>\n            <label>\n                <select class=""\n                        ng-model="curr_help"\n                        ng-options="m as m.category+\'-\'+m.name+\'-\'+m.doc.split(\'\n\')[0] for m in formula_list"\n                        title=""\n                ></select>\n            </label>\n            <div class="formula-select" ng-click="selectFormula(curr_help.name)">使用</div>\n        </div>\n        <div ng-if="curr_help">\n            <div class="block">\n                <div class="title">公式描述</div>\n                <div class="content">\n                    <pre>{{curr_help.doc}}</pre>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},E687:function(e,t){e.exports='<div class=\'hc-dialog-mask\' ng-class="{\'trans-mask\':!$ctrl.model.options.mask}"\n     ng-click="$ctrl.model.mask_click()"></div>\n<div class=\'hc-dialog-window\' ng-style="$ctrl.model.options.styles">\n    <div class="close" ng-click=""></div>\n    <header\n        ng-if="([\'small\',\'float\',\'small-middle\',\'middle-large\', \'hc-dialog-full-title\'].indexOf($ctrl.model.options.size) > -1) || ($ctrl.model.options.size.indexOf(\'-dialog-\') > -1)"\n    >   \n        <div class="header-img" ng-if="$ctrl.model.options.title_img">\n            <img ng-src="{{$ctrl.model.options.title_img|hcPhoto:32}}">\n        </div>\n        <div class="main">{{ $ctrl.model.options.title }}</div>\n        <div class="close-btn icon-hcm-delete" ng-if="$ctrl.model.options.size.indexOf(\'-dialog-\') > -1" ng-click="$ctrl.model.dialog_close()"></div>\n    </header>\n    <div class="hc-dialog-content"\n         ng-class="{\'no-footer\':!$ctrl.model.options.operates || $ctrl.model.options.operates.length<1}"\n         ng-transclude></div>\n    <footer ng-if="$ctrl.model.options.operates.length>0">\n        <hc-mobile-bottom-btn model="$ctrl.model.list_btn_model"></hc-mobile-bottom-btn>\n    </footer>\n</div>\n'},E9k0:function(e,t,n){var i=n("OBge");e.exports={echarts:function(){return new i((function(e){n.e(120).then(function(){var t=n("MT78");n("qsOA"),n("fLKP"),e(t)}.bind(null,n)).catch(n.oe)}))}}},EJd8:function(e,t){e.exports='<style>\n    .vote-micro {\n        display: table;\n        table-layout: fixed;\n        width: 100%;\n        cursor: pointer;\n    }\n\n    .vote-micro > div {\n        display: table-cell;\n        vertical-align: top;\n\n    }\n\n    .vote-micro .vote-icon {\n        background: #03a9f4;\n        color: #fff;\n        line-height: 38px;\n        width: 48px;\n        text-align: center;\n        font-size: 30px;\n        height: 38px;\n        overflow: hidden;\n        padding-top: 10px;\n    }\n\n    .vote-micro .vote-micro-content {\n        background: #f4f4f4;\n        padding: 5px 10px 0;\n    }\n\n    .vote-micro .vote-micro-name {\n        font-size: 14px;\n        color: #000;\n        line-height: 16px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n\n    .vote-micro .vote-micro-desc {\n        font-size: 12px;\n        color: #aaa;\n        padding-top: 5px;\n        line-height: 12px;\n        height: 24px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n</style>\n<div class=\'vote-micro\' ng-init="init()" ng-click="go_item()">\n    <div class="vote-icon icon-hcm-vote"></div>\n    <div class="vote-micro-content">\n        <div class="vote-micro-name">投票：{{item.name}}</div>\n        <div class="vote-micro-desc">{{item.desc}}</div>\n    </div>\n</div>'},EQVl:function(e,t){e.exports='<div class="hc_chart_dialog" ng-init="init()">\n    <div class="stage-columnar-chart">\n        <portal-chart model="columnar_chart_option" on-click="click" ng-if="columnar_chart_option"></portal-chart>\n    </div>\n    <div class="stage-pie-chart">\n        <portal-chart model="pie_chart_option" on-click="click" ng-if="pie_chart_option"></portal-chart>\n    </div>\n</div>\n'},EUDf:function(e,t,n){"use strict";var i=n("fnWO"),o=n.n(i),a=(n("sMBO"),n("eLKs")),l=n.n(a),r=n("+oHS"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("mrSG"),_=function(e){function t(t,n,i,o,a,l,r,c,s){var d=e.call(this,t,n,i,o)||this;return d.scope=t,d.rootScope=n,d.hcDialog=i,d.hcList=o,d.dataService=a,d.$hcPaging=l,d.$state=r,d.dataBlockService=c,d.hcForm=s,d}return Object(u.d)(t,e),t.prototype.getMetaFromData=function(e){var t;return 0===e.length?[]:d()(t=c()(e[0])).call(t,(function(e){return{label:e,key:e,field:[e]}}))},t.prototype.fetchData=function(){return Object(u.c)(this,void 0,void 0,(function(){var e,t;return Object(u.e)(this,(function(n){switch(n.label){case 0:return this.scope.params.multi?[4,this.dataService.callHcmOpenApi("flex.data.block.cache.data",{redis_key:this.scope.params.redis_key,block_key:this.scope.block_key,page_index:this.paging.current_page,page_size:this.paging.page_size})]:[3,2];case 1:return t=n.sent(),[3,4];case 2:return[4,this.dataBlockService.previewData(this.scope.params.block_info,this.scope.params.filter_dict,this.paging.current_page,this.paging.page_size)];case 3:t=n.sent(),n.label=4;case 4:return e=t,this.paging.total_count=e.count,this.list_model.$setColumns(this.getMetaFromData(e.list)).$setRowSelector(0).$setData(e.list),[2]}}))}))},t.prototype.initList=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){var t;switch(e.label){case 0:return this.options.multi=this.scope.params.multi,this.scope.block_key=this.scope.params.multi?this.scope.params.block_list[0].key:null,this.paging=this.$hcPaging.createPaging({current_page:1,page_size:20,onPagingChange:l()(t=this.fetchData).call(t,this)}),this.scope.params.multi?[4,this.initFilter()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.list_model=this.hcList.createList(),[4,this.fetchData()];case 3:return e.sent(),[2]}}))}))},t.prototype.initFilter=function(){var e,t=d()(e=this.scope.params.block_list).call(e,(function(e){return{label:e.name,value:e.key}})),n=this,i=[{key:"block_key",component:"hc-super-selector",label:"数据块选择",options:{default:t[0].value,width:"col-6",list:t,singleLine:!0,change:function(e,t){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){switch(e.label){case 0:return t?(n.scope.block_key=t,[4,n.fetchData()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}}}];this.options.list_filter_model=this.hcForm.createForm().$setMeta(i)},t.prototype.submit=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return this.scope.$dialog.dialog_close(),[2]}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","dataService","$hcPaging","$state","dataBlockService","$hcForm"],t}(n("r/mB").a);n("Ex80"),t.a={title:"预览数据",template:o.a,controller:_}},EXx3:function(e,t){e.exports='<div class="hc-dropdown-select"\n     ng-class="{\'active\':show_select_box&&(!options||!options.readOnly),\'single\':!options.multi,\'multi\':options.multi}"\n     ng-init="init()">\n    <div class="input-block" ng-click="stateChange();" ng-mouseover="hover=true"\n         ng-mouseleave="hover=false">\n        <input ng-if="!options.readOnly||currentValue" class="component-input-inner"\n               ng-model="currentValue"\n               placeholder="{{options.multi?\'--请选择(可多选)--\':\'--请选择--\'}}" disabled="true"/>\n        <div class="icon-box" ng-if="!options.readOnly">\n            <div class="icon" ng-if="!hover||!currentValue||options.stopDelete"\n                 ng-class="{\'icon-hcm-arrow-down-solid\':!show_select_box,\'icon-hcm-arrow-up-solid\':show_select_box}"></div>\n            <div class="icon icon-hcm-delete delete" ng-if="hover&&currentValue&&!options.stopDelete"\n                 ng-click="clear($event)"></div>\n        </div>\n    </div>\n    <div class="select-box">\n        <div class="frame" ng-if="show_select_box&&!options.readOnly"\n             ng-class="{\'show-search\':itemList.length>options.limit}">\n            <div class="search-toolbar" ng-if="itemList.length>options.limit">\n                <input type="text" ng-model="$parent.$parent.keyword"\n                       placeholder="输入关键字查找" ng-keypress="search_key_press($event)">\n                <span class="search-icon icon-hcm-check"></span>\n            </div>\n            <div class="item" ng-if="options.canSelectAll&&options.multi" ng-click="canSelectAll()"\n                 ng-class="{\'select\':selectAll}">\n                全选\n                <span class="icon" ng-class="{\'icon-hcm-right\':selectAll}"></span>\n            </div>\n            <div class="item" ng-repeat="_item in itemList track by $index"\n                 ng-if="!keyword||_item[options.value].indexOf(keyword)>=0" ng-click="selectItem(_item)"\n                 ng-class="{\'select\':_item.select}">\n                {{_item[options.value]}}\n                <span class="icon" ng-class="{\'icon-hcm-right\':_item.select&&options.multi}"></span>\n            </div>\n        </div>\n    </div>\n</div>\n'},"Eb/6":function(e,t,n){"use strict";window.app.service("BaseDataSetService",["$q","$http","dataService",function(e,t,n){this.getModelService=function(t){return function(t,i){return null!=t&&(i="hcm.paas.object.layout"),{identity:"dataset_"+(t?"model_"+t:i),get_data_set_meta:function(o,a,l){var r=e.defer();return n.callHcmOpenApi(i+".data.set.meta",{model:t,state:o,field_category:a,field_type:l}).then((function(e){r.resolve(e)})),r.promise},get_available_fields:function(o){var a=e.defer();return n.callHcmOpenApi(i+".get.available.fields",{model:t,state:o}).then((function(e){a.resolve(e)})),a.promise}}}(t,null)}}])},EeX0:function(e,t){e.exports='<div class="portal-plugin-item-set application-set" ng-init="initScheme()">\n    <div class="setting">\n        <hc-form model="scheme_form"></hc-form>\n    </div>\n    <div class="preview" ng-if="add_plugin_config">\n        <home-widget-application model="add_plugin_config"></home-widget-application>\n    </div>\n</div>'},Ej2G:function(e,t){e.exports='<div class="advance-query" >\n    <div class="simple" ng-show="!model.isAdvance">\n        <div class="basic simple-form">\n            <hc-form model=\'model.query_model\' class="query-form"></hc-form>\n            <div class="right-content">\n                <div class="operates" ng-if="!model.close">\n                    <span ng-repeat="o in operates" ng-if="!(o.hide|valueToFunc)()"\n                          class="operate sys-color {{o.icon}} {{(o.class|valueToFunc)()}}"\n                          ng-click="o.func($event)" hc-title="{{(o.title|valueToFunc)()}}" options="tipOptions"></span>\n                </div>\n                <div class="blur" ng-if="model.type!==\'simple\'">\n                    <div class="search">\n                        <input ng-model="model.filter_str" class="search"\n                               placeholder="{{model.blur_fields}}" type="search"\n                               ng-keyup="searchKey.blur($event)"\n                               hc-title="{{model.blur_fields}}"\n                               options="{mode: \'tip\', showOnOverflow: true}"\n                        >\n                        <span class="icon icon-hcm-check" ng-click="model.$search()"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="complete" ng-show="model.isAdvance">\n        <label>\n            <input class="jql_content" ng-model="model.query_str" ng-trim="false"\n                   placeholder="高级查询 格式参考： a > 2 and b < 3 and (d =\'张三\' or d = 3)" type="search"\n                   ng-keyup="queryKey.blur($event)">\n            <span class="icon icon-hcm-check" ng-click="model.$search()"></span>\n        </label>\n        <div class="operates">\n            \x3c!--<span class="change-type" ng-click="changeType()">--\x3e\n            \x3c!--<span class="change-type-text"--\x3e\n            \x3c!--&gt;简单</span><span--\x3e\n            \x3c!--class="tip" ng-if="model.isAdvancePlan">简单模式无法解析复杂的查询条件</span></span>--\x3e\n            <span class="search-icon icon-hcm-changeuser sys-color" ng-click="changeType()"\n                  ng-if="!model.selector_flag&&model.type!==\'simple\'" hc-title="切换至简单模式"\n                  options="tipOptions"></span>\n            <span class="icon-hcm-lamp search-icon sys-color plan" ng-click="planList($event)"\n                  ng-if="model.type!==\'simple\'"\n                  hc-title="查询方案选择"\n                  options="tipOptions"\n            ></span>\n            <span class="show-keyword sys-color"\n                  ng-click="showKeyword($event)">{{show_keyword ? \'关闭字段参考\' : \'打开字段参考\'}}</span>\n        </div>\n        <div class="keyword-list" ng-if="show_keyword" ng-click="keyWordContentClick($event)">\n            <div class="keyword-search">\n                <input ng-model="wordSearchKey.str"\n                       placeholder="搜索关键词" type="search"\n                       ng-keyup="wordSearchKey.blur($event)">\n                <span class="icon icon-hcm-check" ng-click="wordSearchKey.blur($event)"></span>\n            </div>\n            <div class="keyword-content">\n                <div class="model" ng-repeat="m in complete_fields||model.complete_fields">\n                    <div class="model-name" ng-if="m[\'list_fields\']">{{m.name}}</div>\n                    <div ng-repeat="v in m[\'list_fields\']" class="keyword" ng-click="addKeyWord($event,v)">\n                        <span>{{v.label}} - {{v.key}}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="advance-query" ng-if="model&&client===\'mobile\'" ng-init="init()">\n    <hc-form model=\'model.query_model\' class="query-form"></hc-form>\n    <div class="query-more" ng-click="showFilterPanel($event)" ng-show="!model.advance_query_config.remove_info_meta">更多<span\n        class="icon icon-hcm-arrow-right"></span>\n    </div>\n    <div class="query-footer">\n        <div class="btn" ng-repeat="_a in model.action_meta" ng-click="_a.func()"\n             ng-class="{\'important\':_a.is_important}">\n            {{_a.label}}\n        </div>\n    </div>\n</div>\n'},EqRa:function(e,t){e.exports='<div class="hc-content-tip" ng-init="init()">\n    <div class="tip-content" ng-style="options.style.tip_content" ng-if="show_tip">\n        <span class="icon icon-hcm-info-normal" ng-style="options.style.icon"></span>\n        <div class="text"\n             ng-class="{\'expanded\': tip_expand, \'fold\': !tip_expand, \'expandable\': tip_expandable}"\n             ng-style="options.style.text"\n             ng-bind-html="(content|valueToFunc)()|toTrusted"></div>\n        <div class="operate">\n            <div class="expand-btn"\n                 ng-if="tip_expandable"\n                 ng-class="{\'icon-hcm-arrow-down\': !tip_expand, \'icon-hcm-arrow-up\': tip_expand}"\n                 ng-click="tipExpandClick()"></div>\n            <div class="close-btn icon-hcm-delete" ng-click="closeTip()"></div>\n        </div>\n    </div>\n</div>'},Er0w:function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog list-view-dialog" ng-init="init()">\n    <div class="left-list">\n        '+n("IGAs")+'\n    </div>\n    <div class="right-view">\n        <hc-model-view-base  params="leftViewParams" ng-if="showListView"></hc-model-view-base>\n    </div>\n</div>'},F5c5:function(e,t){e.exports='<div class=\'hc-dialog-mask\'\n     ng-class="{\'trans-mask\':!$ctrl.model.options.mask}"\n     ng-click="$ctrl.model.mask_click()"\n></div>\n<div class=\'hc-dialog-window\'>\n    <div class="hc-dialog-content">\n        <div class="tip" ng-if="$ctrl.btnModel.filterActions($ctrl.btnModel.actions_group.un_select_actions).length > 8">\n            共&ensp;<span class="high-light" ng-bind="$ctrl.btnModel.filterActions($ctrl.btnModel.actions_group.un_select_actions).length"></span>&ensp;个操作项\n        </div>\n        <div class="scroll-field">\n            <div ng-repeat="_action in $ctrl.btnModel.actions_group.un_select_actions track by $index"\n                 class="mobile-button"\n                 ng-class="{\'disabled\': (_action.disabled|valueToFunc)(),\'sys-color\':_action.is_important}"\n                 ng-show="!(_action.hide|valueToFunc)()"\n                 ng-click="$ctrl.actionClick(_action)"\n                 ng-mouseenter="$ctrl.showMore($event, _action, true)">\n                <div class="icon" ng-if="_action.icon">\n                    <span ng-class="_action.icon"></span>\n                </div>\n                <div class="label" ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n            </div>\n            <div class="mobile-button select"\n                 ng-if="!$ctrl.btnModel.contentList.outside_select &&\n                 ($ctrl.btnModel.alwaysShowSelect ||\n                 $ctrl.btnModel.filterActions($ctrl.btnModel.actions_group.select_actions).length)"\n                 ng-click="$ctrl.select($event)">\n                 {{$ctrl.findSelectBtn($ctrl.btnModel.actions).label || \'选择\'}}\n            </div>\n            <div class="mobile-button close-button"\n                 ng-click="$ctrl.model.mask_click()">取消\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},"F6/P":function(e,t){e.exports='<div class="analyse-board-content hcm-nav-content"  ng-init="init()">\n    <div class="no-theme" data-ng-if="!theme.id" data-ng-click="switchTheme()">\n        <div class="image">\n            <hc-svg options="{icon:\'hcm-no-content\'}"></hc-svg>\n        </div>\n        <div class="tip">当前无分析方案主题</div>\n        <div class="handle">新增主题<span class="icon icon-hcm-add-circle-solid"></span>\n        </div>\n    </div>\n    <div class="analyse-board-content-item hcm-content flex" data-ng-if="theme.id">\n        <div class="analyse-board-portal-setup" ng-show="state==\'setup\'">\n            <span>当前处于设计状态，点击组件进行设计</span>\n        </div>\n        <div class="analyse-board-content-top hcm-content-top">\n            <div class="theme-title">\n                <div class="theme-title-header">当前主题</div>\n                <div class="theme-title-name" ng-click="switchTheme()">{{theme.name}}</div>\n                <span class="icon icon-hcm-arrow-right" ng-show="state === \'view\'"></span>\n                <div class="edit-label" ng-show="state === \'setup\'">编辑中</div>\n            </div>\n            <div class="btn-groups">\n                <hc-list-btn model="action_model"></hc-list-btn>\n            </div>\n        </div>\n        <div class="analyse-board-content-bottom analyse-board-portal-container hcm-content-bottom">\n            <hcm-board model="board_model"></hcm-board>\n            <hc-list-no-data caption="无图表，请点击设计按钮进行配置" ng-if="!board_model.components.length" ng-hide="hide_refresh"></hc-list-no-data>\n        </div>\n    </div>\n</div>\n'},FGGk:function(e,t){e.exports='<div ng-init="init()" class="calendar" ng-class="{\'week-calendar\':config.showType!=\'month\'}">\n    <div class="calendar-table">\n        <div class="calendar-header">\n            <div class="calendar-row">\n                <div class="row-item"\n                     ng-repeat="_item in [\'日\', \'一\', \'二\', \'三\', \'四\', \'五\', \'六\']">\n                    {{_item}}\n                </div>\n            </div>\n        </div>\n        <div class="calendar-body">\n            <div class="calendar-row"\n                 ng-repeat="_index in [0,1,2,3,4,5].slice(0,dates.length/7) track by $index"\n                 ng-if="config.showType==\'month\'||dates.slice(7*_index,7*(_index+1)).indexOf(select_item)>=0">\n                <div class="row-item"\n                     ng-click="cell_select(_date)"\n                     ng-repeat="_date in dates.slice(7*_index,7*(_index+1)) track by $index">\n                    <div class="calendar-day"\n                         ng-class="{\'disabled\':!_date.curr_month,\'warning\':config.warning.indexOf(_date.date)>=0,\'selected\':_date==select_item}">\n                        {{_date.date|dateFormat:"d"}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},FfHU:function(e,t){e.exports='<div class="hc-breadcrumb-item">\n    <span class="label" ng-click="$ctrl.onClick($event)">\n        <span class="{{$ctrl.item.icon}}" ng-if="$ctrl.item.icon"></span>\n        {{$ctrl.item.name}}\n    </span>\n    <span class="separator {{$ctrl.separator || \'icon-hcm-arrow-right\'}}"></span>\n</div>\n'},FfYN:function(e,t){e.exports='<div class="picker-dialog"\n     ng-if="client==\'mobile\'&&dialog_show"\n     ng-click="close_date_picker(true)"\n     ng-class="{\'hide\': _hide}">\n    <div class="picker-dialog-body"\n         ng-show="client==\'mobile\'&& !_hide">\n        <div class="dialog-header">\n            <div class="dialog-title">\n\x3c!--                <div class="title-operate" ng-click="close_date_picker();">--\x3e\n\x3c!--                    取消--\x3e\n\x3c!--                </div>--\x3e\n                {{dialog_title}}\n\x3c!--                <div class="title-operate" ng-click="select_date();">--\x3e\n\x3c!--                    确定--\x3e\n\x3c!--                </div>--\x3e\n                <div class="title-operate icon-hcm-delete" ng-click="close_date_picker();"> </div>\n            </div>\n        </div>\n        <div class="dialog-content">\n            <div>\n                <div class="dialog-page-card"\n                     ng-show="format.indexOf(\'y\')>=0||format.indexOf(\'M\')>=0||format.indexOf(\'d\')>=0">\n                    <div class="selector-container" ng-show="format.indexOf(\'y\')>=0">\n                        <picker-selector items="array_year" value="$parent.year"></picker-selector>\n                    </div>\n                    <div class="selector-container" ng-show="format.indexOf(\'M\')>=0">\n                        <picker-selector items="array_month" value="$parent.month"></picker-selector>\n                    </div>\n                    <div class="selector-container" ng-show="format.indexOf(\'d\')>=0">\n                        <picker-selector items="array_day" value="$parent.day"></picker-selector>\n                    </div>\n                </div>\n                <div ng-show="format.indexOf(\'h\')>=0||format.indexOf(\'m\')>=0||format.indexOf(\'s\')>=0"\n                     class="dialog-page-card">\n                    <div class="selector-container" ng-show="format.indexOf(\'h\')>=0">\n                        <picker-selector items="array_hour" value="$parent.hour"></picker-selector>\n                    </div>\n                    <div class="selector-container" ng-show="format.indexOf(\'m\')>=0">\n                        <picker-selector items="array_minute" value="$parent.minute"></picker-selector>\n                    </div>\n                    <div class="selector-container" ng-show="format.indexOf(\'s\')>=0">\n                        <picker-selector items="array_second" value="$parent.second"></picker-selector>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="dialog-footer">\n\x3c!--            <div class="outer-list">--\x3e\n\x3c!--                <div ng-click="clean_date();">清空</div>--\x3e\n\x3c!--            </div>--\x3e\n            <div class="outer-list" ng-if="renderBtnList">\n                    <div class="hc-dialog-button" ng-click="close_date_picker(true);">\n                        取消\n                    </div>\n                    <div class="hc-dialog-button" ng-click="setToday(\'today\', $event)" ng-if="enableToday">今天</div>\n                    <div class="hc-dialog-button" ng-click="setToday(\'tillNow\', $event)" ng-if="enableTillNow">\n                        {{tillNowTip}}\n                    </div>\n                    <div class="hc-dialog-button default" ng-click="select_date($event);">\n                        确定\n                    </div>\n                </div>\n        </div>\n    </div>\n</div>\n\n<div ng-if="client==\'pc\'&&dialog_show" class="date-picker-mask" ng-click="close_date_picker()">\n    <datetimepicker data-ng-model="datetime"\n                    data-datetimepicker-config="datetime_config"\n                    data-on-set-time="select_date(newDate, oldDate)"></datetimepicker>\n</div>\n'},FhAy:function(e,t){e.exports='<div class="report-table"\n     ng-bind-html="ngModel.html|toTrusted"\n     ng-click="cellClick($event)"\n></div>\n'},"Fp+S":function(e,t){e.exports='<div class="component-container hc-input-upload_multiple" name="{{options.view_type}}" ng-init="init()">\n    <div class="box-list-block" ng-if="options.view_type!==\'card\'">\n        <div class="file-box" ng-repeat="_item in file_list track by $index"\n             ng-mouseover="hover = true"\n             ng-mouseleave="hover = false"\n             ng-click="proxyClick($index, _item, $event)"\n             ng-class="{\'file-to-thumbnail\': options.file_to_thumbnail}">\n            <div class="pic-box"\n                 title="{{ _item.source_name }}"\n                 ng-include="\'upload_thumbnail.html\'">\n            </div>\n            <div class="btn-box"\n                 ng-if="(hover||client===\'mobile\')&&!options.hide_operate"\n                 ng-include="\'upload_operate.html\'">\n            </div>\n            <div class="attachment_file_name" ng-hide="options[\'hide_name\']">\n                {{ _item.source_name }}\n            </div>\n\n            <div class="del-btn icon-hcm-delete-circle-solid"\n                 ng-if="!(options.readOnly|valueToFunc)() && (hover||client===\'mobile\')"\n                 ng-click="attachment_del(_item,$event)">\n            </div>\n        </div>\n        <div class="file-box operate-box"\n             ng-if="!(options.readOnly|valueToFunc)()&&(!options.length||(file_list.length<options.length))"\n             ng-click="attachment_upload()">\n            <div class="add-btn {{options.icon || \'icon-hcm-add\'}}"></div>\n        </div>\n    </div>\n    <div class="box-list-block-container" ng-if="options.view_type===\'card\'">\n          <div class="upload-btn"\n               ng-if="!(options.readOnly|valueToFunc)()&&(!options.length||(file_list.length<options.length))"\n               ng-click="attachment_upload()">点击上传</div>\n          <div class="tip" ng-if="options.upload_tip">{{options.upload_tip}}</div>\n          <div class="file-list-item"\n               ng-class="{\'height-light\': client===\'pc\'}"\n               ng-repeat="_item in file_list track by $index"\n               ng-click="proxyClick($index, _item, $event)"\n               ng-mouseover="hover = true"\n               ng-mouseleave="hover = false"\n               >\n               <div class="pre-file"\n                    ng-include="\'upload_thumbnail.html\'">\n               </div>\n               <div class="file-info text-ellipsis" ng-click="client===\'pc\' && stopBubble($event)">\n                    <div class="name text-ellipsis">{{ _item.source_name }}</div>\n                    <div class="custom-field" ng-if="options.custom_field">\n                         <div class="field" ng-repeat="_key in options.custom_field track by $index">\n                              {{ _key|parseFieldData: _item }}\n                         </div>\n                    </div>\n               </div>\n               <div class="file-operate"\n                    ng-if="(hover||client===\'mobile\')&&!options.hide_operate"\n                    ng-include="\'upload_operate.html\'">\n               </div>\n          </div>\n     </div>\n    <div ng-show="false" class="hc-input-img-add" img-resize-upload use-camera="options.camera"\n        l-quality="1" ng-model="pic" callback="add_img" controller="img_upload_controller" use-we-chat>\n    </div>\n    <div ng-if="(options.readOnly|valueToFunc)()&&(!file_list.length)" class="empty">无</div>\n</div>\n\n<script type="text/ng-template" id="upload_operate.html">\n     <div class="btn operate icon-hcm-view"\n          hc-title="查看"\n          options="{mode: \'tip\', seconds: 0}"\n          ng-if="!options[\'not_preview\'] && (options.view_type!==\'card\'||client===\'pc\')"\n     ></div>\n     <div class="btn operate icon-hcm-download"\n          hc-title="下载"\n          ng-if="!options[\'not_download\']"\n          options="{mode: \'tip\', seconds: 0}"\n          ng-click="attachment_download(_item.index,_item.source_name,_item.file_type,$event)"></div>\n     <div class="btn operate icon-hcm-trash"\n          hc-title="删除"\n          ng-if="options.view_type===\'card\'&&!(options.readOnly|valueToFunc)()"\n          options="{mode: \'tip\', seconds: 0}"\n          ng-click="attachment_del(_item,$event)"></div>\n <\/script>\n\n <script type="text/ng-template" id="upload_thumbnail.html">\n     <img ng-src="{{img_src?(img_src+_item.index+\'&size=48\'+hcm_env_post): (src+ _item.index+hcm_env_pre)}}"\n          ng-if="img_type.indexOf(_item.file_type.toLowerCase()) >= 0">\n     <img ng-src="{{_item.thumbnail_src}}"\n          ng-if="img_type.indexOf(_item.file_type.toLowerCase()) < 0\n               && options.file_to_thumbnail && _item.thumbnail_src">\n     <div class="icon {{ getFileIcon(_item) }}"\n          ng-if="img_type.indexOf(_item.file_type.toLowerCase()) < 0 && vga_type.indexOf(_item.file_type.toLowerCase()) < 0\n               && !options.file_to_thumbnail"\n     ></div>\n     <div class="icon icon-hcm-play" ng-if="vga_type.indexOf(_item.file_type.toLowerCase()) >= 0 && !_item.thumbnail_src"></div>\n <\/script>\n'},FpgI:function(e,t){e.exports='<div ng-click="model.options.multi\n                                ?model.$selectNodeMulti(item,$event)\n                                :model.$selectNode(item,$event)"\n     class="left-content">\n    <div class="tree-check-box"\n         ng-if="model.options.selector_type.includes(item.org_type)||!model.options.selector_type&&showCheckbox(item)||(item.is_virtual_root_node&&model.options.rootAllSelected)"\n         ng-switch="model.options.multi\n                                    ?model.options.mode===\'self\'\n                                        ?model.isSelected(item)>-1\n                                        :item.selected_status\n                                    :model.selectedNode.id===item.id">\n        <div class="tag-to-select icon-hcm-none-circle"\n             ng-switch-default></div>\n        <div class="tag-selected icon-hcm-minus-circle-solid"\n             ng-switch-when=0></div>\n        <div class="tag-selected icon-hcm-right-circle-solid"\n             ng-switch-when=1></div>\n        <div class="tag-selected icon-hcm-right-circle-solid"\n             ng-switch-when="true"></div>\n    </div>\n    <div class="node-icon {{model.getNodeIcon(item)}}"></div>\n    <div>\n        <div class="node-name">{{item.name}}</div>\n    </div>\n</div>\n<span ng-hide="item.is_leaf" class="icon-hcm-arrow-right arrow" ng-click="expandNode(item)"></span>\n\n'},G0Wi:function(e,t){e.exports='<div class="chat-frame" ng-if="recChat" data-ng-init="init()">\n    <div class="slide-mask" ng-show="slide"></div>\n    <div class="main" ng-show="slide">\n        <div class="chat-box clear">\n            <div class="chat-box-title">\n                <div class="icon icon-hcm-delete zsb-dialog-delete"\n                     ng-click="$parent.slide=false"></div>\n                <div class="box-title">\n                    {{\'perf_internal_discussion\'|translate}}\n                </div>\n            </div>\n            <div class="operate">\n                <div class="operate-panel">\n                    <div class="operate-item">\n                        <span class="image-button icon-hcm-img" img-resize-upload="" l-width="600" l-quality="1" ng-model="pic"\n                              callback="add_image"></span>\n                    </div>\n                    <div class="operate-item" ng-click="start_at_employee_select()">\n                    <span class="icon icon-hcm-at"></span>\n                    </div>\n                </div>\n            </div>\n            <textarea name="name" maxlength="150" ng-model="$parent.dialog_content" rows="5" cols="40"\n                      placeholder="{{\'common_query_panel_input_placeholder\'|translate}}..."></textarea>\n            <div class="content-length" ng-class="{\'overflow\':content_length_overflow}">\n                {{$parent.dialog_content.length ? $parent.dialog_content.length : 0}}/150\n            </div>\n            <div class="at-employees" ng-show="transmit.length>0">\n                <div ng-repeat="_emp in transmit"\n                     ng-click="un_at_employee($index)" class="tg">\n                    {{_emp.name}}\n                </div>\n            </div>\n        </div>\n        \x3c!--        <div ng-if="recChat.at&&transmit.length>0" class="atSb">--\x3e\n        \x3c!--            <div class="atSb-frame" ng-repeat="item in transmit track by $index" ng-click="delete_at()">--\x3e\n        \x3c!--                <span class="icon icon-hcm-delete-circle-solid"></span>--\x3e\n        \x3c!--                <img ng-if="item.photo" ng-src="{{item.photo|hcPhoto}}" alt=""/>--\x3e\n        \x3c!--            </div>--\x3e\n        \x3c!--        </div>--\x3e\n        <div class="imgs" ng-show="images.length>0">\n            <div class="img tg" ng-repeat="_img in images" ng-switch on="_img.status"\n                 ng-hide="_img.deleted"\n                 ng-click="show_img($index)">\n                <div ng-switch-when="uploading" class="img-waiting">{{\'eval_uploading\'|translate}}\n                </div>\n                <div ng-switch-default>\n                    <div class="img-loading" ng-show="_img.status==\'loading\'"><br><br>{{\'common_hc_upload_multi_succeed\'|translate}}<br>{{\'Loading\'|translate}}\n                    </div>\n                    <img ng-src="{{_img.index|hcImage:\'80,80\'}}" ng-click=""\n                         sb-load="img_loaded($index)">\n                </div>\n                <div class="delete" ng-click="delete_img($index,$event)" ng-show="_img.status==\'loaded\'">\n                    <div class="icon-hcm-delete"></div>\n                </div>\n            </div>\n            <div class="img">\n                <div class="img-add icon-hcm-camera" img-resize-upload l-width="600" l-quality="1"\n                     ng-model="pic"\n                     callback="add_image">\n                </div>\n            </div>\n        </div>\n        <div class="chat-btn clear">\n\x3c!--            <span class="at-btn" ng-if="recChat.at">--\x3e\n\x3c!--                <span>@转发:</span>--\x3e\n\x3c!--                <span> <hc-tree-list-selector options="employee_selector_options" ng-model="transmit"></hc-tree-list-selector></span>--\x3e\n\x3c!--            </span>--\x3e\n\x3c!--            <span class="image-button icon-hcm-camera" img-resize-upload="" l-width="600" l-quality="1" ng-model="pic"--\x3e\n\x3c!--                  callback="add_image"></span>--\x3e\n            <span ng-click="$parent.slide=false" class="close-btn">{{\'Cancel\'|translate}}</span>\n            <span ng-click="send()" class="send-btn">{{\'common_work_warn_message_send\'|translate}}</span>\n        </div>\n    </div>\n    <footer class="footer-btn flexbox">\n        <div class="btn-box flex-1" ng-repeat="_btn in recChat.footerBtn" ng-click="btn_fuc(_btn.type)">\n            <div class="item-btn">{{_btn.label}}</div>\n        </div>\n    </footer>\n\n    <employee-selector></employee-selector>\n</div>\n'},GGhQ:function(e,t){e.exports='<div ng-init="init()" ng-click="showLocation()" ng-if="objectData" class="fieldwork-rec-interview">\n    <div class="list" ng-if="app_type == \'recruit\'">\n        <div class="interview-item-title" ng-if="fieldwork_item.invite_time">面试时间：<span\n            class="interview-item-content">{{fieldwork_item.invite_time}}</span></div>\n        <div class="interview-item-title interviewer" ng-if="!hide_contacts && fieldwork_item.interviews.length>0">面试官：\n            <div\n                class="interview-photo"\n                ng-repeat="interviewer in fieldwork_item.interviews track by $index"\n                ng-click="interview_go_emp(interviewer.id, $event)"><span>{{interviewer.name}}</span></div>\n        </div>\n        <div class="interview-item-title" ng-if="!hide_contacts&&fieldwork_item.contacts">联系人：<span\n            class="interview-item-content">{{fieldwork_item.contacts}}</span></div>\n        <div class="interview-item-title" ng-if="!hide_contacts&&fieldwork_item.contact_phone">联系方式：<span\n            class="interview-item-content">{{fieldwork_item.contact_phone}}</span></div>\n    </div>\n    <div class="interview-info" ng-if="app_type != \'recruit\'">\n        <div class="interview-info-item" ng-if="fieldwork_item.invite_time">\n            <div class="item-label"><span class="icon-hcm-clock"></span>面试时间</div>\n            <div class="item-content">{{fieldwork_item.invite_time}}</div>\n        </div>\n        <div class="interview-info-item" ng-if="!hide_contacts && fieldwork_item.interviews.length>0">\n            <div class="item-label"><span class="icon-hcm-human-tie"></span>面试官</div>\n            <div class="interviewer-info">\n                <div class="interviewer-info-content"\n                     ng-repeat="interviewer in fieldwork_item.interviews track by $index">\n                    <div class="interviewer-photo">\n                        <img ng-src="{{interviewer.photo|hcPhoto:28}}"/>\n                    </div>\n                    <div class="interviewer-name" ng-click="interview_go_emp(interviewer.id, $event)">\n                        {{interviewer.name}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="interview-info-item" ng-if="fieldwork_item.contacts && fieldwork_item.contact_phone">\n            <div class="item-label"><span class="icon-hcm-phonecall"></span>联系人</div>\n            <div class="item-content">{{fieldwork_item.contacts + \', \' + fieldwork_item.contact_phone}}</div>\n        </div>\n        <div class="interview-info-item" ng-if="fieldwork_item.address && !video_interview_enable">\n            <div class="item-label"><span class="icon-hcm-location"></span>面试地址</div>\n            <div class="item-content address">{{fieldwork_item.address}}</div>\n        </div>\n    </div>\n    \x3c!--暂时未使用--\x3e\n    \x3c!--    <div class="icon" ng-if="fieldwork_item.longitude">--\x3e\n    \x3c!--        <img--\x3e\n    \x3c!--            ng-src="http://restapi.amap.com/v3/staticmap?location={{fieldwork_item.longitude}},{{fieldwork_item.latitude}}&zoom=10&size=100*100&markers=small,0x03a9f4,:{{fieldwork_item.longitude}},{{fieldwork_item.latitude}}&key=ee95e52bf08006f63fd29bcfbcf21df0">--\x3e\n    \x3c!--    </div>--\x3e\n    <div class="fieldwork-widgets-content" ng-if="auth.candidate ||\n     (fieldwork_item.job_class == \'内部招聘\' && auth.employee.id == fieldwork_item.employee_id)">\n        <div class="interview-or-not" ng-if=" fieldwork_item.confirm_url && !fieldwork_item.order_url"\n             ng-click="goConfirm(fieldwork_item.confirm_url)"\n        ><span class="icon-hcm-click" ng-if="client==\'mobile\'"></span>点击此条消息确认是否参加面试\n        </div>\n        <div class="interview-or-not"\n             ng-if="!fieldwork_item.order_url && video_interview_enable&&is_web_video_interview_mode"\n             ng-click="goVideoInterview(fieldwork_item)"\n        ><span class="icon-hcm-click" ng-if="client==\'mobile\'"></span>点击此条消息进入视频面试\n        </div>\n        <div class="interview-item-title" ng-if="fieldwork_item.meeting_pwd">视频面试房间密码：<span\n            class="interview-item-content">{{fieldwork_item.meeting_pwd}}</span></div>\n        <div class="interview-or-not" ng-if="fieldwork_item.order_url"\n             ng-click="goConfirm(fieldwork_item.order_url)"\n        ><span class="icon-hcm-click" ng-if="client==\'mobile\'"></span>点击此条消息进行面试预约\n        </div>\n\n        <div>\n            <span ng-if="!!empName" class="fieldwork-widgets-employee">\n                {{empName}}\n            </span>\n            <span class="fieldwork-widgets-time">\n                {{fieldwork_item.datetime || beforeCurrentTime}}\n            </span>\n        </div>\n    </div>\n</div>\n'},GGvc:function(e,t,n){"use strict";n("TeQF");var i=n("5PDf"),o=n.n(i),a=n("OBge"),l=n.n(a),r=n("mrSG"),c=n("XQQm"),s=n("P6UW"),d=function(e){function t(t,n,i,o,a,l){var r=e.call(this,t,n,i,o,l)||this;return r.scope=t,r.rootScope=n,r.hcDialog=i,r.hcForm=o,r.metaVisService=a,r.$filter=l,r}return Object(r.d)(t,e),t.prototype.$onInit=function(){return Object(r.c)(this,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=s,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(r.c)(this,void 0,l.a,(function(){var t,n,i,o=this;return Object(r.e)(this,(function(a){switch(a.label){case 0:return[4,e.prototype.getMeta.call(this)];case 1:return(t=a.sent()).getKey("field_context.is_relative_level").options.hide=function(){return"DepartmentHierarchy"!==o.form_model.data.model},t.getKey("field_context.root_id").options.hide=function(){var e;return!(null===(e=o.form_model.data.field_context)||void 0===e?void 0:e.is_relative_level)},t.getKey("field_context.date_").options.hide=function(){var e;return!(null===(e=o.form_model.data.field_context)||void 0===e?void 0:e.is_relative_level)},n=t.getKey("field_context.root_id").options,[4,this.metaVisService.getFilterFormulaRefer(this.options.static_filters)];case 2:return n.refer_data=a.sent(),i=t.getKey("field_context.date_").options,[4,this.metaVisService.getFilterFormulaRefer(this.options.static_filters)];case 3:return i.refer_data=a.sent(),[2,t]}}))}))},t.prototype.parseData=function(){var e,t;return Object(r.c)(this,void 0,void 0,(function(){var n;return Object(r.e)(this,(function(i){return"DepartmentHierarchy"===(n=this.form_model.data).model&&(null===(e=n.field_context)||void 0===e?void 0:e.is_relative_level)&&(n.filter=null!==(t=o()(n))&&void 0!==t?t:[],o()(n).getKey(n.key+".begin_date")||o()(n).push({key:n.key+".begin_date"}),o()(n).getKey(n.key+".begin_date").op="lte",o()(n).getKey(n.key+".begin_date").value={type:"formula",value:n.field_context.date_},o()(n).getKey(n.key+".end_date")||o()(n).push({key:n.key+".end_date"}),o()(n).getKey(n.key+".end_date").op="gt",o()(n).getKey(n.key+".end_date").value={type:"formula",value:n.field_context.date_},o()(n).getKey(n.key+".l0_id")||o()(n).push({key:n.key+".l0_id"}),o()(n).getKey(n.key+".l0_id").op="eq",o()(n).getKey(n.key+".l0_id").value={type:"formula",value:n.field_context.root_id}),[2,n]}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","metaVisService","$filter"],t}(c.a),u=n("z/LF"),_=n.n(u);n("4SIS"),t.a={title:"对象设置",controller:d,template:_.a,size:"small",name:"model_controller"}},GO4b:function(e){e.exports=JSON.parse('{"tip":"维护字段显示属性","fields":[{"key":"key","label":"标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入标识","required":true}},{"key":"label","label":"显示名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"description","label":"字段描述","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"鼠标悬停表头时会在表格上显示的文字内容","required":false}},{"key":"dim.field","dataPath":["dim","field"],"label":"字段","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入维度字段","required":true},"field":["dim","field"]},{"key":"align","label":"对齐","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"list":[{"name":"居左","value":"left"},{"name":"居中","value":"center"},{"name":"居右","value":"right"}]}},{"key":"width","label":"宽度","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入宽度","required":false,"data_type":"number"}},{"key":"sequence","label":"顺序值","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入顺序值","required":true,"data_type":"number"}},{"key":"sorts.fields","label":"排序字段","dataPath":["sorts","fields"],"component":"hc-super-selector","options":{"singleLine":false,"width":"col-12","hide":true,"multi":true}}]}')},GRNY:function(e){e.exports=JSON.parse('{"tip":null,"groups":[{"key":"base","label":"基本信息","field_list":["key","name"]},{"key":"data","label":"OpenAPI","field_list":["api"]},{"key":"filter","label":"取数方式","field_list":[]}],"fields":[{"key":"key","label":"标识","component":"hc-input","options":{"width":"col-6","required":true,"singleLine":true,"placeholder":"请输入数据块标识"}},{"key":"name","label":"名称","component":"hc-input","options":{"singleLine":true,"width":"col-6","placeholder":"请输入数据块名称","required":true}},{"key":"api","label":"OpenAPI","component":"hc-super-selector","options":{"singleLine":true,"selectorObject":"hcm.api","width":"col-12","placeholder":"请输入API","required":false,"returnFormat":"name"}},{"key":"param","label":"调用参数","component":"hc-input-json","options":{"singleLine":true,"width":"col-12","placeholder":"请输入调用参数","required":false}},{"key":"page_count","label":"用于分页","component":"hc-input-radio","options":{"singleLine":true,"width":"col-6","required":true,"items_inline":true,"list":[{"value":true,"name":"是"},{"value":false,"name":"否"}]}}]}')},H0Ds:function(e,t,n){"use strict";var i=n("i5y0"),o=n.n(i),a=n("OBge"),l=n.n(a),r=n("mrSG"),c=n("CoJ3"),s=function(e){function t(t){var n=e.call(this)||this;return n.dataService=t,n.getFunctionList=function(e){return void 0===e&&(e=!1),Object(r.c)(n,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.compute.function.list",{is_aggregation:e})];case 1:return[2,t.sent()]}}))}))},n.getReportFunctionList=function(e){return Object(r.c)(n,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.report.function.list",{report_id:e})];case 1:return[2,t.sent()]}}))}))},n.getFieldList=function(){return Object(r.c)(n,void 0,l.a,(function(){return Object(r.e)(this,(function(e){return[2,[]]}))}))},n.computeParse=function(e){return Object(r.c)(n,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.compute.parse",{content:e})];case 1:return[2,t.sent()]}}))}))},n}return Object(r.d)(t,e),t.prototype.initService=function(e){var t,n;try{for(var i=Object(r.i)(o()(e)),a=i.next();!a.done;a=i.next()){var l=Object(r.f)(a.value,2),c=l[0],s=l[1];this[c]=s}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},t.$inject=["dataService"],t}(n("g1Qd").b);c.a.service("ComputeEditorService",s),t.a="ComputeEditorService"},H1WK:function(e,t){e.exports="<div class=\"hc-input-select-multi\">\n    <input class=\"component-input-inner\" type='text' placeholder='{{options.placeholder}}' ng-model='model'\n       ng-disabled='options.readOnly'>\n    <div class=\"number-operate add\" ng-click=\"options.customClick()\">+</div>\n</div>\n"},HKIH:function(e,t){e.exports='<div class="hc-list-loading" >\n    <div class="list-loading">\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n        <div class="anime-dot"></div>\n    </div>\n</div>\n'},HV3j:function(e,t,n){"use strict";var i=n("mrSG"),o=(n("1GJp"),n("WT49")),a=n.n(o);window.app.controller("HCMCodeViewerCtrl",["$scope","$controller","$filter",function(e,t,n){var o=this;t("HCMCodeEditorCtrl",{$scope:e});var a=function(){return Object(i.c)(o,void 0,void 0,(function(){return Object(i.e)(this,(function(t){return e.$dialog.resolve_data(e.editor.getValue()),e.$dialog.dialog_close(),[2]}))}))};e.$dialog.title("合并元数据编辑： "+e.params.meta_key),e.$dialog.options.tip=" 文档在wiki中搜索：元数据编辑",e.getDefaultOperates=function(){return[{label:"返回",key:"back",func:e.close,default:!1,left:!0},{label:n("translate")("codeViewerFormat")||"格式化",key:"format",func:e.format,default:!1,left:!0},{label:n("translate")("codeViewerSubmit")||"生成修改项",key:"submit",func:a,default:!0}]}}]),t.a={controller:"HCMCodeViewerCtrl",title:"合并元数据编辑",template:a.a}},Hi5c:function(e,t,n){e.exports='<div class=\'hc-dialog-mask\'\n     ng-class="{\'trans-mask\':!$ctrl.model.options.mask}"\n     ng-click="$ctrl.model.mask_click()"></div>\n<div class=\'hc-dialog-window\'\n     ng-style="$ctrl.model.options.styles"\n     ng-class="$ctrl.dialog_type+\'-actions-content\'">\n    <div class="hc-dialog-content">\n        <img src="'+n("ljkQ")+'"\n             alt="triangle-up-solid"\n             class="top-arrow-icon"\n             ng-if="$ctrl.dialog_type === \'anchor\'"\n             ng-class="$ctrl.calculateDirection === \'right\'?\'on-right\':\'on-left\'"/>\n        <div class="tip" ng-if="$ctrl.actions.length > 8">\n            共&ensp;<span class="high-light" ng-bind="$ctrl.actions.length"></span>&ensp;个操作项\n        </div>\n        <div class="scroll-field">\n            <div ng-repeat="_action in $ctrl.actions track by $index"\n                 class="action-item"\n                 ng-class="{\'disabled\': (_action.disabled|valueToFunc)(),\'sys-color\':_action.is_important}"\n                 ng-show="!(_action.hide|valueToFunc)()"\n                 ng-click="$ctrl.actionClick(_action)">\n                <div class="icon" ng-if="_action.icon">\n                    <span ng-class="_action.icon"></span>\n                </div>\n                <div class="label" ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n            </div>\n        </div>\n        <div class="action-item close-button"\n             ng-if="$ctrl.dialog_type === \'bottom\'"\n             ng-click="$ctrl.model.mask_click()">取消\n        </div>\n    </div>\n</div>\n'},Hmoe:function(e,t){e.exports='<div class="company-third-message-template-setting-info-style" ng-init="init()">\n    <div class="value-tip">\n        <div class="tip-label">替换字段(点击复制替换字段)</div>\n    </div>\n    <div class="value-text" ng-if="$ctrl.value_meta">\n        <div ng-repeat="item in $ctrl.value_meta">\n            <div class="value-label">{{item.description}}</div>\n            <div class="value-list">\n                <div ng-repeat="value in item.extend_dict" class="value-item">\n                    <span class="value-value-label">{{value.name}}:</span>\n                    <span class="value-value-item" value="%({{value.key}})s" hc-auto-copy>%({{value.key}})s</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},Hu0P:function(e,t,n){"use strict";n("rB9j"),n("EnZy");var i=n("ZbhI"),o=n.n(i),a=n("RXMP"),l=n.n(a),r=n("M5Mt"),c=n.n(r),s=n("526F"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("LYCE"),m=n.n(p),f=(n("srGB"),n("qF75")),h=n("UAnq"),g=n.n(h),v=n("1hbj");window.app.controller("HCOrgSelectorPanelCtrl",["$controller","BaseCRUDService","$scope","$state","$filter",function(e,t,n,i,a){n.selectorModel=n.params.selectorModel||n.params.model;var r=t.getModelService(n.selectorModel);e(f.a,{$scope:n,CRUDService:r,InfoDialog:Object(v.a)(n.selectorModel)}),n.changeDept=function(e){return n.mobile_tree_node=e,e.id},n.getEffectDate=function(){return a("valueToFunc")(n.params.effect_date||"")()||i.params.effect_date},n.getTreeKey=function(){var e,t={PreEmployee:{org:"response_department.origin_id",position:"position.origin_id"},Employee:{org:"department.origin_id",position:"position.origin_id"},Department:{org:"id",position:"id"},OrgPosition:{org:"department.origin_id",position:"position.origin_id"},OrgDepartment:{org:"origin_id",position:"origin_id"},JobInformation:{org:"department.origin_id",position:"position.origin_id"}};if(t[n.selectorModel]){var i=n.model_meta.tree.tree_key?n.model_meta.tree.tree_key:t[n.selectorModel];e=40===(n.mobile_tree_node||n.tree_model.selectedNode).org_type?i.position:i.org}else{var o,a,l,r,c,s,d,u;if(!(e=40===(n.mobile_tree_node||n.tree_model.selectedNode).org_type?null===(o=n.model_meta.tree)||void 0===o||null===(a=o.tree_key)||void 0===a?void 0:a.position:null===(l=n.model_meta.tree)||void 0===l||null===(r=l.tree_key)||void 0===r?void 0:r.org)&&(null===(c=n.model_meta.tree)||void 0===c||null===(s=c.tree_key)||void 0===s?void 0:s.tree_node_key))e=null===(d=n.model_meta.tree)||void 0===d||null===(u=d.tree_key)||void 0===u?void 0:u.tree_node_key}return e},n.getFilterDict=function(){var e,t,i,o,a,l,r,c=-1===n.tree_model.selectedNode.id?void 0:n.tree_model.selectedNode.id,s={tree_node_id:c};n.tree_model.effect_date&&(s.date_=n.tree_model.effect_date);var u,p,f,h,g={};(m()(g,null===(e=n.tree_model)||void 0===e||null===(t=e.getFilterMode())||void 0===t?void 0:t.value,{value:c,enumerable:!0,configurable:!0,writable:!0}),"child_include"===(null===(i=n.tree_model)||void 0===i||null===(o=i.getFilterMode())||void 0===o?void 0:o.value)&&(g.ignore_root_filter=null===(a=n.tree_model)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.ignore_root_filter),n.model_meta.tree.direct_subordinates)?s.parent_id=c:s[n.getTreeKey()]=40===(n.mobile_tree_node||n.tree_model.selectedNode).org_type?c:(null===(u=n.tree_model)||void 0===u?void 0:u.filter_mode)?"self"!==(null===(p=n.tree_model)||void 0===p?void 0:p.filter_mode)?g:c:!1===n.model_meta.tree.child_include?c:{child_include:c,ignore_root_filter:null===(f=n.tree_model)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.ignore_root_filter};var v=n.tree_model.tree_config.config_params;_()(r=["OrgPosition","OrgDepartment"]).call(r,n.selectorModel)&&(s.enabled=!0),v&&angular.isArray(v)&&v&&(s.enabled=!_()(v).call(v,"revoke")||[!0,!1]);var b,y,w,x,k=n.params.filter_dict||{};(k=angular.isFunction(k)?k():k,n.transMultiFilterStr(s),n.params.mode)?b=null===(y=n.params)||void 0===y?void 0:y.selector_type:b=null===(w=n.params)||void 0===w||null===(x=w.selectorOptions)||void 0===x?void 0:x[2];return b&&(s.org_type=b),d()(s,k)},n.fetchDataSuccess=function(){var e;n.model_meta.tree.direct_subordinates&&c()(e=n.list_model.data).call(e,0,0,n.tree_model.selectedNode)},n.fetchCountSuccess=function(){n.model_meta.tree.direct_subordinates&&(n.paging.total_count+=1)},n.transMultiFilterStr=function(e){var t;n.getOriginFilterStr()&&l()(t=[",","，"]).call(t,(function(t){var i;~o()(i=n.getOriginFilterStr()).call(i,t)&&angular.extend(e,{name:n.getOriginFilterStr().split(t)})}))},n.getOriginFilterStr=function(){return n.advance_query_enabled?(n.advance_query||{}).filter_str:n.searchKey.key},n.getFilterStr=function(){var e,t=n.advance_query_enabled&&"pc"===window.client?(n.advance_query||{}).filter_str:n.searchKey.key;return l()(e=[",","，"]).call(e,(function(e){t&&~o()(t).call(t,e)&&(t=null)})),t}}]),t.a={controller:"HCOrgSelectorPanelCtrl",template:g.a,title:"选择器",name:"tree-list-selector"}},"I/Ar":function(e,t){e.exports='<div ng-init="init()" class="hc-code">\n    <div class="operate" ng-if="options.type===\'edit\'">\n        <span ng-click="edit()" ng-if="status!==\'edit\'">编辑</span>\n        <span ng-click="finish()" ng-if="status!==\'finish\'">完成</span>\n    </div>\n    <div class="hcm-code">\n    </div>\n</div>\n'},I4ev:function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="go_approval_process()">\n    <div>{{\'perf_click_see_progress\'|translate}}</div>\n</div>\n'},IGAs:function(e,t){e.exports='<div class="hcm-content-bottom">\n    <div class="list-content-tip" ng-if="list_config.tip && list_config.tip_config.pc === \'tile\'">\n        <hc-content-tip content="list_config.tip" options="list_config.tip_config" tip-status="tip_status"></hc-content-tip>\n    </div>\n    <div class="hcm-hc-list-container" ng-if="![\'analyses\',\'analyses_board\'].includes(viewSwitch.current[\'key\'])"\n         ng-hide="(hideComponents || []).includes(\'hcm-hc-list-container\')">\n        <hc-list-new model="list_model"></hc-list-new>\n        <hc-list-no-data\n            uuid="$parent.isolatedUuid"\n            model="list_model"\n            caption="{{model_meta.list_config.no_content_caption|| \'No corresponding data found\' | translate}}"\n        ></hc-list-no-data>\n    </div>\n    <div class="hcm-hc-list-container " ng-if="viewSwitch.current[\'key\']==\'analyses_board\'"\n         ng-hide="(hideComponents || []).includes(\'hcm-hc-list-container\')">\n        <analyses-board model="analyses_model"></analyses-board>\n    </div>\n    <div class="hcm-foot flex" ng-if="![\'analyses\',\'analyses_board\'].includes(viewSwitch.current[\'key\'])"\n         ng-hide="(hideComponents || []).includes(\'hcm-foot\') || list_config.view === \'tree\'"\n         data-ng-show="!is_pdf_print">\n        <div class="hcm-foot-stat flex-1"\n             ng-if="stat_meta.length>0 && stat_data.length>0 && model_meta.list_config.stat_config.stat_mode!=\'table-footer\'">\n                     <span ng-repeat="_stat in stat_meta">\n                            <span class="stat-label">{{_stat.label}}</span>\n                            <span\n                                class="stat-data">{{stat_data[0][_stat.key]|hcNumber:(_stat.decimal || list_config[\'statistics_decimal\'] || _stat.precision || 0)}}&nbsp;&nbsp;</span>\n                    </span>\n        </div>\n        <span class="more" ng-click="showCount()"\n              ng-if="stat_meta.length>0 && stat_data.length>0 && model_meta.list_config.stat_config.stat_mode!=\'table-footer\'">查看合计</span>\n        <div class="hcm-foot-paging">\n            <hc-paging paging="paging"></hc-paging>\n        </div>\n    </div>\n</div>\n\n<div class="hcm-hc-list-container" ng-if="viewSwitch.current[\'key\']==\'analyses\'"\n     ng-hide="(hideComponents || []).includes(\'hcm-hc-list-container\')">\n    <base-analyses model="analyses_model"></base-analyses>\n</div>\n'},IKIc:function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="examine_modify()" ng-if="public == 1">\n    <div>点击进入,查看录用审批记录<span class="icon-hcm-arrow-right"></span></div>\n</div>\n'},IW8H:function(e,t,n){"use strict";n("sMBO"),n("07d7"),n("rB9j"),n("JfAA"),n("UxlC"),n("EnZy");var i=n("/FZm"),o=n.n(i),a=n("o+MX"),l=n.n(a),r=n("a0dU"),c=n.n(r),s=n("5PDf"),d=n.n(s),u=(n("ls82"),n("SPx3")),_=n.n(u),p=n("guyh"),m=n.n(p),f=n("ZbhI"),h=n.n(f),g=n("RXMP"),v=n.n(g),b=n("FLGM"),y=n.n(b),w=n("k8Y/"),x=n.n(w),k=n("sEfC"),$=n.n(k),O=n("CoJ3"),D=n("33yf"),C=n("GpMl");O.a.directive("hcInputUploadMultiple",[function(){return{restrict:"EA",template:n("Fp+S"),scope:{options:"<",key:"=",label:"=",model:"=ngModel"},controller:["formStructureService","$scope","$state","$hcDialog","hcUploadFile","attachService","$element","$rootScope","documentPreviewService","componentDefaultService","$filter","weChatService","hcImageService",function(e,t,n,i,a,r,s,u,p,f,g,b,w){var k=function(e){return D.join(window.hcm_wengen,e)};t.init=function(){if(t.options=t.options||{},"img"===t.options.src_type)t.img_src="/img?index=",t.src="/img?index=";else if(t.options.custom_api){var e,n;t.uploadLocal=t.options.uploadLocal,t.custom_upload_url=t.options.custom_api.upload,t.custom_download_url=t.options.custom_api.download,t.md5_url=t.options.custom_api.md5_url,t.chunk_url=t.options.custom_api.chunk_url,t.merge_url=t.options.custom_api.merge_url,t.custom_load_api=t.options.custom_api.loadImg,t.src=null===(e=t.options.custom_api)||void 0===e?void 0:e.preview,t.img_src=(null===(n=t.options.custom_api)||void 0===n?void 0:n.img_src)||"/img?index="}else t.src="/document/loadsourcedocument/",t.img_src="/document/loadsourceimage?index=";t.src=k(t.src),t.img_src=k(t.img_src),t.hcm_env_pre=window.hcm_env_pre,t.hcm_env_post=window.hcm_env_post,t.img_type=["png","jpg","jpeg","bmp"],t.vga_type=["mp3","mp4"],t.thumbnail_file_type=["doc","docx","xls","xlsx","ppt","pptx","pdf","mp4"],t.file_list=[],t.client=window.client,console.log("in upload component");var i=f.setComponentDefault(t.model,"hc-input-upload-multiple",t.options);g("isValidValue")(i)&&(t.model=i)},t.$watch("model",(function(e,n){var i;t.model?/mp3|mp4/.test(t.model)?t.options.file_to_thumbnail&&/mp4/.test(t.model)?r.annexInfoMore(t.model.split("#"),t.custom_load_api).then((function(e){t.options.file_name&&(e=y()(e).call(e,(function(e){return e.source_name=t.options.file_name,e}))),t.options.file_to_thumbnail&&v()(e).call(e,(function(e){var n;h()(n=t.thumbnail_file_type).call(n,e.file_type)>-1&&(e.img_exists?e.thumbnail_src=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+e.index+"/1"+window.hcm_env_pre:p.getFileThumbnail(e.index).then((function(t){e.thumbnail_src=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+t+"/1"+window.hcm_env_pre})))})),t.file_list=e})):t.file_list=[{file_type:t.model.split(".")[t.model.split(".").length-1],name:t.model.split(",")[1],source_name:t.model.split(",")[1],file_id:t.model.split(",")[0]}]:"img"===t.options.src_type?t.file_list=y()(i=angular.copy(t.model.split("#"))).call(i,(function(e){var t={};return t.index=e,t.file_type="png",t})):r.annexInfoMore(t.model.split("#"),t.custom_load_api).then((function(e){t.options.file_name&&(e=y()(e).call(e,(function(e){return e.source_name=t.options.file_name,e}))),t.options.file_to_thumbnail&&v()(e).call(e,(function(e){var n;h()(n=t.thumbnail_file_type).call(n,e.file_type)>-1&&(e.img_exists?e.thumbnail_src=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+e.index+"/1"+window.hcm_env_pre:p.getFileThumbnail(e.index).then((function(t){e.thumbnail_src=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+t+"/1"+window.hcm_env_pre})))})),t.file_list=e})):t.file_list=[];e!==n&&t.options.change&&t.options.change(t,e,n)}),!0),t.changeModel=function(){var e="";if(m()(t.options)){var n="desc"===m()(t.options)?"desc":"asc";t.file_list=x()(t.file_list,["source_name"],n)}for(var i=0;i<t.file_list.length;i++)e+="#"+t.file_list[i].index;t.model=e.substr(1,e.length-1)},t.attachment_del=function(){var e=_()(c.a.mark((function e(n,i){var o,l,r,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),i.stopPropagation(),l=n.index,t.file_list=d()(o=t.file_list).call(o,(function(e){return!(e.index===l)})),!t.options.delete_source){e.next=9;break}return s=null===(r=t.options.custom_api)||void 0===r?void 0:r.delete,u=t.options.process_delete?g("valueToFunc")(t.options.process_delete)(n):{index:l,file_type:n.file_type},e.next=9,a.delSourceFile(s,u);case 9:t.changeModel();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.attachment_download=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0;if(o.preventDefault(),o.stopPropagation(),!e&&!t.custom_download_url)return e=t.model.split("/").pop().split(",")[0],b.downloadTcMp4(e,n);var a,r,c,s,d=l()(a=l()(r=l()(c="".concat(location.protocol+"//"+location.host)).call(c,t.src)).call(r,e)).call(a,window.hcm_env_pre);"mp4"===i&&t.custom_download_url&&(d=l()(s="".concat(t.custom_download_url)).call(s,e)),console.log("attachment_download, url:"+d+"."+i),b.fileDownload(d,n,i)},t.add_img=function(e){var n={index:null,file_type:"png"};t.is_uploading=!0,t.options.upload_img&&w.uploadImg(e).then((function(e){t.is_uploading=!1,n.index=e,"number"==typeof t.options.length&&t.file_list.length>=t.options.length||t.file_list.push(n),t.changeModel()})),t.options.upload_document&&w.uploadDocument(e).then(t.after_upload)},t.attachment_upload=function(){var e,n,i,l,r,c,d,u,_,p;if(t.options.upload_img||t.options.upload_document)o()(s).call(s,".hc-input-img-add").click();else if(console.log("in attachment upload"),!t.options||!g("valueToFunc")(t.options.readOnly)()){var m=angular.extend(t.options,{type:t.options.type,file_type:t.options.file_type,size:t.options.size||"5MB",minSize:t.options.minSize||"0MB",upload_desc:t.options.upload_desc,file_name:t.options.file_name,upload_type:t.options.upload_type||"auto",single_upload:t.options.single_upload,multiple:!0,after_process:t.options.after_process,processVGA:t.options.processVGA,url:void 0===t.custom_upload_url?null===(e=t.options)||void 0===e||null===(n=e.custom_api)||void 0===n?void 0:n.upload:t.custom_upload_url,uploadLocal:void 0===t.uploadLocal?null===(i=t.options)||void 0===i||null===(l=i.custom_api)||void 0===l?void 0:l.uploadLocal:t.uploadLocal,md5_url:void 0===t.md5_url?null===(r=t.options)||void 0===r||null===(c=r.custom_api)||void 0===c?void 0:c.md5_url:t.md5_url,chunk_url:void 0===t.chunk_url?null===(d=t.options)||void 0===d||null===(u=d.custom_api)||void 0===u?void 0:u.chunk_url:t.chunk_url,merge_url:void 0===t.merge_url?null===(_=t.options)||void 0===_||null===(p=_.custom_api)||void 0===p?void 0:p.merge_url:t.merge_url});console.log("attachment_upload params:"),a.upload(m).then(t.after_upload)}},t.after_upload=function(e){console.log("after upload file, data:"),"[object Object]"===Object.prototype.toString.call(e)&&(e=[e]);var n=y()(e).call(e,(function(e){return e.index}));0!==n.length&&n[0]&&r.annexInfoMore(n,t.custom_load_api).then((function(e){for(var n=0;n<e.length;n++)"number"==typeof t.options.length&&t.file_list.length>=t.options.length||(t.options.file_name&&(e[n].source_name=t.options.file_name),t.file_list.push(e[n]));t.changeModel()}))},t.showImg=function(e,n){var i;n.preventDefault(),n.stopPropagation();var o=[],a=0;y()(i=t.file_list).call(i,(function(n,i){/jpg|jpeg|png|bmp/i.test(n.file_type)&&(o.push(t.src+n.index+window.hcm_env_pre),i===e&&(a=o.length-1))})),u.img_preview(o,a,t.options.img_preview_config)},t.showFile=$()((function(e,o,a){a.preventDefault(),a.stopPropagation(),t.options.origin_preview&&"pc"===window.client?i.getDialog(C.a).title(t.options.origin_preview_title||null).params({index:e,file_name:o,temp:"not_use"}).name(t.options.origin_preview_name||n.current.name).size(t.options.origin_preview_size||"full").show():p.preViewDocument(e,"",[],t.options)}),300),t.showVGA=function(e,n){n.preventDefault(),n.stopPropagation(),t.options.processVGA?a.showVGA({name:t.file_list[e].name,fileId:t.file_list[e].file_id}):a.showCommonVGA(t.file_list[e].index)},t.proxyClick=function(e,n,i){var o,a,l,r;i.preventDefault(),i.stopPropagation(),"function"==typeof t.options.custom_preview&&t.options.custom_preview(n,t.file_list)||(h()(o=t.img_type).call(o,n.file_type.toLowerCase())>=0&&!t.options.file_preview?t.showImg(e,i):h()(a=t.img_type).call(a,n.file_type.toLowerCase())<0&&h()(l=t.vga_type).call(l,n.file_type.toLowerCase())<0||t.options.file_preview?t.showFile(n.index,t.options.file_preview?n.source_name.replace(/\.(png|jpg|jpeg)$/,".pdf"):n.source_name,i):h()(r=t.vga_type).call(r,n.file_type.toLowerCase())>=0&&t.showVGA(e,i))},t.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},t.getFileIcon=function(e){switch(e.file_type.toLowerCase()){case"xls":case"xlsx":case"xml":return"icon-hcm-attachment-excel";case"ppt":case"pptx":return"icon-hcm-attachment-ppt";case"doc":case"docx":case"dot":case"dotx":case"docm":case"dotm":return"icon-hcm-attachment-word";case"pdf":return"icon-hcm-attachment-pdf";default:return"icon-hcm-link"}}}]}}])},IX8O:function(e,t){e.exports='<div class="list-plugin">\n    <hc-list-view-card-container ng-if="list_config.card_plugin" card-meta="list_config.card_plugin" environment="card_env"></hc-list-view-card-container>\n</div>'},IbM4:function(e,t){e.exports="<div class=\"component-container\"\n     ng-init=\"init();hover=false\"\n     ng-mouseover=\"hover=true\"\n     ng-mouseleave=\"hover=false\">\n    <div class='component-input-inner hc-selector'\n         ng-bind='selector_label||((options.readOnly|valueToFunc)()?\"\":options.placeholder)'\n         ng-class='{placeholder:!model}'\n         ng-disabled='(options.readOnly|valueToFunc)()'\n         ng-click='onClick($event)'\n         hc-title=\"{{selector_label}}\"\n         options=\"{mode: 'tip', showOnOverflow: true}\">\n    </div>\n    <div ng-show=\"!(options.readOnly|valueToFunc)()\"\n         ng-click=\"([null,undefined].includes(model)||options.no_delete)? onClick($event) : del($event)\"\n         class=\"input-icon\"\n         ng-class=\"(![null,undefined].includes(model)&&(client==='mobile'||hover)&&!options.no_delete)\n             ?'icon-hcm-delete'\n             : options.icon?options.icon:client==='pc'\n                 ?'icon-hcm-screening'\n                 :'icon-hcm-arrow-right'\">\n    </div>\n</div>\n"},IpWV:function(e,t,n){"use strict";var i=n("KiNy"),o=n.n(i);n("cywy");window.app.controller("loginProtocolDialogCtrl",["$controller","$rootScope","$scope","$timeout",function(e,t,n,i){n.init=function(){n.hcm_wengen=window.hcm_wengen},n.$dialog.operates([{label:"确认并同意",func:function(){n.$dialog.resolve_data(!0),n.$dialog.dialog_close()},default:!0}])}]),t.a={name:"login-protocol-dialog",controller:"loginProtocolDialogCtrl",template:o.a,mask:!0}},IvGF:function(e,t){e.exports="<div class=\"component-container\">\n    <div class=\"op-bar\" data-ng-if=\"operate_list.length\">\n        <div data-ng-repeat=\"op in operate_list track by $index\"\n             class=\"op-desc icon {{op.hideIcon?'operate-label':op.icon}}\"\n             hc-title=\"{{op.label}}\"\n             ng-style=\"op.style\"\n             options=\"{}\"\n             data-ng-click=\"(options.readOnly|valueToFunc)()||setOp(op)\">{{op.hideIcon?op.label:''}}</div>\n    </div>\n\n    <textarea id=\"{{id}}\"\n              ng-class=\"{'readonly': (options.readOnly|valueToFunc)(),\n              'bordered': client==='mobile'&&options.bordered}\"\n              msd-elastic\n              class='hc-text-area component-input-inner'\n              ng-model-options='{debounce: options.debounce || (options.change ? 300 : 0 )}'\n              ng-change='change()'\n              placeholder='{{(options.readOnly|valueToFunc)()&&!options.showPlaceholder?\"\":((options.placeholder|valueToFunc)()||placeholder)}}'\n              ng-model='model'\n              ng-blur='customBlur()'\n              ng-focus='customFocus()'\n              ng-trim='{{options.trim==undefined?true:options.trim}}'\n              ng-disabled='(options.readOnly|valueToFunc)()'\n              ng-style='(options.styles|valueToFunc)(model)'\n              maxlength='{{options.maxlength}}'>\n    </textarea>\n    <div ng-show=\"false\"\n         class=\"component-input-inner\">\n        {{model}}\n    </div>\n</div>\n"},J0VW:function(e,t){e.exports='<div class="hc-list-card-operate">\n    <div class="operate" ng-repeat="_row in operates" ng-click="operate_select(_row)">\n        {{_row.label}}\n    </div>\n</div>'},J23k:function(e,t,n){"use strict";var i=n("a0dU"),o=n.n(i),a=n("BF1V"),l=n.n(a),r=n("0lTi"),c=n.n(r),s=n("5PDf"),d=n.n(s),u=n("FLGM"),_=n.n(u),p=n("RXMP"),m=n.n(p),f=n("TEMH"),h=n.n(f),g=n("UtpJ"),v=n.n(g),b=(n("ls82"),n("SPx3")),y=n.n(b),w=n("BkRI"),x=n.n(w),k=n("/fjs"),$=n.n(k),O=(n("Jqzt"),n("65fD"),n("ZbhI")),D=n.n(O),C=n("M5Mt"),M=n.n(C),S=n("fJFi"),E=n.n(S);n("aTJm");window.app.controller("selectedPanelCtrl",["$scope",function(e){e.$dialog.operates([{cancel:!0,label:"返回",func:function(){e.$dialog.dialog_close()}}]),e.deleteItem=function(t){var n,i,o=_()(n=e.params.list).call(n,(function(e){return e.id}));M()(i=e.params.list).call(i,D()(o).call(o,t.id),1)}}]);var P={controller:"selectedPanelCtrl",template:E.a,title:"已选中的组织"},j=n("qD00");window.app.controller("newTreePanelCtrl",["$hcSimpleTree","$scope","commonTreeLoaderService","$state","$filter","$hcDialog",function(){var e=y()(o.a.mark((function e(t,n,i,a,r,s){var u,p,f,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=new j.a(n.params),n.show_revoke="",p.show_revoke&&(n.show_revoke="revoke"),n.client=window.client,n.model=p.selectorModel||p.model,!p.treeLoader){e.next=9;break}f=p.treeLoader,e.next=47;break;case 9:if("org"!==p.tree_type){e.next=29;break}return e.t0=i,e.next=13,r("valueToFunc")(p.filter_dict)();case 13:if(e.t1=e.sent,e.t1){e.next=16;break}e.t1={};case 16:return e.t2=e.t1,e.next=19,r("valueToFunc")(p.extra_property)();case 19:if(e.t3=e.sent,e.t3){e.next=22;break}e.t3={};case 22:e.t4=e.t3,e.t5=p.filter_str,e.t6=n.model,e.t7={filter_dict:e.t2,extra_property:e.t4,filter_str:e.t5,model:e.t6},f=e.t0.getNewOrgTreeLoader.call(e.t0,e.t7).org_tree_loader,e.next=47;break;case 29:return e.t8=i,e.t9=n.model,e.t10=p.state,e.next=34,r("valueToFunc")(p.filter_dict)();case 34:if(e.t11=e.sent,e.t11){e.next=37;break}e.t11={};case 37:return e.t12=e.t11,e.next=40,r("valueToFunc")(p.extra_property)();case 40:if(e.t13=e.sent,e.t13){e.next=43;break}e.t13={};case 43:e.t14=e.t13,e.t15=p.filter_str,e.t16={filter_dict:e.t12,extra_property:e.t14,filter_str:e.t15},f=e.t8.getNewCommonTreeLoader.call(e.t8,e.t9,e.t10,e.t16).common_tree_loader;case 47:n.tree_model=t.createTree(f,p),(null===(u=n.params)||void 0===u?void 0:u.dblclick)&&n.tree_model.$setDblClick((function(e){n.tree_model.selectedNode=e,n.submit()})),g=r("valueToFunc")(p.effect_date||"")(),n.tree_model.$initTree(p.tree_id,null,{effect_date:g||a.params.effect_date,config_params:[n.show_revoke]}),n.$dialog.operates([{cancel:!0,label:"取消",func:function(){n.$dialog.dialog_close()}},{label:function(){return"已选中 <span>".concat((n.tree_model.selected_list||[]).length,"</span>")},hide:function(){return!(n.tree_model.options.multi&&"self"===n.tree_model.options.mode&&"pc"===n.client)},func:function(){n.openSelectedListInfo()}},{label:"上一级",hide:function(){return"pc"===n.client||(null===(e=n.tree_model.history_org_list)||void 0===e?void 0:e.length)<=1;var e},func:function(){var e;n.tree_model.current_org=n.tree_model.history_org_list[n.tree_model.history_org_list.length-2],n.tree_model.history_org_list=v()(e=n.tree_model.history_org_list).call(e,0,n.tree_model.history_org_list.length-1)}},{label:function(){var e,t;return"pc"===window.client?~h()(e=n.tree_model.data).call(e,(function(e){return 1!==e.selected_status}))?r("translate")("selectAll")||"全选":r("translate")("Reset")||"重置":~h()(t=n.tree_model.current_org.child).call(t,(function(e){return 1!==e.selected_status}))?r("translate")("selectAll")||"全选":r("translate")("Reset")||"重置"},hide:function(){var e,t;if(!n.tree_model.current_org||"sync"!==n.tree_model.options.mode||(null===(e=n.tree_model.current_org)||void 0===e||null===(t=e.child)||void 0===t?void 0:t[0].is_virtual_root_node))return!0},left:!0,func:function(){var e,t,i,o,a,l;"pc"===n.client?~h()(e=n.tree_model.data).call(e,(function(e){return 1!==e.selected_status}))?m()(t=n.tree_model.data).call(t,(function(e){1!==e.selected_status&&n.tree_model.$selectNodeMulti(e)})):m()(i=n.tree_model.data).call(i,(function(e){1===e.selected_status&&n.tree_model.$selectNodeMulti(e)})):~h()(o=n.tree_model.current_org.child).call(o,(function(e){return 1!==e.selected_status}))?m()(a=n.tree_model.current_org.child).call(a,(function(e){1!==e.selected_status&&n.tree_model.$selectNodeMulti(e)})):m()(l=n.tree_model.current_org.child).call(l,(function(e){1===e.selected_status&&n.tree_model.$selectNodeMulti(e)}))}},{default:!0,label:"确定",func:function(){n.submit()}}],void 0,{outer_btn_count:4}),n.openSelectedListInfo=function(){s.getDialog(P).size("middle").show({list:n.tree_model.selected_list}).then((function(){}))},n.submit=y()(o.a.mark((function e(){var i,a,r,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.multi){e.next=24;break}if("self"!==p.mode){e.next=5;break}n.$dialog.resolve_data(n.tree_model.selected_list),e.next=22;break;case 5:if(!n.tree_model.options.usePlan){e.next=16;break}return e.next=8,t.preResolveSelectedNodesForPlan(n.tree_model);case 8:if(!(i=e.sent)){e.next=13;break}n.$dialog.resolve_data(i),e.next=14;break;case 13:return e.abrupt("return");case 14:e.next=22;break;case 16:r=[],s=x()(n.tree_model.getSelectedNodes()),_()(a=n.tree_model.syncModeListTemp).call(a,(function(e){_()(s).call(s,(function(t){e===t.id&&(r.push(t),t.flag=!0)}))})),u=d()(s).call(s,(function(e){return!e.flag})),_()(u).call(u,(function(e){r.push(e)})),n.$dialog.resolve_data(c()(new l.a(r)));case 22:e.next=25;break;case 24:n.$dialog.resolve_data(n.tree_model.selectedNode);case 25:n.$dialog.dialog_close();case 26:case"end":return e.stop()}}),e)})));case 54:case"end":return e.stop()}}),e)})));return function(t,n,i,o,a,l){return e.apply(this,arguments)}}()]);t.a={controller:"newTreePanelCtrl",template:$.a,title:"选择器",name:"new-org-tree"}},JMAH:function(e,t){e.exports='<div class="print-view-container">\n\n</div>\n'},JQAc:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("rB9j"),n("EnZy"),n("R5XZ");var i=n("RXMP"),o=n.n(i),a=n("ZbhI"),l=n.n(a),r=n("5PDf"),c=n.n(r),s=n("mrSG"),d=n("AMH7"),u=function(e){function t(t){var n=e.call(this,"/")||this;return n.rootScope=t,n.listener=[{evt:null,func:function(e,t){n.rootScope.$broadcast(e,t)}},{evt:["connect"],func:function(e,t){n._interval&&window.clearInterval(n._interval),n._interval=window.setInterval((function(){n.send("ping")}),3e3)}},{evt:["kickout","logout"],func:function(){n.close()}}],n}return Object(s.d)(t,e),t}((function(e,t){var n=this;void 0===t&&(t=[]),this.add_listener=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),n.listener=n.listener||[],n.listener.push({func:e,evt:t})},this.on_event=function(e,t){var i;console.log("Event@'"+n.namespace+"':"+e);var a=c()(i=n.listener).call(i,(function(t){var n,i;return(!t.evt||l()(n=t.evt).call(n,e)>-1)&&(!t.except||l()(i=t.except).call(i,e)<0)}));o()(a).call(a,(function(n){return n.func(e,t)}))},this.open=function(e){n.instance=Object(d.io)(n.namespace,{path:window.hcm_wengen+"/web_socket",auth:e,transports:["websocket"],query:window.hcm_env_pre?{env:window.hcm_env_pre.split("?")[1].split("=")[1]}:{}}),n.instance.on("connect",(function(){n.on_event("connect",null)})),n.instance.onAny((function(e,t){n.on_event(e,t)}))},this.send=function(e,t){void 0===t&&(t=null),n.instance.emit(e,t)},this.close=function(){n.instance.close()},this.namespace=e,this.listener=t}))},JWVR:function(e,t){e.exports='<div id="hc-common-import" ng-init="init()">\n    <div class="import-emp-info">\n        <div class="item" ng-repeat="item in params.operate track by $index" ng-click="item.click&&item.click()">\n            <div>\n                <div class="icon category-icon" ng-class="item.icon"></div>\n                <div>{{item.content}}</div>\n            </div>\n        </div>\n    </div>\n</div>'},JZvF:function(e,t){e.exports='<div class="model-list-style query-filter-panel" ng-init="init()">\n    <div class="tabPanes">\n        <hc-tabs value="current_tab"\n                 on-value-change="changeType">\n            <hc-tab-pane\n                ng-repeat="tab in tab_item track by $index"\n                label="tab.label"\n                name="tab.value"\n                hide-count=true\n            ></hc-tab-pane>\n        </hc-tabs>\n    </div>\n\n    <div class="hcm-nav-content">\n        <div class="hcm-nav full-height">\n            <div class="hcm-nav-fixed">\n                <div ng-show="current_tab!==\'column_defs\'">\n                    <hc-dataset model="dataset[current_tab]"></hc-dataset>\n                </div>\n                <div ng-show="current_tab===\'column_defs\'" class="column_defs">\n                    <div class="able-fields">\n                        <div class="header">{{\'common_filter_panel_setting_dialog_available_fields\'|translate}}</div> \x3c!--可用字段--\x3e\n                        <hc-sortable-tree model="ableFieldsTree"></hc-sortable-tree>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <div class="hcm-content flex" ng-if="current_tab!==\'column_defs\'">\n            <div class="hcm-content-indicator operate-banner flex">\n                <div class="flex-1">\n                </div>\n                <div class="search">\n                    <span class="icon icon-hcm-check"></span>\n                    <input ng-model="searchKey.key" class="search ng-pristine ng-untouched ng-valid ng-empty"\n                           placeholder="{{\'common_filter_panel_setting_dialog_field_name\'|translate}}" type="search" ng-keyup="searchKey.blur($event)">  \x3c!--字段名称--\x3e\n                </div>\n            </div>\n            <div class="hcm-hc-list-container">\n                <hc-config-list model="config_model[current_tab]"></hc-config-list>\n            </div>\n        </div>\n        <div class="hcm-content flex  " ng-if="current_tab===\'column_defs\'">\n            <div class="column-defs-tree">\n                <div class="header">{{\'common_filter_panel_setting_dialog_multi_header_definition\'|translate}}</div>  \x3c!--多表头定义--\x3e\n                <hc-sortable-tree model="sortTree"></hc-sortable-tree>\n            </div>\n        </div>\n    </div>\n</div>\n'},JkKW:function(e){e.exports=JSON.parse('[{"type":"3gpp","mime":"audio/3gpp, video/3gpp"},{"type":"ac3","mime":"audio/ac3"},{"type":"asf","mime":"allpication/vnd.ms-asf"},{"type":"au","mime":"audio/basic"},{"type":"css","mime":"text/css"},{"type":"csv","mime":"text/csv"},{"type":"doc","mime":"application/msword"},{"type":"dot","mime":"application/msword"},{"type":"dtd","mime":"application/xml-dtd"},{"type":"dwg","mime":"image/vnd.dwg"},{"type":"dxf","mime":"image/vnd.dxf"},{"type":"gif","mime":"image/gif"},{"type":"htm","mime":"text/html"},{"type":"html","mime":"text/html"},{"type":"jp2","mime":"image/jp2"},{"type":"jpe","mime":"image/jpeg"},{"type":"jpeg","mime":"image/jpeg"},{"type":"jpg","mime":"image/jpeg"},{"type":"jpg","mime":"image/jpg"},{"type":"js","mime":"text/javascript, application/javascript"},{"type":"json","mime":"application/json"},{"type":"mp2","mime":"audio/mpeg, video/mpeg"},{"type":"mp3","mime":"audio/mpeg"},{"type":"mp4","mime":"audio/mp4, video/mp4"},{"type":"mpeg","mime":"video/mpeg"},{"type":"mpg","mime":"video/mpeg"},{"type":"mpp","mime":"application/vnd.ms-project"},{"type":"ogg","mime":"application/ogg, audio/ogg"},{"type":"pdf","mime":"application/pdf"},{"type":"png","mime":"image/png"},{"type":"pot","mime":"application/vnd.ms-powerpoint"},{"type":"pps","mime":"application/vnd.ms-powerpoint"},{"type":"ppt","mime":"application/vnd.ms-powerpoint"},{"type":"rtf","mime":"application/rtf, text/rtf"},{"type":"svf","mime":"image/vnd.svf"},{"type":"tif","mime":"image/tiff"},{"type":"tiff","mime":"image/tiff"},{"type":"txt","mime":"text/plain"},{"type":"wdb","mime":"application/vnd.ms-works"},{"type":"wps","mime":"application/vnd.ms-works"},{"type":"xhtml","mime":"application/xhtml+xml"},{"type":"xlc","mime":"application/vnd.ms-excel"},{"type":"xlm","mime":"application/vnd.ms-excel"},{"type":"xls","mime":"application/vnd.ms-excel"},{"type":"xlt","mime":"application/vnd.ms-excel"},{"type":"xlw","mime":"application/vnd.ms-excel"},{"type":"xml","mime":"text/xml, application/xml"},{"type":"zip","mime":"application/zip"}]')},JlzZ:function(e,t){e.exports='<div class=\'hc-dialog-mask trans-mask\' ng-class="{\'mask\':$ctrl.model.options.mask}"\n     ng-click="$ctrl.model.mask_click()" ng-style="$ctrl.model.options.mask_style"></div>\n<div class=\'hc-dialog-window\' ng-style="$ctrl.model.options.styles" ng-class="{\'anchor\': $ctrl.model.is_anchor}">\n    <header ng-if="!$ctrl.model.options.no_title && $ctrl.model.options.title" ng-mousedown="$ctrl.model.startDrag($event, $ctrl.model)">\n\n        <div class="header-img" ng-if="$ctrl.model.options.title_img" >\n            <img ng-src="{{$ctrl.model.options.title_img|hcPhoto:32}}">\n        </div>\n        <div class="main" >\n            <div class="hc-dialog-title">{{$ctrl.model.options.title}}</div>\n            <span class="tip icon icon-hcm-question"\n                  ng-if="$ctrl.model.options.tip"\n                  hc-title="{{$ctrl.model.options.tip}}"\n                  options="$ctrl.model.options">\n            </span>\n        </div>\n        <div class="icon set-full" ng-hide="!$ctrl.model.set_full"\n            ng-class="$ctrl.model.full_status?\'icon-hcm-arrow-narrow\':\'icon-hcm-arrow-amplificat\'"\n            ng-click="$ctrl.model.set_full_status()"></div>\n        <div class="icon icon-hcm-delete zsb-dialog-delete"\n             ng-click="$ctrl.model.close?$ctrl.model.close():$ctrl.model.check_close()" ng-hide="$ctrl.model.options.hideClose"></div>\n    </header>\n    <div class="hc-dialog-content"\n         ng-class="{\'no-title\':($ctrl.model.options.no_title || $ctrl.model.options.title==null),\n                    \'no-footer\':!($ctrl.model.options.operates && $ctrl.model.options.operates.length>0),\n                    \'no-border\':$ctrl.model.options.no_border\n                    }"\n         ng-transclude>\n    </div>\n    <footer ng-if="$ctrl.model.list_btn_model.actions.length>0">\n        <hc-list-btn model="$ctrl.model.list_btn_model"></hc-list-btn>\n    </footer>\n</div>\n'},JrBa:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).data,o=e.index,a=e.customRowClass,l=e.offsetHeight,r=e.height,c=e.row_space,s=e.getRowBackgroundColor,d=e.rowStruct,u=e.needBgClolr,_=i.$each,p=e.flex_cols,m=(e.col,e.col_index,e.customCellClass),f=e.dirty,h=e.id_key,g=e.lineClamp,v=e.setTitle,b=e.diffDirty;return t+='<div class="table-row ',t+=i.getRowClass(n,o,a),t+='" row-index=',t+=o,t+='\n     style="top:',t+=l,t+="px;width:100%;height:",t+=r,t+="px;left:0; \n     ",t+=i.getRowStyle(n,o,c,s,d,u),t+='"\n     hcm-key="',t+=n.id,t+='">\n    ',_(p,(function(e,a){t+='\n    <div class="table-cell ',t+=i.getCellClass(n,e,m,f,h),t+='"  col-index=',t+=e.index,t+=" col-key=",t+=e.key,t+='\n         style="left:',t+=e.left,t+="px;width:",t+=e.width||80,t+="px;height:100%; ",t+=i.getCellStyle(n,e),t+="\">\n        <div class='cell-content' style='",t+=i.getContentStyle(o,r,g),t+="' title='",t+=i.getTitle(n,e,f,v),t+="'>",t+=i.getCellText(n,e,f,b,h),t+="</div>\n    </div>\n        "})),t+="\n</div>\n"}},Jrtj:function(e,t){e.exports='<div id="left_menu">\n    <div class="menu-box" ng-repeat="_menu_box in leftmenuitems">\n        <div class="menu-item-group">\n            <span class="menu-item-icon {{_menu_box.group.icon}}"></span>\n            <span class="menu-item-group-text">{{_menu_box.group.name}}</span>\n        </div>\n\n        <div class="menu-item-box" ng-repeat="_item in _menu_box.items" ng-if="_item.enable == \'true\'">\n            <div class="menu-item-text"\n                 ng-class="{\'menu-item-text-selected\':_item.currentItem == currentItem}"\n                 ng-click="changeItem(_item.currentItem) && _item.click_action()">{{_item.name}}\n            </div>\n        </div>\n    </div>\n</div>'},Jrze:function(e){e.exports=JSON.parse('{"tip":null,"fields":[{"key":"key","label":"标识","component":"hc-input","options":{"width":"col-6","required":true,"singleLine":true,"placeholder":"请输入数据块标识"}},{"key":"name","label":"名称","component":"hc-input","options":{"singleLine":true,"width":"col-6","placeholder":"请输入数据块名称","required":true}},{"key":"source","label":"公式","component":"hc-input-compute","options":{"singleLine":false,"width":"col-12","placeholder":"请输入公式","required":false,"returnFormat":"content","computeService":{"domain":"base.report"}}},{"key":"page_count","label":"用于分页","component":"hc-input-radio","options":{"singleLine":true,"width":"col-6","required":true,"items_inline":true,"list":[{"value":true,"name":"是"},{"value":false,"name":"否"}]}}]}')},"K+Sp":function(e,t){e.exports='<div class="btn-change-tab icon-hcm-arrow-left"\n     ng-if="$ctrl.stepChange && $ctrl._client === \'pc\'"\n     ng-click="$ctrl.previousTab($event)"\n     ng-class="{\'disabled\': $ctrl.checkBorder(\'left\')}">\n</div>\n<nav class="radio-border">\n    <div id="container" ng-if="$ctrl._client === \'mobile\'" ng-class="$ctrl._panes_overflow ? \'panes-overflow\' : \'\'">\n        <div class="scroll-content" ng-transclude></div>\n    </div>\n    <div id="container" ng-if="$ctrl._client === \'pc\'" ng-class="$ctrl._panes_overflow ? \'panes-overflow\' : \'\'"  ng-transclude>\n    </div>\n</nav>\n<div class="btn-change-tab icon-hcm-arrow-right"\n     ng-if="$ctrl.stepChange && $ctrl._client ===\'pc\'"\n     ng-click="$ctrl.nextTab($event)"\n     ng-class="{\'disabled\': $ctrl.checkBorder(\'right\')}">\n</div>\n\n<div ng-if="$ctrl._panes_overflow && $ctrl._client !== \'pc\'"\n     class="show-all-tab icon-hcm-menu"\n     ng-click="$ctrl.showAllTabs()">\n</div>\n<button class="show-more"\n        ng-if="$ctrl._panes_overflow && $ctrl._client == \'pc\' && !$ctrl.stepChange"\n        ng-click="$ctrl.showDropdownListDialog($event)">\n    <label>更多</label><span class="icon-hcm-arrow-down-solid"></span>\n</button>\n'},K6BF:function(e,t,n){"use strict";n.r(t);n("oVuX"),n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("TWNs"),n("rB9j"),n("JfAA"),n("Rm1S");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("RXMP"),d=n.n(s),u=n("fHi0"),_=n.n(u),p=n("OWCx"),m=n.n(p),f=n("+oHS"),h=n.n(f),g=n("5PDf"),v=n.n(g),b=n("MAKL"),y=n.n(b),w=n("WxoT"),x=n.n(w),k=n("a0dU"),$=n.n(k),O=n("6UaR"),D=n.n(O),C=(n("ls82"),n("SPx3")),M=n.n(C),S=n("04Ix"),E=n.n(S),P=n("55Hk"),j=n.n(P);n("oh3S");window.app.service("HCMImportService",["dataService",function(e){return{impSetIntoRedis:function(t){return e.callHcmOpenApi("imp.set.into.redis?category="+t,{category:t})},getImpInfo:function(t){return e.callHcmOpenWebSocket("imp.get.info",{category:t},t)},getCheckStatus:function(t){return e.callHcmOpenApi("imp.check.status?category="+t,{category:t})},fetchImpResult:function(t,n){return e.callHcmOpenApi("fetch.imp.result?category="+n,{time_stamp:t,category:n})},getSubListResult:function(t,n){return e.callHcmOpenApi("imp.get.sub.result",{category:t,timestamp:n},null,!0)}}}]);var T=n("1hbj"),A=n("8Auy"),I=n("wd/R"),L=n.n(I),F=n("xAfy");function R(e,t){var n=h()(e);if(m.a){var i=m()(e);t&&(i=v()(i).call(i,(function(t){return _()(e,t).enumerable}))),n.push.apply(n,i)}return n}window.app.controller("HCMImportCtrl",["$scope","$state","$rootScope","$hcDialog","HCMImportService","Upload","$q","$timeout","contextService","$filter","dataService","weChatService","BaseCRUDService","$commonAction",function(e,t,n,i,a,r,s,u,p,m,f,h,g,b){var w=b.createCommonAction(e);e.init=function(){var n,i,o;e.initConst(),e.auth=p.getContext("auth"),e.is_important_map=null!==(n=null===(i=e.auth)||void 0===i||null===(o=i.company_setting)||void 0===o?void 0:o.IS_IMPORTANT_MAP)&&void 0!==n&&n,e.isPage="hcm_import"===t.current.name,e.isPage?e.initPage():e.initDialog()},e.initConst=function(){e.import_message=[],e.import_result={},e.file={},e.file_type=["zip","xlsx","xls","dbf","pdf"],e.file_size="15MB",e.specific_size=20971520,e.time_stamp="",e.is_from_message=!1},e.initPage=function(){e.time_stamp=t.params.time_stamp,e.category=t.params.category,e.task_category=t.params.state?t.params.category+"_"+t.params.state:t.params.category,e.import_status="imported",e.is_from_message=!0,e.fetchImpResult()},e.getExprContext=function(){return function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)d()(n=R(Object(i),!0)).call(n,(function(t){E()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;d()(a=R(Object(i))).call(a,(function(t){o()(e,t,_()(i,t))}))}}return e}({ENV:function(){return e.getEnvironmentParams()},AUTH:function(){return e.auth}},e.getAlterExprContext())},e.getAlterExprContext=function(){return{}},e.getEnvironmentParams=function(){return angular.extend({},t.params,{hcm_wengen:window.hcm_wengen,hcm_env_post:window.hcm_env_post,hcm_env_pre:window.hcm_env_pre},e.customEnvironmentParams||{})},e.customEnvironmentParams={},e.parseAction=function(){var t=M()($.a.mark((function t(n){var i,o,a,l,r,c=arguments;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>1&&void 0!==c[1]?c[1]:{},t.next=3,w.canEnterAction(n,i,e.getExprContext());case 3:if(t.sent){t.next=6;break}return console.log("cannot enter"),t.abrupt("return");case 6:return t.next=9,w.validateAction(n,i,e.getExprContext());case 9:if(!D()(n.action)){t.next=14;break}return n.key&&(i["".concat(n.key,"_action")]=n),t.next=13,w.actionChain(n.action,i,{},(function(t,n,i){return e.parseAction(t,i)}));case 13:return t.abrupt("return",t.sent);case 14:if(!w.isCommonAction(n)){t.next=16;break}return t.abrupt("return",w.execCommonAction(n,i,e.getExprContext()));case 16:t.t0=n.action,t.next="REFERSH"===t.t0?19:"IMPORT_FILE"===t.t0?23:"IMPORT_MAP"===t.t0?29:"PARSE_EXCEL"===t.t0?33:37;break;case 19:return t.next=21,w.exprParse(n.options,i,e.getExprContext());case 21:return o=t.sent,t.abrupt("return",e.board_model.refreshComponent(o.key));case 23:return t.next=25,w.exprParse(n.options,i,e.getExprContext());case 25:return(null==(a=t.sent)?void 0:a.filter_org)&&(e.import_params.filter_org=a.filter_org,delete a.filter_org),angular.extend(e.import_params.extend_property,a),t.abrupt("return",e.importFile());case 29:return t.next=31,w.exprParse(n.options,i,e.getExprContext());case 31:return l=t.sent,t.abrupt("return",e.importMapSettingV2(l));case 33:return t.next=35,w.exprParse(n.options,i,e.getExprContext());case 35:return r=t.sent,t.abrupt("return",e.parseExcelAction(r));case 37:if(!n.func){t.next=47;break}if(!Object(F.h)(n.func)){t.next=44;break}return t.next=41,n.func(i);case 41:return t.abrupt("return",t.sent);case 44:return t.abrupt("return",n.func(i));case 45:t.next=48;break;case 47:return t.abrupt("return",!1);case 48:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initDialog=M()($.a.mark((function t(){var n,i,o,a,l,r,c,s,d,u,_,p,m,f,h,v,b,y,w,x,k,O,D,C,M,S,E,P,j,T,A,I;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.import_params=e.params.params,e.show_imp_tip=!0,e.show_choose_method=!0,e.show_empty_selector=!0,e.show_key=!0,e.show_import_message=!0,e.show_imp_result=!0,e.show_imp_msg=!0,e.show_download_template=!0,e.upload_tip_line_1="",e.upload_tip_line_2="",!1===(null===(n=e.import_params)||void 0===n||null===(i=n.components_hide_config)||void 0===i?void 0:i.show_imp_tip)&&(e.show_imp_tip=!1),!1===(null===(o=e.import_params)||void 0===o||null===(a=o.components_hide_config)||void 0===a?void 0:a.show_choose_method)&&(e.show_choose_method=!1),!1===(null===(l=e.import_params)||void 0===l||null===(r=l.components_hide_config)||void 0===r?void 0:r.show_empty_selector)&&(e.show_empty_selector=!1),!1===(null===(c=e.import_params)||void 0===c||null===(s=c.components_hide_config)||void 0===s?void 0:s.show_key)&&(e.show_key=!1),!1===(null===(d=e.import_params)||void 0===d||null===(u=d.components_hide_config)||void 0===u?void 0:u.show_import_message)&&(e.show_import_message=!1),!1===(null===(_=e.import_params)||void 0===_||null===(p=_.components_hide_config)||void 0===p?void 0:p.show_imp_result)&&(e.show_imp_result=!1),!1===(null===(m=e.import_params)||void 0===m||null===(f=m.components_hide_config)||void 0===f?void 0:f.show_imp_msg)&&(e.show_imp_msg=!1),!1===(null===(h=e.import_params)||void 0===h||null===(v=h.components_hide_config)||void 0===v?void 0:v.show_download_template)&&(e.show_download_template=!1),(null===(b=e.import_params)||void 0===b||null===(y=b.components_hide_config)||void 0===y?void 0:y.upload_tip_line_2)&&(e.upload_tip_line_2=e.import_params.components_hide_config.upload_tip_line_2),(null===(w=e.import_params)||void 0===w||null===(x=w.components_hide_config)||void 0===x?void 0:x.upload_tip_line_1)&&(e.upload_tip_line_1=e.import_params.components_hide_config.upload_tip_line_1),!1===(null===(k=e.import_params)||void 0===k||null===(O=k.components_hide_config)||void 0===O?void 0:O.show_import_map)&&(e.show_import_map=!1),!0===(null===(D=e.import_params)||void 0===D||null===(C=D.components_hide_config)||void 0===C?void 0:C.show_import_map)&&(e.show_import_map=!0),e.emp_state=e.import_params.state,e.emp_category=e.import_params.emp_category,e.emp_role="cm-org-emp.emp",e.emp_template=e.import_params.template,e.category="emp"===e.import_params.imp_type?e.emp_category:e.params.category,e.category_name=e.params.category_name,"emp"===e.import_params.imp_type?e.task_category=e.emp_category:(e.task_category=e.import_params&&e.import_params.extend_property.extra_property&&e.import_params.extend_property.extra_property.state?e.category+"_"+e.import_params.extend_property.extra_property.state:e.category,e.task_category=encodeURIComponent(e.task_category)),e.is_sublist=(null===(M=e.import_params)||void 0===M?void 0:M.is_sublist)||"SUB_IMPORT"===(null===(S=e.import_params)||void 0===S?void 0:S.imp_type),e.file_status="un_select",e.upload_status="un_upload",e.import_status="un_import",e.tips="MULTI_IMPORT"===e.import_params.imp_type||"emp"===e.import_params.imp_type?"multi_hcm_import_dialog_tip_second_line":"common_hcm_import_dialog_tip_second_line",e.default_tips=['1、导入模式: "有则编辑，无则新增"表示针对一条导入数据，若系统中存在与导入数据业务主键相同的数据，则编辑该条数据，否则新增数据;',"2、导入依据即为编辑导入时的定位数据依据;","3、建议每次导入间隔2分钟。"],e.imp_tips=(null===(E=e.import_params)||void 0===E||null===(P=E.imp_tips)||void 0===P?void 0:P.length)>0?null===(j=e.import_params)||void 0===j?void 0:j.imp_tips:e.default_tips,e.keyOptions={readOnly:!0,width:"col-12"},e.show_business_key=null===e.import_params.show_business_key||void 0===e.import_params.show_business_key||e.import_params.show_business_key,e.show_business_key?null===e.import_params.show_keys||void 0===e.import_params.show_keys?e.get_business_key(e.category,e.import_params):e.business_key_list=e.import_params.show_keys:e.business_key_list="当前配置不展示业务主键",e.default_method=e.import_params.impMethod,e.choose_method=null===e.import_params.choose_method||void 0===e.import_params.choose_method||e.import_params.choose_method,e.autoOptions={list:[{name:"有则编辑，无则新增",value:2},{name:"仅新增",value:0},{name:"仅编辑",value:1}],default:e.default_method,items_inline:!0,singleLine:!1},e.empty_tip="文件中为空的单元格是否覆盖原数据",e.empty_selector=null!==e.import_params.empty_selector&&void 0!==e.import_params.empty_selector&&e.import_params.empty_selector,e.default_empty=e.import_params.empty_mode,e.empty_des_list=0===(null===(T=e.import_params.empty_des_list)||void 0===T?void 0:T.length)?[{name:"跳过",value:1},{name:"覆盖",value:0}]:e.import_params.empty_des_list,e.emptyOptions={list:e.empty_des_list,default:e.default_empty,items_inline:!0,singleLine:!1},I=g.getModelService("ImpActionVirtual"),t.next=51,I.getBizMeta("list",(null===(A=e.import_params)||void 0===A?void 0:A.action_state)||"");case 51:e._meta=t.sent,e.initOperate();case 53:case"end":return t.stop()}}),t)}))),e.get_business_key=function(t,n){return f.callHcmOpenApi("imp.get.business.key",{category:t,params:n}).then((function(t){e.business_key_list=null==t?void 0:t.business_keys}))},e.download=function(e){if(n.show_waiting(),h.isWeChat()||h.isDing()||h.is_Em_cloud())return console.log("is we chat download begin: ".concat(e)),h.downloadShortUrl(e);var t=document.createElement("a");t.href=e,t.click(),u(n.hide_waiting,500)},e.checkFileValidity=function(t){var i;return!(i=(t.name.match(/\.(\w+)$/)||[])[1],!new RegExp(e.file_type.join("|"),"ig").test(i)&&(console.log("不支持"+i+"文件格式的上传"),n.show_warning(m("translate")("common_hcm_import_dialog_not_support")+" "+i+" "+m("translate")("common_hcm_import_dialog_file_type"),5e3),1)||!(e.specific_size>t.size)&&(console.log(t.name+"文件大小超过"+e.file_size),n.show_warning(t.name+m("translate")("common_hcm_import_dialog_file_size_limit")+" "+e.file_size),1))},e.downloadTemplate=function(t){null==t||t.stopPropagation(),n.show_warning(m("translate")("common_hcm_import_download_template_warn"));var i,o=e.import_params.extend_property.extra_property;o.filter_params&&delete o.filter_params,i="MULTI_IMPORT"===e.import_params.imp_type?window.hcm_wengen+"/document/imp/base_download_template?category="+encodeURIComponent(e.category)+"&imp_type="+x()(e.import_params.imp_type)+"&childs="+x()(e.import_params.childs)+"&key_list="+x()(e.import_params.business_key_list)+"&extend_property="+x()(e.import_params.extend_property)+"&is_from_config="+e.import_params.is_from_config:"emp"===e.import_params.imp_type?window.hcm_wengen+"/document/imp/dynamic_batch_download_template_zip?category="+e.emp_category+"&template="+e.emp_template+"&state="+x()(e.emp_state):window.hcm_wengen+"/document/imp/dynamic_download_template?category="+encodeURIComponent(e.category)+"&is_from_config="+e.import_params.is_from_config+"&extra_property="+x()(o)+"&file_name="+e.import_params.file_name+"&filter_dict="+x()(e.import_params.extend_property.filter_dict)+"&extend_property="+encodeURIComponent(x()(e.import_params.extend_property))+window.hcm_env_post,e.download(i)},e.downloadReport=function(){a.getCheckStatus(e.category).then((function(t){if(t.running)n.show_warning(m("translate")("common_hcm_import_dialog_importing"));else if(t.download||e.is_from_message){var i,o,a,l,r,c,s,d,u=e.category?"&category="+e.category:"";(null===(i=e.params)||void 0===i||null===(o=i.params)||void 0===o?void 0:o.imp_type)&&"MULTI_IMPORT"===(null===(a=e.params)||void 0===a||null===(l=a.params)||void 0===l?void 0:l.imp_type)?e.download(window.hcm_wengen+"/document/exp/multi_excel?file_name="+encodeURIComponent(e.time_stamp)+"_result_download.zip&name=校验报告.zip"+u+window.hcm_env_post):(null===(r=e.params)||void 0===r||null===(c=r.params)||void 0===c?void 0:c.imp_type)&&"emp"===(null===(s=e.params)||void 0===s||null===(d=s.params)||void 0===d?void 0:d.imp_type)?e.download(window.hcm_wengen+"/document/imp/download?category="+e.emp_category+window.hcm_env_post):e.download(window.hcm_wengen+"/document/exp/common_excel?file_name="+encodeURIComponent(e.time_stamp)+".xlsx&name=校验报告.xlsx"+u+window.hcm_env_post)}else n.show_warning(m("translate")("common_hcm_import_dialog_please_import"))}))},e.selectFile=function(t){t&&e.checkFileValidity(t)&&(e.file=t,e.file_status="selected",e.map_label_list=null)},e.uploadFile=function(t){var i=s.defer();return e.file?(console.log("File name:"+e.file.name),t.file=e.file,e.upload_status="uploading",r.upload(t).then((function(t){u((function(){e.upload_status="uploaded"}),500),i.resolve(t)}),(function(t){u((function(){e.upload_status="upload_failed"}),500),i.resolve(t)}),(function(t){e.import_message=[],e.file_progress=Math.min(100,Math.floor(100*t.loaded/t.total))}))):n.show_warning(m("translate")("common_hcm_import_dialog_import_file_first")),i.promise},e.importFile=function(){"importing"!==e.import_status?(u((function(){e.import_status="importing"}),2e3),e.import_message.push(m("translate")("common_hcm_import_dialog_start_button")),a.getCheckStatus(e.task_category).then((function(t){if(t.running)n.show_warning("任务后台执行中"),e.showImportMessage();else if(e.is_sublist){e.time_stamp=(new Date).getTime(),e.import_params.timestamp=e.time_stamp;var i={url:"/document/imp/dynamic_table_upload_mediate"+window.hcm_env_pre,data:{category:e.category,params:x()(e.import_params)}};e.uploadFile(i).then((function(t){e.showImportMessage()}))}else if("emp"===e.import_params.imp_type){var o=angular.extend({category:e.emp_category},e.import_params||{}),a=e.import_params.filter_org||e.import_params.dept_id,l={empty_mode:e.import_params.empty_mode};a&&(l.filter_org=a),o.params=x()(angular.extend(e.import_params.params||{},l));var r=angular.extend({role:e.emp_role,state:e.emp_state,config:e.emp_template},e.import_params.extend_property||{});o.extend_property=x()(r);var c={url:window.hcm_wengen+"/document/imp/dynamic_upload"+window.hcm_env_pre,params:o};e.uploadFile(c).then((function(t){e.time_stamp=t.data.result,e.import_params.callback&&e.import_params.callback(t),e.showImportMessage()}))}else{var s=e.import_params.extend_property.extra_property;s.filter_params&&(delete s.filter_params,e.import_params.extend_property.extra_property=s);var d=window.hcm_wengen+"/document/imp/dynamic_common_upload"+window.hcm_env_pre;"MULTI_IMPORT"===e.import_params.imp_type&&(d=window.hcm_wengen+"/document/imp/dynamic_multi_upload"+window.hcm_env_pre);var u={url:d,params:{category:e.category,params:x()(e.import_params)}};e.uploadFile(u).then((function(t){e.time_stamp=t.data.result,e.import_params.callback&&e.import_params.callback(t),e.showImportMessage()}))}}))):n.show_warning(m("translate")("common_hcm_import_dialog_multi_import"))},e.importMapSetting=M()($.a.mark((function t(){var n,o,a,l;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.map_label_list){t.next=7;break}return n=JSON.parse(x()(e.import_params)),e.is_sublist&&(null==n||(null===(o=n.extend_property)||void 0===o||delete o.list_data)),(a={url:window.hcm_wengen+"/document/common/parse_excel_head"+window.hcm_env_pre,params:{category:e.category,params:x()(n)}}).file=e.file,t.next=7,r.upload(a).then((function(t){e.map_data=t.data.map_rule,e.map_label_list=t.data.map_label_list,e.targets=t.data.targets,e.scheme_id=t.data.scheme_id,e.scheme_name=t.data.scheme_name,e.default_data=t.data.default_data,e.parse_time_stamp=t.data.parse_time_stamp}));case 7:if(l=e.map_data||{},e.time_str=e.time_str?e.time_str:y()(),"MULTI_IMPORT"!==e.import_params.imp_type){t.next=15;break}return t.next=12,w.execCommonAction({key:"select_multi_map",action:"COMMON_LIST_DIALOG",options:{model:"ImpMapVirtualModel",component:"hc-category-list-selector",state:"multi_setting",alter:{data:l.map_rule,targets:e.targets,time_str:e.time_str,category:e.category,map_label_list:e.map_label_list},filter_dict:{data:e.default_data,parse_data:l.map_rule,time_str:e.time_str,use_temp:l.use_temp,model_name:e.category,scheme_id:e.scheme_id,select_scheme:e.scheme_id,scheme_name:e.scheme_name,map_label_list:e.map_label_list,parse_time_stamp:e.parse_time_stamp,action_key:e.import_params.action_key,model_state:e.import_params.extend_property.extra_property.state},category_field:"category",category_filter_dict:{data:l},size:"super-max",selectorType:0,title:"主子集字段匹配"}});case 12:e.map_result=t.sent,t.next=18;break;case 15:return t.next=17,i.getDialog(Object(T.a)("ImpMapVirtualModel","setting")).size("large").show({data:l,alter:{time_str:e.time_str,map_label_list:e.map_label_list}});case 17:e.map_result=t.sent;case 18:e.map_data=e.map_result,e.scheme_id=e.map_result.scheme_id,e.scheme_name=e.map_result.scheme_name,e.import_params.map_data_key=e.map_data.important_redis_key;case 22:case"end":return t.stop()}}),t)}))),e.parseExcelAction=function(){var t=M()($.a.mark((function t(n){var i,o,a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.parse(x()(e.import_params)),e.is_sublist&&(null==i||(null===(o=i.extend_property)||void 0===o||delete o.list_data)),(a={url:window.hcm_wengen+"/document/common/parse_excel_head"+window.hcm_env_pre,params:{category:e.category,params:x()(i)}}).file=e.file,t.next=6,r.upload(a).then((function(e){return e}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.importMapSettingV2=function(){var t=M()($.a.mark((function t(n){var o,a;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.map_label_list){t.next=5;break}return(o={url:window.hcm_wengen+"/document/common/parse_excel_head"+window.hcm_env_pre,params:{category:e.category,params:x()(e.import_params)}}).file=e.file,t.next=5,r.upload(o).then((function(t){e.map_data=t.data.map_rule,e.map_label_list=t.data.map_label_list,e.targets=t.data.targets}));case 5:return a=e.map_data||{},e.time_str=e.time_str?e.time_str:y()(),t.next=9,i.getDialog(Object(T.a)("ImpMapVirtualModel",null==n?void 0:n.meta_state)).size("large").show({data:a,alter:{time_str:e.time_str,map_label_list:e.map_label_list}});case 9:e.map_result=t.sent,e.map_data=e.map_result,e.import_params.map_data_key=e.map_data.important_redis_key;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.set_message_bottom=function(){var e=document.getElementsByClassName("hc-dialog-content");e[0].scrollTop=e[0].scrollHeight},e.getSubListResult=function(){a.getSubListResult(e.category,e.time_stamp).then((function(t){e.import_params.callback&&e.import_params.callback(null==t?void 0:t.data)}))},e.showImportMessage=function(){n.show_warning(m("translate")("common_hcm_import_dialog_processing"),null,3e3),n.show_waiting(),a.getImpInfo(e.task_category).then((function(t){e.import_message.push(t),e.set_message_bottom(),u((function(){e.import_status="imported","emp"!==e.import_params.imp_type&&e.fetchImpResult(),"SUB_IMPORT"===e.import_params.imp_type&&e.getSubListResult(),n.hide_waiting()}),2e3)}),(function(t){e.import_message.push(t),e.set_message_bottom(),u((function(){e.import_status="imported",n.hide_waiting()}),2e3)}),(function(t){e.import_message.push(t),e.set_message_bottom()}))},e.fetchImpResult=function(){a.fetchImpResult(e.time_stamp,e.task_category).then((function(t){e.import_result="string"==typeof t?JSON.parse(t):t,"SUB_IMPORT"!==e.import_params.imp_type&&e.params.callback&&e.params.callback()}))},e.initOperate=function(){var i;e.$dialog.close=function(){"importing"===e.import_status?a.impSetIntoRedis(e.task_category).then((function(t){"emp"!==e.import_params.imp_type&&n.show_warning(m("translate")("common_hcm_import_dialog_background_execute"))})).finally((function(){e.$dialog.check_close()})):e.$dialog.check_close()};var o={angular:angular,SCOPE:e,STATE:t,location:window.location,history:window.history,document:document,$filter:m,MOMENT:L.a,dataService:f,contextService:p,WINDOW:window};e.btn_meta=A.a.jsonEval(v()(i=e._meta.actions).call(i,(function(e){return"setup"!==e.key})),o),e.$dialog.operates(e.btn_meta,e.parseAction)}}]);t.default={controller:"HCMImportCtrl",template:j.a}},KNvP:function(e,t){e.exports='<div class="portal analyse-state" data-ng-init="init()">\n\n    <div class="no-theme" data-ng-if="!theme.id" data-ng-click="switchTheme()">\n        <div class="image">\n            <hc-svg options="{icon:\'hcm-no-content\'}"></hc-svg>\n        </div>\n        <div class="tip">当前无分析方案</div>\n        <div class="handle"><span class="icon icon-hcm-add-circle-solid"></span>新建分析方案\n        </div>\n    </div>\n\n\n    <div class="theme" data-ng-if="theme.id">\n        <div class="header">\n            <div class="theme-title" ng-click="switchTheme()">当前主题：{{theme.name}}\n                <span class="icon icon-hcm-arrow-right"></span></div>\n            <div class="btn-operate">\n                <div data-ng-repeat="item in operate" ng-class="item.icon" data-ng-click="item.click()" data-ng-if="!item.hide"></div>\n            </div>\n        </div>\n\n        <div class="no-plugins" data-ng-if="plugins.length===0" data-ng-click="add_plugin()">\n            <div class="image"><span class="icon icon-hcm-toolbox"></span></div>\n            <div class="handle">快速新建分析图表</div>\n            <div class="tip">-  当前无主题  -</div>\n        </div>\n\n        <div class="plugins" data-ng-class="{\'sort\':sortable_config.sort}" data-ng-sortable="sortable_config">\n            <div class="plugin" data-ng-repeat="plugin in plugins">\n                <home-widget-dashboard model="plugin"></home-widget-dashboard>\n                <div class="drag-mask" data-ng-if="sortable_config.sort">\n                    <div class="personal-operate">\n                        <span class="icon icon-hcm-edit" title="修改" ng-click="edit_plugin(plugin,$index)"></span>\n                        <span class="icon icon-hcm-trash" title="删除" data-ng-click="delete_plugin(plugin)"></span>\n                    </div>\n                    <div class="tip">拖拽进行移动</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <div class="layout_confirm" data-ng-if="sortable_config.sort">\n        <div class="operate-content">\n            <div class="btn-pc secondary" data-ng-click="cancel_adjust_layout()">取消</div>\n            <div class="btn-pc primary" data-ng-click="save_adjust_layout()">保存布局</div>\n        </div>\n        <div class="tip-content">\n            <div class="primary">\n                请拖拽卡片调整卡片的布局，再点击保存布局即可生效\n            </div>\n            <div class="secondary">\n                备注：取消 - 不保存当前布局直接退出\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},"KaK+":function(e,t){e.exports='<div class="grid-setting-content" ng-if="viewSwitch.current.key===\'grid\'"\n     ng-click="showRowConfig($event)">\n    <span class="icon icon-hcm-more-point-y"></span>\n</div>\n<div class="change-list-view"\n     data-ng-if="((list_model.view_list_config|objectKey).length>1)||model_meta.analyse.open"\n     data-ng-mouseenter="view_active=true">\n    <div class="view-menu" data-ng-class="{active:view_active}">\n        <div class="icon {{viewSwitch.current[\'icon\']}}"></div>\n    </div>\n    <div class="view-list-content" data-ng-mouseleave="view_active=false">\n        <div class="view-list" data-ng-click="view_active=false">\n            <div data-ng-repeat="item in viewSwitch.list|objectKey"\n                 class="icon {{viewSwitch.list[item].icon}} {{viewSwitch.list[item].icon===viewSwitch.current[\'icon\']?\'selected\':\'no-selected\'}}"\n                 data-ng-click="viewSwitch.click(item);"\n            ></div>\n        </div>\n    </div>\n</div>\n\n'},KiNy:function(e,t){e.exports='<div class="protocol-dialog" ng-init="init()">\n    <div class="content" id="protocol_content">\n        <div ng-include="hcm_wengen + \'/api/template/load_template?key=common_agreement.html\'"></div>\n    </div>\n</div>'},"Kn/3":function(e,t){e.exports='<div class="hcm-multi-view" ng-if="$ctrl._multi_view_list">\n    <div class="hcm-multi-view-top" ng-if="$ctrl.config.position===\'top\'">\n            <span class="icon-hcm-arrow-left-double icon left"\n                  ng-class="{\'able\':$ctrl.canScrollLeft(),\'disabled\':!$ctrl.canScrollLeft()}"\n                  ng-click="$ctrl.scrollLeft()"></span>\n        <div class="content">\n            <div ng-repeat="v in $ctrl._multi_view_list track by $index" class="detail" ng-click="$ctrl.changeView(v)">\n                <div class="view" ng-class="{\'current-item\':v.id ==$ctrl._current_id}">\n                    \x3c!--<img class="photo"--\x3e\n                         \x3c!--ng-src="{{v.photo|hcPhoto:20}}"--\x3e\n                         \x3c!--alt="" ng-if="v.photo">--\x3e\n                    <div class="name" hc-title="{{v.tips}}"> {{v.name}}</div>\n                </div>\n                <div class="separate"></div>\n            </div>\n        </div>\n        <span class="icon-hcm-arrow-right-double icon right" ng-click="$ctrl.scrollRight()"\n              ng-class="{\'able\':$ctrl.canScrollRight(),\'disabled\':!$ctrl.canScrollRight()}"\n        ></span>\n    </div>\n    <div class="hcm-multi-view-left" ng-if="$ctrl.config.position===\'left\'">\n        <div ng-repeat="v in $ctrl._multi_view_list track by $index" class="detail" ng-click="$ctrl.changeView(v)">\n            <div class="view" ng-class="{\'current-item\':v.id ==$ctrl._current_id}">\n                <div class="item-name"> {{v.name}}</div>\n                <div class="item-details">\n                    <span class="value" ng-repeat="_col in $ctrl.config.details_list" ng-bind="v|hcListCellData:_col|infoDefault"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},"L+3z":function(e,t){e.exports='<div class="model-dialog-style" ng-init="init()">\n    <hc-view model="view_model"></hc-view>\n</div>\n'},L1YK:function(e,t){e.exports='<div class="hcm-mini-meta-vis" ng-init="$ctrl.$onInit()">\n    <div class="search-area">\n        <input type="search"\n               data-ng-model="$ctrl.search_model.keyword"\n               placeholder="输入关键字搜索"\n               data-ng-keypress="$ctrl.search_key_press($event)">\n        <span data-ng-click="$ctrl.search_click()" class="search-icon icon-hcm-check"></span>\n    </div>\n    <div class="meta-item-container" data-ng-sortable="$ctrl.sortable_model">\n        <div class="meta-item" ng-repeat="_item in $ctrl.data track by $index" ng-init="outerIndex = $index">\n            <div class="icon icon-hcm-type-text"></div>\n            <div class="name">{{_item.label}}</div>\n\n            <div ng-repeat="_op in $ctrl.item_operate"\n                 class="operate {{_op.icon}}"\n                 hc-title="{{_op.title}}"\n                 ng-class="{\'fixed\':_op.is_fix&&_op.is_fix(_item)}"\n                 ng-click="_op.func(_item,outerIndex)"\n                 ng-hide="(_op.hide|valueToFunc)(_item)"\n            ></div>\n\n        </div>\n    </div>\n</div>\n'},LCda:function(e,t){e.exports='<div class="hcm-grid hc-config-list" ng-if="!model.view || model.view === \'simple_list\'" ng-init="init()">\n    <div class="config-list-scroll-container">\n        <div class="flex-content">\n            <div class="hcm-grid-header">\n                <div ng-class="\'hcm-grid-cell-60\'" class="header-cell-hover" ng-if="model.show_index"\n                     col-key="index"> \x3c!--顺序--\x3e\n                    {{\'common_config_list_header_order\'|translate}}\n                    <hc-resizer class="resize"\n                                resize-min="40"\n                                move-callback="onResizeMove"></hc-resizer>\n                </div>\n                <div ng-class="\'hcm-grid-cell-\'+parseWidth(v.width)" class="header-cell-hover"\n                     ng-repeat="v in model.columns track by $index" col-key="{{$index}}"\n                     ng-hide="(v.hide|valueToFunc)()">\n                        <span ng-class="{\'gray icon-hcm-none-rectangle-radius\':!grid_meta_object[v.key].select_all,\n                        \'blue icon-hcm-click-rectangle-radius\':grid_meta_object[v.key].select_all}"\n                              ng-click="select_all(v)" ng-if="v.type===\'boolean\'">\n                            </span>\n                    {{v.label}}\n                    <hc-resizer class="resize"\n                                resize-min="40"\n                                move-callback="onResizeMove"\n                                end-callback="modifyContentWidth"\n                    ></hc-resizer>\n                </div>\n            </div>\n            <div class="hcm-grid-content"\n                 ng-style="{\'max-height\': model.max_row ? model.max_row*46 + \'px\' : unset}"\n                 ng-sortable="sortable_config">\n                <div class="hcm-grid-row"\n                     ng-repeat="_row in model.data track by $index"\n                     row-key="{{$index}}"\n                     ng-mouseenter="mouseEnter($index)"\n                     ng-mouseleave="mouseLeave($index)">\n                    <div class="hcm-grid-cell-60" ng-if="model.show_index" col-key="index">{{$index + 1}}</div>\n                    <div ng-class="\'hcm-grid-cell-\'+parseWidth(_col.width)"\n                         ng-repeat="_col in model.columns track by _col.key"\n                         ng-click="model.operate_default(_row, $event, model.data)"\n                         col-key="{{$index}}" ng-hide="(_col.hide|valueToFunc)()">\n                            <span ng-class="{\'gray icon-hcm-none-rectangle-radius\':!isSelected(v,field),\n                            \'blue icon-hcm-click-rectangle-radius\':isSelected(v,field)}"\n                                  ng-if="_col.type===\'boolean\'">\n                            </span>\n                        <span ng-bind-html="_row|hcListCellData:_col|toTrusted"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="fix-right-content"\n             ng-if="model.operate_row||model.operates"\n             ng-class="{\'fix-style\':changeStyle()}">\n            <div class="hcm-grid-header">\n                <div ng-class="\'hcm-grid-cell-\'+model.operate_width" class="header-cell-hover"\n                     ng-if="model.operate_row||model.operates" col-key="operates"> \x3c!--操作--\x3e\n                    {{\'common_config_list_header_operation\'|translate}}\n                </div>\n            </div>\n            <div class="hcm-grid-content"\n                 ng-style="{\'max-height\': model.max_row ? model.max_row*46 + \'px\' : unset}">\n                <div class="hcm-grid-row"\n                     ng-repeat="_row in model.data track by $index"\n                     row-key="{{$index}}"\n                     ng-mouseenter="mouseEnter($index)"\n                     ng-mouseleave="mouseLeave($index)">\n                    <div class="operate center" ng-class="\'hcm-grid-cell-\'+model.operate_width" col-key="operates">\n                            <span ng-click="execute_func(_o,_row,$event,model.data)"\n                                  ng-repeat="_o in (model.operate_row||model.operates)"\n                                  ng-hide="(_o.hidden|valueToFunc)(_row)"\n                                  ng-class="{\'disabled\':(_o.disabled|valueToFunc)(_row), \'sys-color\':(_o.able|valueToFunc)(_row)}"\n                                  hc-title="{{_o.desc}}"\n                                  options="{mode: \'tip\', seconds: 0}"\n                                  class="{{_o.icon}}">\n                                <span ng-if="!_o.icon">{{_o.label}}</span>\n                            </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},LCjq:function(e,t){e.exports='<div class=\'hc-dialog-mask\' ng-class="{\'pc-dialog-mask\': $ctrl.model.scope.params.options.client==\'pc\'}" ng-click="$ctrl.model.scope.close()"></div>\n<div class=\'hc-dialog-window-time-line\'\n     ng-style="{width:$ctrl.model.scope.params.options&&$ctrl.model.scope.params.options.client==\'pc\'?\'25%\':\'70%\'}">\n    <header ng-if="$ctrl.model.options.title">\n        <div class="icon icon-hcm-delete zsb-dialog-delete"\n             ng-click="$ctrl.model.close?$ctrl.model.close():$ctrl.model.check_close()"></div>\n        <div class="main">\n            {{$ctrl.model.options.title}}\n            <span class="tip icon icon-hcm-question"\n                  ng-if="$ctrl.model.options.tip"\n                  hc-title="{{$ctrl.model.options.tip}}"\n                  options="$ctrl.model.options">\n            </span>\n        </div>\n    </header>\n    <div class=\'hc-dialog-content-time-line\'>\n        <div class="content-display {{$ctrl.model.scope.params.options.style}}" ng-if="$ctrl.model.scope.params.list">\n            <div ng-repeat="state in $ctrl.model.scope.params.list track by $index">\n                <div class="score-info"\n                     ng-class="{\'color-bold\': state.get_score,\n                                \'color-gray\': !state.get_score}">\n                    <div class="text-left" ng-if="state.score">{{ \'+\' + state.score}}</div>\n                    <div class="icon"\n                         ng-class="{\'color-green\': state.get_score}">\n                        <span class="icon-hcm-tick-circle-solid score-icon"></span></div>\n                    <div class="text-right">{{state.label || state.name}}</div>\n                </div>\n                <div class="line" ng-if="$index != $ctrl.model.scope.params.list.length - 1"></div>\n            </div>\n        </div>\n        <div class="hc-dialog-operates"\n             ng-if="$ctrl.model.scope.params.options.operates && $ctrl.model.scope.params.options.operates.length"\n             ng-repeat="item_ in $ctrl.model.scope.params.options.operates">\n            <div ng-click="item_.func()">{{item_.label}}</div>\n        </div>\n    </div>\n</div>\n'},"M/kX":function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var i=n("OBge"),o=n.n(i),a=n("mrSG"),l=n("nc/B"),r=n("UmGy"),c=n("55+V"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.getInfoDialog=function(){return l.a},t.prototype.getItemByNode=function(e){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){return[2,this.metaVisService.getVisItemByNode(e,"aggr")]}))}))},t}(c.c),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.meta_type="aggr",t}return Object(a.d)(t,e),t.prototype.getInfoDialog=function(){return this.parent&&"aggr"===this.parent.current_domain.dataKey?r.a:l.a},t.prototype.getInfoOptions=function(){var e,t,n;return{data:null===(n=null===(t=null===(e=this.scope)||void 0===e?void 0:e.$ctrl)||void 0===t?void 0:t.parent)||void 0===n?void 0:n.data}},t}(c.b),u=n("rLmf"),_=n.n(u),p=n("L1YK"),m={controller:d,template:n.n(p).a};t.a={controller:s,template:_.a}},MZCV:function(e,t){e.exports='<div class="department-selector">\n    <div class="content" i-scroll="search_content">\n        <div>\n            <div class="org-bread">\n                <div>\n                    <span class="org-bread-item tg" ng-click="show_home()">组织架构</span>\n                    <span ng-repeat="_t in org_bread" ng-click="show_depart(_t.id)">\n                            <span class="org-bread-tag icon-hcm-arrow-right"></span>\n                                <span class="org-bread-item tg">{{_t.name}}</span>\n                                </span>\n                </div>\n            </div>\n            <div class="alter" ng-if="!is_multi_select && alter_options && !current_org.id">\n                <div class="org-child tg" ng-repeat="_p in alter_options track by $index">\n                    <div class="name" ng-click="single_select(_p)">\n                        <div class="main">{{_p.name}}</div>\n                        <div class="desc"></div>\n                    </div>\n                    <div class="property" ng-repeat="_pt in _p.alter_property">\n                        <div class="data">{{_pt.data}}</div>\n                        <div class="label">{{_pt.label}}</div>\n                    </div>\n                    <div class="tag"></div>\n                </div>\n            </div>\n\n            <div class="org-child tg" ng-repeat="_p in current_org.child_list track by $index">\n                <div ng-show=\'is_multi_select\' ng-click="select(_p)" class="select-oper tg"\n                     ng-class="{\'blue\':selected_id.indexOf(_p.id)>-1,\'gray\':pre_selected_id.indexOf(_p.id)>-1}">\n                    <div ng-class="{\'icon-hcm-right\':(selected_id.indexOf(_p.id)>-1||pre_selected_id.indexOf(_p.id)>-1)}"></div>\n                </div>\n                <div class="name" ng-click="select(_p)">\n                    <div class="main">{{_p.name}}</div>\n                    <div class="desc" >{{_p.number}}</div>\n                </div>\n                <div class="property" ng-repeat="_pt in _p.alter_property">\n                    <div class="data">{{_pt.data}}</div>\n                    <div class="label">{{_pt.label}}</div>\n                </div>\n                <div class="tag" ng-class="{\'icon-hcm-arrow-right\':!_p.is_leaf}"\n                     ng-click="_p.is_leaf||show_depart(_p.id)"></div>\n            </div>\n        </div>\n    </div>\n    <div class="selected-area" ng-show="selected.length>0&&!single_select">\n        <div ng-repeat="_selected in selected" ng-click="un_select(_selected)" class="selected-item">\n            {{_selected.name}}\n        </div>\n    </div>\n</div>\n'},Mbez:function(e,t){e.exports='<div class="hc-form">\n    <div class="form-tip" ng-if="model.tip">\n        <hc-content-tip content="model.tip" tip-status="true"></hc-content-tip>\n    </div>\n    <form name=\'{{ model.name }}\'>\n        <div ng-repeat="group in model.groups" class="hc-form-group" ng-if="model.$groupShow(group)">\n            <div class="title" ng-if="group.label">\n                <span\n                    class="arrow"\n                    ng-init="group.fold=group.default_fold"\n                    ng-class="{\n                        \'icon-hcm-arrow-down-solid\': !group.fold,\n                        \'icon-hcm-arrow-right-solid\': group.fold\n                     }"\n                    ng-click="group.fold = !group.fold"\n                ></span>\n                <div class="label"\n                >{{ group.label }}</div>\n            </div>\n            <div class="content hc-row"\n                 ng-class="{\'fold\': group.fold, \'pt-16\': group.first_group && !group.label }"\n            >\n                \x3c!--这块只能使用ng-show--\x3e\n                <hc-form-component ng-repeat=\'field in group.fields\'\n                                   key="{{ field.key }}"\n                                   options=\'field.options\'\n                                   ng-show="!(field.options.hide|valueToFunc)()"\n                                   ng-form-data="model.data"\n                                   ng-form-data-path="field.dataPath"\n                                   component="{{ field.component }}"\n                                   label="{{ field.label }}"\n                                   placeholder="{{ field.options.placeholder }}"\n                                   ng-disabled="field.options.disabled"\n                                   style-type="{{field.options.styleType }}"\n                                   show-title="{{field.options.showTitle}}"\n                                   attrs=\'field.attrs\'\n                                   ng-class="{\'read-only\':field.options.disabled || (field.options.readOnly|valueToFunc)() ,\n                                   \'form-notify\': model.valid_error_key===field.key,\n                                   split: $root.client === \'mobile\' && field.options.split}"\n                                   ng-mouseover="field.options.hover=true"\n                                   ng-mouseleave="field.options.hover=false"\n                ></hc-form-component>\n                <span>{{hover}}</span>\n            </div>\n        </div>\n        <div class="hc-form-tab-group" ng-style="{\'order\': tab_position === \'top\' ? -1 : \'\'}" ng-if="model.tab_groups.length > 0">\n            <div class="tabs-container" >\n                <hc-tabs\n                        value="model.current_tab"\n                        disable-scroll-into-view="true"\n                        on-value-change="onTabsValueChange">\n                    <hc-tab-pane\n                            ng-repeat="_group in model.tab_groups track by $index"\n                            ng-if="model.$groupShow(_group)"\n                            label="_group.label || \'未分组\'"\n                            name="_group.key || \'未分组\'"\n                            hide-count="true"\n                            is-selected-new-style=true\n                    ></hc-tab-pane>\n                </hc-tabs>\n            </div>\n            <div ng-repeat="group in model.tab_groups" class="hc-form-group" ng-if="model.$groupShow(group)" ng-show="group.key === model.current_tab">\n                <div class="content hc-row">\n                    <hc-form-component ng-repeat=\'field in group.fields\'\n                                       key="{{ field.key }}"\n                                       options=\'field.options\'\n                                       ng-show="!(field.options.hide|valueToFunc)()"\n                                       ng-form-data="model.data"\n                                       ng-form-data-path="field.dataPath"\n                                       component="{{ field.component }}"\n                                       label="{{ field.label }}"\n                                       placeholder="{{ field.options.placeholder }}"\n                                       ng-disabled="field.options.disabled"\n                                       style-type="{{field.options.styleType }}"\n                                       show-title="{{field.options.showTitle}}"\n                                       attrs=\'field.attrs\'\n                                       ng-class="{\'read-only\':field.options.disabled || (field.options.readOnly|valueToFunc)() ,\n                                   \'form-notify\': model.valid_error_key===field.key,\n                                   split: $root.client === \'mobile\' && field.options.split}"\n                                       ng-mouseover="field.options.hover=true"\n                                       ng-mouseleave="field.options.hover=false"\n                    ></hc-form-component>\n                    <span>{{hover}}</span>\n                </div>\n            </div>\n        </div>\n    </form>\n    <div class="form-floating-btn" ng-if="model.show_float_btn">\n        <div class="scroll-top-btn floating-btn" ng-click="scrollToTop()">\n            <span class="icon-hcm-focus-up icon"></span>\n        </div>\n    </div>\n</div>\n\n'},McUH:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("oVuX"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("sMBO"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("qePV"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("TWNs"),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rB9j"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("JfAA"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("EnZy"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("rZ3M"),core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_esnext_string_replace_all__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("RXMP"),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("LYCE"),_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9__),_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("/FZm"),_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ZbhI"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("6UaR"),_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_stable_instance_ends_with__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("5tqG"),_babel_runtime_corejs3_core_js_stable_instance_ends_with__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_ends_with__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("pPxq"),_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("sLxP"),_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_15__),_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("RKTd"),_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("BF1V"),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("mnMc"),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("5PDf"),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("o+MX"),_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21__),tslib__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("mrSG"),AdvanveService=function(){function AdvanveService(){var _this=this;this.opertateList=[" = "," > "," < "," >= "," <= "," != "," like "," not like "," in "," not in "," child_include "," 等于 "," 大于 ","小于"," 大于等于 "," 小于等于 "," 不等于 "," 包含 "," 不包含 "," 包含于 "," 不包含于 "," 包含下级 "],this.opertateListReg=new RegExp("("+this.opertateList.join("|")+")"),this.initFields=function(e){var t,n=[],i=[];return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default()(t=angular.copy(e)).call(t,(function(e){var t,o,a,l;"common_used"!==e.key&&(null===(t=e.info_fields)||void 0===t?void 0:t.length)&&(i=_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20___default()(i).call(i,e.info_fields),n.push({key:e.key,name:e.name,fields:_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(o=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default()(a=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(l=e.info_fields).call(l,(function(e){return!e.hide}))).call(a,(function(t){return t.category_name=e.name,t}))).call(o,(function(e){var t=e.label||"";return"hc-compose-selector"!==e.component&&!(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(t).call(t,"(")||_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(t).call(t,")"))}))}))})),[n,i]},this.transferQueryStr=function(str,allInfoMeta,advanceFields_info,config){var _context5;void 0===config&&(config={});var _s=str,condition=Object(tslib__WEBPACK_IMPORTED_MODULE_22__.h)(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_17___default.a(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default()(_context5=str.replaceAll("或","or").replaceAll("且","and").split(/ and | or /)).call(_context5,(function(e){var t;return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(t=_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default()(e).call(e).split(/\( | \)/)).call(t,(function(e){return""!==e})).join(" ")})))),fieldArr=[],_copy_fieldArr=[],dataArr=[],_context7;config.default_query_fields&&(fieldArr=angular.copy(config.default_query_fields),_copy_fieldArr=angular.copy(config.default_query_fields),dataArr=_babel_runtime_corejs3_core_js_stable_instance_fill__WEBPACK_IMPORTED_MODULE_15___default()(_context7=Array(config.default_query_fields.length)).call(_context7,null));return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default()(condition).call(condition,(function(s,_i){var _context8,_a,_b,_d,obj={},_e=Object(tslib__WEBPACK_IMPORTED_MODULE_22__.f)(s.split(_this.opertateListReg),3),key=_e[0],operator=_e[1],value=_e[2];if(value=null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default()(value).call(value),key=null==key?void 0:_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default()(key).call(key),(null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(value).call(value,"空值"))&&(value=value.replaceAll("空值",'"空值占位符"')),(!isNaN(Number(value))||(null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_14___default()(value).call(value,"'"))&&(null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_ends_with__WEBPACK_IMPORTED_MODULE_13___default()(value).call(value,"'"))||(null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_starts_with__WEBPACK_IMPORTED_MODULE_14___default()(value).call(value,"["))&&(null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_ends_with__WEBPACK_IMPORTED_MODULE_13___default()(value).call(value,"]"))||_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(_context8=["true","false","True","False"]).call(_context8,value))&&(value=eval("("+_this.boolStringToBoolean(value)+")")),_this.checkStringIsChinese(key)||_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(key).call(key,"#")){var arr=key.split("#");key=1===arr.length?_this.getFieldKeyByName("master",arr[0],advanceFields_info):_this.getFieldKeyByName(arr[0],arr[1],advanceFields_info)}if((null===(_a=null==value?void 0:_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(value))||void 0===_a?void 0:_a.call(value,"空值占位符"))&&(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12___default()(value)?value[_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_11___default()(value).call(value,"空值占位符")]="name"===(null===(_d=null===(_b=_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(allInfoMeta).call(allInfoMeta,(function(e){return e.key==key})))||void 0===_b?void 0:_b.options)||void 0===_d?void 0:_d.returnFormat)?"空":-1:value=value.replaceAll('"空值占位符"',"空值")),"等于"===(null==operator?void 0:_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default()(operator).call(operator))&&"空值"===value&&(operator=" 空值 "),key&&_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9___default()(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj.operate=null==operator?void 0:_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_16___default()(operator).call(operator),key){var _idx=_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_11___default()(_copy_fieldArr).call(_copy_fieldArr,key);-1===_idx?(fieldArr.push(key),dataArr.push(obj),_s=_s.replaceAll(s,fieldArr.length)):(_copy_fieldArr[_idx]=null,_s=_s.replaceAll(s,_idx+1),dataArr[_idx]=obj)}})),_s=null==_s?void 0:_s.replaceAll("and","且").replaceAll("or","或"),[fieldArr,(null==config?void 0:config.translateData)?_this.translateValueToObject(fieldArr,dataArr,advanceFields_info,config.valueParser):dataArr,_s]},this.translateValueToObject=function(e,t,n,i){return Object(tslib__WEBPACK_IMPORTED_MODULE_22__.c)(_this,void 0,void 0,(function(){var o,a,l,r=this;return Object(tslib__WEBPACK_IMPORTED_MODULE_22__.e)(this,(function(c){switch(c.label){case 0:if(!i)return[2,t];if(o=[],_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e,i){var a;if(null!==t[i]&&angular.isArray(t[i][e])){var l=r.getFieldByKey(e,n);if("name"!==(null==l?void 0:l.options.returnFormat)&&((null==l?void 0:l.options.model)||(null==l?void 0:l.options.selectorModel)))angular.isString(null===(a=t[i][e])||void 0===a?void 0:a[0])&&o.push({key:e,data_index:i,value:angular.isArray(t[i][e])?t[i][e]:[t[i][e]]});else if("hc-super-selector"===(null==l?void 0:l.component)&&(null==l?void 0:l.options.list)){var c,s=(null==l?void 0:l.options.individual_name)||"name";t[i][e]=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_21___default()(c=t[i][e]).call(c,(function(e){var t,n,i;return null!==(i=null===(n=null==l?void 0:_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(t=l.options.list).call(t,(function(t){return t[s]===e})))||void 0===n?void 0:n.value)&&void 0!==i?i:e}))}}})),!o.length)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i(o)];case 2:return a=c.sent(),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(a).call(a,(function(e,n){var i,a=null===(i=o[n])||void 0===i?void 0:i.data_index,l=e.key;-1!==a&&(t[a][l]=angular.isArray(t[a][l])?e.value:e.value[0])})),[3,4];case 3:return l=c.sent(),console.error(l),[3,4];case 4:return[2,t]}}))}))},this.validQueryStrFields=function(e,t){if(!e)return!0;var n=Object(tslib__WEBPACK_IMPORTED_MODULE_22__.f)(_this.initFields(t),2),i=n[0],o=n[1],a=Object(tslib__WEBPACK_IMPORTED_MODULE_22__.f)(_this.transferQueryStr(e,o,i),2),l=a[0];a[1];return!!l.length&&(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(l).call(l,(function(e){if(!_this.getFieldByKey(e,i))return!1})),!0)},this.boolStringToBoolean=function(e){return e.replaceAll("True","true").replaceAll("False","false")},this.checkStringIsChinese=function(e){return!!new RegExp("[一-龥]+").test(e)},this.getFieldKeyByName=function(e,t,n){var i,o,a;return null===(a=null===(o=null===(i=_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(n).call(n,(function(t){return"master"===e?t.key===e:t.name===e})))||void 0===i?void 0:i.fields)||void 0===o?void 0:_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(o).call(o,(function(e){return e.label===t})))||void 0===a?void 0:a.key},this.getFieldByPath=function(e,t,n){var i,o;return null===(o=null===(i=_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(n).call(n,(function(t){return t.key===e})))||void 0===i?void 0:i.fields)||void 0===o?void 0:_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_10___default()(o).call(o,(function(e){return e.key===t}))},this.getFieldByKey=function(e,t){var n=e.split(".");return 1===n.length&&n.unshift("master"),_this.getFieldByPath(n[0],e,t)}}return AdvanveService}();window.app.service("advanceService",AdvanveService)},Mi90:function(e,t){e.exports='<div class="component-container">\n    <div class="box-list-block">\n        <div class="file-box"\n             ng-repeat="signature in $ctrl.fileList track by signature"\n             ng-mouseover="hover = true"\n             ng-mouseleave="hover = false">\n            <div class="pic-box" >\n                <img ng-src="{{signature|commonImage:[\'hcDocumentImg\']}}"\n                     ng-click="$ctrl.sign(signature, \'update\')"\n                >\n            </div>\n\n            <div class="del-btn icon-hcm-delete-circle-solid"\n                 ng-if="!($ctrl.options.readOnly|valueToFunc)() && (hover||$ctrl.client===\'mobile\')"\n                 ng-click="$ctrl.delete(signature)">\n            </div>\n        </div>\n        <div class="file-box"\n             ng-if="!($ctrl.options.readOnly|valueToFunc)() && ($ctrl.options.multi || !$ctrl.model)"\n             ng-click="$ctrl.sign()">\n            <div class="add-btn icon-hcm-edit"></div>\n        </div>\n    </div>\n</div>\n'},MskY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}));var i=n("526F"),o=n.n(i),a=function(e){o()(this,e)},l=function(e){this.closeAfterSelected=!1,o()(this,e)}},MtZW:function(e,t){e.exports='<div class="article-resume-card" data-ng-init="init()">\n    <div class="article-object">\n        <div class="basic">\n            <div class="article-photo">\n                <img ng-src="{{item.owner.photo|hcPhoto:36}}">\n            </div>\n            <div class="name">{{item.owner.name}}</div>\n            <div class="inner-lock" ng-if="item.public==1">\n                <span class="special-icon icon-hcm-lock"></span>\n                <span>私密</span>\n            </div>\n            <div class="date">\n                {{item.date|timeStampToDate|beforeCurrentTime}}\n            </div>\n        </div>\n\n        <feed-biz-object-mini biz-id="item.feed.biz_id" biz-name="item.feed.biz_name"\n                              biz-state="item.feed.biz_state" ng-if="has_jump"></feed-biz-object-mini>\n\n        <div class="content con-text" ng-show="item.content" ng-click="go_article()">\n            <span>{{item.content}}</span>\n        </div>\n        <div class="send_and_receive_msg">\n            <div class="content-text" ng-show="item.other_comment.list"\n                 ng-repeat="msg in item.other_comment.list">\n                <div>\n                    <span class="name">{{msg.send_msg_name}}</span>\n                    <span ng-if="msg.receive_msg_name"> 回复\n                        <span class="name">{{msg.receive_msg_name}}</span>\n                    </span>：{{msg.comment}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="attachment" ng-show="item.attachments.length>0">\n        <dynamic-article-attachment item="_att.attachment_class" object-id="_att.attachment_id"\n                                    object-data="_att.attachment_data" message-id="messageId"\n                                    ng-repeat="_att in item.attachments"></dynamic-article-attachment>\n    </div>\n    \x3c!--隐藏--\x3e\n    \x3c!--    <div class="resume-card" ng-if="item.attachments.length==0" ng-click="go_apply()">--\x3e\n    \x3c!--        <div class=\'basic\'>--\x3e\n    \x3c!--            <div class="resume-photo">--\x3e\n    \x3c!--                <img ng-src="{{resume.basis.photo|hcPhoto:120}}">--\x3e\n    \x3c!--            </div>--\x3e\n    \x3c!--            <div class="name">{{resume.basis.name}}<span>的简历</span></div>--\x3e\n    \x3c!--        </div>--\x3e\n\n    \x3c!--        <div class="detail">--\x3e\n    \x3c!--            <div class="item item-mobile" ng-if="resume.basis.mobile">--\x3e\n    \x3c!--                <span class="key">手机</span>--\x3e\n    \x3c!--                <span class="icon icon-hcm-phone"></span>--\x3e\n    \x3c!--                <span>{{resume.basis.mobile}}</span>--\x3e\n    \x3c!--            </div>--\x3e\n    \x3c!--            <div class="item item-email" ng-if="resume.basis.email">--\x3e\n    \x3c!--                <span class="key">邮箱</span>--\x3e\n    \x3c!--                <span class="icon icon-hcm-email"></span>--\x3e\n    \x3c!--                <span>{{resume.basis.email}}</span>--\x3e\n    \x3c!--            </div>--\x3e\n    \x3c!--            <div class="item item-last-company" ng-if="resume.basis.last_company">--\x3e\n    \x3c!--                <span class="key">公司</span>--\x3e\n    \x3c!--                <span class="icon icon-unit-virtual"></span>--\x3e\n    \x3c!--                <span>{{resume.basis.last_company}}</span>--\x3e\n    \x3c!--            </div>--\x3e\n    \x3c!--            <div class="item item-last-school" ng-if="resume.basis.last_school">--\x3e\n    \x3c!--                <span class="key">学校</span>--\x3e\n    \x3c!--                <span class="icon icon-hcm-education"></span>--\x3e\n    \x3c!--                <span>{{resume.basis.last_school}}</span>--\x3e\n    \x3c!--            </div>--\x3e\n    \x3c!--        </div>--\x3e\n    \x3c!--    </div>--\x3e\n</div>\n'},Mu9o:function(e){e.exports=JSON.parse('{"tip":"维护字段显示属性","fields":[{"key":"key","label":"标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入标识","required":true}},{"key":"label","label":"显示名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"description","label":"字段描述","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"鼠标悬停表头时会在表格上显示的文字内容","required":false}},{"key":"dim.field","dataPath":["dim","field"],"label":"字段","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入维度字段","required":true},"field":["dim","field"]},{"key":"align","label":"对齐","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"list":[{"name":"居左","value":"left"},{"name":"居中","value":"center"},{"name":"居右","value":"right"}]}},{"key":"width","label":"宽度","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入宽度","required":false,"data_type":"number"}},{"key":"sequence","label":"顺序值","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入顺序值","required":true,"data_type":"number"}},{"key":"fixed","label":"是否冻结","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"default":false,"list":[{"name":"是","value":true},{"name":"否","value":false}]}},{"key":"rollup","label":"是否小计","component":"hc-input-radio","options":{"singleLine":false,"width":"col-6","items_inline":true,"default":true,"list":[{"name":"是","value":true},{"name":"否","value":false}]}},{"key":"rollup_avg","label":"是否平均","component":"hc-input-radio","options":{"singleLine":false,"width":"col-6","items_inline":true,"default":false,"list":[{"name":"是","value":true},{"name":"否","value":false}]}},{"key":"formatter_0","label":"合计映射文本","component":"hc-input","options":{"singleLine":false,"width":"col-12","default":"合计","placeholder":"请输入合计映射的文本"}},{"key":"formatter_2","label":"平均映射文本","component":"hc-input","options":{"singleLine":false,"width":"col-12","default":"平均值","placeholder":"请输入平均值映射的文本"}},{"key":"formatter_1","label":"合计值为空的映射文本","component":"hc-input","options":{"singleLine":false,"width":"col-12","default":"无","placeholder":"请输入为空时映射的文本"}},{"key":"sorts.fields","label":"排序字段","dataPath":["sorts","fields"],"component":"hc-super-selector","options":{"singleLine":false,"width":"col-12","hide":true,"multi":true}}]}')},N41K:function(e,t){e.exports='<div class="common-user-agreement">\n    <div class="include-div">\n        <ng-include src="\'/api/template/load_template?key=common_agreement.html\' + window.hcm_env_post"></ng-include>\n    </div>\n    <div  class="has-read-btn-pc" ng-if="client==\'pc\'">\n        <div class="tip-check">\n            <input type="checkbox" ng-model="has_read" ng-disabled="!can_has_read" class="hc-input-checkbox"/>\n            <span>我已阅读相关声明，并同意遵守。<span ng-hide="time == 0">({{time}}s)</span></span>\n        </div>\n        <button ng-disabled="!has_read" ng-click="has_read_tip()" class="btn-pc primary">我已阅读</button>\n    </div>\n    <div  class="has-read-btn-mobile" ng-if="client==\'mobile\'">\n        <div class="resume-tip-check">\n            <input type="checkbox" ng-model="has_read" ng-disabled="!can_has_read" class="hc-input-checkbox"/>\n            <div>我已阅读相关声明，并同意遵守。<span ng-hide="time == 0">({{time}}s)</span></div>\n        </div>\n        <button ng-disabled="!has_read" ng-click="has_read_tip()" class="btn-pc primary">我已阅读</button>\n    </div>\n</div>'},N5Pk:function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="go_recruit_setting(fieldwork_item.ai_error_url)">\n    <div>{{fieldwork_item.ai_error_content}}<span class="icon-hcm-arrow-right"></span></div>\n</div>\n'},N5f8:function(e,t){e.exports='<h2 class="hint">请在下方框内签名 <span ng-if="$ctrl.client==\'mobile\'" class="mobile-tips">（支持横屏写入）</span></h2>\n<div id="canvas">\n    <canvas>\n        您的浏览器当前不支持canvas画布，请更换其他浏览器进行签名操作\n    </canvas>\n</div>\n'},NXiU:function(e,t){e.exports='<div class="field-list" ng-if=\'true\' ng-init="init()">\n    <div class="hcm-field-list-body" ng-class="{\'field-list-no-data\':is_show_list&&!list_model.data.length}">\n        <div class="required" ng-show="(options.required|valueToFunc)()" ng-if="!hide_label">*</div>\n        <div class="list-operate" ng-class="{\'is_category\': category_field, \'hide-label\':hide_label}">\n            <div ng-class="is_show_list?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'" class="icon" ng-click="showList()" ng-if="!hide_label"></div>\n            <div class="list-name" ng-if="!hide_label">\n                <span ng-bind-html="(label|valueToFunc)()|toTrusted"></span>\n                <span\n                    ng-if="options.tip"\n                    class="tip tip-icon icon-hcm-question"\n                    hc-title="{{options.tip}}"\n                    options="{\'mode\': \'tip\',\'seconds\': 0, \'direction\': \'column\', \'mobile\': true}"></span>\n                <div class="extra_title" ng-if="extra_title.value && !extra_title.show_score">\n                    {{(extra_title.value|valueToFunc)()}}</div>\n                <div class="extra_label_area" ng-if="extra_label.length">\n                    <div ng-repeat="item in extra_label track by $index" class="extra_label"\n                        ng-style="{color: item.color}">\n                        {{item.label}}: {{(item.value|valueToFunc)()}}\n                    </div>\n                </div>\n            </div>\n            <div class="right-operate">\n                <hc-list-btn model="list_btn_model"></hc-list-btn>\n                <div class="change-list-view" ng-if="((list_model.view_list_config|objectKey).length>1) && options.show_change_view"\n                    ng-click="clickChangeListView()">\n                    <div class="view-menu">\n                        <div class="icon {{viewSwitch.current[\'icon\']}}"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="category-tabs" ng-if="category_field"\n            ng-show="is_show_list"\n            ng-hide="(hideComponents || []).includes(\'category-tabs\')">\n            <div id="categoryEdit"\n                class="btn-icon {{list_config.category.icon ? list_config.category.icon : \'icon-hcm-menu\'}}"\n                ng-if="showCategoryEdit" ng-click="categoryEdit()"></div>\n            <hc-tabs value="category_id" ng-hide="tabPanes && !tabPanes.length" on-value-change="onTabsValueChange"\n                ng-class="{\'multi-level\': list_config.category.isMultiLevel}"\n                disable-show-more="list_config.category.disableShowMore"\n                disable-scroll-into-view="true">\n                <hc-tab-pane ng-repeat="tab in tabPanes track by tab.id" label="tab.name" name="tab.id" icon="tab.icon"\n                    count="tab.count" hide-count="list_config.hide_count"\n                    is-selected-new-style="list_config.category.isSelectedNewStyle"\n                    is-selected-animate-style="list_config.category.isSelectedAnimateStyle"\n                    is-multi-level="list_config.category.isMultiLevel"\n                    ></hc-tab-pane>\n            </hc-tabs>\n        </div>\n        <hc-list-new model="list_model" ng-show="is_show_list"\n                     ng-style="{\'max-height\':max_height,\'overflow\':client == \'pc\'&&max_height< 3500 ?\'unset\':\'scroll\'}"></hc-list-new>\n        <hc-list-no-data model="list_model" caption="{{\'No corresponding data found\'|translate}}" ng-if="is_show_list"></hc-list-no-data>\n    </div>\n</div>\n'},NYRg:function(e,t,n){"use strict";n("sMBO");var i=n("a0dU"),o=n.n(i),a=(n("ls82"),n("SPx3")),l=n.n(a),r=n("lq6P"),c=(n("/8mQ"),n("CGID")),s=n.n(c);window.app.controller("metaSetNameDialogCtrl",["$controller","$rootScope","$scope","CompanyMetaService",function(e,t,n,i){e(r.a,{$scope:n,CRUDService:i}),n.$dialog.title("更改者信息"),n.submit=l()(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.parseData(n.data),e.next=3,n.validFormData(a);case 3:if(e.t1=e.sent,e.t0=!1===e.t1,e.t0){e.next=7;break}e.t0=n.submitting;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:if(/^[\u4E00-\u9FA5]{2,4}$/.test(n.base_form.data.name)){e.next=13;break}return t.show_warning("请输入中文"),e.abrupt("return");case 13:i.setModifier(n.base_form.data.name).then((function(e){n.$dialog.resolve_data(e),n.$dialog.dialog_close()}));case 14:case"end":return e.stop()}}),e)}))),n.info_meta=[{key:"name",label:"请如实填写真实姓名",component:"hc-input",options:{required:!0,name:"metaSetName",customEnter:n.submit,placeholder:"请输入姓名"}}]}]),t.a={controller:"metaSetNameDialogCtrl",template:s.a}},NjHp:function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog" ng-init="init()">\n    <hc-query model="advance_query"></hc-query>\n    '+n("IGAs")+"\n</div>\n"},Nvbu:function(e,t){e.exports='<div ng-init="init()" class="model-view-single">\n    <div class="hcm-content-body">\n        <hc-view model="view_model"></hc-view>\n    </div>\n</div>\n\n'},OW3F:function(e,t){e.exports='<div class="fieldwork-rec-offer distinct" ng-show="hide_contacts" ng-init="init()">\n\n    <div ng-if="fieldwork_item.confirm_url&&fieldwork_item.confirm_url!=\'\'"\n         ng-click="goConfirm(fieldwork_item.confirm_url)">\n        点击此条消息确认是否接受offer<span class="icon-hcm-arrow-right"></span>\n    </div>\n    <div ng-if="fieldwork_item.print_url&&fieldwork_item.print_url!=\'\'"\n         ng-click="goConfirm(fieldwork_item.print_url)">\n        点击查看offer<span class="icon-hcm-arrow-right"></span>\n    </div>\n\n</div>\n\n\n'},OqSx:function(e,t){e.exports="<div class=\"component-container\" ng-click=\"$ctrl.options.onClick($event)\">\n    <div class='component-input-inner'\n         ng-class='{placeholder:!$ctrl.model}'\n         ng-disabled='($ctrl.options.readOnly|valueToFunc)()'\n    >\n        {{$ctrl.model ? $ctrl.valueMask($ctrl.model) : $ctrl.options.placeholder}}\n    </div>\n</div>\n"},OrM7:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));n("sMBO"),n("rB9j"),n("EnZy"),n("x83w");var i=n("/FZm"),o=n.n(i),a=n("5PDf"),l=n.n(a),r=n("STz3"),c=n.n(r),s=n("guyh"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("M5Mt"),m=n.n(p),f=n("+oHS"),h=n.n(f),g=n("526F"),v=n.n(g),b=n("6UaR"),y=n.n(b),w=n("RXMP"),x=n.n(w),k=n("FLGM"),$=n.n(k),O=n("mrSG"),D=n("CoJ3"),C=n("+hqv"),M=(n("/8mQ"),n("xVz+"),n("3zEb"),n("o+MX")),S=n.n(M),E=n("lq6P"),P=n("CGID"),j=n.n(P);window.app.controller("StatisticSettingNewCtrl",["$scope","$controller","$hcDialog",function(e,t,n){t(E.a,{$scope:e,CRUDService:{}}),e.initBefore=function(){var t,n;e.type_list=[{value:"count",name:"计数"}],_()(t=["float","integer","numeric"]).call(t,e.params.data.data_type)&&(e.type_list=S()(n=e.type_list).call(n,[{value:"sum",name:"合计"},{value:"avg",name:"平均"},{value:"max",name:"最大值"},{value:"min",name:"最小值"}])),e.info_meta=[{key:"name",label:"字段名",component:"hc-input",options:{data_type:"string",readOnly:!0}},{key:"label",label:"别名",component:"hc-input"},{key:"type",label:"类型",component:"hc-input-radio",options:{items_inline:!0,default:"count",required:!0,list:e.type_list}},{key:"decimal",label:"精度",component:"hc-input",options:{data_type:"number",default:2,hide:function(){var t;return!_()(t=["float","integer"]).call(t,e.params.data.data_type)}}},{key:"format",label:"数据格式",component:"hc-input-radio",options:{items_inline:!0,hide:function(){var t;return!_()(t=["float","integer"]).call(t,e.params.data.data_type)},list:[{value:"origin",name:"原始值"},{value:"currency",name:"币值"}]}}],e.default_operate=[{key:"submit",func:e.submit_check,label:"确定",default:!0}],e.$dialog.check_close=e.submit_check},e.submit_check=function(){var t,i=e.base_form.$validData();if(!0===i){var o=e.base_form.data;o.type=o.type||"count",o.key=S()(t="".concat(o.type,"__")).call(t,e.data.field),e.$dialog.resolve_data(o),e.$dialog.dialog_close()}else n.notify(i,"warning")}}]);var T={controller:"StatisticSettingNewCtrl",template:j.a,title:"统计设置"},A=(n("hByQ"),n("WxoT")),I=n.n(A),L=n("Z73o"),F=n.n(L),R=n("1GJp"),B=n("srGB");window.app.controller("relationInfoCtrl",["$scope","$rootScope","$filter","$q","$controller",B.a,function(e,t,n,i,o,a){var r=this,c=a.getModelService(e.params.model);o(E.a,{$scope:e,CRUDService:c}),e.initDataAsync=function(){var t=i.defer();return e.available_fields=[],e.params.dataset&&e.getAvailableFields(e.params.dataset.model,e.params.dataset.state).then((function(n){e.available_fields=e.parse_list(n.fields),t.resolve()})),t.promise},e.initBeforeAsync=function(){return Object(O.c)(r,void 0,void 0,(function(){return Object(O.e)(this,(function(t){switch(t.label){case 0:return[4,e.initDataAsync()];case 1:return t.sent(),e.info_meta=[{key:"source_field",label:"被关联字段",component:"hc-super-selector",options:{singleLine:!1,no_delete:!0,width:"col-12",tip:"主数据集上的可关联字段",placeholder:"请选择被关联字段",required:!0,list:e.available_fields}},{key:"dataset",label:"数据集",component:"hc-super-selector",options:{singleLine:!1,no_delete:!0,width:"col-12",placeholder:"请选择数据集",tip:"选择需要关联的数据集",required:!0,selectorObject:"hcm.db.object",selectorOptions:{role:e.params.role},returnFormat:"object"}},{key:"key",label:"数据集标识",component:"hc-input",options:{singleLine:!1,width:"col-12",placeholder:"请输入数据集标识",tip:"同一数据集可能被关联多次, 如: 同比环比分析",required:!0}},{key:"type",label:"连接类型",component:"hc-super-selector",options:{singleLine:!1,no_delete:!0,width:"col-12",default:"outer",placeholder:"请选择连接类型",required:!0,list:[{name:"左外连接",id:"outer"},{name:"内连接",id:"inner"}]}},{key:"data_type",label:"是否作为统计",component:"hc-super-selector",options:{singleLine:!1,no_delete:!0,width:"col-12",default:null,placeholder:"是否作为统计",list:[{name:"否",id:null},{name:"是",id:"count"}]}},{key:"relate_field",label:"关联字段",component:"hc-super-selector",options:{singleLine:!1,no_delete:!0,hide:function(){var t,n;return!((null===(n=null===(t=e.base_form)||void 0===t?void 0:t.data)||void 0===n?void 0:n.dataset)&&e.base_form.data.key&&e.base_form.data.source_field)},width:"col-12",placeholder:"请选择关联字段",required:!0,selector:function(){var t,n,o=i.defer();return e.getAvailableFields(null===(t=e.base_form.data.dataset)||void 0===t?void 0:t.model,null===(n=e.base_form.data.dataset)||void 0===n?void 0:n.state).then((function(t){o.resolve(e.parse_list(t,e.base_form.data.source_field.model,e.base_form.data.key))})),o.promise},selectorMapper:function(t){var n,o,a=i.defer();return e.getAvailableFields(null===(n=e.base_form.data.dataset)||void 0===n?void 0:n.model,null===(o=e.base_form.data.dataset)||void 0===o?void 0:o.state).then((function(n){a.resolve(e.parse_info(n,e.base_form.data.source_field.model,t,e.base_form.data.key))})),a.promise}}}],[2]}}))}))},e.getAvailableFields=function(e){return c.getBizMeta({model:e})},e.parse_list=function(e,t,i){var o=[];return $()(e).call(e,(function(e){var n;t&&e.model!==t||("master"===e.key&&o.push({id:i?i+".id":"id",name:e.name,model:e.model}),$()(n=e.fields).call(n,(function(t){var n;t.id=i?i+"."+t.key:t.key,t.name=e.name+"-"+t.label,_()(n=["{}","","null",void 0]).call(n,I()(null==t?void 0:t.object))||o.push(t)})))})),n("arrayRemoveDuplicate")(o,"id")},e.parse_info=function(e,t,i,o){var a=[];return l()(e).call(e,(function(e){var n;t&&e.model!==t||("master"===e.key&&a.push({id:o?o+".id":"id",name:e.name,model:e.model}),$()(n=e.fields).call(n,(function(t){var n;t.id=o?o+"."+t.key:t.key,t.name=e.name+"-"+t.label,_()(n=["{}","","null",void 0]).call(n,I()(null==t?void 0:t.object))||a.push(t)})))})),n("toObj")(n("arrayRemoveDuplicate")(a,"id"),"id")[i].name},e.submit=function(){e.checkSubmit()&&(e.$dialog.resolve_data(e.base_form.data),e.$dialog.check_close())},e.checkSubmit=function(){var n=e.base_form.$validData();return!0===n||(t.show_warning(n),!1)},e.close=function(){e.$dialog.check_close()},e.initOperate=function(){e.$dialog.operates([{label:"返回",func:e.close,default:!1,left:!0},{label:"确定",func:e.submit,default:!0}])}}]),window.app.controller("DetailReportDatasetListCtrl",["$scope","$rootScope","$filter","$hcDialog","$hcConfigList","$state",function(e,t,n,i,o,a){e.init=function(){e.initData(),e.initDatasetConfigList(),e.initOperate()},e.initData=function(){e.relations_data=e.params.data},e.goDatasetSetting=function(e){window.commonOpen(location.pathname+location.search+decodeURIComponent(a.href("hcm_model_viewer_fields",{id:e},{})))},e.initDatasetConfigList=function(){e.dataset_config_list=o.createConfigList({meta:[{width:100,label:"数据集名称",key:"name",field:["name"]},{width:100,label:"数据集标识",key:"key",field:["key"]},{width:100,label:"关联类型",key:"type",field:["type"],mask:[{name:"外关联",key:"outer"},{name:"内关联",key:"inner"}]}],data:e.relations_data,show_index:!0,operate_default:function(t,n,i,o){e.editSubDataset(t)},operates:[{icon:"icon-system-set",label:"高级配置",desc:"高级配置",func:function(t,n){e.subDatasetFilter(t)}},{icon:"icon-hcm-delete-circle-solid",label:"删除",desc:"删除",func:function(t,n){e.removeSubDataset(n)}},{icon:"icon-hcm-forwarding",label:"前往数据集配置",desc:"前往数据集配置",func:function(t,n){e.goDatasetSetting(t.model,t.relation_state)}}]})},e.selectSubDataset=function(t){var n=angular.extend({},t);return i.getDialog({controller:"relationInfoCtrl",template:j.a,title:"关联表"}).params({model:e.params.model,data:n,role:e.params.role,dataset:e.params.data}).size("middle").show()},e.subDatasetFilter=function(t){i.getDialog(R.a).show({data:angular.toJson(t)}).then((function(t){var i=JSON.parse(t),o=n("toObj")(e.relations_data);o[i.key]=i,e.relations_data=c()(o),e.initDatasetConfigList()}))},e.editSubDataset=function(t){var i,o=angular.extend({},t);o.dataset=t,o.source_field=null===(i=c()(l()(t)||{})[0])||void 0===i?void 0:i.split(":")[1],o.relate_field=h()(l()(t)||{})[0],e.selectSubDataset(o).then((function(t){var i=n("toObj")(e.relations_data);i[t.key]={key:t.key,name:t.dataset.name,model:t.dataset.model,relation_state:t.dataset.state||(null==o?void 0:o.relation_state),data_type:t.data_type||(null==o?void 0:o.data_type),meta_type:"dataset",type:t.type,filter:e.get_filter(t.source_field,t.relate_field)},e.relations_data=c()(i),e.initDatasetConfigList()}))},e.createSubDataset=function(){e.selectSubDataset().then((function(i){n("toObj")(e.relations_data)[i.key]?t.show_warning("不允许重复添加数据集"):e.relations_data.push({key:i.key,name:i.dataset.name,model:i.dataset.model,relation_state:i.dataset.state,data_type:i.data_type,meta_type:"dataset",type:i.type,filter:e.get_filter(i.source_field,i.relate_field)})}))},e.get_filter=function(e,t){var n={};return n[t]=":"+e,n},e.removeSubDataset=function(t){var n;m()(n=e.relations_data).call(n,t,1)},e.submit=function(){e.checkSubmit()&&(e.$dialog.resolve_data(e.relations_data),e.$dialog.check_close())},e.checkSubmit=function(){var n,i=l()(n=e.relations_data).call(n,(function(e){var t;return _()(t=["{}","","null",void 0]).call(t,I()(l()(e)))}));return 0===i.length||(t.show_warning("请配置关联关系: "+i[0].name),!1)},e.close=function(){e.$dialog.check_close()},e.initOperate=function(){e.$dialog.operates([{label:"返回",func:e.close,default:!1,left:!0},{label:"新增",func:e.createSubDataset,default:!1,left:!0},{label:"确定",func:e.submit,default:!0}])}}]);var U={controller:"DetailReportDatasetListCtrl",template:F.a,title:"数据集设置"},q=n("R91f"),W=function(){function e(e,t,n,i,o,a,l,r,c,s,d){var u=this;this.$scope=e,this.$rootScope=t,this.$controller=n,this.$q=i,this.baseCRUDService=o,this.companyMetaService=a,this.$hcDataset=l,this.$hcQueryField=r,this.$filter=c,this.$hcDialog=s,this.columnDefsService=d,this.service=this.getService(e.params.model),this.is_plan=e.params.is_plan,n(C.a,{$scope:e,CRUDService:this.service,InfoDialog:null}),this.$scope.fetch_count=!1,this.$scope.force_refresh=!0,this.$scope.meta_state=this.$scope.params.state,e.defineBaseConst=function(){},e.initBaseConst=function(t){e.detail=t,e.meta_info=angular.extend(e.meta_info||{},t||{})},e.getPagingParams=function(){return Object(O.c)(u,void 0,void 0,(function(){return Object(O.e)(this,(function(e){return[2,{page_size_list:[5],current_page:1,page_size:5}]}))}))},e.setSequence=function(e){var t;return $()(t=angular.copy(e)).call(t,(function(e,t){return e.sequence=10*(t+1),e}))},e.getFilterDict=function(){return e.params.filter_dict},e.initAfter=function(){return Object(O.c)(u,void 0,void 0,(function(){return Object(O.e)(this,(function(e){return[2]}))}))},e.DatasetList=function(){return Object(O.c)(u,void 0,void 0,(function(){var t;return Object(O.e)(this,(function(n){switch(n.label){case 0:return t=e.dataset,[4,s.getDialog(U).params({data:e.meta_info.relations,model:e.meta_info.model}).show()];case 1:return t.relations=n.sent(),[4,s.confirm("请确保已选字段所属数据集已关联，是否继续操作")];case 2:return n.sent(),e.saveMetaInfo(),[2]}}))}))},e.setDefaultSetting=function(){},e.globalRefresh=function(){},e.checkInit=function(){return!0},e.getOuterAdvanceParams=function(){var t,n,i,o,a=u;return{type:"simple",get_plan:!1,advance_query_config:angular.extend({},{default_meta_length:((null===(n=u.meta_info)||void 0===n?void 0:n.filters)||[]).length},u.advance_query_config||{}),filters:angular.copy((null===(i=u.meta_info)||void 0===i?void 0:i.filters)||[]),show_fields_key:$()(t=(null===(o=u.meta_info)||void 0===o?void 0:o.filters)||[]).call(t,(function(e){return e.key})),display_callback:function(){a.filter_dict=e.advance_query.query_model.data,e.refreshList()}}},e.setFilterDict=function(){return _.params.filter_dict};var _=this;e.refreshList=function(){var t;if(!u.cancel_sync_refresh){e.merged_fields=_.metaParse(_.meta_info.fields),e.list_meta=_.metaParse(_.meta_info.fields),e.stat_meta=_.metaParse(u.meta_info.statistics||[]),(null===(t=_.meta_info.sorts)||void 0===t?void 0:t.length)>0&&(e.sort_meta=_.meta_info.sorts,e.list_model.$setSort(_.meta_info.sorts[0])),x()(angular).call(angular,e.list_meta,(function(e){return e.sortable=y()(e.field)}));var n=_.columnDefsService.column_defs;(null==n?void 0:n.length)?(_.meta_info.column_defs=n,_.$scope.list_model.$setColumnDefs({children:n},e.list_meta)):_.setListColumns(),e.paging.refreshPage()}},v()(this,e),this.close=function(){_.$dialog.dialog_close()},this.submit=function(){_.$dialog.dialog_close()},this.refresh=function(){_.initQuery()},this.advanceSettingDialog=function(){return Object(O.c)(u,void 0,void 0,(function(){var t,n,i,o,a;return Object(O.e)(this,(function(l){switch(l.label){case 0:return n=(t=_.$hcDialog.getDialog(q.a)).show,i={meta_key:e.params.meta_key,origin_meta_key:e.params.meta_key,biz_type:"list",model:e.model_meta.model,state:e.getMetaState(),is_visualization:!0},a=(o=angular).copy,[4,_.getVisualizationMeta()];case 1:return[2,n.apply(t,[(i.visualization_meta=a.apply(o,[l.sent()]),i)])]}}))}))},this.advance_setting=function(){return Object(O.c)(u,void 0,void 0,(function(){return Object(O.e)(this,(function(e){return _.advanceSettingDialog().then((function(){return Object(O.c)(this,void 0,void 0,(function(){return Object(O.e)(this,(function(e){return _.$scope.list_btn_meta=null,_.$scope.list_meta=null,_.initBase(),[2]}))}))})),[2]}))}))}}return e.prototype.initBase=function(){return Object(O.c)(this,void 0,void 0,(function(){return Object(O.e)(this,(function(e){switch(e.label){case 0:return this.defineBaseConst(),[4,this.initBaseBeforeAsync()];case 1:return e.sent(),this.initOperate(),[4,this.checkInit()];case 2:return e.sent()&&this.init(),this.initBaseAfter(),[2]}}))}))},e.prototype.initOperate=function(){},e.prototype.submit=function(){},e.prototype.initBaseBeforeAsync=function(){return Object(O.c)(this,void 0,void 0,(function(){return Object(O.e)(this,(function(e){switch(e.label){case 0:return this.initPanelFunc(),[4,this.initDatasetFields()];case 1:return e.sent(),[4,this.initMetaInfo()];case 2:return e.sent(),this.transMetaInfo(),this.removeDuplicate(),this.globalRefresh(),this.initSettingPanel(),[2]}}))}))},e.prototype.initMetaInfo=function(){return Object(O.c)(this,void 0,void 0,(function(){var e;return Object(O.e)(this,(function(t){return(e=this.$q.defer()).resolve(),[2,e.promise]}))}))},e.prototype.transMetaInfo=function(){this.initBaseConst(this.meta_info)},e.prototype.removeDuplicate=function(){var e,t=this;$()(e=h()(this.AvailableFields)).call(e,(function(e){var n,i,o,a;try{for(var l=Object(O.i)(t.meta_info[e]||[]),r=l.next();!r.done;r=l.next()){var c=r.value;try{for(var s=(o=void 0,Object(O.i)(t.availableFieldsModel[e].data)),d=s.next();!d.done;d=s.next()){var u,_=d.value,p=t.$filter("indexOf")(_.fields,c);if(p>=0)m()(u=_.fields).call(u,p,1)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}))},e.prototype.getAvailableFields=function(){var e;return Object(O.c)(this,void 0,void 0,(function(){return Object(O.e)(this,(function(t){return[2,this.service.getQueryFields(null===(e=this.params)||void 0===e?void 0:e.state,this.params.biz_type||"list",this.params.append_relations||[],!1)]}))}))},e.prototype.initDatasetFields=function(){return Object(O.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(O.e)(this,(function(i){var o;switch(i.label){case 0:return this,e=this.$q.defer(),t=this,[4,this.getAvailableFields()];case 1:return t.AvailableFields=i.sent(),this.availableFieldsModel={},$()(o=h()(this.AvailableFields)).call(o,(function(e){n.availableFieldsModel[e]=n.$hcDataset.createDataset({data:n.AvailableFields[e],multi:!1,mode:"drag",type:e,expandNodeFunc:function(t){return n.getExpandNodeFunc(e,t)}}),n.availableFieldsModel[e].$initDataset()})),e.resolve(),[2,e.promise]}}))}))},e.prototype.initBaseAfter=function(){var e;null===(e=this.list_model)||void 0===e||e.$setRowSelector(0),this.$dialog.operates([{key:"back",label:"返回",func:this.close,default:!1},{key:"refresh",label:"刷新",left:!1,func:this.refresh,default:!0},{key:"submit",label:"确定",func:this.submit,default:!0},{key:"advance_setting",label:"高级设置",left:!0,func:this.advance_setting}])},e.prototype.initQuery=function(){this.cancel_sync_refresh||this.initAdvanceQuery()},e.prototype.initPanelFunc=function(){var e,t=this,n=this;this.alterPanelFunc={filter:{},field:{},stat:{},sort:{}},this.filterFunc=angular.extend({remove:function(e){var t;n.availableFieldsModel.filters.keyword="",n.current_panel.model.keyword="",m()(t=n.meta_info.filters).call(t,n.$filter("indexOf")(n.meta_info.filters,e),1),n.addTreeField(e,"filters"),n.initQuery()},isGroup:function(e){return~n.$filter("indexOf")(n.meta_info.categories||[],e,"key")},group:function(e){var t,i;_()(t=["hc-tree-list-selector","hc-super-selector","hc-category-selector","hc-standard-tree-selector"]).call(t,e.component)?n.filterFunc.isGroup(e)?n.meta_info.categories=n.$filter("arrayBatchRemove")(n.meta_info.categories,[e],"key"):n.meta_info.categories=n.$filter("arrayMerge")(n.meta_info.categories||[],[{key:e.key,label:e.label}],"key"):n.$rootScope.show_warning("该字段/选择器不适合做分组"),d()(i=n.categoryFunc).call(i),n.initQuery()},groupSort:function(){},require:function(e){var t;return Object(O.c)(this,void 0,void 0,(function(){var i;return Object(O.e)(this,(function(o){return i=n.$filter("toObj")(n.meta_info.filters),e.options=(null==e?void 0:e.options)||{},e.options.required=!(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.required),i[e.key]=e,n.meta_info.filters=c()(i),n.initQuery(),[2]}))}))},edit:function(e){var t,i;return Object(O.c)(this,void 0,void 0,(function(){var o,a;return Object(O.e)(this,(function(l){switch(l.label){case 0:return e.name=e.label,[4,n.filterFunc.setting(e)];case 1:return o=l.sent(),null===(t=n.filter_dict)||void 0===t||delete t[e.key],o.options.child_include=o.child_include,o.options.no_trans_query=o.no_trans_query,delete o.child_include,delete o.no_trans_query,(a=n.$filter("toObj")(n.meta_info.filters))[e.key]=o,n.meta_info.filters=c()(a),delete((null===(i=n.meta_info)||void 0===i?void 0:i.filter_dict)||{})[e.key],n.current_panel.model.data=n.meta_info.filters,n.initQuery(),[2]}}))}))},added_callback:function(e){n.meta_info.filters=e.models,n.initQuery()},sorted_callback:function(e){n.meta_info.filters=e.models,n.meta_info.filters=n.setSequence(n.meta_info.filters)},setting:function(e){var t,i;e=angular.copy(e);var o=[{key:"name",label:"字段名",component:"hc-input",options:{data_type:"string",readOnly:!0}},{key:"label",label:"别名",component:"hc-input"},{key:"no_trans_query",label:"取消高级模式",component:"hc-input-radio",options:{default:!1,items_inline:!0,hide:!_()(t=["hc-input","hc-input-number","hc-input-label-multi","hc-text-area","hc-input-datetime"]).call(t,e.component),list:[{value:!0,name:"是"},{value:!1,name:"否"}]}}];return _()(i=["hc-tree-list-selector","hc-selector-depart","hc-standard-tree-selector"]).call(i,e.component)&&o.push({key:"child_include",label:"是否查看下级",component:"hc-input-radio",options:{default:!0,list:[{value:!0,name:"是"},{value:!1,name:"否"}]}}),n.$hcDialog.simpleForm("编辑过滤字段",o,e)}},l()(this.alterPanelFunc)),this.categoryFunc={sort:function(){var e,t=function(e){return n.$filter("indexOf")(n.meta_info.filters,e,"key","key")};d()(e=n.meta_info.categories).call(e,(function(e,n){return t(e)-t(n)}))}},this.fieldFunc=angular.extend({remove:function(e){var t;n.availableFieldsModel.fields.keyword="",n.current_panel.model.keyword="",m()(t=n.meta_info.fields).call(t,n.$filter("indexOf")(n.meta_info.fields,e),1),n.addTreeField(e,"fields"),n.refreshList()},edit:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t,i;return Object(O.e)(this,(function(o){switch(o.label){case 0:return e.name=e.label,[4,n.fieldFunc.setting(e)];case 1:return t=o.sent(),(i=n.$filter("toObj")(n.meta_info.fields))[e.key]=t,n.meta_info.fields=c()(i),n.current_panel.model.data=n.meta_info.fields,n.refreshList(),[2]}}))}))},isFixed:function(e){return e.fixed},fixed:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t;return Object(O.e)(this,(function(i){return t=n.$filter("toObj")(n.meta_info.fields),e.fixed=!e.fixed,t[e.key]=e,n.meta_info.fields=c()(t),n.fieldFunc.fixedSort(n.current_panel),n.refreshList(),[2]}))}))},fixedSort:function(e){var t,i;$()(t=n.meta_info.fields).call(t,(function(e,t){e.sequence=e.fixed?t+1:10*(t+1)})),e.model.data=d()(i=n.meta_info.fields).call(i,(function(e,t){return(e.sequence||0)-(t.sequence||0)}))},added_callback:function(e){n.fieldFunc.setWidth(e.model),n.meta_info.fields=e.models,n.fieldFunc.fixedSort(n.current_panel),n.refreshList()},sorted_callback:function(e){n.meta_info.fields=e.models,n.fieldFunc.fixedSort(n.current_panel)},setWidth:function(e){e.width=16*((e.label||e.name||"").length+1)},setting:function(e){var t=16*((e=angular.copy(e)).label.length+1),i=e.sequence||!1;return n.$hcDialog.simpleForm("编辑列表字段",[{key:"name",label:"字段名",component:"hc-input",options:{data_type:"string",readOnly:!0}},{key:"label",label:"别名",component:"hc-input"},{key:"width",label:"列宽",component:"hc-input",options:{tip:"单位: 像素",data_type:"integer",default:t}},{key:"sequence",label:"顺序",component:"hc-input",options:{data_type:"integer",default:i}},{key:"align",label:"水平位置",component:"hc-input-radio",options:{items_inline:!0,list:[{value:"center",name:"水平居中"},{value:"left",name:"水平居左"},{value:"right",name:"水平居右"}]}},{key:"format",label:"数据格式",component:"hc-input-radio",options:{items_inline:!0,hide:function(){var t;return!_()(t=["float","integer"]).call(t,e.data_type)},list:[{value:"origin",name:"原始值"},{value:"currency",name:"币值"}]}},{key:"decimal",label:"精度",component:"hc-input",options:{data_type:"number",hide:function(){var t;return!_()(t=["float","integer"]).call(t,e.data_type)}}}],e)}},n.alterPanelFunc.field),this.categoryFunc=angular.extend({sort:function(){var e,t=function(e){return n.$filter("indexOf")(n.meta_info.filters,e,"key","key")};d()(e=n.meta_info.categories).call(e,(function(e,n){return t(e)-t(n)}))}},n.alterPanelFunc.field),this.statisticFunc=angular.extend({fieldFromStatistic:function(){return n.meta_info.statistics},remove:function(e){var t;n.availableFieldsModel.statistics.keyword="",n.current_panel.model.keyword="",m()(t=n.meta_info.statistics).call(t,n.$filter("indexOf")(n.meta_info.statistics,e),1),n.addTreeField(e,"statistics"),n.refreshList()},edit:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t,i;return Object(O.e)(this,(function(o){switch(o.label){case 0:return e.name=e.label,[4,n.statisticFunc.setting(e)];case 1:return t=o.sent(),(i=n.$filter("toObj")(n.meta_info.statistics))[e.key]=t,n.meta_info.statistics=c()(i),n.current_panel.model.data=n.meta_info.statistics,n.refreshList(),[2]}}))}))},added_callback:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t;return Object(O.e)(this,(function(i){switch(i.label){case 0:return[4,n.statisticFunc.setting(e.model)];case 1:return t=i.sent(),n.meta_info.statistics.push(t),n.current_panel.model.data=n.meta_info.statistics,n.meta_info.statistics=n.setSequence(n.meta_info.statistics),n.refreshList(),[2]}}))}))},sorted_callback:function(e){n.meta_info.statistics=e.models,n.meta_info.statistics=n.setSequence(n.meta_info.statistics)},setting:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t,i,a;return Object(O.e)(this,(function(l){var r;switch(l.label){case 0:return e=angular.copy(e),t=e.key.split("__")[1]||e.key,i=angular.extend({label:e.label,name:e.name||e.label,field:t,sequence:e.sequence,type:e.type,data_type:e.data_type,category_key:e.category_key},{}),[4,n.$hcDialog.getDialog(T).params({data:i}).size("small").show()];case 1:return a=l.sent(),[2,angular.extend(angular.copy(o()(r=n.availableFields.statistics).call(r,(function(e){return e.key===t}))||{}),a)]}}))}))},copy:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t;return Object(O.e)(this,(function(i){switch(i.label){case 0:return[4,n.statisticFunc.setting(angular.copy(e))];case 1:return t=i.sent(),n.meta_info.statistics.push(t),n.current_panel.model.data=n.meta_info.statistics,n.refreshList(),[2]}}))}))}},n.alterPanelFunc.stat),this.sortFunc=angular.extend({remove:function(e){var t,i,o,a;n.availableFieldsModel.sorts.keyword="",n.current_panel.model.keyword="",m()(t=n.meta_info.sorts).call(t,n.$filter("indexOf")(n.meta_info.sorts,e),1),null===(o=null===(i=n.current_panel.model)||void 0===i?void 0:i.data)||void 0===o||m()(o).call(o,n.$filter("indexOf")(null===(a=n.current_panel.model)||void 0===a?void 0:a.data,e),1),n.addTreeField(e,"sorts"),n.refreshList()},edit:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t,i;return Object(O.e)(this,(function(o){switch(o.label){case 0:return e.name=e.label,[4,n.sortFunc.setting(e)];case 1:return t=o.sent(),(i=n.$filter("toObj")(n.meta_info.sorts))[e.key]=t,n.meta_info.sorts=c()(i),n.current_panel.model.data=n.meta_info.sorts,n.refreshList(),[2]}}))}))},added_callback:function(e){return Object(O.c)(this,void 0,void 0,(function(){var t;return Object(O.e)(this,(function(i){switch(i.label){case 0:return[4,n.sortFunc.setting(e.model)];case 1:return t=i.sent(),n.meta_info.sorts.push(t),n.current_panel.model.data=n.meta_info.sorts,n.meta_info.sorts=n.setSequence(n.meta_info.sorts),n.refreshList(),[2]}}))}))},sorted_callback:function(e){n.meta_info.sorts=e.models,n.meta_info.sorts=n.setSequence(n.meta_info.sorts)},setting:function(e){return e=angular.copy(e),n.$hcDialog.simpleForm("编辑排序字段",[{key:"name",label:"字段名",component:"hc-input",options:{data_type:"string",readOnly:!0}},{key:"type",label:"类型",component:"hc-input-radio",options:{items_inline:!0,default:"desc",list:[{value:"desc",name:"降序"},{value:"asc",name:"升序"}]}}],e)}},d()(n.alterPanelFunc)),this.PanelOperateList=angular.extend({filters:[{icon:"icon-hcm-trash",key:"remove",label:"删除过滤条件",func:this.filterFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑过滤字段",func:this.filterFunc.edit},{icon:"icon-hcm-view-list",key:"group",label:"是否分组",able:n.filterFunc.isGroup,func:n.filterFunc.group},{icon:"icon-hcm-pin",key:"require",label:"是否必填",able:function(e){var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.required},func:this.filterFunc.require}],fields:[{icon:"icon-hcm-trash",key:"remove",label:"删除展示字段",func:this.fieldFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑列表字段",func:this.fieldFunc.edit},{icon:"icon-hcm-pin",key:"fixed",label:"固定列表字段",able:this.fieldFunc.isFixed,func:this.fieldFunc.fixed}],statistics:[{icon:"icon-hcm-trash",key:"remove",label:"删除统计字段",func:this.statisticFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑统计字段",func:this.statisticFunc.edit},{icon:"icon-hcm-copy",key:"copy",label:"复制",func:n.statisticFunc.copy}],sorts:[{icon:"icon-hcm-trash",key:"remove",label:"删除排序字段",func:this.sortFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑排序字段",func:this.sortFunc.edit}],categories:[{icon:"icon-hcm-trash",key:"remove",label:"删除过滤条件",func:this.categoryFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑过滤字段",func:this.categoryFunc.edit}]},this.alterPanelOperateList),$()(e=h()(this.PanelOperateList)).call(e,(function(e){var i;t.PanelOperateList[e]=l()(i=t.PanelOperateList[e]).call(i,(function(e){var t;return!n.params.operate_key_list||_()(t=n.params.operate_key_list).call(t,e.key)}))}))},e.prototype.initSettingPanel=function(){var e,t,n,i,a,r=this;this.setting_panel=[{label:"筛选",key:"filters",biz_type:"filter",model:"filters_field_model",meta:{data:this.meta_info.filters,operate_list:this.PanelOperateList.filters,added_callback:this.filterFunc.added_callback,sorted_callback:this.filterFunc.sorted_callback}},{label:"列表",key:"fields",biz_type:"list",model:"fields_field_model",meta:{data:null===(n=this.meta_info)||void 0===n?void 0:n.fields,operate_list:this.PanelOperateList.fields,added_callback:this.fieldFunc.added_callback,sorted_callback:this.fieldFunc.sorted_callback}},{label:"分组",key:"categories",biz_type:"cate",model:"categories_field_model",meta:{data:this.meta_info.categories,operate_list:this.PanelOperateList.categories,added_callback:this.categoryFunc.added_callback,sorted_callback:this.categoryFunc.sorted_callback}},{label:"统计",key:"statistics",biz_type:"stat",model:"statistics_field_model",meta:{data:this.statisticFunc.fieldFromStatistic(),operate_list:this.PanelOperateList.statistics,added_callback:this.statisticFunc.added_callback,sorted_callback:this.statisticFunc.sorted_callback}},{label:"排序",key:"sorts",biz_type:"sort",model:"sorts_field_model",meta:{data:null===(i=this.meta_info)||void 0===i?void 0:i.sorts,operate_list:this.PanelOperateList.sorts,added_callback:this.sortFunc.added_callback,sorted_callback:this.sortFunc.sorted_callback}},{label:"多表头",key:"column_defs",biz_type:"column_def",model:"column_defs_model",meta:{data:null===(a=this.meta_info)||void 0===a?void 0:a.sorts,operate_list:[{icon:"icon-hcm-trash",key:"remove",label:"删除排序字段",func:this.sortFunc.remove},{icon:"icon-hcm-edit",key:"edit",label:"编辑排序字段",func:this.sortFunc.edit}],added_callback:this.sortFunc.added_callback,sorted_callback:this.sortFunc.sorted_callback}}],r.tabOptions={icon:"icon-hcm-arrow-down-solid",no_delete:!0,default:"filters",list:l()(e=[{id:"fields",name:"列表"},{id:"filters",name:"筛选"},{id:"categories",name:"分组"},{id:"statistics",name:"统计"},{id:"sorts",name:"排序"}]).call(e,(function(e){var t;return _()(t=r.params.available_tabs).call(t,e.id)})),change:function(e,t){var n;r.selectPanel(o()(n=r.setting_panel).call(n,(function(e){return e.key===t})))}},this.operate_list=this.operate_list,this.setting_operate_list=this.setting_operate_list,this.dataset_tab={hide:!1},$()(t=this.setting_panel).call(t,(function(e){var t;_()(t=r.params.available_tabs).call(t,e.key)&&(e.model=r.$hcQueryField.createQueryField(e.meta),"list"===e.biz_type&&r.fieldFunc.fixedSort(e))}))},e.prototype.selectPanel=function(e){this.current_panel=angular.copy(e),this.current_panel.model.data=this.meta_info[this.current_panel.key]||[]},e.prototype.arrayMerge=function(e,t){var n;switch(e){case"stat":n=$()(t).call(t,(function(e){return{key:e.key+"_sum",type:"sum",data_type:e.data_type,field:e.key,label:e.label,decimal:2}}));break;case"sort":n=$()(t).call(t,(function(e){return{key:e.key,label:e.label,type:"desc"}}));break;default:n=angular.copy(t)}this.current_panel.model.data=this.$filter("arrayMerge")(this.current_panel.model.data,n)},e.prototype.arrayBatchRemove=function(e,t){var n;switch(e){case"stat":n="field";break;case"filter":n="key";break;default:n="key"}this.current_panel.model.data=this.$filter("arrayBatchRemove")(this.current_panel.model.data,t,n)},e.prototype.refreshLocal=function(e){switch(e){case"filter":this.filterFunc.groupSort(this.current_panel),this.initQuery();break;case"list":this.fieldFunc.fixedSort(this.current_panel),this.refreshList();break;default:this.availableFieldsModel.$parseFields(e),this.refreshList()}},e.prototype.getService=function(e){return this.$scope.params.CRUDService},e.prototype.init=function(){},e.$inject=["$scope","$rootScope","$controller","$q","BaseCRUDService","CompanyMetaService","$hcDataset","$hcQueryField","$filter","$hcDialog","columnDefsService"],e}();D.a.controller("metaVisualizationInfo",W)},OsCo:function(e,t){e.exports='<div class=\'hc-dialog-mask\'></div>\n<div class=\'hc-dialog-window\'>\n    <div class=\'hc-dialog-content\' \n        ng-style="$ctrl.model.scope.params.style"\n        ng-bind-html="$ctrl.model.scope.params.content"></div>\n    <footer>\n        <div class="pop-menu-item"\n             ng-repeat="_btn in $ctrl.model.scope.params.options"\n             ng-class="{\'default\': _btn.default || _btn.is_important}"\n             ng-click="$ctrl.model.scope.select(_btn)">\n            <div ng-bind="_btn.caption"></div>\n        </div>\n        <div class="pop-menu-item" \n        ng-click="$ctrl.model.scope.cancel()"\n        ng-hide="$ctrl.model.scope.params.hideCannel">\n            <div class="cancel">{{\'Cancel\'|translate}}</div>\n        </div>\n    </footer>\n</div>\n'},OsKP:function(e,t){e.exports='<div class="list-next" ng-click="listController.next(\'\',reverse)">\n    {{getTips()}}\n</div>\n'},OxRh:function(e,t){e.exports='<div class="hc-personnel-state-card">\n    <div class="info-photo-box" ng-click="$ctrl.data.imgFunc()">\n        <img ng-if="$ctrl.data.photo" class="info-photo {{$ctrl.data.class.photo}}" ng-src="{{ $ctrl.data.photo|hcPhoto:64 }}" alt="">\n    </div>\n    <div class="info-content-box">\n        <div class="flexbox">\n            <div class="page-title {{ $ctrl.data.class.title }}">{{ $ctrl.data.description || $ctrl.data.name }}</div>\n            <div ng-if="$ctrl.data.status && $ctrl.client!==\'mobile\'" class="info-status {{$ctrl.data.class.status}}">\n                {{$ctrl.data.status}}</div>\n        </div>\n        <div class="name {{$ctrl.data.class.name}}">{{$ctrl.data.name}}</div>\n    </div>\n    <div ng-if="$ctrl.data.status && $ctrl.client===\'mobile\'" class="info-status {{$ctrl.data.class.status}}">\n        {{$ctrl.data.status}}\n    </div>\n</div>'},Ozbz:function(e,t){e.exports='<div class="hc-count-component">\n    <div class="count-only">\n        <div class="total-count">\n            {{$ctrl.count}}\n        </div>\n        <div class="name">{{$ctrl.options.label}}</div>\n    </div>\n</div>'},P1gZ:function(e,t){e.exports='\x3c!--上传文件--\x3e\n<div class="hc-upload-file" ng-init="init()">\n    \x3c!--选择文件阶段--\x3e\n    <div class="upload" ng-show="process==\'selectFile\'">\n        <div class="upload_tip" ng-if="!camera"\n             ngf-multiple="params.multiple" ngf-drop ngf-select\n             ngf-capture="other" ngf-accept="accept"\n             ngf-change="uploadFiles($files,$file)">\n            <div class="icon icon-hcm-upload"></div>\n            <div class="content">{{ \'upload_content\' | translate}}</div>\n            <div class="support">{{ upload_desc }}</div>\n        </div>\n        <div class="upload_tip" ng-if="camera"\n             ngf-multiple="params.multiple" ngf-drop ngf-select\n             ngf-capture="capture" ngf-accept="accept"\n             ngf-change="uploadFiles($files,$file)">\n            <div class="icon icon-hcm-upload"></div>\n            <div class="content">{{ \'upload_content\' | translate}}</div>\n            <div class="support">{{ upload_desc }}</div>\n        </div>\n    </div>\n\n    \x3c!--上传文件阶段--\x3e\n    <div class="load-bar" ng-if="process==\'upload\'">\n        <div class="file-name">{{ file_name }}</div>\n        <div class="progress-bar">\n            <div class="total">\n                <div class="progress" ng-style="{\'width\':file_progress+\'%\'}"></div>\n            </div>\n        </div>\n\n        <div class="number">{{ file_progress }}%</div>\n    </div>\n\n    \x3c!--上传反馈结果阶段--\x3e\n    <div class="upload-state" ng-if="process==\'uploadState\'">\n        <div class="success" ng-if="upload_status">\n            <div class="icon icon-hcm-info-succeed"></div>\n            <div class="desc">{{ file_name }} {{\'upload_success\' | translate}}</div>\n        </div>\n        <div class="fail" ng-if="!upload_status">\n            <div class="icon icon-hcm-info-error"></div>\n            <div class="desc">{{ file_name }} {{\'upload_failed\' | translate}}</div>\n            <div class="desc" ng-show="errorMsg">{{ errorMsg }}</div>\n        </div>\n    </div>\n\n    <div class="btn-box">\n        <div class="btn" ng-click="close()">{{ \'back\' | translate}}</div>\n        <div class="btn" ng-click="init(true)" ng-if="process==\'uploadState\' && !upload_status">{{ \'perf_re_upload\' | translate}}</div>\n    </div>\n</div>\n'},P6UW:function(e){e.exports=JSON.parse('{"tip":"概念说明:\\n内连接: 取出两张表中匹配的数据, 不匹配的不保留\\n左外连接: 取出连接表中匹配的数据, 不匹配的也会保留, 值为空","fields":[{"key":"model","label":"模型选择","component":"hc-super-selector","options":{"required":true,"singleLine":false,"placeholder":"请选择对象","selectorObject":"hcm.db.object","returnFormat":"name","individual_name":"name_description"}},{"key":"key","label":"模型标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入模型标识","tip":"同一数据集可能被关联多次, 如: 同比环比分析","required":true}},{"key":"name","label":"模型名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入模型名称","required":true}},{"key":"type","label":"连接方式","component":"hc-input-radio","options":{"items_inline":true,"singleLine":false,"default":"inner","width":"col-12","required":true,"list":[{"value":"inner","name":"内连接"},{"value":"outer","name":"外连接"}]}},{"key":"relation_mode","label":"关联优化模式","component":"hc-input","options":{"singleLine":false,"width":"col-12","hide":true,"placeholder":"请输入关联优化模式","required":false,"tip":"        主模型：\\n        least_relation 最少连接,\\n        force_not_used_table 强制去掉所有没有使用的表,\\n        least_relation_all  连count中没用的左关联表也去掉\\n        least_relation_all_root_filter  连count中没用的左关联表也去掉,组织树根节点过滤时不过滤\\n        least_relation_all_root_filter_sort  连count中没用的左关联表也去掉,组织树根节点过滤时不过滤,根组织列表不排序\\n        manual  手动处理，如果relation 里面的有 ondemand 按需关联，如果没有的直接关联\\n        关联模型：\\n        1 表示outer join 表不使用时可以优化掉"}},{"key":"ondemand","label":"关联优化模式2","component":"hc-super-selector","options":{"singleLine":false,"width":"col-12","placeholder":"请输入关联优化模式","required":false,"data_type":"integer","list":[{"id":1,"name":"①外关联表不使用时优化"},{"id":2,"name":"②获取count时过滤掉外关联"}],"tip":"1:表示outer join 表不使用时可以优化掉\\n2:表明count时如果没有使用到该表，也会过滤掉,2兼容1"}},{"component":"hc-input-switch","key":"field_context.is_relative_level","dataPath":["field_context","is_relative_level"],"label":"是否相对层级","options":{"singleLine":true}},{"key":"field_context.root_id","dataPath":["field_context","root_id"],"label":"参照组织","component":"hc-input-script","options":{"singleLine":true,"width":"col-12","placeholder":"请选择参照组织"}},{"key":"field_context.date_","dataPath":["field_context","date_"],"label":"参照日期","component":"hc-input-script","options":{"singleLine":true,"width":"col-12","placeholder":"请选择参照日期"}}]}')},P8zp:function(e,t){e.exports='<div class="component-container" ng-init="hover=false" ng-click="$ctrl.onClick($event)" ng-mouseover="hover=true"\n    ng-mouseleave="hover=false">\n    <div class=\'component-input-inner\'\n        ng-bind-html=\'$ctrl.model?$ctrl.valueMask($ctrl.model):(($ctrl.options.readOnly|valueToFunc)()?"":$ctrl.options.placeholder)\'\n        ng-class=\'{placeholder:!$ctrl.model}\' ng-disabled=\'($ctrl.options.readOnly|valueToFunc)()\'\n    ></div>\n    <div ng-show="!($ctrl.options.readOnly|valueToFunc)()"\n        ng-click="([null,undefined].includes($ctrl.model)||options.no_delete)? $ctrl.onClick($event) : $ctrl.del($event)"\n        class="input-icon" ng-class="(![null,undefined].includes($ctrl.model) && hover && !$ctrl.options.no_delete && $ctrl.client===\'pc\')\n                        ?\'icon-hcm-delete\'\n                        : $ctrl.options.icon\n                            ?$ctrl.options.icon\n                            :$ctrl.client===\'pc\'\n                                ?\'icon-hcm-screening\'\n                                :\'icon-hcm-arrow-right\'">\n    </div>\n</div>\n'},PFeH:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));n("sMBO"),n("rB9j"),n("EnZy");var i=n("526F"),o=n.n(i),a=n("UtpJ"),l=n.n(a),r=n("o+MX"),c=n.n(r),s=n("WxoT"),d=n.n(s),u=n("FLGM"),_=n.n(u),p=n("eLKs"),m=n.n(p),f=n("5PDf"),h=n.n(f),g=n("OBge"),v=n.n(g),b=n("mrSG"),y=n("/PXk"),w=n("EUDf"),x=n("1GJp"),k=n("8Auy"),$=function(e){function t(t,n,i,o,a,l,r,c){var s=e.call(this,t,n,i,o,c)||this;return s.scope=t,s.rootScope=n,s.hcDialog=i,s.hcForm=o,s.dataService=a,s.dataBlockService=l,s.metaVisService=r,s.$filter=c,s}return Object(b.d)(t,e),t.prototype.getMeta=function(){return Object(b.c)(this,void 0,v.a,(function(){var e,t,n=this;return Object(b.e)(this,(function(i){var o,a;(e=this,(t=k.a.jsonEval(h()(o=this.info_meta.fields).call(o,(function(t){return!e.options.mode||t.mode===e.options.mode})),{scope:this.scope,$ctrl:this})).getKey("filter_dict"))&&(t.getKey("filter_dict").options.computeService={getFieldList:m()(a=this.getFilterDictParamRefer).call(a,this),domain:"base.report"},t.getKey("filter_dict").options.alter_operates=[{label:"生成默认条件",func:function(e){return Object(b.c)(n,void 0,void 0,(function(){var t,n;return Object(b.e)(this,(function(i){switch(i.label){case 0:return t={},[4,this.dataBlockService.getListMeta(this.form_model.data)];case 1:var o;if(n=i.sent())_()(o=n.static_filters||[]).call(o,(function(e){t[e.key]=""}));return e.compute_form.field_metas.content.options.setBeautyValue(d()(t)),[2]}}))}))}}]);return[2,t]}))}))},t.prototype.initForm=function(){var t;return Object(b.c)(this,void 0,v.a,(function(){var n;return Object(b.e)(this,(function(i){switch(i.label){case 0:return n=this,[4,e.prototype.initForm.call(this)];case 1:var o;if(i.sent(),null===(t=this.info_meta)||void 0===t?void 0:t.groups)this.form_model.$setGroups(h()(o=this.info_meta.groups).call(o,(function(e){return!n.options.mode||e.mode===n.options.mode})));return[2]}}))}))},t.prototype.initOptions=function(){var t;return Object(b.c)(this,void 0,v.a,(function(){return Object(b.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initOptions.call(this)];case 1:return n.sent(),(null===(t=this.info_meta)||void 0===t?void 0:t.tip)&&(this.options.tip=this.info_meta.tip),[2]}}))}))},t.prototype.getData=function(){return Object(b.c)(this,void 0,void 0,(function(){var t;return Object(b.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.getData.call(this)];case 1:return(t=n.sent()).class=this.data_class,[2,t]}}))}))},t.prototype.getAlterOperator=function(){return Object(b.c)(this,void 0,v.a,(function(){return Object(b.e)(this,(function(e){var t,n;return[2,[{label:"高级",func:m()(t=this.advanceEdit).call(t,this),left:!0},{label:"预览",func:m()(n=this.previewData).call(n,this),left:!0,hide:this.scope.params.options.hide_preview}]]}))}))},t.prototype.getFilterDictParamRefer=function(){return Object(b.c)(this,void 0,void 0,(function(){var e,t,n,i,o,a=this;return Object(b.e)(this,(function(l){switch(l.label){case 0:var r;if(e=[],this.options.context)e.push({key:"context_params",name:"上下文参数",list_fields:_()(r=this.options.context).call(r,(function(e){return{name:e.label,category:"上下文参数",key:e.key,type:"var"}}))});return[4,this.dataBlockService.getListMeta(this.form_model.data)];case 1:return(t=l.sent())?(i=(n=this.metaVisService).getModelRelationGroupFields,[4,this.metaVisService.meta2VisMeta(t)]):[3,4];case 2:return[4,i.apply(n,[l.sent().model_relation])];case 3:var s;if(o=l.sent(),t.static_filters&&t.static_filters.length>0)e.push({key:"static_params",name:"数据块参数",list_fields:_()(s=t.static_filters).call(s,(function(e){return{name:e.label,category:"数据块参数",key:e.key,type:"var"}}))});e=c()(e).call(e,o),l.label=4;case 4:return this.form_model.data.page_count||!this.options.index_block?[3,6]:[4,this.dataBlockService.getAvailFields(this.options.index_block)];case 5:o=l.sent(),e.push({key:"index_block",name:"索引块字段参照",list_fields:_()(o).call(o,(function(e){return{name:e.label,category:"索引块字段参照",key:"LIST_GET("+a.options.index_block.key+",'"+e.value+"')",type:"var"}}))}),l.label=6;case 6:return[2,e]}}))}))},t.prototype.getModelStateList=function(e,t){return Object(b.c)(this,void 0,v.a,(function(){var n;return Object(b.e)(this,(function(i){var o;switch(i.label){case 0:return e?[4,this.dataService.callHcmOpenApi("hcm.paas.object.layout.list?category="+encodeURIComponent(e),{biz_type:"list",filter_dict:{model:e,biz_type:"list"},filter_str:t})]:[2,[]];case 1:return n=i.sent(),[2,_()(o=n.list).call(o,(function(e){var t=e.name.split(".");return t.length>=5?{id:l()(t).call(t,-2)[0],name:l()(t).call(t,-2)[0]}:{id:null,name:"默认"}}))]}}))}))},t.prototype.advanceEdit=function(){var e=this;this.hcDialog.getDialog(x.a).show({readOnly:!1,data:d()(this.form_model.data)}).then((function(t){o()(e.form_model.data,JSON.parse(t))}))},t.prototype.previewData=function(){var e,t,n,i,o,a=this;function l(e){a.hcDialog.getDialog(w.a).params({block_info:a.form_model.data,filter_dict:e}).show()}if((null===(t=this.scope.params.options.context)||void 0===t?void 0:t.length)>0&&h()(e=this.scope.params.options.context).call(e,(function(e){return e.component})).length>0){var r=k.a.jsonEval(angular.copy(this.scope.params.options.context),{$FILTER:this.$filter,$FILTER_DATA:{CURR_MONTH:(n=new Date,i=n.getFullYear(),o=n.getMonth(),i+"-"+(o>=10?""+o:"0"+o))}});this.hcDialog.simpleForm("请输入参数",r,{}).then((function(e){l(e)}))}else l({})},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","dataBlockService","metaVisService","$filter"],t}(y.a)},PX3v:function(e,t,n){"use strict";var i=n("zLi2"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("KYsz"),c=n.n(r),s=n("0lTi"),d=n.n(s),u=n("Vi3r"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("BF1V"),h=n.n(f),g=n("UtpJ"),v=n.n(g),b=n("q92V"),y=n.n(b),w=n("AE40"),x=n.n(w),k=n("ftYD"),$=n.n(k),O=n("0YDr"),D=n.n(O),C=n("CoJ3"),M=n("uuav"),S=(n("srGB"),n("yZ58")),E=n.n(S);C.a.controller("SelectedInfo",["$controller","BaseCRUDService","$scope","$filter",function(e,t,n,i){n.model=n.params.model;var a=t.getModelService(n.params.alter.model,n.params.alter.state);e(M.a,{$scope:n,CRUDService:a,InfoDialog:a}),n.initBefore=function(){n.list_meta=n.params.alter.meta,n.stat_meta=n.params.alter.stat_meta},n.initAfter=function(){n.list_model.$setRowSelector(2).$setDisabledCellClick(!0),n.stat_meta&&n.list_model.$setStatMeta(n.stat_meta),n.list_btn_model.actions=[{label:"删除",func:n.delete,condition:"MULTI_ITEM",action:"C_ACTION",command:"delete"},{label:"返回",func:n.close,action:"C_ACTION",command:"close",left:!0}]},n.getMetaState=function(){return n.params.alter.state},n.fetchData=function(){var e=n.params.data,t=(n.paging.current_page-1)*n.paging.page_size,i=n.paging.current_page*n.paging.page_size>e.length?e.length:n.paging.current_page*n.paging.page_size;n.list_model.$setData(v()(e).call(e,t,i)),n.stat_meta&&(n.stat_data=n.generateStatData(),n.list_model.$setStat(n.stat_data)),n.paging.total_count=e.length,n.list_model.current_page=n.paging.current_page,n.list_model.page_size=n.paging.page_size},n.defaultAction=function(){return null},n.delete=function(e){var t,i=new h.a(n.params.data),o=new h.a(e),a=new h.a(m()(t=_()(i)).call(t,(function(e){return!o.has(e)}))),l=d()(a);n.params.data=l,n.fetchData()},n.close=n.$dialog.close=function(){n.$dialog.resolve_data(n.params.data),n.$dialog.dialog_close()},n.generateStatData=function(){var e,t,a={count:function(e){return e.length||0},sum:function(e){return D()(e)},avg:function(e){return e.length&&$()(D()(e),e.length)},min:function(e){return x()(e)},max:function(e){return y()(e)}};return[c()(e=l()(t=n.stat_meta).call(t,(function(e){var t;return[e.key,a[e.type](l()(t=n.params.data).call(t,(function(t){return i("hcListCellData")(t,n.list_model.columns_metas[e.key])})))]}))).call(e,(function(e,t){var n=o()(t,2),i=n[0],a=n[1];return e[i]=a,e}),{})]}}]),t.a={controller:"SelectedInfo",template:E.a,title:"已选择人员"}},Pfpq:function(e,t){e.exports='<style type="text/css">\n    .file-msg-block {\n        position: fixed;\n        top: 100px;\n        width: 100%;\n        z-index: 100001;\n    }\n\n    .file-msg {\n        background: rgba(0, 0, 0, 0.7);\n        color: #fff;\n        text-align: center;\n        width: 200px;\n        margin: auto;\n        border-radius: 4px;\n        padding-top: 20px;\n        padding-bottom: 20px;\n    }\n\n    .file-msg .msg-logo {\n        font-size: 30px;\n\n    }\n\n    .file-msg .text {\n        font-size: 14px;\n        line-height: 20px;\n        padding-top: 10px;\n        padding-left: 10px;\n        padding-right: 10px;\n    }\n\n</style>\n\n\n<div class="file-msg-block">\n    <div class="file-msg">\n        <div class="msg-logo {{logo}}"></div>\n        <div class="text">{{text}}</div>\n    </div>\n</div>\n\n'},PogQ:function(e,t){e.exports='<div class="hc-steps">\n    <div class="hc-steps-container" ng-class="{\n        \'vertical\': $ctrl.model.direction === \'vertical\', \n        \'steps\': $ctrl.model.type !== \'navigate\',\n        \'navigate\': $ctrl.model.type === \'navigate\', \n        \'small\': $ctrl.model.size === \'small\'}" ng-style="{\'justify-content\': $ctrl._panes_overflow ? \'flex-start\' : \'center\'}">\n        <hc-step class="{{$ctrl.model.getStatusClass(step, $index)}}"\n            vertical="$ctrl.model.direction === \'vertical\'"\n            ng-style="{ \'minWidth\': \'{{($ctrl.step_max_width || 20) - 1}}%\'}"\n            ng-repeat="step in $ctrl.model.meta track by step.key" index="$index" title="{{step.title || step.label}}"\n            step-key="{{step.key}}" step-title="{{step.title || step.label}}" sub-title="{{step.subTitle}}" step-attachment="{{step.step_attachment}}"\n            icon="{{step.icon}}" status="$ctrl.model.getStatus(step, $index)" description="{{step.description}}"\n            progress-dot="$ctrl.model.progressDot"\n            ng-click="$ctrl.stepClick($index, step, $event)"></hc-step>\n    </div>\n    <div class="hc-steps-toolbox">\n        <div class="hc-steps-toolbox-container">\n            <button class="show-more" ng-if="$ctrl._panes_overflow" ng-click="$ctrl.showDropDownListDialog($event)">\n                <label>更多</label><span class="icon-hcm-arrow-down-solid"></span>\n            </button>\n            <div class="hc-steps-transclude" ng-transclude></div>\n        </div>\n    </div>\n</div>\n'},PxAj:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).stat_list,o=i.$each,a=(e.col,e.$index,e.cols);return n&&(t+="\n",o(n,(function(e,n){t+='\n<div class="table-footer-cell ',t+=i.getStatClass(e,a),t+='"\n     style="',t+=i.getStatStyle(e,a),t+='" col-key=',t+=e.key,t+=">\n     ",null!==e.value&&(t+="\n          <span>",t+=e.value,t+="</span>\n     "),t+="\n    </div>\n</div>\n"})),t+="\n"),t+="\n"}},Q0us:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("JfAA");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("RXMP"),d=n.n(s),u=n("fHi0"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("OWCx"),h=n.n(f),g=n("+oHS"),v=n.n(g),b=n("6UaR"),y=n.n(b),w=n("04Ix"),x=n.n(w),k=n("Vi3r"),$=n.n(k),O=n("FLGM"),D=n.n(O),C=n("mnMc"),M=n.n(C),S=n("BkRI"),E=n.n(S),P=n("DKEN"),j=n("Hu0P"),T=(n("dCxg"),n("fWcg"),n("yM22"));function A(e,t){var n=v()(e);if(h.a){var i=h()(e);t&&(i=m()(i).call(i,(function(t){return _()(e,t).enumerable}))),n.push.apply(n,i)}return n}var I=["BaseEmployee","BaseDepartment","Employee","Department","OrgDepartment","OrgPosition","EmployeeCategory","PositionStatus","JobStep","JobGrade","JobType","OrgUnit"];window.app.controller("commonSelectorCtrl",["$controller","dataService","BaseCRUDService","$scope","$hcDialog","commonSelectorService","$filter",function(e,t,n,i,a,r,s){i.client=window.client,i.getService=function(e){i._service=e?n.getModelService(e,{waiting:!1}):n.getBaseService(i.options.selectorObject,{waiting:!1})},i.getService(i.options.selectorModel||i.options.model),i.options.selectorMapper||(i.cacheSelectorMapper=M()(I).call(I,i.options.selectorModel||i.options.model),i.options.selectorMapper=2===i.options.selectorType||i.options.multi?i._service.getItemList:i._service.getItemInfo),i.$watch("model",(function(e,t){var n;if(t&&!e&&(i.model=e,i.selector_label=null),!e||"string"==typeof e&&""===e)return i.options.originObject=null,void(null===(n=i.originObjectChangeAfter)||void 0===n||n.call(i));2===i.options.selectorType||i.options.multi?i.multiMapSelector(t):i.mapSelector(t)}),!0),i.openPanel=function(e,t){var n,o;a.getDialog(e).title(i.options.title||e.title||"选择器").size(null!=t?t:"pc"===window.client?"large":(o=i.options.list,(i.options.inDrawer?"middle":o&&(null==o?void 0:o.length)<6?"bottom-dialog-50":"bottom-dialog-90")||"bottom-dialog-90")).slideInConfig("pc"!==window.client&&i.options.inDrawer?"right":null).show(angular.extend({},i.options,{type:"system"},null===(n=i.getDialogParams)||void 0===n?void 0:n.call(i))).then((function(e){var t,n=function(e,t){return null==t?e.id:"object"===t?e:e[t]},o=i.parseSelectedData(e);if(i.options.originObject=o,null===(t=i.originObjectChangeAfter)||void 0===t||t.call(i),angular.extend(i.options,e.extra_property),2===i.options.selectorType){var a=D()(o).call(o,(function(e){return n(e,i.options.returnFormat)}));i.model=a.length?a:null}else i.model=n(o,i.options.returnFormat);i.options.assignment&&i.options.assignment(i,i.model,o)}))},i.parseSelectedData=function(e){return e.selected_info},i.onClick=function(e){var t;if(e&&e.stopPropagation(),!i.options||!s("valueToFunc")(i.options.readOnly)()){var n={common:P.a,org:j.a},o=i.getPanel()||n[i.options.tree_type||"org"],a=i.options.size;M()(t=["Employee","PreEmployee"]).call(t,i.options.selectorModel)&&(i.options.filter_dict||{}).action?r.moveEmpLimit({number:i.options.filter_dict.action}).then((function(e){i.options.filter_dict["job_info.position_status_id"]=e.in_positionstatus,i.options.filter_dict["job_info.employee_category_id"]=e.in_employeecategory,delete i.options.filter_dict.action,i.openPanel(o,a)})):i.openPanel(o,a)}},i.getPanel=function(){return null},i.getDialogParams=function(){return{}},i.fetch={getting:!1,waiting:!1},i.getMapperParams=function(){return angular.isObject(i.model)&&i.options.view_format?[i.model[i.options.view_format]]:i.options.effect_date?[i.model,null,{date_:s("valueToFunc")(i.options.effect_date)()},null,i.cacheSelectorMapper?"session,0.5":void 0]:[i.model,void 0,{},null,i.cacheSelectorMapper?"session,0.5":void 0]},i.mapSelector=function(e){var t;i.fetch.getting?i.fetch.waiting=!0:(i.fetch.getting=!0,i.options.returnFormat&&"id"!==i.options.returnFormat?"object"===i.options.returnFormat?(i.fetch.getting=!1,i.selector_label="name"in i.model?i.model.name:i.model,i.options.change&&i.options.change(i,i.model,e)):(i.fetch.getting=!1,i.selector_label=i.model,i.options.change&&i.options.change(i,i.model,e)):(t=i.options).selectorMapper.apply(t,$()(i.getMapperParams())).then((function(t){var n;if(i.options.originObject=t,null===(n=i.originObjectChangeAfter)||void 0===n||n.call(i),i.options.change&&i.options.change(i,i.model,t,e),t)if(angular.isFunction(i.options.individual_name))i.model&&(i.selector_label=i.options.individual_name(t));else{var o=i.options.individual_name||"name";i.model&&(i.selector_label=o in t?t[o]:t)}})).finally((function(){i.fetch.getting=!1,i.fetch.waiting&&(i.mapSelector(),i.fetch.waiting=!1)})))},i.multiMapSelector=function(e){var t,n;if(i.fetch.getting)i.fetch.waiting=!0;else{i.fetch.getting=!0;var a=function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)d()(n=A(Object(i),!0)).call(n,(function(t){x()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;d()(a=A(Object(i))).call(a,(function(t){o()(e,t,_()(i,t))}))}}return e}({date_:s("valueToFunc")(i.options.effect_date)()},s("valueToFunc")(i.options.selectorFilter)()),r={role:"all"};switch(r.state=null!==(t=i.options.state)&&void 0!==t?t:null,i.options.returnFormat){case"name":a.name=i.model;break;case"object":a.id=D()(n=i.model).call(n,(function(e){return e.id}));break;default:a.id=i.model}i.options.selectorMapper(null,a,1,1e3,r).then((function(t){var n,o,a=s("arrayRemoveDuplicate")(t.list,"id"),l=[];y()(i.model)?D()(o=i.model).call(o,(function(e){D()(a).call(a,(function(t){"name"===i.options.returnFormat?t.name===e&&l.push(t):"object"===i.options.returnFormat?t.id===e.id&&l.push(t):t.id===e&&l.push(t)}))})):l=a;i.originObject=i.options.originObject=l,null===(n=i.originObjectChangeAfter)||void 0===n||n.call(i),i.options.change&&i.options.change(i,i.model,t,e),t&&(i.selector_label=[],D()(l).call(l,(function(e){var t;t=y()(i.options.individual_name)?Object(T.a)(i.options.individual_name,e):e[i.options.individual_name||"name"],i.selector_label.push(t)})),i.selector_label=i.selector_label.toString())})).finally((function(){i.fetch.getting=!1,i.fetch.waiting&&(i.multiMapSelector(),i.fetch.waiting=!1)}))}},i.del=function(e){var t;e&&e.stopPropagation();var n=E()(i.model);i.model=null,i.selector_label=null,i.options.originObject=null,null===(t=i.originObjectChangeAfter)||void 0===t||t.call(i),i.options.change&&i.options.change(i,i.model,n)}}]),t.b="commonSelectorCtrl"},Q8xb:function(e,t){e.exports='<div class="model-list-style">\n    <div class="hcm-nav-content">\n        <div class="hcm-left-content">\n            <div class="hcm-nav full-height">\n                <div class="hcm-nav-fixed">\n                    <p class="advance-title">{{\'common_advance_panel_setting_dialog_subtitle\'|translate}}</p>  \x3c!--字段选择--\x3e\n                    <div>\n                        <hc-dataset model="dataset[\'info\']"></hc-dataset>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="hcm-content flex">\n            <div class="hcm-content-indicator operate-banner flex">\n                <div class="flex-1">\n                </div>\n            </div>\n            <div class="hcm-hc-list-container">\n                <div data-ng-sortable="sortable_config" class="form-content">\n                    <div class="node-field" data-ng-repeat="field in selected_items track by field.key + field.uniKey">\n                        <div class="order"><span>{{ $index + 1 }}</span></div>\n                        <query-field-form ng-model="fieldInfoModel[$index]" options="field" condition-required="params.condition_required" child-include="params.child_include"></query-field-form>\n                        <div class="icon-container">\n                            <div hc-title="{{\'common_advance_panel_setting_dialog_delete_tip\'|translate}}" options="{mode: \'tip\'}" class="icon icon-hcm-delete" ng-click="$ctrl.del($event, $index)"></div> \x3c!--删除会重置条件组合--\x3e\n                        </div>\n                    </div>\n                </div>\n\n                <hc-list-no-data class="" ng-if="selected_items.length===0"\n                        caption={{\'common_advance_panel_setting_dialog_no_data\'|translate}}></hc-list-no-data>  \x3c!--请点击左侧字段可添加查询条件到此处--\x3e\n                \n                <div class="formula-combine" ng-class="{\'readOnly\': selected_items.length === 0}" ng-show="selected_items.length > 0">\n                    <strong class="simple-formular" ng-show="$ctrl.formulaModel && mode === \'simple\'">{{\'common_advance_panel_setting_dialog_current_combination\'|translate}}: {{$ctrl.formulaModel}}</strong> \x3c!--当前条件组合--\x3e\n                    <span class="mode-tip" ng-click="$ctrl.swithMode($event)" ng-show="mode === \'simple\'">{{\'common_advance_panel_setting_dialog_not_satisfy\'|translate}}&gt;</span>  \x3c!--组合不满足？切换为进阶模式--\x3e\n                    <hc-text-area ng-model="$ctrl.formulaModel" options="$ctrl.formulaOptions" ng-show="mode !== \'simple\'"></hc-text-area>\n                    <span class="tip" hc-title="{{\'common_advance_panel_setting_dialog_how_to_use_tips\'|translate}}" options="{mode: \'tip\'}" ng-show="mode !== \'simple\'">\n                        <span class="icon icon-hcm-info-normal"></span>\n                        <span class="tip-label">{{\'common_advance_panel_setting_dialog_how_to_use\'|translate}}</span>  \x3c!--如何应用\'且\',\'或\'等语法?--\x3e\n                    </span>\n                    <span class="mode-tip" ng-click="$ctrl.swithMode($event)" ng-show="mode !== \'simple\'">{{\'common_advance_panel_setting_dialog_minimalist_mode\'|translate}}&gt;</span>  \x3c!--切换回简约模式--\x3e\n                </div>\n\n            </div>\n        </div>\n    </div>\n</div>\n'},QGj9:function(e,t){e.exports='<style>\n    .location-map {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        background-color: #fff;\n    }\n\n</style>\n<div class="location-map"  ng-init="init()">\n    <locationm-map-component zoom="map.zoom" geo="map.geo" center="map.center" markers="map.markers" mapcontroller="mapcontroller" ></locationm-map-component>\n</div>\n'},QRO6:function(e,t,n){"use strict";var i=n("nSVW"),o=n.n(i),a=n("mnMc"),l=n.n(a),r=n("ZbhI"),c=n.n(r),s=n("eLKs"),d=n.n(s),u=n("FLGM"),_=n.n(u),p=n("WxoT"),m=n.n(p),f=n("OBge"),h=n.n(f),g=n("mrSG"),v=n("r/mB"),b=n("526F"),y=n.n(b),w=n("5PDf"),x=n.n(w),k=n("1GJp"),$=n("/PXk"),O=n("wzoq"),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(g.d)(t,e),t.prototype.getMeta=function(){return Object(g.c)(this,void 0,h.a,(function(){var e,t=this;return Object(g.e)(this,(function(n){return e=angular.copy(O.fields),_()(e).call(e,(function(e){e.label=x()(t).call(t,"translate")(e.label),e.options.placeholder=x()(t).call(t,"translate")(e.options.placeholder)})),[2,e]}))}))},t.prototype.initOptions=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(t){var n;switch(t.label){case 0:return[4,e.prototype.initOptions.call(this)];case 1:return t.sent(),this.options.tip=x()(n=this).call(n,"translate")(O.tip),[2]}}))}))},t.prototype.getAlterOperator=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){var t,n;return[2,[{label:x()(t=this).call(t,"translate")("report_filter_advance"),func:d()(n=this.advanceEdit).call(n,this),left:!0}]]}))}))},t.prototype.advanceEdit=function(){var e=this;this.hcDialog.getDialog(k.a).show({readOnly:!1,data:m()(this.form_model.data)}).then((function(t){y()(e.form_model.data,JSON.parse(t))}))},t}($.a),C=n("z/LF"),M={title:"对象设置",controller:D,template:n.n(C).a,size:"small"},S=function(e){function t(t,n,i,o,a,l){var r=e.call(this,t,n,i,o,a)||this;return r.scope=t,r.rootScope=n,r.hcDialog=i,r.hcList=o,r.$filter=a,r.dataService=l,r}return Object(g.d)(t,e),t.prototype.getData=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){return[2,angular.copy(this.scope.params.data)]}))}))},t.prototype.getInfoDialog=function(){return M},t.prototype.initDialog=function(){return Object(g.c)(this,void 0,h.a,(function(){var t=this;return Object(g.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initDialog.call(this)];case 1:return n.sent(),this.scope.$dialog.setClose((function(){m()(t.scope.params.data)!==m()(t.list_model.data)?t.hcDialog.confirm("数据已修改，确认不保存关闭吗?").then((function(){t.scope.$dialog.dialog_close()})):t.scope.$dialog.dialog_close()})),[2]}}))}))},t.prototype.initOptions=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){return this.options.submit=this.scope.params.submit,[2]}))}))},t.prototype.getMeta=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){return[2,[{key:"key",label:this.$filter("translate")("report_filter_ID"),field:["key"]},{key:"label",label:this.$filter("translate")("report_filter_the_name"),field:["label"]},{key:"component",label:this.$filter("translate")("report_filter_component"),field:["component"]}]]}))}))},t.prototype.getAlterOperator=function(){return Object(g.c)(this,void 0,h.a,(function(){var e,t,n=this;return Object(g.e)(this,(function(i){switch(i.label){case 0:return e=this,[4,this.dataService.callHcmOpenApi("flex.fetch.filter",{domain:this.scope.params.domain})];case 1:return t=i.sent(),[2,[{label:this.$filter("translate")("report_filter_new_filter"),left:!0,direction:"up",actions:_()(t).call(t,(function(t){return{label:n.$filter("translate")(t.label),func:function(){e.newItem(t)}}}))}]]}}))}))},t.prototype.newItem=function(e){var t=this;e.label=this.$filter("translate")(e.label),this.hcDialog.getDialog(M).title(this.$filter("translate")("report_filter_set_object")).show({data:null!=e?e:{},options:this.getInfoOptions()}).then((function(e){t.list_model.data=t.list_model.data||[],t.list_model.data.push(e),t.list_model.$refreshData()}))},t.prototype.getRowOperator=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){var t,n,i;return[2,[{key:"up",icon:"icon-hcm-arrow-cross-up-solid",desc:"上移",func:d()(t=this.upItem).call(t,this)},{key:"down",icon:"icon-hcm-arrow-cross-down-solid",desc:"下移",func:d()(n=this.downItem).call(n,this)},{key:"remove",icon:"icon-hcm-delete-circle-solid",desc:"移除",func:d()(i=this.removeItem).call(i,this)}]]}))}))},t.prototype.parseData=function(){return Object(g.c)(this,void 0,h.a,(function(){return Object(g.e)(this,(function(e){return[2,angular.copy(this.list_model.data)]}))}))},t.prototype.upItem=function(e){var t,n,i=c()(t=this.list_model.data).call(t,e);i>0&&(n=Object(g.f)([this.list_model.data[i-1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i-1]=n[1],this.list_model.$refreshData())},t.prototype.downItem=function(e){var t,n,i=c()(t=this.list_model.data).call(t,e);i<this.list_model.data.length-1&&(n=Object(g.f)([this.list_model.data[i+1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i+1]=n[1],this.list_model.$refreshData())},t.prototype.submit=function(){return Object(g.c)(this,void 0,void 0,(function(){var t,n,i;return Object(g.e)(this,(function(o){switch(o.label){case 0:for(t=[],n=[],i=0;i<this.list_model.data.length;i++){if(l()(t).call(t,this.list_model.data[i].label))return this.hcDialog.confirm("过滤器名称 "+this.list_model.data[i].label+" 重复").then((function(){})),[2];if(t.push(this.list_model.data[i].label),l()(n).call(n,this.list_model.data[i].key))return this.hcDialog.confirm("过滤器标识 "+this.list_model.data[i].key+" 重复").then((function(){})),[2];n.push(this.list_model.data[i].key)}return[4,e.prototype.submit.call(this)];case 1:return o.sent(),[2]}}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","$filter","dataService"],t}(v.a);t.a={title:"过滤器列表",template:o.a,controller:S}},QRXc:function(e,t){e.exports='<div class="fieldwork-rec-offer distinct" ng-if="objectData" ng-init="init()">\n    <div ng-if="fieldwork_item.confirm_url&&(auth.candidate ||\n     (fieldwork_item.job_class == \'内部招聘\' && auth.employee.id == fieldwork_item.employee_id))"\n         ng-click="go_url(fieldwork_item.confirm_url)">\n        {{fieldwork_item.msg}}<span class="icon-hcm-arrow-right"></span>\n    </div>\n    <div ng-if="fieldwork_item.url"\n         ng-click="go_url(fieldwork_item.url)">\n        {{fieldwork_item.msg}}<span class="icon-hcm-arrow-right"></span>\n    </div>\n\n</div>\n'},QTtW:function(e,t){e.exports='<div class="hc-input-mce">\n    <textarea ng-if="$ctrl.mceLoaded" ui-tinymce="$ctrl.tinymceOptions" ng-model="$ctrl.model" ng-disabled="($ctrl.options.readOnly|valueToFunc)()"></textarea>\n</div>\n'},QYb0:function(e,t){e.exports='<div class="hc-score-info">\n    <div class="score">\n        <div class="perf-level"\n             ng-show="$ctrl.is_show_assess && $ctrl.model.is_generate_perf_level && $ctrl.model.perf_level != null">\n            <span>{{\'perf_level\'|translate}}</span>\n            <span>{{$ctrl.model.perf_level}}</span>\n        </div>\n        <div class="assess-score" ng-show="$ctrl.is_show_assess && $ctrl.model.assess_score != null">\n            <span>{{\'perf_assess_score\'|translate}}</span>\n            <span>{{$ctrl.model.assess_score}}</span>\n        </div>\n        <div class="current-score" ng-show="$ctrl.is_show_current && $ctrl.model.current_score != null && $ctrl.model.assess_score == null">\n            <span>{{\'perf_current_score\'|translate}}</span>\n            <span>{{$ctrl.model.current_score}}</span>\n        </div>\n    </div>\n</div>\n'},QvX8:function(e,t){e.exports='<div class="hcm-ai-dialog" data-ng-init="$ctrl.$onInit()">\n    <div class="info">\n        <div class="icon">\n            <div class="icon-hcm-community"></div>\n        </div>\n        <div>\n            <div class="content">\n                {{ $ctrl.tip }}\n            </div>\n        </div>\n    </div>\n    <div class="stream">\n    </div>\n</div>\n'},R6Lz:function(e,t){e.exports='<div class="perf-board"  ng-style="{width:280}">\n    <div class="right-btn">\n        <div ng-class="{\'select\':$ctrl.showConnect}" ng-show="$ctrl.is_show_interact">\n            <span ng-click="$ctrl.changePage(\'showConnect\')">{{\'perf_connect_collaborate\'|translate}}</span>\n        </div>\n        <div ng-class="{\'select\':$ctrl.showProcess}" ng-click="$ctrl.changePage(\'showProcess\')">{{\'perf_process_record\'|translate}}</div>\n    </div>\n    <hc-board options="$ctrl.options" ng-show="$ctrl.showProcess"></hc-board>\n    <div ng-show="$ctrl.showConnect" class="connect-concert">\n\n        <div class="show-content" ng-repeat="con in $ctrl.art_list  track by $index">\n            <div>\n                <div class="item-type">\n                    <span  ng-class="{\'icon-hcm-relationship\':con.type==\'collaborate\',\'icon-hcm-share\':con.type==\'share\',\'icon-hcm-connection\':con.type==\'divide\'}"></span>\n                    {{con.type==\'divide\'?(\'perf_goal_divide\'|translate):(con.type==\'share\'?(\'perf_goal_share\'|translate):(\'perf_goal_collaborate\'|translate))}}\n                    <div class="item-operate">\n                        <span ng-if="con.type==\'share\' && con.show_btn" ng-click="$ctrl.openDialogList(\'share\', con.item_detail_id)">{{\'perf_share_range\'|translate}}</span>\n                        <span ng-if="con.type==\'collaborate\' && con.show_btn" ng-click="$ctrl.openDialogList(\'collaborate\', con.item_detail_id)">{{\'perf_collaborate_range\'|translate}}</span>\n                    </div>\n                </div>\n                <div class="item-name">{{con.item_name}}</div>\n                <div class="item-des" ng-if="con.item_description">\n                    <div class="overflowtext-wrap">\n                        <input type="checkbox" class="overflowtext-exp" id="{{con.id}}">\n                        <div class="overflowtext-text">\n                            <label class="overflowtext-btn" for="{{con.id}}"></label>\n                            {{con.item_description}}\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n            <div class="articles">\n\n                <div ng-repeat="item in con.art_list.list track by $index">\n                    \x3c!-- <article-item id=\'article_item_{{_item.id}}\'\n                                  item="_item">\n                    </article-item> --\x3e\n                    \x3c!--看板操作--\x3e\n                    <div class="operate">\n                        <div class="operate-comment oper-item" ng-click="$ctrl.article_comment(item,\'\')">\n                            <span class="icon icon-hcm-chat"></span>\n                        </div>\n                    </div>\n                    \x3c!--看板评论--\x3e\n                    <div class="article-comments"\n                        ng-show="scene!=\'single\' &&(item.comments.list.length>0 || item.likes.list.length>0)">\n\n                        <div ng-repeat="_c in item.comments.list" class="comment-item tg">\n                            <div class="name-comment">\n                                <div class="article-photo" ng-class="{true:\'article-photo-right\'}[item.is_owner]">\n                                    <img ng-src="{{_c.logger.photo|hcPhoto:36}}">\n                                </div>\n                                <div>\n                                    <div class="name" ng-if="!_c.is_owner">\n                                        <span class="owner tg">{{_c.logger.name}}</span>\n                                    </div>\n                                    <div class="name" ng-if="_c.is_owner">\n                                        <span class="owner tg">{{\'oneself\'|translate}}</span>\n                                    </div>\n                                    <span ng-if="_c.reply_to.id">\n                                        <span class="gray">&nbsp;{{\'perf_reply\'|translate}}&nbsp;</span>\n                                        <span class="comment-name tg">{{_c.reply_to.name}}</span>\n                                    </span>\n                                    <span>：</span>\n                                    <span class=\'article-comment\' ng-bind-html="_c.comment|toTrusted"></span>\n                                </div>\n                            </div>\n                            <div class="article-date">\n                                <span class="reply" ng-if="!_c.is_owner" ng-click="$ctrl.comment_click(_c,item)">{{\'perf_reply\'|translate}}</span>\n                                <span ng-if="_c.is_owner" class="delete"\n                                      ng-click="$ctrl.delete_comment(_c.id, $event)">{{\'delete\'|translate}}</span>\n                                <span class="time">{{_c.date|timeStampToDate|beforeCurrentTime}}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},R91f:function(e,t,n){"use strict";n("rB9j"),n("Rm1S"),n("EnZy");var i=n("WxoT"),o=n.n(i),a=n("a0dU"),l=n.n(a),r=(n("ls82"),n("SPx3")),c=n.n(r),s=n("ZbhI"),d=n.n(s),u=n("pPxq"),_=n.n(u),p=n("2cJo"),m=n("+UZt"),f=(n("k2n1"),n("srGB"),n("a9iL"));app.controller("HCMMetaEditorPlusCtrl",["$q","$scope","$rootScope","$controller","$hcDialog","BaseCRUDService","$filter","MetaEditorService","contextService",function(e,t,n,i,a,r,s,u,h){var g=r.getModelService(t.params.model);i(p.a.controller,{$scope:t}),t.auth=h.getContext("auth"),t.showVisualConfig=function(){var e=(t.params.meta_key.match(/\.meta(.*)+\.json/)||[])[1];return!e||!_()(e).call(e,".base")},t.getAlterOperator=function(){var n,i=[{label:s("translate")("codeViewerSwitchMeta")||"切换元数据",default:!1,left:!0,func:function(){a.getDialog(m.a).title(s("translate")("codeViewerSwitchMeta")).params(t.params).size("middle").show().then((function(e){var n=null;if(d()(e).call(e," ")>=0){var i=e.split(" ");n=i[i.length-1],d()(n).call(n,"CONTROL")>=0&&(n="CONTROL"),e=i[0]}e===t.params.meta_key&&"CONTROL"!==n||(t.params.meta_key=e,t.params.readOnly="CONTROL"===n,t.loadData(e,n),t.$dialog.title("元数据编辑："+t.params.meta_key+("CONTROL"===n?"(".concat(n,")"):"")))}))}},{label:s("translate")("codeViewerEditMergeMeta")||"编辑合并元数据",default:!0,left:!0,params:t.params,func:(n=c()(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.edit_merged_and_get_diff_meta(t.params.meta_key);case 2:(n=e.sent)&&t.editor.setValue(n);case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{label:s("translate")("common_code_viewer_language_setting"),left:!0,hide:function(){return"zh_cn"===t.auth.language},func:function(){u.foreign_language_setting_meta(t.params.meta_key,t.auth.language)}}];return t.showVisualConfig()&&i.push({label:s("translate")("codeViewerVisualConfiguration")||"可视化配置",default:!1,left:!1,hide:t.params.is_visualization,func:function(){var n=[g.getBizMeta(t.params.biz_type,t.params.state,!0),g.getQueryFields(t.params.state,t.params.biz_type)];e.all(n).then((function(e){return a.getDialog(f.a).params({meta:e[0],groups:e[0].groups,query_fields:e[1],biz_type:t.params.biz_type,metaParse:t.params.metaParse}).show().then((function(e){var n=JSON.parse(""===t.editor.getValue()?"{}":t.editor.getValue());"list"===t.params.biz_type&&e.column_defs&&(n.column_defs=e.column_defs),t.editor.setValue(o()(s("deepMerge")(n,e)),-1),t.format()}))}))}}),i}}]),t.a={controller:"HCMMetaEditorPlusCtrl",title:"元数据编辑",template:p.a.template}},RFt6:function(e,t){e.exports='<div class="hc-stage-card">\n    <ul id="stage-nav" ng-style="$ctrl.setWidth()">\n        <li ng-repeat="stage in $ctrl.model.card_stage track by $index"\n            ng-class="{\'stage-info-active\':$index+1 <= $ctrl.currentOrder}"\n            ng-mouseover="$ctrl.mouseOver(stage.executor.length)" ng-mouseleave="$ctrl.mouseLeave()">\n            <div class="stage-before" ng-if="$index > 0" ng-class="{\'stage-before-complete\':$index+1 < $ctrl.currentOrder}"></div>\n            <div class="stage-info"\n                 ng-class="{\'stage-info-complete\':$index+1 < $ctrl.currentOrder,\'stage-active\':$index+1 == $ctrl.currentOrder,\'stage-first\':$index == 0,\'stage-last\':$index == $ctrl.model.card_stage.length - 1}">\n                <span ng-class="{\'active\':$index+1 <= $ctrl.currentOrder,\'current\':$index+1 == $ctrl.currentOrder}"\n                      class="stage-name">{{stage.name}}</span>\n\n            </div>\n            <div class="stage-after" ng-if="$index!=$ctrl.model.card_stage.length - 1" ng-class="{\'stage-complete\':$index+1 < $ctrl.currentOrder}"></div>\n            <div class="executor-info" ng-if="stage.executor.length">\n                <div class="score" ng-if="(stage.score||stage.score==0) && $index+1 < $ctrl.currentOrder">\n                    <span class="score-title">{{\'perf_result\'|translate}}:</span>\n                    <span class="score-num">{{stage.score}}</span>\n                </div>\n                <div ng-repeat="executor in stage.executor" class="executor">\n                    <span class="label">{{\'perf_executor\'|translate}}:</span>\n                    <span class="name" ng-class="executor.status == 1?\'active\':\'\'">{{executor.name}}</span>\n                    <span class="relation-score active" ng-if="executor.score||executor.score==0">{{executor.score}}</span>\n                    <span class="icon-hcm-tick-circle-solid" ng-show="executor.status == 1"></span>\n                </div>\n            </div>\n        </li>\n    </ul>\n\n    <div class="stage-button" ng-style="$ctrl.checkDisplay()">\n        <div class="icon-hcm-greater-rectangle-radius" ng-click="$ctrl.rightMove()"></div>\n        <div class="icon-hcm-less-rectangle-radius" ng-click="$ctrl.leftMove()"></div>\n    </div>\n</div>\n'},ROk8:function(e,t){e.exports='<style>\n    .share-circle-micro {\n        display: table;\n        table-layout: fixed;\n        width: 100%;\n        cursor: pointer;\n    }\n\n    .share-circle-micro .icon {\n        display: table-cell;\n        vertical-align: middle;\n        background: #03a9f4;\n        color: #fff;\n        line-height: 38px;\n        width: 48px;\n        text-align: center;\n        font-size: 30px;\n        height: 38px;\n        overflow: hidden;\n        padding-top: 10px;\n    }\n\n    .share-circle-micro .content {\n        display: table-cell;\n        vertical-align: middle;\n        background: #f4f4f4;\n        padding: 5px 10px 0;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n\n</style>\n\n\n<div class=\'share-circle-micro\' ng-init="init()" ng-click="goPage()">\n    <div class="icon tg {{iconName}}"></div>\n    <div class="content tg">{{name}}</div>\n</div>'},Rsme:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).defsTable,o=i.$each,a=(e.row,e.$index,e.cell,e.header_row_height),l=e.sort,r=e.cols;e.col;return n?(t+="\n<div class='multi-row-container'>\n",o(n,(function(e,n){t+='\n<div class="table-header-row"\n     style="width: 100%; height:30px">\n    ',o(e,(function(e,n){t+='\n    <div class="table-header-cell ',t+=i.getHeaderClass(e),t+='" col-key=',t+=e.key,t+='\n           style=" ',t+=i.getHeaderStyle(e,a),t+='">\n        <div class="head-label">\n            <span>',t+=i.securityFilter(e.label),t+="</span>\n            ",l.key===e.key&&"desc"===l.type?t+='\n            <span class="sort-icon icon-hcm-arrow-down-solid"></span>\n            ':l.key===e.key&&"asc"===l.type&&(t+='\n            <span class="sort-icon icon-hcm-arrow-up-solid"></span>\n            '),t+="\n        </div>\n    </div>\n    "})),t+="\n</div>\n"})),t+="\n</div>\n"):(t+="\n",o(r,(function(e,n){t+='\n<div class="table-header-cell ',t+=i.getHeaderClass(e),t+='" style="left:',t+=e.left,t+="px;width:",t+=e.width,t+="px;height:",t+=a,t+='px"  col-index=',t+=e.index,t+=" col-key=",t+=e.key,t+=" ",t+=i.getHcTitle(e.description),t+='>\n        <div class="head-label" >\n             <span>',t+=i.securityFilter(e.label),t+="</span>\n             ",l&&l.key===e.key&&"desc"===l.type?t+='\n                         <span class="sort-icon icon-hcm-arrow-down-solid"></span>\n             ':l&&l.key===e.key&&"asc"===l.type&&(t+='\n                         <span class="sort-icon icon-hcm-arrow-up-solid"></span>\n             '),t+='\n        </div>\n        <div class="col-resize"\n        ></div>\n</div>\n'})),t+="\n"),t+="\n"}},"Rz+B":function(e,t){e.exports='<div class="component-container">\n    <input ng-show="!(options.readOnly|valueToFunc)() && !options.inputLock"\n           class="component-input-inner"\n           ng-blur="blur()"\n           ng-Keyup=\'keyUp($event)\'\n           ng-style="(options.styles|valueToFunc)(inner_model)"\n           ng-model="inner_model"\n           placeholder="{{options.placeholder}}"/>\n    \x3c!--inputLock为true并且不为只读的情况下，点击整个输入框都可以弹出日期选择器--\x3e\n    <div ng-show="(options.readOnly|valueToFunc)() || options.inputLock"\n         class="component-input-inner"\n         ng-style="(options.styles|valueToFunc)(inner_model)"\n         ng-click="!((options.readOnly|valueToFunc)()) && select($event)"\n         ng-class="{placeholder:[null,undefined].includes(model), \'input-lock\': options.inputLock}"\n         ng-bind=\'inner_model||((options.readOnly|valueToFunc)()?"":options.placeholder)\'>\n    </div>\n    <div ng-show="!(options.readOnly|valueToFunc)()"\n         ng-click="select($event)"\n         class="input-icon"></div>\n    <div class="delete icon-hcm-delete"\n         ng-if="client==\'pc\'\n         && model\n         && !(options.readOnly|valueToFunc)()\n         && (options.required|valueToFunc)() === false"\n         ng-click="clear()"\n    ></div>\n</div>\n'},"S+Zn":function(e,t){e.exports='<div id="container">{{item}}</div>'},"S5z/":function(e,t){e.exports='<div class="hc-select-multi" ng-model="model">\n    <div ng-repeat="_item in options.list track by $index" ng-click="selectItem($index)"\n         ng-class="{\'disabled\':options.readOnly}">\n        <div class="multi-label" ng-class="{\'on\':[].concat(model).indexOf(_item.id)>-1}" ng-if="type==\'lable\'">\n            {{_item.name}}\n        </div>\n        <div ng-if="type==\'emp\'" class="multi-list-item"\n             ng-class="{\'selected\':(model.indexOf(_item.id)>-1||model==_item.id)}">\n            <div class="item-icon" ng-click="viewEmpInfo($event,_item.id)">\n                <img ng-src="{{_item.photo|hcPhoto:\'46,46\'}}">\n            </div>\n            <div class="item-info">\n                <div class="item-name">{{_item.name}}</div>\n                <div class="item-help" hc-title="{{_item.dept_name + \' - \' + _item.job_title}}" options="{mode: \'tip\', seconds: 0}">{{_item.dept_name}}-{{_item.job_title}}</div>\n            </div>\n            <div class="selected-icon">\n                <div class="icon icon-hcm-right"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},S7p3:function(e,t){e.exports='<div class="hcm-content-indicator tips" ng-if="selector_flag && params.tip">\n    <span ng-bind-html="(params.tip|valueToFunc)()|toTrusted"></span>\n</div>'},SAVD:function(e,t){e.exports='<div class="component-container" ng-init="init()">\n    <input type="{{ options.dateType }}" ng-if="!options.readOnly" class="component-input-inner"\n           ng-model="inner_model" ng-change="onChange()" placeholder="{{ placeholder }}"/>\n    <div ng-if="options.readOnly" class="component-input-inner">{{ model||"&nbsp;"}}</div>\n    <div ng-if="!options.readOnly" class="input-icon icon-hcm-calendar"></div>\n</div>'},SNqt:function(e,t){e.exports='<div ng-init="init()"\n     ng-if="model"\n     class="hc-simple-tree"\n     ng-class="{\'wrap\': model.options.style.wrap}">\n    \x3c!--  搜索框、方案、当前日期等  --\x3e\n    <div class="tree-top">\n        <hc-selector\n            ng-if="model.options.usePlan"\n            class="plan"\n            options="model.planSelectorOption"\n            ng-model="model.planModel">\n        </hc-selector>\n        <div class="tree-search-toolbar"\n             ng-if="model.options.useSearch">\n            <input type="search"\n                   ng-model="model.keyword"\n                   placeholder="{{model.options.treeSearchPlaceholder || \'common_tree_list_selector_placeholder\'|translate}}"\n                   ng-keypress="model.$search_key_press($event)"\n                   class="tree-search"\n                   ng-change="model.$delete(model.keyword)">  \x3c!--输入关键字搜索--\x3e\n            <span ng-click="model.$search_click($event)"\n                  class="search-icon icon-hcm-check"></span>\n        </div>\n        <span class="tree-setting"\n              ng-click="show_setting($event)"\n              ng-if="client==\'pc\' && (model.options.future_business||model.options[\'config_params\'].length > 0)"\n              hc-title="{{(model.effect_date?\'当前日期: \'+model.effect_date: \'\')+(model.getFilterMode().name?\'<br/>过滤模式: \'+model.getFilterMode().name:\'\')}}"\n              options="{}"\n        >\n            <span class="icon-hcm-more-point-y"></span>\n        </span>\n        <span class=" tree-setting"\n              ng-click="change_to_struct()"\n              ng-if="model.options.change_struct">\n            <span class="icon-hcm-organization"></span>\n        </span>\n    </div>\n    \x3c!-- 搜索内容弹窗 --\x3e\n    <div class="search-content" ng-show="model.show_search">\n        <div class="search-domain">\n            <div class="left-area"><span>搜索范围:</span><span class="sys-color">{{model.search_domain}}</span></div>\n            <div class="count"> 共<span class="sys-color"> {{model.search_data.length}} </span>条</div>\n        </div>\n        <div class="search-details">\n            <div ng-repeat="v in model.search_data"\n                 class="search-text"\n                 ng-bind-html="v.full_name"\n                 ng-click="model.$selectNodeByTreeID(v.tree_id,true)"></div>\n        </div>\n    </div>\n    <div class="history-node" ng-if="client===\'mobile\'">\n        <div class="node" ng-repeat="n in model.history_org_list track by $index"\n            ng-click="pickHistoryNode($index)" ng-if="$index!==0">\n            <span class="node-label">{{n.origin_node.name}}</span>\n            <span class="icon icon-hcm-arrow-right"></span>\n        </div>\n        <div class="pick">\n            请选择\n            <div class="bar"></div>\n        </div>\n    </div>\n    \x3c!-- 树主体 --\x3e\n    <div class="tree-content">\n        \x3c!-- pc 端树状 --\x3e\n        <div ng-repeat="item in model.data" ng-include="\'tree_node.html\'" ng-if="client===\'pc\'"></div>\n        \x3c!-- 移动端 列表状 --\x3e\n        <div ng-repeat="item in model.current_org.child track by $index"\n             class="node-container"\n             ng-if="client===\'mobile\'"\n             ng-class="{\'selected\':item.t_id==model.selectedNode.t_id,\n                        \'searched\':item.t_id==model.searchedNode.t_id,\n                        \'card-view\':model.options.displayView===\'card\'}"\n             ng-include="tree_node">\n        </div>\n    </div>\n</div>\n\n\x3c!-- pc 树节点 --\x3e\n<script type="text/ng-template" id="tree_node.html">\n    <div class="tree-node-container" ng-hide="model.options.hide_node_with_zero&&item.emp_count===0">\n        <div class="tree-node {{ getTreeNodeColor(item, model) }}"\n             ng-style="{paddingLeft:20 * item.layer+16+\'px\'}"\n             ng-class="{selected:item.t_id&&item.t_id==model.selectedNode.t_id,searched:item.t_id==model.searchedNode.t_id}">\n            <div class="node-expand-icon"\n                 ng-class="item.is_leaf?\'\':(item.expand?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\')"\n                 ng-click="item.is_leaf||(item.expand?model.$collapseNode(item):expandNode(item))"></div>\n            \x3c!--选择自身时的checkbox--\x3e\n            <div\n                ng-if="showCheckbox(item)"\n                class="tree-check-box"\n                ng-click="model.$selectNodeMulti(item,$event)"\n                ng-switch="model.isSelected(item)">\n                <div class="tag-to-select icon-hcm-none-rectangle-radius"\n                     ng-switch-when="-1"></div>\n                <div class="tag-selected icon-hcm-click-rectangle-radius-solid"\n                     ng-switch-default></div>\n            </div>\n            \x3c!--同步选择时的checkbox--\x3e\n            <div\n                ng-if="model.options.multi && model.options.mode===\'sync\'"\n                class="tree-check-box"\n                ng-click="model.$selectNodeMulti(item,$event)"\n                ng-switch="item.selected_status">\n                <div class="tag-to-select icon-hcm-none-rectangle-radius"\n                     ng-switch-default></div>\n                <div class="tag-to-select icon-minus-rectangle-radius-solid"\n                     ng-switch-when="0"></div>\n                <div class="tag-selected icon-hcm-click-rectangle-radius-solid"\n                     ng-switch-when="1"></div>\n            </div>\n            <div class="node-icon {{model.getNodeIcon(item)}}"\n                 ng-click="item.is_leaf?selectNode(item):(item.expand?model.$collapseNode(item):expandNode(item))"></div>\n            <div class="node-text" title={{item.name}} ng-click="model.$selectNode(item)"\n                 ng-dblclick="model.dblClick(item)"\n            >{{model.options.custom_key\n                ?(item[model.options.custom_key])\n                :item.name +\' \'+(item[\'charge_business\'] || \'\')}}\n                <span class="attachment"\n                      ng-if="model.options.attachment.enable\n                     && model.options.attachment.showFunc(item, model)\n                     && model.options.attachment.path|getFieldByPath:item"\n                     ng-bind-html="model.options.attachment.path|getFieldByPath:item|addBracket|toTrusted">\n                </span>\n            </div>\n            <div class="count" ng-if="model.is_calculate&&item.emp_count!==null">{{\'(\'+ item.emp_count +\')\'}}</div>\n            <div class="sys-color select-sub" ng-class="{\'select-sub-visible\':item.expand}"\n                 ng-if="model.showSelectChildren(item)"\n                 ng-click="model.$selectChildren(item)">\n                {{item.selected_child\n                ? selectChildrenOptions.uncheckLabel\n                : selectChildrenOptions.checkLabel}}\n            </div>\n            <div class="sys-color select-sub" ng-class="{\'select-sub-visible\':item.expand}"\n                 ng-if="model.showSelectChildrenOnly(item)"\n                 ng-click="model.$selectChildren(item, 3)">\n                {{selectChildrenOptions.checkLabelOnly}}\n            </div>\n        </div>\n        <div class="tree-node-child" ng-if="item.expand">\n            <div ng-repeat="item in item.child" ng-include="\'tree_node.html\'"></div>\n        </div>\n    </div>\n<\/script>\n'},SZbD:function(e,t){e.exports='<style>\n    .location-selection {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        width: 100%;\n        background-color: #fff;\n    }\n\n    .location-selection map {\n        position: absolute;\n        width: 100%;\n        top: 0;\n        height: 200px;\n    }\n\n    .pois-list {\n        position: absolute;\n        top: 200px;\n        bottom: 40px;\n        width: 100%;\n        overflow: hidden;\n    }\n\n    .pois-list .position {\n        padding: 10px;\n        border-top: 1px solid #eee;\n    }\n\n    .pois-list .position .name {\n        padding-bottom: 5px;\n    }\n\n    .pois-list .position .address {\n        font-size: 12px;\n        color: #aaa;\n    }\n\n    .pois-list .position .selected {\n        color: #03a9f4;\n        float: right;\n        padding-top: 8px;\n    }\n\n    .location-selection .locating-info {\n        background-color: #fff;\n        position: absolute;\n        top: 0;\n        height: 100%;\n        width: 100%;\n\n        text-align: center;\n    }\n\n    .location-selection .locating-info .icon {\n        padding-top: 40px;\n        font-size: 60px;\n    }\n\n    .location-selection .locating-info .message {\n        padding-top: 20px;\n        font-size: 14px;\n        background-color: #fff;\n    }\n\n</style>\n<div class="location-selection" ng-show="is_location_selection" ng-init="init()">\n    <map zoom="map.zoom" geo="map.geo" center="map.center" markers="map.markers"></map>\n    <div class="pois-list" id="pois_list">\n        <div ng-hide="is_locating || is_locating_err">\n            <div>\n                <div class=\'position\' ng-click="select_position(-1)">\n                    <div class="selected icon-hcm-right-circle" ng-if="selected_index==-1"></div>\n                    <div class="name">{{curr_location.title}}</div>\n                    <div class="address">{{curr_location.address}}</div>\n                </div>\n\n                <div class=\'position\' ng-repeat="_c in pois_list" ng-click="select_position($index)">\n                    <div class="selected icon-hcm-right-circle" ng-if="$index==selected_index"></div>\n                    <div class="name">{{_c.title}}</div>\n                    <div class="address">{{_c.address}}</div>\n                </div>\n                <multi-page object="pois_list_service"></multi-page>\n                <div style="height: 60px"></div>\n            </div>\n        </div>\n        <div ng-show="is_locating || is_locating_err" class="locating-info">\n                <div class="icon-antenna-1-1 icon" ng-class="is_locating_err?\'red\':\'blue\'"></div>\n                <div class=\'message\'>{{locating_msg}}</div>\n        </div>\n    </div>\n    <bottom-menu menu="b_menu" controller="bottom_menu_controller"></bottom-menu>\n</div>\n'},SaSt:function(e,t,n){"use strict";n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("JfAA");var i=n("a0dU"),o=n.n(i),a=n("526F"),l=n.n(a),r=n("UtpJ"),c=n.n(r),s=n("KYsz"),d=n.n(s),u=(n("ls82"),n("SPx3")),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("FLGM"),h=n.n(f),g=(n("srGB"),n("lq6P")),v=n("1z33"),b=n.n(v);window.app.controller("CommonBatchModelDialogCtrl",["dataService","$hcDialog","BaseCRUDService","$q","$rootScope","$controller","$scope",function(e,t,n,i,a,r,s){var u=s.$dialog.options.model_name?n.getModelService(s.$dialog.options.model_name):n.getBaseService(s.$dialog.options.object_str);r(g.a,{$scope:s,CRUDService:u}),s.meta_state=s.$dialog.options.meta_state,s.setMetaBefore=function(){var e,t;s.info_meta=h()(e=m()(t=s.info_meta).call(t,(function(e){return e.options.batch}))).call(e,(function(e){return e.options=e.options||{},e.options.readOnly=!0,e.options.editBatch={click:function(){e.options.batch.required||(e.options.editBatch.selected=!e.options.editBatch.selected,e.options.editBatch.selected||(s.base_form.data[e.key]=null),e.options.readOnly=!e.options.editBatch.selected,void 0!==e.options.batch.no_empty&&(e.options.editBatch.selected?e.options.required=e.options.batch.no_empty:e.options.required=!!e.options.batch.required))}},e.options.batch.required&&(e.options.readOnly=!1,e.options.editBatch.selected=!0),e.options.required=!!e.options.batch.required,e}))};s.submit=_()(o.a.mark((function n(){var i,r,_,p,f,g,v;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((f=h()(i=m()(r=s.info_meta).call(r,(function(e){return e.options.editBatch&&e.options.editBatch.selected}))).call(i,(function(e){return e.key}))).length<1)){n.next=4;break}return t.notify("您还没有选择任何批量编辑字段","warning"),n.abrupt("return");case 4:return g=s.parseData(s.data),g=d()(f).call(f,(function(e,t){return e[t]=g[t],e}),{}),(null===(_=s.$dialog.options)||void 0===_?void 0:_.submit_func)&&h()(v=s.info_meta).call(v,(function(e){var t,n,i;e.options.originObject&&(angular.isArray(e.options.originObject)?g[c()(t=e.key).call(t,0,-3)]={name:h()(n=e.options.originObject).call(n,(function(e){return e.name})).toString()}:g[c()(i=e.key).call(i,0,-3)]=e.options.originObject)})),n.next=9,s.validFormData(g);case 9:if(n.t1=n.sent,n.t0=!1===n.t1,n.t0){n.next=13;break}n.t0=s.submitting;case 13:if(!n.t0){n.next=15;break}return n.abrupt("return");case 15:s.submitting=!0,(s.$dialog.options.submit_func?s.$dialog.options.submit_func:s.$dialog.options.submit_api?function(t){return e.callHcmOpenApi(s.$dialog.options.submit_api,{info_list:t})}:u.editItemBatch)(h()(p=s.params.ids).call(p,(function(e){return l()({id:e},g)}))).then((function(e){s.afterSubmit(e)}),(function(){s.submitting=!1})).finally((function(){a.hide_waiting()}));case 18:case"end":return n.stop()}}),n)})))}]),t.a=function(e,t,n,i){return{controller:"CommonBatchModelDialogCtrl",template:b.a,model_name:e,object_str:null,meta_state:t,submit_func:i,submit_api:n,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}}}},TCeZ:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).defsTable,o=i.$each,a=(e.row,e.$index,e.cell,e.header_row_height),l=e.selector_type,r=e.isSelectAll,c=e.sort,s=e.cols,d=(e.col,e.leftOrRight);return n?(t+="\n    <div class='multi-row-container'>\n    ",o(n,(function(e,n){t+='\n        <div class="table-header-row"\n            style="width: 100%; height:30px">\n            ',o(e,(function(e,n){t+='\n                <div class="table-header-cell ',t+=i.getHeaderClass(e),t+='" col-key=',t+=e.key,t+=' style="',t+=i.getHeaderStyle(e,a),t+='">\n                    ',e.is_selector?(t+="\n                        <div class='select-all'>\n                            ",2===l?(t+="\n                                ",t+=1===r?"\n                                    <span class='tag-to-select icon-hcm-click-rectangle-radius-solid sys-color'></span>\n                                ":0===r?"\n                                    <span class='tag-to-select icon-minus-rectangle-radius-solid'></span>\n                                ":"\n                                    <span class='tag-to-select icon-hcm-none-rectangle-radius'></span>\n                                ",t+="\n                            "):(t+="\n                                <span>",t+=e.label,t+="</span>\n                            "),t+="\n                        </div>\n                    "):(t+='\n                        <div class="head-label">\n                            <span>',t+=i.securityFilter(e.label),t+="</span>\n                            ",c.key===e.key&&"desc"===c.type?t+='\n                                <span class="sort-icon icon-hcm-arrow-down-solid"></span>\n                            ':c.key===e.key&&"asc"===c.type&&(t+='\n                                <span class="sort-icon icon-hcm-arrow-up-solid"></span>\n                            '),t+="\n                        </div>\n                    "),t+="\n                </div>\n            "})),t+="\n        </div>\n    "})),t+="\n</div>\n"):(t+="\n",o(s,(function(e,n){t+='\n<div class="table-header-cell ',t+=i.getHeaderClass(e),t+='"\n     style="',t+=d,t+=":",t+=e[d],t+="px;width:",t+=e.width||80,t+="px;height:",t+=a,t+='px" col-key=',t+=e.key,t+="  ",t+=i.getHcTitle(e.description),t+=">\n    ",e.is_selector?(t+="\n    <div class='select-all'>\n    ",2===l?(t+="\n        ",t+=1===r?"\n         <span class='tag-to-select icon-hcm-click-rectangle-radius-solid sys-color'></span>\n         ":0===r?"\n             <span class='tag-to-select icon-minus-rectangle-radius-solid'></span>\n         ":"\n             <span class='tag-to-select icon-hcm-none-rectangle-radius'></span>\n        ",t+="\n    "):(t+="\n          <span>",t+=e.label,t+="</span>\n     "),t+="\n    </div>\n    "):(t+='\n    <div class="head-label">\n             <span>',t+=e.label,t+="</span>\n             ",c&&c.key===e.key&&"desc"===c.type?t+='\n                         <span class="sort-icon icon-hcm-arrow-down-solid"></span>\n             ':c&&c.key===e.key&&"asc"===c.type&&(t+='\n                         <span class="sort-icon icon-hcm-arrow-up-solid"></span>\n             '),t+='\n        </div>\n        <div class="col-resize"></div>\n'),t+="\n</div>\n"})),t+="\n"),t+="\n\n"}},TDuI:function(e,t){e.exports='<div class="component-container" >\n    <div class=\'component-input-inner\'\n         ng-class=\'{placeholder:!$ctrl.model}\'\n         ng-disabled=\'($ctrl.options.readOnly|valueToFunc)()\'\n    >\n        <div ng-repeat="_item in $ctrl.model track by $index" class="tag-item">\n            <div class="tag-text" ng-click="$ctrl.editItem($index)">{{$ctrl.itemMask(_item)}}</div>\n            <div class="tag-oper icon-hcm-delete"\n                 ng-if="!$ctrl.options.no_delete"\n                 ng-click="$ctrl.removeItem($index)">\n            </div>\n        </div>\n        <div class="tag-item add" ng-if="!$ctrl.options.no_add" ng-click="$ctrl.addItem()">\n            <div class="tag-text">{{$ctrl.options.placeholder||\'添加\'}}</div>\n            <div class="tag-oper icon-hcm-add"></div>\n        </div>\n    </div>\n</div>\n'},TDwY:function(e,t){e.exports='<div class="sys-location-map" ng-init="init()">\n    <div class="map-box" ng-if="show_map"\n         ng-style="{\'background-image\':\'url(http://restapi.amap.com/v3/staticmap?location={{ longitude }},{{ latitude }}&zoom=10&size=300*260&markers=small,0x03a9f4,:{{ longitude }},{{ latitude }}&key=ee95e52bf08006f63fd29bcfbcf21df0)\',\'background-repeat\': \'no-repeat\'}">\n\n        <div ng-if="!show_map">no map</div>\n    </div>\n</div>\n'},TFHr:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("+oHS"),o=n.n(i),a=n("M5Mt"),l=n.n(a),r=n("WxoT"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("/FZm"),_=n.n(u),p=n("mrSG"),m=n("CoJ3"),f=n("OrM7"),h=n("70lZ"),g=n.n(h),v=(n("1LhX"),n("k2n1"),n("Oq9F"),function(e){function t(t,n,i,o,a,l,r,c,s,d,u,m,f,h,g){var v=e.call(this,t,n,i,o,a,l,r,c,s,d,u)||this;v.queryService=m,v.metaEditorService=f,v.$hcSimpleTree=h,v.commonModelDatasetService=g,v.defineBaseConst=function(){v.designMetaService=(v.params.customService?v.params.customService:v.commonModelDatasetService).setModel(v.params.base_object_str,v.params.model,v.params.state,v.params.biz_type)};var b=v;return v.cancel_sync_refresh=!0,v.submit=function(){return Object(p.c)(v,void 0,void 0,(function(){var e;return Object(p.e)(this,(function(t){switch(t.label){case 0:return[4,b.getVisualizationMeta()];case 1:return e=t.sent(),b.$dialog.resolve_data(e),b.$dialog.dialog_close(),[2]}}))}))},b.tabOnchange=function(e){var t;b.selectPanel(_()(t=b.setting_panel).call(t,(function(t){return t.key===e})))},v}return Object(p.d)(t,e),t.prototype.initBase=function(){return Object(p.c)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(e){switch(e.label){case 0:return this.defineBaseConst(),[4,this.initBaseBeforeAsync()];case 1:return e.sent(),this.initOperate(),this.initBaseAfter(),[2]}}))}))},t.prototype.getAvailableFields=function(){return Object(p.c)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(e){switch(e.label){case 0:return[4,this.designMetaService.getAllFields(this.params.selected_list,this.params.available_tabs)];case 1:return[2,e.sent()]}}))}))},t.prototype.removeDuplicate=function(){},t.prototype.getDataByPath=function(e,t,n){var i;return null===(i=e.category_path)||void 0===i||d()(i).call(i,(function(e){n.push(e),t=null==t?void 0:_()(t).call(t,(function(e){return c()(e.category_path)===c()(n)})).child})),t},t.prototype.addTreeField=function(e,t){var n,i=this.getDataByPath(e,null===(n=this.availableFieldsModel[t])||void 0===n?void 0:n.data,[]);e.is_leaf=!0,i.push(e)},t.prototype.removeTreeField=function(e,t){var n,i=this.getDataByPath(e,null===(n=this.availableFieldsModel[t])||void 0===n?void 0:n.data,[]),o=this.$filter("indexOf")(i,e);o>=0&&l()(i).call(i,o,1)},t.prototype.initDatasetFields=function(){return Object(p.c)(this,void 0,void 0,(function(){var e,t,n,i=this;return Object(p.e)(this,(function(a){var l;switch(a.label){case 0:return e=this,t={numeric:"icon-hcm-type-number",float:"icon-hcm-type-number",integer:"icon-hcm-type-number",string:"icon-hcm-type-text",text:"icon-hcm-type-text",boolean:"icon-hcm-radio-circle",datetime:"icon-hcm-clock",date:"icon-hcm-calendar",link:"icon-hcm-link",formula:"icon-hcm-type-formulas"},n=this,[4,this.getAvailableFields()];case 1:return n.availableFields=a.sent(),this.availableFieldsModel={},[4,d()(l=o()(this.availableFields)).call(l,(function(n){return Object(p.c)(i,void 0,void 0,(function(){var i,o=this;return Object(p.e)(this,(function(a){switch(a.label){case 0:return i=function(t){return Object(p.c)(o,void 0,void 0,(function(){return Object(p.e)(this,(function(i){return[2,this.designMetaService.getAppointmentFields(e.params.relations,n,null==t?void 0:t.category_path,e.params.selected_list[n])]}))}))},this.availableFieldsModel[n]=this.$hcSimpleTree.createTree(i,{addRootAll:!1,custom_key:"label",getNodeIconCustom:function(e){var n;return e.is_leaf?t[e.data_type||(null===(n=e.options)||void 0===n?void 0:n.data_type)]||"icon-list-pending":"icon-hcm-file-solid-closed"}}),this.availableFieldsModel[n].$setDblClick((function(t){return Object(p.c)(o,void 0,void 0,(function(){var i;return Object(p.e)(this,(function(o){switch(o.label){case 0:return"sorts"!==n?[3,2]:[4,this.sortFunc.edit(t)];case 1:return i=o.sent(),[3,5];case 2:return"statistics"!==n?[3,4]:[4,this.statisticFunc.edit(t)];case 3:return i=o.sent(),[3,5];case 4:i=t,t.is_leaf&&e.meta_info[n].push(i),o.label=5;case 5:return e.removeTreeField(t,n),[2]}}))}))})),[4,this.availableFieldsModel[n].$initTree(null,null,{})];case 1:return a.sent(),[2]}}))}))}))];case 2:return a.sent(),[2]}}))}))},t.prototype.initMetaInfo=function(){var t,n;return Object(p.c)(this,void 0,void 0,(function(){var i;return Object(p.e)(this,(function(o){switch(o.label){case 0:return i=this,this.meta_info=angular.copy(this.params.selected_list),this.meta_info.statistics=(null===(t=this.meta_info.statistics)||void 0===t?void 0:d()(t).call(t,(function(e){var t;return e=angular.extend(angular.copy(_()(t=i.availableFields.statistics).call(t,(function(t){return e.key===e.type+"__"+t.key})))||{},e)})))||[],this.meta_info.sorts=(null===(n=this.meta_info.sorts)||void 0===n?void 0:d()(n).call(n,(function(e){var t;return e=angular.extend(_()(t=i.availableFields.sorts).call(t,(function(t){return e.key===t.key}))||{},e)})))||[],this.origin_meta_info=angular.copy(this.meta_info),[4,e.prototype.initMetaInfo.call(this)];case 1:return o.sent(),[2]}}))}))},t.prototype.transMetaInfo=function(){e.prototype.transMetaInfo.call(this)},t.prototype.getVisualizationMeta=function(){return Object(p.c)(this,void 0,void 0,(function(){var e;return Object(p.e)(this,(function(t){var n;return e=this,d()(n=o()(e.meta_info)).call(n,(function(t){e.meta_info[t]&&(e.meta_info[t]=e.setSequence(e.meta_info[t]))})),[2,e.meta_info]}))}))},t.prototype.initBaseAfter=function(){this.$dialog.operates([{key:"back",label:"返回",func:this.close,default:!1},{key:"submit",label:"确定",func:this.submit,default:!0}]),this.current_tab=this.tabOptions.list[0].id},t.$inject=["$scope","$rootScope","$controller","$q","BaseCRUDService","CompanyMetaService","$hcDataset","$hcQueryField","$filter","$hcDialog","columnDefsService","queryService","MetaEditorService","$hcSimpleTree","commonModelDatasetService"],t}(f.a)),b={controller:"planVisualization as $ctrl",name:"planVisualization",title:"方案设计",template:g.a};m.a.controller("planVisualization",v)},TMUX:function(e,t){e.exports='<div class="component-container" ng-click="$ctrl.onClick($event)">\n    <div class="component-input-inner"\n         ng-class="{placeholder:!$ctrl.model}"\n         ng-bind-html="$ctrl.model?$ctrl.valueMask($ctrl.model):(($ctrl.options.readOnly|valueToFunc)()?\'\':$ctrl.options.placeholder)"\n         ng-disabled="($ctrl.options.readOnly|valueToFunc)()"\n    >\n    </div>\n</div>\n'},TREg:function(e,t){e.exports='<div class="component-input-inner" ng-class="readOnly?\'disable\':\'\'"\n     ng-click="pickerDate()">\n    <div class="date-box">{{model}}</div>\n    <div class="icon-box" ng-class="readOnly?\'disable\':\'\'">\n        <div class="icon icon-hcm-calendar"></div>\n    </div>\n</div>\n'},TRUa:function(e,t){e.exports='<div ng-init="init()" class="tree-setting-info">\n    <hc-form model="base_form"></hc-form>\n</div>'},TSbF:function(e,t){e.exports='<div class="date-picker-widget" ng-init="init()">\n    <datetimepicker data-ng-model="current_date"\n                    data-datetimepicker-config="{ startView:\'day\', minView:\'day\'}"\n                    data-on-set-time="setDate(newDate, oldDate)"></datetimepicker>\n</div>'},TWJ7:function(e,t,n){"use strict";n("sMBO");var i=n("sfjC"),o=n.n(i),a=(n("l6vw"),n("6hxS"));window.app.controller("MenuCtrl",["$rootScope","$scope","$state","$controller","BaseCRUDService",function(e,t,n,i,o){i(a.a,{$scope:t,CRUDService:o}),t.init=function(){t.nav_items=t.params.nav_items,t.category_list=t.params.category_list,t.category_id=t.params.category_id,t.bottom_switch=t.params.bottom_switch},t.goChild=function(e,n){e&&e.stopPropagation();var i=n.list&&!n.model?n.list[0]:n;t.goFunc(i)},t.goFunc=function(n){t.goFuncBefore(n),t.$dialog.resolve_data(n),n.func?n.func(n):e.super_go(n.jump_state,n.params||{},{location:"replace"})},t.isCurrent=function(e){return!e.no_model&&e.jump_state===n.current.name&&(e.meta_state===n.params.meta_state&&(!n.params.c_model||(!e.params||!e.params.c_model||e.params.c_model===n.params.c_model)))},t.changeCategory=function(e){e.id!==t.category_id&&(t.category_id=e.id,t.$dialog.resolve_data(e),t.$dialog.dialog_close())},t.goFuncBefore=function(e){return e}}]),t.a={controller:"MenuCtrl",template:o.a,name:"menu",maskClose:!0}},TYOo:function(e,t,n){"use strict";n.r(t);var i=n("QvX8"),o=n.n(i),a=(n("rB9j"),n("iIM6"),n("eLKs")),l=n.n(a),r=n("MAKL"),c=n.n(r),s=n("/FZm"),d=n.n(s),u=n("WxoT"),_=n.n(u),p=n("RXMP"),m=n.n(p),f=n("5PDf"),h=n.n(f),g=n("UtpJ"),v=n.n(g),b=n("mrSG"),y=n("wZee"),w=(n("PSGn"),n("fFwQ")),x=function(){function e(e,t,n,i,o,a){this.scope=e,this.rootScope=t,this.hcDialog=n,this.hcmCommService=i,this.contextService=o,this.$controller=a,this.last_render=[],this.context=this.contextService.getContext("auth")}return e.prototype._renderText=function(e){var t=document.createElement("div");return t.innerHTML=e,t},e.prototype._renderCode=function(e,t){var n=document.createElement("pre");n.classList.add("code-block");var i=document.createElement("code");return i.textContent=e,t&&(i.className="language-"+t),n.appendChild(i),y.highlightElement(i),n},e.prototype._splitCode=function(e){for(var t,n=[],i=/```(.*?)\n([\s\S]*?)\n```/g,o=0;null!==(t=i.exec(e));)t.index>o&&n.push(v()(e).call(e,o,t.index)),n.push({lang:t[1],code:t[2]}),o=t.index+t[0].length;o<e.length&&n.push(v()(e).call(e,o));var a=(n=h()(n).call(n,(function(e){return""!==e})))[n.length-1];if(i.lastIndex=0,a&&!i.exec(a)){var l=/```(.*?)\n([\s\S]*?)$/g.exec(a);l&&(n[n.length-1]=v()(a).call(a,0,l.index),n.push({lang:l[1],code:l[2]}))}return n},e.prototype._handleStreamData=function(e){var t=this;function n(e){return e instanceof Object?t._renderCode(e.code,e.lang):t._renderText(Object(w.marked)(e))}var i=this._splitCode(e);m()(i).call(i,(function(e,i){!t.last_render||i>=t.last_render.length?t.stream_ele.appendChild(n(e)):_()(e)!==_()(t.last_render[i])&&t.stream_ele.replaceChild(n(e),t.stream_ele.childNodes[i])})),this.stream_ele.scrollTop=this.stream_ele.scrollHeight,this.last_render=i},e.prototype.$onInit=function(){var e,t;return Object(b.c)(this,void 0,void 0,(function(){var n,i=this;return Object(b.e)(this,(function(o){var a,r,s,u;return n=this,this.scope.$ctrl=this,this.tip=this.scope.params.tip,this.agent_name=this.scope.params.agent_name,this.params=this.scope.params.params,this.stream_ele=d()(a=this.scope.$dialog.options.element).call(a,".stream")[0],this.close=function(){var e,t;n.$onDestroy(),null===(e=n.scope.$dialog)||void 0===e||e.reject_data(),null===(t=n.scope.$dialog)||void 0===t||t.dialog_close()},this.stream_key="comm_ai_agent_stream_"+Math.floor(c()()/1e3),this.stream_listen=this.rootScope.$on(this.stream_key,(function(e,t){"start"===t.status&&(i.is_streaming=!0,i.stream_ele.innerHTML="",i.stream_buffer="",i.last_render=[]),"progress"===t.status&&(i.stream_buffer+=t.content,i._handleStreamData(i.stream_buffer)),"finished"===t.status&&(i.is_streaming=!1)})),this.scope.$dialog.operates([{label:"重新生成",func:l()(r=n.geneAI).call(r,this),disabled:function(){return i.is_streaming},important:!0,left:!0},{label:"附加需求",func:l()(s=n.alterGeneAI).call(s,this),disabled:function(){return i.is_streaming},important:!0,left:!0},{label:"关闭",func:n.close}]),null===(e=this.scope.$dialog)||void 0===e||e.setClose(l()(u=this.close).call(u,n)),null===(t=this.$onInitAfter)||void 0===t||t.call(this),[2]}))}))},e.prototype.alterGeneAI=function(){var e=this;this.hcDialog.simpleInput("请输入附加需求","请输入附加需求，如：请用100字描述....等").then((function(t){e.geneAI(t)}))},e.prototype.geneAI=function(e){void 0===e&&(e=null),this.stream_ele.innerHTML="HCM AI 正在思考中...",this.hcmCommService.callAgent(this.agent_name,this.params,e,this.stream_key).then((function(){console.log(e)}))},e.prototype.$onInitAfter=function(){this.geneAI()},e.prototype.$onDestroy=function(){var e;null===(e=this.stream_listen)||void 0===e||e.call(this)},e.$inject=["$scope","$rootScope","$hcDialog","HCMCommService","contextService","$controller"],e}();n("qHiR"),n("c+Sv"),t.default={title:"HCM AI 智能助手",template:o.a,controller:x,name:"hcm-ai-dialog",title_img:"hcm-default-logo"}},Tb5b:function(e,t){e.exports='<div ng-init="init()">\n    <div class="hcm-nav-content model-view-style no-flex">\n        <div class="tabStyles">\n            <hc-tabs\n                value="current_nav"\n                on-value-change="goChild">\n                <hc-tab-pane\n                    ng-repeat="_item in nav_items |orderBy: \'sequence\' track by $index"\n                    ng-hide="(isRoleNavItem && !isRoleNavItem(_item)) || (_item.hide|valueToFunc)() || !isValidNavItem(_item)"\n                    label="createLabel(_item)"\n                    hide-count="!(_item.count && expand)"\n                    count="_item.count"\n                    name="$index"\n                ></hc-tab-pane>\n            </hc-tabs>\n        </div>\n        <div class="hcm-content flex" ng-class="{\'expand-content\':expand,\'collapse-content\':!expand,\n            \'multi-view-content\':multi_view_config.position===\'top\', \'navigate-view-content\': base_config.navigation}">\n            <hc-model-view-base ng-if="nowState === \'base\'"\n                params="params"\n            ></hc-model-view-base>\n            <hc-model-view-multi ng-if="nowState === \'multi\'"\n                params="params"\n            ></hc-model-view-multi>\n            <hc-model-view-single ng-if="nowState === \'single\'"\n                params="params"\n            ></hc-model-view-single>\n        </div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="nav_list"><\/script>\n'},Tj9R:function(e,t){e.exports='<div\n    class="component-container"\n    ng-init="init();hover=false"\n    ng-click="onClick($event)"\n    ng-mouseover="hover=true"\n    ng-mouseleave="hover=false"\n>\n    <div\n        class="component-input-inner"\n        ng-bind="selector_label||options.placeholder"\n        ng-class="{placeholder:!model}"\n        ng-disabled="(options.readOnly|valueToFunc)()"\n        hc-title="{{selector_label}}"\n        options="{mode: \'tip\', showOnOverflow: true}"\n    ></div>\n    <div\n        ng-show="!(options.readOnly|valueToFunc)()"\n        ng-click="([null,undefined].includes(model)||options.no_delete)? onClick($event) : del($event)"\n        class="input-icon"\n        ng-class="(![null,undefined].includes(model)&&hover&&!options.no_delete)?\'icon-hcm-delete\': options.icon?options.icon:client===\'pc\'?\'icon-hcm-screening\':\'icon-hcm-arrow-right\'"\n    ></div>\n</div>\n'},TlkC:function(e){e.exports=JSON.parse('{"tip":"维护固定过滤属性","fields":[{"key":"key","label":"标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"label","label":"名称","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入显示名称","required":true}},{"key":"component","label":"组件","component":"hc-input","options":{"singleLine":false,"width":"col-12"}}]}')},U4OW:function(e,t){e.exports='<div class="view-info-dialog" ng-init="init()">\n    <div class="card-left" >\n\n        <div class="card-scroll">\n            <div class="perf-board-icon" ng-click="isShowBoard()">\n                <span class="icon-menu-open" ng-show="is_show_board"></span>\n                <span ng-show="!is_show_board">{{\'perf_process_board\'|translate}}</span>\n                <span class="icon-menu-closed" ng-show="!is_show_board"></span>\n            </div>\n            <div class="card-left-center" ng-class="viewClass">\n                <div class="hc-row">\n                    <hc-form-component ng-repeat=\'field in view_components_pc\' key="{{ field.key }}"\n                                       options="field.options" ng-show="!(field.options.hide|valueToFunc)()"\n                                       ng-form-data="base_form.data" component="{{ field.component }}"\n                                       label="{{ field.label }}"\n                                       placeholder="{{ field.options.placeholder }}"\n                                       ng-disabled="field.options.disabled"\n                                       style-type="{{field.options.styleType }}"\n                                       show-title="{{field.options.showTitle}}"\n                                       attrs=\'field.attrs\' ng-class="{\'read-only\':field.options.disabled || (field.options.readOnly|valueToFunc)() ,\n                                    \'form-notify\':model.valid_error_key===field.key}"\n                                       ng-mouseover="field.options.hover=true"\n                                       ng-mouseleave="field.options.hover=false">\n                    </hc-form-component>\n                </div>\n            </div>\n\n            <div class="card-left-bottom">\n                <hc-form model="base_form"></hc-form>\n            </div>\n        </div>\n    </div>\n    <div class="dialog-right" ng-show="is_show_board">\n            <div class="hc-row">\n                <hc-form-component ng-repeat=\'field in right_components_pc\' key="{{ field.key }}" options=\'field.options\'\n                                   ng-show="!(field.options.hide|valueToFunc)()" ng-form-data="model.data"\n                                   ng-form-data-path="field.dataPath" component="{{ field.component }}"\n                                   label="{{ field.label }}"\n                                   placeholder="{{ field.options.placeholder }}" ng-disabled="field.options.disabled"\n                                   style-type="{{field.options.styleType }}" show-title="{{field.options.showTitle}}"\n                                   attrs=\'field.attrs\'\n                                   ng-class="{\'read-only\':field.options.disabled || (field.options.readOnly|valueToFunc)()}"\n                                   ng-mouseover="field.options.hover=true" ng-mouseleave="field.options.hover=false">\n                </hc-form-component>\n            </div>\n    </div>\n</div>\n'},U7jy:function(e,t){e.exports='<div class="expandable-item">\n    <div class="expandable-item-content" ng-click="$ctrl.onItemClick($event)">\n        <div ng-if="$ctrl.prefix|isValidValue" class="expandable-item-content-prefix" ng-bind-html="$ctrl.prefix"></div>\n        <div class="expandable-item-content-main">\n            <div ng-if="$ctrl.eTitle|isValidValue" class="expandable-item-title" ng-bind-html="$ctrl.eTitle"></div>\n            <div ng-if="$ctrl.body|isValidValue" class="expandable-item-body" ng-bind-html="$ctrl.body"></div>\n            <div ng-if="$ctrl.description|isValidValue" class="expandable-item-description" ng-bind-html="$ctrl.description"></div>\n        </div>\n        <div ng-if="$ctrl.extra|isValidValue" class="expandable-item-extra" ng-bind-html="$ctrl.extra"></div>\n        <div class="expandable-item-arrow">\n            <div ng-if="$ctrl.getArrow()"\n                 ng-click="$ctrl.changeExpandState($event)"\n                 ng-class="$ctrl.getArrow()">\n            </div>\n        </div>\n    </div>\n    <div class="expandable-item-expanded-content"\n         ng-transclude>\n    </div>\n</div>\n'},UAiH:function(e,t,n){n("4mDm"),n("wZ/5"),n("rOQg"),n("tCCV"),n("qePV"),n("07d7"),n("rB9j"),n("Rm1S"),n("UxlC"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0");var i=n("nhkr"),o=function(){var e={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},t={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},n={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},o={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(e){return!!e.exifdata}function l(e,t){function n(n){var i=r(n),o=function(e){var t=new DataView(e);0;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var n=2,i=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;n<i;){if(o(t,n)){var a=t.getUint8(n+7);a%2!=0&&(a+=1),0===a&&(a=4);var l=n+8+a,r=t.getUint16(n+6+a);return s(e,l,r)}n++}}(n);e.exifdata=i||{},e.iptcdata=o||{},t&&t.call(e)}if(e instanceof Image||e instanceof HTMLImageElement)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,o=new ArrayBuffer(i),a=new Uint8Array(o),l=0;l<i;l++)a[l]=n.charCodeAt(l);return o}(e.src));else if(/^blob\:/i.test(e.src)){(o=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){o.readAsArrayBuffer(e)}))}else{var i=new XMLHttpRequest;i.onload=function(){if("200"!=i.status)throw"Could not load image";n(i.response),i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var o;(o=new FileReader).onload=function(e){n(e.target.result)},o.readAsArrayBuffer(e)}}function r(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,i=e.byteLength;n<i;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return p(t,n+4);n+=2+t.getUint16(n+2)}}var c={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function s(e,t,n){for(var i,o,a,l,r=new DataView(e),s={},d=t;d<t+n;)28===r.getUint8(d)&&2===r.getUint8(d+1)&&(l=r.getUint8(d+2))in c&&((a=r.getInt16(d+3))+5,o=c[l],i=_(r,d+5,a),s.hasOwnProperty(o)?s[o]instanceof Array?s[o].push(i):s[o]=[s[o],i]:s[o]=i),d++;return s}function d(e,t,n,i,o){var a,l,r=e.getUint16(n,!o),c={};for(l=0;l<r;l++)a=n+12*l+2,c[i[e.getUint16(a,!o)]]=u(e,a,t,n,o);return c}function u(e,t,n,i,o){var a,l,r,c,s,d,u=e.getUint16(t+2,!o),p=e.getUint32(t+4,!o),m=e.getUint32(t+8,!o)+n;switch(u){case 1:case 7:if(1==p)return e.getUint8(t+8,!o);for(a=p>4?m:t+8,l=[],c=0;c<p;c++)l[c]=e.getUint8(a+c);return l;case 2:return _(e,a=p>4?m:t+8,p-1);case 3:if(1==p)return e.getUint16(t+8,!o);for(a=p>2?m:t+8,l=[],c=0;c<p;c++)l[c]=e.getUint16(a+2*c,!o);return l;case 4:if(1==p)return e.getUint32(t+8,!o);for(l=[],c=0;c<p;c++)l[c]=e.getUint32(m+4*c,!o);return l;case 5:if(1==p)return s=e.getUint32(m,!o),d=e.getUint32(m+4,!o),(r=new Number(s/d)).numerator=s,r.denominator=d,r;for(l=[],c=0;c<p;c++)s=e.getUint32(m+8*c,!o),d=e.getUint32(m+4+8*c,!o),l[c]=new Number(s/d),l[c].numerator=s,l[c].denominator=d;return l;case 9:if(1==p)return e.getInt32(t+8,!o);for(l=[],c=0;c<p;c++)l[c]=e.getInt32(m+4*c,!o);return l;case 10:if(1==p)return e.getInt32(m,!o)/e.getInt32(m+4,!o);for(l=[],c=0;c<p;c++)l[c]=e.getInt32(m+8*c,!o)/e.getInt32(m+4+8*c,!o);return l}}function _(e,t,n){for(var i="",o=t;o<t+n;o++)i+=String.fromCharCode(e.getUint8(o));return i}function p(i,a){if("Exif"!=_(i,a,4))return!1;var l,r,c,s,u,p=a+6;if(18761==i.getUint16(p))l=!1;else{if(19789!=i.getUint16(p))return!1;l=!0}if(42!=i.getUint16(p+2,!l))return!1;var m=i.getUint32(p+4,!l);if(m<8)return!1;if((r=d(i,p,p+m,t,l)).ExifIFDPointer)for(c in s=d(i,p,p+r.ExifIFDPointer,e,l)){switch(c){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[c]=o[c][s[c]];break;case"ExifVersion":case"FlashpixVersion":s[c]=String.fromCharCode(s[c][0],s[c][1],s[c][2],s[c][3]);break;case"ComponentsConfiguration":s[c]=o.Components[s[c][0]]+o.Components[s[c][1]]+o.Components[s[c][2]]+o.Components[s[c][3]]}r[c]=s[c]}if(r.GPSInfoIFDPointer)for(c in u=d(i,p,p+r.GPSInfoIFDPointer,n,l)){switch(c){case"GPSVersionID":u[c]=u[c][0]+"."+u[c][1]+"."+u[c][2]+"."+u[c][3]}r[c]=u[c]}return r}return{readFromBinaryFile:function(e){return r(e)},pretty:function(e){if(!a(e))return"";var t,n=e.exifdata,o="";for(t in n)n.hasOwnProperty(t)&&("object"==i(n[t])?n[t]instanceof Number?o+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":o+=t+" : ["+n[t].length+" values]\r\n":o+=t+" : "+n[t]+"\r\n");return o},getTag:function(e,t){if(a(e))return e.exifdata[t]},getAllTags:function(e){if(!a(e))return{};var t,n=e.exifdata,i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},getData:function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(a(e)?t&&t.call(e):l(e,t),!0)},Tags:e,TiffTags:t,GPSTags:n,StringValues:o}}();e.exports=o},UAnq:function(e,t,n){e.exports='<div class="model-list-style" name="{{getIdentityName()}}" ng-class="{\'view\':view}" ng-init="init()">\n    '+n("1maE")+'\n    <div ng-if="client === \'mobile\'" class="model-mobile-container" ng-include="\'model_mobile.html\'"></div>\n    <ui-view ng-if="!$dialog"></ui-view>\n</div>\n\n\x3c!--mobile--\x3e\n<script type="text/ng-template" id="model_mobile.html">\n    <div class="model-mobile-page" ng-class="{\'state\':mode == \'state\'}">\n        <div class="model-mobile-body">\n            <img ng-if="background_img_mobile" ng-src="{{background_img_mobile}}" alt="background" class="top-background">\n            '+n("d4O/")+"\n            "+n("+JCO")+"\n            "+n("sLJd")+"\n        </div>\n    </div>\n<\/script>\n"},UTk3:function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog" ng-init="init()">\n    '+n("IGAs")+"\n</div>\n"},UY7m:function(e,t,n){var i,o,a,l=n("o+MX"),r=n("/FZm"),c=n("Kwsy"),s=n("TEMH"),d=n("lHQ6"),u=n("ZbhI");!function(_){"use strict";o=[n("KHwQ"),n("wd/R")],void 0===(a="function"==typeof(i=function(e,t){e.module("ui.bootstrap.datetimepicker",[]).constant("dateTimePickerConfig",{dropdownSelector:null,minuteStep:1,minView:"minute",startView:"day"}).directive("datetimepicker",["$log","dateTimePickerConfig",function(n,i){function o(){this.dateValue=(new Date).getTime(),this.selectable=!0;var e=["dateValue","display","active","selectable","past","future"];for(var t in arguments[0])u(e).call(e,t)>=0&&(this[t]=arguments[0][t])}return{restrict:"E",require:"ngModel",template:'\n                <div class="datetimepicker table-responsive" ng-class="minute&&isPickTime?\'has-minute-picker\':hour&&isPickTime?\'has-hour-picker\':\'\'">\n                    <div class="picker-body">\n                        <table class="table table-striped" ng-style="{\'width\': isPickTime? hour?\'294px\':\'360px\' : \'\'}">\n                            <thead>\n                                <tr class="table-header">\n                                    <th class="left"><div data-ng-click="changeView(data.currentView, data.leftDate, $event)" data-ng-show="data.leftDate.selectable"><i class="glyphicon icon-hcm-arrow-left"/></div></th>\n                                    <th class="switch" colspan="5" data-ng-show="data.previousViewDate.selectable" data-ng-click="changeView(data.previousView, data.previousViewDate, $event)"><span>{{ data.previousViewDate.display }}</span></th>\n                                    <th class="right"><div data-ng-click="changeView(data.currentView, data.rightDate, $event)" data-ng-show="data.rightDate.selectable"><i class="glyphicon icon-hcm-arrow-right"/></div></th>\n                                </tr>\n                                <tr class="header-weekday">\n                                    <th class="dow" data-ng-repeat="day in data.dayNames" >{{ day }}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr data-ng-if="data.currentView !== \'day\'" >\n                                    <td colspan="7" >\n                                        <span class="{{ data.currentView }}"\n                                            data-ng-repeat="dateObject in data.dates"\n                                            data-ng-class="{\n                                                active: dateObject.active,\n                                                past: dateObject.past,\n                                                future: dateObject.future,\n                                                disabled: !dateObject.selectable\n                                            }"\n                                            data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span>\n                                    </td>\n                                </tr>\n                                <tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">\n                                    <td data-ng-repeat="dateObject in week.dates"\n                                        data-ng-click="changeView(data.nextView, dateObject, $event)"\n                                        class="day"\n                                        data-ng-class="{\n                                            disabled: !dateObject.selectable,\n                                            active: dateObject.active,\n                                            past: dateObject.past,\n                                            future: dateObject.future\n                                        }"\n                                    >{{ dateObject.display }}</td>\n                                </tr>\n                            </tbody>\n                        </table>\n\n\n                        <div class="time-picker-panel" ng-if="isPickTime">\n                            <div class="time-picker-header" ng-style="{\'opacity\':minute? 1:0}" ng-bind="getTimeDisplay()"></div>\n                            <div class="time-picker-body">\n                                <ul class="time-picker-panel-column" ng-style="{\'border-right\':minute?\'1px solid #D8DBDE\':\'none\', \'padding-right\':minute?\'8px\':\'0\'}">\n                                    <li ng-repeat="dateObject in hour.dates"\n                                        class="time-picker-panel-cell-inner"\n                                        ng-class="{\n                                            active: dateObject.active,\n                                            past: dateObject.past,\n                                            future: dateObject.future,\n                                            disabled: !dateObject.selectable\n                                        }"\n                                        ng-click="selectTime(\'hour\', dateObject, $event)">{{ dateObject.display }}</li>\n                                </ul>\n                                <ul class="time-picker-panel-column" ng-if="minute">\n                                    <li ng-repeat="dateObject in minute.dates"\n                                        class="time-picker-panel-cell-inner"\n                                        ng-class="{\n                                            active: dateObject.active,\n                                            past: dateObject.past,\n                                            future: dateObject.future,\n                                            disabled: !dateObject.selectable\n                                        }"\n                                        ng-click="selectTime(\'minute\', dateObject, $event)">{{ dateObject.display }}</li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n                   \n                    <div class="picker-footer" ng-if="[\'year\', \'month\', \'quarter\', \'day\'].includes(data.currentView)" ng-click="stopPropagation($event)">\n                        <div class="footer-btn"\n                            ng-click="setToday(\'today\', $event)"\n                            ng-if="enableToday"\n                            hc-title="将日期设置为今日" options="{mode: \'tip\', seconds: 0}"\n                            ng-class="{\'last\':!enableTillNow}">\n                            <div class="label">今天</div>\n                        </div>\n                        <div class="footer-btn last" ng-click="setToday(\'tillNow\', $event)" ng-if="enableTillNow"\n                            hc-title="表示事件尚未发生(例如尚未离职)" options="{mode: \'tip\', seconds: 0}">\n                            <div class="label">{{ tillNowTip || \'至今\' }}</div>\n                        </div>\n                        <div class="footer-btn" ng-click="setTime(\'tillNow\', $event)" ng-class="{\'disable\': !canConfirm()}" ng-show="hour">\n                            <div class="label">{{\'确定\'}} </div>   \n                        </div>\n                    </div>\n                </div>',scope:{onSetTime:"&",beforeRender:"&",model:"=ngModel"},replace:!0,link:function(a,_,p,m){var f={};p.datetimepickerConfig&&(f=a.$parent.$eval(p.datetimepickerConfig));var h={};e.extend(h,i,f),function(t){var i=["startView","minView","minuteStep","dropdownSelector","enableToday","enableTillNow","tillNowTip","enabledDate","disabledYear"];for(var o in t)if(u(i).call(i,o)<0)throw new Error("invalid option: ".concat(o));var a=["minute","hour","day","month","quarter","halfYear","year"];if(u(a).call(a,t.startView)<0)throw"invalid startView value: ".concat(t.startView);if(u(a).call(a,t.minView)<0)throw"invalid minView value: ".concat(t.minView);if(u(a).call(a,t.minView)>u(a).call(a,t.startView))throw"startView must be greater than minView";if(!e.isNumber(t.minuteStep))throw"minuteStep must be numeric";if(t.minuteStep<=0||t.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==t.dropdownSelector&&!e.isString(t.dropdownSelector))throw"dropdownSelector must be a string";null===t.dropdownSelector||"undefined"!=typeof jQuery&&"function"==typeof jQuery().dropdown||(n.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly."),delete t.dropdownSelector)}(h),a.enableToday=h.enableToday,a.enableTillNow=h.enableTillNow,a.tillNowTip=h.tillNowTip,a.disabledYear=h.disabledYear;var g=h.enabledDate||function(){return!0},v=function(e){var n=10*d(t.utc(e).year()/10,10);return t.utc(e).year(n).startOf("year")},b={year:function(e){for(var n=t.utc(e).startOf("year"),i=10*d(n.year()/10,10),a=t.utc(v(e)).subtract(1,"year").startOf("year"),l=m.$modelValue?t(m.$modelValue).year():0,r={currentView:"year",nextView:"year"===h.minView?"setTime":"quarter"===h.minView?"quarter":"halfYear"===h.minView?"halfYear":"month",previousViewDate:new o({dateValue:null,display:i+"-"+(i+9)}),leftDate:new o({dateValue:t.utc(a).subtract(9,"year").valueOf()}),rightDate:new o({dateValue:t.utc(a).add(11,"year").valueOf()}),dates:[]},c=0;c<12;c+=1){var s=t.utc(a).add(c,"years"),u=g(s,"years"),_={dateValue:s.valueOf(),display:s.format("YYYY"),past:s.year()<i,future:s.year()>i+9,active:s.year()===l,selectable:u};r.dates.push(new o(_))}return r},halfYear:function(e){var n=t.utc(e),i=t.utc(e).startOf("year"),a=v(e),l=0;m.$modelValue&&(l=t(m.$modelValue).month()<6?t(m.$modelValue).format("YYYY")+"-H1":t(m.$modelValue).format("YYYY")+"-H2");var r={previousView:h.disabledYear?void 0:"year",currentView:"halfYear",nextView:"setTime",previousViewDate:new o({dateValue:a.valueOf(),display:i.format("YYYY")}),leftDate:new o({dateValue:t.utc(i).subtract(1,"year").valueOf(),selectable:g(t.utc(n).subtract(1,"year"),"years")}),rightDate:new o({dateValue:t.utc(i).add(1,"year").valueOf(),selectable:g(t.utc(n).add(1,"year"),"years")}),dates:[]},c=t.utc(i),s=t.utc(i).add(6,"months");return r.dates.push(new o({dateValue:c.valueOf(),display:"zh_cn"===window.hcm_language?"上半年":"H1",active:c.format("YYYY")+"-H1"===l,selectable:g(c,"halfYears")})),r.dates.push(new o({dateValue:s.valueOf(),display:"zh_cn"===window.hcm_language?"下半年":"H2",active:s.format("YYYY")+"-H2"===l,selectable:g(s,"halfYears")})),r},quarter:function(e){for(var n=t.utc(e),i=t.utc(e).startOf("year"),a=v(e),l=m.$modelValue?t(m.$modelValue).format("YYYY-Q"):0,r={previousView:h.disabledYear?void 0:"year",currentView:"quarter",nextView:"setTime",previousViewDate:new o({dateValue:a.valueOf(),display:i.format("YYYY")}),leftDate:new o({dateValue:t.utc(i).subtract(1,"year").valueOf(),selectable:g(t.utc(n).subtract(1,"year"),"years")}),rightDate:new o({dateValue:t.utc(i).add(1,"year").valueOf(),selectable:g(t.utc(n).add(1,"year"),"years")}),dates:[]},c=["一","二","三","四"],s=0;s<4;s+=1){var d=t.utc(i).add(s,"quarters"),u=g(d,"quarters"),_={dateValue:d.valueOf(),display:"zh_cn"===window.hcm_language?"".concat(c[s],"季度"):"Q".concat(d.format("Q")),active:d.format("YYYY-Q")===l,selectable:u};r.dates.push(new o(_))}return r},month:function(e){for(var n=t.utc(e),i=t.utc(e).startOf("year"),a=v(e),l=m.$modelValue?t(m.$modelValue).format("YYYY-MMM"):0,r={previousView:h.disabledYear?void 0:"year",currentView:"month",nextView:"month"===h.minView?"setTime":"day",previousViewDate:new o({dateValue:a.valueOf(),display:i.format("YYYY")}),leftDate:new o({dateValue:t.utc(i).subtract(1,"year").valueOf(),selectable:g(t.utc(n).subtract(1,"year"),"years")}),rightDate:new o({dateValue:t.utc(i).add(1,"year").valueOf(),selectable:g(t.utc(n).add(1,"year"),"years")}),dates:[]},c=0;c<12;c+=1){var s=t.utc(i).add(c,"months"),d=g(s,"months"),u={dateValue:s.valueOf(),display:s.format("MMM"),active:s.format("YYYY-MMM")===l,selectable:d};r.dates.push(new o(u))}return r},day:function(e){for(var n=t.utc(e),i=t.utc(n).startOf("month"),a=t.utc(n).startOf("year"),l=t.utc(n).endOf("month"),r=t.utc(i).subtract(Math.abs(i.weekday()),"days"),c=m.$modelValue?t(m.$modelValue).format("YYYY-MMM-DD"):"",s={previousView:"month",currentView:"day",nextView:"day"===h.minView?"setTime":"hour",previousViewDate:new o({dateValue:a.valueOf(),display:h.disabledYear?i.format("MM"):i.format("YYYY-MM")}),leftDate:new o({dateValue:t.utc(i).subtract(1,"months").valueOf(),selectable:g(t.utc(n).subtract(1,"months"),"months")}),rightDate:new o({dateValue:t.utc(i).add(1,"months").valueOf(),selectable:g(t.utc(n).add(1,"months"),"months")}),dayNames:[],weeks:[]},d=0;d<7;d+=1)s.dayNames.push(t.utc().weekday(d).format("dd"));var u;u=Math.round((l-r)/1e3/60/60/24);var _;_=Math.ceil(u/7);for(var p=0;p<_;p+=1){for(var f={dates:[]},v=0;v<7;v+=1){var b=t.utc(r).add(7*p+v,"days"),y=g(b,"days"),w={dateValue:b.valueOf(),display:b.format("D"),active:b.format("YYYY-MMM-DD")===c,past:b.isBefore(i),future:b.isAfter(l),selectable:!(b.isBefore(i)||b.isAfter(l))&&y};f.dates.push(new o(w))}s.weeks.push(f)}return s},hour:function(e){for(var n=t.utc(e).startOf("day"),i=t.utc(n).startOf("month"),a=m.$modelValue?t(m.$modelValue).format("YYYY-MM-DD HH"):"",l={previousView:"day",currentView:"hour",nextView:"hour"===h.minView?"hour":"minute",previousViewDate:new o({dateValue:i.valueOf(),display:n.format("ll")}),leftDate:new o({dateValue:t.utc(n).subtract(1,"days").valueOf(),selectable:g(t.utc(n).subtract(1,"days"),"days")}),rightDate:new o({dateValue:t.utc(n).add(1,"days").valueOf(),selectable:g(t.utc(n).add(1,"days"),"days")}),dates:[]},r=0;r<24;r+=1){var c=t.utc(n).add(r,"hours"),s=g(c,"hours"),d={dateValue:c.valueOf(),display:c.format("HH"),active:c.format("YYYY-MM-DD HH")===a,selectable:s};l.dates.push(new o(d))}return l},minute:function(e){for(var n=t.utc(e).startOf("hour"),i=t.utc(n).startOf("day"),a=m.$modelValue?t(m.$modelValue).format("YYYY-MM-DD HH:mm"):"",l={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new o({dateValue:i.valueOf(),display:n.format("lll")}),leftDate:new o({dateValue:t.utc(n).subtract(1,"hours").valueOf(),selectable:g(t.utc(n).subtract(1,"hours"),"hours")}),rightDate:new o({dateValue:t.utc(n).add(1,"hours").valueOf(),selectable:g(t.utc(n).add(1,"hours"),"hours")}),dates:[]},r=60/h.minuteStep,c=0;c<r;c+=1){var s=t.utc(n).add(c*h.minuteStep,"minute"),d=g(s,"minute"),u={dateValue:s.valueOf(),display:s.format("mm"),active:s.format("YYYY-MM-DD HH:mm")===a,selectable:d};l.dates.push(new o(u))}return l},setTime:function(e){var t=new Date(e),n=new Date(t.getTime()+6e4*t.getTimezoneOffset()),i=m.$modelValue;return m.$setViewValue(n),h.dropdownSelector&&jQuery(h.dropdownSelector).dropdown("toggle"),a.onSetTime({newDate:n,oldDate:i}),b[h.startView](e)}},y=function(e){var n=e?t(e).toDate():new Date;return n.getTime()-6e4*n.getTimezoneOffset()};a.setToday=function(e,t){var n,i=function(e,t){a.changeView(e,new o({dateValue:y(t)}))};if(t&&(t.stopPropagation(),t.preventDefault()),"today"===e){n=new Date;var l=y((new Date).getTime());m.$setViewValue(n),a.data=b.day(l),a.hour&&a.setHour(l),a.minute&&a.setMinute(l),a.hour||i("setTime",n)}else"tillNow"===e&&i("setTime",n=new Date("2199/12/31 23:59:59"))},a.canConfirm=function(){var e,t,n;return a.minute&&a.hour?s(e=a.hour.dates).call(e,(function(e){return e.active}))>-1&&s(t=a.minute.dates).call(t,(function(e){return e.active}))>-1:!a.hour||s(n=a.hour.dates).call(n,(function(e){return e.active}))>-1},a.stopPropagation=function(e){e.stopPropagation()},a.setHour=function(e){for(var n=t.utc(e).startOf("day"),i=m.$modelValue?t(m.$modelValue).format("YYYY-MM-DD HH"):"",o=0;o<24;o+=1){var l=t.utc(n).add(o,"hours"),r=g(l,"hours");a.hour.dates[o].dateValue=l.valueOf(),a.hour.dates[o].active=l.format("YYYY-MM-DD HH")===i,a.hour.dates[o].selectable=r}},a.setMinute=function(e){for(var n=t.utc(e).startOf("hour"),i=m.$modelValue?t(m.$modelValue).format("YYYY-MM-DD HH:mm"):"",o=60/h.minuteStep,l=0;l<o;l+=1){var r=t.utc(n).add(l*h.minuteStep,"minute"),c=g(r,"minute");a.minute.dates[l].dateValue=r.valueOf(),a.minute.dates[l].active=r.format("YYYY-MM-DD HH:mm")===i,a.minute.dates[l].selectable=c}},a.selectTime=function(e,t,n){n&&(n.stopPropagation(),n.preventDefault());var i="hour"===e?60*m.$modelValue.getMinutes()*1e3:0,o=new Date(t.dateValue+i),l=new Date(o.getTime()+6e4*o.getTimezoneOffset());m.$setViewValue(l),"hour"===e?(a.setHour(t.dateValue),a.minute&&a.setMinute(t.dateValue),c((function(){var e,t,n;console.log(r(e=r(_).call(_,".time-picker-panel-column").eq(0)).call(e,".time-picker-panel-cell-inner.active")[0]),null===(t=r(n=r(_).call(_,".time-picker-panel-column").eq(0)).call(n,".time-picker-panel-cell-inner.active")[0])||void 0===t||t.scrollIntoView({behavior:"smooth"})}),100)):"minute"===e&&(a.setMinute(t.dateValue),c((function(){var e,t;null===(e=r(t=r(_).call(_,".time-picker-panel-column").eq(1)).call(t,".time-picker-panel-cell-inner.active")[0])||void 0===e||e.scrollIntoView({behavior:"smooth"})}),100))},a.changeView=function(e,t,n){if(n&&(n.stopPropagation(),n.preventDefault()),a.isPickTime=!1,"hour"===e&&t.selectable){a.isPickTime=!0;var i=60*m.$modelValue.getHours()*60*1e3,o=60*m.$modelValue.getMinutes()*1e3,l=new Date(t.dateValue+i+o),r=new Date(l.getTime()+6e4*l.getTimezoneOffset());return m.$setViewValue(r),a.data=b.day(t.dateValue),a.hour&&a.setHour(t.dateValue),a.minute&&a.setMinute(t.dateValue+i),void a.scrollIntoView()}if(e&&t.dateValue>-1/0&&t.selectable&&b[e]){var c=b[e](t.dateValue),s=[];if(c.weeks)for(var d=0;d<c.weeks.length;d+=1)for(var u=c.weeks[d],_=0;_<u.dates.length;_+=1){var p=u.dates[_];s.push(p)}"hour"===c.nextView&&(a.isPickTime=!0,a.hour=b.hour(t.dateValue),"minute"===h.minView&&(a.minute=b.minute(t.dateValue)),a.scrollIntoView()),a.beforeRender({$view:c.currentView,$dates:c.dates||s,$leftDate:c.leftDate,$upDate:c.previousViewDate,$rightDate:c.rightDate}),a.data=c}},a.scrollIntoView=function(){c((function(){var e,t;null===(e=r(t=r(_).call(_,".time-picker-panel-column").eq(0)).call(t,".time-picker-panel-cell-inner.active")[0])||void 0===e||e.scrollIntoView({behavior:"smooth"}),c((function(){var e,t;null===(e=r(t=r(_).call(_,".time-picker-panel-column").eq(1)).call(t,".time-picker-panel-cell-inner.active")[0])||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500)}))},a.setTime=function(){var e="minute"===h.minView?a.minute.dates:a.hour.dates,t=r(e).call(e,(function(e){return!0===e.active}));b.setTime(t.dateValue)},a.getTimeDisplay=function(){var e,t,n,i,o,c;return l(e="".concat((null===(t=r(n=a.hour.dates).call(n,(function(e){return e.active})))||void 0===t?void 0:t.display)||"00",":")).call(e,(null===(i=a.minute)||void 0===i||null===(o=r(c=i.dates).call(c,(function(e){return e.active})))||void 0===o?void 0:o.display)||"00")},m.$render=function(){a.changeView(h.startView,new o({dateValue:y(m.$viewValue)}))}}}}])})?i.apply(t,o):i)||(e.exports=a)}()},"UZ+H":function(e,t){e.exports='<div class="hc-swiper-container">\n    <div class="swiper-wrapper">\n        <div class="content swiper-slide" ng-repeat="item in $ctrl.swiperData" data-id={{item.id}}>\n            <div class="flex-left" ng-mouseenter="$ctrl.stopSwipe()" ng-mouseleave="$ctrl.startSwipe()">\n                <div class="swiper-text">\n                    <div class="icon icon-activity"></div>\n                    <span class="text" ng-bind-html="$ctrl.getSwiperContent(item)|toTrusted"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},Uh7L:function(e,t){e.exports='<style>\n    .select-date-month {\n        display: inline-block;\n        width: 130px;\n        padding: 1px;\n        height: 26px;\n        line-height: 18px;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        background-color: #fff;\n    }\n\n    .select-date-month .select-date-input {\n        margin-left: 10px;\n        width: 90px;\n        height: 22px;\n        border: 0px;\n        outline: none;\n        font-size: 12px;\n        display: inline-block;\n        padding: 0;\n    }\n\n    .select-date-month .select-date-input-button {\n        float: right;\n        margin: 4px 5px 0px 0px;\n        cursor: pointer;\n    }\n\n    .select-date-month .select_panel {\n        position: absolute;\n        top: 50px;\n        background-color: #fff;\n        border-radius: 2px;\n        box-shadow: 0 0 17px rgba(0,0,0,.07);\n        z-index: 1201;\n    }\n\n    .select-date-month .table-striped thead {\n        border-bottom: 1px solid #ccc;\n    }\n</style>\n<div class="select-date-month" ng-init="init()">\n    <input class="select-date-input" type="text" ng-model="date_month_year_minute" placeholder="{{object.placeholder}}" />\n\n    <div class="icon icon-hcm-calendar select-date-input-button" ng-click="show_select_panel($event)"></div>\n    <div ng-if="is_show_select_panel" class="select_panel">\n        <datetimepicker data-ng-model="value" data-datetimepicker-config="{ startView:\'minute\', minView:\'minute\' , minuteStep:10}" data-on-set-time="set_date(newDate, oldDate)"></datetimepicker>\n    </div>\n</div>\n'},UmGy:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("sMBO"),n("rB9j"),n("EnZy");var i=n("5PDf"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("eLKs"),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("OBge"),_=n.n(u),p=n("mrSG"),m=n("XQQm"),f=n("2Ql6"),h=n("06j9"),g=n("8Auy"),v=function(e){function t(t,n,i,o,a,l,r){var c=e.call(this,t,n,i,o,r)||this;return c.scope=t,c.rootScope=n,c.hcDialog=i,c.hcForm=o,c.metaVisService=a,c.dataService=l,c.$filter=r,c.metaParse=function(e){var t,n,i,o,a={meta_info:null===(o=null===(i=null===(n=null===(t=c.scope.params)||void 0===t?void 0:t.options)||void 0===n?void 0:n.data)||void 0===i?void 0:i.data)||void 0===o?void 0:o.source,SCOPE:c};return g.a.jsonEval(e,a)},c}return Object(p.d)(t,e),t.prototype.$onInit=function(){return Object(p.c)(this,void 0,_.a,(function(){var t;return Object(p.e)(this,(function(n){var i;switch(n.label){case 0:return(t=angular.copy(f)).fields=d()(i=t.fields).call(i,h),this.setting_form_meta=this.metaParse(t),[4,e.prototype.$onInit.call(this)];case 1:return n.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(p.c)(this,void 0,_.a,(function(){var t,n=this;return Object(p.e)(this,(function(i){var o,a,l,r,s,d;switch(i.label){case 0:return[4,e.prototype.getMeta.call(this)];case 1:return(t=i.sent()).getKey("aggr.ag").options.list=this.metaVisService.AGGR_MODE_LIST,t.getKey("drill_state").options.selector=function(e){return Object(p.c)(n,void 0,void 0,(function(){var t;return Object(p.e)(this,(function(n){switch(n.label){case 0:return[4,this.getModelStateList(null===(t=this.form_model.data)||void 0===t?void 0:t.drill_model,e)];case 1:return[2,n.sent()]}}))}))},t.getKey("drill_state").options.selectorMapper=function(e){return Object(p.c)(n,void 0,void 0,(function(){return Object(p.e)(this,(function(t){return[2,{id:e,name:e}]}))}))},t.getKey("drill_filter").options.refer_data=[{label:"可选变量",items:c()(o=this.getFilterDictParamRefer).call(o,this)},{label:"可选公式",items:c()(a=this.getReportFormula).call(a,this)}],t.getKey("jump_params").options.refer_data=[{label:"可选变量",items:c()(l=this.getFilterDictParamRefer).call(l,this)},{label:"可选公式",items:c()(r=this.getReportFormula).call(r,this)}],t.getKey("total_expression").options.computeService.getFieldList=c()(s=this.fetchTotalRefer).call(s,this),t.getKey("avg_expression").options.computeService.getFieldList=c()(d=this.fetchTotalRefer).call(d,this),[2,t]}}))}))},t.prototype.getReportFormula=function(){return Object(p.c)(this,void 0,void 0,(function(){var e;return Object(p.e)(this,(function(t){var n;switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.formula.list",{domain:"base.report"})];case 1:return e=t.sent(),[2,l()(n=e.list).call(n,(function(e){return{label:e.name,value:e.name,category:e.category,type:"func",helper:{title:e.description,description:e.doc}}}))]}}))}))},t.prototype.getFilterDictParamRefer=function(){var e,t;return Object(p.c)(this,void 0,void 0,(function(){var n;return Object(p.e)(this,(function(i){var a,r;return n=l()(a=null!==(e=o()(this.options.data))&&void 0!==e?e:[]).call(a,(function(e){return{label:e.label,category:"上下文参数",value:e.key,type:"var"}})),[2,n=d()(n).call(n,l()(r=null!==(t=this.options.data.dim)&&void 0!==t?t:[]).call(r,(function(e){return{label:e.label,category:"维度参数",value:e.key,type:"var"}})))]}))}))},t.prototype.fetchTotalRefer=function(){return Object(p.c)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(e){var t,n,i;return[2,[{name:"子列表信息",key:"summary",fields:[{key:"SUB_LENGTH",label:"列表长度"}]},{name:"子列表数据",key:"detail",fields:d()(t=l()(n=this.options.data.dim).call(n,(function(e){return{label:e.label,key:e.key}}))).call(t,l()(i=this.options.data.aggr).call(i,(function(e){return{label:e.label,key:e.key}})))}]]}))}))},t.prototype.getModelStateList=function(e,t){return Object(p.c)(this,void 0,_.a,(function(){var n;return Object(p.e)(this,(function(i){var o;switch(i.label){case 0:return e?[4,this.dataService.callHcmOpenApi("hcm.paas.object.layout.list?category="+encodeURIComponent(e),{biz_type:"list",filter_dict:{model:e,biz_type:"list"},filter_str:t})]:[2,[]];case 1:return n=i.sent(),[2,l()(o=n.list).call(o,(function(e){var t=e.name.split(".");return t.length>=5?{id:t[3],name:t[3]}:{id:null,name:"默认"}}))]}}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","metaVisService","dataService","$filter"],t}(m.a),b=n("z/LF"),y=n.n(b);t.a={title:"统计设置",controller:v,template:y.a,size:"small",name:"StatInfoSetting"}},V5EL:function(e,t){e.exports='<div class="show-img-page" id="show-img-page" ng-init="init()">\n    <div class="img-container"  id="with-water-mark" ng-if="!(client===\'mobile\' && mobile_show_mode === \'scroll\')">\n        <img id="img-block" class="img-block"\n             ng-mousedown="mousedown($event)"\n             ng-mousemove="mousemove($event)"\n             ng-mouseup="mouseup($event)"\n        />\n        <img id="img-block-right" class="img-block"\n             ng-mousedown="mousedown($event)"\n             ng-mousemove="mousemove($event)"\n             ng-mouseup="mouseup($event)"\n             ng-if="double_display"\n        />\n    </div>\n\n    <div class="imgs-container" id="with-water-mark" ng-if="client===\'mobile\' && mobile_show_mode === \'scroll\'">\n        <img ng-repeat="_item in imgs track by $index"\n        data-src={{_item}} \n                ng-mousedown="mousedown($event)"\n                ng-mousemove="mousemove($event)"\n                ng-mouseup="mouseup($event)"\n        />\n        <div ng-if="index_scroll < imgs.length">加载中...</div>\n    </div>\n\n    <div class="desc-bar" ng-if="client === \'pc\'">{{current_page}}/{{total_page}}</div>\n    <div class="cancel icon-hcm-delete" ng-click="close()" ng-if="client===\'pc\'"></div>\n\n\n    <div class="slide-bar" ng-if="client == \'pc\'">\n        <div class="slide-btn icon-hcm-arrow-left left" ng-click="previousPage()"></div>\n        <div class="slide-btn icon-hcm-arrow-right right" ng-click="nextPage()"></div>\n    </div>\n\n    <div class="zoom-block" ng-if="client == \'pc\'" ng-mouseover="zoomMouseover()" ng-mouseleave="zoomMouseleave()">\n        <div class="icon icon-hcm-revocation" ng-click="rotatePic()" ng-if="!double_display_setting"></div>\n        <div class="icon icon-hcm-changeuser" ng-click="switchDisplay()" ng-if="double_display_setting"></div>\n        <div class="icon icon-hcm-copy" ng-if="is_admin" ng-click="copyImgIndex()"></div>\n        <div class="icon icon-hcm-add" ng-click="add()"></div>\n        <div class="icon icon-hcm-minus" ng-click="minus()"></div>\n        <div class="icon icon-hcm-download" ng-click="download()" ng-if="show_download"></div>\n    </div>\n</div>\n\n'},VNqs:function(e,t,n){var i=n("RKTd");window.app.directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceService",function(e,t,n,o,a,l){var r={};return r.baseUrl&&(tinymce.baseURL=r.baseUrl),{require:["ngModel","^?form"],priority:599,link:function(c,s,d,u){if(o.tinymce){var _,p,m=u[0],f=u[1]||null,h={debounce:!0},g=function(t){var n,o=i(n=t.getContent({format:h.format})).call(n);o=a.trustAsHtml(o),m.$setViewValue(o),e.$$phase||c.$digest()},v=l.getUniqueId();d.$set("id",v),_={},angular.extend(_,c.$eval(d.uiTinymce));var b,y=function(e){n.cancel(b),b=n((function(){var t;(t=e).isDirty()&&(t.save(),g(t))}),400)},w={setup:function(t){t.on("init",(function(){m.$render(),m.$setPristine(),m.$setUntouched(),f&&f.$setPristine()})),t.on("ExecCommand change NodeChange ObjectResized",(function(){if(!h.debounce)return t.save(),void g(t);y(t)})),t.on("blur",(function(){s[0].blur(),m.$setTouched(),e.$$phase||c.$digest()})),t.on("remove",(function(){s.remove()})),r.setup&&r.setup(t,{updateView:g}),_.setup&&_.setup(t,{updateView:g})},format:_.format||"html",selector:"#"+d.id};angular.extend(h,r,_,w),n((function(){h.baseURL&&(tinymce.baseURL=h.baseURL);var e=tinymce.init(h);e&&"function"==typeof e.then?e.then((function(){k(c.$eval(d.ngDisabled))})):k(c.$eval(d.ngDisabled))})),m.$formatters.unshift((function(e){return e?a.trustAsHtml(e):""})),m.$parsers.unshift((function(e){return e?a.getTrustedHtml(e):""})),m.$render=function(){$();var e=m.$viewValue?a.getTrustedHtml(m.$viewValue):"";p&&p.getDoc()&&(p.setContent(e),p.fire("change"))},d.$observe("disabled",k);var x=c.$on("$tinymce:refresh",(function(e,n){var i=d.id;if(angular.isUndefined(n)||n===i){var o=s.parent(),a=s.clone();a.removeAttr("id"),a.removeAttr("style"),a.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,i),o.append(t(a)(c)),x()}}));c.$on("$destroy",(function(){$(),p&&(p.remove(),p=null)}))}function k(e){var t;e?($(),p&&p.getBody().setAttribute("contenteditable",!1)):($(),p&&!(null===(t=p.settings)||void 0===t?void 0:t.readonly)&&p.getDoc()&&p.getBody().setAttribute("contenteditable",!0))}function $(){p||(p=tinymce.get(d.id))}}}}]).service("uiTinymceService",[function(){return new function(){var e=0;return{getUniqueId:function(){return"ui-tinymce-"+ ++e}}}}])},VxaH:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("pNMO"),n("4Brf"),n("TeQF"),n("sMBO");var i=n("FLGM"),o=n.n(i),a=n("eLKs"),l=n.n(a),r=n("OBge"),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("mrSG"),_=n("ntX9"),p=(n("27k5"),function(){function e(e,t,n,i,o,a,l){this.scope=e,this.rootScope=t,this.hcDialog=n,this.hcForm=i,this.dataService=o,this.dataBlockService=a,this.filter=l}return e.prototype.$onInit=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){switch(e.label){case 0:return[4,this.initOptions()];case 1:return e.sent(),[4,this.initFormBefore()];case 2:return e.sent(),[4,this.initForm()];case 3:return e.sent(),[4,this.refreshViewModel()];case 4:return e.sent(),[4,this.initFormAfter()];case 5:return e.sent(),[2]}}))}))},e.prototype.initOptions=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return this.parent=this.scope.params.parent,this.options=this.scope.params.options||{},this.setting_panel_data=this.scope.params.data||{},[2]}))}))},e.prototype.initFormBefore=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.initFormAfter=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.initForm=function(){return Object(u.c)(this,void 0,void 0,(function(){var e,t,n,i,o,a;return Object(u.e)(this,(function(l){switch(l.label){case 0:return e=this,i=(n=this.hcForm.createForm()).$setMeta,[4,this.getMeta()];case 1:return o=[l.sent()],[4,this.getGroupMeta()];case 2:return a=(t=i.apply(n,d()(o).call(o,[l.sent()])).$setTip(this.options.tip)).$setData,[4,this.getData()];case 3:return e.form_model=a.apply(t,[l.sent()]),[2]}}))}))},e.prototype.refreshViewModel=function(e){return void 0===e&&(e=null),Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.getData=function(){return Object(u.c)(this,void 0,c.a,(function(){return Object(u.e)(this,(function(e){return[2,this.setting_panel_data]}))}))},e.prototype.getMeta=function(){return Object(u.c)(this,void 0,c.a,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.getGroupMeta=function(){return Object(u.c)(this,void 0,c.a,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.getTemplateRefer=function(){return Object(u.c)(this,void 0,void 0,(function(){var e,t=this;return Object(u.e)(this,(function(n){var i;return e=this,[2,[{label:"可选变量",items:function(){return Object(u.c)(t,void 0,void 0,(function(){var t,n;return Object(u.e)(this,(function(i){switch(i.label){case 0:return[4,e.getContextRefer()];case 1:return n=d()(t=i.sent()),[4,e.getDataRefer()];case 2:return[2,n.apply(t,[i.sent()])]}}))}))}},{label:"可选公式",items:l()(i=this.getReportFormula).call(i,this)}]]}))}))},e.prototype.getReportFormula=function(){return Object(u.c)(this,void 0,void 0,(function(){var e;return Object(u.e)(this,(function(t){var n;switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.formula.list",{domain:"base.report"})];case 1:return e=t.sent(),[2,o()(n=e.list).call(n,(function(e){return{label:e.name,value:e.name,category:e.category,type:"func",helper:{title:e.description,description:e.doc}}}))]}}))}))},e.prototype.getContextRefer=function(){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){var t;return this.options.context_meta?[2,o()(t=this.options.context_meta).call(t,(function(e){return{label:e.label,category:"上下文参数",value:e.key,type:"var"}}))]:[2,[]]}))}))},e.prototype.getDataRefer=function(){return Object(u.c)(this,void 0,void 0,(function(){var e,t,n,i,a,l,r,c,s,_;return Object(u.e)(this,(function(p){switch(p.label){case 0:if(e=[],!this.form_model.data.data)return[3,8];n=function(n){return Object(u.e)(this,(function(a){switch(a.label){case 0:return[4,i.dataBlockService.getAvailFields(n)];case 1:return t=a.sent(),e=d()(e).call(e,o()(t).call(t,(function(e){return{label:e.label,category:n.name?n.name:n.key,value:"main"===n.key?e.value:n.key+"."+e.value,type:"var"}}))),[2]}}))},i=this,p.label=1;case 1:p.trys.push([1,6,7,8]),a=Object(u.i)(this.form_model.data.data),l=a.next(),p.label=2;case 2:return l.done?[3,5]:(r=l.value,[5,n(r)]);case 3:p.sent(),p.label=4;case 4:return l=a.next(),[3,2];case 5:return[3,8];case 6:return c=p.sent(),s={error:c},[3,8];case 7:try{l&&!l.done&&(_=a.return)&&_.call(a)}finally{if(s)throw s.error}return[7];case 8:return[2,e]}}))}))},e.prototype.afterDataBlockSetting=function(e){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(e){return[2]}))}))},e.prototype.dataBlockSetting=function(){return Object(u.c)(this,void 0,void 0,(function(){var e;return Object(u.e)(this,(function(t){return e=this,this.hcDialog.getDialog(_.a).show({data:angular.copy(this.form_model.data.data),context:this.options.context_meta}).then((function(t){e.form_model.data.data=t,e.afterDataBlockSetting(t)})),[2]}))}))},e.prototype.dataBlockMask=function(e){return e?"已定义"+e.length+"个数据块，点击继续定义...":"点击进行数据块定义"},e.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","dataBlockService","$filter"],e}())},VyHM:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("sMBO");var i=n("5PDf"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=(n("07d7"),n("5s+n"),n("p532"),n("zLi2")),c=n.n(r),s=(n("lhJN"),n("srGB"),n("rYan")),d=n("mJ0u");window.app.directive("homeWidgetApplication",(function(){return{restrict:"E",template:n("1KcY"),scope:{model:"="},controller:["$scope","$rootScope","BaseCRUDService","$controller","$hcPaging","queryService","$q","crudSettingService","$hcDialog",function(e,t,n,i,a,l,r,u,_){e.$watch("model.version",(function(t,n){t!==n&&(e.list_model=null,e.list_meta=null,e.list_btn_model=null,e.list_filter_model=null,e.init())})),e.params=e.model.params;var p=n.getModelService(e.params.model);i(s.a,{$scope:e,CRUDService:p,InfoDialog:null}),e.getMetaState=function(){return e.params.state},e.dealRolesErr=function(){e.rolesErr=!0,e.no_content_caption="您的权限不足"},e.checkFetch=function(){return!e.rolesErr},e.getFilterDict=function(){var t,n,i,o=angular.extend((null===(t=e.filter_dict)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.filter_dict)||{},(null===(i=e.params)||void 0===i?void 0:i.filter_dict)||{});return l.transFilterDict(e.all_info_meta,angular.copy(o))},e.getPlanAndFetchData=function(){e.params=e.model.params;var t=p.getQueryFields(e.getMetaState(),"list"),n=u.getAvailablePlan(null,{model:e.params.model,state:e.getMetaState(),biz_type:e.params.biz_type},1,50);r.all([n,t]).then((function(t){var n;e.filter_dict=o()(n=t[0].list).call(n,(function(t){if(e.params.scheme)return t.id===e.params.scheme}))[0]||{};var i=l.transCompleteFields(t[1],e.model_meta.filters),a=c()(i,3);e.trans_complete_fields=a[0],e.all_list_meta=a[1],e.all_info_meta=a[2],e.all_list_meta=e.metaParse(e.all_list_meta),e.list_model.$setColumns(u.mergeSetting(e.all_list_meta,e.filter_dict.config.display_setting,!0)),e.fetchData(),e.initAfter()}))},e.initAdvanceQuery=function(){},e.fetchData=function(){e.checkFetch()&&(e.fetch.getting?e.fetch.waiting=!0:(e.fetch.getting=!0,p.getItemList(null,e.getFilterDict(),e.paging.current_page,e.paging.page_size,e.getExtraProperty()).then((function(t){e.list_model.$setData(t.list),e.paging.total_count=t.count,e.list_model.current_page=e.paging.current_page,e.list_model.page_size=e.paging.page_size,e.fetchDataSuccess(t)})).finally((function(){e.fetch.getting=!1,e.fetch.waiting&&(e.fetchData(),e.fetch.waiting=!1)}))))},e.getPagingParams=function(){return{current_page:1,page_size:5,page_size_list:[5,10]}},e.initBefore=function(){e.params=e.model.params,angular.extend(p,n.getModelService(e.params.model))},e.initAfter=function(){e.list_model.$setRowSelector(0),e.getFilterDict()&&e.fetchData()},e.defaultAction=function(n){e.params.row_click_event&&"jump"!==e.params.row_click_event?_.getDialog(Object(d.a)(e.filter_dict.model,e.filter_dict.model)).show({id:n.id,mode:"view"}).then((function(){e.fetchData()})):e.filter_dict&&e.filter_dict.config&&e.filter_dict.config.page_state&&t.super_go(e.filter_dict.config.page_state,{advance_plan_id:e.params.scheme,model:e.filter_dict.model,meta_state:e.filter_dict.state})},e.setTitle=function(){}}]}}));n("DcX3");var u=n("0HFc"),_=n.n(u),p=(n("3z9W"),function(){function e(){}return e.prototype.$onInit=function(){},e}());window.app.component("homeWidgetCount",{bindings:{model:"<"},template:_.a,controller:p});var m=n("MAKL"),f=n.n(m),h=n("EeX0"),g=n.n(h);window.app.controller("portalApplicationSetCtrl",["$scope","dataService","dataToolService","$hcForm","contextService",function(e,t,n,i,o){e.initScheme=function(){var t=o.getContext("auth");e.is_onlyoneowner=!!t&&"onlyoneowner"in t.roles,e.plugin=e.params,n.getScheme().then((function(t){e.scheme_category_list=t,e.setOperate(),e.set_scheme_form()}))},e.setOperate=function(){e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"确定",func:e.scheme_confirm,default:!0}])},e.refresh_grid=function(){e.add_plugin_config={version:f()(),key:e.plugin.children[0].key,category:e.plugin,shared_type:e.scheme_form.data.shared_type,params:{model:e.scheme_category.model,biz_type:e.scheme_category.biz_type,state:e.scheme_category.state,scheme:e.scheme_category.id,label:e.scheme_form.data.label,row_click_event:e.scheme_form.data.row_click_event}}},e.scheme_confirm=function(){!0===e.scheme_form.$validData()?(e.$dialog.resolve_data(e.add_plugin_config),e.$dialog.dialog_close()):e.show_warning(e.scheme_form.$validData())},e.set_scheme_form=function(){e.scheme_category=null,e.shceme=null;var t=[{component:"hc-super-selector",label:"功能查询方案",key:"scheme_category",options:{required:!0,list:e.scheme_category_list,returnFormat:"name",tip:"如无可选项，请先在功能设置查询方案",change:function(t,n){n&&(e.scheme_category=t.options.originObject,e.scheme_form.data.label=e.scheme_category.state_name,e.refresh_grid())}}},{component:"hc-input",label:"卡片标题",key:"label",options:{required:!0,change:function(t,n){e.add_plugin_config.params.label=n}}},{component:"hc-input-radio",label:"行点击事件",key:"row_click_event",options:{default:"jump",required:!0,hide:function(){var t;return"Announce"!==(null===(t=e.scheme_category)||void 0===t?void 0:t.model)},list:[{name:"跳转功能页面",value:"jump"},{name:"查看具体信息",value:"detail"}],change:function(t,n){e.add_plugin_config.params.row_click_event=n}}}];e.scheme_form=i.createForm().$setMeta(t)}}]);var v={controller:"portalApplicationSetCtrl",template:g.a,title:"新增插件"},b=n("v5fN"),y=n("/FZm"),w=n.n(y),x=n("mrSG"),k=n("o9cu"),$=n.n(k),O=(n("gKGf"),function(){function e(e,t,n,i){var o=this,a=[{key:"advance_plan_id",label:"过滤方案",component:"hc-super-selector",options:{required:!0,selector:function(){return Object(x.c)(o,void 0,void 0,(function(){return Object(x.e)(this,(function(e){switch(e.label){case 0:return[4,n.callHcmOpenApi("common.query.setting.my.all.list",{filter_dict:{},filter_str:null,page_index:1,page_size:50})];case 1:return[2,e.sent().list]}}))}))},selectorMapper:function(e){return Object(x.c)(o,void 0,void 0,(function(){var t;return Object(x.e)(this,(function(i){switch(i.label){case 0:return[4,n.callHcmOpenApi("common.query.setting.my.all.list",{filter_dict:{},filter_str:null,page_index:1,page_size:50})];case 1:return t=i.sent().list,[2,w()(t).call(t,(function(t){return t.id===e}))]}}))}))},change:function(t,n){n?(e.model=n.model,e.state=n.state,e.advancePlanId=n.id):(e.model=null,e.advancePlanId=null)}}},{key:"label",label:"统计标题",component:"hc-input",options:{placeholder:"统计标题",required:!0,hover:!1,data_type:"string",change:function(){e.refreshCount()}}},{key:"type",label:"统计方式",component:"hc-super-selector",options:{list:[{value:"count",label:"计数"},{value:"sum",label:"合计"},{value:"distinct_count",label:"去重计数"},{value:"avg",label:"平均数"}],change:function(t,n){var i,o;n&&"count"!==n?w()(i=e.base_form.fields).call(i,(function(e){return"field"===e.key})).options.readOnly=!1:(w()(o=e.base_form.fields).call(o,(function(e){return"field"===e.key})).options.readOnly=!0,e.base_form.data.field="",e.field=null);e.refreshCount()}}},{key:"field",label:"选择字段",component:"hc-super-selector",options:{selector:function(){return Object(x.c)(o,void 0,void 0,(function(){var t;return Object(x.e)(this,(function(i){var o;switch(i.label){case 0:return[4,n.callHcmOpenApi("hcm.model.get.real.field",{model:null!==(t=e.model)&&void 0!==t?t:e.params.model,state:e.state,biz_type:"list"})];case 1:return[2,l()(o=i.sent().fields).call(o,(function(e){return e.id=e.key,e.name=e.label,e}))]}}))}))},selectorMapper:function(t){return Object(x.c)(o,void 0,void 0,(function(){var i,o;return Object(x.e)(this,(function(a){var r;switch(a.label){case 0:return[4,n.callHcmOpenApi("hcm.model.get.real.field",{model:null!==(o=e.model)&&void 0!==o?o:e.params.model,state:e.state,biz_type:"list"})];case 1:return i=l()(r=a.sent().fields).call(r,(function(e){return e.id=e.key,e.name=e.label,e})),[2,w()(i).call(i,(function(e){return e.key===t}))]}}))}))},change:function(t,n){e.field=n.key,e.refreshCount()},readOnly:!0}}];e.base_form=t.createForm().$setMeta(a),e.count_config={},e.params.advance_plan_id?(e.base_form.$setData(e.params),e.count_config.params=e.params):(e.count_config.category=e.params,e.count_config.key=e.params.children[0].key),e.refreshCount=function(){e.model&&e.base_form.data.type&&e.base_form.data.label&&(e.params.advance_plan_id?e.count_config.params=Object(x.a)(Object(x.a)({},e.params),{field:e.field,model:e.model,state:e.state,advance_plan_id:e.advancePlanId,type:e.base_form.data.type,label:e.base_form.data.label}):e.count_config.params={field:e.field,model:e.model,state:e.state,advance_plan_id:e.advancePlanId,type:e.base_form.data.type,label:e.base_form.data.label})},e.submit=function(){!0===e.base_form.$validData()?(e.$dialog.resolve_data(e.count_config),e.$dialog.dialog_close()):e.show_warning(e.base_form.$validData())},e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"确认",func:e.submit,default:!0}])}return e.prototype.$onInit=function(){},e.$inject=["$scope","$hcForm","dataService","metaService"],e}());window.app.controller("CountPluginSetting",O);var D={title:"新增插件",controller:"CountPluginSetting",template:$.a},C=n("X2tR");window.app.factory("dataToolService",["$q","dataService",function(e,t){return{getWidget:function(){return{"home-widget-application":v,"home-widget-dashboard":b.a,"home-widget-count":D,"home-widget-hcm-dashboard":C.a}},getScheme:function(){var n=e.defer();return t.callHcmOpenApi("common.query.setting.my.all.list",{filter_dict:{},filter_str:null,page_index:1,page_size:50},null,!0).then((function(e){if(e.count>0){var t,i,a=l()(t=o()(i=e.list).call(i,(function(e){return e.model}))).call(t,(function(e){return e.state_name=e.name,e.name=(e.config.description||e.model+(e.state?"_"+e.state:""))+"_"+e.name,e}));n.resolve(a)}else n.resolve([])})),n.promise}}}])},W78N:function(e,t){e.exports='<div class=\'hc-dialog-mask\'></div>\n<div class=\'hc-dialog-window\'>\n    <div class=\'hc-dialog-content\'\n         ng-style="$ctrl.model.scope.params.style"\n         ng-bind-html="$ctrl.model.scope.params.content"\n    ></div>\n    <footer>\n        <div class="pop-menu-item"\n             ng-hide="$ctrl.model.scope.params.hideCannel"\n             ng-class="{cancel:$ctrl.model.scope.params.options.length>0}"\n             ng-click="$ctrl.model.scope.cancel()">\n            <div>{{\'Cancel\'|translate}}</div>\n        </div>\n        <div class="pop-menu-item zsb-pop-menu-item" ng-repeat="_btn in $ctrl.model.scope.params.options"\n             ng-click="$ctrl.model.scope.select(_btn)"\n             ng-class=\'{default:_btn.default}\'>\n            <div ng-bind="_btn.caption"></div>\n        </div>\n    </footer>\n</div>\n'},WCmr:function(e,t){e.exports='<style type="text/css">\n\n\n</style>\n\n<div id="carousel-mobile" ng-if="show_carousel">\n    <file-msg logo="file_msg.logo" text="file_msg.text" ng-if="show_msg"></file-msg>\n</div>'},WG56:function(e,t,n){"use strict";n.d(t,"a",(function(){return se}));n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JfAA"),n("EnZy");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("fHi0"),d=n.n(s),u=n("OWCx"),_=n.n(u),p=n("iYz8"),m=n.n(p),f=n("6UaR"),h=n.n(f),g=n("Dcj1"),v=n.n(g),b=n("O0yt"),y=n.n(b),w=n("0lTi"),x=n.n(w),k=n("UtpJ"),O=n.n(k),D=n("xS4f"),C=n.n(D),M=n("526F"),S=n.n(M),E=n("STz3"),P=n.n(E),j=n("WxoT"),T=n.n(j),A=n("04Ix"),I=n.n(A),L=n("KYsz"),F=n.n(L),R=n("+oHS"),B=n.n(R),U=n("mnMc"),q=n.n(U),W=n("FLGM"),z=n.n(W),N=n("/FZm"),K=n.n(N),H=n("o+MX"),V=n.n(H),Y=n("Kwsy"),G=n.n(Y),J=n("RXMP"),X=n.n(J),Q=n("5PDf"),Z=n.n(Q),ee=n("CoJ3");n("Y7AA");ee.a.directive("hcOccupy",["$filter",function(){return{restrict:"EA",template:""}}]);n("4TA+"),n("MhGM");var te=n("gu9h"),ne=n("8Auy"),ie=n("bQgN");function oe(e,t){var n=B()(e);if(_.a){var i=_()(e);t&&(i=Z()(i).call(i,(function(t){return d()(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)X()(n=oe(Object(i),!0)).call(n,(function(t){I()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;X()(a=oe(Object(i))).call(a,(function(t){o()(e,t,d()(i,t))}))}}return e}function le(e){if(void 0===y.a||null==v()(e)){if(h()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return re(e,t);var i=O()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return x()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return re(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=m()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ce(e,t,n,i){return{restrict:"EA",template:"<div class='hc-form-component'></div>",scope:{component:"@",key:"@",row:"@",formData:"=ngFormData",formDataPath:"=ngFormDataPath",model:"=?ngModel",label:"@",disabled:"=ngDisabled",placeholder:"@",attrs:"=",options:"=",styleType:"@",showTitle:"@"},link:function(t,o){var a,l,r;"hc-text-area"===t.component&&(null==t||null===(a=t.options)||void 0===a?void 0:a.hide)&&MutationObserver&&new MutationObserver((function(e,n){t.$broadcast("elastic:adjust")})).observe(o[0],{attributes:!0,attributeFilter:["class"]});t.client=window.client,t.xss_protect=null===(l=i.getContext("auth"))||void 0===l||null===(r=l.company_setting)||void 0===r?void 0:r.xss_protect,t.formDataModel={get data(){return t.formDataPath?n("getJSON")(t.formDataPath,t.formData):t.formData?t.formData[t.key]:t.model},set data(e){t.formDataPath?n("setJSON")(t.formDataPath,t.formData,e):t.formData?t.formData[t.key]=e:t.model=e}},t._model_str=t.formDataModel?"formDataModel.data":"model",t.initComponent=function(){var i;if(t.options=t.options||{},(o=$(o)).addClass("hc-form-field"),t.styleType&&o.addClass(t.styleType),t.options.class&&o.addClass(t.options.class),t.key&&o.addClass("field-"+t.key),t.options.singleLine&&("pc"===window.client||"hc-text-area"!==t.component)&&o.addClass("single-line"),t.options.xss_protect=null!==(i=t.options.xss_protect)&&void 0!==i?i:t.xss_protect,!t.options.items_inline&&o.addClass("items-block"),t.options.align&&o.addClass("align-"+t.options.align),""===(t.options.width||"")?"hc-select-person"===t.component?o.addClass("col-6"):o.addClass("col-12"):o.addClass(t.options.width),t.large_label=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 1===e?t.options.larger_label?"1 0 0":"0 0 "+(t.options.label_width?t.options.label_width+"px":"100px"):0===e?t.options.larger_label?"0 0 "+(t.options.label_width?t.options.label_width+"px":"100px"):"1":void 0},t.disabled=t.disabled||!1,t.placeholder=t.placeholder||n("translate")("common_form_input_placeholder")+t.label,t.options.placeholder=t.options.placeholder||t.label,t.options.no_label=t.options.no_label||!1,void 0!==t.component){var a,l,r,c,s,d,u="",_=t._model_str;if(t.label&&"hc-field-list"!==t.component&&!t.options.no_label)if(u+='<label class="hc-form-label" ng-style="{flex:large_label(1)}">',t.options.editBatch&&(u+='<div class="check-box sys-color" ng-switch="options.editBatch.selected" ng-click="options.editBatch.click()">\n                                <div class="tag-to-select icon-hcm-none-circle" ng-switch-default=""></div>\n                                <div class="tag-selected icon-hcm-right-circle-solid" ng-switch-when="true"></div>\n                            </div>'),t.options.mark_down)u+=V()(c='<span class="required" ng-show="(options.required|valueToFunc)()">*</span>\n                                   <hc-mark-down\n                                       data-options="{mode:\'view\'}"\n                                       class="label-md"\n                                       ng-if="!(options.query&&[undefined,\'\',null].includes('.concat(_,'))"\n                                       ng-class="options.label_bold ? \'label-bold\': \'\'"\n                                       ng-model="label"  ')).call(c,t.showTitle?'title="'.concat(t.label,'"'):"",">\n                                   </hc-mark-down>\n                                   <span\n                                       ng-if=\"options.tip\"\n                                       class=\"tip icon icon-hcm-question\"\n                                       hc-title=\"{{options.tip}}\"\n                                       options=\"{'mode': 'tip','seconds': 0, 'direction': 'column', 'mobile': true}\"/>\n                                   </label>");else u+=V()(s=V()(d="<span\n                                    class=\"label\"\n                                    hc-title=\"{{label}}\" options=\"{'showOnOverflow':true,'mode':'tip', 'onOverflowY':true}\"\n                                    ng-if=\"!(options.query&&[undefined,'',null].includes(".concat(_,'))"\n                                    ng-class="options.label_bold ? \'label-bold\': \'\'"\n                                    ng-bind-html="(label|valueToFunc)()|toTrusted"\n                                    ng-style="options.label_style && options.label_style.target.includes(client) ? options.label_style.style : \'\'"\n                                    ')).call(d,t.showTitle?'title="'.concat(t.label,'"'):"",">\x3c!-- 显示title --\x3e\n\x3c!--                                    ")).call(s,t.label,"--\x3e\n                                </span>\n                                <span class=\"required\" ng-show=\"(options.required|valueToFunc)()\">*</span>\n                                <span\n                                    ng-if=\"options.tip\"\n                                    class=\"tip icon icon-hcm-question\"\n                                    hc-title=\"{{options.tip}}\"\n                                    options=\"{'mode': 'tip','seconds': 0, 'direction': 'column', 'mobile': true}\"/>\n                                </label>");for(var p in t.options&&t.options.desc&&(u+='<div class="hc-form-desc {{descToggleStatus.class}}" ng-bind-html="options.desc"> </div>',t.enableDescToggle=!1,t.descToggle=function(){t.descToggleStatus=t.toggleStatusList[t.descToggleStatus.status?1:0]},t.toggleStatusList=[{text:"展开",status:1,class:"fold",icon:"icon-hcm-arrow-down-solid"},{text:"收起",status:0,class:"unfold",icon:"icon-hcm-arrow-up-solid"}],t.descToggleStatus={},u+='<div ng-click=descToggle() class="desc-toggle" ng-if="enableDescToggle"><div class="text-and-icon">{{descToggleStatus.text}}<span class=\'{{descToggleStatus.icon}}\'></span></div></div>',G()((function(){K()(o).call(o,".hc-form-desc")[0].offsetHeight>22&&(t.enableDescToggle=!t.options.unShowFold,t.descToggleStatus=t.toggleStatusList[t.options.unShowFold||t.options.unFoldDesc?0:1],t.descToggle())}),100)),u+=V()(a=V()(l=V()(r="<".concat(t.component,"\n                        ng-class={'border-high-light':(")).call(r,_,"|isValidValue)}\n                        class='hc-form-control'\n                        ng-model='")).call(l,_,"'\n                        label='label'\n                        key='key'\n                        options='options'\n                        parent-base-form='formData'\n                        placeholder='")).call(a,t.placeholder,"'\n                        ng-disabled='disabled'\n                        ng-style=\"{flex:large_label(0)}\""),t.attrs){var m;if(t.attrs.hasOwnProperty(p))u+=V()(m="".concat(p,"='")).call(m,t.attrs[p],"'")}u+="></".concat(t.component,">"),"mobile"!==t.client||t.options.split||(u+='<div class="simulate-border"></div>'),o.html(u),ie.a.isLazyComponent(t.component)?ie.a.loadComponent(t.component,!0).then((function(){e(o.contents())(t)})):e(o.contents())(t)}},t.initComponent(),t.$watch("component",(function(e,n){e&&e!==n&&t.initComponent()})),t.$on("component_change_event",(function(){t.initComponent()})),t.$watch("".concat(t._model_str),(function(e){e&&t.options.hasOwnProperty("operate")&&t.options.operate.hasOwnProperty("updateTableData")&&t.options.operate.updateTableData(t.options.parent.key,t.key,e)}))}}}function se(e,t,n,i){var o=function(e,t){t=t||[];var n={};X()(e).call(e,(function(e){n[e.key]=e})),X()(t).call(t,(function(t){var n;t.field_list=t.field_list||[],t.fields=z()(n=Z()(e).call(e,(function(e){var n;return q()(n=t.field_list).call(n,e.key)}))).call(n,(function(e){return e.is_added=!0,e}))}));var i=Z()(e).call(e,(function(e){return!e.is_added}));if(i.length>0){var o=Z()(t).call(t,(function(e){return 0===e.field_list.length}));o.length>0?o[0].fields=i:t.push({fields:i,field_list:z()(i).call(i,(function(e){return e.key}))})}return t[0]&&(t[0].first_group=!0),t},a=function(e){return{fold_groups:Z()(e).call(e,(function(e){return"tab"!==e.group_type})),tab_groups:Z()(e).call(e,(function(e){return"tab"===e.group_type}))}};return{createForm:function(l,r){return{infoType:"form",name:l,title:null,data:{},fields:[],groups:null,tab_groups:null,current_tab:"",sections:[],valid_rules:[],valid_error_key:null,valid_notify:!0,form_mode:null,form_relations:[],alter_info:[],asyncTask:{},attrContext:{},show_float_btn:!1,form_container:"",$validNotify:function(e){return this.valid_notify=e,this},$setOptions:function(e){var t,n=this;return X()(t=B()(e)).call(t,(function(t){n[t]=e[t]})),this},$setTitle:function(e){return this.title=e,this},$setMeta:function(e,t){var n,i=this;return this.fields=Z()(e).call(e,(function(e){var t;return e||(e={}),e.options||(e.options={}),e.options.form_mode=i.form_mode,e.options.label_width=null!==(t=e.options.label_width)&&void 0!==t?t:i.label_width,e&&e.component})),this.field_metas=F()(n=this.fields).call(n,(function(e,t){return e[t.key]=t,e}),{}),this.groups=a(o(this.fields,t)).fold_groups,this.tab_groups=a(o(this.fields,t)).tab_groups,this},$setMergeMeta:function(e,t,n){return z()(t).call(t,(function(t){!/col/.test(t.options.width)&&delete t.options.width,t.options=angular.extend(angular.copy(e),t.options||{})})),this.$setMeta(t,n),this},$setGroups:function(e){return this.groups=a(o(this.fields,e)).fold_groups,this.tab_groups=a(o(this.fields,e)).tab_groups,this},$setFields:function(e){var t;this.fields=e;var n=null===(t=this.groups)||void 0===t?void 0:V()(t).call(t,this.tab_groups);return this.groups=a(o(this.fields,n)).fold_groups,this.tab_groups=a(o(this.fields,n)).tab_groups,this},$getField:function(e){var t;return K()(t=this.fields).call(t,(function(t){return t.key===e}))},$setData:function(t){return this.data=e("securityFilter")(t||{},this.field_metas),this},$setFormMode:function(e){return this.form_mode=e,this},$setFormRelations:function(e){var t=this;this.form_relations=e;var n=i.getContext("auth");return this.attrContext=ae(ae({},te.b),{},{FORMINFO:function(){return t.$getData()},AUTH:function(){return n},EMP:function(){return null==n?void 0:n.employee},CONTEXTPARAM:function(){return t.alter_info}}),this},$getDefault:function(){var e,i,o=this,a=t.defer();"new"!==o.form_mode?a.resolve():null===(e=(i=o.CRUDService).getInfoDefault)||void 0===e||e.call(i,o.state,ae(ae({},o.alter_info),{state_params:n.params||{}})).then((function(e){o.$setDefault(e),a.resolve()}));return a.promise},$setDefault:function(e){var t,n=this;n.data=n.data||{},X()(t=B()(e)).call(t,(function(t){var i;q()(i=[void 0,null]).call(i,n.data[t])&&(n.data[t]=e[t])}))},$getData:function(){return this.data},$getCleanData:function(){var e={},t=this;return X()(angular).call(angular,this.fields,(function(n){e[n.key]=t.data[n.key]})),e},$validData:function(){this.valid_error_key=null;var t=e("validData")(this.fields,this.data);if(t)return this.valid_notify&&(this.valid_error_key=t.key),t.msg;for(var n=0;n<this.valid_rules.length;n++){var i=this.valid_rules[n](this.data);if(!0!==i)return i}return!0},$getFilters:function(){var e,t=this,n=angular.copy(this.data)||{},i={};return X()(e=this.fields).call(e,(function(e){var o,a;q()(o=[null,void 0]).call(o,n[e.key])||(e.child_include?i[e.key]={child_include:n[e.key]}:e.compare?i[e.key]=I()({},e.compare,n[e.key]):"hc-datetime-range"===e.component?i[e.key]={gte:t.data[e.key].start,lte:t.data[e.key].end}:q()(a=["hc-input"]).call(a,e.component)?i[e.key]={like:n[e.key]}:i[e.key]=n[e.key])})),i},$setValidRule:function(e){var t;e instanceof Array?this.valid_rules=V()(t=this.valid_rules).call(t,e):this.valid_rules.push(e);return this},$dealFormDataChange:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,a=this;o&&(null===(t=a.form_relations)||void 0===t||X()(t).call(t,(function(e){var t;e.attribute_default&&(X()(t=e.attribute_default).call(t,(function(t){t.key=e.key})),a.$executeAttrExpr(e.key,e.attribute_default))})));if(T()(n)!==T()(i)){var l,r=e("sortByKey")(n),c=e("sortByKey")(i);null===(l=a.form_relations)||void 0===l||X()(l).call(l,(function(e){var t,l,s,d;if((!q()(t=[null,void 0]).call(t,n[e.key])||!q()(l=[null,void 0]).call(l,i[e.key]))&&("first"!==o||Z()(s=e.value_onchange||[]).call(s,(function(e){return e.force_change})).length||(null===(d=e.attribute_onchange)||void 0===d?void 0:d.length))&&T()(r[e.key])!==T()(c[e.key])&&(e.value_onchange||e.attribute_onchange))if("first"===o){var u,_=e.attribute_onchange||[],p=Z()(u=e.value_onchange||[]).call(u,(function(e){return e.force_change}));(p.length||_.length)&&a.$execute(e.key,n,p,_,!0)}else a.$execute(e.key,n,e.value_onchange||[],e.attribute_onchange||[])}))}},$execute:function(e,t,n,i,o){var a,l=this;X()(a=l.fields).call(a,(function(e){var n;q()(n=[void 0,null]).call(n,t[e.key])&&(t[e.key]=null)}));var r=angular.extend(angular.copy(l.alter_info||{}),angular.copy(t));if(n.length){var c,s,d,u,_;if(null===(c=l.asyncTask[e])||void 0===c||null===(s=c.promise)||void 0===s?void 0:s.is_loading)null===(u=l.asyncTask[e].promise)||void 0===u||null===(_=u.cancel)||void 0===_||_.call(u),delete l.asyncTask[e];var p=z()(n).call(n,(function(e){return e.key})),m=null==i?void 0:z()(i).call(i,(function(e){var t;return V()(t="".concat(e.key,":")).call(t,e.attribute)}));z()(d=P()(l.asyncTask)).call(d,(function(e){var t,n;e.value_effects=Z()(t=e.value_effects).call(t,(function(e){return!q()(p).call(p,e.key)})),e.attr_effects=Z()(n=e.attr_effects).call(n,(function(e){var t;return!(null==m?void 0:q()(m).call(m,V()(t="".concat(e.key,":")).call(t,e.attribute)))}))}));var f=l.CRUDService.getInfoChange(e,r,l.state,l.alter_info,o?[{key:e,value_onchange:n}]:void 0);l.asyncTask[e]={promise:f,value_effects:n,attr_effects:i},f.then((function(t){var n,i,o,a,r,c=B()(t);if(null===(n=l.asyncTask[e])||void 0===n||null===(i=n.value_effects)||void 0===i?void 0:i.length){var s,d=[];z()(s=l.asyncTask[e].value_effects).call(s,(function(e){d.push(e.key)})),c=d}(X()(c).call(c,(function(e){var n;"child"===e?X()(n=B()(t.child||{})).call(n,(function(e){})):angular.equals(l.data[e],t[e])||(l.data[e]=t[e])})),null===(o=l.asyncTask[e])||void 0===o||null===(a=o.attr_effects)||void 0===a?void 0:a.length)&&l.$executeAttrExpr(e,null===(r=l.asyncTask[e])||void 0===r?void 0:r.attr_effects);delete l.asyncTask[e]})).catch((function(t){console.log(t),"abort"!==(null==t?void 0:t.status)&&delete l.asyncTask[e]})).finally((function(){}))}else i.length&&l.$executeAttrExpr(e,i)},$executeAttrExpr:function(e,t){var n,i=this,o={};o[e]=null===(n=this.$getData())||void 0===n?void 0:n[e];var a=ne.a.hcmEval("[".concat(z()(t).call(t,(function(e){return e.expression})).toString(),"]"),S()({},this.attrContext,o));X()(t).call(t,(function(e,t){if(e&&"FORM_TIP"===e.attribute)i.$setTip(a[t]);else{var n=i.$getField(e.key);n&&("label"===e.attribute?n.label=a[t]:e.attribute&&te.b.setFieldByPath(e.attribute,n.options,a[t]))}}))},$groupShow:function(t){return!e("valueToFunc")(null==t?void 0:t.hide)()&&(null==t?void 0:Z()(n=t.fields).call(n,(function(t){var n;return!e("valueToFunc")(null===(n=t.options)||void 0===n?void 0:n.hide)()})).length);var n},$setTip:function(e){return this.tip=e,this},$setCurrentTab:function(e){return this.current_tab=e,this}}}}}function de(){return{createGroup:function(e){var t={};return X()(e).call(e,(function(e){e.data=t})),{hc_forms:e||[],$setData:function(e){angular.extend(t,e)},$getData:function(){return t},$validData:function(){var e,t=!0;return C()(e=this.hc_forms).call(e,(function(e){return!0!==(t=e.$validData())})),t}}}}}ee.a.directive("hcForm",(function(){return{restrict:"E",scope:{model:"="},template:n("Mbez"),controller:["$scope",function(e){var t;e.onTabsValueChange=function(t){e.model.$setCurrentTab(t)},e.$watch("model.tab_groups",(function(){var t,n,i,o,a,l;e.model&&(e.model.current_tab=null===(t=e.model.tab_groups)||void 0===t||null===(n=Z()(t).call(t,(function(t){return e.model.$groupShow(t)})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i.key,e.tab_position=null===(o=e.model.tab_groups)||void 0===o||null===(a=Z()(o).call(o,(function(e){return"top"===e.tab_position})))||void 0===a||null===(l=a[0])||void 0===l?void 0:l.tab_position)})),e.scrollToTop=function(){e.model.form_container&&e.model.form_container.animate({scrollTop:0})},X()(t=["scroll","mousewheel","touchmove"]).call(t,(function(e){document.addEventListener(e,(function(){var e,t=le($(".floating-btn"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.animation="btn-in 0.5s ease-in-out",n.style.right="20px",n.style.opacity=1}}catch(e){t.e(e)}finally{t.f()}clearTimeout($.data(this,"timer")),$.data(this,"timer",G()((function(){var e,t=le($(".floating-btn"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.right="-30px",n.style.animation="btn-out 0.5s ease-in-out",n.style.opacity=.6}}catch(e){t.e(e)}finally{t.f()}}),4e3))}))}))}]}})),ee.a.directive("hcFilterPanel",(function(){return{restrict:"E",scope:{model:"="},template:n("hVAX")}})),ee.a.directive("hcFormComponent",ce),ce.$inject=["$compile","$hcDialog","$filter","contextService"],ee.a.factory("$hcForm",se),se.$inject=["$filter","$q","$state","contextService"],ee.a.factory("$hcFormGroup",de),de.$inject=[]},WHes:function(e,t){e.exports='<div ng-init="init()" ng-if="objectData" class="fieldwork-rec-interview-code">\n    <div ng-if="fieldwork_item.video_interview_pic !== undefined">\n        <img ng-src="{{fieldwork_item.video_interview_pic|hcPhoto:132}}">\n    </div>\n    <div ng-if="if_ai_code">\n        <img ng-src="{{fieldwork_item.ai_interview_code_url}}" width="132" height="132">\n    </div>\n</div>\n'},WJ9t:function(e,t){e.exports='<div class="filed-form">\n    <hc-form model="$ctrl.model"></hc-form>\n</div>\n'},"WJU/":function(e,t){e.exports='<div id="hcm-crud-import" ng-init="init()">\n    <div class="import-emp-info">\n        <div class="item" ng-click="download_template()">\n            <div>\n                <div class="category-icon icon-list-pending"></div>\n                <div class="category-name">导入模板下载</div>\n            </div>\n        </div>\n\n        <div class="item import-file" ng-click="operation(false)">\n            <div>\n                <div class="category-icon icon-leadin"></div>\n                <div class="category-name">数据导入</div>\n            </div>\n        </div>\n\n        <div class="item import-file" ng-click="download()">\n            <div>\n                <div class="category-icon icon-leadin"></div>\n                <div class="category-name">下载导入报告</div>\n            </div>\n        </div>\n    </div>\n</div>\n'},WT49:function(e,t){e.exports='<div class="hcm-code-editor" ng-init="init()">\n</div>\n'},WThP:function(e,t){e.exports='<div class="hc-data-grid" ng-if="model.columns" name="model.options.title" ng-init="init()">\n    <hc-compile data-template="styleTemplate" ng-if="styleTemplate"></hc-compile>\n    <div class="menu-bar" ng-if="model.options.showMenuBar">\n        <div class="btn add-line-btn" ng-click="newRow()">\n            <div class="icon icon-hcm-add-circle"></div>\n            <div class="label">新增行</div>\n        </div>\n        <div class="btn" ng-click="delRow()"\n             ng-class="current_row == -1 ? \'disable\':\'\'">\n            <div class="icon icon-hcm-minus-circle"></div>\n            <div class="label">删除行</div>\n        </div>\n    </div>\n\n    <div class="table-layout" ng-if="searchTemplate&&contentTemplate"\n         ng-class="{\'show-menu-bar\':(model.options.showMenuBar),\'show-paging-bar\':(model.options.showPaging),\'show-search-bar\':(model.options.showSearchBar),\'banSelect\':!model.options.allowSelect}">\n\n        <div class="table-div table-content-div">\n            <div class="fix">\n                <table border="1" cellpadding="0" cellspacing="0">\n                    <tbody>\n                    <tr>\n                        <th ng-repeat="item in model.columnWidth|limitTo:fixColumnLength track by $index"></th>\n                    </tr>\n                    <tr class="main-data" ng-repeat="_row in model.data |limitTo:limit"\n                        ng-click="onRowClick(_row,$index)" ng-mouseenter="mouseEnter(_row,$index)"\n                        ng-mouseleave="mouseLeave(_row,$index)"\n                        ng-class="{\'row-selected\':model.row_status[$index] == 1,\'view\':model.edit_status[$index]==0}">\n                        <td class="select-cell" ng-if="model.options.showSelectColumn"\n                            ng-click="selectRow($event,$index)">\n                            <div><input type="checkbox" title="" class="wrap" ng-checked="model.row_status[$index]"\n                                        ng-disabled="model.rowAllowSelect[$index] || (!model.options.allowSelect)">\n                            </div>\n                        </td>\n                        <td class="index-cell" ng-if="model.options.showIndexColumn">\n                            <div>{{ model.options.showPaging ? (model.paging.current_page - 1) * model.paging.page_size\n                                + $index + 1 : $index + 1 }}\n                            </div>\n                        </td>\n                        <td ng-repeat="_col in model.fixColumns">\n                            <div class="static-content"\n                                 ng-if="model.edit_status[$parent.$index]==0&&(_col.component !== \'hc-input-upload\')"\n                                 ng-click="onCellClick($event,_row,_col,$parent.$index)">\n                                {{ _row[_col.key] }}\n                            </div>\n                            <hc-compile\n                                    ng-if="(model.edit_status[$parent.$index]==1||(_col.component === \'hc-input-upload\'))&&(!model[\'cellColumns\'][$parent.$index]||!model[\'cellColumns\'][$parent.$index][$index])"\n                                    data-template="contentTemplate"></hc-compile>\n                            <hc-compile\n                                    ng-if="(model.edit_status[$parent.$index]==1||(_col.component === \'hc-input-upload\'))&&model[\'cellColumns\'][$parent.$index]&&model[\'cellColumns\'][$parent.$index][$index]"\n                                    data-template="fixRowContentTemplate"></hc-compile>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class="scroll">\n                <table border="1" cellpadding="0" cellspacing="0">\n                    <tbody>\n                    <tr>\n                        <th ng-repeat="item in model.columnWidth track by $index"></th>\n                    </tr>\n                    <tr class="main-data" ng-repeat="_row in model.data |limitTo:limit"\n                        ng-click="onRowClick(_row,$index)" ng-mouseenter="mouseEnter(_row,$index)"\n                        ng-mouseleave="mouseLeave(_row,$index)"\n                        ng-class="{\'row-selected\':model.row_status[$index] == 1,\'view\':model.edit_status[$index]==0}">\n\n                        <td ng-repeat="item in model.columnWidth|limitTo:fixColumnLength track by $index"></td>\n                        <td ng-repeat="_col in model.scrollColumns">\n                            <div class="static-content"\n                                 ng-if="model.edit_status[$parent.$index]==0&&(_col.component !== \'hc-input-upload\')"\n                                 ng-click="onCellClick($event,_row,_col,$parent.$index)">\n                                {{ _row[_col.key] }}\n                            </div>\n                            <hc-compile\n                                    ng-if="(model.edit_status[$parent.$index]==1||(_col.component === \'hc-input-upload\'))&&(!model[\'cellColumns\'][$parent.$index]||!model[\'cellColumns\'][$parent.$index][$index+model.options.fixedLeft])"\n                                    data-template="contentTemplate"></hc-compile>\n                            <hc-compile\n                                    ng-if="(model.edit_status[$parent.$index]==1||(_col.component === \'hc-input-upload\'))&&model[\'cellColumns\'][$parent.$index]&&model[\'cellColumns\'][$parent.$index][$index+model.options.fixedLeft]"\n                                    data-template="rowContentTemplate"></hc-compile>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="table-div table-head-div">\n            <div class="fix">\n                <table border="0" cellpadding="0" cellspacing="0">\n                    <tbody>\n                    <tr class="header-title">\n                        <th class="select-cell" ng-if="model.options.showSelectColumn" ng-click="selectAllRows()">\n                            <div><input title="" type="checkbox" ng-checked="model.all_row_select"\n                                        ng-disabled="model.rowAllowSelect[$index] || (!model.options.allowSelect)">\n                            </div>\n                        </th>\n                        <th class="index-cell" ng-if="model.options.showIndexColumn">\n                            <div>序号</div>\n                        </th>\n                        <th class="header-cell" ng-repeat="_col in model.fixColumns track by $index">\n                            <div class="label" ng-click="setSortingCol($event,_col)">\n                                <span ng-if="_col.options.required" class="necessary"> *</span>\n                                <span>{{ _col.label }}</span>\n                                <span ng-if="_col.options.tip" class="tip icon icon-hcm-question"\n                                      title="{{ _col.options.tip }}"></span>\n                                <div class="sorting-box" ng-if="model.options.sortable"\n                                     ng-class="{\'show\':_col.sorting}">\n                                    <div class="icon icon-hcm-arrow-up-solid"\n                                         ng-class="{\'select\':_col.sorting===\'asc\'}"\n                                         ng-click="setSortingCol($event,_col,\'asc\')"></div>\n                                    <div class="icon icon-hcm-arrow-down-solid"\n                                         ng-class="{\'select\':_col.sorting==\'desc\'}"\n                                         ng-click="setSortingCol($event,_col,\'desc\')"></div>\n                                </div>\n                            </div>\n                            <div class="col-resize"\n                                 ng-mousedown=\'resizeMouseDown($event,$index+basicColumnLength)\'></div>\n                        </th>\n                    </tr>\n                    <tr class="header-search" ng-if="model.options.showSearchBar">\n                        <td ng-if="model.options.showSelectColumn">\n                            <div class="search-icon icon-user-search"></div>\n                        </td>\n                        <td ng-if="model.options.showIndexColumn">\n                            <div class="search-icon icon-user-search" ng-if="!model.options.showSelectColumn"></div>\n                        </td>\n                        <td ng-repeat="_col in model.fixColumns">\n                            <hc-compile data-template="searchTemplate"></hc-compile>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div class="scroll">\n                <table border="0" cellpadding="0" cellspacing="0">\n                    <tbody>\n                    <tr>\n                        <th ng-repeat="item in model.columnWidth|limitTo:fixColumnLength track by $index"></th>\n                        <th class="header-cell" ng-repeat="_col in model.scrollColumns">\n                            <div class="label" ng-click="setSortingCol($event,_col)">\n                                <span ng-if="_col.options.required" class="necessary"> *</span>\n                                <span>{{ _col.label }}</span>\n                                <span ng-if="_col.options.tip" class="tip icon icon-hcm-question"\n                                      title="{{ _col.options.tip }}"></span>\n                                <div class="sorting-box" ng-if="model.options.sortable"\n                                     ng-class="{\'show\':_col.sorting}">\n                                    <div class="icon icon-hcm-arrow-up-solid"\n                                         ng-class="{\'select\':_col.sorting==\'asc\'}"\n                                         ng-click="setSortingCol($event,_col,\'asc\')"></div>\n                                    <div class="icon icon-hcm-arrow-down-solid"\n                                         ng-class="{\'select\':_col.sorting==\'desc\'}"\n                                         ng-click="setSortingCol($event,_col,\'desc\')"></div>\n                                </div>\n                            </div>\n                            <div class="col-resize"\n                                 ng-mousedown=\'resizeMouseDown($event,$index+fixColumnLength)\'></div>\n                        </th>\n                    </tr>\n                    <tr class="header-search" ng-if="model.options.showSearchBar">\n                        <td ng-repeat="item in model.columnWidth|limitTo:fixColumnLength track by $index"></td>\n                        <td ng-repeat="_col in model.scrollColumns">\n                            <hc-compile data-template="searchTemplate"></hc-compile>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n\n    <div class="paging-bar" ng-if="model.options.showPaging">\n        <div class="paging-desc" ng-if="!model.paging.template">共计<span> {{model.paging.total_count}} </span>条</div>\n        <div class="paging-desc">\n            <hc-compile data-template=\'model.paging.template\'></hc-compile>\n        </div>\n        <div class="paging-box">\n            <div class="icon-box" ng-class="model.paging.current_page == 1 ? \'disable\':\'\'"\n                 ng-click="onPagingClick(\'first\')">\n                <div class="icon icon-hcm-arrow-left-end"></div>\n            </div>\n            <div class="icon-box" ng-class="model.paging.current_page == 1 ? \'disable\':\'\'"\n                 ng-click="onPagingClick(\'previous\')">\n                <div class="icon icon-hcm-arrow-left"></div>\n            </div>\n\n            <div class="select-box">\n                当前\n                <div><select title="" class="option" ng-model="model.paging.current_page"\n                             ng-options="m.value as m.label for m in model.paging.page_list"\n                             ng-change="onPagingChange()">\n                </select></div>\n                页\n            </div>\n\n            <div class="icon-box"\n                 ng-class="model.paging.current_page == model.paging.page_list[model.paging.page_list.length - 1].value ? \'disable\':\'\'"\n                 ng-click="onPagingClick(\'next\')">\n                <div class="icon icon-hcm-arrow-right"></div>\n            </div>\n            <div class="icon-box"\n                 ng-class="model.paging.current_page == model.paging.page_list[model.paging.page_list.length - 1].value ? \'disable\':\'\'"\n                 ng-click="onPagingClick(\'last\')">\n                <div class="icon icon-hcm-arrow-right-end"></div>\n            </div>\n            <div class="select-box">\n                <div><select title="" class="option" ng-change="onPageAmountChange()"\n                             ng-model="model.paging.current_page_size"\n                             ng-options="m for m in model.paging.page_size_list"></select></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},Whvs:function(e,t){e.exports='<div class="hcm-checkbox">\n    <div class="icon">\n        <div class="tag-to-select" ng-class="checkBoxIcon.empty" ng-if="!list_model.is_selectAll"\n             ng-click="list_model.selectAllClick($event)">\n        </div>\n        <div class="tag-selected" ng-class="checkBoxIcon.full" ng-if="list_model.is_selectAll"\n             ng-click="list_model.selectAllClick($event)">\n        </div>\n    </div>\n</div>'},"X+LG":function(e,t,n){"use strict";n.r(t);n("C6Qb");var i=n("xAfy"),o=(n("oVuX"),n("rB9j"),n("EnZy"),n("eLKs")),a=n.n(o),l=n("UtpJ"),r=n.n(l),c=n("ZbhI"),s=n.n(c),d=n("a0dU"),u=n.n(d),_=(n("ls82"),n("SPx3")),p=n.n(_),m=n("nhkr"),f=n.n(m),h=n("RXMP"),g=n.n(h),v=n("M5Mt"),b=n.n(v),y=n("FLGM"),w=n.n(y),x=n("sEfC"),k=n.n(x),O=n("CoJ3"),D=n("mshF");O.a.directive("recChatLine",["$compile","$animate","recChatLineService","$filter","$timeout","$rootScope",function(e,t,i,o,a,l){return{restrict:"EA",scope:{recChat:"=",id:"=",approveRecord:"="},template:n("h0sE"),controller:["$scope",function(e){e.init=function(){e.getDialogData()},e.$on("journalRefresh",(function(t,n){e.dialog_content.list=[],n&&n.perfCardRecChat&&(e.recChat=n.perfCardRecChat),e.load=!1,e.empty=!1,e.$broadcast("article_comment_refresh",!0),e.getDialogData()})),e.getDialogData=function(){e.dialog_content=i.getDialogContent(e.recChat.params),e.dialog_content.load((function(){}),(function(t){e.load&&0==e.dialog_content.list.length&&(e.empty=!0),e.$broadcast("article_comment_refresh")})).then((function(){e.dialog_content.next(!0),e.load=!0}))}}],compile:function(e,t,n){}}}]),O.a.directive("recChatBox",["hcImageService","recChatLineService","contextService","$filter","$rootScope",function(e,t,i,o,a){return{template:n("uD60"),scope:{recChat:"="},compile:function(e,t,n){},controller:["$scope",function(n){n.recChat.footerBtn=n.recChat.footerBtn?n.recChat.footerBtn:[{label:"内部交流",type:"inner"},{label:"跟应聘者交流",type:"outer"}],n.btn_fuc=function(e){n.slide=!0,n.toPublic="inner"==e?1:0},n.init=function(){n.chatInitail()},n.chatInitail=function(){n.slide=!1,n.clickOne=!0,n.transmit=[],n.images=[],n.dialog_content=""},n.employee_selector_options={state:"recruit",data_type:"string",required:!1,width:"col-6",role:"all",placeholder:"请选择您要@的同事",singleLine:!0,change:function(e){if(e&&e.model.length>5)return a.show_warning("最多@5个人","warning"),e=!1,!1;var t;e&&e.model.length<=5?n.transmit=w()(t=e.model).call(t,(function(t,n){var i;return{id:t,name:null===(i=e.selector_label)||void 0===i?void 0:i.split(",")[n]}})):n.transmit=[]},selectorModel:"Employee",selectorType:2},n.add_image=function(t){var i={index:null,status:"uploading",deleted:!1};n.images.push(i),e.uploadImg(t).then((function(e){i.index=e,i.status="loaded"}))},n.show_img=function(e){a.img_preview(_imgs,e)},n.delete_img=function(e,t){var i;t.stopPropagation(),b()(i=n.images).call(i,e,1)},n.send=function(){var e;if(!n.clickOne)return!1;if(!n.dialog_content)return a.show_warning("说些什么吧..."),!1;var i,o=[];g()(angular).call(angular,n.images,(function(e){if("uploading"==e.status)return a.show_warning("图片上传ing,请耐心等待..."),!1;o.push(e.index)})),i=w()(e=n.transmit).call(e,(function(e){return e.id})),n.clickOne=!1,n.chatParam={content:n.dialog_content,to_biz:n.recChat?n.recChat.params.biz_id:[],at_employee_ids:i,public:n.toPublic,images:o.join(),extend_dict:{candidate_name:n.recChat.candidate_name||null}},0===n.toPublic&&(n.recChat.to_employee_id?n.chatParam.to_employee_id="object"===f()(n.recChat.to_employee_id)?n.recChat.to_employee_id:[n.recChat.to_employee_id]:n.chatParam.to_recruit_id=n.recChat.resumeId?n.recChat.resumeId:""),t.setDialogContent(n.chatParam).then((function(){n.$emit("journalRefresh"),n.chatInitail()}))},n.start_at_employee_select=function(){var e;n.$emit("employee-select",{show_group:!1,selected:w()(e=n.transmit).call(e,(function(e){return e.id})),callback:function(e){console.log(e),n.transmit=e.data}})},n.un_at_employee=function(e){var t;b()(t=n.transmit).call(t,e,1)},n.$on("employee-select",(function(e,t){n.$broadcast("employee-select-event",t)}))}]}}]),O.a.directive("perfChatBox",["hcImageService","recPerfLineService","$commonAction","$hcDialog","$rootScope",function(e,t,i,o,a){return{template:n("G0Wi"),scope:{recChat:"="},compile:function(e,t,n){},controller:["$scope",function(n){n.recChat.footerBtn=n.recChat.footerBtn?n.recChat.footerBtn:[{label:"内部交流",type:"inner"},{label:"跟应聘者交流",type:"outer"}],n.btn_fuc=function(e){n.slide=!0,n.toPublic="inner"==e?1:0},n.init=function(){n.chatInitail()},n.chatInitail=function(){n.slide=!1,n.clickOne=!0,n.transmit=[],n.images=[],n.dialog_content=""},n.employee_selector_options={state:"recruit",data_type:"string",required:!1,width:"col-6",role:"all",placeholder:"请选择您要@的同事",singleLine:!0,change:function(e){if(e&&e.model.length>5)return a.show_warning("最多@5个人","warning"),e=!1,!1;var t;e&&e.model.length<=5?n.transmit=w()(t=e.model).call(t,(function(t,n){var i;return{id:t,name:null===(i=e.selector_label)||void 0===i?void 0:i.split(",")[n]}})):n.transmit=[]},selectorModel:"Employee",selectorType:2},n.add_image=function(t){var i={index:null,status:"uploading",deleted:!1};n.images.push(i),e.uploadImg(t).then((function(e){i.index=e,i.status="loaded"}))},n.show_img=function(e){a.img_preview(_imgs,e)},n.delete_img=function(e,t){var i;t.stopPropagation(),b()(i=n.images).call(i,e,1)},n.send=function(){var e;if(!n.clickOne)return!1;if(!n.dialog_content)return a.show_warning("说些什么吧..."),!1;var i,o=[];g()(angular).call(angular,n.images,(function(e){if("uploading"==e.status)return a.show_warning("图片上传ing,请耐心等待..."),!1;o.push(e.index)})),i=w()(e=n.transmit).call(e,(function(e){return e.id})),n.clickOne=!1,n.chatParam={content:n.dialog_content,to_biz:n.recChat?n.recChat.params.biz_id:[],at_employee_ids:i,public:n.toPublic,images:o,extend_dict:{candidate_name:n.recChat.candidate_name||null}},0===n.toPublic&&(n.recChat.to_employee_id?n.chatParam.to_employee_id="object"===f()(n.recChat.to_employee_id)?n.recChat.to_employee_id:[n.recChat.to_employee_id]:n.chatParam.to_recruit_id=n.recChat.resumeId?n.recChat.resumeId:""),t.setDialogContent(n.chatParam,n.recChat.card_id).then((function(){n.$emit("journalRefresh"),n.chatInitail()}))},n.start_at_employee_select=p()(u.a.mark((function e(){var t,a,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.getCustomDialogCtrl("hcWorkflowEmployeeSimpleSelectorPanel");case 2:return t=e.sent,e.next=5,i.createCommonAction(n).exprParse({ctrl:"hcWorkflowEmployeeSimpleSelectorPanel",action_chain:!0,direct_params:!0,size:"middle",data:{selectorModel:"Employee",useStrict:!0,state:"PerfShareEmpSelector",selectorType:2}});case 5:a=e.sent,l=a.data,r=l,o.getDialog(t).size("middle").show(r).then((function(e){n.transmit=e}));case 9:case"end":return e.stop()}}),e)}))),n.un_at_employee=function(e){var t;b()(t=n.transmit).call(t,e,1)}}]}}]),O.a.directive("articleItem",(function(){return{template:n("4YoY"),scope:{item:"=item",scene:"=",approveRecord:"="},controller:"articleItemCtrl"}})).controller("articleItemCtrl",["contextService","$filter","commentService","$scope","$rootScope","articleService","$hcDialog","$timeout",function(e,t,n,i,o,a,l,c){var d,u;(i.isAdmin=e.getContext("auth").is_sys_manager,i.auth=e.getContext("auth"),i.isRecruitAdmin="cm-recruit-manager"in i.auth.roles,i.isRecruitActicle=-1!=s()(d=i.item.feed.biz_id).call(d,"recruit"),i.client=window.client,i.need_extend=!0,i.item.likes.list.length>30)?(i.need_extend=!1,i.like_list=r()(u=i.item.likes.list).call(u,0,30)):i.like_list=i.item.likes.list;i.article_like=function(){i.is_likeing||(i.is_likeing=!0,n.articleLike(i.item.id).then((function(e){var t;(i.item.likes=e,i.is_likeing=!1,i.item.likes.list.length>30)?(i.need_extend=!1,i.like_list=r()(t=i.item.likes.list).call(t,0,30)):i.like_list=i.item.likes.list})))},i.extend=function(){i.need_extend=!i.need_extend,i.like_list=i.item.likes.list,i.$emit("circle_feed_refresh")},i.comment_click=function(e){e.is_owner||i.article_comment(e.logger)},i.article_comment=function(e){i.$emit("article-comment",{article:i.item,reply:e,callback:function(e){i.item.comments=e,i.$emit("article_comment_refresh")}})},i.delete_comment=function(e,t){null==t||t.stopPropagation(),l.confirm("是否确认删除评论？",[{caption:"删除评论",func:function(){n.deleteComment(e).then((function(e){i.item.comments=e,o.show_warning("删除成功")}))}}])},i.article_delete=function(){l.confirm("是否确认要删除主题？",[{caption:"删除主题",func:function(){a.articleDelete(i.item.id).then((function(e){i.item.enabled=0,o.show_warning("删除成功")}))}}])},i.article_top=function(){a.getArticleSendMemberCount(i.item.id).then((function(e){e.success&&(i.member_count=e.count||0,l.confirm('本消息置顶后，将有 <span class="theme-color">'.concat(i.member_count,"</span> 人收到微信通知，是否确认继续？"),[{caption:"确定",func:function(){a.articleTop(i.item.id).then((function(){a.articleSendAll(i.item.id).then((function(){i.$emit("article_reload"),o.show_warning("置顶成功")}))}))}}]))}))},i.article_cancleTop=function(){l.confirm("是否要取消置顶",[{caption:"确定",func:function(){a.articleCancleTop(i.item.id).then((function(e){i.$emit("article_reload"),o.show_warning("取消置顶")}))}}])},i.show_img=k()((function(e){var n,a=w()(n=i.item.images).call(n,(function(e){return t("hcImage")(e)}));o.img_preview(a,e)}),300),i.get_like_string=function(){var e,n,o=w()(e=r()(n=i.item.likes).call(n,0,5)).call(e,(function(e){return t("unionName")(e.logger)}));return i.item.likes.length>5?o.join(",")+"等"+i.item.likes.length+"人":o.join(",")},i.parse_at_string=function(e){return void 0===e?"":w()(e).call(e,(function(e){return"@"+t("unionName")(e)})).join(" ")},i.go_emp=function(e,t){if(t&&t.stopPropagation(),"recruit"===window.app_type)return!1;o.super_go("emp",{id:e})},i.go_feed=function(){o.super_go("feed",{biz_id:i.item.feed.biz_id},{location:"replace"})},i.go_article=function(){return"recruit"===window.app_type?($(".comments-more").css("display","none"),n.portalCommentList(i.item.id).then((function(e){i.item.comments.list=e.list})),!1):!(i.item.attachments&&i.item.attachments.length>0&&0===i.item.attachments[0].attachment_data.length)&&void o.super_go("article",{id:i.item.id})}}]),O.a.directive("perfArticleItem",(function(){return{template:n("3tLH"),scope:{item:"=item",scene:"=",approveRecord:"="},controller:"perfArticleItemCtrl"}})).controller("perfArticleItemCtrl",["contextService","$filter","commentService","$scope","$rootScope","articleService","$hcDialog","$timeout",function(e,t,n,i,o,a,l,c){var d,u;(i.isAdmin=e.getContext("auth").is_sys_manager,i.auth=e.getContext("auth"),i.isRecruitAdmin="cm-recruit-manager"in i.auth.roles,i.isRecruitActicle=-1!=s()(d=i.item.feed.biz_id).call(d,"recruit"),i.client=window.client,i.need_extend=!0,i.item.likes.list.length>30)?(i.need_extend=!1,i.like_list=r()(u=i.item.likes.list).call(u,0,30)):i.like_list=i.item.likes.list;i.article_like=function(){i.is_likeing||(i.is_likeing=!0,n.articleLike(i.item.id).then((function(e){var t;(i.item.likes=e,i.is_likeing=!1,i.item.likes.list.length>30)?(i.need_extend=!1,i.like_list=r()(t=i.item.likes.list).call(t,0,30)):i.like_list=i.item.likes.list})))},i.extend=function(){i.need_extend=!i.need_extend,i.like_list=i.item.likes.list,i.$emit("circle_feed_refresh")},i.comment_click=function(e){e.is_owner||i.article_comment(e.logger)},i.article_comment=function(e){i.$emit("perf-article-comment",{article:i.item,reply:e,callback:function(e){i.item.comments=e,i.$emit("article_comment_refresh")}})},i.delete_comment=function(e,t){null==t||t.stopPropagation(),l.confirm("是否确认删除评论？",[{caption:"删除评论",func:function(){n.deleteComment(e).then((function(e){i.item.comments=e,o.show_warning("删除成功")}))}}])},i.article_delete=function(){l.confirm("是否确认要删除主题？",[{caption:"删除主题",func:function(){a.articleDelete(i.item.id).then((function(e){i.item.enabled=0,o.show_warning("删除成功")}))}}])},i.article_top=function(){a.getArticleSendMemberCount(i.item.id).then((function(e){e.success&&(i.member_count=e.count||0,l.confirm('本消息置顶后，将有 <span class="theme-color">'.concat(i.member_count,"</span> 人收到微信通知，是否确认继续？"),[{caption:"确定",func:function(){a.articleTop(i.item.id).then((function(){a.articleSendAll(i.item.id).then((function(){i.$emit("article_reload"),o.show_warning("置顶成功")}))}))}}]))}))},i.article_cancleTop=function(){l.confirm("是否要取消置顶",[{caption:"确定",func:function(){a.articleCancleTop(i.item.id).then((function(e){i.$emit("article_reload"),o.show_warning("取消置顶")}))}}])},i.show_img=k()((function(e){var n,a=w()(n=i.item.images).call(n,(function(e){return t("hcImage")(e)}));o.img_preview(a,e)}),300),i.get_like_string=function(){var e,n,o=w()(e=r()(n=i.item.likes).call(n,0,5)).call(e,(function(e){return t("unionName")(e.logger)}));return i.item.likes.length>5?o.join(",")+"等"+i.item.likes.length+"人":o.join(",")},i.parse_at_string=function(e){return void 0===e?"":w()(e).call(e,(function(e){return"@"+t("unionName")(e)})).join(" ")},i.go_emp=function(e,t){if(t&&t.stopPropagation(),"recruit"===window.app_type)return!1;o.super_go("emp",{id:e})},i.go_feed=function(){o.super_go("feed",{biz_id:i.item.feed.biz_id},{location:"replace"})},i.go_article=function(){return"recruit"!==window.app_type&&(!(i.item.attachments&&i.item.attachments.length>0&&0===i.item.attachments[0].attachment_data.length)&&void o.super_go("article",{id:i.item.id}))}}]),O.a.directive("dynamicArticleAttachment",["articleService","$compile",function(e,t){return{restrict:"EA",replace:!0,template:n("S+Zn"),scope:{approveRecord:"=",item:"=",objectId:"=",objectData:"=",public:"=",messageId:"="},link:function(n,i,o){var a=null;if(void 0!==n.item){var l=e.getArticleAttachmentMeta()[n.item].widget;a="<"+l,a+=" object-id='objectId' object-data='objectData' approve-record='approveRecord' _public='public' message-id='messageId'></"+l+">"}i.html(a),t(i.contents())(n)}}}]),O.a.directive("onImageError",(function(){return{restrict:"A",link:function(e,t,n){a()(t).call(t,"error",(function(){n.src!=n.onImageError&&n.$set("src",n.onImageError)}))}}})),O.a.factory("recChatLineService",["$q","$http","dataService","contextService","listCacheService2","$filter",function(e,t,n,i,o,a){return{setDialogContent:function(t){var i=e.defer();return(null==t?void 0:t.content)&&(t.content=a("xss_filter")(t.content)),n.callHcmOpenApi("feed.article.create",t,null,!0).then((function(e){i.resolve(e)})),i.promise},getDialogContent:function(e){return o(null,"feed.article.get.list",e)},getApplyInfo:function(e){return n.callHcmOpenApi("hcm.model.get",{id_:e,model:"ApplyJobRecords"},null,!0)},getResumeInfo:function(e,t){return n.callHcmOpenApi("recruit.get.resume",{resume_id:e,contract_unit:t},null,!0)},getEmployeeInfo:function(e){return n.callHcmOpenApi("emp.get.json",{employee_id:e},null,!0)},recVideoInterviewCheck:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.callHcmOpenApi("recruit.video.interview.record.get",{apply_id:e,key:t,instance_id:i,source:"recruit"},null,!0)}}}]),O.a.factory("recPerfLineService",["$q","$http","dataService","contextService","listCacheService2","$filter",function(e,t,n,i,o,a){return{setDialogContent:function(t,i){var o=e.defer();return(null==t?void 0:t.content)&&(t.content=a("xss_filter")(t.content)),n.callHcmOpenApi("perf.assess.card.new.send.board.info",{info:t,card_id:i},null,!0).then((function(e){o.resolve(e)})),o.promise},getDialogContent:function(e){return o(null,"feed.article.get.list",e)},getApplyInfo:function(e){return n.callHcmOpenApi("hcm.model.get",{id_:e,model:"ApplyJobRecords"},null,!0)},getResumeInfo:function(e,t){return n.callHcmOpenApi("recruit.get.resume",{resume_id:e,contract_unit:t},null,!0)},getEmployeeInfo:function(e){return n.callHcmOpenApi("emp.get.json",{employee_id:e},null,!0)},recVideoInterviewCheck:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.callHcmOpenApi("recruit.video.interview.record.get",{apply_id:e,key:t,instance_id:i,source:"recruit"},null,!0)}}}]),O.a.factory("articleService",["listCacheService","dataService","contextService","$q","$state",function(e,t,n,i,o){return{articleCreate:function(e){return e.except=["all"],t.callHcmOpenApi("feed.article.create",e,null,!0)},getArticle:function(e){return t.callHcmOpenApi("article.get",{article_id:e},null,!0)},articleDelete:function(e){return t.callHcmOpenApi("feed.article.delete",{article_id:e},null,!0)},articleTop:function(e){var n={article_id:e,order_num:3};return t.callHcmOpenApi("article.order.set",n,null,!0)},articleCancleTop:function(e){return t.callHcmOpenApi("article.order.cancel",{article_id:e},null,!0)},articleSendAll:function(e){return t.callHcmOpenApi("article.send.group.all.members",{article_id:e},null,!0)},getArticleAttachmentMeta:function(){return{vote:{service:"vote.get",widget:"vote-item-micro"},employee:{widget:"employee-micro"},file:{widget:"file-micro"},"mbo-target":{widget:"target-info-micro"},"attend-fieldwork":{widget:"attend-fieldwork-micro"},"attend-punchin":{widget:"attend-punchin-micro"},process:{widget:"process-item-micro"},bill:{widget:"bill-item-micro"},workflow_bill:{widget:"workflow-bill-item-micro"},workflow_bill_v3:{widget:"workflow-bill-item-micro-v3"},dashboard:{widget:"dashboard-micro"},"recruit-interview":{widget:"recruit-interview-micro"},"recruit-written":{widget:"recruit-written-micro"},"recruit-basic":{widget:"recruit-basic-micro"},"recruit-interview-code":{widget:"recruit-interview-code-micro"},"recruit-ai-interview-code":{widget:"recruit-interview-code-micro"},"recruit-ai-interview-result":{widget:"recruit-ai-interview-result-micro"},"recruit-ai-interview-error":{widget:"recruit-ai-interview-error-micro"},"recruit-offer":{widget:"recruit-offer-micro"},"recruit-evalue":{widget:"recruit-evalue-micro"},"recruit-evalue-manager":{widget:"recruit-evalue-micro"},"recruit-invite":{widget:"recruit-invite-micro"},"inner-recruit":{widget:"inner-recruit-micro"},"perf-card-approve":{widget:"perf-card-approve-micro"},"perf-goal-complete":{widget:"perf-goal-complete-micro"},"perf-card-modify":{widget:"perf-card-modify-micro"},"share-circle":{widget:"share-circle-micro"},"recruit-approve":{widget:"recruit-approve-micro"},"perf-item-detail-complete":{widget:"perf-item-detail-complete-micro"}}},getArticleSendMemberCount:function(e){return t.callHcmOpenApi("article.send.group.all.members.count",{article_id:e},null,!0)}}}]),O.a.factory("commentService",["listCacheService2","dataService","contextService","$q","$state","$hcDialog",function(e,t,n,i,o,a){return{articleLike:function(e){return t.callHcmOpenApi("feed.article.like",{article_id:e},null,!0)},getCommentList:function(t){return e({class:"article_comment",article_id:t},"article.comment.list",{article_id:t})},portalCommentList:function(e){return t.callHcmOpenApi("article.comment.list",{article_id:e},null,!0)},createComment:function(e){return t.callHcmOpenApi("feed.article.comment.create",e,null,!0)},deleteComment:function(e){return t.callHcmOpenApi("article.comment.delete",{comment_id:e},null,!0)},getLikeList:function(e){return t.callHcmOpenApi("article.like.list",{id:e},null,!0)}}}]);n("pNMO"),n("4Brf"),n("sMBO"),n("qePV"),n("TWNs"),n("JfAA"),n("Rm1S"),n("UxlC");var C=n("lHQ6"),M=n.n(C),S=n("D3kx"),E=n.n(S),P=n("WxoT"),j=n.n(P);function T(e,t){if(e){var n=t.length;n>1e3&&(t=t.substring(0,500)+"-----"+t.substring(n-500,n))}}function A(e,t,n){var i=t+"="+n;e.push(i)}O.a.directive("articleResumeCard",(function(){return{template:n("MtZW"),scope:{item:"=",messageId:"="},controller:["$scope","$rootScope","recChatLineService","dataService",function(e,t,n,i){e.init=function(){e.apply_id=e.item.feed.biz_id.match(/\d+/)[0],e.has_jump=!1,i.callHcmOpenApi("recruit.apply.article.role.check",{apply_id:e.apply_id}).then((function(t){e.has_jump=t})),i.callHcmOpenApi("hcm.model.get",{model:"ApplyJobRecords",id_:e.apply_id,from_:"view",state:"article"}).then((function(t){i.callHcmOpenApi("hcm.model.get",{model:"ResumeMgr",id_:t.resume_id,from_:"view",state:"article"}).then((function(t){var i;e.resume=t;var o=0;w()(i=e.item.other_comment.list).call(i,(function(t){if(t.logger_id){var i=t.logger_id.split(":");if(i.length>1&&(1==i[1]||"1"==i[1])){if(t.send_msg_name=JSON.parse(j()(e.resume.basis.name)),t.receive_msg_name=null,t.reply_to_id)(a=t.reply_to_id.split(":")).length>1&&(0==a[1]||"0"==a[1])&&n.getEmployeeInfo(a[0]).then((function(e){t.receive_msg_name=JSON.parse(j()(e.name))}));e.item.other_comment.list[o]=t}else if(i.length>1&&(0==i[1]||"0"==i[1])){var a;if(n.getEmployeeInfo(i[0]).then((function(e){t.send_msg_name=JSON.parse(j()(e.name))})),t.receive_msg_name=null,t.reply_to_id)(a=t.reply_to_id.split(":")).length>1&&(1==a[1]||"1"==a[1])&&(t.receive_msg_name=JSON.parse(j()(e.resume.basis.name)));e.item.other_comment.list[o]=t}}o+=1}))}))}))},e.go_emp=function(e,n){n&&n.stopPropagation(),t.super_go("emp",{id:e})},e.go_apply=function(n){n&&n.stopPropagation(),t.super_go("recruit_apply_jump",{id:e.apply_id})}}]}})),O.a.directive("miniFeedRecruit",(function(){return{template:n("1zKg"),scope:{objectId:"=",bizName:"=",bizState:"="},controller:["contextService","$scope","$rootScope","$state","$timeout","multiPageService",function(e,t,n,i,o,a){t.go_apply=function(){n.super_go("recruit_apply_jump",{id:t.objectId})}}]}})).directive("feedBizObjectMini",["$compile",function(e){return{restrict:"EA",replace:!0,template:"<div>{{item}}</div>",scope:{bizId:"=",bizName:"=",bizState:"="},link:function(t,n,i){t.object_id=t.bizId.split(":")[1];var o="<mini-feed-"+t.bizId.split(":")[0];o+=" object-id='object_id' biz-name='bizName' biz-state='bizState'></mini-feed-"+t.bizId.split(":")[0]+">",n.html(o),e(n.contents())(t)}}}]).directive("recruitBasicMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("ufR/"),controller:["$scope",function(e){e.init=function(){e.fieldwork_item={},e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData)},e.go_url=function(e){event.stopPropagation(),window.open(e)}}]}})).directive("recruitAiInterviewResultMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("vAHh"),controller:["$scope","recResumeDetailService","$rootScope",function(e,t,n){e.init=function(){if(e.fieldwork_item={},!e.objectData)return!1;"string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData,void 0!==e.fieldwork_item.ai_interview_callback&&(e.isShowAiResult=!0)},e.showAiResult=function(e,i){var o={apply_id:e};void 0!==i&&(o.instance_id=i),event.stopPropagation(),t.getAiInterviewVideo(o).then((function(e){e.success?t.getAIVideoDialog(e.data):n.show_warning("该应聘者还未进行AI面试")}))}}]}})).directive("recruitAiInterviewErrorMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("N5Pk"),controller:["$scope","$rootScope",function(e,t){e.init=function(){e.fieldwork_item={},e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData)},e.go_recruit_setting=function(e){t.super_go(null==e?void 0:e.state,null==e?void 0:e.params,null,!0)}}]}})).directive("recruitInterviewCodeMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("WHes"),controller:["$scope",function(e){e.init=function(){e.fieldwork_item={},e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData,void 0===e.fieldwork_item.video_interview_url&&(e.video_interview_enable=!1),void 0!==e.fieldwork_item.ai_interview_code_url&&(e.if_ai_code=!0))}}]}})).directive("recruitWrittenMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("QRXc"),controller:["$scope","$filter","weChatService","contextService","recChatLineService","$rootScope","$location",function(e,t,n,i,o,a,l){e.init=function(){e.fieldwork_item={},e.client=window.client,e.app_type=window.app_type,e.auth=i.getContext("auth"),e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData,e.go_url=function(e){event.stopPropagation(),window.open(e)})}}]}})).directive("recruitInterviewMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("GGhQ"),controller:["$scope","$filter","weChatService","contextService","recChatLineService","$rootScope","$location",function(e,t,n,i,o,a,l){e.init=function(){var t,l;(e.fieldwork_item={},e.client=window.client,e.app_type=window.app_type,e.auth=i.getContext("auth"),e.video_interview_enable=!0,e.is_web_video_interview_mode=!0,!0===i.getContext("auth").company_setting.recruit_video_interview_enable&&(e.video_interview_enable=!0),e.hide_contacts="recruit"==window.app_type,"pc"!==e.client&&(e.is_web_video_interview_mode=!1),e.objectData)&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData,void 0===e.fieldwork_item.video_interview_url&&(e.video_interview_enable=!1),s()(t=(null==e||null===(l=e.fieldwork_item)||void 0===l?void 0:l.video_interview_url)||"").call(t,"meeting.tencent.com")>-1&&(e.is_web_video_interview_mode=!0),e.showLocation=function(){if("pc"!==window.client){var t={latitude:E()(e.fieldwork_item.latitude),longitude:E()(e.fieldwork_item.longitude),name:e.fieldwork_item.datetime,address:e.fieldwork_item.address,scale:28,infoUrl:""};n.showLocation(t)}},e.goConfirm=function(e){event.stopPropagation(),window.location.href=e},e.goOpenNew=function(e){event.stopPropagation(),window.open(e,"_blank")},e.interview_go_emp=function(e,t){t&&t.stopPropagation(),a.super_go("emp",{id:e},{},!0)},e.goVideoInterview=function(t){var n;if((null==t?void 0:s()(n=t.video_interview_url).call(n,"tencent.com"))>-1)e.goOpenNew(null==t?void 0:t.video_interview_url);else{var i,l=t.video_interview_url,r=t.invite_time,c=null,d=null;s()(l).call(l,"vi_pc")>-1?(i=l.match(/check_key=(.*)/)[1],d=l.match(/instance_id=(.*)&candidate/)[1]):(i=l.match(/key=(.*)&/)[1],c=l.match(/apply_id=(.*)/)[1]),o.recVideoInterviewCheck(c,i,d).then((function(t){t.success||10===String(r).length?e.goOpenNew(l):a.show_warning(t.data+"，面试时间为"+r)}))}})}}]}})).directive("recruitOfferMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("OW3F"),controller:["$scope","$filter","weChatService","contextService",function(e,t,n,i){e.init=function(){e.fieldwork_item={},e.hide_contacts="recruit"===window.app_type,e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData)},e.goConfirm=function(e){event.stopPropagation(),window.location.href=e}}]}})).directive("recruitApproveMicro",(function(){return{restrict:"E",scope:{approveRecord:"=",public:"=",objectId:"=",objectData:"="},template:n("IKIc"),controller:["$scope","$hcDialog","dataService","workflowOnlineService",function(e,t,n,i){e.examine_modify=function(){n.callHcmOpenApi("recruit.get.wf.all.by.apply",{apply_id:e.approveRecord},null,!0).then((function(e){e.success&&e.data&&e.data.inst&&i.getWfVersion(e.data.inst.business_id).then((function(n){D.a.getCustomDialogCtrl("1"==n.version?"billDialog":"2"==n.version?"WorkflowDetailInfoCtrl":"WorkflowDetailNewInfoCtrl").then((function(i){t.getDialog("1"===n.version?i:i(e.data.inst.business_id)).params({mode:"view",wf_inst_id:e.data.inst.id,business_id:e.data.inst.business_id}).size("full").show().then((function(){}))}))}))}))}}]}})).directive("recruitEvalueMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("/nOd"),controller:["$scope","dataService",function(e,t){e.init=p()(u.a.mark((function n(){var i,o,a,l,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.fieldwork_item={},e.hasInterviewResultTemplate=[],e.filed_show=!1,e.total_obj={},!e.objectData){n.next=17;break}if("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData,"v2"!==e.fieldwork_item.temp_version){n.next=11;break}return n.next=9,t.callHcmOpenApi("get_template",{key:e.fieldwork_item.temp_meta_state},null,!0);case 9:l=n.sent,e.fieldwork_item.template=l.template_config.fields;case 11:if("v3"!==e.fieldwork_item.temp_version){n.next=15;break}return n.next=14,t.callHcmOpenApi("recruit.get.interview.template.by.state",{meta_state:e.fieldwork_item.temp_meta_state,interview_temp_id:e.fieldwork_item.interview_template_id},null,!0);case 14:e.fieldwork_item.template=n.sent;case 15:(null===(i=e.fieldwork_item)||void 0===i?void 0:i.template)||(e.filed_show=!0),(null===(o=e.fieldwork_item)||void 0===o?void 0:o.template)&&(null===(a=e.fieldwork_item)||void 0===a?void 0:a.template.length)&&(e.filed_show=!0,w()(r=e.fieldwork_item.template).call(r,(function(t){var n;e.fieldwork_item[t.key]&&"overall_score"!==t.key&&"conclusion"!==t.key&&"comments"!==t.key&&t.is_article?e.hasInterviewResultTemplate.push({key:t.key,value:e.fieldwork_item[t.key],label:t.label,component:null!==(n=t.component)&&void 0!==n?n:null}):e.total_obj[t.key]=t.label})));case 17:case"end":return n.stop()}}),n)})))}]}})).directive("recruitInviteMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"=",messageId:"="},template:n("5pus"),controller:["$scope","$filter","weChatService","contextService","$rootScope","$state",function(e,t,n,i,o,a){e.go_evaluate=function(){var t,n=i.getContext("auth"),a=e.objectId.split(";")[0],l=e.objectId.split(";")[1];e.check=s()(t=e.objectData).call(t,n.employee.id),n.employee&&n.employee.id&&e.check>=0?o.super_go("recruit_resume",{type:"evaluate",id:a,interview_state:l,message_id:e.messageId}):o.show_warning("您不是面试官，不能进行评价！","warning")}}]}})).directive("innerRecruitMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("tDRi"),controller:["$scope","$filter","contextService","$rootScope",function(e,t,n,i){e.init=function(){e.fieldwork_item={},e.objectData&&("string"==typeof e.objectData?e.fieldwork_item=JSON.parse(e.objectData):e.fieldwork_item=e.objectData)},e.go_inner_job=function(){i.super_go("recruit_inner_job_list",{job_id:e.objectId})}}]}})).directive("voteItemMicro",(function(){return{template:n("EJd8"),scope:{objectId:"=",objectData:"="},controller:["contextService","$scope","$rootScope","$state","$timeout","multiPageService",function(e,t,n,i,o,a){t.init=function(){t.objectData?"string"==typeof t.objectData?t.item=JSON.parse(t.objectData):t.item=t.objectData:t.item={name:"我的投票",desc:""}},t.go_item=function(){n.super_go("vote",{id:t.objectId})}}]}})).directive("dashboardMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("Z/3M"),controller:["$scope","$filter","$rootScope",function(e,t,n){e.init=function(){e.id=e.objectId;var t=JSON.parse(e.objectData||"{}");e.name=t.name,e.params=t.params},e.goToDashboard=function(){n.super_go("insight_dashboard",{id:e.id,params:e.params})}}]}})).directive("perfCardApproveMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("I4ev"),controller:["$scope","$hcDialog",function(e,t){e.go_approval_process=function(){D.a.getCustomDialogCtrl("billProcessCtrlDialog").then((function(n){t.getDialog(n).params({wf_inst_id:e.objectId}).size("middle").show().then((function(e){}))}))}}]}})).directive("perfCardModifyMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("7pFR"),controller:["$scope","$hcDialog","dataService",function(e,t,i){e.business_id=e.objectId.split("-")[0],e.inst_id=e.objectId.split("-")[1],e.form_id=e.objectId.split("-")[2],e.go_modify_comparison=function(){i.callHcmOpenApi("workflow.get.wf.all",{inst_id:e.inst_id},null,!0).then((function(i){i.success&&i.data&&(i.data.business&&3===i.data.business.version?D.a.getCustomDialogCtrl("v3wfContrastCtrl").then((function(n){t.getDialog(n).params({business_id:e.business_id,form_id:e.form_id,inst_id:e.inst_id,state:null,form_data_id:e.form_id}).size("full").show().then((function(){}))})):t.getDialog({controller:"wfContrastCtrl",template:n("Owdj")}).params({business_id:e.business_id,inst_id:e.inst_id,state:null,form_data_id:e.form_id}).size("full").show().then((function(){})))}))},e.go_approval_process=function(){D.a.getCustomDialogCtrl("billProcessCtrlDialog").then((function(n){t.getDialog(n).params({wf_inst_id:e.inst_id}).size("middle").show().then((function(e){}))}))}}]}})).directive("perfGoalCompleteMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("u4K0"),controller:["$scope",function(e){e.init=function(){var t=e.objectData.split("-").length,n=e.objectData.split("-")[t-1],i=Number(e.objectData.split("-")[t-1]);if(e.comment=e.objectData.split("-")[0],isNaN(i))if("None"!==e.objectData.split("-")[t-1]){e.file_id=e.objectData.split("-")[t-1];var o=new RegExp("&!&","g");e.file_id=e.file_id.replace(o,"-"),e.complete_value=e.objectData.split("-")[t-2];for(var a=1;a<t-2;a++)e.comment=e.comment+"-"+e.objectData.split("-",t-2)[a]}else for(var l=1;l<t-1;l++)e.complete_value="None",e.comment=e.comment+"-"+e.objectData.split("-",t-1)[l];else if(e.file_id="",""===n){e.complete_value=e.objectData.split("-")[t-2];for(var r=1;r<t-2;r++)e.comment=e.comment+"-"+e.objectData.split("-",t-2)[r]}else{e.complete_value=i;for(var c=1;c<t-1;c++)e.comment=e.comment+"-"+e.objectData.split("-",t-1)[c]}}}]}})).directive("shareCircleMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("ROk8"),controller:["$scope","$filter","$rootScope",function(e,t,n){e.init=function(){var t=JSON.parse(e.objectData||"{}");e.name=t.name,e.state=t.state,e.iconName=t.iconName||"icon-hcm-form",e.params=t.params},e.goPage=function(){n.super_go(e.state,e.params,{reload:e.state})}}]}})).directive("perfItemDetailCompleteMicro",(function(){return{restrict:"E",scope:{objectId:"=",objectData:"="},template:n("kAdk"),controller:["$scope",function(e){e.init=function(){e.complete_percent=M()(e.objectId);var t=e.objectData.split("@_@");e.complete_value=t[0],e.file_id=t[1],e.description=t[2]}}]}})),O.a.directive("articlePerfCard",(function(){return{template:n("fpQX"),scope:{item:"="},controller:["$scope","$rootScope","recChatLineService",function(e,t,n){e.init=function(){e.card_id=e.item.feed.biz_id.match(/\d+/)[0]},e.go_emp=function(e,n){n&&n.stopPropagation(),t.super_go("emp",{id:e})}}]}})),O.a.directive("employeeMicro",(function(){return{template:n("ryYh"),scope:{objectId:"="},controller:["contextService","$scope","$rootScope","dataService",function(e,t,n,i){t.init=function(){i.callHcmOpenApi("emp.info",{id:t.objectId},null,!0).then((function(e){t.item=e}))},t.go_item=function(){n.super_go("emp",{id:t.item.id})}}]}})),window.uploadPageJump=function(e,t,n){var i,o,a=window.hcm_wengen+"/log/pagerecord?",l=[];A(l,"fromstate",t),A(l,"tostate",e),A(l,"params",n),window.app_company&&A(l,"company_id",window.app_company.id),A(l,"device_resolution",(i=window.screen.height,o=window.screen.width,i>o?i+"*"+o:o+"*"+i)),function(e,t){var n=new XMLHttpRequest;n.open("GET",e+t+window.hcm_env_post,!0),n.send(null)}(a,function(e){return e.join("&")}(l))},window.uploadError=T,window.onerror=function(e,t,n){T("00001",e+";url="+t+":"+n)};n("07d7"),n("5s+n"),n("p532");var I=n("pPxq"),L=n.n(I);O.a.controller("AutoLoginCtrl",["$rootScope","$scope","$location","AuthService","$state","$window","contextService",function(e,t,n,i,o,a,l){e.show_waiting();try{console.log("in auto login"),i.getAuth().finally((function(){e.hide_waiting()})).then((function(e){var t,n,a;if(e&&null==e.user&&null===e.sso&&navigator.userAgent&&(s()(t=navigator.userAgent.toLowerCase()).call(t,"micromessenger")>=0||s()(n=navigator.userAgent.toLowerCase()).call(n,"lanxin")>=0||s()(a=navigator.userAgent.toLowerCase()).call(a,"emmcloud")>=0)){var l=null==o.params.next?{state:"index",params:{}}:JSON.parse(o.params.next);console.log("login_by_sso:"+(l.state||"no state found")),i.login_by_sso(i.getStateFullUrl(l.state),l.param)}else i.goNext(o.params.next)}),(function(e){window.app||(alert("get auth error"),alert(e)),o.go(window.isApp?"app_input_pwd":"login",{next:o.params.next,show_login:!0},{location:"replace"})}))}catch(e){alert("auth login errror2"),alert(e),o.go(window.isApp?"app_input_pwd":"login",{next:o.params.next,show_login:!0},{location:"replace"})}}]).controller("LoginCtrl",["contextService","$scope","$rootScope","$location","dataService","AuthService","$state","$timeout","$filter",function(e,t,n,i,o,a,l,r,c){t.init=function(){var n,i,o,a,r;t.ssobind=null!=e.getContext("auth")&&(null!=e.getContext("auth").sso||navigator.userAgent&&(s()(n=navigator.userAgent.toLowerCase()).call(n,"micromessenger")>=0||s()(i=navigator.userAgent.toLowerCase()).call(i,"lanxin")>=0||s()(o=navigator.userAgent.toLowerCase()).call(o,"emmcloud")>=0)),t.ssobind&&(t.is_login_box_show=!0),t.company_logo=window.company_logo,t.system_name=window.special_title,t.is_input_mail=!1,t.is_my_service=!(!L()(a=location.host).call(a,"wx56b5ebcd0c7759e2")&&!L()(r=location.host).call(r,"inspur")),t.need_image_code="True"==window.need_image_code,console.log("login client:"+window.client),t.change_mode("pc"==window.client?"password":"code");try{t.mobile=window.storage.getItem("local","login_page_save_tel")||""}catch(e){t.mobile=""}t.is_save_tel=!0,t.valid_code=null,t.image_code=null,t.is_code_waiting=!1,l.params.show_login&&t.showLoginBox(),"pc"==window.client&&t.init_pc_qr_code_login(),t.user_name="",t.user_email="",t.ssobind&&(t.user_name=null==e.getContext("auth").sso.user_info?"":e.getContext("auth").sso.user_info.nickname),t.app_id=null==e.getContext("auth").sso.user_info?"":e.getContext("auth").sso.user_info.app_id,"recruit"==window.app_type&&t.zsbLogo(),t.init_image_code()},t.init_image_code=function(){t.image_code_version="/img/imagevalidatecode?index="+window.image_code_index+"&v="+Math.random()},t.zsbError=function(){t.zsbErrorTip=!0;t.user_name?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9])+$/.test(t.user_email)?/^(000)?1[34578]\d{9}$/.test(t.mobile)?t.zsbErrorContent="信息填写有误，请重新确认！":t.zsbErrorContent="您输入的手机号错误":t.zsbErrorContent="您输入的邮箱错误":t.zsbErrorContent="请输入姓名",r((function(){t.zsbErrorTip=!1}),3e3)},t.zsbLogo=function(){var e;t.templateCompany=["xmss","inspur","silverbasis"],s()(e=t.templateCompany).call(e,window.domain)>=0||(t.recruitLogo=t.company_logo?c("hcImage")(t.company_logo,"180,180","","","","img"):c("hcImage")("logo-180","180,180"))},t.pullUp=function(e){"fir"===e?$(".ui-view").animate({scrollTop:$("input").offset().top}):$(".ui-view").animate({scrollTop:$("input").eq(1).offset().top})},t.submit=function(){if(!t.is_submiting){t.is_submiting=!0,t.submitting_msg="正在验证中...",window.storage.setItem("local","login_page_save_tel",t.is_save_tel?t.mobile:"");var e={mobile:t.mobile,code:"code"===t.mode?t.valid_code:null,image_code:"code"===t.mode?null:t.image_code,image_code_index:window.image_code_index,app_type:window.app_type,app_id:t.app_id,password:"password"===t.mode?void 0===t.password?null:t.password:null};"recruit"==window.app_type&&angular.extend(e,{name:t.user_name,mail:t.user_email});var n="code"==t.mode?"验证码不正确哦，请尝试重新输入...":"密码不正确哦，请尝试重新输入...";t.ssobind?a.sso_bind(e).then((function(){t.is_submiting=!1,t.is_submited=!0,t.submitting_msg="验证成功";var e=JSON.parse(l.params.next||"null");null!=e?l.go(e.state,e.params,e.option):l.go("index",{},{location:"replace"})}),(function(){t.is_submiting=!1,t.submitting_msg=null,t.show_warning(n,"warning")})):a.login(e).then((function(){if(t.is_submiting=!1,t.is_submited=!0,t.submitting_msg="验证成功","code"==t.mode&&"pc"==window.client)l.go("set_password",{next:l.params.next},{location:"replace"});else{var e=JSON.parse(l.params.next||"null"),n={};null!=e&&(n={state:e.state,params:e.params,option:e.option}),a.goNext(n)}}),(function(){t.is_submiting=!1,t.submitting_msg=null,t.show_warning(n,"warning")}))}},t.refresh_image=function(){t.init_image_code()},t.getValidateCode=function(){var e,n=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!/^(000)?1[345789]\d{9}$/.test(t.mobile)&&!n.test(t.mobile))return t.show_warning(t.is_my_service?"请输入正确的手机号,邮箱":"请输入正确的手机号","warning"),!1;t.nextStep=!0,n.test(t.mobile)?t.is_input_mail=!0:t.is_input_mail=!1,t.is_code_waiting||(t.is_code_waiting=!0,t.$broadcast("timer-start"),t.show_help_info(),0==s()(e=t.mobile).call(e,"000")?t.mobile=t.mobile.substr(3):a.getValidCode(t.mobile).then((function(){}),(function(e){null!=e.errcode&&"40006"==e.errcode?t.show_warning(e.errmsg,"warning"):t.show_warning("短信服务暂时不可用，我们很快会解决这个问题。","warning")})))},t.no_validate_code_class="",t.show_help_info=function(){r((function(){null==t.valid_code&&(t.is_show_voice=!0,t.no_validate_code_class="l4")}),5e3)},t.is_show_help=!1,t.show_help=function(){t.is_show_help=!t.is_show_help},t.timer_stop=function(){r((function(){t.is_code_waiting=!1}))},t.change_mode=function(e){t.mode=e,"password"==e?t.valid_code=null:t.password=null,"password"!=e?(t.is_wx_login=!0,"weixin"==e&&(t.need_query=!0,t.start_query_login_success())):(t.is_wx_login=!1,t.login_querying=!1,t.need_query=!1)},t.start_query_login_success=function(){var e=t.qr_code_job;t.need_query&&(t.login_querying=!1,r((function(){t.need_query&&!t.login_querying&&(t.login_querying=!0,a.query_login_result(e).then((function(e){t.login_querying=!1,e.success?(t.need_query=!1,"pc"==window.client&&l.go(e.next.state_name,{})):t.start_query_login_success()})))}),1e3))},t.showLoginBox=function(){t.is_login_box_show=!0},t.closeLoginBox=function(){t.is_login_box_show=!1},t.panelClick=function(e){e.stopPropagation()},t.init_pc_qr_code_login=function(){t.qr_code_job=(new Date).valueOf()+""+Math.floor(1e7*Math.random()),n.$on(t.qr_code_job,(function(e,n){var i={code:t.qr_code_job};a.qr_code_login(i).then((function(e){"pc"==window.client&&l.go(e.next.state_name,{})}),(function(){t.show_warning("请先手机端登录认证通过后，再扫描登录！","warning")}))})),t.login_qr_code_src="/api/pc/get_pc_login_qr_code?job="+t.qr_code_job+"&app_type="+window.app_type},t.$on("registerForm.mobile.$valid",(function(e){alert("hi")})),t.enter_key_press=function(e){13==e.keyCode&&t.submit()},t.sendVoiceCode=function(){a.sendVoiceCode(t.mobile).then((function(e){t.is_voice_sended=!0}))},t.reValidate=function(){t.nextStep=!1,t.valid_code=null,t.is_voice_sended=!1}}]).controller("WXLoginCtrl",["$scope","$rootScope","$state","$stateParams","$timeout","dataService","cacheService",function(e,t,n,i,o,a){e.isLogin=!1,e.login=function(){var e={job:i.job,app_type:window.app_type,company_id:window.app_company.id};a.callHcmCloudApi("/pc/wx_qr_code_login",e,"POST").then((function(e){o((function(){WeixinJSBridge.call("closeWindow")}),1e3)}))}}]).controller("BizErrorCtrl",["$rootScope","$scope","$state","contextService","AuthService",function(e,t,n,i,o){var a,l;t.app_company=window.app_company,t.app_company=window.app_company,t.auth=i.getContext("auth"),t.phone_number=t.auth.user.cell_phone,t.show_re_bind=null===(a=null===(l=t.auth.company_setting)||void 0===l?void 0:l.show_rebind_login)||void 0===a||a,"emp_error"==n.current.name?(t.common_error_info=["很抱歉，您的手机号码:",t.phone_number,"在员工服务系统中未登记","可能是您输入有误或者是您所在的企业","暂时还没有开通HCM Cloud服务"],t.company_error_info=["很抱歉，您的手机号码:",t.phone_number,"在员工服务系统中未登记","如果您确实是公司员工","请联系您的人力资源专员确认"]):"entry_error"===n.current.name?t.company_error_info=["很抱歉，您的手机号码:",t.phone_number,"在入职登记系统未登记","可能是您的Offer信息还没有进入系统","如需确认,请联系您的人力资源专员"]:"enter_error"===n.current.name?t.company_error_info=["很抱歉，您的手机号码:",t.phone_number,"在人员信息录入系统未登记","如需确认,请联系您的人力资源专员"]:"ops_error"===n.current.name?(t.common_error_info=["很抱歉，您的手机号码:",t.phone_number,"在Ops系统未登记","如需确认,请联系Ops平台管理员"],t.company_error_info=t.common_error_info):"partner_error"===n.current.name?t.common_error_info=["很抱歉，您的手机号码:",t.phone_number,"在合作伙伴系统未登记或已失效","如需确认,请联系您的人力资源专员"]:"pre_emp_enter_error"===n.current.name?(t.common_error_info=["您的手机号码",t.phone_number,"未被添加到采集系统，无权限访问","请联系本单位人力资源专员添加"],t.company_error_info=["您的手机号码",t.phone_number,"未被添加到采集系统，无权限访问","请联系本单位人力资源专员添加"]):t.company_error_info=["很抱歉，您的手机号码:",t.phone_number,"在系统未登记","如需确认,请联系您的人力资源专员"],t.isSSO=o.isSSO(),t.re_bind=function(){e.super_go("login",{next:n.params.next},{location:"replace"})},t.reBind=function(){o.reBind()},t.reLogin=function(){o.reLogin(n.params.next)}}]).controller("RoleErrorCtrl",["$rootScope","$scope","$state","contextService","AuthService",function(e,t,n,i,o){var a,l,r,c,d;t.role_name=n.params.role_name;var u=i.getContext("auth");t.mobile_number=u?u.user.cell_phone:"",t.show_re_bind=null===(a=null===(l=u.company_setting)||void 0===l?void 0:l.show_rebind_login)||void 0===a||a,t.roleErrorBackgroundIndex=null!==(r=null===(c=u.company_setting)||void 0===c?void 0:c.roleErrorBackgroundIndex)&&void 0!==r?r:"img_error_lock",t.reBind=function(){o.reBind()},t.reLogin=function(){o.reLogin(n.params.next)},t.isEmmcloud=s()(d=navigator.userAgent.toLowerCase()).call(d,"emmcloud")>=0,t.isSSO=o.isSSO(),t.goIndex=function(){e.super_go("index",{},{location:"replace"})}}]).controller("LoginErrorCtrl",["$rootScope","$scope","contextService","AuthService","$timeout","$filter",function(e,t,n,i,o,a){t.init=function(){t.client=window.client,"pc"===t.client&&o((function(){alert(a("translate")("login_error")),i.closeCurPage()}),1e3)}}]);n("hByQ"),n("R5XZ");var F,R=n("iYz8"),B=n.n(R),U=n("6UaR"),q=n.n(U),W=n("Dcj1"),z=n.n(W),N=n("O0yt"),K=n.n(N),H=n("0lTi"),V=n.n(H),Y=n("OBge"),G=n.n(Y),J=n("fHi0"),X=n.n(J),Q=n("7Gle"),Z=n.n(Q),ee=n("526F"),te=n.n(ee),ne=n("o+MX"),ie=n.n(ne),oe=n("mnMc"),ae=n.n(oe),le=n("+oHS"),re=n.n(le),ce=n("dj1t");function se(e){if(void 0===K.a||null==z()(e)){if(q()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return de(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return V()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return de(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=B()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(window.wx_debug||s()(F=location.search).call(F,"debug=")>-1)&&n.e(94).then(n.t.bind(null,"OjQg",7)).then((function(e){var t=e.default;try{new t}catch(e){}}));var ue=re()(ce.c),_e=w()(ue).call(ue,(function(e){return"_".concat(e,"_")}));function pe(e){return null!=e?e.toString().replace(/(~|\/)/g,(function(e){return{"~":"~~","/":"~2F"}[e]})):e}function me(e){return null!=e?e.toString().replace(/(~~|~2F)/g,(function(e){return{"~~":"~","~2F":"/"}[e]})):e}function fe(e){return r()(e).call(e,0,5).toUpperCase()}function he(e){var t;return null!=e&&ae()(_e).call(_e,fe(null===(t=e.toString)||void 0===t?void 0:t.call(e)))}function ge(e){var t,n=(t=fe(e.toString()),r()(t).call(t,1,4).toUpperCase());return ce.c[n]?ce.c[n].decode(r()(e).call(e,5)):e}O.a.config(["$provide","$urlRouterProvider","$sceDelegateProvider","$locationProvider","$urlMatcherFactoryProvider",function(e,t,n,i,o){i.hashPrefix(""),t.otherwise((function(e,t){e.get("$state").go("index")}));var a=o.type("string"),l=te()({},a,{encode:function(e){return he(e)?pe(e):function(e){try{var t,n,i=null===(t=window.hcm_url_encrypt_strategy)||void 0===t?void 0:t.toUpperCase();return i&&ce.c[i]&&ae()(ue).call(ue,i.toUpperCase())?ie()(n="_".concat(i.toUpperCase(),"_")).call(n,ce.c[i].encode(e)):e}catch(t){return console.error(t),e}}(pe(e))},decode:function(e){return he(e)?me(ge(e)):me(e)}});o.type("string",l),window.hcmUrlParamDecoder=function(e){return l.decode(decodeURIComponent(e))},window.hcmUrlParamEncoder=function(e){return l.encode(e)},n.resourceUrlWhitelist(["self","http://www.hcmcloud.cn/**","http://mobile.hcmcloud.cn/**","https://cdncrcc.hcmcloud.cn/**","https://cdneval.hcmcloud.cn/**","http://js2.hcmcloud.cn/**","https://js2.hcmcloud.cn/**","http://js.hcmcloud.cn/**","http://css.hcmcloud.cn/**","http://lib.hcmcloud.cn/**","https://lib.hcmcloud.cn/**","http://template.hcmcloud.cn/**","http://image.hcmcloud.cn/**","http://chinalcojs.hcmcloud.cn/**","http://chinalcocss.hcmcloud.cn/**","http://chinalcolib.hcmcloud.cn/**","http://chinalcotemplate.hcmcloud.cn/**","http://chinalco.hcmcloud.cn/**","http://chinalcoimage.hcmcloud.cn/**","http://hcmcloud.cn/**","http://local_css.hcmcloud.cn/**","http://imgcache.qq.com/**","https://api.map.baidu.com/**"]),e.decorator("$exceptionHandler",["$delegate",function(e){return function(t,n){e(t,n),uploadError("00001",t.message+t.stack+":"+n)}}]),e.decorator("$controller",["$delegate",function(e){return function(t,n,i,o){return"string"==typeof t&&(null==n?void 0:n.$scope)&&n.$scope.$prevScopeID!==n.$scope.$id&&(n.$scope.controllerName=t,n.$scope.$prevScopeID=n.$scope.$id),e(t,n,i,o)}}])}]),O.a.run(["$q","$timeout","$rootScope","$state",function(e,t,n,i){var o;if(-1===s()(o=location.search).call(o,"performance=")){var a=window.clearTimeout;Promise=function(e){var t=function(t){var n=new e(t);return n.then((function(e){return l(),e}),(function(e){return l(),e})),n};t.prototype=e.prototype;var n,i=se(Z()(e));try{for(i.s();!(n=i.n()).done;){var o=n.value;X()(e,o).writable&&(t[o]=e[o])}}catch(e){i.e(e)}finally{i.f()}return t}(G.a),window.setTimeout=t,window.clearTimeout=function(e){var n;e&&(e.$$timeoutId?null==t||null===(n=t.cancel)||void 0===n||n.call(t,e):a(e))}}function l(){var e,t;if(n&&(!ae()(e=["index","board-report","workflow_bill_v3",""]).call(e,i.current.name)||-1!==s()(t=location.search).call(t,"debug=")))return n.$$phase?n.$evalAsync():n.$digest()}}]),O.a.run(["weChatService","$rootScope","$state","$urlRouter","AuthService","$location","contextService","$timeout","$hcDialog","dataService",function(e,t,n,i,o,a,l,r,c,s){t.client=window.client,t.$on("$stateChangeStart",(function(i,a,r,d,u,_){if(document.title=window.special_title,c.closeAll(),t.$broadcast("dialog-all-close"),e.hideShareOption(),a.role&&""!==a.role)if(l.getContext("auth"))try{o.checkRole(a.role)}catch(e){var p,m;if(console.log("$state_role_not_pass:"+a.name+":"+a.controller),i.preventDefault(),"user"===e.reason)if(l.clear("auth"),"recruit"==(null===(p=window)||void 0===p?void 0:p.app_type))s.callHcmOpenApi("recruit.portal.setting.get.fixed.param",{organ_id:null==n||null===(m=n.params)||void 0===m?void 0:m.contract_unit},null,!0).then((function(e){o.goLogin(o.getUrlByState(a,r,_),"1"==e?"&mode=GETCODE":"")}));else o.goLogin(o.getUrlByState(a,r,_));else if("no-wechat"===e.reason)o.getAuth(!0).then((function(e){e.sso&&"wechatcomponent"===e.sso.sso_type?n.go(a.name,r,_):window.location.replace(window.hcm_wengen+"/login?sso=wechatcomponent&is_only_sso=1&next="+encodeURIComponent(o.getUrlByState(a,r,_))+"&app_type="+window.app_type+window.hcm_env_post)}),(function(){window.location.replace(window.hcm_wengen+"/login?sso=wechatcomponent&is_only_sso=1&next="+encodeURIComponent(o.getUrlByState(a,r,_))+"&app_type="+window.app_type+window.hcm_env_post)}));else{var f=location.pathname+location.hash;f=/_error/.test(f)?"":f,e.state?t.super_go(e.state,{next:f},{location:"replace"}):t.super_go("role_error",{role_name:e.name,next:f})}}else i.preventDefault(),o.getAuth().then((function(){var t=l.getContext("auth");"pc"===window.client&&/DingTalk/i.test(navigator.userAgent)&&t.company_setting&&t.company_setting.ding_outer_login&&window.commonOpen(o.getUrlByState(a,r,_)),(null==t?void 0:t.company)&&e.initConfig(),n.go(a.name,r,_)}),(function(){var e,t;"recruit"==(null===(e=window)||void 0===e?void 0:e.app_type)?s.callHcmOpenApi("recruit.portal.setting.get.fixed.param",{organ_id:null==n||null===(t=n.params)||void 0===t?void 0:t.contract_unit},null,!0).then((function(e){o.goLogin(o.getUrlByState(a,r,_),"1"==e?"&mode=GETCODE":"")})):o.goLogin(o.getUrlByState(a,r,_))}));else console.warn("%c state url: ".concat(j()(a.url),"，\n                 未设置 role 属性，可能导致获取的 auth 为空"),"color: red")})),t.$on("$stateChangeSuccess",(function(e,i,o,a,l){t.is_home_waiting&&"auto_login"!==i.name&&(console.log("$stateChangeSuccess: "+(new Date).toLocaleString()),r((function(){console.log("is_home_waiting: false"+(new Date).toLocaleString()),t.is_home_waiting=!1}),500)),t.is_need_back="index"!==i.name,uploadPageJump(i.desc||i.name,a.desc||a.name,j()(o)),r((function(){var e="slide-right";"terminal"===n.params.display_type&&(e+=" is-terminal"),document.body.className=e,t.page_forward="back"}),500)}));var d=a.path;a.path=function(e,i){if(!1===i)var o=n.current,l=t.$on("$locationChangeSuccess",(function(){event.preventDefault(),n.current=o,l()}));return d.apply(a,[e])}}]);var ve=n("5tqG"),be=n.n(ve),ye=n("Kwsy"),we=n.n(ye),xe=n("SnzR"),ke=n.n(xe);O.a.controller("PublicController",["$hcDialog","weChatService","$state","$rootScope","$scope","$timeout","$location","contextService","hcImageViewerService","documentPreviewService","$translate",function(e,t,n,o,a,l,r,c,d,u,_){console.log("in public controller: "+(new Date).toLocaleString()),a.is_waiting=!0,o.is_home_waiting=!0,o.warning_msg="",o.tergetUuid="";var p,m=t.isDing()||t.isWeWork();o.changeLanguage=function(e){window.hcm_language=e,_.use(e)},window.commonOpen=function(e){t.openNewPage(e).then((function(e){e&&window.open(e,"_blank")}))},window.isApp&&(window.isApp2?function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),we()((function(){document.documentElement.removeChild(t)}),0)}((function(e){e.registerHandler("JS Echo",(function(e,t){console.log("JS Echo called with:",e),t(e)})),e.registerHandler("stateGo",(function(e,t){console.log("JS Echo called with:",e),o.super_go(e.state,e.param),t(e)})),e.callHandler("ObjC Echo",(function(e){console.log("JS received response:",e)}))})):(p=function(e){e.init((function(e,t){t({})}))},window.WebViewJavascriptBridge?p(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",(function(){p(window.WebViewJavascriptBridge)}),!1))),o.show_warning=function(t,n,i,o){return e.notify(t,n,i)};var h=0;o.show_waiting=function(e){!0===e&&(h+=1),a.waiting_timeout&&a.waiting_timeout(),!1===o.is_waitting_show&&null===a.waiting_start_timeout?Object(i.o)((function(){o.$apply((function(){o.is_waitting_show=!0,a.waiting_start_timeout=null}))}),300,(function(e){return a.waiting_start_timeout=e})):o.is_waitting_show=!0},o.hide_waiting=function(e){!0===e&&(h>0&&(h-=1),0!==h)||(a.waiting_start_timeout&&(a.waiting_start_timeout(),a.waiting_start_timeout=null),Object(i.o)((function(){o.$apply((function(){o.is_waitting_show=!1}))}),300,(function(e){return a.waiting_timeout=e})))},o.report_fatal=function(e){var t,i=null===(t=c.getContext("auth"))||void 0===t?void 0:t.company_setting;if(15005===e.code)a.$broadcast("sysadmin_grant",e.content);else{var o;if(e.description)a.show_warning(e.description,"warning");else(null==e||null===(o=e.content)||void 0===o?void 0:L()(o).call(o,"系统服务暂时不可用:"))?a.show_warning("您的网络开小差了，请稍候...","warning"):a.show_warning("{0}{1}: {2}".format(i.CUSTOM_ERROR_REPORTING?i.CUSTOM_ERROR_REPORTING+"\n\n":"",e.code,e.content),"error");"pc"===window.client&&RegExp(/10001?/).test(e.code)&&n.go("auto_login",{})}},o.win_click=function(e){o.shift_press=1==e.shiftKey,o.$broadcast("win_body_click_event",e)},o.is_super_go=function(e,t){var n=!1;if(o.super_go_current){var i=/^([^\:]+)(\:(.*))?$/g.exec(o.super_go_current),a=i[1],l=i[3]||"{}",r=JSON.parse(i[3]||"{}");if(n=e===a,e===a&&t&&"object"===f()(t))for(var c in angular.extend(JSON.parse(l),t))if(r[c]!=t[c]){n=!1;break}}return n},o.super_go=function(e,t,i,r){for(var c in t)t.hasOwnProperty(c)&&t[c]instanceof Object&&(t[c]=j()(t[c]));if(null==i?void 0:i.is_vue){var d="";if(n.get(e))d=n.href(e,t,i);else{var u=new ke.a;for(var c in t)u.set(c,t[c]);d="#/"+e+"?"+u.toString()}var _,p=location.pathname,f="";if(s()(p).call(p,"service")>=0)f=window.hcm_wengen+"/v"+location.search+"/"+d;else f=location.pathname+(be()(_=location.pathname).call(_,"/")?"v":"/v")+location.search+"/"+d;return console.log("vue_open:"+f),void window.open(f,"_self")}if(o.super_go_current=e+":"+(t?j()(t):""),"pc"===window.client){var h=n.get(e);if(!h)return void console.log("cannot resolve state:"+e);h.sideBar?s()(g=["auto_login","login","com_select","set_password","app_input_pwd","app_set_pwd"]).call(g,n.current.name)>=0?n.go("index",{next:j()({state:e,param:t,option:i})},i):a.$broadcast("side-bar-go",{state:e,param:t,option:i}):l((function(){if(o.shift_press||r&&!m){var a=location.pathname;a+=-1==s()(a).call(a,"?")?window.hcm_env_pre:window.hcm_env_post,window.open(a+n.href(e,t,i),"_blank")}else n.go(e,t,i)}))}else window.isApp3&&"mobilepunchin"===e?window.WebViewJavascriptBridge.callHandler("mobilepunchin",t,(function(e){})):("replace"===(null==i?void 0:i.location)||(document.body.className=i&&"animator"in i?i.animator:"slide-left"),l((function(){n.go(e,t,i)})));var g},o.super_back=function(){var e;if(a.bottom_menu=[],a.history.length<1)a.close_circle_side_bar();else{var t=a.history.length-1;a.circle_side_bar_animator="slide-right",$.extend(n.params,a.history[t].params),a.curr_template=a.history[t].template,b()(e=a.history).call(e,t,1),l((function(){a.circle_side_bar_animator=""}),600)}},o.preview_document=function(e){u.preViewDocument(e)},o.img_preview=function(e,t,n){u.viewImg(e,t,n)},o.notify_page_loaded=function(e){t.pageLoaded(e)},o.set_title=function(e){var t=$("body");document.title=e;var n=$("<iframe src='/static/resources/images/hcmcloud.ico'></iframe>");n.on("load",(function(){we()((function(){n.off("load").remove()}),0)})).appendTo(t)},o.$on("article-new-process",(function(e,t){a.$broadcast("article-new-event",t)})),o.$on("file_del_process",(function(e,t){a.$broadcast("file_del_event",t)})),o.$on("dialog_close_process",(function(e,t){a.$broadcast("dialog_close_event",t)})),o.$on("save_evalfile_process",(function(e,t){a.$broadcast("save_evalfile_event",t)})),o.$on("article-comment",(function(e,t){a.$broadcast("article-comment",t)}))}]);n("GKVU");var $e=n("LYCE"),Oe=n.n($e),De=n("HnXd"),Ce=n.n(De),Me=n("qjzJ"),Se=n.n(Me),Ee=n("5PDf"),Pe=n.n(Ee),je=n("OWCx"),Te=n.n(je),Ae=n("04Ix"),Ie=n.n(Ae),Le=n("/FZm"),Fe=n.n(Le),Re=n("TEMH"),Be=n.n(Re),Ue=function(){function e(e,t,n){var i,o,a=this;this.calcSubDropdownListStyles=function(e,t){var n;if(!e||!(null===(n=t.list)||void 0===n?void 0:n.length))return!1;var i,o,l="LI"===e.target.tagName?angular.element(e.target):angular.element(e.target).parents("li"),r=l.offset(),c=Math.min(44*t.list.length+4,360),s=r.left+l[0].offsetWidth;return s+210>document.body.clientWidth||"right"===a.scope.$dialog.options.calculateDirection?(i=(s=document.body.clientWidth-r.left)+1,o="auto"):(o=s,i="auto"),{top:r.top-11+c<=document.body.clientHeight?r.top-11:document.body.clientHeight-c-11,right:i,maxHeight:360,left:o,transform:"unset",position:"fixed"}},this.dealMouseOver=function(e,t){var n=angular.element(e.currentTarget);n.siblings("li.hover").removeClass("hover"),a.hoverKey&&a.hoverKey===t.key||a.$filter("valueToFunc")(t.disabled)()||(n.addClass("hover"),a.$hcDialog.closeTarget(["subDropdown_1","subDropdown_2","subDropdown_3","subDropdown_4"]),t.list&&a.$hcDialog.subDropdownList(t.list,{styles:a.calcSubDropdownListStyles(e,t),itemStyles:{minWidth:"200px"},sub_index:1}).then((function(t){console.log(t),a.resolveItem(t,e)})))},this.scope=e,this.$filter=t,this.$hcDialog=n,this.scope.$dialog.setClose((function(){a.$hcDialog.closeTarget(["subDropdown_1","subDropdown_2","subDropdown_3","subDropdown_4"]),a.scope.$dialog.dialog_close()})),null===(o=null===(i=this.scope.params)||void 0===i?void 0:i.list)||void 0===o||g()(o).call(o,(function(e){e.children&&e.children.length>0&&(a.isMulti=!0)}))}return e.prototype.resolveItem=function(e,t){var n;(null===(n=e.list)||void 0===n?void 0:n.length)||this.$filter("valueToFunc")(e.disabled)()||(t.stopPropagation(),this.$hcDialog.closeTarget("subDropdown"),this.scope.$dialog.resolve_data(e),this.scope.$dialog.dialog_close())},e.$inject=["$scope","$filter","$hcDialog"],e}(),qe=n("m+YK"),We=n.n(qe),ze=(n("S2hZ"),n("9VVP"),{name:"dropdown",controller:Ue,template:We.a,class:"no-fade",mask:!1,maskClose:!0}),Ne=n("/PXk"),Ke=n("z/LF"),He=n.n(Ke),Ve=(n("ISMB"),{controller:Ne.a,template:He.a}),Ye=function(){function e(e,t,n){var i=this;this.scope=e,this.$filter=t,this.$hcDialog=n,this.client=window.client,this.scope.$watch("$dialog.options.params",(function(t){var n,a;t&&"{}"!==j()(t)&&(t.progress.value<100?i.scope.$dialog.title((null===(n=e.$dialog.options)||void 0===n?void 0:n.processingTitle)||"计算中"):(i.scope.$dialog.title((null===(a=e.$dialog.options)||void 0===a?void 0:a.completeTitle)||"计算完成"),e.$dialog.options.autoClose&&o(e.$dialog.options.closeWaiting)),"mobile"===i.client?i.setPercent(null==t?void 0:t.progress.value):i.scope.$dialog.title(""))}));var o=function(t){void 0===t&&(t=1e3),we()((function(){e.$dialog.dialog_close()}),t)}}return e.prototype.setPercent=function(e){var t=document.getElementsByClassName("progress-text")[0],n=document.getElementsByClassName("progress")[0];e>100||(n&&(n.style["stroke-dashoffset"]=377-3.77*e),t&&(t.innerHTML=e))},e.$inject=["$scope","$filter","$hcDialog"],e}(),Ge=n("iJ79"),Je=n.n(Ge),Xe=(n("n7LK"),{name:"hc-dialog-progress",controller:Ye,template:Je.a,class:"no-fade",mask:!1,maskClose:!1}),Qe=n("xnFK"),Ze=n.n(Qe),et=(n("iBFw"),function(){function e(e,t){var n=this;this.scope=e,this.$timeout=t,this.init(this.scope.params.content,this.scope.params.type,this.scope.params.duration,this.scope.params.mask),this.$timeout((function(){return n.close()}),this.scope.duration)}return e.prototype.init=function(e,t,n,i){switch(this.scope.content=e,this.scope.type=t,this.scope.duration=void 0===n?2e3:n,this.scope.mask=i,t){case"warning":this.scope.icon_name="icon-hcm-info";break;case"error":this.scope.icon_name="icon-hcm-delete-circle";break;case"success":this.scope.icon_name="icon-hcm-tick-circle";break;default:this.scope.icon_name=""}},e.prototype.close=function(){this.scope.$dialog.resolve_data(),this.scope.$dialog.dialog_close()},e.$inject=["$scope","$timeout"],e}()),tt={template:Ze.a,controller:et},nt=n("lyrW"),it=n.n(nt),ot=(n("/hw/"),function(){function e(e,t,n){var i=this;this.calcSubDropdownListStyles=function(e,t){var n;if(!e||!(null===(n=t.list)||void 0===n?void 0:n.length))return!1;var o,a,l="LI"===e.target.tagName?angular.element(e.target):angular.element(e.target).parents("li"),r=l.offset(),c=Math.min(44*t.list.length+4,360),s=r.left+l[0].offsetWidth;return s+210>document.body.clientWidth||"right"===i.model.options.calculateDirection?(o=(s=document.body.clientWidth-r.left)+1,a="auto"):(a=s,o="auto"),{top:r.top-11+c<=document.body.clientHeight?r.top-11:document.body.clientHeight-c-11,right:o,maxHeight:360,left:a,transform:"unset",position:"fixed"}},this.dealMouseOver=function(e,t){var n=angular.element(e.currentTarget);n.siblings("li.hover").removeClass("hover"),i.hoverKey&&i.hoverKey===t.key||(n.addClass("hover"),i.hoverKey=t.key,i.$hcDialog.closeTarget("subDropdown_"+(i.scope.params.sub_index+1)),t.list&&i.$hcDialog.subDropdownList(t.list,{styles:i.calcSubDropdownListStyles(e,t),itemStyles:{minWidth:"200px"},sub_index:i.scope.params.sub_index+1}).then((function(t){i.resolveItem(t,e)})))},this.scope=e,this.$filter=t,this.$hcDialog=n}return e.prototype.$onInit=function(){var e;this.scope.params=null===(e=this.model.options)||void 0===e?void 0:e.params},e.prototype.resolveItem=function(e,t){var n;(null===(n=e.list)||void 0===n?void 0:n.length)||this.$filter("valueToFunc")(e.disabled)()||(t.stopPropagation(),this.model.resolve_data(e),this.model.dialog_close())},e.$inject=["$scope","$filter","$hcDialog"],e}());function at(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=at(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=at(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}function rt(e,t,i,o,a,l,c,d,u,_,p,m,f,h,v){var y=[],x=[],k=0,O=0,D=0,C=0;window.addEventListener("popstate",(function(e){if(x.length){e.preventDefault();var t=x.pop();if(t.browserHistory){c.$broadcast("datetime-picker-hide"),t.browserHistory=!1;for(var n=Be()(y).call(y,(function(e){return e.options.element===t.options.element})),i=y.length-1;i>=n;i--)y[i].dialog_close(!0)}}}));var M,S=function(t,n){var o=i.defer(),a=c.$new();a.$dialog=t,a.params=n||t.options.params||{};var r={};return t.options.templateProvider?r.$template=t.options.templateProvider().then((function(e){return e})):r.$template=i.when(t.options.template),i.all(r).then((function(n){var i,r,s,u,_,p,m,f,g;if(t.options.float?(t.options.dialog_style=angular.extend({},t.options.dialog_style,{height:t.options.height?t.options.height+"px":"80%",width:t.options.width?t.options.width+"px":"30%",left:"auto",top:"auto",bottom:"20px",right:"20px","box-shadow":"rgba(0, 0, 0, 0.05) 0px 9px 28px 8px, rgba(0, 0, 0, 0.08) 0px 6px 16px 0px, rgba(0, 0, 0, 0.12) 0px 3px 6px -4px","border-radius":"8px",overflow:"hidden"}),t.options.mask_style=angular.extend({},t.options.dialog_style,{display:"none"}),t.options.styles=angular.extend({},t.options.styles,{height:"100%",width:"100%","margin-left":0,left:0,top:0,"max-height":"100%"})):(t.options.height&&(t.options.styles=angular.extend({},t.options.styles,{height:t.options.height+"px"})),t.options.width&&(t.options.styles=angular.extend({},t.options.styles,{width:t.options.width+"px","margin-left":"-"+t.options.width/2+"px"}))),t.options.anchor){var w;t.is_anchor=!0;var k=t.options.anchor.offset().left,O=window.innerWidth-t.options.anchor.offset().left-t.options.anchor[0].clientWidth,D=t.options.anchor.offset().top+t.options.anchor.outerHeight()-((null===(w=angular.element("hc-dialog").last().offset())||void 0===w?void 0:w.top)||0),C="pc"===window.client?{"margin-left":"auto"}:{"margin-left":"0"};if("right"===t.options.calculateDirection?t.options.width&&O+t.options.width>window.innerWidth?(C.left=0,C.right="auto"):(C.left="auto",C.right=O):t.options.width&&k+t.options.width>window.innerWidth?(C.right=0,C.left="auto"):C.left=k,"up"===t.options.direction){var M=window.innerHeight-t.options.anchor.offset().top;C.bottom=M,C.top="auto"}else(t.options.height||t.options.minHeight)&&"anchor"===t.options.overflow&&D+(t.options.height||t.options.minHeight)>window.innerHeight?(C.bottom=window.innerHeight-D+t.options.anchor.outerHeight(),C.top="auto"):t.options.height&&D+t.options.height>window.innerHeight?(C.bottom=0,C.top="auto"):C.top=D;t.options.styles=angular.extend({},t.options.styles,C)}var S="";if("mobile"===window.client){var E,j=null==t||null===(E=t.options)||void 0===E?void 0:E.slide_in_config;S="dialog"+((null==j?void 0:j.from)?"-"+j.from:"")+"-in"+((null==j?void 0:j.fade)?"-fade":"")}var T=ie()(i=ie()(r=ie()(s=ie()(u=ie()(_=ie()(p="\n            <".concat(t.options.component||"hc-dialog",'\n                model="$dialog"\n                name="')).call(p,t.options.name,'"\n                class="hc-dialog ')).call(_,t.options.size||"normal"," ")).call(u,S," ")).call(s,t.options.class||""," ")).call(r,t.options.float?"float":""," ")).call(i,t.options.narrow?"narrow":"",' "\n                ng-style="$dialog.options.dialog_style"\n                ng-show="$dialog.isActive">');T=$(T).html(n.$template),t.options.element=T,a.$dialog.mask_click=function(){t.options.maskClose&&(a.close?a.close():a.$dialog.close?a.$dialog.close():a.$dialog.dialog_close())};var A,I;(a.$dialog.check_close=function(){a.sub_model&&function(){if(a.sub_model){var t=!1,n=a.sub_model.model_list;for(var i in n)if(n.hasOwnProperty(i)&&n[i].is_data_changed){t=!0,P.confirm(n[i].name+"数据已更改，是否确认关闭？").then((function(){e((function(){a.$dialog.dialog_close()}),320)}));break}return t}}()||a.$dialog.dialog_close()},a.$dialog.dialog_close=function(n){var i,l,r,s,d;(t.isActive=!1,t.browserHistory&&(history.go(-1),t.browserHistory=!1),t.isReset)&&(null===(s=t.options)||void 0===s||null===(d=s.element)||void 0===d||d.removeClass("reset"));(null===(i=t.options)||void 0===i?void 0:i.resolveOnClose)&&0===(null===(l=o.promise)||void 0===l||null===(r=l.$$state)||void 0===r?void 0:r.status)&&a.$dialog.resolve_data();for(var u=y.length;u--;u>=0)y[u].options.element===F&&b()(y).call(y,u,1);n?(F.remove(),a.$destroy(),0===document.getElementsByClassName("hc-dialog-mask").length&&$(document.body).removeClass("hc-dialog-show")):e((function(){F.remove(),a.$destroy(),0===document.getElementsByClassName("hc-dialog-mask").length&&$(document.body).removeClass("hc-dialog-show")}),320),e((function(){c.$broadcast("dialog_close",{current:t,stack:y})}),320)},a.$dialog.resolve_data=function(e){o.resolve(e)},a.$dialog.reject_data=function(e){o.reject(e)},a.$dialog.notify_data=function(e){o.notify(e)},a.$dialog.reset_dialog=function(e){var i=Be()(y).call(y,(function(e){return e.options.element==F})),o=$("".concat(t.options.component||"hc-dialog")).eq(i);if(o.addClass("reset"),Fe()(o).call(o,".hc-dialog-window").children().remove(),t.isReset=!0,a.$destroy(),(a=c.$new()).$dialog=t,a.params=e||t.params||{},o.html(n.$template),t.options.controller){var r=d(t.options.controller,{$scope:a},!0)();a.$ctrl=r,o.data("$ngControllerController",r)}a.$dialog.scope=a,l(T)(a)},a.$dialog.set_full=ae()(m=["normal","large"]).call(m,a.$dialog.options.size)||!a.$dialog.options.size,a.$dialog.set_full_status=function(){var e;a.$dialog.full_status=!a.$dialog.full_status;var n=Be()(y).call(y,(function(e){return e.options.element==F})),i=$("".concat(t.options.component||"hc-dialog")).eq(n),o=Fe()(e=$(document.body)).call(e,".hc-dialog-window").eq(n),l=a.$dialog.options.size||"normal";a.$dialog.full_status?(i.removeClass(l).addClass("full"),o.css("transform","none")):i.removeClass("full").addClass(l),c.$broadcast("dialog-size-change")},"mobile"===window.client&&(null===(f=v.getContext("auth"))||void 0===f||null===(g=f.company_setting)||void 0===g?void 0:g.history_back_dialog)||"pc"===window.client&&"full"===a.$dialog.options.size)&&(ae()(A=["hc-dialog-notify","hc-dialog-btn-actions"]).call(A,null===(I=t.options)||void 0===I?void 0:I.component)||(t.browserHistory=!0,e((function(){history.pushState(null,null,h.absUrl()),t.browserHistory&&x.push(t)}),321)));if(t.options.controller){var L=d(t.options.controller,{$scope:a},!0)();a.$ctrl=L,T.data("$ngControllerController",L)}a.$dialog.scope=a;var F=l(T)(a),R=$(document.body);R.addClass("hc-dialog-show"),R.append(F),t.isActive=!0,y.push(t),c.$broadcast("dialog_open",{current:t,stack:y})})),o.promise};M="pc"!==window.client;var P={getDialog:function(e){return{options:e=angular.extend({mask:!0,maskClose:M,slide_in_config:"mobile"===window.client?{from:"bottom",fade:!0}:{},operates:[]},e),title:function(e){return this.options.title=e,this},tip:function(e){return this.options.tip=e,this},name:function(e){return this.options.name=e,this},operates:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.options.operates=e,this.list_btn_model=m.getListBtnModel(e,t,n),this},slideInConfig:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.options.slide_in_config={from:e,fade:t},this},size:function(e){return this.options.size=e,this},anchor:function(e){return this.options.anchor=e,this},reSize:function(e){return this.options.element&&(this.options.element.removeClass(this.options.size||"normal"),this.options.element.addClass(e)),this},addClass:function(e){return this.options.element&&this.options.element.addClass(e),this},styles:function(e){return this.options.styles=e,this},params:function(e){return this.options.params=e,this},show:function(e){return S(this,e)},setClose:function(e){return this.close=e,this},showTip:function(e,t){P.confirm(e,null,t)},resetDialog:function(e){var t;return null===(t=this.reset_dialog)||void 0===t||t.call(this,e),this},startDrag:function(t,n){var i;if("hc-dialog-drawer"!==(null==n||null===(i=n.options)||void 0===i?void 0:i.component)&&("header"===t.target.tagName.toLowerCase()||t.target.classList.contains("main"))){var o=document.querySelectorAll(e.float?"hc-dialog":".hc-dialog-window"),a=o[o.length-1],l=t.clientX,r=t.clientY,c=a.offsetWidth,s=a.offsetHeight;if(c!=window.innerWidth||s!=window.innerHeight){var d=window.getComputedStyle(a).getPropertyValue("transform").match(/matrix\((.+)\)/);if(d){var u=d[1].split(", ");k=E()(u[4]),O=E()(u[5])}else k=0,O=0;var _=function(e){var t;D=c+(window.innerWidth-c)/2-40,C=s+(window.innerHeight-s)/2-40;var n=e.clientX-l,i=e.clientY-r,o=k+n,d=O+i;o>D?o=D:o<-D&&(o=-D),-d>(window.innerHeight-s)/2?d=-(window.innerHeight-s)/2:d>C&&(d=C),a.style.transform=ie()(t="translate(".concat(o,"px, ")).call(t,d,"px)")};document.addEventListener("mousemove",_),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",e)}))}}}}},getMessageDialog:function(e){var t=angular.extend({component:"hc-dialog-message"},e);return this.getDialog(t)},showState:function(e,n,o){var a=t.get(e),l=this;if(a.resolve&&a.resolve.moduleLoader){var r=i.defer();return a.resolve.moduleLoader[1](_).then((function(){return c(a,n,o).then((function(){r.resolve.apply(this,arguments)}))})),r.promise}return c(a,n,o);function c(e,t,n){var i=l.getDialog({controller:e.controller,template:e.template,templateProvider:e.templateProvider,size:n&&n.size||"large",name:n&&n.name});return i.operates([{label:"返回",cancel:!0,func:function(){i.dialog_close()}}]).show(t)}},notify:function(e,t,n,i){var o={component:"hc-dialog-notify",controller:["$scope","$timeout",function(e,t){var n,i,o,a,l,r=null===(n=v.getContext("auth"))||void 0===n||null===(i=n.company_setting)||void 0===i?void 0:i.global_notify_delay,c=null===(o=v.getContext("auth"))||void 0===o||null===(a=o.company_setting)||void 0===a?void 0:a.global_notify_expand;e.init=function(n,i,o){switch(e.content=n,o){case"warning":e.icon_name="icon-hcm-info-warning",i=void 0===i?6e3:i;break;case"error":e.icon_name="icon-hcm-info-error",i=void 0===i?6e3:i;break;case"success":e.icon_name="icon-hcm-info-succeed",i=void 0===i?2e3:i;break;default:e.icon_name="icon-hcm-info-normal",i=void 0===i?3500:i}0!==i&&(l&&t.cancel(l),l=t((function(){e.close()}),i)),c&&$(document.body).addClass("notify-expand")},e.close=function(){e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.init(e.params.content,r||e.params.seconds,e.params.level)}]},a=this.getDialog(o);return a.set_content=function(e,n){n=void 0===n?2e3:n,a.scope.init(e,n,t)},a.show({content:e,level:t||"info",seconds:n}).then((function(){i&&i()})),a},toast:function(e,t,n,i,o){return P.getDialog(lt(lt({},tt),{},{mask:i})).name("hcDialogToast").slideInConfig().show({content:e,type:t||"",duration:n}).then((function(){o&&o()}))},confirm:function(e,t,n,i,o,a){t=t||[{caption:f("translate")("confirm")}];var l={name:o,component:"hc-dialog-confirm",controller:["$scope",function(e){e.select=function(t){t.func&&t.func(t),e.$dialog.resolve_data(t),e.$dialog.dialog_close()},e.cancel=function(){a&&e.$dialog.reject_data(),e.$dialog.dialog_close()}}]};return P.getDialog(l).show({content:e,options:t,style:n,hideCannel:i})},prompt:function(e,t,n){var i={component:"hc-dialog-prompt",controller:["$scope",function(e){var t,n,i,o;if(e.close=function(){e.$dialog.dialog_close()},e.confirm=function(){e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.$dialog.addClass((null===(t=e.params)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.theme)||"dark-theme"),null===(i=e.params)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.operates){var a,l,r,c,s=null===(a=e.params)||void 0===a||null===(l=a.options)||void 0===l?void 0:l.operates;w()(s).call(s,(function(t){"close"===t.key&&(t.func=e.close),"confirm"===t.key&&(t.func=e.confirm)})),e.$dialog.operates(null===(r=e.params)||void 0===r||null===(c=r.options)||void 0===c?void 0:c.operates)}}]},o=new RegExp("\r\n|\n","g");return e=e.replace(o,"<br>"),P.getDialog(i).show({content:e,options:t,style:n})},timeLine:function(e,t,n,i){var o={component:"hc-dialog-time-line",controller:["$scope",function(e){var t,n,i,o,a,l;if(e.close=function(){e.$dialog.dialog_close()},e.$dialog.addClass((null===(t=e.params)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.theme)||"dark-theme"),null===(i=e.params)||void 0===i||null===(o=i.options)||void 0===o?void 0:o.operates){var r,c,s,d,u=null===(r=e.params)||void 0===r||null===(c=r.options)||void 0===c?void 0:c.operates;w()(u).call(u,(function(t){return"close"===t.key&&(t.func=e.close)})),e.$dialog.operates(null===(s=e.params)||void 0===s||null===(d=s.options)||void 0===d?void 0:d.operates)}(null===(a=e.params)||void 0===a?void 0:a.select_item)&&w()(l=e.params.list).call(l,(function(t){(null==t?void 0:t.id)===e.params.select_item.id&&(t.get_score=!0)}))}]};return P.getDialog(o).show({list:e,select_item:t,options:n,style:i})},tour:function(e,t){return P.getDialog({component:"hc-dialog-tour"}).show({tour_steps:e,options:t})},simpleInput:function(e,t,i,o){var a={template:n("9SWU"),controller:["$scope","$hcDialog",function(t,n){t.submit=function(){var e,i;if(o||null!==t.params.text&&""!==t.params.text){var a=(null===(e=v.getContext("auth"))||void 0===e||null===(i=e.company_setting)||void 0===i?void 0:i.xss_protect)?f("securityFilter")(t.params.text):t.params.text;t.$dialog.resolve_data(a),t.$dialog.dialog_close()}else n.notify(t.params.title,"warning")},t.close=function(){t.$dialog.dialog_close()},t.$dialog.operates([{label:"取消",func:t.close},{label:"确认",func:t.submit,default:!0}]).title(e)}]};return P.getDialog(a).params({text:i,caption:t,title:e}).size("small").show()},simpleForm:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getDialog(Ve).size(i.size||"small").params({meta:t,data:n,options:i}).title(e).show()},simpleList:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getDialog(Ve).size(i.size||"small").params({meta:t,data:n,submit:null==i?void 0:i.submit}).title(e).show()},simpleActions:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n&&(i=lt({mask:"pc"!==window.client,width:180,maskClose:!0,calculateDirection:"right"},i)),this.getDialog(lt(lt({},i),{},{component:"hc-dialog-actions",anchor:n})).params({actions:e,actionParser:t}).show()},btnActions:function(e,t){return this.getDialog(lt(lt({},t),{},{component:"hc-dialog-btn-actions"})).params({model:e}).show()},drawer:function(e,t){return this.getDialog(lt(lt({},e),{},{component:"hc-dialog-drawer",squeezed:t}))},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getDialog(lt(lt({},Xe),{},{processingTitle:e.processingTitle,completeTitle:e.completeTitle},e.dialogOptions||{})).size("pc"===window.client?"small":"bottom-dialog-40").slideInConfig("mobile"===window.client?"bottom":null)},dropdownList:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getDialog(lt(lt({},ze),{},{calculateDirection:i.align,direction:null==i?void 0:i.direction},i.dialogOptions||{})).styles(lt({},i.styles||{})).anchor(n).show({list:e,current:t,itemStyles:i.itemStyles})},subDropdownList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getDialog(lt(lt({},t),{},{name:"subDropdown_".concat(t.sub_index),component:"hc-dialog-sub-dropdown"})).styles(lt({},t.styles||{})).params({list:e,itemStyles:t.itemStyles,sub_index:t.sub_index}).show()},closeAll:function(){var e=["hc-dialog-notify"];g()(angular).call(angular,r()(y).call(y,0),(function(t){var n;t.browserHistory&&(t.browserHistory=!1),t.options&&(t.options.resolveOnClose=!1),!~s()(e).call(e,null===(n=t.options)||void 0===n?void 0:n.component)&&t.dialog_close()}))},closeTarget:function(e){g()(angular).call(angular,r()(y).call(y,0),(function(t){t.options.name&&~s()(e).call(e,t.options.name)&&t.dialog_close()}))}};return P}window.app.component("hcDialogSubDropdown",{bindings:{model:"<"},transclude:!0,controller:ot,template:it.a}),O.a.factory("$hcDialog",rt),rt.$inject=["$timeout","$state","$q","$http","$templateCache","$compile","$rootScope","$controller","$animate","$ocLazyLoad","$hcListBtn","HcDialogService","$filter","$location","contextService"];var ct=n("guyh"),st=n.n(ct),dt=n("UF4K"),ut=n.n(dt),_t=new ut.a([[!0,-1],[null,0],[void 0,0],[!1,0]]),pt=function(){function e(e){this.$hcListBtn=e}return e.prototype.parsePcOperates=function(e){var t,n;return e=st()(t=w()(n=Pe()(e).call(e,(function(e){return e}))).call(n,(function(e){return e.is_important=e.default,e}))).call(t,(function(e,t){return _t.get(e.left)-_t.get(t.left)}))},e.prototype.getListBtnModel=function(e,t,n){void 0===n&&(n={});var i=this.$hcListBtn.createListBtn().$setOptions(n);return"pc"===window.client?(n.max||i.$setShowMax(8),e=this.parsePcOperates(e||[])):n.mobile_outer_btn_count&&i.$setOuterBtnCount(n.mobile_outer_btn_count),i.$setMeta(e).$setActionParser(t),i},e.$inject=["$hcListBtn"],e}();O.a.service("HcDialogService",pt);var mt={duration:2e3,mask:!0},ft=function(){function e(e){this.toast=e.toast}return e.prototype.notification=function(e,t,n,i,o){return void 0===n&&(n=mt.duration),void 0===i&&(i=mt.mask),this.toast(e,t,n,i,o)},e.prototype.config=function(e){var t=e.duration,n=void 0===t?2e3:t,i=e.mask;mt.duration=n,!1===i&&(mt.mask=!1)},e.prototype.info=function(e,t,n,i){return void 0===t&&(t=mt.duration),void 0===n&&(n=mt.mask),this.notification(e,"info",t,n,i)},e.prototype.success=function(e,t,n,i){return void 0===t&&(t=mt.duration),void 0===n&&(n=mt.mask),this.notification(e,"success",t,n,i)},e.prototype.warning=function(e,t,n,i){return void 0===t&&(t=mt.duration),void 0===n&&(n=mt.mask),this.notification(e,"warning",t,n,i)},e.prototype.error=function(e,t,n,i){return void 0===t&&(t=mt.duration),void 0===n&&(n=mt.mask),this.notification(e,"error",t,n,i)},e.$inject=["$hcDialog"],e}();O.a.service("toastService",ft);var ht=n("JlzZ"),gt=n.n(ht),vt=n("E687"),bt=n.n(vt);O.a.component("hcDialog",{bindings:{model:"<"},transclude:!0,template:"mobile"===window.client?bt.a:gt.a,controller:["$scope","$rootScope","$timeout","HcDialogService","$element",function(e,t,n,i,o){var a=this;this.$onInit=function(){if("mobile"===t.client&&$(document).on("focusout",(function(){n((function(){return window.scrollBy(0,1)}),200)})),e.$watch("$ctrl.model.options.operates",(function(e,t){var n;a.model.list_btn_model?null===(n=a.model.list_btn_model)||void 0===n||n.$setMeta(i.parsePcOperates(a.model.options.operates)):a.model.list_btn_model=i.getListBtnModel(a.model.options.operates)}),!0),/Android/gi.test(navigator.userAgent)||navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)){var l=document.getElementsByClassName("container")[0].getBoundingClientRect().height;window.addEventListener("resize",(function(){if("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName){var e=document.getElementsByClassName("container")[0].getBoundingClientRect().height;if(/kkPlus/gi.test(navigator.userAgent)&&!/Android/gi.test(navigator.userAgent)){var t=l;l=e,e=t}if(console.log("bodyHeight1",l),console.log("bodyHeight2",e),console.log(a.model.options.size),/bottom-dialog/.test(a.model.options.size)){var n,i=r()(n=a.model.options.size).call(n,-2,-1);console.log(i);var c=Math.max(Math.min(1-E()("0."+i)*l/e,.9),0);console.log(c),console.log(Fe()(o).call(o,".hc-dialog-window")[0].getAttribute("style")),Fe()(o).call(o,".hc-dialog-window")[0].getAttribute("style")?Fe()(o).call(o,".hc-dialog-window")[0].removeAttribute("style"):Fe()(o).call(o,".hc-dialog-window")[0].setAttribute("style","top: "+100*c+"%")}}}))}}}]});var yt=n("crmf"),wt=n.n(yt);O.a.component("hcDialogNotify",{bindings:{model:"<"},transclude:!0,template:wt.a});var xt=n("W78N"),kt=n.n(xt),$t=n("OsCo"),Ot=n.n($t);O.a.component("hcDialogConfirm",{bindings:{model:"<"},transclude:!0,template:"mobile"===window.client?Ot.a:kt.a});var Dt=n("sjnf"),Ct=n.n(Dt);n("hUeO");O.a.component("hcDialogPrompt",{bindings:{model:"<"},transclude:!0,template:Ct.a});var Mt=n("LCjq"),St=n.n(Mt);n("JA6/");O.a.component("hcDialogTimeLine",{bindings:{model:"<"},transclude:!0,template:St.a});n("AehR");var Et=function(){function e(e,t,n){var i;this.$element=e,this.$scope=t,this.$compile=n,this.onResizeMove=a()(i=this.onResizeMove).call(i,this)}return e.prototype.$onInit=function(){var e=this;this.proxyDialogClose(),this.squeezed=this.model.options.squeezed||this.model.options.squeezed_class&&angular.element(this.model.options.squeezed_class),this.squeezed?(this.addListener(),this.changeAndObserveWidth()):this.$element.addClass("no-squeezed"),we()((function(){e.initResizer()}))},e.prototype.initResizer=function(){var e,t,n=this.squeezed?this.squeezed.width()+Fe()(e=this.$element).call(e," > .hc-dialog-window").width():window.innerWidth;if(!1!==(null===(t=this.model.options)||void 0===t?void 0:t.resize)){var i,o='<hc-resizer side="right"  resize-max="'+n+'" move-callback="$ctrl.onResizeMove"></hc-resizer>',a=this.$compile(o)(this.$scope);Fe()(i=this.$element).call(i,"> .hc-dialog-window").append(a)}},e.prototype.onResizeMove=function(e,t,n){if(this.squeezed){var i=this.originalWidth-n;this.squeezed.width(i)}},e.prototype.proxyDialogClose=function(){var e=this;this.model.dialog_close=new Proxy(this.model.dialog_close,{apply:function(t,n,i){t(),e.model.reject_data({})}})},e.prototype.addListener=function(){var e=this;this.listener=function(t){e.model.maskClose&&t.stopPropagation()},this.squeezed[0].addEventListener("click",this.listener,!0),this.removeListener=function(){e.squeezed[0].removeEventListener("click",e.listener,!0)}},e.prototype.removeListener=function(){},e.prototype.changeAndObserveWidth=function(){var e,t,n=this;this.originalWidth=(null===(e=this.model.preInstance)||void 0===e?void 0:e.originalWidth)||this.squeezed.width(),this.squeezed.width(this.originalWidth-((null===(t=this.model.options)||void 0===t?void 0:t.squeezedWidth)||384)),this.observer=new MutationObserver((function(e){n.squeezed.width(n.originalWidth)})),this.observer.observe(this.$element[0],{attributeFilter:["class"]})},e.prototype.$onDestroy=function(){var e;this.model.isReset&&(this.model.preInstance=this),this.removeListener(),null===(e=this.observer)||void 0===e||e.disconnect()},e.$inject=["$element","$scope","$compile"],e}();O.a.component("hcDialogDrawer",{bindings:{model:"<"},transclude:!0,controller:Et,template:gt.a});var Pt=n("mrSG"),jt=function(){function e(e,t){this.$scope=e,this.$filter=t}return e.prototype.$onInit=function(){var e,t,n,i,o,a,l,r,c;return Object(Pt.c)(this,void 0,void 0,(function(){var s,d;return Object(Pt.e)(this,(function(u){return this.actions=null!==(n=null===(t=null===(e=this.model.options)||void 0===e?void 0:e.params)||void 0===t?void 0:t.actions)&&void 0!==n?n:[],this.actionParser=null===(o=null===(i=this.model.options)||void 0===i?void 0:i.params)||void 0===o?void 0:o.actionParser,this.dialog_type="pc"===window.client||(null===(a=this.model)||void 0===a?void 0:a.options.anchor)?"anchor":"bottom","anchor"===this.dialog_type?(this.calculateDirection=null===(l=this.model.options)||void 0===l?void 0:l.calculateDirection,this.model.options.styles=Object(Pt.a)(Object(Pt.a)({},this.model.options.styles),{"margin-left":"auto",top:this.model.options.styles.top+10}),s=(null===(c=null===(r=this.model)||void 0===r?void 0:r.options)||void 0===c?void 0:c.anchor.outerWidth())/2,d=s-14,"right"===this.calculateDirection?this.model.options.styles.right=Math.max(this.model.options.styles.right+d,8):this.model.options.styles.left=Math.max(this.model.options.styles.left+d,8)):this.model.options.styles=Object(Pt.a)(Object(Pt.a)({},this.model.options.styles),{bottom:0,width:"100%"}),[2]}))}))},e.prototype.actionClick=function(e){this.$filter("valueToFunc")(e.disabled)()||("function"==typeof e.func?e.func():this.actionParser&&this.actionParser(e),this.model.resolve_data(e),this.model.dialog_close())},e.$inject=["$scope","$filter"],e}(),Tt=n("Hi5c"),At=n.n(Tt);n("rrNA");O.a.component("hcDialogActions",{bindings:{model:"<"},controller:jt,template:At.a});var It=function(){function e(e,t){this.$scope=e,this.$filter=t}return e.prototype.$onInit=function(){var e,t,n;return Object(Pt.c)(this,void 0,void 0,(function(){var i=this;return Object(Pt.e)(this,(function(o){return this.btnModel=null!==(n=null===(t=null===(e=this.model.options)||void 0===e?void 0:e.params)||void 0===t?void 0:t.model)&&void 0!==n?n:{},this.select=function(e){i.model.resolve_data(["select",e]),i.model.dialog_close()},[2]}))}))},e.prototype.actionClick=function(e){this.model.resolve_data(["action",e]),this.model.dialog_close()},e.prototype.findSelectBtn=function(e){return Fe()(e).call(e,(function(e){return"select"===e.key}))},e.$inject=["$scope","$filter"],e}(),Lt=n("F5c5"),Ft=n.n(Lt);n("AFKH");O.a.component("hcDialogBtnActions",{bindings:{model:"<"},controller:It,template:Ft.a});var Rt=n("aEX6"),Bt=n.n(Rt);n("ZYdP");O.a.component("hcDialogMessage",{bindings:{model:"<"},transclude:!0,template:Bt.a,controller:["$scope","$rootScope","$timeout","HcDialogService","$element",function(e,t,n,i,o){var a=this;this.$onInit=function(){e.$watch("$ctrl.model.options.operates",(function(e,t){a.model.list_btn_model=i.getListBtnModel(a.model.options.operates)}),!0)}}]});var Ut=n("C/bn"),qt=n.n(Ut);n("T5v6");O.a.component("hcDialogTour",{bindings:{model:"<"},transclude:!0,template:qt.a,controller:["$scope","$rootScope","$timeout",function(e,t,n){var i=this;this.$onInit=function(){var t;e.FOCUS_ELEMENT_PADDING=8,e.ARROW_PADDING=16,e.ARROW_SIDE_MARGIN=8,e.ARROW_WIDTH=32,e.current_index=0,e.tour_steps=w()(t=i.model.scope.params.tour_steps).call(t,(function(e){var t;return(null===(t=e.element)||void 0===t?void 0:t.length)>0&&(e.element=e.element[0]),e})),e.step_length=e.tour_steps.length,e.current_step=e.tour_steps[e.current_index],n((function(){e.generateMask(e.tour_steps[e.current_index].element),e.setPopoverPosition(e.tour_steps[e.current_index])}))},e.generateMask=function(t){var n=function(e,t,n,i,o,a,l,r){e.setAttributeNS(null,"x",t),e.setAttributeNS(null,"y",n),e.setAttributeNS(null,"rx",i),e.setAttributeNS(null,"width",o),e.setAttributeNS(null,"height",a),e.setAttributeNS(null,"fill",l),e.setAttributeNS(null,"pointer-events",r)},i=function(){return document.createElementNS("http://www.w3.org/2000/svg","rect")};if(t){var o=document.getElementById("hc-dialog-tour-mask-svg"),a=document.getElementById("hc-dialog-tour-mask:focus"),l=t.getBoundingClientRect(),r=Math.max(l.left-e.FOCUS_ELEMENT_PADDING,0),c=Math.max(l.top-e.FOCUS_ELEMENT_PADDING,0),s=l.width+2*e.FOCUS_ELEMENT_PADDING,d=l.height+2*e.FOCUS_ELEMENT_PADDING,u=[r,c,4,s,d,"black","auto"],_=[0,0,0,"100%",c,"transparent","auto"],p=[r+s,0,0,"calc(100% - "+(r+s)+"px)","100%","transparent","auto"],m=[0,c+d,0,"100%","calc(100% - "+(c+d)+"px)","transparent","auto"],f=[0,0,0,r,"100%","transparent","auto"];if(a.children[1]){var h;n.apply(void 0,Object(Pt.h)([a.children[1]],u)),g()(h=[_,p,m,f]).call(h,(function(e,t){n.apply(void 0,Object(Pt.h)([o.children[t+2]],e))}))}else{var v,b=i();n.apply(void 0,Object(Pt.h)([b],u)),b.setAttribute("class","hc-dialog-tour-placeholder"),a.appendChild(b),g()(v=[_,p,m,f]).call(v,(function(e){var t=i();n.apply(void 0,Object(Pt.h)([t],e)),o.appendChild(t)}))}}else e.removeMask()},e.removeMask=function(){var e=document.getElementById("hc-dialog-tour-mask-svg"),t=document.getElementById("hc-dialog-tour-mask:focus");for(t.children[1]&&t.removeChild(t.children[1]);e.children[2];)e.removeChild(e.children[2])},e.getPopoverPosition=function(t){var n,i=t.element.getBoundingClientRect(),o=i.left-e.FOCUS_ELEMENT_PADDING,a=i.top-e.FOCUS_ELEMENT_PADDING,l=i.bottom+e.FOCUS_ELEMENT_PADDING,r=i.right+e.FOCUS_ELEMENT_PADDING,c=i.width+2*e.FOCUS_ELEMENT_PADDING,s=i.height+2*e.FOCUS_ELEMENT_PADDING,d=document.getElementsByClassName("hc-dialog-tour-popover")[0],u=d.getBoundingClientRect().height,_=d.getBoundingClientRect().width;switch(e.popover_position=null!==(n=t.popover.position)&&void 0!==n?n:window.innerHeight-l>u/2?"bottom":"top",e.popover_position){case"top":return{arrow:{top:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)",left:"calc(50% - "+e.ARROW_WIDTH/2+"px)"},popover:{top:a-u-e.ARROW_PADDING,left:o+c/2-_/2}};case"top-left":return{arrow:{top:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)",left:e.ARROW_SIDE_MARGIN+"px"},popover:{top:a-u-e.ARROW_PADDING,left:o}};case"top-right":return{arrow:{top:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)",left:"calc(100% - "+(e.ARROW_SIDE_MARGIN+e.ARROW_WIDTH)+"px)"},popover:{top:a-u-e.ARROW_PADDING,left:r-_}};case"bottom":return{arrow:{top:"-"+e.ARROW_PADDING/2+"px",left:"calc(50% - "+e.ARROW_WIDTH/2+"px)"},popover:{top:l+e.ARROW_PADDING,left:o+c/2-_/2}};case"bottom-left":return{arrow:{top:"-"+e.ARROW_PADDING/2+"px",left:e.ARROW_SIDE_MARGIN+"px"},popover:{top:l+e.ARROW_PADDING,left:o}};case"bottom-right":return{arrow:{top:"-"+e.ARROW_PADDING/2+"px",left:"calc(100% - "+(e.ARROW_SIDE_MARGIN+e.ARROW_WIDTH)+"px)"},popover:{top:l+e.ARROW_PADDING,left:r-_}};case"left":return{arrow:{top:"calc(50% - "+e.ARROW_WIDTH/2+"px)",left:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)"},popover:{top:a+s/2-u/2,left:o-_-e.ARROW_PADDING}};case"left-top":return{arrow:{top:e.ARROW_SIDE_MARGIN+"px",left:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)"},popover:{top:a,left:o-_-e.ARROW_PADDING}};case"left-bottom":return{arrow:{top:"calc(100% - "+(e.ARROW_SIDE_MARGIN+e.ARROW_WIDTH)+"px)",left:"calc(100% - "+e.ARROW_SIDE_MARGIN+"px)"},popover:{top:l-u,left:o-_-e.ARROW_PADDING}};case"right":return{arrow:{top:"calc(50% - "+e.ARROW_WIDTH/2+"px)",left:"-"+e.ARROW_PADDING/2+"px"},popover:{top:a+s/2-u/2,left:r+e.ARROW_PADDING}};case"right-top":return{arrow:{top:e.ARROW_SIDE_MARGIN+"px",left:"-"+e.ARROW_PADDING/2+"px"},popover:{top:a,left:r+e.ARROW_PADDING}};case"right-bottom":return{arrow:{top:"calc(100% - "+(e.ARROW_SIDE_MARGIN+e.ARROW_WIDTH)+"px)",left:"-"+e.ARROW_PADDING/2+"px"},popover:{top:l-u,left:r+e.ARROW_PADDING}}}},e.setPopoverPosition=function(t){var n=document.getElementsByClassName("hc-dialog-tour-arrow")[0],i=document.getElementsByClassName("hc-dialog-tour-popover")[0],o=i.getBoundingClientRect().height,a=i.getBoundingClientRect().width;if(t.element){var l=Math.max(e.getPopoverPosition(t).popover.top,0),r=Math.max(e.getPopoverPosition(t).popover.left,0);i.setAttribute("style","top: "+Math.min(l,window.innerHeight-o)+"px; \n                       left: "+Math.min(r,window.innerWidth-a)+"px"),n.setAttribute("style","top: "+e.getPopoverPosition(t).arrow.top+"; \n                       left: "+e.getPopoverPosition(t).arrow.left),n.setAttribute("class","hc-dialog-tour-arrow popover-"+e.popover_position.split("-")[0])}else i.setAttribute("style","top: 50%; left: 50%;"),n.setAttribute("class","hc-dialog-tour-arrow")},e.previousStep=function(){e.current_index--,e.current_index<0&&(e.current_index=0),e.current_step=e.tour_steps[e.current_index],e.generateMask(e.current_step.element),n((function(){e.setPopoverPosition(e.current_step)}))},e.nextStep=function(){e.current_index++,e.current_index>e.step_length-1&&(e.current_index=e.step_length-1),e.current_step=e.tour_steps[e.current_index],e.generateMask(e.current_step.element),n((function(){e.setPopoverPosition(e.current_step)}))},e.close=function(){i.model.scope.$dialog.dialog_close()}}]});var Wt=n("R6Lz"),zt=n.n(Wt),Nt=(n("f6lo"),function(){function e(e,t,n,i,o,a,l){var r=this;this.$scope=e,this.$rootScope=t,this.$hcDialog=n,this.commentService=i,this.$element=o,this.commonSelectorService=a,this.dataService=l,this.is_show_board=!0,this.is_show_interact=!0,this.showConnect=!0,this.showProcess=!1,this.art_list=[],this.client=window.client,this.isShowBoard=function(){r.is_show_board=!r.is_show_board,r.$scope.$emit("board-change")},this.changePage=function(e){"showConnect"===e&&(r.showConnect=!0,r.showProcess=!1),"showProcess"===e&&(r.showConnect=!1,r.showProcess=!0)},this.getConnect=function(e){return Object(Pt.c)(r,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("perf.assess.card.new.get.connect",{card_id:e})];case 1:return[2,t.sent()]}}))}))},this.openDialogList=function(e,t){r.commonSelectorService.categoryListSelectorDialog({selectorModel:"PerfItemDetailRelation",state:e,filter_dict:{item_detail_id:t,type:e},selectorType:1})},this.refresh=function(){r.getConnect(r.options.params.card_id).then((function(e){r.art_list=e}))},this.article_comment=function(e,t){var n=this;this.$scope.$emit("article-comment",{article:e,reply:t,callback:function(e){n.getConnect(n.options.params.card_id).then((function(e){n.art_list=e}))}})},this.delete_comment=function(e,t){null==t||t.stopPropagation();var n=this;this.$hcDialog.confirm("是否确认删除评论？",[{caption:"删除评论",func:function(){n.dataService.callHcmOpenApi("article.comment.delete",{comment_id:e},null,!0).then((function(e){n.getConnect(n.options.params.card_id).then((function(e){n.art_list=e})),n.$rootScope.show_warning("删除成功")}))}}])},this.comment_click=function(e,t){e.is_owner?this.delete_comment(e.id):this.article_comment(t,e.logger)}}return e.prototype.$onInit=function(){var e=this;console.log(this),this.is_show_board=this.options.params.is_show_board,this.is_show_interact=null==this.options.params.is_show_interact||this.options.params.is_show_interact,!1===this.options.params.is_show_interact&&this.changePage("showProcess"),this.showConnect&&this.getConnect(this.options.params.card_id).then((function(t){e.art_list=t})),this.$rootScope.$on("change_right",(function(t){console.log("change_right"),e.getConnect(e.options.params.card_id).then((function(t){e.art_list=t}))}))},e.$inject=["$scope","$rootScope","$hcDialog","commentService","$element","commonSelectorService","dataService"],e}());window.app.component("hcPerfBoard",{bindings:{model:"=ngModel",options:"<?"},controller:Nt,template:zt.a});var Kt=n("XyIB"),Ht=n.n(Kt),Vt=(n("dYar"),function(){function e(e,t,n,i,o){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.recChatLineService=o,this.client=window.client,this.getDialogData=function(){if(null!=this.options.params.card_id){var e=this.options.params.params;e.state="candidate",this.$scope.dialog_content=this.recChatLineService.getDialogContent(e);var t=this;this.$scope.dialog_content.load((function(){}),(function(e){t.$scope.load&&0==t.$scope.dialog_content.list.length&&(t.$scope.empty=!0),t.$scope.$broadcast("article_comment_refresh")})).then((function(){t.$scope.dialog_content.next(!0),t.$scope.load=!0}))}}}return e.prototype.$onInit=function(){this.getDialogData();var e=this;this.$scope.$on("journalRefresh",(function(t){e.$scope.dialog_content.list=[],e.$scope.load=!1,e.$scope.empty=!1,e.$scope.$broadcast("article_comment_refresh",!0),e.getDialogData()})),this.$scope.$on("perf-article-comment",(function(t,n){e.$scope.$broadcast("perf-article-comment-event",n)}))},e.$inject=["$scope","$rootScope","$element","$timeout","recChatLineService"],e}());window.app.component("hcBoard",{bindings:{model:"=ngModel",options:"<?"},controller:Vt,template:Ht.a}),n("HYjB"),O.a.directive("perfArticleComment",(function(){return{template:n("ys6y"),scope:{},controller:["$filter","circleGroupService","$hcDialog","$scope","$commonAction","commentService","$state","$timeout","$hcListBtn",function(e,t,n,i,o,a,l,r,c){i.start_to_employee_select=p()(u.a.mark((function e(){var t,a,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.getCustomDialogCtrl("hcWorkflowEmployeeSimpleSelectorPanel");case 2:return t=e.sent,e.next=5,o.createCommonAction(i).exprParse({ctrl:"hcWorkflowEmployeeSimpleSelectorPanel",action_chain:!0,direct_params:!0,size:"middle",data:{selectorModel:"Employee",useStrict:!0,state:"PerfShareEmpSelector",selectorType:2}});case 5:a=e.sent,l=a.data,r=l,n.getDialog(t).size("middle").show(r).then((function(e){i.comment_at=e}));case 9:case"end":return e.stop()}}),e)}))),i.init=function(){var t=[{key:"cancel",label:e("translate")("Cancel"),func:i.close_comment},{key:"submit",label:e("translate")("submit"),is_important:!0,func:i.submit_comment,disabled:function(){return i.is_commenting||i.content_length_overflow}}];i.list_btn_model=c.createListBtn().$setMeta(t)},i.$on("perf-article-comment-event",(function(e,n){i.content_length=0,i.is_comment=!0,i.article=n.article,t.getGroupByFeed(i.article.feed_id).then((function(e){i.group=e})),i.reply=n.reply,i.comment_text="",i.comment_at=[],i.callback=n.callback,r((function(){$(".article-comment .comment-input").focus()}),500)})),i.un_at_employee=function(e){var t;b()(t=i.comment_at).call(t,e,1)},i.content_length=0,i.content_change=function(){i.content_length=i.comment_text.replace(/\r\n/g,"<BR>").replace(/\n/g,"<BR>").length,i.content_length_overflow=i.content_length>150},i.close_comment=function(){i.is_comment=!1},i.submit_comment=function(){var e;i.is_commenting||i.content_length_overflow||(i.is_commenting=!0,a.createComment({article_id:i.article.id,reply_to_id:i.reply?i.reply.id+":"+i.reply.obj_type:"",comment:i.comment_text.replace(/\r\n/g,"<BR>").replace(/\n/g,"<BR>"),at_employee_ids:w()(e=i.comment_at).call(e,(function(e){return e.id})).join(",")}).then((function(e){i.is_commenting=!1,i.is_comment=!1,r((function(){$(".article-comment .comment-input").blur()}),300),i.callback(e)})))}}]}}));n("z999");app.directive("appointmentCalendar",(function(){return{restrict:"EA",scope:{config:"="},template:n("jGHe"),controller:["$scope","$filter","$hcDialog",function(e,t,i){function o(){e.period=t("dateFormat")(e.config.date,"yyyyMM"),e.dates=[];var n=new Date(e.period.replace(/(\d{4})(\d{2})/,"$1/$2/01"));n.setDate(1);var i=1-n.getDay();n.setMonth(n.getMonth()+1),n.setDate(0);for(var o=n.getDate()+6-n.getDay(),a=i;a<=o;a++){var l,r=new Date(n);r.setDate(a);var c={curr_month:n.getMonth()===r.getMonth(),date:t("dateFormat")(r,"yyyy-MM-dd"),select:!1,appoint_num:{}};s()(l=e.config.select_items).call(l,c.date)>-1&&(c.select=!0,c.appoint_num={num:e.config.select_items_detail[c.date].num,time_period:e.config.select_items_detail[c.date].time_period}),e.dates.push(c)}}e.cell_select=function(t){if(t.curr_month){var n=e.config.select_items,i=s()(n).call(n,t.date);i>-1?(delete e.config.select_items_detail[t.date],b()(n).call(n,i,1),t.select=!1,t.appoint_num=""):(n.push(t.date),t.select=!0,t.appoint_num={num:e.config.appoint_default,time_period:e.config.time_period_default},e.config.select_items_detail[t.date]={num:e.config.appoint_default,time_period:e.config.time_period_default}),e.config.select_items=n}},e.init=function(){e.config.date||(e.config.date=new Date),o()},e.redirectTo=function(t){var n=new Date(e.config.date);n.setMonth(t+n.getMonth()),e.config.date=n,o()},e.$on("batch_edit",(function(o,a){var l=e.config.select_items;i.getDialog({template:n("69I9"),controller:"appointmentCalendarSetDateCtrl"}).params({appoint_calendar:{num:e.config.appoint_default,time_period:e.config.time_period_default}}).size("small").show().then((function(n){e.period=t("dateFormat")(e.config.date,"yyyyMM");var i=new Date(e.period.replace(/(\d{4})(\d{2})/,"$1/$2/01"));i.setDate(1);var o=1-i.getDay();i.setMonth(i.getMonth()+1),i.setDate(0);for(var r=i.getDate()+6-i.getDay(),c=o;c<=r;c++)if(c>0&&(i.setDate(c),i.getDay()===a.week)){var d=t("dateFormat")(i,"yyyy-MM-dd");s()(l).call(l,d)<0?(l.push(d),e.dates[c-o].select=!0,e.dates[c-o].appoint_num.num=n.num,e.dates[c-o].appoint_num.time_period=n,e.config.select_items_detail[d]={},e.config.select_items_detail[d].time_period=n,e.config.select_items_detail[d].num=n.num):e.dates[c-o].appoint_num.num!==n.num&&(e.dates[c-o].appoint_num.num=n.num,e.dates[c-o].appoint_num.time_period=n,e.config.select_items_detail[d]={},e.config.select_items_detail[d].num=n.num,e.config.select_items_detail[d].time_period=n)}e.config.select_items=l}))})),e.date_edit=function(t){i.getDialog({template:n("69I9"),controller:"appointmentCalendarSetDateCtrl"}).params({appoint_calendar:t.appoint_num}).size("small").show().then((function(n){t.appoint_num.num=n.num,t.appoint_num.time_period=n,e.config.select_items_detail[t.date].num=n.num,e.config.select_items_detail[t.date].time_period=n}))},e.go_prev=function(){e.redirectTo(-1)},e.go_next=function(){e.redirectTo(1)}}]}})),app.controller("appointmentCalendarSetDateCtrl",["$q","$stateParams","contextService","$timeout","$scope","$hcForm",function(e,t,n,i,o,a){for(var l in o.formTargetItem=[{key:"num",label:"日接待量",component:"hc-input",sequence:10,options:{date_type:"integer",required:!0,singleLine:!0,placeholder:"请输入日接待量"}}],o.params.appoint_calendar.time_period)"num"!==l&&o.formTargetItem.push({key:l,label:l,component:"hc-input",sequence:null,options:{date_type:"integer",required:!0,singleLine:!0,placeholder:"请输入接待量"}});for(var l in o.appoint_calendar=a.createForm().$setMeta(o.formTargetItem),o.appoint_calendar.data.num=o.params.appoint_calendar.num,o.params.appoint_calendar.time_period)o.appoint_calendar.data[l]=o.params.appoint_calendar.time_period[l];o.submit=function(){o.$dialog.resolve_data(o.appoint_calendar.data),o.$dialog.dialog_close()},o.$dialog.title("请输入").operates([{label:"取消",func:function(){o.$dialog.dialog_close()}},{label:"保存",default:!0,func:o.submit}])}]);var Yt=n("5n6K"),Gt=n.n(Yt),Jt=(n("JjrJ"),function(){function e(){}return e.prototype.$onInit=function(){this.is_show_obj_detail=!1},e.$inject=["$scope"],e}());window.app.component("hcInfoCard",{bindings:{model:"=ngModel",options:"<?",detail:"<"},controller:Jt,template:Gt.a});var Xt=n("RFt6"),Qt=n.n(Xt),Zt=(n("B6+F"),function(){function e(e,t,n,i){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i}return e.prototype.$onInit=function(){var e=this;this.stageList=this.model.card_stage,this.currentOrder=this.model.current_order,we()((function(){var t,n,i=Math.round($("#stage-nav")[0].clientWidth/180),o=Math.ceil((i+1)/2);(null===(n=Fe()(t=e.$element).call(t,"#stage-nav")[0])||void 0===n?void 0:n.scrollWidth)-$("#stage-nav")[0].clientWidth>0&&e.model.current_order>o&&($("#stage-nav")[0].scrollLeft+=175*(e.model.current_order-o))}),0)},e.prototype.checkDisplay=function(){var e,t;return(null===(t=Fe()(e=this.$element).call(e,"#stage-nav")[0])||void 0===t?void 0:t.scrollWidth)-$("#stage-nav")[0].clientWidth>0?{display:"inline-block"}:{display:"none"}},e.prototype.setWidth=function(){var e,t;return(null===(t=Fe()(e=this.$element).call(e,"#stage-nav")[0])||void 0===t?void 0:t.scrollWidth)-$("#stage-nav")[0].clientWidth>0?{width:"calc(100% - 60px)"}:{width:"100%"}},e.prototype.mouseOver=function(e){$("#stage-nav").css("height",50*(e+1)+30+"px")},e.prototype.mouseLeave=function(){$("#stage-nav").css("height","auto")},e.prototype.leftMove=function(){$("#stage-nav")[0].scrollLeft-=150},e.prototype.rightMove=function(){$("#stage-nav")[0].scrollLeft+=150},e.$inject=["$scope","$rootScope","$element","$timeout"],e}());O.a.component("hcStageCard",{bindings:{options:"<",model:"=ngModel"},controller:Zt,template:Qt.a});var en=n("Hmoe"),tn=n.n(en),nn=(n("+PTd"),function(){function e(e,t,n,i,o){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.dataService=o}return e.prototype.$onInit=function(){var e=this;this.dataService.callHcmOpenApi("hcm.model.list",{model:"MessageExtendDict"}).then((function(t){var n;e.value_meta=Pe()(n=t.list).call(n,(function(e){return e.extend_dict.length>0}))}))},e.$inject=["$scope","$rootScope","$element","$timeout","dataService"],e}());window.app.component("hcClickCopy",{bindings:{model:"=ngModel",options:"<?"},controller:nn,template:tn.a});var on=n("YUeV"),an=n.n(on),ln=(n("OI98"),function(){function e(){}return e.prototype.$onInit=function(){},e.$inject=["$scope"],e}());window.app.component("hcActivityInfo",{bindings:{model:"=ngModel",options:"<?"},controller:ln,template:an.a});var rn=n("QYb0"),cn=n.n(rn),sn=(n("8dk8"),function(){function e(){}return e.prototype.$onInit=function(){var e;this.is_show_current=("my_card"===this.model.source_type||"team_card"===this.model.source_type&&"interview"!==this.model.stage_type)&&ae()(e=["score","self_score","multi_score","score_approve"]).call(e,this.model.stage_type),this.is_show_assess="view"===this.model.source_type||"my_card"===this.model.source_type||"assess_activity"===this.model.source_type||"sub"===this.model.source_type||"team_card"===this.model.source_type&&("interview"===this.model.stage_type||"result_approve"===this.model.stage_type)},e.$inject=["$scope"],e}());window.app.component("hcScoreInfo",{bindings:{model:"=ngModel",options:"<?"},controller:sn,template:cn.a});var dn=n("OxRh"),un=n.n(dn),_n=(n("4H8x"),function(){function e(){this.client=window.client}return e.prototype.$onInit=function(){},e.$inject=["$scope"],e}());window.app.component("hcPersonnelStateCard",{bindings:{data:"="},controller:_n,template:un.a});var pn=n("h9Hr"),mn=n.n(pn),fn=function(){function e(e,t,n,i){this.scope=e,this.rootScope=t,this.compile=n,this.element=i}return e.prototype.$onInit=function(){console.log(this.cardMeta),this.initComponent()},e.prototype.initComponent=function(){var e,t=this.cardMeta.component||"hc-custom-card",n=this.rootScope.$new();n.params=this.environment,n.meta=this.cardMeta.meta;var i="<"+t+' params="params" meta="meta"></'+t+">",o=this.compile(i)(n);Fe()(e=this.element).call(e,".hc-list-view-card-container").html(o)},e.$inject=["$scope","$rootScope","$compile","$element"],e}();window.app.component("hcListViewCardContainer",{bindings:{cardMeta:"=",environment:"="},controller:fn,template:mn.a});var hn=n("1Nz0"),gn=n.n(hn),vn=function(){function e(){}return e.prototype.$onInit=function(){},e.prototype.getData=function(e){var t;switch(e.type){case"list":return this.params.data;case"stat":return null===(t=this.params.stat_data)||void 0===t?void 0:t[0];case"env":return this.params.env;default:return this.params}},e}();window.app.component("hcCustomCard",{bindings:{meta:"=",params:"="},controller:vn,template:gn.a});var bn=n("mhNF"),yn=n.n(bn),wn=(n("cUFj"),function(){function e(){}return e.$inject=["$timeout","$hcDialog"],e}());window.app.service("infoScoreService",wn);n("z/jk");var xn=n("5USo"),kn=n.n(xn);window.app.controller("PerfStageListCtrl",["$scope","$rootScope","$controller",function(e,t,n){e.stage_list=e.params.stage_list.stage_list.card_stage,e.current_order=e.params.stage_list.stage_list.current_order;var i=[{label:"返回",func:function(){e.$dialog.dialog_close()},default:!1}];e.$dialog.operates(i)}]);var $n={controller:"PerfStageListCtrl",template:kn.a},On=function(){function e(e,t,n,i,o){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.$hcDialog=o,this.client=window.client,this.is_show_board=!0}return e.prototype.$onInit=function(){var e,t=this;this.isShow=!0,this.obj_info=this.model.obj_info,this.obj_detail=this.model.obj_detail,this.obj_detail_list=this.model.obj_detail_list,this.is_show_obj_detail=!1,this.perf_level=this.model.perf_level,this.assess_score=this.model.assess_score,this.current_score=this.model.current_score,this.is_generate_perf_level=this.model.is_generate_perf_level,this.$scope.$on("transform_y_1",(function(e,n){var i;Fe()(i=t.$element).call(i,".card-left-info").css("transform","scaleY(1)").css("width",n)})),this.$scope.$on("transform_y_0",(function(){var e;Fe()(e=t.$element).call(e,".card-left-info").css("transform","scaleY(0)")})),this.$scope.$on("show-board-change",(function(e,n){var i;t.is_show_board=!t.is_show_board,Fe()(i=t.$element).call(i,".card-left-info").css("width",n)})),this.is_show_current=("my_card"===this.model.sourceType||"team_card"===this.model.sourceType&&"interview"!==this.model.stage.type)&&ae()(e=["score","self_score","multi_score","score_approve"]).call(e,this.model.stage.type),this.is_show_assess="view"===this.model.sourceType||"my_card"===this.model.sourceType||"assess_activity"===this.model.sourceType||"sub"===this.model.sourceType||"team_card"===this.model.sourceType&&("interview"===this.model.stage.type||"result_approve"===this.model.stage.type)},e.prototype.openDetail=function(){this.$hcDialog.getDialog($n).params({stage_list:this.model}).size("middle").show()},e.prototype.openPcDetail=function(){this.isShow=!this.isShow},e.prototype.changeStatus=function(e){this.is_show_obj_detail=e},e.$inject=["$scope","$rootScope","$element","$timeout","$hcDialog"],e}();window.app.component("hcInfoScore",{bindings:{model:"=ngModel",options:"<?"},controller:On,template:yn.a});var Dn=n("N5f8"),Cn=n.n(Dn),Mn=(n("XNUf"),n("xbOs")),Sn=n.n(Mn),En=function(){function e(e,t,n,i){var o=this;this.$scope=e,this.$element=t,this.$hcListBtn=n,this.$timeout=i,this.client=window.client,this.getSignature=function(){return o.signature}}return e.prototype.$onInit=function(){var e;this.signature=new Sn.a(Object(Pt.a)({container:Fe()(e=this.$element).call(e,"canvas")[0]},this.config)),this.operation&&(this.operation.getSignature=this.getSignature)},e.prototype.unDo=function(){this.signature.undo()},e.prototype.clear=function(){this.signature.clear()},e.$inject=["$scope","$element","$hcListBtn","$timeout"],e}();O.a.component("hcCanvas",{bindings:{config:"<?",operation:"<?"},controller:En,template:Cn.a});var Pn=n("Mi90"),jn=n.n(Pn),Tn=(n("HVcC"),n("d/Un")),An=n.n(Tn),In=(n("gba1"),function(){function e(e,t,n,i){this.$scope=e,this.$rootScope=t,this.dataService=n,this.$filter=i,this.config={},this.operation={};var o=this;this.config=te()({image_type:"image/jpeg"},e.$dialog.options.params.config||{});var a=[{key:"back",label:"退出签名",func:function(){return e.$dialog.dialog_close()}},{key:"clear",label:"清空",func:function(){return o.operation.getSignature().clear()}},{key:"confirm",label:"确认",is_important:!0,func:function(){return o.confirm()}}];this.$scope.$dialog.operates(a),this.init()}return e.prototype.confirm=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t,n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return(e=this.operation.getSignature()).isEmpty()?(this.$rootScope.show_warning("请您签字之后再点击确认。"),[2]):(t=e.toDataURL(this.config.image_type),[4,this.dataService.callHcmOpenApi("document.save.documents",{document:{filename:this.config.filename||("image/png"===this.config.image_type?"signature.png":"signature.jpeg"),body:t}})]);case 1:return n=i.sent(),this.$scope.$dialog.resolve_data(n),this.$scope.$dialog.dialog_close(),[2]}}))}))},e.prototype.init=function(){var e,t,n=this;if(null===(e=this.$scope.params)||void 0===e?void 0:e.model){var i=window.hcm_wengen+"/document/loadsourcedocument/"+(null===(t=this.$scope.params)||void 0===t?void 0:t.model)+window.hcm_env_pre;this.fromDataUrl(i).then((function(e){n.initSignatureData(e)}))}},e.prototype.initSignatureData=function(e){var t=this.operation.getSignature();t.clear(),t.initData(e)},e.prototype.fromDataUrl=function(e){return new G.a((function(t,n){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(i.response)},i.open("GET",e),i.responseType="blob",i.send()}))},e.$inject=["$scope","$rootScope","dataService","$filter"],e}()),Ln={controller:"signatureDialog as $ctrl",template:An.a,name:"signature",title:"签名",maskClose:!1};O.a.controller("signatureDialog",In);var Fn=function(){function e(e,t,n){this.$hcListBtn=e,this.$timeout=t,this.$hcDialog=n}return e.prototype.getSignatureIndex=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.$hcDialog.getDialog(Ln).params({config:e,model:t}).show()];case 1:return[2,n.sent()]}}))}))},e.$inject=["$hcListBtn","$timeout","$hcDialog"],e}();O.a.service("signatureService",Fn);var Rn=function(){function e(e,t,n,i,o,a){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.signatureService=o,this.$filter=a,this.client=window.client,this.hcm_wengen=window.hcm_wengen,this.fileList=[]}return e.prototype.$onInit=function(){var e=this;this.syncFileList(),this.$scope.$watch("$ctrl.model",(function(t,n){t!==n&&e.syncFileList()}))},e.prototype.syncFileList=function(){this.model?this.options.multi?this.fileList=Object(Pt.h)(this.model):this.fileList=[this.model]:this.fileList=[]},e.prototype.delete=function(e){this.changeModel(void 0,e,"delete")},e.prototype.changeModel=function(e,t,n){switch(void 0===n&&(n="add"),n){case"add":var i;if(this.options.multi)this.model=ie()(i=this.model||[]).call(i,e);else this.model=e;break;case"update":var o;if(this.options.multi)this.model=w()(o=this.model).call(o,(function(n){return n===t?e:n}));else this.model=e;break;case"delete":var a;if(this.options.multi)this.model=Pe()(a=this.model).call(a,(function(e){return e!==t})),0===this.model.length&&(this.model=null);else this.model=null}},e.prototype.sign=function(e,t){return void 0===t&&(t="add"),Object(Pt.c)(this,void 0,void 0,(function(){var n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return this.$filter("valueToFunc")(this.options.readOnly)()?[2]:[4,this.signatureService.getSignatureIndex(this.options.config,e)];case 1:return n=i.sent(),this.changeModel(n,e,t),[2]}}))}))},e.$inject=["$scope","$rootScope","$element","$timeout","signatureService","$filter"],e}();O.a.component("hcInputSignature",{bindings:{model:"=ngModel",options:"<?"},controller:Rn,template:jn.a});var Bn=n("Ozbz"),Un=n.n(Bn),qn=function(){function e(e){this.dataService=e}return e.prototype.getCount=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.model.count.for.dashboard",e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getFilterDict=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmCacheOpenApi("common.query.setting.get",{id_:t,model:e})];case 1:return[2,n.sent()]}}))}))},e.$inject=["dataService"],e}();O.a.service("hcCountService",qn);n("ysJG");var Wn=function(){function e(e,t,n){this.hcCountService=e,this.$scope=t,this.$rootScope=n}return e.prototype.$onInit=function(){var e=this;this.model?this.counts=this.model:this.getData(),this.$scope.$watch("$ctrl.options",(function(t,n){t===n||t.row||e.getData()}),!0)},e.prototype.getData=function(){var e,t;return Object(Pt.c)(this,void 0,void 0,(function(){var n,i,o,a,l;return Object(Pt.e)(this,(function(r){switch(r.label){case 0:return(null===(e=this.options)||void 0===e?void 0:e.model)&&("count"===this.options.type||this.options.field)?(o=(i=JSON).parse,[4,this.hcCountService.getFilterDict(this.options.model,this.options.advance_plan_id)]):[2];case 1:switch(n=null===(t=o.apply(i,[r.sent().config]))||void 0===t?void 0:t.filter_dict,a={count_by:["id"],biz_type:"list",filter_dict:n,model:this.options.model,extra_property:{state:this.options.state}},this.options.type){case"sum":a.sum_by=[this.options.field];break;case"distinct_count":a.distinct_count_by=[this.options.field];break;case"avg":a.avg_by=[this.options.field]}return[4,this.hcCountService.getCount(a)];case 2:switch(l=r.sent().list[0],this.options.type){case"sum":case"distinct_count":case"avg":this.count=l[this.options.type+"__"+this.options.field];break;case"count":this.count=l.count__id}return[2]}}))}))},e.$inject=["hcCountService","$scope","$rootScope"],e}();O.a.component("hcCount",{bindings:{model:"<",options:"<",params:"<"},template:Un.a,controller:Wn});var zn=n("467A"),Nn=n.n(zn),Kn=(n("SeLw"),function(){function e(e,t){this.$timeout=e,this.$hcDialog=t}return e.prototype.getMyData=function(){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return[4,this.$hcDialog.getDialog().params({}).show()];case 1:return[2,e.sent()]}}))}))},e.$inject=["$timeout","$hcDialog"],e}());window.app.service("articleComponentService",Kn);var Hn=function(){function e(e,t,n,i,o){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.documentPreviewService=o,this.client=window.client}return e.prototype.$onInit=function(){var e=this;this.$scope.$watch("$ctrl.model.content",(function(t,n){t&&e.$scope.$broadcast("hc-mark-down-refresh",e.model.content)}))},e.prototype.viewAttachment=function(e,t){var n;~s()(n=["zip","xlsx","png","jpg","jpeg"]).call(n,t)?this.downloadAttachment(e):this.documentPreviewService.preViewDocument(e)},e.prototype.downloadAttachment=function(e){window.open("document/loadsourcedocument/"+e)},e.$inject=["$scope","$rootScope","$element","$timeout","documentPreviewService"],e}();window.app.component("hcArticle",{bindings:{model:"=ngModel",options:"<?"},controller:Hn,template:Nn.a});n("WG56"),n("yDEG");var Vn=n("KYsz"),Yn=n.n(Vn),Gn=n("IeeE"),Jn=n.n(Gn),Xn=(n("3k+j"),n("5N6W")),Qn=n.n(Xn),Zn=function(){function e(e,t,n,i,o){this.container=e,this.itemSelector=t,this.timeout=n,this.itemRender=i,this.options=o;var l=this;e.parent().scroll((function(){var e;l.setViewRect(),l._renderTimeout&&n.cancel(l._renderTimeout),l._renderTimeout=n(a()(e=l._refresh).call(e,l),100)}))}return e.prototype.setViewRect=function(){var e=this.container.parent()[0];this.viewTop=e.scrollTop,this.viewBottom=e.offsetHeight+e.scrollTop},e.prototype.isVisible=function(e){this.viewBottom||this.setViewRect();var t=this._getOffsetTop(e,this.container[0]);return t+e.offsetHeight>this.viewTop&&t<this.viewBottom},e.prototype._getOffsetTop=function(e,t){if(e===t)return 0;var n=0;return"none"!==document.defaultView.getComputedStyle(e).transform&&(n=E()(document.defaultView.getComputedStyle(e).transform.substring(7).split(",")[5])),e.offsetTop+this._getOffsetTop(e.parentNode,t)+n},e.prototype._refresh=function(){var e,t;try{for(var n=Object(Pt.i)(Fe()(o=this.container).call(o,this.itemSelector)),i=n.next();!i.done;i=n.next()){var o,a=i.value;!a.hasAttribute("rendered")&&this.isVisible(a)&&(this.itemRender(a),a.setAttribute("rendered",!0))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.render=function(){var e,t;try{for(var n=Object(Pt.i)(Fe()(o=this.container).call(o,this.itemSelector)),i=n.next();!i.done;i=n.next()){var o;i.value.removeAttribute("rendered")}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._refresh()},e.prototype.unbindScroll=function(){this.container.parent().unbind("scroll")},e}(),ei=function(){function e(){}return e.loadComponent=function(e){var t=this;return new G.a((function(n,i){t._boardComponentMap.get(e)().then((function(e){angular.element(document.body).injector().get("$ocLazyLoad").load([{name:"hcm.common"},{name:"myApp"}]).then((function(){n(e)}))}))}))},e._boardComponentMap=new ut.a([["BoardComponent",function(){return Promise.all([n.e(0),n.e(32)]).then(n.bind(null,"HX6o")).then((function(e){return e.default}))}],["BoardComponentSettings",function(){return Promise.all([n.e(0),n.e(32)]).then(n.bind(null,"UGd6"))}]]),e}(),ti=n("+KAf"),ni=n.n(ti);n("FIQr");window.app.controller("BoardAnchorPositionDialog",["$scope",function(e){e.init=function(){e.anchor_list=e.params.data},e.selectNav=function(t,n){n.stopPropagation(),e.$dialog.resolve_data(t),e.$dialog.dialog_close()}}]);var ii={controller:"BoardAnchorPositionDialog",template:ni.a,name:"board-anchor-position-dialog",maskClose:!0},oi=function(){function e(e,t,n,i){this.hcDialog=e,this.$filter=t,this.dataService=n,this.timeout=i,this.has_group=!1,this.context={},this.custom_actions={},this.state=!1,this.asyncTask={},this.shouldInitGridLayout=!1}return e.prototype.setComponent=function(e,t){var n=this;return this.validateDuplicateComponent(e),this.components=angular.copy(e),this.setGroups(t),"pc"===window.client&&this.timeout((function(){n.$ctrl&&n.$ctrl.gridLayoutLoaded&&n.$ctrl.gridItemLoaded?n.$ctrl.initGridLayout():n.shouldInitGridLayout=!0})),this},e.prototype.validateDuplicateComponent=function(e){var t=this,n=[],o=[];g()(e).call(e,(function(e){~s()(n).call(n,e.key)?"setup"===t.state?o.push(e.key):e.key="component_"+Object(i.g)():n.push(e.key)})),o.length&&this.hcDialog.notify("插件存在重复标识:"+o.join(",\n"))},e.prototype.convertComponent=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.template.json.convert",{json_:e,context:this.context})];case 1:return[2,t.sent()]}}))}))},e.prototype.setGroups=function(e){this.groups=this.parseGroupMeta(this.components,angular.copy(e))},e.prototype.setContext=function(e){te()(this.context,angular.copy(e))},e.prototype.setContextMeta=function(e){var t;this.context_meta=angular.copy(e),this.context_key=null===(t=this.context_meta)||void 0===t?void 0:w()(t).call(t,(function(e){return e.key}))},e.prototype.setCustomAction=function(e){this.custom_actions=e},e.prototype.setBoardRelations=function(e){this.board_relations=e},e.prototype.setState=function(e){this.state=e},e.prototype.addComponent=function(e,t,n){var i=this;void 0===t&&(t=0),void 0===n&&(n=!0),this.components.push(e),this.groups[t]||(this.groups[t]={components:[],component_list:[]}),this.groups[t].components.push(e),this.groups[t].component_list.push(e.key),n&&this.timeout((function(){i.$ctrl.addGridLayout(e,t)}),500),this.timeout((function(){var t;Fe()(t=i.$ctrl.element).call(t,".hc-board-component-container[key="+e.key+"]")[0].scrollIntoView({behavior:"smooth",block:"center"})}),500)},e.prototype.setBorderContainer=function(e){this.borderContainer=e},e.prototype.setLazyContainer=function(e){return this.lazy_parent=e,this},e.prototype.removeComponent=function(e,t){var n,i,o=this,a=this.$filter("isValidValue")(t)?o.groups[t].components[e].key:o.components[e].key,l=this.$filter("isValidValue")(t)?t:Be()(n=this.groups).call(n,(function(e){var t;return!!~Be()(t=e.component_list).call(t,(function(e){return e===a}))}));this.hcDialog.confirm(this.$filter("translate")("common_portal_board_setting_remove_component_confirm")+"'"+(this.groups[l].components[e].options.title||(null===(i=this.groups[t].components[e].options)||void 0===i?void 0:i.label))+"'?",[{caption:this.$filter("translate")("common_confirm_accept")}]).then((function(){var t,n,i,r,c,s,d;null===(d=o.component_controllers)||void 0===d||delete d[a],o.$ctrl.gridItemList[l][e].destroyed(),b()(t=o.$ctrl.gridItemList[l]).call(t,e,1),b()(n=o.$ctrl.scope["layout_"+l]).call(n,e,1),b()(i=o.components).call(i,Be()(r=o.components).call(r,(function(e){return e.key===a})),1),b()(c=o.groups[l].components).call(c,e,1),b()(s=o.groups[l].component_list).call(s,e,1),o.$ctrl.scope["gridLayout_"+l].compactLayout()}))},e.prototype.setupComponent=function(e,t){var n,i,o,a,l,r=this,c=this,s=this.theme,d=this.$filter("isValidValue")(t)?c.groups[t].components[e].key:c.components[e].key,u=this.$filter("isValidValue")(t)?t:Be()(n=this.groups).call(n,(function(e){var t;return!!~Be()(t=e.component_list).call(t,(function(e){return e===d}))})),_=this.groups[u].components[e],p=Be()(i=this.components).call(i,(function(e){return e.key===_.key}));if(this.groups[u].components[e].convert)this.hcDialog.confirm("该插件已经被设定为动态转化模式，不支持可视化设置，请在高级设置中修改配置");else{var m=null===(o=this.component_controllers)||void 0===o?void 0:o[_.key],f=m&&(null===(a=null==m?void 0:m.getSettingPanel)||void 0===a?void 0:a.call(m))||{},h=m&&(null===(l=null==m?void 0:m.getWhichTemplate)||void 0===l?void 0:l.call(m))||null;ei.loadComponent("BoardComponentSettings").then((function(t){var n=t.componentSetupDialog,i=t.componentSetupDialogList,o=t.componentSetupDialogCount,a=t.componentSetupDialogComponents;switch(h){case"list":r.hcDialog.getDialog(i).show({data:angular.copy(_),panel:f,context_meta:r.context_meta,context_data:r.context,theme:s}).then((function(t){r.groups[u].components[e]=t,r.components[p]=t,we()((function(){m&&c.$ctrl.refreshComponent(_.key,!0)}),100)}));break;case"count":r.hcDialog.getDialog(o).show({data:angular.copy(_),panel:f,context_meta:r.context_meta,context_data:r.context,theme:s}).then((function(t){r.groups[u].components[e]=t,r.components[p]=t,we()((function(){m&&c.$ctrl.refreshComponent(_.key,!0)}),100)}));break;case"componentsContent":r.hcDialog.getDialog(a).show({data:angular.copy(_),panel:f,context_meta:r.context_meta,context_data:r.context,theme:s}).then((function(t){r.groups[u].components[e]=t,r.components[p]=t,we()((function(){m&&c.$ctrl.refreshComponent(_.key,!0)}),100)}));break;default:r.hcDialog.getDialog(n).show({data:angular.copy(_),panel:f,context_meta:r.context_meta,context_data:r.context,theme:s}).then((function(t){r.groups[u].components[e]=t,r.components[p]=t,we()((function(){m&&c.$ctrl.refreshComponent(_.key,!0)}),100)}))}}))}},e.prototype.refreshBoard=function(e){var t;void 0===e&&(e=!1),null===(t=this.$ctrl)||void 0===t||t.refreshBoard(e)},e.prototype.refreshComponent=function(e){var t;null===(t=this.$ctrl)||void 0===t||t.refreshComponent(e)},e.prototype.setLayoutClient=function(e){this.$ctrl.setLayoutClient(e)},e.prototype.parseGroupMeta=function(e,t){var n=angular.copy(e);t=t||[],this.has_group=!!t.length;var i={};g()(e).call(e,(function(e){i[e.key]=e})),g()(t).call(t,(function(t){var i;t.fold=!1,t.component_list=t.component_list||[],t.components=w()(i=Pe()(e).call(e,(function(e){var n;return ae()(n=t.component_list).call(n,e.key)}))).call(i,(function(e){return Fe()(n).call(n,(function(t){return t.key===e.key})).is_added=!0,e}))}));var o=Pe()(n).call(n,(function(e){return!e.is_added})),a=Pe()(e).call(e,(function(e){return!!~Be()(o).call(o,(function(t){return t.key===e.key}))}));return a.length>0&&t.push({components:a,component_list:w()(a).call(a,(function(e){return e.key}))}),t[0]&&(t[0].first_group=!0),t},e.prototype.dealBoardRelations=function(e,t){var n,i,o,a=this,l=Pe()(n=this.board_relations).call(n,(function(t){return t.key===e}));if(0!==l.length){var r=function(e){a.dataService.callHcmOpenApi("flex.template.board.expressions",{context:Object(Pt.a)(Object(Pt.a)({},a.context),t),expressions:e.board_onchange}).then((function(t){var n,i;a.setContext(t);try{for(var o=Object(Pt.i)(e.refresh_keys),l=o.next();!l.done;l=o.next()){var r=l.value;a.refreshComponent(r)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}})).catch((function(e){console.log(e),null==e||e.status})).finally((function(){}))};try{for(var c=Object(Pt.i)(l),s=c.next();!s.done;s=c.next()){r(s.value)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}},e.prototype.setTheme=function(e){return this.theme=e,this},e.prototype.setThemeStyle=function(){var e,t,n=this;switch(this.board_theme_list=[],this.theme){case"tech":g()(e=this.groups).call(e,(function(e,t){var i;n.board_theme_list[t]=[],g()(i=e.components).call(i,(function(e){var i={};e.theme_border_bg&&(i.themeClass="has-tech-border"),e.theme_board_bg&&(i.themeStyle="background-image:url("+e.theme_board_bg+");background-size:100% 100%;background-color:transparent;padding:0;"),n.board_theme_list[t].push(i)}))}));break;case"tech_1":g()(t=this.groups).call(t,(function(e,t){var i;n.board_theme_list[t]=[],g()(i=e.components).call(i,(function(e){var i={};e.theme_border_bg&&(i.themeClass="has-tech-border"),n.board_theme_list[t].push(i)}))}))}},e.prototype.setColor=function(e){return this.color=e,this},e.prototype.setAnchors=function(e){return this.anchors=e,this},e.prototype.setAnchorType=function(e){return this.anchor_type=e,"fixed"===this.anchor_type&&(this.isShowAnchors=!0),this},e.prototype.setOpacity=function(e){this.opacity=e},e.prototype.setBackgroundImage=function(e,t){this.background_image=e,this.background_image_opacity=t},e.prototype.setPerformance=function(e){var t;void 0===e&&(e={});var n=e.theme_color,i=e.opacity,o=e.background_image_type,a=e.background_image_use_exist,l=e.background_image_use_upload;this.theme_color=n,this.setColor(null===(t=null==n?void 0:n.colors)||void 0===t?void 0:w()(t).call(t,(function(e){return e.color}))),this.setOpacity(i),this.background_image_type=o,this.background_image_use_exist=a,this.background_image_use_upload=l,"use_exist"===o?this.setBackgroundImage(null==a?void 0:a.image,null==a?void 0:a.transparency):this.setBackgroundImage(null==l?void 0:l.index,null==l?void 0:l.opacity)},e}(),ai=function(){function e(e,t,n,i){this.hcDialog=e,this.$filter=t,this.dataService=n,this.timeout=i}return e.prototype.createBoard=function(){return new oi(this.hcDialog,this.$filter,this.dataService,this.timeout)},e.$inject=["$hcDialog","$filter","dataService","$timeout"],e}(),li=function(){function e(e,t,n,i,o,a,l){var r=this;this.scope=e,this.element=t,this.hcDialog=n,this.timeout=i,this.$state=o,this.q=a,this.rootScope=l,this.MARGIN=0,this.client=window.client,this.current_group=0,this.renderedComponent=[],this.interval={},this.componentLoaded=!1,this.gridItemLoaded=!1,this.gridLayoutLoaded=!1,this.gridItemList=[],this.scrollToView=function(e){var t;null===(t=document.getElementById("nav-"+e.toString()))||void 0===t||t.scrollIntoView({inline:"center",behavior:"smooth"})};var c=this;this.scope.$watch((function(){return r.model}),(function(){c.model&&(c.model.$ctrl=c,c.model.shouldInitGridLayout&&c.gridItemLoaded&&c.gridLayoutLoaded&&(c.timeout((function(){c.initGridLayout()})),c.model.shouldInitGridLayout=!1))})),this.rootScope.$on("win_body_click_event",(function(){"fixed"!==c.model.anchor_type&&(r.model.isShowAnchors=!1)})),this.anchorsTimer=Jn()((function(){c.scope.anchorsLeave&&"fixed"!==c.model.anchor_type&&(c.model.isShowAnchors=!1)}),3e3)}return e.prototype.$onInit=function(){var e=this,t=this;t.startResizeDetect(),ei.loadComponent("BoardComponent").then((function(){t.componentLoaded=!0,t.setLayoutClient(),"mobile"===e.LAYOUT_CLIENT?e.timeout((function(){var i;"swiper"===(null===(i=e.model)||void 0===i?void 0:i.theme)?n.e(92).then(n.bind(null,"TaHA")).then((function(n){var i=n.Swiper,o=n.Pagination;we()((function(){var n;i.use([o]);var a=Fe()(n=e.element).call(n,".swiper-container")[0];e.swiper=new i(a,{allowTouchMove:!0,loop:!1,pagination:{el:".pagination"},on:{activeIndexChange:function(e){var n,i=t.model.components[e.activeIndex].key;s()(n=t.renderedComponent).call(n,i)>-1||(t.renderedComponent.push(i),t.refreshComponent(i))},init:function(){var e=t.model.components[0].key;t.renderedComponent.push(e),t.refreshComponent(e)}}})}),1e3)})):e.timeout((function(){t.initLazyRender(),t.refreshBoard()}),600)}),1e3):e.timeout((function(){t.initLazyRender(),t.refreshBoard()}),600)})),"pc"===this.client&&(Promise.all([n.e(0),n.e(79)]).then(n.bind(null,"gePK")).then((function(t){var n;e.HcGridLayout=t.HcGridLayout,e.gridLayoutLoaded=!0,(null===(n=e.model)||void 0===n?void 0:n.shouldInitGridLayout)&&e.gridItemLoaded&&e.model.$ctrl&&(e.initGridLayout(),e.model.shouldInitGridLayout=!1)})),Promise.all([n.e(0),n.e(79)]).then(n.bind(null,"IJ6r")).then((function(t){var n;e.HcGridItem=t.HcGridItem,e.gridItemLoaded=!0,(null===(n=e.model)||void 0===n?void 0:n.shouldInitGridLayout)&&e.gridLayoutLoaded&&e.model.$ctrl&&(e.initGridLayout(),e.model.shouldInitGridLayout=!1)}))),"mobile"===this.client&&this.startEventListener(),this.filterDataChange=this.rootScope.$on("filter-data-change",(function(t,n){if(n.key){var i;e.model.setContext(Object(Pt.a)(Object(Pt.a)({},e.model.context),n.context));var o=[];g()(i=e.model.components).call(i,(function(e){e.key!==n.key&&o.push(e.key)})),g()(o).call(o,(function(t){e.model.refreshComponent(t)}))}else e.model.context=Object(Pt.a)(Object(Pt.a)({},e.model.context),n.context),e.model.refreshBoard()}))},e.prototype.$onDestroy=function(){var e;this.delAllInterval(),null===(e=this.renderEngine)||void 0===e||e.unbindScroll(),this.filterDataChange(),this.anchorsTimer&&clearInterval(this.anchorsTimer)},e.prototype.initLazyRender=function(){var e,t,n,i,o=this,a=this;null===(n=null===(t=this.renderEngine)||void 0===t?void 0:t.unbindScroll)||void 0===n||n.call(t),this.renderEngine=new Zn((null===(i=this.model)||void 0===i?void 0:i.lazy_parent)||Fe()(e=this.element).call(e,".hcm-board .lazy-parent"),".hc-board-component-container",this.timeout,(function(e){var t=o.q.defer(),n=e.getAttribute("key");return a.refreshComponent(n).then((function(){t.resolve()})),t.promise}))},e.prototype.setLayoutClient=function(e){e||(e=window.client),this.LAYOUT_CLIENT=e,"mobile"===this.LAYOUT_CLIENT?(this.MARGIN=0,"pc"===window.client&&this.element.addClass("mobile-simulation")):this.element.removeClass("mobile-simulation")},e.prototype.refreshComponent=function(e,t){var n,i,o,a;return void 0===t&&(t=!1),Object(Pt.c)(this,void 0,void 0,(function(){var l,r;return Object(Pt.e)(this,(function(c){var s;switch(c.label){case 0:if(!(null===(n=this.model.component_controllers[e])||void 0===n?void 0:n.$onRender))return[3,7];(l=Fe()(s=this.model.components).call(s,(function(t){return t.key===e}))).isRending=!0,c.label=1;case 1:return c.trys.push([1,6,,7]),(null===(i=this.model.component_controllers[e])||void 0===i?void 0:i.echarts)&&t?[4,null===(o=this.model.component_controllers[e])||void 0===o?void 0:o.$onRender(l.force,!0)]:[3,3];case 2:return c.sent(),[3,5];case 3:return[4,null===(a=this.model.component_controllers[e])||void 0===a?void 0:a.$onRender(l.force)];case 4:c.sent(),c.label=5;case 5:return l.force&&(l.force=!1),l.isRending=!1,[3,7];case 6:return"abort"!==(null==(r=c.sent())?void 0:r.status)?l.isRending=!1:console.log("cancel pre rendering"),[3,7];case 7:return[2]}}))}))},e.prototype.refreshBoard=function(e){var t,n;(void 0===e&&(e=!1),e)&&g()(n=this.model.components).call(n,(function(e){e.force=!0}));null===(t=this.renderEngine)||void 0===t||t.render()},e.prototype.componentRegister=function(e,t){var n;this.model&&(this.model.component_controllers=this.model.component_controllers||{},this.model.component_controllers[e]=t,(null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.auto_refresh)?(this.delInterval(e),this.interval[e]=this.addInterval(e,t.options.refresh_gap?t.options.refresh_gap:18e5)):this.delInterval(e))},e.prototype.addInterval=function(e,t){var n=this;return Jn()((function(){n.refreshComponent(e,!0)}),t)},e.prototype.delInterval=function(e){this.interval[e]&&clearInterval(this.interval[e])},e.prototype.delAllInterval=function(){var e,t=this;w()(e=re()(this.interval)).call(e,(function(e){t.delInterval(e)}))},e.prototype.startResizeDetect=function(){if("mobile"!==this.LAYOUT_CLIENT){var e,t,i=n("7sSR");this.erd=i(),this.erd.listenTo(Fe()(e=this.element).call(e,".hcm-board")[0],a()(t=this.setGRID).call(t,this))}this.setGRID(!0)},e.prototype.setGRID=function(e){var t=this;void 0===e&&(e=!1);var n=this,i=function(){var e,i,o,a,l=(Fe()(e=t.element).call(e,".hcm-board").prop("offsetWidth")-("pc"===t.LAYOUT_CLIENT?20:0))/24;if(t.GRID!==l){t.GRID=l,console.log(t.GRID),t._gridDebounce&&t.timeout.cancel(t._gridDebounce);for(var r=0;r<=(null===(o=null===(i=t.model)||void 0===i?void 0:i.groups)||void 0===o?void 0:o.length);r++)t.scope["gridLayout_"+r]&&(t.scope["gridLayout_"+r].rowHeight=l),null===(a=t.scope["gridLayout_"+r])||void 0===a||a.updateHeight();t._gridDebounce=t.timeout((function(){var e,t;null===(t=n.model)||void 0===t||g()(e=t.components).call(e,(function(e){var t,i,o;n.model&&(null===(t=n.model)||void 0===t?void 0:t.component_controllers)&&n.model.component_controllers[e.key]&&(null===(o=null===(i=n.model.component_controllers[e.key])||void 0===i?void 0:i.$onResize)||void 0===o||o.call(i))}))}),600)}};!0===e?i():this.timeout((function(){i()}))},e.prototype.getPxByPos=function(e,t){return void 0===t&&(t=!1),Math.floor((e-(t?0:1))*(this.GRID+this.MARGIN))-(t?this.MARGIN:0)},e.prototype.getPosByPx=function(e,t){return void 0===t&&(t=!1),this.model.borderContainer?(e+(t?this.MARGIN:0))/(this.GRID+this.MARGIN)+(t?0:1):Math.round((e+(t?this.MARGIN:0))/(this.GRID+this.MARGIN))+(t?0:1)},e.prototype.getPosition=function(e,t){var n,i,o="mobile"!==t?"position":"m_position",a=Object(Pt.f)(null===(i=null===(n=e[o]||"")||void 0===n?void 0:n.split)||void 0===i?void 0:i.call(n,","),4),l=a[0],r=a[1],c=a[2],s=a[3];return{left:l||1,top:r||1,width:c||("pc"===this.LAYOUT_CLIENT?4:24),height:s||("pc"===this.LAYOUT_CLIENT?4:24)}},e.prototype.getPositionStyle=function(e,t,n){var i=this.getPosition(e,n);return"pc"===window.client?{top:this.getPxByPos(i.top)+"px",left:this.getPxByPos(i.left)+"px",width:this.getPxByPos(i.width,!0)+"px",height:"auto"===i.height?"auto":this.getPxByPos(i.height,!0)+"px"}:{height:"auto"===i.height?"auto":this.getPxByPos(i.height,!0)+"px",order:""+i.top,background:"rgba(255,255,255, "+this.model.opacity/100}},e.prototype.getAllComponentStyle=function(e,t,n,i,o){var a,l,r;return te()("pc"===this.LAYOUT_CLIENT?"recruit_index"===this.model.theme?this.getPositionStyle(e,t,n):null===(r=null===(l=null===(a=this.gridItemList)||void 0===a?void 0:a[i])||void 0===l?void 0:l[o])||void 0===r?void 0:r.createStyle():this.getPositionStyle(e,t,n),this.getComponentBackground(e))},e.prototype.getComponentBackground=function(e){return e.board_background_image?te()({"background-image":"url('/img?type=image&index="+e.board_background_image+"')"},e.board_background_style):{}},e.prototype.getContainerHeight=function(e,t,n,i){var o,a,l;return e=e||[],"pc"===n?(null===(a=null===(o=this.scope["gridLayout_"+i])||void 0===o?void 0:o.mergedStyle)||void 0===a?void 0:a.height)+(this.isSetup()||(null===(l=this.model)||void 0===l?void 0:l.has_group)?this.GRID+10:0):this.getMobileContainerHeight()},e.prototype.isSetup=function(){var e,t;return s()(e=["setup","setup_limit"]).call(e,null===(t=this.model)||void 0===t?void 0:t.state)>-1},e.prototype.getMobileContainerHeight=function(){var e,t;return Yn()(e=Object(Pt.h)(Fe()(t=$(".hc-board-container")).call(t,".hc-board-component-container"))).call(e,(function(e,t){var n;return e+M()(r()(n=t.style.height).call(n,0,-2))}),0)},e.prototype.getContainerWidth=function(e,t,n){var i=this;e=e||[];var o=Math.max.apply(Math,Object(Pt.h)(w()(e).call(e,(function(e){return M()(i.getPosition(e,n).left,10)+M()(i.getPosition(e,n).width,10)}))));return"pc"===n?this.isSetup()?null:(o-1)*t:"100%"},e.prototype.changeGroups=function(e){this.current_group=e,this.scrollToView(e)},e.prototype.sholdShowBoard=function(e,t){var n,i,o;return null===(o=null===(i=null===(n=this.gridItemList)||void 0===n?void 0:n[e])||void 0===i?void 0:i[t])||void 0===o?void 0:o.hasInit},e.prototype.setPosition=function(e,t,n){var i=this.getPosition(e,t),o="mobile"!==t?"position":"m_position";for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);e[o]=[i.left||1,i.top||1,i.width||4,i.height||4].join(",")},e.prototype.onResizeEnd=function(e,t){var n=this,i="pc"===this.LAYOUT_CLIENT?n.getPosByPx(t.width,!0):24,o=n.getPosByPx(t.height,!0);this.setPosition(this.model.components[e],this.LAYOUT_CLIENT,{width:i,height:o}),this.timeout((function(){var t,i,o;null===(o=null===(i=null===(t=n.model.component_controllers)||void 0===t?void 0:t[n.model.components[e].key])||void 0===i?void 0:i.$onResize)||void 0===o||o.call(i)}),200)},e.prototype.onDragEnd=function(e,t){var n="pc"===this.LAYOUT_CLIENT?this.getPosByPx(t.left,!1):1,i=this.getPosByPx(t.top,!1);this.setPosition(this.model.components[e],this.LAYOUT_CLIENT,{left:n,top:i})},e.prototype.initGridLayout=function(){var e,t=this,n=this;0===this.model.groups.length?(n.scope.layout_0=[],n.scope.gridLayout_0=new this.HcGridLayout(n.scope.layout_0,this,0),n.gridItemList[0]=[],n.scope.layout_listener_0=n.scope.$watch((function(){return n.scope.layout_0}),(function(e){n.getComponentsPositionFromLayout(e,0)}),!0)):g()(e=this.model.groups).call(e,(function(e,i){var o,a;n.scope["layout_"+i]=w()(o=e.components).call(o,(function(e){var t=n.getPosition(e,"pc");return{x:M()(t.left)-1||0,y:M()(t.top)-1||0,w:M()(t.width)||6,h:M()("auto"===t.height?1:t.height)||6,draggable:!0,resizable:!0,maxY:2,minY:0,i:e.key,is_auto:"auto"===t.height}})),n.scope["gridLayout_"+i]=new t.HcGridLayout(n.scope["layout_"+i],t,i),n.gridItemList[i]=[],g()(a=e.components).call(a,(function(e){n.gridItemList[i].push(new t.HcGridItem(n,n.scope["gridLayout_"+i],e.key))})),n.scope["layout_listener_"+i]=n.scope.$watch((function(){return n.scope["layout_"+i]}),(function(e){n.getComponentsPositionFromLayout(e,i)}),!0)}))},e.prototype.getComponentsPositionFromLayout=function(e,t){var n,i,o=this;null===(i=null===(n=this.model.groups[t])||void 0===n?void 0:n.components)||void 0===i||g()(i).call(i,(function(t,n){if("recruit_index"!==o.model.theme){var i=e[n],a=i.x,l=i.y,r=i.w,c=i.h;c="auto"===o.getPosition(t,"pc").height?"auto":c,t.position=a+1+","+(l+1)+","+r+","+c}}))},e.prototype.addGridLayout=function(e,t){void 0===t&&(t=0);var n=this.getPosition(e,"pc");this.scope["layout_"+t].push({x:Math.max(M()(n.left),1)-1,y:Math.max(M()(n.top),1)-1,w:M()(n.width),h:M()(n.height),draggable:!0,resizable:!0,maxY:2,minY:0,i:e.key});var i=new this.HcGridItem(this,this.scope["gridLayout_"+t],e.key);this.gridItemList[t].push(i),this.scope["gridLayout_"+t].dragEvent("dragmove",e.key,Math.max(M()(n.left),1)-1,Math.max(M()(n.top),1)-1,M()(n.width),M()(n.height)),this.timeout((function(){i.createSetup()}))},e.prototype.gridLayoutSetup=function(){var e;g()(e=this.gridItemList).call(e,(function(e){g()(e).call(e,(function(e){e.createSetup()}))}))},e.prototype.unsetGridLayout=function(){var e,t,n=this;g()(e=this.gridItemList).call(e,(function(e){g()(e).call(e,(function(e){e.destroyed()}))})),g()(t=this.model.groups).call(t,(function(e,t){n.scope["layout_listener_"+t]()}))},e.prototype.scrollToAnchor=function(e,t){var n,i;t.stopPropagation();var o="group"===e.type?Fe()(n=this.element).call(n,".group-title[key="+e.key+"]"):Fe()(i=this.element).call(i,".hc-board-component-container[key="+e.key+"]");if(o){var a,l=function e(t){var n,i,o=t.offsetParent;return s()(n=o.className.split(" ")).call(n,"hcm-board")>-1?t.offsetTop:s()(i=t.className.split(" ")).call(i,"hc-board-component-container")>-1?t.offsetTop+E()(document.defaultView.getComputedStyle(t).transform.substring(7).split(",")[5])+e(t.offsetParent):t.offsetTop+e(t.offsetParent)}(o[0]);Fe()(a=this.element).call(a,".hcm-board").animate({scrollTop:l-16})}},e.prototype.mobileScrollToAnchor=function(e){var t=this;if("group"===e.type){var n,i;this.current_group=Be()(n=this.model.groups).call(n,(function(t){return e.key===t.key})),Fe()(i=this.element).call(i,".hcm-board").animate({scrollTop:0})}else{var o,a,l="";g()(o=this.model.groups).call(o,(function(t){var n;Fe()(n=t.component_list).call(n,(function(t){return t===e.key}))&&(l=t.key)})),this.current_group=Be()(a=this.model.groups).call(a,(function(e){return l===e.key})),this.timeout((function(){var n,i=Fe()(n=t.element).call(n,".hc-board-component-container[key="+e.key+"]");if(i){var o,a=i[0].offsetTop;Fe()(o=t.element).call(o,".hcm-board").animate({scrollTop:a-16})}}))}},e.prototype.closeAnchors=function(){this.model.isShowAnchors=!1},e.prototype.showAnchors=function(){var e=this;"pc"===this.client?this.model.isShowAnchors=!0:this.hcDialog.getDialog(ii).params({data:this.model.anchors}).size("large").slideInConfig("left").show().then((function(t){e.mobileScrollToAnchor(t)}))},e.prototype.anchorsLeave=function(){"fixed"!==this.model.anchor_type&&(this.scope.anchorsLeave=!0)},e.prototype.anchorsEnter=function(){"fixed"!==this.model.anchor_type&&(this.scope.anchorsLeave=!1)},e.prototype.startEventListener=function(){var e=this;document.addEventListener("touchmove",(function(t){var n,i=Fe()(n=e.element).call(n,".anchor-icon")[0];if(i){i.style.animation="anchor-btn-in 0.5s ease-in-out",i.style.right="0",i.style.opacity=1,clearTimeout(o);var o=we()((function(){i.style.animation="anchor-btn-out 0.5s ease-in-out",i.style.right="-30px",i.style.opacity=.6}),4e3)}}),!1)},e.$inject=["$scope","$element","$hcDialog","$timeout","$state","$q","$rootScope"],e}();O.a.service("$hcBoard",ai),O.a.component("hcmBoard",{bindings:{model:"<"},controller:li,template:Qn.a});var ri=n("x1GB"),ci=n.n(ri),si=n("jfXt"),di=n.n(si),ui=(n("XFaL"),n("MzvF"),n("xqd/")),_i=n.n(ui),pi=(n("8+dF"),function(){function e(e,t){this.hcImageService=e,this.$filter=t}return e.prototype.$onInit=function(){var e=this;this.uploadCallBack=function(t){var n;console.log(null==e?void 0:e.options),e.hcImageService.uploadImg(t,(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.params)||{}).then((function(t){var n,i,o,a;(null===(i=null===(n=e.options)||void 0===n?void 0:n.action)||void 0===i?void 0:i.func)&&(null===(a=null===(o=e.options)||void 0===o?void 0:o.action)||void 0===a||a.func(e.formData,e.field,t))}))}},e.prototype.getFieldContent=function(e){return this.$filter("infoDefault")(this.$filter("hcListCellData")(this.formData,e))},e.$inject=["hcImageService","$filter"],e}());window.app.component("hcViewCustomField",{bindings:{model:"=ngModel",options:"<?",field:"<?",formData:"<?"},controller:pi,template:_i.a});var mi=n("t4GA"),fi=n.n(mi);n("EBkj"),n("w3b1");window.app.directive("hcSmartCard",["$compile",function(e){return{restrict:"E",replace:!0,scope:{meta:"<",data:"<",columnsMetas:"<",onItemClick:"<?"},template:fi.a,link:function(e,t){},controller:["$scope","$filter",function(e,t){e.init=function(){var n;e.meta.multi_image&&(e.multi_image_data={data:t("hcListCellData")(e.data,e.columnsMetas[e.meta.multi_image]),options:te()({readOnly:!0,not_download:!0,hide_name:!0},e.meta.options||{})}),e.meta.markdown&&(e.markdown_data=t("hcListCellData")(e.data,e.columnsMetas[e.meta.markdown])),e.meta.pdf_preview&&(e.pdf_preview_data=t("hcListCellData")(e.data,e.columnsMetas[e.meta.pdf_preview])),e.meta.slider&&(e.slider_data={data:t("hcListCellData")(e.data,e.columnsMetas[e.meta.slider]),options:te()({readOnly:!0},e.meta.options||{})}),e.meta.field&&(null===(n=e.meta.options)||void 0===n?void 0:n.form)&&(e.options=function e(t,n){var i,o={};return g()(i=re()(t)).call(i,(function(i){if("object"!==f()(t[i])||null===t[i]||q()(t[i]))if("function"==typeof t[i]){var l;o[i]=a()(l=t[i]).call(l,n)}else o[i]=t[i];else o[i]=e(t[i],n)})),o}(e.columnsMetas[e.meta.field].modi.options,e.data))},e.$watch("columnsMetas",(function(t,n){void 0!==n&&e.init()}),!0),e.$watch("data",(function(n,i){e.meta.multi_image&&(e.multi_image_data.data=t("hcListCellData")(n,e.columnsMetas[e.meta.multi_image])),e.meta.markdown&&(e.markdown_data=t("hcListCellData")(n,e.columnsMetas[e.meta.markdown])),e.meta.pdf_preview&&(e.pdf_preview_data=t("hcListCellData")(n,e.columnsMetas[e.meta.pdf_preview])),e.meta.slider&&(e.slider_data={data:t("hcListCellData")(e.data,e.columnsMetas[e.meta.slider]),options:te()({readOnly:!0},e.meta.options||{})})})),e.classFunc=function(n,i){return t("valueToFunc")(e.meta["ng-class"])(n,e.columnsMetas[i.field])+" "+i.class}}]}}]);var hi=function(){function e(e,t,n,i,o){var l,r=this;this.$filter=e,this.$rootScope=t,this.$compile=n,this.$scope=i,this.$element=o,this.enableShadow=!1,this.shadowState=!0,this.show_more_data=!1,this.onTabsValueChange=function(e){r.model.$setCurrentTab(e)},this.smartCardClick=a()(l=this._smartCardClick).call(l,this)}return e.prototype.$onInit=function(){var e=this;this.client=window.client,this.$scope.$watch("$ctrl.model",(function(t,n){t&&(t.$element||(t.$element=e.$element))}))},e.prototype.toggleShadow=function(){this.shadowState=!this.shadowState},e.prototype.showMore=function(){this.show_more_data=!this.show_more_data},e.prototype.isDirty=function(e,t){return t=t||this.model.dirty,this.$filter("hasJSON")(e.field,t)},e.prototype.getFieldContent=function(e){var t,n;return(null===(t=this.model.viewMeta.view_config)||void 0===t?void 0:t.enableShadow)&&!0===this.shadowState&&(null===(n=e.options)||void 0===n?void 0:n.useShadow)?"******":this.isDirty(e)?this.$filter("infoDefault")(this.$filter("hcListCellData")(this.model.dirty,e)):this.$filter("infoDefault")(this.$filter("hcListCellData")(this.model.data,e))},e.prototype.allFieldHide=function(e){var t,n=this;return ci()(t=e.fields).call(t,(function(e){return n.$filter("valueToFunc")(e.hide)()}))},e.prototype.setFieldModify=function(e,t){var n,i,o;return Object(Pt.c)(this,void 0,void 0,(function(){var a,l,r=this;return Object(Pt.e)(this,(function(c){var s;switch(c.label){case 0:return"function"!=typeof this.model.modiFieldBefore?[3,2]:[4,this.model.modiFieldBefore(e)];case 1:if(!c.sent())return[2];c.label=2;case 2:if(this.current_modi_component&&(this.current_modi_component.$destroy(),this.current_modi_component=null,this.model.current_modi_component=null),!e.modi)return[2];var d,u;if((a=this.$rootScope.$new()).modi_meta=(null===(n=this.model.modi_field_metas)||void 0===n?void 0:n[e.key])||(null===(o=null===(i=this.model.field_metas)||void 0===i?void 0:i[e.key])||void 0===o?void 0:o.modi),a.component=a.modi_meta.component,a.options=a.modi_meta.options,this.$filter("setJSON")("options.customBlur",a.modi_meta,(function(){a.confirmModify()})),a.getData=function(){return a.modi_meta.getter?a.modi_meta.getter(r.model.data,r.model.dirty):r.$filter("hasJSON")(a.modi_meta.origin_field||e.field,r.model.dirty)?r.$filter("getJSON")(a.modi_meta.origin_field||e.field,r.model.dirty):r.$filter("getJSON")(a.modi_meta.origin_field||e.field,r.model.data)},a.setData=function(t){return Object(Pt.c)(r,void 0,void 0,(function(){var n;return Object(Pt.e)(this,(function(i){var o;switch(i.label){case 0:if(a.modi_meta.setter)return[2,a.modi_meta.setter(this.model.dirty,t)];this.$filter("setJSON")(a.modi_meta.origin_field||e.field,this.model.dirty,ae()(o=[void 0,null]).call(o,t)?null:t),a.modi_meta.relation_field&&this.$filter("setJSON")(a.modi_meta.relation_field,this.model.dirty,a.modi_meta.options.originObject||{name:null}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.model.dealModiRelation(a.modi_meta.key)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),console.log(n),[3,4];case 4:return a.o_data=angular.copy(a.data),[2,!1]}}))}))},a.$destroy=function(){return Object(Pt.c)(r,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return[4,a.confirmModify()];case 1:return e.sent(),document.removeEventListener("mousedown",a.confirmModify),a.cancel_listener(),[2]}}))}))},a.data=a.getData(),a.o_data=angular.copy(a.data),l=this.$compile('<hc-form-component\n                                ng-keyup="componentKeyListen($event)"\n                                ng-blur="confirmModify()"\n                                component=\'{{component}}\'\n                                options="options"\n                                ng-disabled="false"\n                                ng-model="data"\n                            ></hc-form-component>')(a),a.element=l,a.confirmModify=function(){return Object(Pt.c)(r,void 0,void 0,(function(){var e,t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:if(a.is_destroy)return[2];if(a.o_data===a.data)return[3,2];if(null===(t=a.options)||void 0===t?void 0:t.xss_protect){if(null==(e=this.$filter("securityFilter")(a.data)))return this.$rootScope.show_warning("非法脚本注入，请重新输入","warning"),a.data=a.o_data,[2];a.data=this.$filter("xss_filter")(e)}return[4,a.setData(a.data)];case 1:n.sent(),n.label=2;case 2:return a.element.remove(),this.current_modi_component=null,this.model.current_modi_component=null,[2]}}))}))},a.cancelModify=function(){a.is_destroy=!0,a.element.remove(),r.current_modi_component=null,r.model.current_modi_component=null,document.removeEventListener("mousedown",a.confirmModify),a.cancel_listener()},a.componentKeyListen=function(e){var t=window.event?e.keyCode:e.which;13===t?(a.confirmModify(),e.stopPropagation()):27===t&&(a.cancelModify(),e.stopPropagation())},this.current_modi_component=this.model.current_modi_component=a,angular.element(t.currentTarget).closest(".hc-form-control").append(l),Fe()(s=a.element).call(s,".component-input-inner").focus(),"pc"===window.client&&"hc-input"===a.component)Fe()(d=a.element).call(d,"input.component-input-inner").on("mousedown",(function(e){null==e||e.stopPropagation()})),document.addEventListener("mousedown",a.confirmModify);else Fe()(u=a.element).call(u,"input.component-input-inner").on("click",(function(e){null==e||e.stopPropagation()})),a.cancel_listener=a.$on("win_body_click_event",(function(){a.confirmModify()}));return t.stopPropagation(),[2]}}))}))},e.prototype.fieldClick=function(e,t,n){var i,o,a,l;if("modify"===this.model.state){if(this.current_modi_component&&(null===(i=this.current_modi_component.modi_meta)||void 0===i?void 0:i.key)===t.key)return;return null==n||n.stopPropagation(),this.setFieldModify(t,n)}if(this.current_modi_component&&(null===(o=this.current_modi_component.modi_meta)||void 0===o?void 0:o.key)!==t.key&&(this.current_modi_component.$destroy(),this.current_modi_component=null,this.model.current_modi_component=null),"function"==typeof t.func||t.action)return null==n||n.stopPropagation(),t.action?null===(l=(a=this.model).action_func)||void 0===l?void 0:l.call(a,t.action):t.func(e,t,n)},e.prototype._smartCardClick=function(e,t,n){var i,o;if("function"==typeof(null==n?void 0:n.func)||(null==n?void 0:n.action))return null==e||e.stopPropagation(),n.action?null===(o=(i=this.model).action_func)||void 0===o?void 0:o.call(i,n.action,t,n):n.func(t,n,e)},e.$inject=["$filter","$rootScope","$compile","$scope","$element"],e}();O.a.component("hcView",{bindings:{model:"="},controller:hi,template:di.a});var gi=n("JW37"),vi=n.n(gi),bi=n("zQQR"),yi=n.n(bi),wi=function(e){this.enableShadow=!1,this.alwaysShowLabel=!1,this.diffDirty=!1,this.diffOptions={},te()(this,e)},xi=function(e){this.view_config=new wi,e&&(te()(this,e),this.view_config=new wi(this.view_config))},ki=n("1GJp"),$i=n("bQgN"),Oi={tag:"hc-tag","simple-chart":"hc-simple-chart","internal-code":"recruit-internal-code","train-learn":"session-base","code-train":"train-code","recruit-job":"hc-recruit-job-view","recruit-job-label":"recruit-job-label"},Di=function(){function e(e,t,n){var i=this;this.$rootScope=e,this.$compile=t,this.$filter=n,this.viewMeta={},this.data={},this.dirty={},this.current_modi_component=null,this.state=null,this.modiMeta=[],this.field_metas={},this.CRUDService=null,this.$setCurrentTab=function(e){return i.currentTab=e,i},this.$switchModiMode=function(e){return Object(Pt.c)(i,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return"modify"!==this.state||"modify"===e?[3,2]:[4,null===(t=this.current_modi_component)||void 0===t?void 0:t.$destroy()];case 1:return n.sent(),this.current_modi_component=null,this.dirty={},this.state=null,[3,3];case 2:this.state="modify",n.label=3;case 3:return[2]}}))}))},this.$setDirty=function(e){return void 0===e&&(e={}),i.dirty=e,i},this.$setActionFunc=function(e){return i.action_func=e,i},this.getDirty=function(e){return Object(Pt.c)(i,void 0,void 0,(function(){var t,n,i,o,a,l=this;return Object(Pt.e)(this,(function(r){if(t=this,n=this.dirty,!e&&(this.valid_error_key=null,!0!==(i=this.$validData())))throw this.valid_error_key=i.key,null===(a=null===(o=this.$element)||void 0===o?void 0:Fe()(o).call(o,".hc-view"))||void 0===a||a.addClass("form-notify"),we()((function(){var e,n;null===(n=null===(e=t.$element)||void 0===e?void 0:Fe()(e).call(e,".hc-view"))||void 0===n||n.removeClass("form-notify")}),3e3),we()((function(){var e,t;null===(t=null===(e=l.$element)||void 0===e?void 0:Fe()(e).call(e,".hc-view .hc-form-field[key='"+l.valid_error_key+"']")[0])||void 0===t||t.scrollIntoView({behavior:"smooth"})})),this.$rootScope.show_warning(i.msg),new Error("数据校验失败");return[2,n]}))}))},this.setDirty=function(e){return i.dirty=e,i},this.$resetModify=function(){var e;return null===(e=i.current_modi_component)||void 0===e||e.$destroy(),i.current_modi_component=null,i.dirty={},i.state=null,i},this.$validData=function(){var e,t=[];g()(e=i.viewMeta.fields).call(e,(function(e){if(e.modi)if(!0===e.modi||e.modi.key){var n,o=Fe()(n=i.modiMeta).call(n,(function(t){return t.key===(!0===e.modi?e.key:e.modi.key)}));t.push(te()({},o||{},!0===e.modi?{}:e.modi))}else t.push(e.modi)}));var n=angular.extend({},i.data,i.dirty||{}),o=i.$filter("validData")(t,n);return o||!0},this.dealModiRelation=function(e){return Object(Pt.c)(i,void 0,void 0,(function(){var t,n,i,o,a,l,r;return Object(Pt.e)(this,(function(c){var s;switch(c.label){case 0:return t=Fe()(s=this.modiFormRelation||[]).call(s,(function(t){return t.key===e})),(null==(n=(null===(a=null===(o=null===(i=this.field_metas[e])||void 0===i?void 0:i.modi)||void 0===o?void 0:o.value_onchange)||void 0===a?void 0:a.length)?null===(r=null===(l=this.field_metas[e])||void 0===l?void 0:l.modi)||void 0===r?void 0:r.value_onchange:(null==t?void 0:t.value_onchange)||[])?void 0:n.length)?[4,this.$execute(e,n)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}}))}))},this.dealForceChangeRelation=function(){return Object(Pt.c)(i,void 0,void 0,(function(){var e,t,n=this;return Object(Pt.e)(this,(function(i){return this.modiFormRelation?(null===(t=null===(e=this.viewMeta)||void 0===e?void 0:e.fields)||void 0===t||g()(t).call(t,(function(e){var t,i,o,a,l,r,c,s;if(n.$filter("isValidValue")(null===(o=n.data)||void 0===o?void 0:o[e.key])){var d=e.key,u=Fe()(t=n.modiFormRelation||[]).call(t,(function(e){return e.key===d})),_=Pe()(i=(null===(r=null===(l=null===(a=n.field_metas[d])||void 0===a?void 0:a.modi)||void 0===l?void 0:l.value_onchange)||void 0===r?void 0:r.length)?null===(s=null===(c=n.field_metas[d])||void 0===c?void 0:c.modi)||void 0===s?void 0:s.value_onchange:(null==u?void 0:u.value_onchange)||[]).call(i,(function(e){return e.force_change}));(null==_?void 0:_.length)&&n.$execute(d,_)}})),[2]):[2]}))}))},this.$execute=function(e,t){return Object(Pt.c)(i,void 0,void 0,(function(){var n,i,o,a,l=this;return Object(Pt.e)(this,(function(r){switch(r.label){case 0:return[4,null===(a=this.CRUDService)||void 0===a?void 0:a.getInfoChange(e,angular.extend({},this.data,this.dirty||{}),this.viewMeta.modi_state,{},[{key:e,value_onchange:t}])];case 1:return n=r.sent(),i=re()(n),t&&(o=[],w()(t).call(t,(function(e){o.push(e.key)})),i=o),w()(i).call(i,(function(e){var t;"child"===e?w()(t=re()(n.child||{})).call(t,(function(e){})):angular.equals(l.$filter("getJSON")(e,angular.extend({},l.data,l.dirty||{})),l.$filter("getJSON")(e,n))||(l.$filter("setJSON")(e,l.dirty,n[e]),l.dealModiRelation(e),l.simulateModiComponent(e,n[e]))})),[2]}}))}))},this.simulateModiComponent=function(e,t){var n,o,a=Fe()(n=i.modiMeta).call(n,(function(t){return t.key===e})),l=i.field_metas[e],c=te()({},!0===l?{}:l,a||{});if("_id"===r()(e).call(e,-3)&&ae()(o=["hc-super-selector","hc-tree-list-selector","hc-category-list-selector","hc-standard-tree-selector","hc-compose-selector"]).call(o,c.component)){var s=i.$rootScope.$new();s.data=t,c.options=new Proxy(c.options,{set:function(t,n,o){return"originObject"===n&&(i.$filter("setJSON")(c.relation_field||r()(e).call(e,0,-3),i.dirty,o),s.$destroy()),yi()(t,n,o)}}),s.modi_meta=c,i.$compile('<hc-form-component\n                component=\'{{modi_meta.component}}\'\n                options="modi_meta.options"\n                ng-disabled="false"\n                ng-model="data"\n            ></hc-form-component>')(s)}},this.$setModiFieldBefore=function(e){return i.modiFieldBefore=e,i},this.$rootScope=e,this.$compile=t,this.$filter=n,this.$CodeEditorDialog=ki.a}return e.prototype.setViewMeta=function(e){return this.viewMeta=new xi(e),this.modelName=e.model,this.$setMeta(e.fields,e.groups),this},e.prototype.$setMeta=function(e,t){var n,i;return this.$setFields(e),this.viewMeta.groups=this.parseFormMeta(this.viewMeta.fields,t),this.$setCurrentTab(null===(i=null===(n=this.viewMeta.groups)||void 0===n?void 0:n[0])||void 0===i?void 0:i.key),this},e.prototype.$setModiMeta=function(e){var t=this;this.modi_field_metas={};var n,i,o;n=this.viewMeta.fields,i=e,o=this.modi_field_metas,void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===o&&(o={}),g()(n).call(n,(function(e){e.modi&&(!0===e.modi?o[e.key]=Fe()(i).call(i,(function(t){return t.key===e.key})):o[e.key]=t.$filter("deepMerge")(Fe()(i).call(i,(function(t){return t.key===e.key}))||{},e.modi))})),this.modiMeta=e},e.prototype.$setModiRelation=function(e,t){return this.modiFormRelation=e,this.CRUDService=t,this},e.prototype.$setGroups=function(e){var t,n;return this.viewMeta.groups=this.parseFormMeta(this.viewMeta.fields,e),this.$setCurrentTab(null===(n=null===(t=this.viewMeta.groups)||void 0===t?void 0:t[0])||void 0===n?void 0:n.key),this},e.prototype.$setFields=function(e){var t,n,i=this;return this.viewMeta.fields=w()(e).call(e,(function(e){try{if(e.type&&$i.a.isLazyComponent(Oi[e.type]||e.type)&&(e.lazyLoadingComponent=!0,$i.a.loadComponent(Oi[e.type]||e.type,!0).then((function(){e.lazyLoadingComponent=!1}))),/_index$/.test(e.key)&&!e.type||e.type)return new Proxy(e,{set:function(t,n,o){var a;return"current"===n?(i.$filter("setJSON")(e.field,i.dirty,o),a=!0,i.dealModiRelation.call(i,e.key)):a=yi()(t,n,o),a},get:function(t,n){return"current"===n?i.$filter("hcListCellData")(i.$filter("hasJSON")(e.field,i.dirty)?i.dirty:i.data,e):vi()(t,n)}})}catch(e){console.log(e)}return e})),this.field_metas=Yn()(e).call(e,(function(e,t){return e[t.key]=t,e}),this.field_metas),this.viewMeta.groups=this.parseFormMeta(e,this.viewMeta.groups),this.$setCurrentTab(null===(n=null===(t=this.viewMeta.groups)||void 0===t?void 0:t[0])||void 0===n?void 0:n.key),this},e.prototype.$setData=function(e){return this.data=this.$filter("securityFilter")(e,this.field_metas),this},e.prototype.parseFormMeta=function(e,t){void 0===t&&(t=[]),g()(e).call(e,(function(e){(/_index$/.test(e.key)&&!e.type||"file"===e.type)&&(e.width=e.width||"col-12",e.type="file",e.options=angular.extend({readOnly:!0},e.options||{})),"textarea"===e.type&&(e.options=angular.extend({readOnly:!0},e.options||{}))})),g()(t).call(t,(function(t){var n,i=t.field_list||[];t.field_list=[],t.fields=[];var o=[];g()(i).call(i,(function(e){e instanceof Array?t.field_list.push(e):o.push(e)})),g()(n=t.field_list).call(n,(function(n){g()(e).call(e,(function(e){ae()(n).call(n,e.key)&&(e.is_added=!0,e.options=e.options||{},t.fields.push(e))})),"mobile"===window.client&&t.fields[t.fields.length-1]&&(t.fields[t.fields.length-1].options.split=!0)})),g()(o).call(o,(function(n){g()(e).call(e,(function(e){n===e.key&&(e.is_added=!0,t.fields.push(e))}))})),t.field_list.push(o)}));var n=Pe()(e).call(e,(function(e){return!e.is_added}));if(n.length>0){var i=Pe()(t).call(t,(function(e){return 0===e.field_list.length}));i.length>0?i[0].fields=n:t.push({fields:n,field_list:w()(n).call(n,(function(e){return e.key}))})}return t},e}(),Ci=function(){function e(e,t,n){this.$rootScope=e,this.$compile=t,this.$filter=n}return e.prototype.createView=function(){return new Di(this.$rootScope,this.$compile,this.$filter)},e.$inject=["$rootScope","$compile","$filter"],e}();O.a.service("$hcView",Ci);n("vDQd"),n("TzQ/");var Mi=n("K+Sp"),Si=n.n(Mi),Ei=(n("SsLQ"),n("at3h")),Pi=n.n(Ei),ji=function(){function e(e){var t,n;this.$scope=e,this.panes=[],this.panes=this.$scope.params.panes,this.onTabsValueChange=function(t){e.$dialog.resolve_data(t),e.$dialog.dialog_close()},this.value=null===(n=Fe()(t=this.panes).call(t,(function(e){return!0===e.selected})))||void 0===n?void 0:n.name}return e.$inject=["$scope"],e}();window.app.controller("HcTabsAll",ji);var Ti={controller:"HcTabsAll",template:Pi.a,name:"hc-tabs-all",maskClose:!0},Ai=n("Ip76"),Ii=n("LNhG");Ai.default.use(Ii.default);var Li=function(){function e(e,t,n,i,o){this.$scope=e,this.$element=t,this.hcTabsService=n,this.$timeout=i,this.$hcDialog=o,this._client=window.client,this._panes=[],this._panes_outside=[],this._panes_overflow=!1}return e.prototype.$onInit=function(){var e=this;"pc"===window.client?this.initMouseWheel():this.initBetterScroll(),this.$scope.$watch("$ctrl.value",(function(t,n){t!==n&&e.onValueChange(e.value)}))},e.prototype.showDropdownListDialog=function(e){var t,n=this;e.stopPropagation();var i=angular.element(".show-more");this._panes_outside=this.hcTabsService.getMorePanes(this,this._panes),this.$hcDialog.dropdownList(w()(t=this._panes_outside).call(t,(function(e){return{id:e.name,name:e.label,count:e.countNum,divider:e.last_left_pane}})),null,i,{styles:{left:"auto",boxShadow:"1px 1px 5px 2px rgba(0, 0, 0, 0.1)"},dialogOptions:{calculateDirection:window.innerWidth-i.offset().left-i[0].offsetWidth<50?"right":"left"}}).then((function(e){n.value=e.id,n.onValueChange(n.value),n._scrollIntoView()}))},e.prototype.previousTab=function(e){var t;null==e||e.stopPropagation();var n=this,i=Be()(t=this._panes).call(t,(function(e){return e.name===n.value}));return!(i<=0)&&(this.value=this._panes[i-1].name,this.onValueChange(this.value),this._scrollIntoView(),!0)},e.prototype.nextTab=function(e){var t;null==e||e.stopPropagation();var n=this,i=Be()(t=this._panes).call(t,(function(e){return e.name===n.value}));return!(i>=this._panes.length-1)&&(this.value=this._panes[i+1].name,this.onValueChange(this.value),this._scrollIntoView(),!0)},e.prototype.checkBorder=function(e){var t,n=this,i=Be()(t=this._panes).call(t,(function(e){return e.name===n.value}));return"left"===e?i<=0:i>=this._panes.length-1},e.prototype.showAllTabs=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return e=this,[4,this.$hcDialog.getDialog(Ti).params({panes:this._panes}).size("middle").slideInConfig("right",!0).show()];case 1:return e.value=t.sent(),this._scrollIntoView(),[2]}}))}))},e.prototype._scrollIntoView=function(){var e,t,n,i,o,a,l=this;if("pc"===window.client){var r;null===(e=Fe()(r=this._panes).call(r,(function(e){return e.name===l.value})))||void 0===e||e.$element[0].scrollIntoView({behavior:"smooth"})}else{var c,s,d=null===(t=Fe()(c=this._panes).call(c,(function(e){return e.name===l.value})))||void 0===t?void 0:t.$element[0],u=-(null==d?void 0:d.offsetLeft)+Fe()(s=this.$element).call(s,"#container")[0].offsetWidth/2-(null==d?void 0:d.offsetWidth)/2,_=-(null===(i=null===(n=this._panes[0])||void 0===n?void 0:n.$element[0])||void 0===i?void 0:i.offsetLeft);null===(o=this._bs)||void 0===o||o.scrollTo(Math.max(null===(a=this._bs)||void 0===a?void 0:a.maxScrollX,Math.min(_,u)),0)}},e.prototype.addElement=function(e){this._panes.push(e),this._panes_overflow=this.hcTabsService.tabsContentOverflow(this)&&!this.disableShowMore,this.disableScrollIntoView},e.prototype.deleteElement=function(e){var t,n;b()(t=this._panes).call(t,s()(n=this._panes).call(n,e),1)},e.prototype.initBetterScroll=function(){var e=this,t={probeType:2,scrollbar:!1,mouseWheel:!0,bounce:!0,freeScroll:!0,click:!0,bindToWrapper:!0,scrollX:!0,scrollY:!0,observeDOM:!0};we()((function(){var n;e._bs=new Ai.default(Fe()(n=e.$element).call(n,"#container")[0],t)}))},e.prototype.initMouseWheel=function(){var e=this;we()((function(){var t=e.$element.children("nav").children("#container")[0];t.addEventListener("mousewheel",(function(e){e.preventDefault(),t.scrollLeft+=-e.wheelDelta/2}),!1)}))},e.$inject=["$scope","$element","HcTabsService","$timeout","$hcDialog"],e}();O.a.component("hcTabs",{bindings:{value:"<",onValueChange:"<",disableShowMore:"<",disableScrollIntoView:"<",stepChange:"<"},transclude:!0,controller:Li,template:Si.a});var Fi=n("dHaU"),Ri=n.n(Fi),Bi=(n("l+1+"),n("Oipv"),n("pgDz")),Ui=n.n(Bi),qi=function(){function e(e,t,n,i,o){var a=this;this.$scope=e,this.$element=t,this.hcTabsService=n,this.$timeout=i,this.$hcDialog=o,this.client=window.client,this.showDropdown=function(e){e.stopPropagation(),a.$hcDialog.dropdownList(a.children,a.selectedChild,"pc"===window.client?angular.element(e.target).closest("hc-tab-pane"):null,{dialogOptions:{title:"pc"===window.client?null:"请选择",size:"pc"===window.client?"":"bottom-dialog-50"}}).then((function(e){var t=e.id||e.key;a.tabs.value="all"===t?a.name:t}))}}return e.prototype.$onInit=function(){var e,t=this;this._setCountNum(),this.$timeout((function(){t.tabs.addElement(t)})),this.selected=this.isSelected(),this.$scope.$watch("$ctrl.tabs.value",(function(e,n,i){var o;t.selected=t.isSelected(),t.subTabPane=t.getSelectedChild()||(null===(o=t.children)||void 0===o?void 0:Fe()(o).call(o,(function(e){return e.default})))})),this.subTabPane=this.getSelectedChild()||(null===(e=this.children)||void 0===e?void 0:Fe()(e).call(e,(function(e){return e.default}))),this.$scope.$watch("$ctrl.children",(function(){var e;t._setCountNum(),t.subTabPane=t.getSelectedChild()||(null===(e=t.children)||void 0===e?void 0:Fe()(e).call(e,(function(e){return e.default})))}),!0),"mobile"===this.client&&this.$element.css("min-height","63px"),this.$timeout((function(){"mobile"===t.client&&t.$element.css("min-height","62px")}))},e.prototype.isSelected=function(){return this.getSelectedChild()||Ri()(this.name,this.tabs.value)},e.prototype.getSelectedChild=function(){var e,t,n,i,o,a=this;return this.children&&!(null===(t=this.children)||void 0===t?void 0:Fe()(t).call(t,(function(e){return"all"===e.id})))&&!this.visualParentTab&&this.children.unshift({name:"全部",id:"all",count:this.countNum}),this.selectedChild=Ri()(this.name,this.tabs.value)&&(null===(n=this.children)||void 0===n?void 0:n.length)?{name:"全部",id:"all",count:this.countNum}:null!==(i=Fe()(e=this.children||[]).call(e,(function(e){return e.id===a.tabs.value||e.key===a.tabs.value})))&&void 0!==i?i:null===(o=this.children)||void 0===o?void 0:Yn()(o).call(o,(function(e,t){var n,i;return t.children&&t.children.length>1?Fe()(n=t.children).call(n,(function(e){return e.id===a.tabs.value||e.key===a.tabs.value})):t.list&&t.list.length>1?Fe()(i=t.list).call(i,(function(e){return e.id===a.tabs.value||e.key===a.tabs.value})):e}),void 0),this.selectedChild},e.prototype._setCountNum=function(){var e=this;"object"===f()(this.count)?this.count.then((function(t){return e.countNum=t})):"function"==typeof this.count?this.countNum=this.count():this.countNum=this.count},e.prototype.onClick=function(e){var t,n;if(null===(t=this.children)||void 0===t?void 0:t.length){if(2===(null===(n=this.children)||void 0===n?void 0:n.length)&&!this.visualParentTab){var i=this.children[1].id;return void(this.tabs.value="all"===i?this.name:i)}this.showDropdown(e)}else this.tabs.value=this.name,this.$element[0].scrollIntoView({behavior:"smooth",block:"nearest"})},e.prototype.$onChanges=function(e){for(var t in e)"count"===t&&this._setCountNum(),"children"===t&&this.getSelectedChild()},e.prototype.$onDestroy=function(){this.tabs.deleteElement(this)},e.$inject=["$scope","$element","HcTabsService","$timeout","$hcDialog"],e}();O.a.component("hcTabPane",{bindings:{label:"<",name:"<",icon:"<",count:"<",hideCount:"<",children:"<",isSelectedNewStyle:"<",isSelectedAnimateStyle:"<",isMultiLevel:"<",visualParentTab:"<",isMultiLevelSingleLine:"<"},require:{tabs:"^hcTabs"},controller:qi,template:Ui.a});var Wi=function(){function e(){}return e.prototype.getMorePanes=function(e,t){var n,i=e.$element.width(),o=e.$element.offset().left,a=-1,l=Pe()(n=w()(t).call(t,(function(e,t){var n=e.$element.offset().left-o,l=n+e.$element.width();return n<0?(a=t,e):l>i?e:void 0}))).call(n,(function(e){return e})),r=Fe()(l).call(l,(function(e){return!0===e.last_left_pane}));return r&&(r.last_left_pane=!1),a>0&&a+1!==l.length&&(l[a].last_left_pane=!0),l},e.prototype.tabsContentOverflow=function(e){var t=e.$element.children("nav").children("#container")[0];return t.scrollWidth>t.clientWidth},e}();O.a.service("HcTabsService",Wi);var zi=n("BkRI"),Ni=n.n(zi),Ki=n("PogQ"),Hi=n.n(Ki),Vi=(n("GhQA"),function(){function e(e,t,n,i){var o=this;this._panes_overflow=!1,this._panes_outside=[],this.step_max_width=0,this.calcPanesOverflow=function(){o._panes_overflow=o.stepsContentOverflow()},this.element=e,this.timeout=t,this.scope=n,this.$hcDialog=i}return e.prototype.$onInit=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e=this;return Object(Pt.e)(this,(function(t){return this.initStepWidth(),this.timeout((function(){var t;e.calcPanesOverflow(),e.scope.$watch((function(){return e.model.timestamp}),(function(t,n){t!==n&&e.timeout((function(){e.initStepWidth(),e.calcPanesOverflow()}))}));Fe()(t=e.element).call(t,".hc-steps-container")[0]})),[2]}))}))},e.prototype.initStepWidth=function(){this.model.stepsLength&&(this.step_max_width=100/this.model.stepsLength)},e.prototype.stepClick=function(e,t,n){var i,o,a,l;return Object(Pt.c)(this,void 0,void 0,(function(){var r;return Object(Pt.e)(this,(function(c){switch(c.label){case 0:return null==n||n.stopPropagation(),r=Ni()(t),[4,null===(o=(i=this.model).validator)||void 0===o?void 0:o.call(i,r,e)];case 1:return!1===c.sent()?[2,!1]:(this.model.setCurrent(e),null===(l=(a=this.model).callback)||void 0===l||l.call(a,r,e),[2])}}))}))},e.prototype.stepsContentOverflow=function(){var e,t=Fe()(e=this.element).call(e,".hc-steps-container")[0];return t.scrollWidth>t.clientWidth},e.prototype.showDropDownListDialog=function(e){var t,n=this;e.stopPropagation();var i=angular.element(".show-more");this._panes_outside=this.getMorePanes(),this.$hcDialog.dropdownList(w()(t=this._panes_outside).call(t,(function(e){return{key:e.key,name:e.title,element:e.element}})),null,i,{styles:{left:"auto",boxShadow:"1px 1px 5px 2px rgba(0, 0, 0, 0.1)"},dialogOptions:{calculateDirection:window.innerWidth-i.offset().left-i[0].offsetWidth<50?"right":"left"}}).then((function(e){return Object(Pt.c)(n,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){var i;switch(n.label){case 0:return-1===(t=Be()(i=this.model.meta).call(i,(function(t){return t.key===e.key})))?[2]:[4,this.stepClick(t,this.model.meta[t])];case 1:return!1===n.sent()||e.element.scrollIntoView({behavior:"smooth"}),[2]}}))}))}))},e.prototype.getMorePanes=function(){var e,t,n=Fe()(e=this.element).call(e,".hc-steps-container")[0],i=Fe()(t=this.element).call(t,"hc-step"),o=n.clientWidth;this.last_left_index=-1;for(var a=[],l=0;l<i.length;l++){var r=i[l].offsetLeft-n.scrollLeft,c=r+i[l].clientWidth;r+.4*i[l].clientWidth<0?(this.last_left_index=l,a.push({key:i[l].getAttribute("step-key"),title:i[l].getAttribute("step-title"),element:i[l]})):c-.6*i[l].clientWidth>o&&a.push({key:i[l].getAttribute("step-key"),title:i[l].getAttribute("step-title"),element:i[l]})}return a},e.$inject=["$element","$timeout","$scope","$hcDialog"],e}());window.app.component("hcSteps",{template:Hi.a,controller:Vi,bindings:{model:"=?"},transclude:!0});var Yi=n("ciwT"),Gi=n.n(Yi),Ji=(n("Qbpc"),function(){});window.app.component("hcStep",{template:Gi.a,controller:Ji,bindings:{title:"@",subTitle:"@",stepAttachment:"@",description:"@",icon:"@",status:"<?",disabeld:"<?",index:"<?",progressDot:"<?"},require:{steps:"^hcSteps"}}),window.app.factory("$hcSteps",(function(){return{createHcSteps:function(e){return Object(Pt.a)({meta:[],current:0,timestamp:(new Date).getTime(),setCurrent:function(e){return this.current=e,this},setMeta:function(e){return this.meta=e,this.timestamp=(new Date).getTime(),this},setCallBack:function(e){return this.callback=e,this},setValidator:function(e){return this.validator=e,this},getStatus:function(e,t){return"navigate"===this.type?e.status:t===this.current?"process":t<this.current?"finish":void 0},getStatusClass:function(e,t){var n="";if("navigate"===this.type)"finish"===e.status?n+=" finish":"process"===e.status&&(n+=" process"),t===this.current&&(n+=" active");else{if(t===this.current)return" process active";if(t<this.current)return" finish"}return n}},e)}}}));n("jT4T");var Xi=n("EqRa"),Qi=n.n(Xi);O.a.directive("hcContentTip",[function(){return{restrict:"E",scope:{content:"=",options:"=",tipStatus:"="},template:Qi.a,controller:["$scope","$timeout","$element",function(e,t,n){e.init=function(){e.show_tip=!0,e.setTipOverflow()},e.$watch("content",(function(t,n){n&&e.setTipOverflow()})),e.$watch("tipStatus",(function(){var t;e.tip_expand=null!==(t=e.tipStatus)&&void 0!==t&&t})),e.setTipOverflow=function(){t((function(){var t=Fe()(n).call(n,".text");t.css("-webkit-line-clamp","999");var i=Math.round(t.height()/E()(t.css("line-height")));e.tip_expandable=i>1,t.css("-webkit-line-clamp","")}))},e.closeTip=function(){e.show_tip=!1},e.tipExpandClick=function(){e.tip_expand=!e.tip_expand,e.$emit("tip_collapse",{})}}]}}]);n("keMz");var Zi=n("Kn/3"),eo=n.n(Zi),to=function(){function e(e,t,n,i,o){this.$rootScope=e,this.$scope=t,this.$element=n,this.$timeout=i,this.$state=o}return e.prototype.$onInit=function(){var e,t;this.client=this.$rootScope.client,this._current_id=void 0,this._multi_view_list=[],"pc"===this.client&&(this._current_id=null!==(e=this.id)&&void 0!==e?e:this.$state.params.id,this._multi_view_list=null!==(t=this.viewList)&&void 0!==t?t:JSON.parse(window.sessionStorage.getItem(this.$state.params.multi_view_key)))},e.prototype.$onChanges=function(e){var t=this,n=function(e){if("config"===e&&i.config){var t=i;switch(i.config.position){case"top":i.$timeout((function(){var e,n=Fe()(e=t.$element).call(e,".detail").last(),i=n.offset().left;t._enable_scroll_right=i>window.innerWidth-30-n.width()}),500)}}},i=this;for(var o in e)n(o);if(this._multi_view_list){var a,l=Be()(a=this._multi_view_list).call(a,(function(e){return e.id.toString()===t._current_id}));$(".hcm-multi-view .detail")[l].scrollIntoView({inline:"center",behavior:"smooth"})}},e.prototype.scroll=function(e){var t,n,i,o=$(".hcm-multi-view-top .content")[0].scrollLeft;angular.element(".hcm-multi-view .detail").each((function(e,t){if(t.offsetLeft>o)return i=e,!1}));var a=Fe()(t=angular.element(".hcm-multi-view")).call(t,".detail")["right"===e?i+5:Math.max(i-5,0)];this._scroll_length=a.offsetLeft-a.offsetWidth-25,Fe()(n=angular.element(".hcm-multi-view")).call(n,".content").last().animate({scrollLeft:this._scroll_length},"fast"),this.$scope.$apply()},e.prototype.scrollLeft=function(){this.scroll("left")},e.prototype.scrollRight=function(){this.scroll("right")},e.prototype.changeView=function(e){this._current_id=e.id,this.config.valueOnChange(e)},e.prototype.preItem=function(e,t){return t[s()(t).call(t,e)-1]},e.prototype.nextItem=function(e,t){return t[s()(t).call(t,e)+1]},e.prototype.delete_multi_item=function(e,t){var n,i;e&&e.stopPropagation(),b()(n=this._multi_view_list).call(n,s()(i=this._multi_view_list).call(i,t),1)},e.prototype.canScrollLeft=function(){return $(".hcm-multi-view-top .content")[0].scrollLeft>0},e.prototype.canScrollRight=function(){var e,t;return $(".hcm-multi-view-top .content")[0].scrollLeft+document.documentElement.clientWidth-(Fe()(e=angular.element(".hcm-multi-view")).call(e,".detail").last()[0].offsetLeft+Fe()(t=angular.element(".hcm-multi-view")).call(t,".detail").last()[0].offsetWidth)<0},e.$inject=["$rootScope","$scope","$element","$timeout","$state"],e}();O.a.component("hcMultiView",{bindings:{config:"<",id:"<",viewList:"<"},transclude:!0,controller:to,template:eo.a});n("4mDm"),n("toAj"),n("PKPk"),n("x83w"),n("yWo2"),n("3bBZ");var no=n("GFMm"),io=n.n(no),oo=n("xS4f"),ao=n.n(oo),lo=n("zLi2"),ro=n.n(lo),co=n("Vi3r"),so=n.n(co),uo=n("d8FT"),_o=n.n(uo),po=n("JBE3"),mo=n.n(po),fo=n("DzJC"),ho=n.n(fo),go=(n("OVdM"),n("sLxP")),vo=n.n(go),bo=function(){function e(e,t){this.columnDefs=e,this.meta_cols=t,this.defaultFieldWidth=80,this.defaultFieldHeight=40,this.depth=this.getLayerDepth(e),this.clearColumnDefs(this.columnDefs)}return e.prototype.init=function(){},e.prototype.separateOriginalDefs=function(e){var t=Pe()(e).call(e,(function(e){return e.fixed})),n=[],i=[];return w()(t).call(t,(function(e){"right"===e.fixed?i.push(e):n.push(e)})),[this.calcFields(n),this.calcFields(Pe()(e).call(e,(function(e){return!e.fixed&&!e.is_selector&&!e.is_index}))),this.calcFields(i)]},e.prototype.parseColumnDefs=function(e){var t,n=this;e=Ni()(e),t=e,this.depth,function e(t,n){var i,o;try{for(var a=Object(Pt.i)(t),l=a.next();!l.done;l=a.next()){var r=l.value;r.layer=n,r.children&&e(r.children,n+1)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}(e=function e(t,i){var o=n.depth-i,a=n;return t=w()(t).call(t,(function(t){var n=a.getLayerDepth([t]);return n<o&&(t=function(e,t){var n=e,i=t+1;n.empty_layer=t,n.rowspanLastCell="rowspan-last-cell";for(var o=n.label,a=Math.floor(i/2)-1,l=i%2==1?"rowspan-middle-cell":"rowspan-middle-basis-cell";t--;)n.rowspan=0,t===a&&(n.rowspanMiddleCell=l,n.rowspanLabel=o),n={label:"",empty:!0,type:"group",children:[n]};return n.rowspan=i,e=n}(t,o-n)),t.children&&(t.children=e(t.children,i+1)),t}))}(t,0),1),function e(t){var i,o,a,l,r=0,c=function(t){var i;("group"===t.type&&(t.width=e(t.children)),"field"===t.type)&&(t.width=t.width||(null===(l=null===(a=Pe()(i=n.meta_cols).call(i,(function(e){return e.key===t.key})))||void 0===a?void 0:a[0])||void 0===l?void 0:l.width)||n.defaultFieldWidth);r+=t.width};try{for(var s=Object(Pt.i)(t),d=s.next();!d.done;d=s.next()){c(d.value)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return r}(e);var i=function(e){var t,i,o=w()(t=vo()(i=Array(n.depth)).call(i,[])).call(t,(function(e){return[]}));return function e(t){var n,i;try{for(var a=Object(Pt.i)(t),l=a.next();!l.done;l=a.next()){var r=l.value;o[r.layer-1].push(r),r.children&&e(r.children)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}(e),o}(e);return function(e){var t,n,i,o;try{for(var a=Object(Pt.i)(e),l=a.next();!l.done;l=a.next()){var r=l.value,c=0;try{for(var s=(i=void 0,Object(Pt.i)(r)),d=s.next();!d.done;d=s.next()){var u=d.value;u.left=c,c+=u.width}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}(i),i},e.prototype.calcColumnDefs=function(e,t){void 0===t&&(t=[]),this.fixHeader=this.parseColumnDefs(ie()(t).call(t,Pe()(e).call(e,(function(e){return e.fixed&&"right"!==e.fixed})))),this.rightFixHeader=this.parseColumnDefs(Pe()(e).call(e,(function(e){return"right"===e.fixed}))),this.flexHeader=this.parseColumnDefs(Pe()(e).call(e,(function(e){return!e.fixed})))},e.prototype.getFixTableHeader=function(t,n,i,o,a,l){var r=this.fixHeader;return e.fix_header_render({defsTable:r,sort:i,cols:n,isSelectAll:o,selector_type:a,header_row_height:l,leftOrRight:"left",rightFix:!1})},e.prototype.getRightFixTableHeader=function(t,n,i,o,a,l){var r=this.rightFixHeader;return e.fix_header_render({defsTable:r,sort:i,cols:n,isSelectAll:o,selector_type:a,header_row_height:l,leftOrRight:"right",rightFix:!0})},e.prototype.getFlexTableHeader=function(t,n,i,o){var a=this.flexHeader;return e.flex_header_render({defsTable:a,cols:n,sort:i,header_row_height:o})},e.prototype.getLayerDepth=function(e){var t=1;return function e(n,i){var o,a,l;try{for(var r=Object(Pt.i)(n),c=r.next();!c.done;c=r.next()){var s=c.value;(null===(l=s.children)||void 0===l?void 0:l.length)?e(s.children,i+1):t=Math.max(t,i)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=r.return)&&a.call(r)}finally{if(o)throw o.error}}}(e,1),t},e.prototype.calcFields=function(e,t){var n,i,o,a;void 0===t&&(t=[]);var l=function(e){if("group"===e.type&&r.calcFields(e.children,t),"field"===e.type){var n=null===(a=null===(o=r.meta_cols)||void 0===o?void 0:Pe()(o).call(o,(function(t){return t.key===e.key})))||void 0===a?void 0:a[0];n&&t.push(n)}},r=this;try{for(var c=Object(Pt.i)(e),s=c.next();!s.done;s=c.next()){l(s.value)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return t},e.prototype.clearColumnDefs=function(e){for(var t,n,i,o=function(o){var l=e[o];("group"===l.type&&a.clearColumnDefs(l.children),"field"===l.type)&&((null===(n=null===(t=a.meta_cols)||void 0===t?void 0:Pe()(t).call(t,(function(e){return e.key===l.key})))||void 0===n?void 0:n[0])||(b()(e).call(e,s()(e).call(e,l),1),o--));i=o},a=this,l=0;l<e.length;l++)o(l),l=i},e.fix_header_render=n("TCeZ"),e.flex_header_render=n("Rsme"),e}(),yo=function(){function e(){}return e.prototype.getHeader=function(e,t){return new bo(e,t)},e}();O.a.service("listService",yo);var wo=n("fE7L"),xo=n.n(wo),ko=(n("qzLY"),function(){function e(e){this.$element=e,this.client=window.client}return e.prototype.$onInit=function(){this.validate()},e.prototype.validate=function(){this.item.key&&this.item.children&&console.log(this.item,"key 与 children 不能同时配置"),this.item.key||this.item.children||console.log(this.item,"key 与 children 至少需配置一项")},e.$inject=["$element"],e}());window.app.component("hcFlexCard",{bindings:{item:"<",row:"<",columnsMetas:"<",onItemClick:"<?",hideLabel:"<?"},controller:ko,template:xo.a});n("crIh");var $o=n("/QJt"),Oo=n.n($o),Do=(n("A3jY"),function(){function e(e){this.$element=e}return e.prototype.$onInit=function(){var e,t=this;this.list_meta=this.model.list_meta,g()(e=["title","description","prefix","extra","body","expandable"]).call(e,(function(e){var n;t.list_meta[e]=Object(Pt.a)(Object(Pt.a)({},t.model.columns_metas[null===(n=t.model.list_meta[e])||void 0===n?void 0:n.key]),t.model.list_meta[e])})),this.model.operate_default&&(this.list_meta.operate_default=function(e,n){t.model.operate_default(e,n,t.model.name)})},e.$inject=["$element"],e}());O.a.component("hcExpandableList",{bindings:{model:"="},template:Oo.a,controller:Do});n("7ogB");var Co=n("j5MU"),Mo=(n("u7Fk"),n("PX3v")),So=n("h0OH");function Eo(){var e=["fix-left-content","flex-content","right-fix-content"],t=null,n=null,i=null,o=null,a=null,l=function(e){r()},r=function(){t&&(o(null,t),t=null)},c=function(e){if(!e)return null;var t=e.x,i=void 0===t?0:t,o=e.y,a=void 0===o?0:o,l=e.area;return n.querySelector("."+(l||"flex-content")+' .table-row[row-index="'+a+'"] .table-cell[col-index="'+i+'"]')},s=function(){return i=t?d(t):i},d=function(e){if(e){var t=M()(e.getAttribute("col-index")),n=Po(e,(function(e){return e.hasAttribute("row-index")})),i=M()(null==n?void 0:n.getAttribute("row-index")),o=Po(e,(function(e){var t;return null===(t=e.parentElement)||void 0===t?void 0:t.classList.contains("virtual-scroll-container")})),a="flex-content";return o&&(o.classList.contains("flex-content")?a="flex-content":o.classList.contains("fix-left-content")?a="fix-left-content":o.classList.contains("right-fix-content")&&(a="right-fix-content")),{x:t,y:i,area:a}}},u=function(e){var i,o,a,l,r,c,d;e&&_(e),e.classList.add("cell-active"),t=e,s(),i=n,o=e.getBoundingClientRect(),a=o.right-o.left,l=o.bottom-o.top,r=i.getBoundingClientRect(),c=r.right-r.left,d=r.bottom-r.top,a<=c&&l<=d||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},_=function(e){var t;e?e.classList.remove("cell-active"):g()(t=n.querySelectorAll(".cell-active")).call(t,(function(e){e.classList.remove("cell-active")}))},p=function(){var e;return!document.activeElement||!t||document.activeElement!==t.querySelector("input")||(null===(e=null==a?void 0:a.moveWhenEditing)||void 0===e?void 0:e.call(a,t))},m=function(e){if(function(){var e;if(!!(null===(e=document.querySelector("datetime-picker"))||void 0===e?void 0:e.childElementCount))return!1;var t=document.querySelectorAll("body > hc-dialog");if(!t.length)return!0;var i=Po(n,(function(e){return"HC-DIALOG"===e.tagName}));return t[t.length-1]===i}()&&i)switch(e.keyCode){case 37:f();break;case 38:h();break;case 39:v();break;case 40:b();break;case 13:y();break;case 9:w();break;case 27:x()}},f=function(){if(p()){var t=s(),i=t.x,o=void 0===i?0:i,a=t.y,l=void 0===a?0:a,d=t.area,m=c({x:o,y:l,area:d}),f=Object(Pt.f)([o-1,l],2),h=f[0],g=f[1],v=c({x:h,y:g,area:d});if(!v){var b=Be()(e).call(e,(function(e){return e===d}));if(-1===b)return;var y=e[b-1];if(!y)return;var w=n.querySelectorAll("."+y+' .table-row[row-index="'+l+'"] .table-cell');if(!w.length)return;if(!(v=w[w.length-1]))return void console.log("没有找到目标单元格")}_(m),r(),u(v),$(),console.log("左移")}},h=function(){if(p()){var e=s(),t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,a=e.area,l=c({x:n,y:o,area:a}),d=Object(Pt.f)([n,o-1],2),m=d[0],f=d[1],h=c({x:m,y:f,area:a});h?(_(l),r(),u(h),$(),console.log("上移")):console.log("没有找到目标单元格")}},v=function(){if(p()){var t=s(),i=t.x,o=void 0===i?0:i,a=t.y,l=void 0===a?0:a,d=t.area,m=c({x:o,y:l,area:d}),f=Object(Pt.f)([o+1,l],2),h=f[0],g=f[1],v=c({x:h,y:g,area:d});if(!v){var b=Be()(e).call(e,(function(e){return e===d}));if(-1===b)return;var y=e[b+1];if(!y)return;var w=n.querySelectorAll("."+y+' .table-row[row-index="'+l+'"] .table-cell');if(!w.length)return;if(!(v=w[0]))return void console.log("没有找到目标单元格")}_(m),r(),u(v),$(),console.log("右移")}},b=function(){if(p()){var e=s(),t=e.x,n=void 0===t?0:t,i=e.y,o=void 0===i?0:i,a=e.area,l=c({x:n,y:o,area:a}),d=Object(Pt.f)([n,o+1],2),m=d[0],f=d[1],h=c({x:m,y:f,area:a});h?(_(l),r(),u(h),$(),console.log("下移")):console.log("没有找到目标单元格")}},y=function(){console.log("回车");var e=k();e&&e.click()},w=function(){console.log("tab")},x=function(){console.log("esc"),r(),O()},k=function(){if(n.querySelector(".virtual-scroll-container.modify")){if(i){var e=i.x,o=void 0===e?0:e,a=i.y,l=void 0===a?0:a,s=i.area,d=c({x:o,y:l,area:s});if(d){if(d!==t||!t.querySelector(".cell-modify"))return d.classList.contains("editable")?d:void 0;r()}else console.log("没有找到目标单元格")}}else O()},$=function(){var e,t=k();t&&(null===(e=null==a?void 0:a.moveHighLightCellAfter)||void 0===e||e.call(a,t))},O=function(){_(),i=null};return{init:function(e,t,i){void 0===i&&(i={}),n=e,o=t,a=i,document.addEventListener("click",l),document.addEventListener("keydown",m),jo.on("clear-cell-active",O)},destroy:function(){document.removeEventListener("click",l),document.removeEventListener("keydown",m),jo.off("clear-cell-active",O)},renderCell:function(e,t){null==o||o(e,t),_(),jo.emit("clear-cell-active"),u(t)},setCell:function(e){_(t),u(e)},clearCell:function(){_(),i=null,r()},getActiveCellPosition:function(){return i}}}var Po=function e(t,n){return t?n(t)?t:e(t.parentElement,n):null};var jo={on:function(e,t){jo.events[e]||(jo.events[e]=[]),jo.events[e].push(t)},emit:function(e){var t;null===(t=jo.events[e])||void 0===t||g()(t).call(t,(function(e){e()}))},off:function(e,t){var n;jo.events[e]=null===(n=jo.events[e])||void 0===n?void 0:Pe()(n).call(n,(function(e){return e!==t}))},events:{}},To=n("yM22");function Ao(e){if(void 0===K.a||null==z()(e)){if(q()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return Io(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return V()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Io(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=B()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function Io(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Lo(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=Lo(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=Lo(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}var Ro=0,Bo={card:{template:function(){return n.e(96).then(n.t.bind(null,"Qr++",7))},icon:"icon-hcm-view-card",scrollContentSelector:".hc-list-card .flex-content"},grid:{template:function(){return n.e(101).then(n.t.bind(null,"aLEK",7))},icon:"icon-hcm-table",scrollContentSelector:".virtual-scroll-container"},list:{template:function(){return n.e(95).then(n.t.bind(null,"KpsX",7))},icon:"icon-hcm-view-list",scrollContentSelector:".hc-list .list-content"},icon:{template:function(){return n.e(103).then(n.t.bind(null,"dj74",7))},icon:"icon-hcm-view-icon"},table:{template:function(){return n.e(113).then(n.t.bind(null,"Ypug",7))},icon:"icon-hcm-view-card"},edit_table:{template:function(){return G.a.all([n.e(77).then(n.t.bind(null,"NI9R",7)).then((function(){return angular.element(document.body).injector().get("$ocLazyLoad").load({name:"ui.scroll"})})),n.e(98).then(n.t.bind(null,"HqPp",7))]).then((function(e){return e[1]}))},icon:"icon-hcm-view-card"},edit_table_tree:{template:function(){return G.a.all([n.e(77).then(n.t.bind(null,"NI9R",7)).then((function(){return angular.element(document.body).injector().get("$ocLazyLoad").load({name:"ui.scroll"})})),n.e(98).then(n.t.bind(null,"HqPp",7))]).then((function(e){return e[1]}))},icon:"icon-hcm-view-card"},wf:{template:function(){return"mobile"===window.client?n.e(119).then(n.t.bind(null,"qckp",7)):""},icon:"icon-hcm-view-list"},my_wf_card:{template:function(){return n.e(105).then(n.t.bind(null,"W+C4",7))},icon:"icon-hcm-view-card"},org_card:{template:function(){return n.e(106).then(n.t.bind(null,"2LQ4",7))},icon:"icon-hcm-view-card"},rec:{template:function(){return n.e(107).then(n.t.bind(null,"O9I1",7))},icon:"icon-hcm-view-list",scrollContentSelector:".hc-list .list-content"},rec_interview_card:{template:function(){return n.e(109).then(n.t.bind(null,"sgpC",7))},icon:"icon-hcm-view-list"},rec_recommend_job:{template:function(){return n.e(110).then(n.t.bind(null,"XS+f",7))},icon:"icon-hcm-view-list"},rec_talent_scout:{template:function(){return n.e(111).then(n.t.bind(null,"s45m",7))},icon:"icon-hcm-view-list"},rec_activity:{template:function(){return n.e(108).then(n.t.bind(null,"xOC7",7))},icon:"icon-hcm-view-list"},message:{template:function(){return n.e(104).then(n.t.bind(null,"GAnx",7))},icon:"icon-hcm-view-list"},train:{template:function(){return n.e(116).then(n.t.bind(null,"nhxi",7))},icon:"icon-hcm-view-list"},train_card:{template:function(){return n.e(117).then(n.t.bind(null,"EMAD",7))},icon:"icon-hcm-view-card"},detail:{template:function(){return n.e(97).then(n.t.bind(null,"pjqi",7))},icon:"icon-hcm-view-list"},homepage:{template:function(){return n.e(102).then(n.t.bind(null,"3qNA",7))},icon:"icon-hcm-view-list"},simple_list:{template:function(){return n.e(112).then(n.t.bind(null,"F5Pq",7))},icon:"icon-hcm-menu"},expandable_list:{template:function(){return n.e(100).then(n.t.bind(null,"8zY0",7))},icon:"icon-hcm-view-list"},tag:{template:function(){return n.e(114).then(n.t.bind(null,"LAp1",7))},icon:"icon-hcm-view-list"},tag2:{template:function(){return n.e(115).then(n.t.bind(null,"sFaJ",7))},icon:"icon-hcm-view-list"},tree:{template:function(){return n.e(118).then(n.t.bind(null,"mjsH",7))},icon:"icon-hcm-view-list"},eval_relationship:{template:function(){return n.e(99).then(n.t.bind(null,"BDOx",7))},icon:"icon-hcm-view-list"}},Uo=function(e,t){return Object(To.a)(e,t)},qo=function(e,t,n){return t?"function"==typeof t.field?t.field(e,t,n):Uo(t.field,e):null},Wo=function(e,t){return!e||("function"==typeof(null==e?void 0:e.hide)?null==e?void 0:e.hide(t):e.hide)},zo=function(e){return"function"==typeof e?e:function(){return e||""}},No=function e(t,n,i){var o;return g()(o=re()(t)).call(o,(function(o){var l;"object"===f()(t[o])&&null!==t[o]?e(t[o],n,null==i?void 0:i[o]):"function"==typeof t[o]&&(t[o]=a()(l=(null==i?void 0:i[o])||t[o]).call(l,n))})),t},Ko=function e(t,n){var i,o={};return g()(i=re()(t)).call(i,(function(i){if("object"!==f()(t[i])||null===t[i]||q()(t[i]))if("function"==typeof t[i]){var l;o[i]=a()(l=t[i]).call(l,n)}else o[i]=t[i];else o[i]=e(t[i],n)})),o},Ho=function(e){var t,n,i,o,a,l,r;return!q()(e.options.originObject)||2!==(null!==(t=null===(n=e.options)||void 0===n?void 0:n.selector_type)&&void 0!==t?t:null===(i=e.options)||void 0===i?void 0:i.selectorType)&&!0!==(null===(o=e.options)||void 0===o?void 0:o.multi)?e.options.originObject:{name:null===(a=w()(r=e.options.originObject).call(r,(function(e){return e.name})))||void 0===a||null===(l=a.toString)||void 0===l?void 0:l.call(a)}};function Vo(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["__total__","__avg__"],i=w()(e).call(e,(function(e){var n={};return g()(t).call(t,(function(e){n[e]={rowspan:1,colspan:1}})),n})),o=function(e,t,n){if(t>e){e=e||0;var o=Math.ceil((t+e)/2);i[o][n].rowspanMiddleCell=(t+e)%2==0?"rowspan-middle-cell":"rowspan-middle-basis-cell",i[t][n].rowspanLastCell="rowspan-last-cell"}},a=function(n){var a=r()(t).call(t,0,n),l=t[n-1],c="#h#c#m#",s=void 0;g()(e).call(e,(function(e,t){var n=w()(a).call(a,(function(t){return Uo(t,e)})).join();n!==c?(o(s,t-1,l),c=n,s=t):(i[t][l].rowspan=0,i[s]&&i[s][l].rowspan++)})),o(s,e.length-1,l)},l=t.length;l>0;l--)a(l);return g()(e).call(e,(function(e,o){var a=null;g()(t).call(t,(function(t,l){ae()(n).call(n,Uo(t,e))&&(null===a?(a=t,i[o][a].cols_width=t.width):(i[o][a].colspan++,i[o][t].colspan=0,i[o][a].cols_width+=t.width,i[o][t].rowspanMiddleCell&&delete i[o][t].rowspanMiddleCell))}))})),i}var Yo={imgWithText:function(e,t,n){var i,o,a,l,r,c,s,d,u,_,p,m,f,h,g=t.template.area,v=g.icon,b=g.img,y=g.name,w=g.desc,x=qo(e,v,n),k=qo(e,b,n),$=qo(e,y,n),O=qo(e,w,n);return ie()(i=ie()(o=ie()(a=ie()(l=ie()(r=ie()(c=ie()(s=ie()(d=ie()(u=ie()(_=ie()(p=ie()(m=ie()(f=ie()(h='\n            <div class="img-with-text">\n                <div class="icon '.concat(x," ")).call(h,Wo(v,e)?"hide":"",'" style="')).call(f,zo(null==v?void 0:v.style)(e,t,n),'"></div>\n                <img src="')).call(m,window.cdn_domain)).call(p,window.hcm_wengen,"/img?type=photo&index=")).call(_,k,"&size=64")).call(u,window.hcm_env_post,'" class="')).call(d,Wo(b,e)?"hide":"",'" style="')).call(s,zo(null==b?void 0:b.style)(e,t,n),'">\n                <div class="template-content">\n                <div class="name ')).call(c,Wo(y,e)?"hide":"",'" style="')).call(r,zo(null==y?void 0:y.style)(e,t,n),'">')).call(l,$,'</div>\n                <div class="desc ')).call(a,Wo(w,e)?"hide":"",'" style="')).call(o,zo(null==w?void 0:w.style)(e,t,n),'">')).call(i,O,"</div>\n                </div>\n            </div>")},image:function(e,t,n){var i,o,a,l,r,c=t.template.meta,s=qo(e,c,n);return ae()(i=[void 0,null,""]).call(i,s)?"":ie()(o=ie()(a=ie()(l=ie()(r='\n            <div class="list-cell-image">\n                <img src="'.concat(window.cdn_domain)).call(r,window.hcm_wengen,"/img?index=")).call(l,s)).call(a,window.hcm_env_post,'"\n                     style="')).call(o,zo(null==c?void 0:c.style)(e,t,n),'">\n            </div>')}};function Go(e,t,n,i,o,a){return{createList:function(){var l,c,d,_,m,h,v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{state:"view",modify_mode:"dirty",infoType:"list",name:v.name,_data:v.data||[],dirty:{},modiMeta:[],context_data:{},columns:v.columns||[],fix_count:v.fix_count,fixed_width:v.fixed_width,columns_metas:v.columns_metas,sort:st()(v)||{},operate_row:v.operate_row,operate_default:v.operate_default,operate_bottom:v.operate_bottom,operate_sort:v.operate_sort,selector_type:v.selector_type,style:v.style,view:v.view||{},view_list:v.view_list,view_list_config:v.view_list_config,template:v.template,card_meta:v.card_meta,flex_card_meta:v.flex_card_meta,row_config:{},row_height:v.row_height||48,header_row_height:48,rowHeight:new ut.a,max_row:5,expanded_items:[],row_type:"moderate",font_config:{},font_size_type:"medium",font_size:14,row_space:(null===(l=e.getContext("auth"))||void 0===l||null===(c=l.company_setting)||void 0===c?void 0:c.hc_list_row_style)||"moderate",show_index:!1!==v.show_index,diffDirty:v.diffDirty,selected_item:null,selected_items:[],label:v.label||"",current_page:1,page_size:20,operate_width:100,tableHeight:49,timestamp:0,closeSort:!1,id_key:["id"],slider_hide:v.slider_hide,adapter:{},cacheComponentOptions:[],cache_row:5,scrollToTop:!1,disabledCellClick:!1,tree_list:[],tree_node:[],outside_select:!1,is_selectAll:!1,noDataShow:!0,show_favorite:!1,favoriteListCallback:null,tagMode:"view",$setColumnDefs:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.columnDefs=null==e?void 0:e.children,this.$setColumns(t,n,i,o),this.$setColumns(this.getColsFromColDefs(this.columnDefs),n,i,o)},getColsFromColDefs:function(e){var t=[],n=angular.copy(this.columns);return function e(i){var o,a=Ao(i);try{var l=function(){var i=o.value;if("field"===i.type){var a,l=null===(a=Pe()(n).call(n,(function(e){return e.key===i.key})))||void 0===a?void 0:a[0];i.align=(null==l?void 0:l.align)||"left",l&&(l.label=i.label||l.label),l&&t.push(l)}"group"===i.type&&(i.align="center",e(i.children))};for(a.s();!(o=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}}(e),t},columnDefs:[],tableHeader:void 0,customRowClass:function(){},customCellClass:function(){},$setModify:function(e){return this.state="modify",this.modify_mode=e||"dirty",this.$refreshData(),this},$endModify:function(){var e;(this.state="view","dirty"===this.modify_mode)&&(this.dirty={},null===(e=this.clearCell)||void 0===e||e.call(this),this.$refreshData());return this},$resetModify:function(){var e;return this.state="view",this.dirty={},null===(e=this.clearCell)||void 0===e||e.call(this),this.$refreshData(),this},getDirty:(h=p()(u.a.mark((function e(t,o){var a,l,r,c,s,d,_;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,o){e.next=5;break}return e.next=4,null===(l=this.curr_cell_modify_component)||void 0===l?void 0:l.$destroy();case 4:this.curr_cell_modify_component=null;case 5:if(!t){e.next=9;break}return e.abrupt("return",this.dirty);case 9:if(!0!==(r=a.$validRowData())){e.next=14;break}return e.abrupt("return",this.dirty);case 14:throw _="",g()(r).call(r,(function(e){_+=e.index+e.msg+"\n"})),null===(c=this.$element)||void 0===c||Fe()(c).call(c,".hc-list-grid-new").addClass("form-notify"),n((function(){var e;null===(e=a.$element)||void 0===e||Fe()(e).call(e,".hc-list-grid-new").removeClass("form-notify")}),3e3),null===(s=this.$element)||void 0===s||null===(d=s[0])||void 0===d||d.scrollIntoView({behavior:"smooth"}),i.show_warning(_),new Error("数据校验失败");case 21:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)}),setDirty:function(e){this.dirty=e,this.curr_cell_modify_component=null,this.$refreshData()},addDirtyRow:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this,i=function(){var e,t;return null===(e=(t=n.CRUDService).getInfoDefault)||void 0===e?void 0:e.call(t,n.modiState,Fo({},{state_params:o.params||{}}))},a="a_".concat((new Date).getTime());i().then((function(i){var o=n._data;if(i=i||{},e){if(n.shouldObserver()){i=new So.a(i,{useProxy:!0,setter:function(e,t,n,i){var o=yi()(this,e,t);try{var a,l=null===(a=n.modi_field_metas)||void 0===a?void 0:a[e];if(null==l?void 0:l.relation_field){var r,c,d,u=l.relation_field[0],_=s()(r=n.data).call(r,i),p=(null===(c=n.cacheComponentOptions)||void 0===c||null===(d=c[_])||void 0===d?void 0:d[e])||l.options;yi()(this,u,Ho({options:p}))}}catch(e){console.log(e)}return o},context:n}).getProxy()}n.dirty[a]=i,t("setJSON")(n.id_key,n.dirty[a],a)}else{var l;if("head"===n.dirty_insert_mode)o=ie()(l=[i]).call(l,o);else o=ie()(o).call(o,i)}n.$setData(o),n.$refreshData()}))},deleteDirtyRow:(m=p()(u.a.mark((function e(n){var i,o,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.next=3,null===(i=this.curr_cell_modify_component)||void 0===i?void 0:i.$destroy();case 3:this.curr_cell_modify_component=null,a=function(e){var n,i=null===(n=t("getJSON")(o.id_key,e))||void 0===n?void 0:n.toString();if(null==i?void 0:L()(i).call(i,"a_"))delete o.dirty[i];else if(i){o.dirty[i]&&delete o.dirty[i];var a="d_".concat(i);o.dirty[a]={}}},n instanceof Array?g()(n).call(n,(function(e){a(e)})):a(n),this.unSelectAll(),this.$refreshData();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),setDirtyRow:function(e){var n,i=this,o=t("getJSON")(this.id_key,e);if(null==o?void 0:L()(n=o.toString()).call(n,"a_"))this.dirty[o]=e;else{var a,l=Fe()(a=this.data).call(a,(function(e){return t("getJSON")(i.id_key,e)===o})),r=_o()(e,(function(e,t){return l[t]!==e}));r&&(t("setJSON")(this.id_key,r,o),this.dirty[o]=r)}this.$refreshData()},$setModiMeta:function(e,n){this.modi_field_metas={};return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g()(n).call(n,(function(n){var a,l;n.modi&&(!0===n.modi?o[n.key]=Fe()(i).call(i,(function(e){return e.key===n.key})):o[n.key]=t("deepMerge")(Fe()(i).call(i,(function(e){return e.key===n.key}))||{},n.modi),o[n.key]&&(o[n.key].options.no_label=!0),(null===(a=o[n.key])||void 0===a?void 0:a.extra_meta)&&e(null===(l=o[n.key])||void 0===l?void 0:l.extra_meta,i,o))}))}(this.columns,e,this.modi_field_metas),this.modiMeta=e,this.modiState=n,this.modi_mode&&this.$setModify(this.modi_mode),this},$setModiRelation:function(e,t){return this.modiFormRelation=e,this.CRUDService=t,this},dealModiRelation:(_=p()(u.a.mark((function e(t,n,i){var o,a,l,r,c,s,d,_;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=Fe()(o=this.modiFormRelation||[]).call(o,(function(e){return e.key===t})),!(_=(null===(a=this.columns_metas[t])||void 0===a||null===(l=a.modi)||void 0===l||null===(r=l.value_onchange)||void 0===r?void 0:r.length)?null===(c=this.columns_metas[t])||void 0===c||null===(s=c.modi)||void 0===s?void 0:s.value_onchange:(null==d?void 0:d.value_onchange)||[]).length){e.next=5;break}return e.next=5,this.$execute(t,_,n,i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return _.apply(this,arguments)}),relatonExecuteTask:{},$execute:(d=p()(u.a.mark((function e(n,i,o,a){var l,r,c,s,d,_,p,m,f,h,v=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=null===(l=this.relatonExecuteTask[n]||[])||void 0===l?void 0:Be()(l).call(l,(function(e){return e.row===o})),(null==(_=-1!==d?this.relatonExecuteTask[n][d]:null)||null===(r=_.promise)||void 0===r?void 0:r.is_loading)&&(null==_||null===(p=(m=_.promise).cancel)||void 0===p||p.call(m),b()(f=this.relatonExecuteTask[n]).call(f,d,1)),h=null===(c=this.CRUDService)||void 0===c?void 0:c.getInfoChange(n,angular.extend({},o,a||{}),this.modiState,{timestamp:(new Date).getTime()},[{key:n,value_onchange:i}]),this.relatonExecuteTask[n]=ie()(s=this.relatonExecuteTask[n]||[]).call(s,{key:n,row:o,promise:h}),h.then((function(e){var l,r,c,s=re()(e);if(i){var d=[];w()(i).call(i,(function(e){d.push(e.key)})),s=d}var u=!1;g()(s).call(s,(function(n){var i;"child"===n?g()(i=re()(e.child||{})).call(i,(function(e){})):(v.columns_metas[n]&&!t("valueToFunc")(v.columns_metas[n].hide)()&&(u=!0),angular.equals(t("getJSON")(n,angular.extend({},o,a)),t("getJSON")(n,e))||(t("setJSON")(n,"dirty"===v.modify_mode?a:o,e[n]),v.dealModiRelation(n,o,a),v.simulateModiComponent(n,e[n])))}));var _=null===(l=v.relatonExecuteTask[n])||void 0===l?void 0:Be()(l).call(l,(function(e){return e.row===o}));b()(r=v.relatonExecuteTask[n]).call(r,_,1),null===(c=v.afterModiRelation)||void 0===c||c.call(v,n,i,o,a),u&&(v.timestamp=(new Date).getTime())})).catch((function(e){if(console.log(e),"abort"!==(null==e?void 0:e.status)){var t,i,a=null===(t=v.relatonExecuteTask[n])||void 0===t?void 0:Be()(t).call(t,(function(e){return e.row===o}));b()(i=v.relatonExecuteTask[n]).call(i,a,1)}})).finally((function(){}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return d.apply(this,arguments)}),simulateModiComponent:function(e,n){var o,l,c,s=this,d=this,u=(null===(o=d.modi_field_metas)||void 0===o?void 0:o[e])||(null===(l=this.columns_metas[e])||void 0===l?void 0:l.modi);if("_id"===r()(e).call(e,-3)&&ae()(c=["hc-super-selector","hc-tree-list-selector","hc-category-list-selector","hc-standard-tree-selector","hc-compose-selector"]).call(c,u.component)){var _=i.$new();_.data=n,u.options=new Proxy(u.options,{set:function(n,i,o){return"originObject"===i&&(t("setJSON")(u.relation_field||r()(e).call(e,0,-3),s.dirty,o),d.timestamp=(new Date).getTime(),_.$destroy()),yi()(n,i,o)}}),_.modi_meta=u,a('<hc-form-component\n                            component=\'{{modi_meta.component}}\'\n                            options="modi_meta.options"\n                            ng-disabled="false"\n                            ng-model="data"\n                        ></hc-form-component>')(_)}},$validRowData:function(){var e,n,i=this,o=this,a=[],l=[];return g()(e=o.columns).call(e,(function(e){if(e.modi)if(!0===e.modi||e.modi.key){var t,n=Fe()(t=o.modiMeta).call(t,(function(t){return t.key===(!0===e.modi?e.key:e.modi.key)}));l.push(te()({},n||{},!0===e.modi?{}:e.modi))}else l.push(e.modi)})),g()(n=this.data).call(n,(function(e,n){var r=t("getJSON")(o.id_key,e),c=i.dirty["d_".concat(r)]||i.dirty[r],s=angular.extend({},e,c||{}),d=t("validData")(l,s);d&&(d.index="序号: ".concat(n+1," "),a.push(d))})),!a.length||a},$setCancelWatch:function(e){return this.cancel_watch=e,this},$closeSort:function(){return this.closeSort=!0,this},customGetter:function(e,n){var i,o;return(null===(i=n.modi_field_metas)||void 0===i||null===(o=i[e])||void 0===o?void 0:o.origin_field)&&(e=n.modi_field_metas[e].origin_field[0]),"dirty"===n.modify_mode&&n.shouldObserver()&&Object(So.b)(n.dirty[t("getJSON")(n.id_key,this)]||{},e)?vi()(n.dirty[t("getJSON")(n.id_key,this)],e):vi()(this,e)},customSetter:function(e,n,i,o){var a,l,r;(null===(a=i.modi_field_metas)||void 0===a||null===(l=a[e])||void 0===l?void 0:l.origin_field)&&(e=i.modi_field_metas[e].origin_field[0]);var c=t("getJSON")(i.id_key,this),d=null===(r=i.modi_field_metas)||void 0===r?void 0:r[e];if("dirty"===i.modify_mode&&i.shouldObserver()){if(!i.dirty[c]){var u={};t("setJSON")(i.id_key,u,c),i.dirty[c]=u}var _=yi()(i.dirty[c],e,n);i.dealModiRelation.call(i,e,this,i.dirty[c]);try{if(null==d?void 0:d.relation_field){var p,m,f,h=d.relation_field[0],g=s()(p=i.data).call(p,o),v=(null===(m=i.cacheComponentOptions)||void 0===m||null===(f=m[g])||void 0===f?void 0:f[e])||d.options;yi()(i.dirty[c],h,Ho({options:v}))}}catch(e){console.log(e)}return _}var b=yi()(this,e,n);if(!i.dirty[c]){var y={};t("setJSON")(i.id_key,y,c),i.dirty[c]=y}yi()(i.dirty[c],e,n),i.dealModiRelation.call(i,e,this);try{if(null==d?void 0:d.relation_field){var w,x,k,$=d.relation_field[0],O=s()(w=i.data).call(w,o),D=(null===(x=i.cacheComponentOptions)||void 0===x||null===(k=x[O])||void 0===k?void 0:k[e])||d.options;yi()(this,$,Ho({options:D})),yi()(i.dirty[c],$,Ho({options:D}))}}catch(e){console.log(e)}return b},set data(e){this._data=this.shouldObserver()?new So.a(e,{useProxy:!0,getter:this.customGetter,setter:this.customSetter,context:this}).getProxy():e,this.group_fields&&(this.style="cell",this.struct=Vo(e,this.group_fields)),this.$refreshData()},get data(){var e,n,i=this,o=this,a=[],l=[];g()(e=re()(this.dirty||{})).call(e,(function(e){var t,n;L()(t=e.toString()).call(t,"a_")&&a.push(i.dirty[e]),!o.diffDirty&&L()(n=e.toString()).call(n,"d_")&&l.push(r()(e).call(e,2))}));return a.length||l.length?Pe()(n=function(e,t){return"head"===o.dirty_insert_mode?ie()(t).call(t,e):ie()(e).call(e,t)}(this._data,a)).call(n,(function(e){var n;return!ae()(l).call(l,null===(n=t("getJSON")(o.id_key,e))||void 0===n?void 0:n.toString())})):this._data},shouldObserver:function(){var e,t,n;return"list"===this.view&&"edit-list"===(null===(e=this.list_meta)||void 0===e?void 0:e.dynamic_template)||ae()(t=["edit_table","edit_table_tree"]).call(t,this.view)||"card"===this.view&&"smart"===(null===(n=this.card_meta)||void 0===n?void 0:n.dynamic_template)},$refreshData:function(){var e=this;this.$setTableHeight(),n((function(){e.timestamp=(new Date).getTime()}))},$setFixedWidth:function(e){return this.fixed_width=e,this},$setName:function(e){return this.name=e,this},$setOptions:function(e){if(e){var n=e.view||{};if("mobile"===window.client){var i=n.mobile||"list";e["mobile_"+i+"_config"]&&(e=t("deepMerge")(e,e["mobile_"+i+"_config"]))}else{var o=n.pc||"list";e["pc_"+o+"_config"]&&(e=t("deepMerge")(e,e["pc_"+o+"_config"]))}}return angular.extend(this,e),this.$setName(this.name),this.$setView(this.view),this.$set_view_list(this.view_list),this.$setRowSelector(this.selector_type),this.$setOperateDefault(this.operate_default),this.$setRowType(this.$getStorage({model:"hc_list_row_type"})||this.row_type),this.$setFontSize(this.$getStorage({model:"hc_list_font_size"})||this.font_size_type),this},$setRowStyle:function(e){this.row_space=e},$setRowType:function(e){switch(this.row_type=e,e){case"tight":this.row_height=this.row_config.tight||40,this.lineClamp=this.row_config.tight_lineClamp||1;break;case"moderate":this.row_height=this.row_config.moderate||48,this.lineClamp=this.row_config.moderate_lineClamp||2;break;case"loose":this.row_height=this.row_config.loose||64,this.lineClamp=this.row_config.loose_lineClamp||3}this.resetCacheRowHeight()},$setFontSize:function(e){switch(this.font_size_type=e,e){case"large":this.font_size=this.font_config.large||16;break;case"medium":this.font_size=this.font_config.medium||14;break;case"small":this.font_size=this.font_config.small||12}},resetCacheRowHeight:function(){var e,t,n=this;(null===(e=this.rowHeight)||void 0===e?void 0:e.size)&&g()(t=this.rowHeight).call(t,(function(e,t){n.rowHeight.set(t,n.row_height)}))},$setCardMeta:function(e){return this.card_meta=e,this},$setActionFunc:function(e){return this.action_func=e,this},$setView:function(e,t){if(e&&"object"===f()(e)&&(e=e[window.client]),"manual"!==t){var i,o=this.$getStorage({model:"hc_list_view"});s()(i=(this.view_list||{}).pc||[]).call(i,o)>=0&&(e=o),this.view=e||("pc"===window.client?"grid":"list")}else if(this.view=e,this.$setStorage({model:"hc_list_view"},this.view),"grid"===this.view){var a=this;n((function(){a.timestamp=(new Date).getTime()}))}return this.$setColumns(this.columns),this},$set_view_list:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;this.view_list=t,!t[window.client]&&(t[window.client]=["pc"===window.client?"grid":"list"]);var i=function(e){return function(){n.$setView(e,"manual")}},o={};return w()(e=t[window.client]).call(e,(function(e){o[e]={icon:Bo[e].icon,click:i(e)}})),this.view_list_config=o,this},$setSort:function(e){return this.sort=e,this},$setOperateExpand:function(e){return this.operate_expand=e,this},$colFunc:function(e,t,n,i){n&&n.stopPropagation(),t.func(e,t,n,i)},$setColumns:function(){var e,n,i,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(null==s?void 0:s.length)&&(this.group_fields=s),a=null===(e=a)||void 0===e?void 0:w()(e).call(e,(function(e){var t,n,i;return e.width=(io()(e.width)?e.width:M()(e.width))||80,!e.align&&(null===(t=o.column_config)||void 0===t?void 0:t.default_align)&&(e.align=null===(n=o.column_config)||void 0===n?void 0:n.default_align),e.headAlign=e.headAlign||(null===(i=o.column_config)||void 0===i?void 0:i.headDefaultAlign),e}));var d=this,u=Pe()(a).call(a,(function(e){return e.fixed})),_=[],p=[];g()(u).call(u,(function(e){"right"===e.fixed?p.push(e):_.push(e)})),d.fix_count=_.length,d.right_fix=p;var m=function(e){var n,i,o=Yn()(e).call(e,(function(e,t){return e[t.key]=t,e}),{});d.columns_metas&&g()(i=re()(d.columns_metas)).call(i,(function(e){o[e]||(o[e]=d.columns_metas[e])}));var a=[],l=d[d.view+"_meta"]&&d[d.view+"_meta"].content;if(l){var r;switch(a=[],d.view){case"list":case"rec":case"rec_interview_card":case"train":case"train_card":case"card":g()(n=re()(l)).call(n,(function(e){var t;l[e]instanceof Array?w()(t=l[e]).call(t,(function(e){a.push(e)})):l[e.key]=e}))}g()(a).call(a,(function(e){o[e.key]=o[e.key]||{};var t=o[e.key];t.options=angular.extend(t.options||{},e.options||{}),o[e.key]=angular.extend({},t,e)})),e=w()(r=re()(a)).call(r,(function(e){return a[e]}))}return[a=t("orderBy")(Pe()(e).call(e,(function(e){return!(e.display_hide||t("valueToFunc")(e.hide)())})),"sequence"),o]};"mobile"===window.client&&d[d.view+"_meta"]&&(this[this.view+"_meta"].content=this[this.view+"_meta"].mobile_content||this[this.view+"_meta"].content),g()(angular).call(angular,a,(function(e){var t;return e.sortable=null!==(t=e.sortable)&&void 0!==t?t:q()(e.field)})),this.columns=a,this.fix_columns=_,this.flex_columns=Pe()(a).call(a,(function(e){return!e.fixed})),this.right_fix_columns=p,c&&(this.flex_multi_columns=c.flex_multi_columns,this.fix_multi_columns=c.fix_multi_columns,this.right_fix_multi_columns=c.right_fix_multi_columns);var f=[];this.fix_offset=[];var h=m(a),v=ro()(h,2);this.merge_columns=v[0],this.columns_metas=v[1];var b,y=this.$getListWidthLocal();y&&g()(b=this.merge_columns).call(b,(function(e){e.key in y&&(e.width=y[e.key])}));f=this.selector_type&&this.show_index?[60,60]:this.selector_type||this.show_index?[0,60]:[0,0],f=ie()(f).call(f,w()(n=r()(i=this.merge_columns).call(i,0,l)).call(n,(function(e){return e.width})));var x=0;return g()(f).call(f,(function(e,t){0===t?o.fix_offset.push(0):(x=M()(f[t-1])+x,o.fix_offset.push(x))})),g()(a).call(a,(function(e){return e.width})),this},$setRowHeight:function(e){return this.row_height=e,this},$setRowSelector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.selector_type=e,this.selected_item=null,this.selected_items=[],this},$setOperateRow:function(e,t){return this.operate_row=e,t&&(this.operate_width=t),this},$setOperateDefault:function(e){return this.operate_default=e,this},$setOperateAlter:function(e){return this.operate_alter=e,this},$setOperateBottom:function(e){return this.operate_bottom=e,this},$setOperateSort:function(e){return this.operate_sort=e,this},$setData:function(e,n){var i,o,a,l,r,c,s,d,u=this;u.scrollToTop&&(null===(i=Bo[u.view])||void 0===i?void 0:i.scrollContentSelector)&&(null===(o=u.$element)||void 0===o||null===(a=Fe()(o).call(o,Bo[u.view].scrollContentSelector))||void 0===a||null===(l=a[0])||void 0===l||l.scrollIntoView({block:"start",inline:"nearest"}));var _=Yn()(r=this.columns).call(r,(function(e,t){return e[t.key]=t,e}),{});this.data=t("securityFilter")(e||[],_);try{var p,m=function(e,t){var n;return this[e]||(this[e]=Fo({},Ko((null===(n=t.model.modi_field_metas[e])||void 0===n?void 0:n.options)||{},t.row))),vi()(this,e)};g()(p=u.data).call(p,(function(e,t){var n;u.cacheComponentOptions[t]&&g()(n=re()(u.cacheComponentOptions[t])).call(n,(function(n){var i;No(u.cacheComponentOptions[t][n],e,(null===(i=u.modi_field_metas[n])||void 0===i?void 0:i.options)||{})}));u.cacheComponentOptions[t]=new So.a(u.cacheComponentOptions[t]||{},{useProxy:!0,getter:m,context:{model:u,row:e}}).getProxy()}))}catch(e){console.log(e)}return(null===(c=this.list_meta)||void 0===c?void 0:c.dynamic_template_key)&&(null===(s=this.columns_metas)||void 0===s?void 0:s[null===(d=this.list_meta)||void 0===d?void 0:d.dynamic_template_key])&&w()(e).call(e,(function(e){var t=e[u.columns_metas[u.list_meta.dynamic_template_key].key];"string"==typeof t&&(e[u.columns_metas[u.list_meta.dynamic_template_key].key]=JSON.parse(t))})),this.selector_flag&&"mobile"===window.client&&"list"===this.view||n||(this.selected_item=null,this.selected_items=[]),"tree"!==this.view&&"edit_table_tree"!==this.view||("dirty"===this.modify_mode&&(this.dirty={}),this.tree_list=this.data,this.tree_node=t("TreeFill")(t("treeIdFill")(this.tree_list,this.parent_id_key),this.parent_id_key)),this.noDataShow=!1,this},$setTreeData:function(e){var t;this.$setData(ie()(t=this.data||[]).call(t,e))},$setTreeSearchData:function(e){this.tree_node=e},$setStyle:function(e){return this.style=e,this},$setTemplate:function(e){return this.template=e,this},$setSelectStatusCallback:function(e){return this.setSelectStatusCallback=e,this},$setFavoriteListCallback:function(e){return this.favoriteListCallback=e,this},selectItem:function(e,t){t&&t.stopPropagation();if(1===this.selector_type)this.selected_item=this.selected_item&&this.selected_item===e?null:e,this.selected_items=this.selected_item?[this.selected_item]:[];else if(2===this.selector_type){var n,i=this.isSelected(e);if(~i)b()(n=this.selected_items).call(n,i,1);else this.selected_items.push(e);this.selected_item=1===this.selected_items.length?this.selected_items[0]:null}this.changeSelectedStatus(e),this.outside_select&&!this.select_status&&this.setSelectStatusCallback(!0)},$clearSelectedItems:function(){this.selected_item=null,this.selected_items=[]},selectAll:function(e){var n,i,o=this;return e&&e.stopPropagation(),this.selected_items=ie()(n=this.selected_items).call(n,Pe()(i=this.data).call(i,(function(e){var n,i;return!ae()(n=w()(i=o.selected_items).call(i,(function(e){return t("getJSON")(o.id_key,e)}))).call(n,t("getJSON")(o.id_key,e))}))),this.selected_item=1===this.selected_items.length?this.selected_items[0]:null,this},unSelectAll:function(e){var n=this;e&&e.stopPropagation();for(var i=0;i<this.data.length;i++){var o,a,l;if(~this.isSelected(this.data[i]))b()(o=this.selected_items).call(o,s()(a=w()(l=this.selected_items).call(l,(function(e){return t("getJSON")(n.id_key,e)}))).call(a,t("getJSON")(this.id_key,this.data[i])),1)}return this.selected_item=null,this},selectAllClick:function(e){var n,i,o,a=this;if(e&&e.stopPropagation(),2===this.selector_type){var l=Pe()(n=w()(i=this.data).call(i,(function(e){return t("getJSON")(a.id_key,e)}))).call(n,(function(e){var n,i;return null===(n=a.selected_items)||void 0===n||null===(i=w()(n).call(n,(function(e){return t("getJSON")(a.id_key,e)})))||void 0===i?void 0:ae()(i).call(i,e)}));return(null==l?void 0:l.length)===(null===(o=this.data)||void 0===o?void 0:o.length)?(this.unSelectAll(),this.is_selectAll=!1):(this.selectAll(),this.is_selectAll=!0),this}},$setMaxRow:function(e){return this.max_row=e,this},$setCurrentRow:function(e){return this.current_row=e,this},$setShowIndex:function(e){return this.show_index=e,this},$setStorage:function(n,i){if(this.name){var o,a=null===(o=(e.getContext("auth")||{user:null}).user)||void 0===o?void 0:o.id;if(a){var l=t("hash_key")(angular.extend({name:this.name,user:a},n));window.storage.setItem("local",l,i)}}},$getStorage:function(n){var i;if(this.name){var o,a,l=null===(o=e.getContext("auth"))||void 0===o||null===(a=o.user)||void 0===a?void 0:a.id;if(l){var r=t("hash_key")(angular.extend({name:this.name,user:l},n));i=window.storage.getItem("local",r)}}return i},$setListWidthLocal:function(e,t){var n={model:"hc_list_width"},i=this.$getStorage(n)||{};return i[e]=t,this.$setStorage(n,i),this},$getListWidthLocal:function(){return this.$getStorage({model:"hc_list_width"})||{}},$setTableHeight:function(){var e,t,n=this.row_height,i=this.header_row_height,o=this.data||[],a=(null===(e=this.tableHeader)||void 0===e?void 0:e.depth)?this.tableHeader.depth*i:n;this.tableHeight=o.length*n+a+12+1+("table-footer"===(null===(t=this.stat_config)||void 0===t?void 0:t.stat_mode)?36:0)},$setStatMeta:function(e){return this.stat_meta=e,this},$setStat:function(e){this.stat_data=e;var t=this;return n((function(){t.timestamp=(new Date).getTime()})),this},$setStatMode:function(e,t){return this.footer_stat_mode_name=t,this.footer_stat_mode=e,this},$setStatModeChange:function(e){return this.stat_mode_change=e,this},isSelected:function(e){var n,i,o,a,l,r=this;return t("getJSON")(this.id_key,e)?1===this.selector_type?t("getJSON")(this.id_key,this.selected_item)===t("getJSON")(this.id_key,e)?1:-1:2===this.selector_type&&(null===(n=this.selected_items)||void 0===n?void 0:n.length)&&ao()(i=this.selected_items).call(i,(function(n){return t("getJSON")(r.id_key,n)===t("getJSON")(r.id_key,e)}))?s()(o=w()(a=this.selected_items).call(a,(function(e){return t("getJSON")(r.id_key,e)}))).call(o,t("getJSON")(this.id_key,e)):-1:s()(l=this.selected_items).call(l,e)},$setDisabledCellClick:function(e){return this.disabledCellClick=e,this},$setModiCellBefore:function(e){return this.modiCellBefore=e,this},$setMaxHeight:function(e){return this.max_height=e,this}}.$setOptions()}}}O.a.directive("hcListNew",["$compile","$timeout","$filter","listService",function(e,t,o,a){return{restrict:"E",scope:{model:"="},template:'<div class="hc-list-new"></div>',controller:["$rootScope","$scope","$hcDialog","contextService","$element","watermark","listGlobalConfigService","$compile",function(){var e=p()(u.a.mark((function e(l,c,d,_,m,f,h,v){var y,x,O,D,C,S,P,j,T,A,I,F,R,B,U,W,z,N,K,H,V,Y,G,J,X,Q,Z,ee,ne,oe,le,ce,se,de,ue,_e,pe,me,fe,he,ge,ve,ye,xe,ke,$e,Oe,De;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z=function(e){return/<[^>]+>/g.test(e)},R=function(e,t){var n;return null===(n=o("getJSON")(t||c.model.id_key,e))||void 0===n?void 0:n.toString()},F=function(){var e;if(2===c.model.selector_type){if(null===(e=c.model.data)||void 0===e?void 0:e.length){var t,n=I();W=(null==n?void 0:n.length)===(null===(t=c.model.data)||void 0===t?void 0:t.length)?1:(null==n?void 0:n.length)?0:-1}var i;if(1===W)Fe()(i=Fe()(m).call(m,".select-all")).call(i,"span").addClass("icon-hcm-click-rectangle-radius-solid sys-color").removeClass("icon-hcm-none-rectangle-radius icon-minus-rectangle-radius-solid"),c.model.is_selectAll=!0;else if(-1===W){var o;Fe()(o=Fe()(m).call(m,".select-all")).call(o,"span").removeClass("icon-hcm-click-rectangle-radius-solid sys-color icon-minus-rectangle-radius-solid").addClass("icon-hcm-none-rectangle-radius"),c.model.is_selectAll=!1}else if(0===W){var a;Fe()(a=Fe()(m).call(m,".select-all")).call(a,"span").removeClass("icon-hcm-none-rectangle-radius icon-hcm-click-rectangle-radius-solid").addClass("icon-minus-rectangle-radius-solid sys-color"),c.model.is_selectAll=!1}}},I=function(){var e,t;return Pe()(e=w()(t=c.model.data).call(t,(function(e){return o("getJSON")(c.model.id_key,e)}))).call(e,(function(e){var t,n;return null===(t=c.model.selected_items)||void 0===t||null===(n=w()(t).call(t,(function(e){return o("getJSON")(c.model.id_key,e)})))||void 0===n?void 0:ae()(n).call(n,e)}))},c.auth=_.getContext("auth"),e.next=7,h.getListGlobalConfig();case 7:c.list_global_config=e.sent,O=c.list_global_config.disable_html,Ro="visible"===c.list_global_config.scrollStyle?12:0,c.getOperateRow=function(e){var t;return null===(t=c.model.operate_row)||void 0===t?void 0:Pe()(t).call(t,(function(t){return!o("valueToFunc")(t.hidden)(e)}))},c.getThemeMixColor=function(e){var t,n=o("themeColor");if(n&&7==n.length)t=Object(i.k)(n,e);else if(n&&9==n.length){var a=r()(n).call(n,0,7),l=r()(n).call(n,7);for(var c in i.d)if(l<=i.d[c]){l=(100-c)/100;break}t=Object(i.k)(a,l),t=Object(i.k)(t,e)}else t="ffffff";return t},c.selectedColor=c.getThemeMixColor(.95),c.selectedHoverColor=c.getThemeMixColor(.9),c.selectedBackground=null==c||null===(y=c.auth)||void 0===y||null===(x=y.company_setting)||void 0===x?void 0:x.selectedBackground,c.needBgClolr=function(e){return!(!~c.model.isSelected(e)||!c.selectedBackground)&&"background: ".concat(c.selectedColor)},D=Eo(),C=D.init,S=D.destroy,P=D.clearCell,j=D.renderCell,T=D.getActiveCellPosition,C(m[0],(function(e,t){var n;c.model.clearCell=P,null===(n=t.querySelector("input.component-input-inner"))||void 0===n||n.blur(),we()((function(){var n,i;null!==e?(t.append(e.element[0]),e.cellModifyClick()):c.curr_cell_modify_component&&(null===(n=(i=c.curr_cell_modify_component).confirmModify)||void 0===n||n.call(i),c.curr_cell_modify_component=null,c.model.curr_cell_modify_component=null)}),0)}),{moveWhenEditing:function(){var e;return null===(e=c.model)||void 0===e?void 0:e.moveWhenEditing},moveHighLightCellAfter:k()((function(e){var t,n;null===(t=(n=c.model).moveHighLightCellAfter)||void 0===t||t.call(n,e)}),200)}),c.$on("$destroy",(function(){S()})),A=function(){var e=T();if(e){var t,n,i,o=null===(t=m[0])||void 0===t?void 0:t.querySelector(ie()(n=ie()(i=".".concat(e.area,' .table-row[row-index="')).call(i,e.y,'"] .table-cell[col-index="')).call(n,e.x,'"]'));(null==o?void 0:o.classList.contains("cell-active"))||null==o||o.classList.add("cell-active")}},(N=n("NVNq")).getHeaderClass=function(e){var t,n;return ie()(t=ie()(n="".concat(e.headAlign||e.align||"left"," ")).call(n,e.sortable?"sortable":""," ")).call(t,e.display?"hidden":"")},N.getHcTitle=function(e){if(e)return"hc-title='".concat(e,"' options=\"{mode: 'tip'}\"")},N.getHeaderStyle=function(e,t){var n,i,o,a,l=(e.empty_layer?t*(e.empty_layer+1):t)+"px";return e.empty_layer&&(a=e.empty_layer?(e.layer-e.empty_layer-1)*t+"px":"unset"),ie()(n=ie()(i=ie()(o="left: ".concat(e.left,"px; width: ")).call(o,e.width,"px; height:")).call(i,l,";top:")).call(n,a,";")},N.getStatClass=function(e,t){var n=Fe()(t).call(t,(function(t){return t.key===e.key}));return"".concat(n.is_selector||n.is_index?"center":n.align||"left")},N.getStatStyle=function(e,t){var n,i,o=Fe()(t).call(t,(function(t){return t.key===e.key}));return ie()(n=ie()(i="left: ".concat(o.left,"px; width: ")).call(i,o.width,"px; height:")).call(n,36,"px;")},N.getRowClass=function(e,t,n){var i;return"".concat(null!==(i=n(e,t))&&void 0!==i?i:"")},N.getCellClass=function(e,t,n,i,a){var l,r,s,d=ie()(l=ie()(r="td-content ".concat(t.align||"left"," ")).call(r,t.modi?o("valueToFunc")(t.modi.disabled||!1)(e,t)?"read-only":"editable":""," ")).call(l,null!==(s=n(e,t))&&void 0!==s?s:"");return c.hasDirtyValue(i,e,t,a)&&(d+=" dirty"),d},N.getRowStyle=function(e,t,n,i,a,l){var r,c,s=l(e);return s||(i&&(c=i(e))&&("#theme_color"===(c="#"+c)&&(c=o("themeColor")),r=c.colorRgb()),r||"moderate"!==n||a||(r=t%2==1?"#fafafa":"#fff"),"background-color:".concat(r||"#fff"))},N.getCellText=function(e,t,n,i,a){var l,r,c=i&&(n[R(e,a)]||n["d_".concat(R(e,a))])?o("diffFieldData")(n["d_".concat(R(e,a))]?null:o("hcListCellData")(mo()({},e,n[R(e,a)],(function(e,n,i,o,a,l){var r;if(l.size===(null===(r=t.field)||void 0===r?void 0:r.length)-1)return n})),t),(null===(l=R(e,a))||void 0===l?void 0:L()(l).call(l,"a_"))?null:o("hcListCellData")(e,t),"reverse"===i):null!==(r=o("hcListCellData")(mo()({},e,n[R(e,a)],(function(e,n,i,o,a,l){var r;if(l.size===(null===(r=t.field)||void 0===r?void 0:r.length)-1)return n})),t))&&void 0!==r?r:"";return t.template?Yo[t.template.mode](e,t,c):O&&z(c)?"非法的html":c},N.getRealIndex=function(e,t,n){return(t-1)*n+e+1},N.securityFilter=function(e){return o("securityFilter")(e)},N.getCellStyle=function(e,t){var n=c.getColor(e,t);return n?"color: ".concat(n,";"):""},N.getFixColsCellScale=function(e,t,n,i,o){var a,l,c=t.width||80,d=0;if(t.is_selector||t.is_index||!e||!e[t.key])return" width: ".concat(c,"px;\n                            height: 100%;");var u,_="visible";if(e&&e[t.key]){var p=e[t.key];if(p.colspan>1){var m,f,h=s()(m=w()(o).call(o,(function(e){return e.key}))).call(m,t.key);c=se(w()(f=r()(o).call(o,h,h+p.colspan)).call(f,(function(e){return e.width}))),u=52}if(0!==p.colspan&&0!==p.rowspan||(_="hidden"),p.rowspan){for(var g=0;g<p.rowspan;g++)d+=i.get(n+g);u=52}}return d=d?"".concat(d,"px"):"100%",ie()(a=ie()(l="visibility: ".concat(_,";\n                        width: ")).call(l,c,"px;\n                        height: ")).call(a,d,";")+(u?"z-index: ".concat(u):"")},N.getContentStyle=function(e,t,n){var i;return ie()(i="max-height:".concat(t-2,"px;-webkit-line-clamp:")).call(i,null!=n?n:"unset",";")},N.getIndexStyle=function(e,t){var n;return(null===(n=o("valueToFunc")(t))||void 0===n?void 0:n(e))||""},N.getOperateRowClass=function(e,t){var n,i=o("valueToFunc")(t.disabled)(e);return ie()(n="operate ".concat(t.icon||""," ")).call(n,i?"disabled":"")},N.getTitle=function(e,t,n,i){var a;if(!i&&!t.set_title)return"";var l=null!==(a=o("hcListCellData")(te()({},e,n[R(e)]),t))&&void 0!==a?a:"";return t.template?Yo[t.template.mode](e,t,l):O&&z(l)?"非法的html":l},c.getFixColsCellScale=function(e,t,n){if(n){var i=e,o="";return void 0!==i.rowspan&&(o+="rowspan"),i.rowspanMiddleCell&&(o+=" ".concat(i.rowspanMiddleCell)),i.rowspanLastCell&&(o+=" ".concat(i.rowspanLastCell)),o}if(t.is_selector||t.is_index||!e||!e[t.key])return"";if(e&&e[t.key]){var a=e[t.key],l="";return 1!==a.rowspan&&(l+="rowspan"),a.colspan&&a.colspan>1&&(l+=" colspan"),a.rowspanMiddleCell&&(l+=" ".concat(a.rowspanMiddleCell)),a.rowspanLastCell&&(l+=" ".concat(a.rowspanLastCell)),l}return""},c.SelectedInfo=function(){d.getDialog(Mo.a).title("已选中项").show({mode:"edit",data:angular.copy(c.model.selected_items),alter:c.getInfoAlterParam()}).then((function(e){c.model.selected_items=angular.copy(e),1===(null==e?void 0:e.length)&&(c.model.selected_item=angular.copy(e[0])),c.model.$refreshData()}))},c.clearSelectedItems=function(e){c.model.$clearSelectedItems(),c.model.$refreshData()},c.getInfoAlterParam=function(){return{meta:c.model.columns,stat_meta:c.model.stat_meta}},c.getOperateRowClass=function(e,t){var n,i=o("valueToFunc")(t.disabled)(e);return ie()(n="operate ".concat(t.icon||""," ")).call(n,i?"disabled":"")},c.getColor=function(e,t){if(t&&t.color){var n;if("string"==typeof t.color)n="#"+t.color;else{if(angular.isArray(t.color)){var i,a=o("hcListCellData")(e,t,t.no_trans_color_field);return ci()(i=t.color).call(i,(function(e,i){switch(t.color[i].range[0]){case"<":case">":case"<=":case">=":case"==":case"===":new Function("x","y","return x"+(t.color[i].range[0]||"==")+"y")(a,t.color[i].range[1])&&(n="#"+t.color[i].color);break;case"includes":(null==a?void 0:ae()(a).call(a,t.color[i].range[1]))&&(n="#"+t.color[i].color);break;case"startsWith":(null==a?void 0:L()(a).call(a,t.color[i].range[1]))&&(n="#"+t.color[i].color);break;case"endsWith":(null==a?void 0:be()(a).call(a,t.color[i].range[1]))&&(n="#"+t.color[i].color);break;default:t.color[i].range[0]<=a&&a<=t.color[i].range[1]&&(n="#"+t.color[i].color)}return!n})),n}(n=t.color[o("hcListCellData")(e,t)])&&(n="#"+n)}return"#theme_color"===n&&(n=o("themeColor")),n}},c.fix_row_render=n("aMRI"),c.flex_row_render=n("JrBa"),c.flex_row_cell_render=n("mpRo"),c.operate_row_render=n("pJvw"),c.operate_header_render=n("v31b"),c.fix_footer_render=n("fwYG"),c.flex_footer_render=n("PxAj"),c.onRowClick=k()((function(e,t){var n,i;("modify"!==c.model.state||ae()(n=["edit_table_tree","edit_table"]).call(n,c.model.view))&&(ae()(i=[null,void 0]).call(i,c.model.current_row)?c.model.operate_default&&c.model.operate_default(e,t,c.model.name):c.model.current_row=null)}),300,{leading:!0,trailing:!1}),c.onCellClick=function(e,t,n,i){if("modify"!==c.model.state||"grid"!==c.model.view||n.is_selector||(null==i?void 0:i.enableFunc)){var o,a,l;if(!n.is_selector&&(null===(o=c.model)||void 0===o?void 0:o.disabledCellClick))return;if((null==n?void 0:n.func)||(null==n?void 0:n.action))if(e&&e.stopPropagation(),null==n?void 0:n.action)null===(a=(l=c.model).action_func)||void 0===a||a.call(l,n.action,t,n,e,c.model.name);else n.func&&n.func(t,n,e,c.model.name)}else c.setCellModify(e,t,n)},c.onCellRightClick=function(e,t,n,i){if(n.modi&&"modify"===c.model.state&&"grid"===c.model.view){if("function"==typeof c.model.modiCellBefore)if(!c.model.modiCellBefore(n,t))return;if("dirty"===c.model.modify_mode){if(o("hasJSON")(n.field,c.model.dirty[R(t)]||{})){if(null===o("getJSON")(n.field,c.model.dirty[R(t)]||{}))return}else if(null===o("getJSON")(n.field,t))return}else if(null===o("getJSON")(n.field,t))return;null==e||e.stopPropagation(),null==e||e.preventDefault(),d.getDialog({template:'<div><ul><li ng-click="clear($event)">清空</li></ul></div>',controller:["$scope",function(e){e.clear=function(t){null==t||t.stopPropagation(),e.$dialog.resolve_data(),e.$dialog.dialog_close()}}],mask:!1,maskClose:!0}).anchor(angular.element(e.target)).styles({width:"100px",borderRadius:"4px"}).size("small").name("cell-right-click-dropdown").show().then(p()(u.a.mark((function i(){var a,l,r,s,d,_,p,m,f,h,g,v,b,y;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=c.model.dirty,null,"dirty"===c.model.modify_mode?(r[R(t)]=r[R(t)]||{},o("setJSON")((null===(s=n.modi)||void 0===s?void 0:s.origin_field)||n.field,r[R(t)],null),(null===(d=n.modi)||void 0===d?void 0:d.relation_field)&&o("setJSON")(null===(_=n.modi)||void 0===_?void 0:_.relation_field,r[R(t)],null),null==o("getJSON")(n.field,t)?null===(p=angular.element(e.target))||void 0===p||null===(m=p.closest(".table-cell "))||void 0===m||m.removeClass("dirty"):null===(f=angular.element(e.target))||void 0===f||null===(h=f.closest(".table-cell "))||void 0===h||h.addClass("dirty")):(o("setJSON")((null===(g=n.modi)||void 0===g?void 0:g.origin_field)||n.field,t,null),(null===(v=n.modi)||void 0===v?void 0:v.relation_field)&&o("setJSON")(null===(b=n.modi)||void 0===b?void 0:b.relation_field,t,null)),null===(a=angular.element(e.target))||void 0===a||Fe()(l=a.closest(".table-cell")).call(l,".cell-content").html(N.getCellText(t,n,r,c.model.diffDirty,c.model.id_key)),i.prev=4,i.next=7,c.model.dealModiRelation((null===(y=n.modi)||void 0===y?void 0:y.key)||n.key,t,r[R(t)]);case 7:i.next=12;break;case 9:i.prev=9,i.t0=i.catch(4),console.log(i.t0);case 12:case"end":return i.stop()}}),i,null,[[4,9]])}))))}},K=function(e,n,i,a){var r=l.$new();return r.is_destroy=!1,r.parent=i,r.getData=function(){var t,i,l,r;if(n.modi.getter)return n.modi.getter(e,n,a);o("hasJSON")((null===(t=n.modi)||void 0===t?void 0:t.origin_field)||n.field,a[R(e)])?i=o("getJSON")((null===(l=n.modi)||void 0===l?void 0:l.origin_field)||n.field,a[R(e)]):i=o("getJSON")((null===(r=n.modi)||void 0===r?void 0:r.origin_field)||n.field,e);return i},r.setData=function(){var t=p()(u.a.mark((function t(i){var l,s,d,_,p,m,f,h;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.modi.setter){t.next=2;break}return t.abrupt("return",n.modi.setter(e,n,a,i));case 2:return"dirty"===c.model.modify_mode?(a[R(e)]=a[R(e)]||{},o("setJSON")((null===(d=n.modi)||void 0===d?void 0:d.origin_field)||n.field,a[R(e)],i),(null===(_=n.modi)||void 0===_?void 0:_.relation_field)&&o("setJSON")(null===(p=n.modi)||void 0===p?void 0:p.relation_field,a[R(e)],Ho(r)),r.parent.addClass("dirty")):(o("setJSON")((null===(m=n.modi)||void 0===m?void 0:m.origin_field)||n.field,e,i),(null===(f=n.modi)||void 0===f?void 0:f.relation_field)&&o("setJSON")(null===(h=n.modi)||void 0===h?void 0:h.relation_field,e,Ho(r))),r.o_data=angular.copy(r.getData()),t.prev=4,t.next=7,c.model.dealModiRelation(r.modi_meta.key,e,a[R(e)]);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),console.log(t.t0);case 12:return t.abrupt("return",null!==(l=null===(s=n.modi)||void 0===s?void 0:s.rerender)&&void 0!==l&&l);case 13:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),r.cellModifyClick=function(i){var s,_,m,f;if(Fe()(s=r.element).call(s,"hc-form-component").length>0)i.stopPropagation();else{r.data=r.getData(),r.o_data=angular.copy(r.data),r.modi_meta=angular.copy((null===(_=c.model.modi_field_metas)||void 0===_?void 0:_[n.modi.key||n.key])||n.modi),r.component=r.modi_meta.component,r.options=r.modi_meta.options,r.options.keyboardPrevent=!0,No(r.options,e),c.model.context_data=angular.extend({},e,a[R(e)]),r.componentKeyListen=function(e){27===(window.event?e.keyCode:e.which)&&(g(),e.stopPropagation())},r.$destroy=p()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.is_destroy){e.next=2;break}return e.abrupt("return");case 2:if(!(Fe()(t=r.element).call(t,"hc-form-component").length>0)){e.next=5;break}return e.next=5,h();case 5:null===(n=r.element)||void 0===n||n.remove(),r.is_destroy=!0,r.cancel_listener();case 8:case"end":return e.stop()}}),e)})));var h=function(){var t=p()(u.a.mark((function t(){var i,s,d,_;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.is_destroy){t.next=2;break}return t.abrupt("return");case 2:if(r.o_data===r.data){t.next=14;break}if(!(null===(s=r.options)||void 0===s?void 0:s.xss_protect)){t.next=10;break}if(null!=(d=o("securityFilter")(r.data))){t.next=9;break}return l.show_warning("非法脚本注入，请重新输入","warning"),r.data=r.o_data,t.abrupt("return");case 9:r.data=o("xss_filter")(d);case 10:return t.next=12,r.setData(r.data);case 12:t.sent?Oe():null===(_=r.parent)||void 0===_||Fe()(_).call(_,".cell-content").html(N.getCellText(e,n,a,c.model.diffDirty,c.model.id_key));case 14:null===(i=r.element)||void 0===i||i.remove(),we()(A);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){r.is_destroy=!0,r.element.remove()};r.confirmModify=h;if("hc-input-upload-multiple"===r.component)return r.modi_meta.options&&(r.modi_meta.options.no_label=!0),d.simpleForm(r.modi_meta.label,[Fo({},r.modi_meta)],Ie()({},r.modi_meta.key,r.getData())).then(function(){var t=p()(u.a.mark((function t(i){var o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.data=i[r.modi_meta.key],r.o_data===r.data){t.next=6;break}return t.next=4,r.setData(r.data);case 4:t.sent?Oe():null===(o=r.parent)||void 0===o||Fe()(o).call(o,".cell-content").html(N.getCellText(e,n,a,c.model.diffDirty,c.model.id_key));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var b=v('<hc-form-component\n                                ng-click="componentClick($event)"\n                                ng-keyup="componentKeyListen($event)"\n                                component="{{component}}"\n                                options="options"\n                                ng-disabled="false"\n                                ng-model="data"\n                            ></hc-form-component>')(r);r.element.closest(".cell-modify").append(b),r.element.css({"box-shadow":"none"}),"hc-datetime-picker-range"===r.component?t((function(){var e,t;null===(e=Fe()(t=r.element).call(t,"div.component-input-inner")[0])||void 0===e||e.click()}),100):"INPUT"===(null===(m=Fe()(f=r.element).call(f,".component-input-inner")[0])||void 0===m?void 0:m.tagName)?t((function(){var e;Fe()(e=r.element).call(e,".component-input-inner").focus()}),0):t((function(){var e;Fe()(e=r.element).call(e,".component-input-inner").click()}),0),i&&i.stopPropagation()}},r.element=v('<div class="cell-modify" ng-click="cellModifyClick($event)"></div>')(r),r.cancel_listener=r.$on("win_body_click_event",(function(){var n,i,o,l,c;(null===(n=R(e))||void 0===n?void 0:L()(i=n.toString()).call(i,"a_"))&&!a[R(e)]||t((function(){r.confirmModify()}),(null===(o=r.options)||void 0===o?void 0:o.change)?(null===(l=r.options)||void 0===l?void 0:l.debounce)||300:(null===(c=r.options)||void 0===c?void 0:c.debounce)||0)})),r},c.setCellModify=function(e,t,n){if("function"==typeof c.model.modiCellBefore&&!c.model.modiCellBefore(n,t))return;if(c.curr_cell_modify_component&&(c.curr_cell_modify_component.$destroy(),c.curr_cell_modify_component=null,c.model.curr_cell_modify_component=null),n.modi){e&&e.stopPropagation();var i=angular.element(e.target).closest(".table-cell");c.curr_cell_modify_component=c.model.curr_cell_modify_component=K(t,n,i,c.model.dirty),j(c.curr_cell_modify_component,i[0])}else{var o,a;((null==n?void 0:n.func)||(null==n?void 0:n.action))&&(e&&e.stopPropagation(),(null==n?void 0:n.action)?null===(o=(a=c.model).action_func)||void 0===o||o.call(a,n.action,t,n,e,c.model.name):n.func&&n.func(t,n,e,c.model.name))}},c.node_select=function(e,t){e.stopPropagation(),c.model.selected_item=t,c.model.selected_items=[t]},c.tree_expand=k()(function(){var e=p()(u.a.mark((function e(t,n){var i,o,a,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),ae()(i=c.model.expanded_items).call(i,n.id)){e.next=7;break}return e.next=4,c.model.operate_expand(n.id);case 4:c.model.expanded_items.push(n.id),e.next=9;break;case 7:l=s()(o=c.model.expanded_items).call(o,n.id),b()(a=c.model.expanded_items).call(a,l,1);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),500,{leading:!0,trailing:!1}),c.modifyContentWidth=function(){t((function(){var e=0;Fe()(m).call(m,".hc-grid-header > div").each((function(t,n){return e+=n.offsetWidth})),Fe()(m).call(m,".tree-scroll-container").width(e)}),800)},c.modifyContentWidth(),c.getTreeCellClass=function(e,t){var n,i,o;return ie()(n="".concat(null!==(i=c.model.customCellClass(e,t))&&void 0!==i?i:""," ")).call(n,(null===(o=e.display)||void 0===o?void 0:ae()(o).call(o,t.key))?"hidden":"")},c.getTreeCellWidth=function(e){var t;return Fe()(t=c.flex_cols).call(t,(function(t){return t.key===e})).width},H=function(){var e,t;if(2===c.model.selector_type){var n,i,o,a,l=I();if((null==l?void 0:l.length)===(null===(e=c.model)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length))c.model.unSelectAll(),w()(n=Fe()(m).call(m,".tag-to-select")).call(n,(function(e,t){$(t).removeClass("icon-hcm-click-rectangle-radius-solid sys-color"),$(t).addClass("icon-hcm-none-rectangle-radius")})),w()(i=Fe()(m).call(m,".table-row")).call(i,(function(e,t){$(t).css({background:c.calcColor(M()($(t).attr("row-index")))})}));else if(c.model.selectAll(),w()(o=Fe()(m).call(m,".tag-to-select")).call(o,(function(e,t){$(t).addClass("icon-hcm-click-rectangle-radius-solid sys-color"),$(t).removeClass("icon-hcm-none-rectangle-radius")})),c.selectedBackground)w()(a=Fe()(m).call(m,".table-row")).call(a,(function(e,t){$(t).css({background:c.selectedColor})}));F()}},V=c.setSort=function(e,t){var n,i;null==t||t.stopPropagation(),(null===(n=Pe()(ne).call(ne,(function(t){return t.key===e})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i.sortable)&&!c.model.disable_sort&&(st()(c.model)&&st()(c.model).key===e?"asc"===st()(c.model).type?st()(c.model).type="desc":c.model.sort={}:c.model.sort={key:e,type:"asc"},c.model.operate_sort&&c.model.operate_sort(st()(c.model)))},c.hasDirtyValue=function(e,t,n,i){var a,l;if(!re()(e||{}).length)return!1;var r=R(t,i);if(null==r||null===(a=r.toString)||void 0===a?void 0:L()(l=a.call(r)).call(l,"a_"))return!0;var c=o("getJSON")(n.field,(null==e?void 0:e[r])||{}),s=o("getJSON")(n.field,t||{});return null!==c&&c!==s},Y=new ut.a,G=c.onOperateClick=function(){var e=p()(u.a.mark((function e(t,n,i,o){var a,l,r,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(l=Fe()(a=c.model.operate_row).call(a,(function(e){return e.key===n})))||(l=Fe()(r=c.model.operate_row).call(r,(function(e){return e.label===o}))),l&&(null==i||null===(s=i.stopPropagation)||void 0===s||s.call(i),null==(d=J(l,c.model.data[t]))||d(c.model.data[t]));case 3:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),J=function(e,t){var n,i,o=null===(n=Y.get(t))||void 0===n?void 0:n[e.key];if(!o){var a,l=function(e){var t,n=Uo(c.model.id_key,e);return g()(Y).call(Y,(function(e,i){Uo(c.model.id_key,i)!==n||(t={key:i,value:e})})),t}(t);if(l)o=null===(a=l.value)||void 0===a?void 0:a[e.key],i=l.key}return o||(o=k()((function(t){return e.action?c.model.action_func(e.action,t,null,null,c.model):e.func(t,null,c.model.data,c.model)}),e.debounce||1e3,{leading:!0,trailing:!1}),i=i||t,Y.set(i,te()(Y.get(i)||{},Ie()({},e.key||e.label,o)))),o},X=function(e){var t;if(e&&e.stopPropagation(),!1!==c.model.allow_resize){var n=$(e.target),i=n.parents(".table-header-cell"),o=i.attr("col-key");if(!ae()(t=["hcm_selector","hcm_index"]).call(t,o)){c.is_moving=!0,B=e.clientX;var a=$(".hc-list-grid-new");n.addClass("col-resize-mouse-down").css("height",m.height()),a.mousemove((function(e){var t,o;c.is_moving&&(i.width()+16-(B-e.clientX)>((null===(t=c.model)||void 0===t||null===(o=t.column_config)||void 0===o?void 0:o.grid_min_width)||me)?(n.css("right",B-e.clientX),c.allow_resize=!0):c.allow_resize=!1)})),a.mouseup((function(e){var t;c.is_moving=!1;var n=c.allow_resize?i.width()+16-(B-e.clientX):me;Pe()(t=c.model.merge_columns).call(t,(function(e){return e.key===o}))[0].width=n,c.model.$setListWidthLocal(o,n),a.unbind("mousemove"),a.unbind("mouseup"),Oe()}))}}},Q=function(e){e&&e.stopPropagation();var t=$(e.target),n=t.parents(".table-row"),i=n.attr("row-index");c.is_moving=!0,U=e.clientY;var o=$(".hc-list-grid-new");t.addClass("row-resize-mouse-down").css("width",o.width()),c.allow_resize=!0,o.mousemove((function(e){var i,a;c.is_moving&&(n.height()-(U-e.clientY)>((null===(i=c.model)||void 0===i||null===(a=i.column_config)||void 0===a?void 0:a.grid_min_height)||fe)?(t.css("bottom",U-e.clientY),t.css("left",o.offset().left-n.offset().left),c.allow_resize=!0):c.allow_resize=!1)})),o.mouseup((function(e){c.is_moving=!1;var t=c.allow_resize?n.height()-(U-e.clientY):fe;c.model.rowHeight.set(M()(i),t),o.unbind("mousemove"),o.unbind("mouseup"),Oe()}))},c.$watch("model.row_height",(function(e,t){c.isInit&&e!==t&&Oe()})),c.$watch("model",(function(e,t){e&&(e.$element||(c.model.$element=m))})),c.$watch("element.width()",ho()((function(e,t){c.isInit&&t!==e&&e&&Oe()}),500),!1),c.$watch("element.height()",ho()((function(e,t){c.isInit&&t!==e&&e&&Oe()}),500),!1),c.$watch("model.data.length",(function(e,t){c.isInit&&e!==t&&c.updateEditTable()})),c.onResizeMove=function(e,t,n){var i,o,a=t.attr("col-key");Fe()(m).call(m,"[col-key=".concat(a,"]")).css("width","".concat(n,"px"));var l=Pe()(i=c.model.merge_columns).call(i,(function(e){return e.key===a}))[0];l&&(l.width=n,c.model.$setListWidthLocal(a,n));var r=Fe()(o=c.fix_cols).call(o,(function(e){return e.key===a}));if(r)r.width=n;else{var s,d,u=Fe()(s=c.flex_cols).call(s,(function(e){return e.key===a}));if(u&&(u.width=n),c.isScale&&u)g()(d=c.flex_cols).call(d,(function(e){var t;Pe()(t=c.model.merge_columns).call(t,(function(t){return t.key===e.key}))[0].width=e.width,c.model.$setListWidthLocal(e.key,e.width)}))}},le=function(){if("moderate"!==c.model.row_space)return m.unbind("mouseover"),void m.unbind("mouseout");m.mouseover((function(e){if("cell"!==c.model.style){var t=angular.element(e.target).parents(".table-row")[0];if(t&&t.getAttribute("row-index")){var n,i,o,a=t.getAttribute("row-index");if(!~c.model.isSelected(c.model.data[a]))return void Fe()(i=$(e.target).parents(".virtual-scroll-container")).call(i,'.table-row[row-index="'+a+'"]').addClass("row-hover");if(Fe()(n=$(e.target).parents(".virtual-scroll-container")).call(n,'.table-row[row-index="'+a+'"]').addClass("selected-row-hover"),c.selectedBackground)Fe()(o=$(e.target).parents(".virtual-scroll-container")).call(o,'.table-row[row-index="'+a+'"]').css("background",c.selectedHoverColor)}}})),m.mouseout((function(e){var t=angular.element(e.target).parents(".table-row")[0];if(t){var n,i,o,a=t.getAttribute("row-index"),l=~c.model.isSelected(c.model.data[a]);if(a)if(Fe()(n=$(e.target).parents(".virtual-scroll-container")).call(n,'.table-row[row-index="'+a+'"]').removeClass("row-hover"),Fe()(i=$(e.target).parents(".virtual-scroll-container")).call(i,'.table-row[row-index="'+a+'"]').removeClass("selected-row-hover"),l&&c.selectedBackground)Fe()(o=$(e.target).parents(".virtual-scroll-container")).call(o,'.table-row[row-index="'+a+'"]').css("background",c.selectedColor)}}))},ce=function(){return 0,ne=[],oe=[],Z=0,ee=0,c.model.selector_type>0&&"tree"!==c.model.view&&(ne.push({is_selector:!0,label:o("translate")("choice")||"选择",type:"field",width:60,key:"hcm_selector",align:"center",func:function(e){c.model.selectItem(e)}})),c.model.show_index&&(ne.push({is_index:!0,label:o("translate")("No.")||"序号",width:60,type:"field",key:"hcm_index",align:"center"})),c.model.show_favorite&&(ne.push({is_favorite:!0,label:"收藏",width:60,type:"field",key:"hcm_favorite",align:"center",template:{mode:"imgWithText",area:{icon:{field:["favorite_icon"],style:function(e){var t="font-size: 18px; display:flex; justify-content: center; align-items:center; margin: 0;";return e.is_favorite?t+"color: #FFAD0D;":t+"color: #bbb"}}}},func:function(e){e.is_favorite?c.model.favoriteListCallback().removeFavorite(e):c.model.favoriteListCallback().setFavorite(e)}})),oe=ne,ne=ie()(ne).call(ne,c.model.merge_columns||[])},se=function(e){return Yn()(e).call(e,(function(e,t){return e+t}),0)},de=function(e,t){Fe()(m).call(m,".flex-content .table-row").each((function(n,i){var o;if(t[e]){var a=[];if(Fe()(o=$(i)).call(o,">div").each((function(e,t){a.push(M()($(t).attr("col-index")))})),!ae()(a).call(a,e)){var l=c.flex_row_cell_render({col:t[e],data:c.model.data[$(i).attr("row-index")],customCellClass:c.model.customCellClass,row_height:c.model.row_height,lineClamp:c.model.lineClamp,dirty:c.model.dirty,setTitle:c.model.set_title,diffDirty:c.model.diffDirty,id_key:c.model.id_key});$(i).append(l)}}}))},ue=function(e,t){var n,i;if(!(Fe()(m).call(m,".table-row[row-index='".concat(e,"']")).length>0)){var a=~c.model.isSelected(c.model.data[e]),l=c.model.data[e],r=null===(n=c.model.struct)||void 0===n?void 0:n[e];c.model.show_favorite&&(l.favorite_icon=l.is_favorite?"icon-hcm-evaluation-solid":"icon-hcm-evaluation");for(var s=0,d=0;d<e;d++)s+=c.model.rowHeight.get(d);var u=c.fix_row_render({is_selected:a,fix_cols:c.fix_cols,index:e,height:c.model.rowHeight.get(M()(e))||c.model.row_height,index_offset:c.model.page_index*c.model.page_size,data:l,rowStruct:r,customRowClass:c.model.customRowClass,getRowStyle:c.getRowStyle,current_page:c.model.current_page,page_size:c.model.page_size,getRowBackgroundColor:c.model.rowBackgroundColorFunc,row_space:c.model.row_space,customCellClass:c.model.customCellClass,row_height:c.model.rowHeight.get(M()(e)),lineClamp:c.model.lineClamp,offsetHeight:s,rowHeightMap:c.model.rowHeight,mergeColumns:c.model.merge_columns,indexStyle:c.model.indexStyle,dirty:c.model.dirty,leftOrRight:"left",needBgClolr:c.needBgClolr,setTitle:c.model.set_title,diffDirty:c.model.diffDirty,id_key:c.model.id_key});Fe()(m).call(m,".fix-left-content .table-body").append(u);var _=c.fix_row_render({is_selected:a,fix_cols:c.right_fix,index:e,height:c.model.rowHeight.get(M()(e))||c.model.row_height,index_offset:c.model.page_index*c.model.page_size,data:l,rowStruct:r,customRowClass:c.model.customRowClass,getRowStyle:c.getRowStyle,current_page:c.model.current_page,page_size:c.model.page_size,getRowBackgroundColor:c.model.rowBackgroundColorFunc,row_space:c.model.row_space,customCellClass:c.model.customCellClass,row_height:c.model.rowHeight.get(M()(e)),lineClamp:c.model.lineClamp,offsetHeight:s,rowHeightMap:c.model.rowHeight,mergeColumns:c.model.merge_columns,indexStyle:c.model.indexStyle,dirty:c.model.dirty,leftOrRight:"right",needBgClolr:c.needBgClolr,setTitle:c.model.set_title,diffDirty:c.model.diffDirty,id_key:c.model.id_key});Fe()(m).call(m,".right-fix-content .table-body").append(_);var p=angular.copy(null===(i=c.model.operate_row)||void 0===i?void 0:Pe()(i).call(i,(function(e){return!o("valueToFunc")(e.hidden)(l)}))),f=c.operate_row_render({index:e,data:l,height:c.model.rowHeight.get(M()(e))||c.model.row_height,operate_row:p,customRowClass:c.model.customRowClass,getRowStyle:c.getRowStyle,getRowBackgroundColor:c.model.rowBackgroundColorFunc,row_space:c.model.row_space,offsetHeight:s,needBgClolr:c.needBgClolr});Fe()(m).call(m,".operate-content .table-body").append(f);var h=c.flex_row_render({flex_cols:t,index:e,height:c.model.rowHeight.get(M()(e))||c.model.row_height,index_offset:c.model.page_index*c.model.page_size,data:l,getRowStyle:c.getRowStyle,customRowClass:c.model.customRowClass,getRowBackgroundColor:c.model.rowBackgroundColorFunc,row_space:c.model.row_space,customCellClass:c.model.customCellClass,row_height:c.model.rowHeight.get(M()(e)),lineClamp:c.model.lineClamp,offsetHeight:s,dirty:c.model.dirty,needBgClolr:c.needBgClolr,setTitle:c.model.set_title,diffDirty:c.model.diffDirty,id_key:c.model.id_key});Fe()(m).call(m,".flex-content .table-body").append(h)}},c.ticking=!1,_e=function(){var e,n,i,a,s,d,u,_=arguments.length>0&&void 0!==arguments[0]&&arguments[0],p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=arguments.length>2?arguments[2]:void 0;if("grid"===c.model.view){var h=Fe()(m).call(m,".virtual-scroll"),b=h.scrollTop(),y=h.height(),x=h.scrollLeft(),k=c.element_width-Z-ee,O=null===(e=c.model)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length;xe=Math.floor(b/c.model.row_height),ke=Math.min(xe+Math.ceil(y/c.model.row_height),O),pe=c.model.max_row,c.max_rowspan&&c.max_rowspan>c.model.max_row&&(pe=c.max_rowspan),xe=Math.max(xe-pe,0),ke=Math.min(ke+pe,O);var D,C=w()(i=c.flex_cols).call(i,(function(e,t){return e.index=t,e})),S=k<0?C:Pe()(C).call(C,(function(e){return e.left+e.width+k>=x&&e.left<=x+k})),P=null===(a=S[0])||void 0===a?void 0:a.index,j=((null==S||null===(s=S[S.length-1])||void 0===s?void 0:s.index)||0)+5;if(c.changePingClass=F,_)B(),z(),U(),J(),F&&F(),Fe()(m).call(m,".table-row").remove(),"table-footer"===(null===(D=c.model.stat_config)||void 0===D?void 0:D.stat_mode)?(N(),K(),Y()):Fe()(m).call(m,".table-footer-cell").remove();if(p){F&&F();for(var T=P;T<j;T++)de(T,c.flex_cols);oe(P,j)}else{for(var I=xe;I<ke;I++)ue(I,S);te(xe,ke,_)}c.ticking=!1,Fe()(m).call(m,".table-header-cell").unbind("click").on("click",(function(e){null==e||e.stopPropagation(),V($(this).attr("col-key")),c.$apply()})),Fe()(m).call(m,".select-all").unbind("click").on("click",(function(e){null==e||e.stopPropagation(),H(),c.$apply()})),Fe()(m).call(m,".table-row").unbind("click").on("click",(function(e){var t=c.model.data[M()($(this).attr("row-index"))];c.onRowClick(t,e),c.$apply()})),Fe()(m).call(m,".table-cell").unbind("click").on("click",(function(e){var t,n,i,o,a,l,r,s=M()($(this).parents(".table-row").attr("row-index")),d=$(this).attr("col-key");if((null===(t=c.model.struct)||void 0===t||null===(n=t[s])||void 0===n||null===(i=n[d])||void 0===i?void 0:i.rowspan)>1)e.stopPropagation();else if(!((null===(o=c.model.struct)||void 0===o||null===(a=o[s])||void 0===a||null===(l=a[d])||void 0===l?void 0:l.colspan)>1)){var u=c.model.data[s],_=null===(r=Pe()(ne).call(ne,(function(e){return e.key===d})))||void 0===r?void 0:r[0];c.onCellClick(e,u,_),c.$apply()}})),"modify"===(null===(d=c.model)||void 0===d?void 0:d.state)&&"grid"===(null===(u=c.model)||void 0===u?void 0:u.view)&&Fe()(m).call(m,".table-cell").off("contextmenu").contextmenu((function(e){var t,n=this,i=c.model.data[M()($(this).parents(".table-row").attr("row-index"))],o=null===(t=Pe()(ne).call(ne,(function(e){return e.key===$(n).attr("col-key")})))||void 0===t?void 0:t[0];c.onCellRightClick(e,i,o),c.$apply()})),t((function(){Fe()(m).call(m,".fix-right-content.operate-content .table-row .operate-cell").unbind("click").on("click",(function(e){e&&e.stopPropagation()})),Fe()(m).call(m,".table-row .operate-cell .operate").unbind("click").on("click",(function(e){e&&e.stopPropagation(),G(M()($(this).parents(".table-row").attr("row-index")),$(this).attr("operate-key"),e,$(this).attr("operate-label")),c.$apply()}))})),Fe()(m).call(m,".col-resize").unbind("mousedown").on("mousedown",(function(e){X(e)})),Fe()(m).call(m,".row-resize").unbind("mousedown").on("mousedown",(function(e){Q(e)})),we()(A)}function F(){if(x-Ro>=he-m.width()){var e,t,n,i;(null===(e=ve)||void 0===e||null===(t=e.attr("class"))||void 0===t?void 0:ae()(t).call(t,"ping-right"))&&ve.removeClass("ping-right"),(null===(n=ye)||void 0===n||null===(i=n.attr("class"))||void 0===i?void 0:ae()(i).call(i,"ping-right"))&&ye.removeClass("ping-right")}else{var o,a,l,r,s,d;if(!c.right_fix||!c.right_fix.length)(null===(l=ve)||void 0===l||null===(r=l.attr("class"))||void 0===r?void 0:ae()(r).call(r,"ping-right"))||ve.addClass("ping-right");if(c.right_fix&&c.right_fix.length)(null===(s=ve)||void 0===s||null===(d=s.attr("class"))||void 0===d?void 0:ae()(d).call(d,"ping-right"))&&ve.removeClass("ping-right");(null===(o=ye)||void 0===o||null===(a=o.attr("class"))||void 0===a?void 0:ae()(a).call(a,"ping-right"))||ye.addClass("ping-right")}var u,_,p,f;x>0?(null===(u=ge)||void 0===u||null===(_=u.attr("class"))||void 0===_?void 0:ae()(_).call(_,"ping-left"))||ge.addClass("ping-left"):(null===(p=ge)||void 0===p||null===(f=p.attr("class"))||void 0===f?void 0:ae()(f).call(f,"ping-left"))&&ge.removeClass("ping-left")}function R(e){return w()(e).call(e,(function(e){var t,n,i,a,l,s,d,u,_=null===(t=c.model.stat_meta)||void 0===t?void 0:Fe()(t).call(t,(function(t){return t.key===e.key})),p=null!==(n=null==_?void 0:_.field)&&void 0!==n?n:null,m=null===(i=c.model.stat_config)||void 0===i?void 0:i.formatter,f=function(e,t){var n,i,a=t.split(":");return ae()(n=[void 0,null,""]).call(n,e)?e:o(a[0]).apply(void 0,ie()(i=[e]).call(i,so()(r()(a).call(a,1))))},h=null===(a=c.model.stat_data)||void 0===a||null===(l=a[0])||void 0===l?void 0:l[p];if(_&&(u=0,g()(d=re()(c.model.dirty)).call(d,(function(t){try{var n,i;if(null==t?void 0:L()(n=t.toString()).call(n,"a_"))"sum"===_.type&&(u+=E()(o("getJSON")(e.field,c.model.dirty[t]).toString()));else if(null==t?void 0:L()(i=t.toString()).call(i,"d_"))"sum"===_.type&&(u+=-E()(o("getJSON")(e.field,c.model.dirty[t]).toString()));else{var a;"sum"===_.type&&(u+=E()(o("getJSON")(e.field,c.model.dirty[t]).toString())-E()(o("getJSON")(e.field,Fe()(a=c.model.data).call(a,(function(e){return e.id==t}))).toString()))}}catch(e){}})),"sum"===_.type&&u&&o("isValidValue")(h)&&(h=(E()(h.toString())+u).toFixed(_.decimal||2)),h=o("hcNumber")(h,_.decimal||c.model.statistics_decimal||_.precision||0)),m)if(q()(m)){var v,b=Ao(m);try{for(b.s();!(v=b.n()).done;){var y=v.value;h=f(h,y)}}catch(e){b.e(e)}finally{b.f()}}else h=f(h,m);return{key:e.key,value:"hcm_index"===e.key?"合计":null!==(s=h)&&void 0!==s?s:null}}))}function B(){var e=f.getFixTableHeader(c.model.columnDefs,c.fix_cols,st()(c.model),W,c.model.selector_type,c.model.header_row_height);Fe()(m).call(m,".fix-left-content .table-header").html(v(e)(c)),Fe()(m).call(m,".table-row").remove()}function U(){var e=f.getRightFixTableHeader(c.model.columnDefs,c.right_fix,st()(c.model),W,c.model.selector_type,c.model.header_row_height);Fe()(m).call(m,".right-fix-content .table-header").html(v(e)(c)),Fe()(m).call(m,".table-row").remove()}function z(){var e=f.getFlexTableHeader(c.model.columnDefs,c.flex_cols,st()(c.model),c.model.header_row_height);Fe()(m).call(m,".flex-content .table-header").html(v(e)(c))}function N(){var e,t=c.fix_footer_render({cols:c.fix_cols,stat_list:R(c.fix_cols)});if(Fe()(m).call(m,".fix-left-content .table-footer").html(t),null===(e=c.model.stat_config)||void 0===e?void 0:e.multi_stat){var n=Fe()(m).call(m,".fix-left-content .table-footer div[col-key='hcm_index']");n.children().addClass("after"),n[0].addEventListener("click",(function(){Fe()(n).call(n,"hc-super-selector .component-container ").click()})),c.model.footer_stat_mode&&n.children().text(c.model.footer_stat_mode_name),n.append('<hc-super-selector\n                                ng-model="model"\n                                options="options">\n                            </hc-super-selector>');var i=l.$new();i.model=c.model.footer_stat_mode,i.options={list:[{id:"sum",name:"合计"},{id:"min",name:"最小值"},{id:"max",name:"最大值"},{id:"avg",name:"平均"}],change:c.model.stat_mode_change,skipInitChange:!0},c.changeStatModeElement=v(n)(i)}}function K(){var e=c.flex_footer_render({cols:c.flex_cols,stat_list:R(c.flex_cols)});Fe()(m).call(m,".flex-content .table-footer").html(e)}function Y(){var e=c.fix_footer_render({cols:c.right_fix,stat_list:R(c.right_fix)});Fe()(m).call(m,".right-fix-content .table-footer").html(e)}function J(){var e=c.operate_header_render({header_height:c.getHeaderHeight(),Operates:c.model.operate_row_name||o("translate")("Operates")||"操作"});Fe()(m).call(m,".operate-content .table-header").html(e)}function te(e,t,n){if(c.model.group_fields&&(!n||e)){var i,o=e,a=angular.element('.fix-left-content .table-row[row-index="'+e+'"]');w()(i=c.model.group_fields).call(i,(function(e,t){var n;if(0===c.model.struct[o][e].rowspan){for(var i,l=Fe()(n=$(a)).call(n,'div.table-cell[col-key="'.concat(e,'"]'))[0],r=o;r>=0;r--)if(c.model.struct[r][e].rowspan>0){c.max_rowspan=Math.max(c.max_rowspan,c.model.struct[r][e].rowspan),i=r;break}for(var s=0,d=o;d<c.model.struct[i][e].rowspan;d++)s+=c.model.rowHeight.get(i+d);l.style.height="".concat(s,"px")}}))}Fe()(m).call(m,".table-row").each((function(n,i){var o=M()(i.getAttribute("row-index"));(o<e||o>t)&&i.remove()}))}function oe(e,t){Fe()(m).call(m,".flex-content .table-row >div").each((function(n,i){var o=M()(i.getAttribute("col-index"));(o<e||o>t)&&i.remove()}))}},c.getTableFontSize=function(){return c.model.font_size||"14px"},c.getPanelWidth=function(e){var t=0;if(c.meta_cols){var n="fix"===e?c.fix_cols:c.flex_cols;return null==n||w()(n).call(n,(function(e){t+=e.width||80})),t}},c.getOperateWidth=function(){if(c.meta_cols)return c.model.operate_width},c.trueOperateWidth=function(){var e;return M()((null===(e=c.model.operate_row)||void 0===e?void 0:e.length)&&!o("valueToFunc")(c.model.hide_operate_row)()?c.model.operate_width:0)},c.getRightFixWidth=function(){var e;if(c.meta_cols){var t=0;return null===(e=c.right_fix)||void 0===e||w()(e).call(e,(function(e){t+=e.width||80})),t}},c.setViewTemplate=function(){var e;if(null===(e=c.model)||void 0===e?void 0:e.view){var t,n,i,o=null===(t=c.model)||void 0===t?void 0:t.view;null===(n=Bo[null===(i=c.model)||void 0===i?void 0:i.view].template())||void 0===n||n.then((function(e){var t,n,i,a,l=e.default;o===c.model.view&&("pc"===window.client&&(l='<div class="selected-count" ng-class="model.selected_items.length?\'selected-count-show\':\'selected-count-hide\'"\nng-if="model.selector_type===2" >\n<span ng-click="SelectedInfo()"> {{\'Selected\'|translate}} <span class="sys-color font-bold">{{model.selected_items.length}}</span> {{\'pageCountUnit\'|translate}}</span>\n<span class="icon-hcm-broom" hc-title="{{\'清空\'}}" options="{mode: \'tip\'}" ng-click="clearSelectedItems($event)"></span>\n</div>'+l),c.currentView=o,m.html(l),v(m.contents())(c),f.addWatermarkWhenConfig({watermark_txt:(null===(t=c.auth)||void 0===t||null===(n=t.employee)||void 0===n?void 0:n.name)+" \n "+(null===(i=c.auth)||void 0===i||null===(a=i.user)||void 0===a?void 0:a.cell_phone),ele_selector:"hc-list-new",watermark_fontsize:"20px"}))}))}},c.setViewTemplate(),pe=5,c.max_rowspan=0,$e=0,Oe=ho()((function(){var e,t,n,i,l,s;le(),Object(Co.c)()||Fe()(m).call(m,".table-header").addClass("hc-list-position-relative"),"IE"===Object(Co.b)()&&Fe()(m).call(m,".fix-left-content, .operate-content, .right-fix-content").addClass("z-index-0"),ge=Fe()(m).call(m,".fix-left-content"),ve=Fe()(m).call(m,".operate-content"),ye=Fe()(m).call(m,".right-fix-content"),c.meta_cols=ce();var d=c.model.tableHeader=a.getHeader(c.model.columnDefs,c.meta_cols);if(me=d.defaultFieldWidth,fe=d.defaultFieldHeight,c.getHeaderHeight=function(){return(d.depth?d.depth:1)*c.model.header_row_height},c.model.columnDefs.length){c.model.header_row_height=30;var u=d.separateOriginalDefs(c.model.columnDefs),_=ro()(u,3);c.fix_cols=_[0],c.flex_cols=_[1],c.right_fix=_[2],c.fix_cols=ie()(oe).call(oe,c.fix_cols),c.fix_cols.length}else c.flex_cols=Ni()(Pe()(ne).call(ne,(function(e){return!(o("valueToFunc")(e.hide)()||e.fixed||e.is_selector||e.is_index||e.is_favorite)}))),c.model.fix_count,c.fix_cols=ie()(oe).call(oe,Pe()(ne).call(ne,(function(e){return!o("valueToFunc")(e.hide)()&&e.fixed&&"right"!==e.fixed}))),c.right_fix=Pe()(ne).call(ne,(function(e){return!o("valueToFunc")(e.hide)()&&"right"===e.fixed}));null===(e=c.fix_cols)||void 0===e||w()(e).call(e,(function(e){Z+=e.width||80})),null===(t=c.right_fix)||void 0===t||w()(t).call(t,(function(e){ee+=e.width||80}));var p,f=function(e){g()(e).call(e,(function(t,n){var i;t.width=t.width||80,t.left=se(w()(i=r()(e).call(e,0,n)).call(i,(function(e){return e.width})))}))},h=M()((null===(n=c.model.operate_row)||void 0===n?void 0:n.length)&&!o("valueToFunc")(c.model.hide_operate_row)()?c.model.operate_width:0);if(he=c.getPanelWidth("fix")+c.getPanelWidth("flex")+c.getRightFixWidth()+c.trueOperateWidth(),c.element_width=m.width()-Ro,c.element=m,he<c.element_width&&(null===(i=c.flex_cols)||void 0===i?void 0:i.length)&&!c.model.fixed_width){var v,b,y,x,k,$,O,D=c.element_width-h-se(w()(v=c.fix_cols).call(v,(function(e){return e.width})))-se(w()(b=c.right_fix).call(b,(function(e){return e.width}))),C=se(w()(y=c.flex_cols).call(y,(function(e){return e.width})));w()(x=r()(k=c.flex_cols).call(k,1)).call(x,(function(e){return e.width=Math.round(e.width/C*D)})),c.flex_cols[0].width=D-se(w()($=r()(O=c.flex_cols).call(O,1)).call($,(function(e){return e.width}))),c.model.columnDefs=function e(t,n){for(var i=function(i){if(t[i].children)t[i].children=e(t[i].children,n);else{var o=Fe()(n).call(n,(function(e){return e.key===t[i].key}));(null==o?void 0:o.width)&&(t[i].width=o.width)}},o=0;o<t.length;o++)i(o);return t}(c.model.columnDefs,c.flex_cols),he=c.element_width,c.isScale=!0}else c.isScale=!1;c.model.columnDefs.length&&d.calcColumnDefs(c.model.columnDefs,oe),f(c.fix_cols),f(c.flex_cols),p=c.right_fix,g()(p).call(p,(function(e,t){var n;e.width=e.width||80,e.right=se(w()(n=r()(p).call(p,0,t)).call(n,(function(e){return e.width})))}));var S=c.model.tableHeight-12,E=0;"table-footer"===(null===(l=c.model.stat_config)||void 0===l?void 0:l.stat_mode)&&(S=c.model.tableHeight-12-2,E=36),ae()(s=c.model.hideComponents||[]).call(s,"hcm-hc-list-table-header")&&(S=c.model.tableHeight-12-c.getHeaderHeight());var P=function(){var e,t=(null===(e=c.model)||void 0===e?void 0:e.operate_bottom)?Fe()(m).call(m,".hc-list-grid-new .operate-bottom").height():0;Fe()(m).call(m,".virtual-scroll-container").height(Math.max(m.height()-12-t-2,S)),Fe()(m).call(m,".virtual-scroll-container").width(he),Fe()(m).call(m,".virtual-scroll-container").width()>Fe()(m).call(m,".virtual-scroll").width()?Fe()(m).call(m,".table-footer").css("top",m.height()-E-12):Fe()(m).call(m,".table-footer").css("top",m.height()-E)};P(),window.addEventListener("resize",P),De(),_e(!0,!1,d),Fe()(m).call(m,".virtual-scroll").unbind("scroll").scroll((function(e){if(!c.ticking){var t=e.currentTarget.scrollLeft!==$e;$e=e.currentTarget.scrollLeft,requestAnimationFrame((function(){return _e(!1,t,d)}))}})),"pc"===c.client&&c.changePingClass&&c.changePingClass()}),100),De=function(){var e;g()(e=c.model.data).call(e,(function(e,t){!c.model.rowHeight.get(t)&&c.model.rowHeight.set(t,c.model.row_height)}))},c.calcColor=function(e){var t,n;return c.model.rowBackgroundColorFunc&&(n=c.model.rowBackgroundColorFunc(c.model.data[e]))&&("#theme_color"===(n="#"+n)&&(n=o("themeColor")),t=n.colorRgb()),t||"moderate"!==c.model.row_space||(t=e%2==1?"#fafafa":"#fff"),t||"#fff"},c.$watch("model.timestamp",(function(e){e&&(Oe(),F(),"tree"===c.model.view&&c.modifyContentWidth())}),!0),c.$watch("model.merge_columns",(function(e){"pc"===c.client&&(null==e?void 0:e.length)&&Oe(),(null==e?void 0:e.length)&&(c.isInit=!0)}),!1),c.$on("collapse-menu",(function(){t((function(){Oe()}),0)})),c.$watch("max_rowspan",(function(e,t){e&&t&&e>t&&e>pe&&Oe()})),c.$watch("model",(function(e){e&&(c.model.changeSelectedStatus=function(e){var t,n=s()(t=c.model.data).call(t,e);if(2===c.model.selector_type){var i,o=Fe()(m).call(m,".fix-left-content .table-row[row-index='".concat(n,"']")),a=~c.model.isSelected(e);Fe()(o).call(o,".tag-to-select").addClass(a?"icon-hcm-click-rectangle-radius-solid sys-color":"icon-hcm-none-rectangle-radius"),Fe()(o).call(o,".tag-to-select").removeClass(a?"icon-hcm-none-rectangle-radius":"icon-hcm-click-rectangle-radius-solid sys-color");var l=Fe()(m).call(m,".table-row[row-index='".concat(n,"']"));l.css("background",a&&c.selectedBackground?c.selectedColor:c.calcColor(n)),Fe()(i=l.parents(".virtual-scroll-container")).call(i,'.table-row[row-index="'+n+'"]').removeClass("row-hover"),F()}else if(1===c.model.selector_type){var r=Fe()(m).call(m,".fix-left-content .table-row");w()(r).call(r,(function(t,i){var o,a,l=c.model.isSelected(e)>-1&&n===M()($(i).attr("row-index"));Fe()(o=$(i)).call(o,".tag-to-select").addClass(l?"icon-hcm-click-rectangle-radius-solid sys-color":"icon-hcm-none-rectangle-radius"),Fe()(a=$(i)).call(a,".tag-to-select").removeClass(l?"icon-hcm-none-rectangle-radius":"icon-hcm-click-rectangle-radius-solid sys-color")}));var d=Fe()(m).call(m,".table-row");w()(d).call(d,(function(t,i){var o,a=c.model.isSelected(e)>-1&&n===M()($(i).attr("row-index"));$(i).css({background:a&&c.selectedBackground?c.selectedColor:c.calcColor(M()($(i).attr("row-index")))}),Fe()(o=$(i).parents(".virtual-scroll-container")).call(o,'.table-row[row-index="'+n+'"]').removeClass("row-hover")}))}})})),c.$watch("model.view",(function(e,t){e&&e!==c.currentView&&c.setViewTemplate()})),c.client=window.client,c.checkBoxIcon="pc"===window.client?{empty:"icon-hcm-none-rectangle-radius",part:"icon-minus-rectangle-radius-solid sys-color",full:"icon-hcm-click-rectangle-radius-solid"}:{empty:"icon-hcm-none-circle",part:"icon-minus-rectangle-radius-solid sys-color",full:"icon-submit"},c.showCheckBox=function(){return!!c.model.selector_type&&("pc"===window.client||(c.model.outside_select||c.model.is_child_list||c.model.select_status))},c.expandComparedInfo=function(e,t){e&&e.stopPropagation();var n=$("#"+t.id+"compare").get(0);n.style["white-space"]=t.expand_index?"unset":"nowrap",n.style.height=t.expand_index?"unset":"43px",t.expand_index=!t.expand_index},c.showMore=function(e){e&&e.stopPropagation(),c.no_more_data=!c.no_more_data},c.card_operate_clicked=function(e,t){t.stopPropagation(),d.getDialog({controller:"HCListCardOperateController",template:n("J0VW"),mask:!1,size:"auto-size",maskClose:!0,width:160}).params({operates:c.model.operate_row}).anchor(angular.element(t.target)).show().then((function(t){t.func(e)}))},c.showOperateCell=function(e,t){c.model.current_row=c.model.operate_row?t:null},c.datasource={get:function(e,n,i){t((function(){var t,o="edit_table_tree"===c.model.view?c.model.tree_node:c.model.data,a=(e-=1)<0?0:e,l=e<0?n+e:n,s=w()(t=o||[]).call(t,(function(e,t){return t})),d=r()(s).call(s,a,a+l);i(d)}),100)},getRowData:function(e){return"edit_table_tree"===c.model.view?c.model.tree_node[e]:c.model.data[e]}},c.updateEditTable=ho()((function(){var e,t;if(angular.isFunction(null===(e=c.model)||void 0===e||null===(t=e.adapter)||void 0===t?void 0:t.reload)){var n,i,o,a,l,r=null;if("edit_table"===(null===(n=c.model)||void 0===n?void 0:n.view)?r=c.model.data:"edit_table_tree"===(null===(i=c.model)||void 0===i?void 0:i.view)&&(r=c.model.tree_node||[]),!r)return;if(c.model.adapter.bufferFirst>r.length-1)return void c.model.adapter.reload();for(var s=null===(o=c.model)||void 0===o?void 0:o.adapter.bufferFirst;(null===(d=c.model)||void 0===d?void 0:d.adapter.isBOF())&&s>0;){var d;c.model.adapter.prepend([s]),s--}for(s=null===(a=c.model)||void 0===a?void 0:a.adapter.bufferLast;s>r.length-1;)c.model.adapter.applyUpdates(s+1,[]),s--;for(s=(null===(l=c.model)||void 0===l?void 0:l.adapter.bufferLast)+1;(null===(u=c.model)||void 0===u?void 0:u.adapter.isEOF())&&s<r.length;){var u;c.model.adapter.append([s]),s++}}}),500),c.wrapInfinityScroll=function(e){return e-1},c.onRowDelete=function(e,t){t&&t.stopPropagation();var n=c.model.data,i=-1;ao()(n).call(n,(function(t,n){if(t===e)return i=n,!0})),-1!==i?d.confirm("是否确认删除行").then((function(){var e;b()(e=c.model.data).call(e,i,1),c.model.selected_item=null})):l.show_warning("没有找到数据","warning")},c.getClass=function(){var e,t,n;return ie()(e="".concat(null===(t=c.model)||void 0===t?void 0:t.style," ")).call(e,null===(n=c.model)||void 0===n?void 0:n.row_space)},c.getCardContentWidth=function(){var e,t;return"calc(100% - ".concat(52*Boolean(null===(e=c.model.message_meta)||void 0===e||null===(t=e.content)||void 0===t?void 0:t.img)+24*Boolean("mobile"===c.client&&c.showCheckBox()),"px)")},c.getThClass=function(e){return"".concat(e.display?"hidden":"")},c.getCellClass=function(e,t){var n,i,o;return ie()(n="td-content ".concat(null!==(i=c.model.customCellClass(e,t))&&void 0!==i?i:""," ")).call(n,(null===(o=e.display)||void 0===o?void 0:ae()(o).call(o,t.key))?"hidden":"")},c.rowspan=function(e,t){return e.rowspan&&e.rowspan[t.key]||1},c.touch={},c.rowTouchStart=function(e,t){var n,i,o;if((null===(n=c.model)||void 0===n||null===(i=n.operate_row)||void 0===i?void 0:i.length)&&!(null===(o=c.model)||void 0===o?void 0:o.slider_hide)){c.lastOperateRow&&c.lastOperateRow!==e.currentTarget&&(c.lastOperateRow.style.transform="translate3d(0,0,0)");var a=e.touches[0];c.touch.initiated=!0,c.touch.moved=!1,c.touch.startX=a.pageX,c.touch.operatesWidth=Fe()(m).call(m,".row-operates").eq(t).outerWidth(),e.currentTarget.style.transition=""}},c.rowTouchMove=function(e){if(c.touch.initiated){var t,n=e.touches[0].pageX-c.touch.startX;if(c.touch.percent=-n/window.innerWidth,c.touch.moved||(c.touch.moved=!0),n>0){if(!c.touch.toEndFlag)return;t=Math.min(n,c.touch.operatesWidth)-c.touch.operatesWidth}else-n>c.touch.operatesWidth?(t=-c.touch.operatesWidth,c.touch.toEndFlag=!0):t=n;e.currentTarget.style.transform="translate3d(".concat(t,"px,0,0)")}},c.rowTouchEnd=function(e,t){var n;c.touch.moved&&(c.touch.percent>.15?(c.touch.toEndFlag=!0,n=c.touch.operatesWidth):c.touch.percent>-.15&&c.touch.percent<0?c.touch.toEndFlag&&(n=c.touch.operatesWidth):(n=0,c.touch.toEndFlag=!1),e.currentTarget.style.transform="translate3d(-".concat(n,"px,0,0)"),e.currentTarget.style.transition="transform 0.5s",c.touch.initiated=!1,c.touch.moved=!1,c.lastOperateRow=e.currentTarget)},c.slider_click=function(e,t,n){t&&(t.action?c.model.action_func(t.action,e,null,n,c.model):null==t||t.func(e,n,c.model.data,c.model)),c.lastOperateRow&&(c.lastOperateRow.style.transform="translate3d(0,0,0)")},c.chooseTimeTemplate=function(e,t,n){return n?o("infoDefault")(o(n)(o("hcListCellData")(e,t))):o("infoDefault")(o("hcListCellData")(e,t))},c.colorTint=function(e,t){return Object(i.e)(e,t)},c.tag3InputCutomBlur=function(e,t){delete this.showTag3Input,c.model.operate_alter("add_tag",this,t)},l.$on("tagModeChange",(function(e,t){c.model.tagMode=t.mode}));case 126:case"end":return e.stop()}}),e)})));return function(t,n,i,o,a,l,r,c){return e.apply(this,arguments)}}()]}}]),O.a.factory("$hcListNew",Go),Go.$inject=["contextService","$filter","$timeout","$rootScope","$state","$compile"],Pe()(O.a).call(O.a,"hcListCellHtml",(function(){return function(e,t){return t.html?"function"==typeof t.html?t.html(e):t.html:null}})),Pe()(O.a).call(O.a,"hcListCardData",(function(){return function(e,t){return"function"==typeof t?t(e):"string"==typeof t?t:(n=t,i=e,Yn()(n).call(n,(function(e,t){return e&&e[t]?e[t]:null}),i));var n,i}})),Pe()(O.a).call(O.a,"infoDefault",["contextService",function(e){return function(t,n){var i,o;return t||0===t?t:null!=n?n:null===(i=e.getContext("auth"))||void 0===i||null===(o=i.company_setting)||void 0===o?void 0:o.default_empty_string}}]);var Jo=n("sAGr"),Xo=n.n(Jo),Qo=function(){function e(e){this.$rootScope=e}return e.$inject=["$rootScope"],e}();O.a.component("hcListNoData",{bindings:{model:"=",uuid:"=",caption:"@"},template:Xo.a,controller:Qo});var Zo=n("44dG"),ea=n.n(Zo),ta=n("g3xB"),na=n.n(ta),ia=n("aVq/"),oa=n.n(ia),aa=n("q4Ec"),la=n.n(aa),ra=n("Bekm"),ca=n.n(ra),sa=n("ZU4R"),da=n.n(sa);n("pjaa"),n("Pvu3"),n("A/cb");function ua(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=ua(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=ua(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}function pa(e){var t=function(t,n){var i,o,a;return i=t,(!(o=void 0===n?void 0:n?"mobile":"pc")||!i.target||~s()(a=i.target).call(a,o))&&!e("valueToFunc")(t.hide)()};return{createListBtn:function(n){return{actions:[],max:4,actionParser:null,contentList:n,meta:[],debounce:1e3,_available_actions:[],_dialog_actions:[],outer_btn_count:2,show_third_btn:!0,style:"btn-pc",selector_type:null,select_status:null,un_select_actions:[],select_actions:[],actions_group:[],alwaysShowSelect:!1,exit_select_mode_on_click:!0,$setOptions:function(e){return angular.extend(this,e),this},getAction:function(e){var t;return Fe()(t=this.actions).call(t,(function(t){return t.key===e}))},setDebounce:function(e){return this.debounce=e},updateAvailableActions:function(e){this._available_actions=[];var t=[];!function e(t,n,i){w()(t).call(t,(function(t){t.key=(i||"")+">"+t.key,n.push(t),t.actions&&e(t.actions,n,t.key)}))}(angular.copy(e),t),this._available_actions=angular.copy(t),this.set_dialog_actions()},visible_actions:function(e){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new RegExp("^"+(e?e+"\\S+$":">[^>]+$"));return Pe()(n=this._available_actions).call(n,(function(e){return t(e,i)&&o.test(e.key)}))},mobile_actions:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?this.dialog_actions(!0):this.simple_actions(!0)},simple_actions:function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Pe()(e=this._available_actions).call(e,(function(e){return t(e,n)&&!e.actions}))},dialog_actions:function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Pe()(e=this._dialog_actions).call(e,(function(e){return t(e,n)&&!e.actions}))},sort_actions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t,n,i,o=Be()(t=this.actions).call(t,(function(e){var t;return null==e||null===(t=e.options)||void 0===t?void 0:t.mobile_sequence}))>-1;o&&w()(n=this.actions).call(n,(function(e){var t;return io()(null==e||null===(t=e.options)||void 0===t?void 0:t.mobile_sequence)&&(e.sequence=e.options.mobile_sequence),e})),o&&st()(i=this.actions).call(i,(function(e,t){return e.sequence-t.sequence}))}},filterActions:function(t){return Pe()(t).call(t,(function(t){return!e("valueToFunc")(null==t?void 0:t.hide)()}))},mobile_outside_actions:function(){var e;return null===(e=this.actions)||void 0===e?void 0:Fe()(e).call(e,(function(e){var t;return!0===(null===(t=e.options)||void 0===t?void 0:t.mobile_outside_action)}))},set_show_third_btn:function(e){this.show_third_btn=e},set_dialog_actions:function(){var e,n=Pe()(e=this._available_actions).call(e,(function(e){return t(e)&&!e.actions})),i=n.length,o=Pe()(n).call(n,(function(e){return">back"===e.key}))[0],a=Pe()(n).call(n,(function(e){return">submit"===e.key}))[0];o&&b()(n).call(n,s()(n).call(n,o),1),a&&b()(n).call(n,s()(n).call(n,a),1),o&&b()(n).call(n,0,0,o),i>=3?a&&b()(n).call(n,1,0,a):a&&b()(n).call(n,n.length,0,a),this._dialog_actions=n},translateActions:function(t){w()(t).call(t,(function(t){var n;ae()(n=["flex_field","setup","new","edit","delete","print","back","submit"]).call(n,t.key)&&(t.label=e("translate")(t.key)||t.label)}))},getActionsGroup:function(){var t,n,i,o,a,l=this;this.common_used_actions=r()(t=Pe()(n=this._available_actions).call(n,(function(t){return(t.icon||t.mobileOutsideBtn)&&!e("valueToFunc")(t.hide)()}))).call(t,0,this.mobileMax),this.actions_group={un_select_actions:null===(i=this._available_actions)||void 0===i?void 0:Pe()(i).call(i,(function(e){var t;return!(e.actions||e.condition&&"ALL_ITEMS"!==e.condition||ae()(t=l.common_used_actions).call(t,e))})),select_actions:null===(o=this._available_actions)||void 0===o?void 0:Pe()(o).call(o,(function(e){var t,n;return!e.actions&&("ALL_ITEMS"===e.condition||(2===l.selector_type?ae()(t=["MULTI_ITEM","ITEM"]).call(t,e.condition):ae()(n=["ITEM"]).call(n,e.condition)))}))},"mobile"===window.client&&(this.actions_group.select_actions=null===(a=this.actions_group.select_actions)||void 0===a?void 0:w()(a).call(a,(function(e,t){return e.is_important=1===t,e})))},$setMeta:function(e,t){return this.actions=Pe()(e).call(e,(function(e){var t,n;return!(null===(t=e.target)||void 0===t?void 0:t.length)||ae()(n=e.target).call(n,window.client)})),window.hcm_language&&"zh_cn"!==window.hcm_language&&this.translateActions(this.actions),this.sort_actions("mobile"===window.client),this.updateAvailableActions(this.actions),this.getActionsGroup(this.actions),"number"==typeof t&&/(^\d+$)/.test(t)&&(this.max=t),this},$setShowMax:function(e){return this.max=e,this},$setMobileShowMax:function(e){return this.mobileMax=e>=4?4:e,this.getActionsGroup(),this},$setActionParser:function(e){return this.actionParser=e,this},$setStyle:function(e){return this.style=e,this},$setOuterBtnCount:function(e){return this.outer_btn_count=e,this},$setSelectorType:function(e){return this.selector_type=e,this.getActionsGroup(this.actions),this},$setExitSelectModeOnClick:function(e){return this.exit_select_mode_on_click=e,this}}}}}O.a.directive("hcListBtn",(function(){return{restrict:"E",scope:{model:"=",direction:"<"},template:ea.a,controller:"hcListCtrl"}})),O.a.directive("hcCircletBtn",(function(){return{restrict:"E",scope:{model:"=",isFix:"="},template:na.a,controller:"hcListCtrl"}})),O.a.directive("hcMobileBtn",(function(){return{restrict:"E",scope:{model:"=",position:"="},template:la.a,controller:"hcListCtrl"}})),O.a.directive("hcMobileHeaderBtn",(function(){return{restrict:"E",scope:{model:"=",position:"="},template:da.a,controller:"hcListCtrl"}})),O.a.directive("hcMobileBottomBtn",(function(){return{restrict:"E",scope:{model:"=",type:"="},template:ca.a,controller:"hcListCtrl"}})),O.a.directive("hcSimpleBtn",(function(){return{restrict:"E",scope:{model:"="},template:oa.a,controller:"hcListCtrl"}})),O.a.controller("hcListCtrl",["$rootScope","$scope","$filter","$hcDialog","$timeout","$element","contextService",function(e,t,n,i,o,a,l){var r,c,d=function(e,t){var n=angular.element(e.target).siblings(".drop-down-sub-list").eq(0),i=$(e.target).offset(),o=44*t.actions.length+4;o=o<527?o:527;var a=i.left+angular.element(e.target)[0].offsetWidth;a+210>document.body.clientWidth&&(a=document.body.clientWidth-i.left),n.css("right",a+1+"px"),i.top-11+o<=document.body.clientHeight?n.css("top",i.top-11+"px"):n.css("top",document.body.clientHeight-o+"px")};(t.init=function(){t.client=window.client,"mobile"===t.client&&t.model&&(t.model.$itemFunc=t.item_func),t.showMoreBtn()},t.showMoreBtn=function(e){var n;e=(null===(n=e)||void 0===n?void 0:n.length)?e:window,o((function(){var n,i,o=null===(n=t.model)||void 0===n?void 0:b()(i=n.visible_actions()).call(i,t.model.max-1);if(o){var l,r=Math.min(44*o.length+18,496);$.isWindow(e)?(l=0,e=$(window)):l=e.offset().top,Fe()(a).call(a,"#showMoreBtn").offset()&&Fe()(a).call(a,"#showMoreBtn").offset().top-l+r+34>e.height()+$(document).scrollTop()&&Fe()(a).call(a,"#showMoreBtn").offset().top-l>r?"up"!==t.direction&&(t.direction="up"):t.direction="down"}}),0)},t.itemIsMoreShow=function(e){return e=e||"__default__",RegExp(e).test(t.itemMoreShow)},t.position=t.position||"",t.direction=t.direction||"down",t.itemMoreShow="",t.btn_element=$("#hcm-btn"),t.menu_element=$(".bottom-menu"),"mobile"===window.client)&&(~s()(r=t.position).call(r,"bottom")&&t.model&&(t.model.page_has_bottom_btn=!0),t.btn_in_dialog=~s()(c=t.type||"").call(c,"dialog"),t.mobile_btn_should_show=function(e){var n,i,o=t.model.simple_actions(!0).length<=t.model.outer_btn_count;return"header"===e?!(t.model.page_has_bottom_btn&&o)&&(~s()(n=t.position).call(n,"header")||!t.position):~s()(i=t.position).call(i,"bottom")&&o});t.highLight=function(e){return!0===e.is_important||!0===e.default},t.changeDragNavStatus=function(e){var t;"mobile"===window.client&&(null===(t=$("dragging-navigate"))||void 0===t||t.css(e?{visibility:"visible"}:{visibility:"hidden"}))},t.showMore=function(e,n,i){var a,l;e.stopPropagation();var r=(null===(a=$(e.target).parents(".hc-dialog-content"))||void 0===a?void 0:a.length)?$(e.target).parents(".hc-dialog-content"):window;t.showMoreBtn(r),t.changeDragNavStatus(!1),"click"===e.type&&i||(t.itemMoreShow=n&&n.key?i?">__more_actions__"+n.key:t.itemIsMoreShow(n.key)?"":n.key:t.itemIsMoreShow("__default__")?"":"__default__",n&&n.actions&&e.target&&-1!==s()(l=e.target.className).call(l,"drop-down-btn-item")&&d(e,n),o((function(){var t,n,i=$(e.currentTarget).parent().children(".drop-down-list");!(null===(t=i)||void 0===t?void 0:t.length)&&(i=$(e.currentTarget).children(".drop-down-sub-list"));var o=null===(n=i.offset())||void 0===n?void 0:n.left;o<0&&i.css("max-width","".concat(i.width()+o-8,"px"))}),0),t.is_more_portal=!t.is_more_portal)},t.showMoreDialog=function(e,o,a){var l,r,c,s,d="BUTTON"===e.target.tagName?angular.element(e.target):angular.element(e.target).parents("button"),u=w()(l=">__more_actions__"===o.key?null===(r=t.model)||void 0===r?void 0:b()(c=r.visible_actions()).call(c,t.model.max-1):Pe()(s=o.actions).call(s,(function(e){return!n("valueToFunc")(e.hide)()}))).call(l,(function(e){var t,i,o,a;(null===(t=e.actions)||void 0===t?void 0:t.length)&&(i=w()(o=Pe()(a=e.actions).call(a,(function(e){return!n("valueToFunc")(e.hide)()}))).call(o,(function(e){return _a(_a({},e),{},{name:n("valueToFunc")(e.label)()})})));return _a(_a({},e),{},{name:n("valueToFunc")(e.label)(),list:i})}));if(d.length){var _=d[0].getBoundingClientRect(),p=_.y,m=_.height,f=_.top,h=window.innerHeight-p-m,g=Math.min(40*u.length,260);f>g&&g>h&&(t.direction="up")}i.dropdownList(u,null,d.length?d:null,{align:"right",direction:t.direction,itemStyles:{minWidth:"200px"}}).then((function(e){t.item_func(e)}))},t.headerShowMore=function(){var e=p()(u.a.mark((function e(n,o,a){var l,r,c,_,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),t.changeDragNavStatus(!1),"click"!==n.type||!a){e.next=4;break}return e.abrupt("return");case 4:return t.itemMoreShow=o&&o.key?a?">__more_actions__"+o.key:t.itemIsMoreShow(o.key)?"":o.key:t.itemIsMoreShow("__default__")?"":"__default__",o&&o.actions&&n.target&&-1!==s()(l=n.target.className).call(l,"drop-down-btn-item")&&d(n,o),t.is_more_portal=!t.is_more_portal,e.next=9,i.btnActions(t.model,{});case 9:r=e.sent,c=ro()(r,2),_=c[0],p=c[1],"select"===_&&t.select(p),"action"===_&&t.item_func(p);case 15:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),t.$on("win_body_click_event",(function(){t.isFix||(t.itemMoreShow="")})),t.$on("btn_select_status",(function(e,n){t.model.select_status=n}));t.debounceTimerQueue={},t.btn_func_map=new ut.a;var _=function(e){var n,i,o,a,r,c,d;return t.btn_func_map.get(e)||(e.key&&-1===s()(n=e.key).call(n,">undefined")?t.btn_func_map.get(e.key):null)||(i=e,d=k()((function(){return m(i)}),M()((null===(o=i.options)||void 0===o?void 0:o.debounce)||(null===(a=l.getContext("auth"))||void 0===a||null===(r=a.company_setting)||void 0===r?void 0:r.btn_debounce_time))||t.model.debounce||1e3,{leading:!0,trailing:!1}),t.btn_func_map.set(i,d),i.key&&-1===s()(c=i.key).call(c,">undefined")&&i.key&&t.btn_func_map.set(i.key,d),d)},m=function(){var e=p()(u.a.mark((function e(i){var a,l,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(!n("valueToFunc")(i.disabled)()){e.next=4;break}return e.abrupt("return");case 4:if(!(null===(a=i.options)||void 0===a?void 0:a.set_debounce)){e.next=11;break}if(r=function e(){i.count=i.count-1,0===i.count&&delete t.debounceTimerQueue[i.key]&&o.cancel(t.debounceTimerQueue[i.key]),i.count>0?t.debounceTimerQueue[i.key]=o((function(){e()}),1e3):i.debounce_disabled=!1},!t.debounceTimerQueue[i.key]){e.next=8;break}return e.abrupt("return");case 8:i.count=(null===(l=i.options)||void 0===l?void 0:l.debounce_time)+1,i.debounce_disabled=!0,r();case 11:return e.next=13,i.func&&!1!==i.func_first?i.func():t.model.actionParser&&t.model.actionParser(i);case 13:if(c=e.sent,e.t0=i.after_func,!e.t0){e.next=18;break}return e.next=18,i.after_func(c);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.item_func=function(e,t){var n,i;return null==t||null===(n=t.currentTarget)||void 0===n||n.blur(),null===(i=_(e))||void 0===i?void 0:i()},t.btn_position=$(window).height()-t.btn_element.height()-(t.btn_element.offset()||{}).top+$(document).scrollTop(),t.menu_element&&t.menu_element.height()===t.btn_position&&(t.btn_bottom=!0),t.menu_element||0===t.btn_position&&(t.btn_bottom=!1),t.select=function(e){var n;e&&e.stopPropagation(),t.itemMoreShow="",n=!0,t.$emit("select_status",n),t.model.select_status=n},t.changeMoreSelectActions=function(e,n){e&&e.stopPropagation(),t.show_alter_select_actions=n},t.quit=function(e){t.changeDragNavStatus(!0)},t.$watch("model",(function(e,n){e&&n&&e!==n&&t.init()})),t.$watch("model.actions",(function(e,n){e&&n&&e!==n&&(t.btn_func_map=new ut.a)})),t.$watch("model.visible_actions().length",(function(e,n){e&&n&&e!==n&&t.showMoreBtn()}))}]),O.a.factory("$hcListBtn",pa),pa.$inject=["$filter"],O.a.directive("hcFormInput",["$compile","contextService","$interval",function(e,t,i){window.client;return{restrict:"E",scope:{hcType:"@",hcPrecision:"@",hcLabel:"@",hcModel:"=",hcOptions:"=",hcPlaceHolder:"@",hcReadOnly:"=",hcHeight:"@",hcSingleLine:"=",hcHalfLine:"=",hcNoLabel:"="},template:n("xWhK"),link:function(t,n){t.pickerClick=function(){var e="yyyy-MM-dd";"datetime"==t.hcType?e+=" hh:mm":"time"==t.hcType&&(e="hh:mm"),t.$root.$broadcast("datetime-picker-show",{datetime:t.hcModel,format:e,callback:function(e){t.hcModel=e}})},t.inputFocus=function(){"number"==t.hcType&&(t.hcModel=t.hcModel||null),t.isFocus=!0},t.inputBlur=function(){if("number"==t.hcType){var e=Math.pow(10,t.hcPrecision||0);t.hcModel=Math.round(t.hcModel*e)/e}t.isFocus=!1},t.hcSingleLine&&n.addClass("hc-form-input-single-line"),t.hcReadOnly&&n.addClass("hc-form-input-read-only"),t.hcHalfLine&&n.addClass("hc-form-input-half-line"),t.hcNoLabel&&n.addClass("hc-form-no-label"),t.hcHeight&&(Fe()(n).call(n,".hc-form-input-content")[0].style.height=t.hcHeight);var i=['class="hc-form-input-content-input"','ng-model="hcModel"','ng-focus="inputFocus()"','ng-blur="inputBlur()"','placeholder="{{hcPlaceHolder}}"'].join(" ");t.hcReadOnly&&(i+=" disabled");var o="";switch(t.hcType){default:o="<input "+i+' ng-disabled="hcReadOnly"/>';break;case"number":o='<input type="'+t.hcType+'" '+i+' ng-disabled="hcReadOnly"/>';break;case"select":o="<select ng-options='m.value as m.text for m in hcOptions'"+i+' ng-disabled="hcReadOnly"/>';break;case"date":case"datetime":case"time":var a="yyyy-MM-dd";"datetime"==t.hcType&&(a+=" hh:mm");var l='(hcModel|dateFormat:"'+a+'")';o=t.hcReadOnly?"time"==t.hcType?'<div>{{hcModel||"&nbsp;"}}</div>':"<div>{{"+l+'||"&nbsp;"}}</div>':"time"==t.hcType?'<div ng-click="pickerClick()" class="input-icon icon-hcm-clock icon_calendar"></div><div>{{hcModel||"&nbsp;"}}</div>':'<div ng-click="pickerClick()" class="input-icon icon-hcm-calendar icon_calendar"></div><div>{{'+l+'||"&nbsp;"}}</div>';break;case"textarea":o=t.hcReadOnly?'<div ng-show="hcReadOnly" class="hc-form-input-content-span" ng-bind="hcModel"></div>':"<textarea "+i+"></textarea>"}Fe()(n).call(n,".hc-form-input-content").append(e(o)(t))}}}]);var ma=n("0wIu"),fa=n.n(ma),ha=(n("tt5+"),n("fUpV"),function(e){var t;return!(!e||s()(t=e.toString()).call(t,".")!==e.toString().length-1)}),ga=function(){function e(e,t,n,i,o,l){var r=this;this.$rootScope=e,this.$scope=t,this.$element=n,this.componentDefaultService=i,this.$filter=o,this.$timeout=l,this.focused=!1,this.setDefaultValue=function(){return Object(Pt.c)(r,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.componentDefaultService.setComponentDefault(this.$scope.model,"hc-input",this.$scope.options||{})];case 1:return e=t.sent(),this.$filter("isValidValue")(e)&&(this.$scope.model=e),this.$scope.options&&(this.$scope.options.bordered=this.$scope.options.bordered||!1),[2]}}))}))},this.setType=function(){if(!r.$scope.options.type)switch(r.$scope.options.data_type){case"integer":case"number":case"float":case"numeric":r.$scope.options.type="number"}},this.focus=function(){var e,t;(null===(e=r.$scope.options)||void 0===e?void 0:e.focus)&&Fe()(t=r.$element).call(t,"input").focus()},this.iconFocus=function(){var e;Fe()(e=r.$element).call(e,"input").focus()},this.focusForKeyboard=function(){var e;r.focused=!0,r.$scope.options.customFocus&&r.$scope.options.customFocus(r.$scope,r.$scope.model),r.$timeout(a()(e=function(){var e,t,n=Fe()(e=r.$element).call(e,"input")[0];"mobile"===r.client&&r.isAndroid&&document.documentElement.clientHeight<(n.getBoundingClientRect&&n.getBoundingClientRect().bottom)&&Fe()(t=r.$element).call(t,"input")[0].scrollIntoView({block:"nearest"})}).call(e,r),300)},this.keyPressCheck=function(e){var t,n,i,o=window.event?e.keyCode:e.which;"number"===(null===(t=r.$scope.options)||void 0===t?void 0:t.type)&&"e"===e.key&&e.preventDefault(),13===o&&(e.preventDefault(),null===(i=null===(n=r.$scope.options)||void 0===n?void 0:n.customEnter)||void 0===i||i.call(n,r,r.$scope.model))},this.keyboardPrevent=function(e){var t,n,i=window.event?e.keyCode:e.which;"number"===(null===(n=r.$scope.options)||void 0===n?void 0:n.type)&&ae()(t=[38,40]).call(t,i)&&e.preventDefault()},this.modelChange=function(e){var t;(null===(t=r.$scope.options)||void 0===t?void 0:t.parser)?r.setValue(r.$scope.options.parser(e,r)):r.setValue(e)},this.setValue=function(e){var t;"number"===(null===(t=r.$scope.options)||void 0===t?void 0:t.type)?r.$scope.model=+e:r.$scope.model=e},this.change=function(e,t){r.checkValid()&&(angular.isString(r.$scope.model)&&(r.$scope.model=r.$scope.model.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"")),r.$scope.options.change&&r.$scope.options.change(r.$scope,r.$scope.model,t))},this.customBlur=function(){r.focused=!1,r.checkIos,r.finalCheck(),r.$scope.options.customBlur&&r.$scope.options.customBlur(r.$scope,r.$scope.model)},this.checkIos=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},this.checkValid=function(){if(r.$scope.model&&"number"===r.$scope.options.data_type)if(/^-?(\d+)?$/.test(r.$scope.model))if(M()(r.$scope.model,10)<-2147483648||M()(r.$scope.model,10)>2147483647)r.$rootScope.show_warning("整形数字需介于-2147483648~2147483647 之间","notify",6e3),r.$scope.model=null;else{if(!/^-?\d+$/.test(r.$scope.model))return!1;r.$scope.model=Number(r.$scope.model)}else r.$scope.model=null,r.$rootScope.show_warning("输入内容格式不正确，请输入整数");else if(r.$scope.model&&"float"===r.$scope.options.data_type)if(/(^-?$)|(^-?\d+\.?)(\d+)?$/.test(r.$scope.model)){if(!new RegExp("^(-?\\d+)(\\.(\\d*[123456789]|\\d{"+r.$filter("valueToFunc")(r.$scope.options.data_precision)()+",}))?$").test(r.$scope.model)||ha(r.$scope.model))return!1;r.$scope.model=r.toFixed(r.$scope.model,r.$filter("valueToFunc")(r.$scope.options.data_precision)())}else r.$scope.model=null,r.$rootScope.show_warning("输入内容格式不正确，请输入数字");return!0},this.setOnInput=function(){if("number"===r.$scope.options.type){var e,t=Fe()(e=r.$element).call(e,"input")[0];t&&(t.oninput=function(e){e.data||e.target.value||(e.target.value="")})}},this.finalCheck=function(){if(r.$scope.model&&"number"===r.$scope.options.data_type&&(/^-?\d+$/.test(r.$scope.model)?r.$scope.model=Number(r.$scope.model):(r.$scope.model=null,r.$rootScope.show_warning("输入内容格式不正确，请重新输入","warning"))),r.$scope.model&&"float"===r.$scope.options.data_type&&(/^(-?\d+)(\.\d+)?$/.test(r.$scope.model)?r.$scope.model=r.toFixed(r.$scope.model,r.$filter("valueToFunc")(r.$scope.options.data_precision)()):(r.$scope.model=null,r.$rootScope.show_warning("输入内容格式不正确，请重新输入","warning"))),r.$scope.model&&r.$scope.options.xss_protect){var e=r.$filter("securityFilter")(r.$scope.model);null==e&&r.$rootScope.show_warning("非法脚本注入，请重新输入","warning"),r.$scope.model=r.$filter("xss_filter")(e)}},this.toFixed=function(e,t){return E()(E()(e).toFixed(t||1))},this.decimalMarkFormatter=function(e){return angular.isString(e)||angular.isNumber(e)?(e+"").replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,"):e},this.decimalMarkParser=function(e){return angular.isString(e)?ha(e)?e.replace(/,/gi,""):+e.replace(/,/gi,""):e}}return Oe()(e.prototype,"displayValue",{get:function(){var e;return this.$scope.model&&(null===(e=this.$scope.options)||void 0===e?void 0:e.formatter)?this.$scope.options.formatter(this.$scope.model,this):this.$scope.model},set:function(e){var t;(null===(t=this.$scope.options)||void 0===t?void 0:t.parser)&&e?this.$scope.model=this.$scope.options.parser(e,this):this.$scope.model=e},enumerable:!0,configurable:!0}),e.prototype.$onInit=function(){var e,t,n,i,o,a=this;if((null===(i=this.$scope.options)||void 0===i?void 0:i.decimalMark)&&(this.$scope.options.type="text",this.$scope.options.formatter=this.decimalMarkFormatter,this.$scope.options.parser=this.decimalMarkParser),this.client=window.client,this.isAndroid=s()(e=navigator.userAgent).call(e,"Android")>-1||s()(t=navigator.userAgent).call(t,"Adr")>-1,this.setDefaultValue(),this.focus(),this.setType(),this.setOnInput(),this.$scope.$watch("model",(function(e,t){e!==t&&a.change(e,t)})),Fe()(n=this.$element).call(n,"input")[0].addEventListener("mousewheel",(function(e){e.preventDefault()}),!1),null===(o=this.$scope.options)||void 0===o?void 0:o.keyboardPrevent){var l,r,c=function(e){var t=window.event?e.keyCode:e.which;38!=t&&40!=t||e.preventDefault()};Fe()(l=this.$element).call(l,"input")[0].addEventListener("keydown",c),Fe()(r=this.$element).call(r,"input")[0].addEventListener("keyup",c)}},e.$inject=["$rootScope","$scope","$element","componentDefaultService","$filter","$timeout"],e}();O.a.directive("hcInput",["$filter",function(){return{restrict:"EA",template:fa.a,scope:{options:"=",key:"=",model:"=ngModel",placeholder:"@",label:"=",disabled:"=ngDisabled"},controller:ga,controllerAs:"$ctrl"}}]);var va=n("fapB"),ba=n.n(va),ya=n("xm0b"),wa=n("CsXa"),xa=n("wd/R"),ka=n.n(xa),$a=function(e){function t(t,n,i,o,a){var l=e.call(this,t,o,n,a,i,t.options,wa.a)||this;return l.changeDate=function(e,t){var n,i=t.split(/[\-\/:\s*]/g);return/^\d+$/g.test(e)?w()(i).call(i,(function(i){var o;n=ie()(o=n||[]).call(o,r()(e).call(e,0,i.length)),e=r()(e).call(e,i.length,t.length)})):n=e.split(/[^\d]+/g),n.length=i.length,n=w()(i).call(i,(function(e,t){if(n[t]){var i=new RegExp("\\w{"+n[t].length+"}$","gim");e=e.replace(i,(function(){var i;return r()(i=n[t]).call(i,0,e.length)}))}return e=e.replace(/[a-z]/gi,"0")})),n=w()(n).call(n,(function(e,t){return/^(YYYY|Q|MM|DD)$/g.test(i[t])&&(/^0+$/g.test(e)&&(e=e.replace(/0$/g,"1")),"Q"===i[t]&&(e="Q"+e)),e}))},l.check_valid=function(e){if(e){var t=l.getDateFormat();if(/YYYY/i.test(t)){if(isNaN(Pe()(l).call(l,"parseFormat")(e,l.scope.options.format||"yyyy-MM-dd")))return l.dateError(),!1;if(!xa(e,[t]).isValid())return l.dateError(),!1;var n=l.getRealYear(l.options.minYear,"1900",!0),i=l.getRealYear(l.options.maxYear,"2199",!0);if(Date.parse(e)<Date.parse(n)||Date.parse(e)>Date.parse(i+1))return l.dateError("请输入有效的日期范围"),!1}}return!0},l.getRealYear=function(e,t,n){return!0===e?e=xa().format("YYYY"):e?"string"!=typeof e||n||(e=M()(e.substring(0,4))):t&&("string"==typeof t&&(t=M()(t)),e=t),e},l}return Object(Pt.d)(t,e),t.prototype.$onInit=function(){this.initDialogStyle(),this.init("hc-input-datetime")},t.prototype.initDialogStyle=function(){this.scope.options.styles={minWidth:"250px",maxWidth:"350px"}},t.prototype.beforeOpenPanel=function(){var e;this.dialogParams.model=xa(Pe()(e=this).call(e,"parseFormat")(this.scope.model,this.scope.options.format)).toDate(),this.dialogParams.options=this.scope.options},t.prototype.selectorMapper=function(e){var t;return Pe()(t=this).call(t,"dateFormat")(e,this.scope.options.format||"yyyy-MM-dd")},t.prototype.onBlur=function(e){this.autoFillDate()},t.prototype.onKeyup=function(e){13===(window.event?e.keyCode:e.which)&&this.autoFillDate()},t.prototype.autoFillDate=function(){this.scope.model&&"0"!=this.scope.model&&/[\u4e00-\u9fa5a-p|r-z|A-P|R-Z]/g.test(this.scope.model)&&this.dateError();var e=this.scope.model;if(e){var t=this.getDateFormat(),n=this.changeDate(e,t);e=t.replace(/[a-z]+/gi,(function(){return b()(n).call(n,0,1)})),"0"!=this.scope.model&&"0"===e[0]?this.dateError("请输入有效的日期范围"):this.scope.model=e}else this.scope.model=""},t.prototype.dateError=function(e){this.hcDialog.notify(e||"日期(时间)输入格式不正确","warning")},t.prototype.getDateFormat=function(){var e;return Pe()(e=this).call(e,"timeFormat")(this.scope.options.format)||"YYYY-MM-DD"},t.$inject=["$scope","$filter","componentDefaultService","$element","$hcDialog"],t}(ya.a);O.a.directive("hcDatetimePicker",["$filter",function(){return{restrict:"EA",template:ba.a,scope:{options:"=",key:"=",model:"=ngModel",placeholder:"@",label:"=",disabled:"=ngDisabled"},controller:$a,controllerAs:"$ctrl"}}]);var Oa=n("YNxq"),Da=n.n(Oa),Ca=(n("xqky"),n("WhRy"),n("TeQF"),n("9MK4")),Ma=n.n(Ca),Sa=(n("lCth"),n("oIRF"),{controller:function(){function e(e,t,n,i,o,a,l){var r=this;this.scope=e,this.rootScope=t,this.q=n,this.hcDialog=i,this.filter=o,this.contextService=a,this.dataService=l,this.initDialog=function(){var e,t=r;e=t.wf_inst_detail.is_current?Pe()(t).call(t,"translate")("wf_running"):1===t.wf_inst_detail.approve_state?Pe()(t).call(t,"translate")("passed"):0===t.wf_inst_detail.approve_state?Pe()(t).call(t,"translate")("not_pass"):Pe()(t).call(t,"translate")("not_handle"),r.scope.$dialog.title(t.wf_inst_detail.wf_def_name+"（"+e+"）").operates([{label:Pe()(t).call(t,"translate")("approval_close"),func:t.close}])},this.parseData=function(){return Object(Pt.c)(r,void 0,void 0,(function(){var e,t;return Object(Pt.e)(this,(function(n){var i;switch(n.label){case 0:return(e=this).completed=0,t=e.scope.params,e.employee_id=e.auth.employee.id,e.wf_inst_detail=t.wf_inst_detail,e.assignment_list=w()(i=e.wf_inst_detail.assignment).call(i,(function(t){return t.finish&&(e.completed+=1),t})),e.get_assignment(),[4,e.classify_assignment()];case 1:return n.sent(),[2]}}))}))},this.get_assignment=function(){var e,t=r;w()(e=t.assignment_list).call(e,(function(e){e.executor_id===t.employee_id&&(t.assignment=e)}))},this.classify_assignment=function(){return Object(Pt.c)(r,void 0,void 0,(function(){var e,t,n,i,o;return Object(Pt.e)(this,(function(a){var l,r;switch(a.label){case 0:return t={},(e=this).creatorNameDict={},e.other_assignment=[],n=[],t.makeAssignEmpMap=function(t){t.from_assign?e.creatorNameDict[t.id]||(e.creatorNameDict[t.id]=t.submit_user_id,n.push(t.submit_user_id)):t.from_assign||5!==t.category||(e.creatorNameDict[t.id]="系统")},w()(l=re()(e.category_map)).call(l,(function(n){var i,o;(i="assignment"+n,e.wf_inst_detail.hasOwnProperty(i))&&w()(o=e.wf_inst_detail[i]).call(o,(function(i){var o;i.comment&&s()(o=i.comment).call(o,"|")>-1&&(i.comment=i.comment.split("|")[1]),i.category_name=e.category_map[n],e.other_assignment.push(i),t.makeAssignEmpMap(i)}))})),w()(r=e.wf_inst_detail.assignment).call(r,(function(e){return t.makeAssignEmpMap(e)})),n.length>0?(i=void 0,[4,this.dataService.callHcmOpenApi("wf.get.emp.info",{emp_ids:n,value:"name"})]):[3,2];case 1:for(o in i=a.sent(),e.creatorNameDict)"number"==typeof e.creatorNameDict[o]&&(e.creatorNameDict[o]=i[e.creatorNameDict[o]]);a.label=2;case 2:return[2]}}))}))},this.showList=function(){r.is_show_list=!r.is_show_list},this.close=function(){r.scope.$dialog.dialog_close()},this.sendReminders=function(e){var t,n=r;if(n.rootScope.show_waiting(),n.sendRemindersCount[e.id]=null!==(t=n.sendRemindersCount[e.id])&&void 0!==t?t:0,n.sendRemindersCount[e.id]>=1)n.hcDialog.notify(Pe()(n).call(n,"translate")("remind_notify")),n.rootScope.hide_waiting();else{var i="待办提醒：请审批"+n.scope.params.wf_inst.wf_inst_title,o={wf_assignment_id:e.id,content:i};r.dataService.callHcmOpenApi("wf.inst.detail.get.approve.reminder",o).then((function(t){t.success?(n.rootScope.show_warning("已向"+e.executor_name+"发送催办消息"),n.sendRemindersCount[e.id]+=1):n.rootScope.show_warning(t.error_msg),n.rootScope.hide_waiting()}))}},this.assignmentFromName=function(e){return r.creatorNameDict[e.id]},this.assignmentComment=function(e){var t=r;return 2===e.category?e.comment:(e.category?t.category_map[e.category]:e.kind?1===e.kind?"转办事项":3===e.kind?"加签事项(会签)":4===e.kind?"加签事项(或签)":"代理事项":"审批事项")+"："+(6===e.category?e.comment.split("|")[1]:e.comment)},this.assignmentCategory=function(e){return e.category?r.category_map[e.category]:e.kind?1===e.kind?"转办":3===e.kind?"加签(会签)":4===e.kind?"加签(或签)":"代理":"审批"},this.isRemove=function(e){var t,n,i=r;return!(!ae()(t=[1,6]).call(t,e.category)||!i.wf_inst_detail.is_current||e.submit_user_id!==i.auth.employee.id||e.finish)||!(e.finish||e.submit_user_id!==i.auth.employee.id||!i.wf_inst_detail.is_current)&&!!Fe()(n=i.other_assignment).call(n,(function(t){return t.id===e.from_assign&&2===t.category}))},this.removeTask=function(e){var t=r;t.hcDialog.confirm("是否确认取消?",[{caption:"确认",func:function(){var n={wf_assign_id:e.id,inst_id:t.scope.params.wf_inst.id};t.dataService.callHcmOpenApi("workflow.instance.extra.assign.remove",n).then((function(e){e&&t.rootScope.show_warning("取消成功"),window.location.reload()}))}}])},this.translateLabel=function(e,t,n){var i,o,a,l,c,s,d,u,_,p,m,f,h,g,v,b,y,x,k,$,O,D,C;if("assignment"===n){if(null===(o=null===(i=r.scope.params)||void 0===i?void 0:i.wf_inst_detail)||void 0===o?void 0:o.node)r.approve_option_setting=null===(s=null===(c=null===(l=null===(a=r.scope.params)||void 0===a?void 0:a.wf_inst_detail)||void 0===l?void 0:l.node)||void 0===c?void 0:c.approve_option_setting)||void 0===s?void 0:s.display_label_setting;else{var M=null===(d=r.scope.params)||void 0===d?void 0:d.all_process_info;w()(M).call(M,(function(e){var t,n,i,o;e.id===(null===(n=null===(t=r.scope.params)||void 0===t?void 0:t.wf_inst_detail)||void 0===n?void 0:n.wf_publish_detail_id)&&(r.approve_option_setting=null===(o=null===(i=null==e?void 0:e.node)||void 0===i?void 0:i.approve_option_setting)||void 0===o?void 0:o.display_label_setting)}))}return"wf_running"===t?(null===(u=r.approve_option_setting)||void 0===u?void 0:u.self_wf_running)?null===(_=r.approve_option_setting)||void 0===_?void 0:_.self_wf_running:Pe()(r).call(r,"translate")("wf_running"):"not_handle"===t?(null===(p=r.approve_option_setting)||void 0===p?void 0:p.self_not_handle)?null===(m=r.approve_option_setting)||void 0===m?void 0:m.self_not_handle:Pe()(r).call(r,"translate")("not_handle"):"agree"===t?(null===(f=r.approve_option_setting)||void 0===f?void 0:f.self_passed)?null===(h=r.approve_option_setting)||void 0===h?void 0:h.self_passed:Pe()(r).call(r,"translate")("passed"):"disagree"===t?(null===(g=r.approve_option_setting)||void 0===g?void 0:g.self_not_pass)?null===(v=r.approve_option_setting)||void 0===v?void 0:v.self_not_pass:Pe()(r).call(r,"translate")("not_pass"):e.state?(null===(b=r.approve_option_setting)||void 0===b?void 0:b.self_not_approval)?null===(y=r.approve_option_setting)||void 0===y?void 0:y.self_not_approval:Pe()(r).call(r,"translate")("not_approval"):e.assignment_pass?(null===(x=r.approve_option_setting)||void 0===x?void 0:x.self_passed)?null===(k=r.approve_option_setting)||void 0===k?void 0:k.self_passed:Pe()(r).call(r,"translate")("passed"):null===e.assignment_pass||void 0===e.assignment_pass?(null===($=r.approve_option_setting)||void 0===$?void 0:$.self_pending_approval)?null===(O=r.approve_option_setting)||void 0===O?void 0:O.self_pending_approval:Pe()(r).call(r,"translate")("pending_approval"):(null===(D=r.approve_option_setting)||void 0===D?void 0:D.self_not_pass)?null===(C=r.approve_option_setting)||void 0===C?void 0:C.self_not_pass:Pe()(r).call(r,"translate")("not_pass")}},this.convert_category_map=function(){var e,t,n,i,o,a,l,c,s,d,u,_,p;if(null===(t=null===(e=r.scope.params)||void 0===e?void 0:e.wf_inst_detail)||void 0===t?void 0:t.node)r.approve_option_setting=null===(a=null===(o=null===(i=null===(n=r.scope.params)||void 0===n?void 0:n.wf_inst_detail)||void 0===i?void 0:i.node)||void 0===o?void 0:o.approve_option_setting)||void 0===a?void 0:a.display_label_setting;else{var m=null===(l=r.scope.params)||void 0===l?void 0:l.all_process_info;w()(m).call(m,(function(e){var t,n,i,o;e.id===(null===(n=null===(t=r.scope.params)||void 0===t?void 0:t.wf_inst_detail)||void 0===n?void 0:n.wf_publish_detail_id)&&(r.approve_option_setting=null===(o=null===(i=null==e?void 0:e.node)||void 0===i?void 0:i.approve_option_setting)||void 0===o?void 0:o.display_label_setting)}))}(null===(c=r.approve_option_setting)||void 0===c?void 0:c.self_communicate)&&(r.category_map[1]=r.approve_option_setting.self_communicate),(null===(s=r.approve_option_setting)||void 0===s?void 0:s.self_transfer)&&(r.category_map[2]=r.approve_option_setting.self_transfer),(null===(d=r.approve_option_setting)||void 0===d?void 0:d.self_recall)&&(r.category_map[3]=r.approve_option_setting.self_recall),(null===(u=r.approve_option_setting)||void 0===u?void 0:u.self_send_duplicate)&&(r.category_map[5]=r.approve_option_setting.self_send_duplicate),(null===(_=r.approve_option_setting)||void 0===_?void 0:_.self_supplement)&&(r.category_map[6]=r.approve_option_setting.self_supplement),(null===(p=r.approve_option_setting)||void 0===p?void 0:p.self_approve_recall)&&(r.category_map[7]=r.approve_option_setting.self_approve_recall)},this.category_map={null:"审批",0:"审批",1:"沟通",2:"转办",3:"打回",5:"抄送",6:"补录",7:"召回"},this.auth=this.contextService.getContext("auth"),this.is_show_list=!0,this.sendRemindersCount={},this.convert_category_map(),this.parseData(),this.initDialog()}return e.$inject=["$scope","$rootScope","$q","$hcDialog","$filter","contextService","dataService"],e}(),template:Ma.a,controllerAs:"$ctrl"}),Ea=function(){function e(e,t,n,i,o,a,l,r,c,s,d){var u=this;this.rootScope=e,this.hcDialog=t,this.scope=n,this.element=i,this.filter=o,this.timeout=a,this.contextService=l,this.dataService=r,this.frameworkSelectorService=c,this.workflowOnlineService=s,this.commonAction=d,this.fetchData=function(){return Object(Pt.c)(u,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return 0===this.wf_inst_id&&this.rootScope.show_warning("未找到有效流程信息！"),[4,this.dataService.callHcmOpenApi("hcm.model.get",{id_:this.wf_inst_id,model:"WorkFlowProcessVirtualModel",from_:"view",state:this.state})];case 1:return e=t.sent(),this.current_node=e.current,this.inst=e.inst,this.unreached_data=e.unreached_data,this.process_info=e.pass_data,this.all_process_info=e.all_process_info,[2]}}))}))},this.sendReminders=function(){var e=u;if(e.rootScope.show_waiting(),e.sendRemindersCount>=1)e.hcDialog.notify(Pe()(e).call(e,"translate")("remind_notify")),e.rootScope.hide_waiting();else{var t="待办提醒：请审批"+e.inst.wf_inst_title,n={wf_assignment_id:e.current_node.assignment[0].id,content:t};u.dataService.callHcmOpenApi("wf.inst.detail.get.approve.reminder",n).then((function(t){t.success?(e.rootScope.show_warning("已向"+e.current_node.assignment[0].executor_name+"发送催办消息"),e.sendRemindersCount+=1):e.rootScope.show_warning(t.error_msg),e.rootScope.hide_waiting()}))}},this.communicateProcess=function(){var e=u;e.workflowOnlineService.getBusinessVersion({business_id:e.inst.business_id}).then((function(t){var n;n="bill";var i=e.inst.id;t&&2===t.version?(n="workflow_bill",i=e.inst.id+"&"+e.inst.business_id):t&&3===t.version&&(n="workflow_bill_v3",i=e.inst.id+"&"+e.inst.business_id),e.frameworkSelectorService.newArticle({to_employee:e.inst.creator.id,content:"关于"+e.inst.wf_name+"流程,我想说:",attachments:[{class:n,id:i}],callback:function(){e.rootScope.show_warning(Pe()(e).call(e,"translate")("share_success"))}})}))},this.showDetail=function(e,t){var n=u,i=angular.copy(e);if("unreached"===t){var o=angular.copy(i.assignment);delete i.assignment,i.assignment=w()(o).call(o,(function(e){return{executor:e}})),i.wf_def_name=i.name}5===e.multi_approve_rule?n.common_action_service.execCommonAction({key:"view_sub_inst",action:"COMMON_LIST_DIALOG",options:{model:"WorkFlowInstance",component:"hc-category-list-selector",state:"parallelInst",filter_dict:{parent_inst_id:u.wf_inst_id,from_detail_id:i.id},size:"max",title:"并行流转详情"}}):n.hcDialog.getDialog(Sa).size("middle").show({wf_inst_detail:i,wf_inst:n.inst,all_process_info:u.all_process_info})},this.showUnreachedProcess=function(){var e=u;e.show_unreached=!e.show_unreached,e.scope.$emit("bill_page_scroll_refresh"),e.scope.$broadcast("bill_page_scroll_refresh")},this.getCcEmp=function(e){var t;return w()(t=e.assignment5).call(t,(function(e){return e.executor_name})).join("、")},this.getAgentInfo=function(e){return e.assignment4[0].executor_name},this.changeInstType=function(){return Object(Pt.c)(u,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){return e=this.inst.parent_inst_id?this.inst.parent_inst_id:this.lastInstId,this.lastInstId=this.wf_inst_id,this.scope.wfInstId=e,[2]}))}))},this.translateLabel=function(e,t,n){var i,o,a,l,r,c,s,d,_,p,m,f,h,g,v,b,y,x,k,$,O,D,C,M,S,E;if("node"===n){var P=u.all_process_info;return(null==e?void 0:e.node)?u.approve_option_setting=null===(o=null===(i=e.node)||void 0===i?void 0:i.approve_option_setting)||void 0===o?void 0:o.display_label_setting:w()(P).call(P,(function(t){var n,i;t.id===e.wf_publish_detail_id&&(u.approve_option_setting=null===(i=null===(n=null==t?void 0:t.node)||void 0===n?void 0:n.approve_option_setting)||void 0===i?void 0:i.display_label_setting)})),1===e.approve_state?(null===(a=u.approve_option_setting)||void 0===a?void 0:a.self_passed)?null===(l=u.approve_option_setting)||void 0===l?void 0:l.self_passed:Pe()(u).call(u,"translate")("passed"):null===e.approve_state||void 0===e.approve_state?(null===(r=u.approve_option_setting)||void 0===r?void 0:r.self_pending_approval)?null===(c=u.approve_option_setting)||void 0===c?void 0:c.self_pending_approval:Pe()(u).call(u,"translate")("pending_approval"):(null===(s=u.approve_option_setting)||void 0===s?void 0:s.self_not_pass)?null===(d=u.approve_option_setting)||void 0===d?void 0:d.self_not_pass:Pe()(u).call(u,"translate")("not_pass")}if("item"===n){P=u.all_process_info;return w()(P).call(P,(function(t){var n,i;t.id===e.wf_publish_detail_id&&(u.approve_option_setting=null===(i=null===(n=null==t?void 0:t.node)||void 0===n?void 0:n.approve_option_setting)||void 0===i?void 0:i.display_label_setting)})),1===e.approve_state?(null===(_=u.approve_option_setting)||void 0===_?void 0:_.self_passed)?null===(p=u.approve_option_setting)||void 0===p?void 0:p.self_passed:Pe()(u).call(u,"translate")("passed"):(null===(m=u.approve_option_setting)||void 0===m?void 0:m.self_not_pass)?null===(f=u.approve_option_setting)||void 0===f?void 0:f.self_not_pass:Pe()(u).call(u,"translate")("not_pass")}if("inst"===n){if("finish"===e.state)return(null===(h=u.approve_option_setting)||void 0===h?void 0:h.self_passed)?null===(g=u.approve_option_setting)||void 0===g?void 0:g.self_passed:Pe()(u).call(u,"translate")("passed");if("partly_pass"===e.state)return(null===(v=u.approve_option_setting)||void 0===v?void 0:v.self_partly_pass)?null===(b=u.approve_option_setting)||void 0===b?void 0:b.self_partly_pass:Pe()(u).call(u,"translate")("partly_pass");if("reject"===e.state)return(null===(y=u.approve_option_setting)||void 0===y?void 0:y.self_not_pass)?null===(x=u.approve_option_setting)||void 0===x?void 0:x.self_not_pass:Pe()(u).call(u,"translate")("not_pass")}if("assignment"===n)return e.state?(null===(k=u.approve_option_setting)||void 0===k?void 0:k.self_not_approval)?null===($=u.approve_option_setting)||void 0===$?void 0:$.self_not_approval:Pe()(u).call(u,"translate")("not_approval"):e.assignment_pass?(null===(O=u.approve_option_setting)||void 0===O?void 0:O.self_passed)?null===(D=u.approve_option_setting)||void 0===D?void 0:D.self_passed:Pe()(u).call(u,"translate")("passed"):null===e.assignment_pass||void 0===e.assignment_pass?(null===(C=u.approve_option_setting)||void 0===C?void 0:C.self_pending_approval)?null===(M=u.approve_option_setting)||void 0===M?void 0:M.self_pending_approval:Pe()(u).call(u,"translate")("pending_approval"):(null===(S=u.approve_option_setting)||void 0===S?void 0:S.self_not_pass)?null===(E=u.approve_option_setting)||void 0===E?void 0:E.self_not_pass:Pe()(u).call(u,"translate")("not_pass")}}return e.prototype.$onInit=function(){this.client=window.client,this.auth=this.contextService.getContext("auth"),this.employee_id=this.auth.employee.id,this.imgSrc=(window.hcm_wengen||"")+"/img?index=img_tag_bg_orange"+window.hcm_env_post;var e=this;this.state=this.scope.state,this.common_action_service=this.commonAction.createCommonAction(this.scope),this.scope.wf_inst_id_watcher||(this.scope.wf_inst_id_watcher=this.scope.$watch("wfInstId",(function(t,n){var i,o;e.wf_inst_id=M()(null!==(o=null===(i=e.scope.params)||void 0===i?void 0:i.wf_inst_id)&&void 0!==o?o:e.scope.wfInstId,null),e.sendRemindersCount=0,e.fetchData()})))},e.$inject=["$rootScope","$hcDialog","$scope","$element","$filter","$timeout","contextService","dataService","frameworkSelectorService","workflowOnlineService","$commonAction"],e}();O.a.directive("hcWorkflowProcess",["$filter",function(){return{restrict:"EA",template:Da.a,scope:{options:"=",wfInstId:"=ngInstId",state:"=ngState",title:"="},controller:Ea,controllerAs:"$ctrl"}}]);var Pa=n("UZ+H"),ja=n.n(Pa),Ta=(n("UUBA"),function(){function e(e,t,n){var i=this;this.$scope=e,this.$rootScope=t,this.$element=n,this.getSwiperContent=function(e){var t,n,o;return(null===(t=i.options)||void 0===t?void 0:t.getSwiperContent)?null===(n=i.options)||void 0===n?void 0:n.getSwiperContent(e):e[null!==(o=i.options.attributeName)&&void 0!==o?o:"name"]},this.getSwiperIcon=function(e){var t;e&&(i.swiperIcon=null!==(t=e.icon)&&void 0!==t?t:"icon-activity")},this.client=window.client}return e.prototype.$onInit=function(){var e=this;e.getSwiperIcon(e.options.swiperIconConfig),we()((function(){n.e(92).then(n.bind(null,"TaHA")).then((function(t){var n,i,o=t.Swiper,a=t.Autoplay;o.use([a]),e.container=new o(".hc-swiper-container",{allowTouchMove:"pc"===e.client,preventClicks:!1,direction:"vertical",loop:!0,autoplay:{delay:1e3*(null!==(i=null===(n=e.options)||void 0===n?void 0:n.delay)&&void 0!==i?i:3),disableOnInteraction:!1},on:{click:function(t){var n,i,o,a=t.clickedSlide.getAttribute("data-id");if(a){console.log("swiper.click: "+a);var l=Fe()(n=e.swiperData).call(n,(function(e){return""+e.id===a}));(null===(i=e.options)||void 0===i?void 0:i.onClickItem)&&(null===(o=e.options)||void 0===o||o.onClickItem(l,e.swiperData))}}}})}))}),0)},e.prototype.stopSwipe=function(){var e,t;null===(t=null===(e=this.container)||void 0===e?void 0:e.autoplay)||void 0===t||t.stop()},e.prototype.startSwipe=function(){var e,t;null===(t=null===(e=this.container)||void 0===e?void 0:e.autoplay)||void 0===t||t.start()},e.$inject=["$scope","$rootScope","$element"],e}());window.app.component("hcWorkflowSwiper",{bindings:{swiperData:"<ngSwiperData",options:"<"},controller:Ta,template:ja.a});var Aa=n("QTtW"),Ia=n.n(Aa),La=(n("MPMM"),n("VNqs"),function(){function e(e,t,n,i){var o=this;this.$scope=e,this.$element=t,this.hcUploadFile=n,this.$filter=i,this.client=window.client,this.mceInstance=null,this.mceLoaded=!1,this.src="/document/loadsourceimage?index=",this.base_url=""+window.cdn_domain+(window.hcm_wengen||"")+"/static/resources/lib/tinymce"+(window.hcm_env_pre||""),this.tinymceOptions={base_url:this.base_url,language:window.hcm_language&&"zh_cn"!==window.hcm_language?void 0:"zh-Hans",plugins:"preview searchreplace autolink autosave save code fullscreen image link codesample table charmap nonbreaking insertdatetime advlist lists wordcount kityformula-editor",editimage_cors_hosts:["picsum.photos"],menubar:"file edit view insert format tools table",removed_menuitems:"newdocument",toolbar:"undo redo | bold italic underline strikethrough kityformula-editor| fontfamily fontsize blocks | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | fullscreen | image link | ltr rtl ",autosave_ask_before_unload:!0,autosave_interval:"30s",autosave_prefix:"{path}{query}-{id}-",autosave_restore_when_empty:!1,autosave_retention:"2m",relative_urls:!1,convert_urls:!1,mobile:{menubar:!0,toolbar:!1,removed_menuitems:"newdocument print"},image_advtab:!0,file_picker_callback:function(e,t,n){if("image"===n.filetype){o.hcUploadFile.upload({type:"img",upload_type:"auto",params:{}}).then((function(t){if(t.index){var n=""+(window.hcm_wengen?window.hcm_wengen:"")+(o.src+t.index)+window.hcm_env_pre;e(n)}}))}},height:400,image_caption:!0,noneditable_class:"mceNonEditable",quickbars_selection_toolbar:!1,toolbar_mode:"sliding",skin:"oxide",font_family_formats:"宋体='宋体',Helvetica,Arial,sans-serif;仿宋='仿宋',Helvetica,Arial,sans-serif;仿宋_GB2312='仿宋_GB2312',Helvetica,Arial,sans-serif;楷体='楷体',Helvetica,Arial,sans-serif;黑体='黑体',Helvetica,Arial,sans-serif;Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats"}}return e.prototype.$onInit=function(){var e=this,t=this;angular.extend(this.tinymceOptions,Object(Pt.a)({readonly:this.$filter("valueToFunc")(this.options.readOnly)(),placeholder:this.$filter("valueToFunc")(this.options.placeholder)()},this.options.params||{})),n.e(93).then(n.t.bind(null,"5WJX",7)).then((function(t){e.mceInstance=t.default,e.mceLoaded=!0})),this.$scope.$watch("($ctrl.options.readOnly|valueToFunc)()",(function(e,n){var i,o,a,l;if(e!==n){var r,c=Fe()(r=t.$element).call(r,"textarea").attr("id");null===(l=null===(a=null===(o=null===(i=t.mceInstance)||void 0===i?void 0:i.get(c))||void 0===o?void 0:o.mode)||void 0===a?void 0:a.set)||void 0===l||l.call(a,e?"readonly":"design")}}))},e.$inject=["$scope","$element","hcUploadFile","$filter"],e}());window.app.component("hcInputMce",{bindings:{model:"=ngModel",options:"<?"},controller:La,template:Ia.a}),O.a.directive("hcInputItem",[function(){return{restrict:"EA",template:'<div class="component-input-inner" ng-click="itemClick()">{{model||"&nbsp;"}}</div>',scope:{options:"=",model:"=ngModel"},compile:function(){return function(e){e.itemClick=function(){(e.options||{}).readOnly||e.$root.$broadcast("hc-input-item-show",{value:e.options.model})}}}}}]),O.a.directive("hcInputCode",[function(){return{restrict:"EA",template:n("B3qb"),scope:{options:"=",bindData:"=ngModel"},controller:["AuthService","$scope","$filter","$timeout","dataService",function(e,t,n,i,o){t.getValidateCode=function(){t.is_code_waiting||(t.is_code_waiting=!0,t.$broadcast("timer-start"),i((function(){null==t.valid_code&&(t.is_show_voice=!0)}),5e3),t.options.customApi?o.callHcmOpenApi(t.options.customApi,n("valueToFunc")(t.options.customParams)()||{}).then((function(){}),(function(e){null!=e.errcode&&"40006"==e.errcode?t.show_warning(e.errmsg,"warning"):t.show_warning("短信服务暂时不可用，我们很快会解决这个问题。","warning")})):e.getValidCodeSecond("mobile").then((function(){}),(function(e){null!=e.errcode&&"40006"==e.errcode?t.show_warning(e.errmsg,"warning"):t.show_warning("短信服务暂时不可用，我们很快会解决这个问题。","warning")})))},t.sendVoiceCode=function(){e.getValidCodeSecond("voice").then((function(){t.is_voice_sended=!0,t.is_show_voice=!1}))},t.timerStop=function(){i((function(){t.is_code_waiting=!1,t.$broadcast("timer-reset")}))}}]}}]),O.a.directive("hcInputSearch",["$filter",function(){return{restrict:"EA",template:n("0F0B"),scope:{options:"=",model:"=ngModel",placeholder:"@",disabled:"=ngDisabled"},compile:function(){return function(e,t){}},controller:["AuthService","$scope","$timeout",function(e,t,n){var i,o;t.client=t.$root.client,t.method={},t.vm={selectedData:{},dataList:{}},t.getPostData=function(n){e.getAssociation(n,t.options.apiName).then((function(e){return e.success?(t.vm.dataList=e.result,t.vm.dataList):null}))},t.$on("win_body_click_event",(function(){t.vm.dataList=[],t.isShow=!1})),t.method.enterKeyEvent=function(e){t.model=e.value,t.method.closeSearch()},t.method.searchData=function(){void 0!==t.model&&(t.model.length>0?(t.vm.dataList=t.getPostData(t.model),o=-1,t.isShow=!0):(t.vm.dataList=[],o=-1,t.isShow=!1))},t.method.keyDownEvent=function(e){e.stopPropagation();var n=t.vm.dataList;switch(e.keyCode){case 38:--o>=0&&o<n.length?t.aFocus=o:o<0&&(o=n.length-1,t.aFocus=o);break;case 40:++o>=0&&o<n.length?t.aFocus=o:o>=n.length&&(o=0,t.aFocus=o);break;case 13:t.method.enterKeyEvent(t.vm.dataList[o]),t.method.closeSearch()}},t.method.mouseOverEvent=function(e){t.aFocus=e},t.method.timeflash=function(){n.cancel(i),i=n((function(){t.method.searchData()}),void 0===i?0:400)},t.method.closeSearch=function(){t.vm.dataList=[],t.isShow=!1}}]}}]);var Fa=n("0gKY"),Ra=n.n(Fa);n("eIMw");O.a.directive("hcInputJson",["$hcDialog","$filter",function(e,t){return{restrict:"EA",template:Ra.a,scope:{options:"=",key:"=",model:"=ngModel",placeholder:"@",label:"=",disabled:"=ngDisabled"},controller:["$rootScope","$scope","componentDefaultService",function(n,i,o){var a=o.setComponentDefault(i.model,"hc-input-json",i.options);t("isValidValue")(a)&&(i.model=a),i.onClick=function(n){var o,a,l;i.options.custom_click?null===(o=t("valueToFunc")(i.options.custom_click))||void 0===o||null===(a=o())||void 0===a||null===(l=a.then)||void 0===l||l.call(a,(function(e){i.model=e})):e.getDialog(ki.a).show({readOnly:t("valueToFunc")(i.options.readOnly)(),data:"html"===i.options.mode?i.model||"":i.model?j()(i.model):"",mode:i.options.mode}).then((function(e){t("valueToFunc")(i.options.readOnly)()||(i.model="html"===i.options.mode?e:e&&JSON.parse(e))}))},i.del=function(e){e&&e.stopPropagation(),i.model=null}}]}}]);var Ba=n("hjf+"),Ua=n.n(Ba),qa=(n("Zu2w"),n("E/9S")),Wa=n.n(qa);n("JDPV");window.app.controller("HCMFormulaEditController",["contextService","$scope","$rootScope","$hcDialog","$hcForm","dataService",function(e,t,n,i,o,a){t.formula_form=o.createForm("report_dialog").$setMeta([{key:"formula_text",label:"公式",validName:"公式",component:"hc-text-area",options:{singleLine:!1,placeholder:"请输入公式"}}],[{label:"",layout:"col-1"}]).$setValidRule([]),a.callHcmOpenApi("hcm.formula.list",{domain:t.params.domain}).then((function(e){t.formula_list=e.list,t.curr_help=t.formula_list[0]})),t.formula_form.data.formula_text=t.params.formula_text,t.selectFormula=function(e){t.formula_form.data.formula_text=e+"()"},t.submit=function(){var e=t.formula_form.$validData();!0===e?(t.$dialog.resolve_data(t.formula_form.data.formula_text),t.$dialog.dialog_close()):i.notify(e,"warning")},t.close=function(){t.$dialog.dialog_close()},t.$dialog.operates([{label:"取消",func:t.close},{label:"确认",func:t.submit,default:!0}])}]);var za={controller:"HCMFormulaEditController",template:Wa.a,size:"middle",title:"公式编辑"};O.a.directive("hcInputFormula",["$hcDialog","$filter",function(e,t){return{restrict:"EA",template:Ua.a,scope:{options:"=",key:"=",model:"=ngModel",placeholder:"@",label:"=",disabled:"=ngDisabled"},controller:["$rootScope","$scope","componentDefaultService",function(n,i,o){var a=o.setComponentDefault(i.model,"hc-input-formula",i.options);t("isValidValue")(a)&&(i.model=a),i.onClick=function(n){t("valueToFunc")(i.options.readOnly)()||e.getDialog(za).show({formula_text:i.model,domain:i.options.domain||"common"}).then((function(e){i.model=e}))}}]}}]);n("Kz25");var Na=n("/eFo"),Ka=n.n(Na),Ha=n("2u0U"),Va=n.n(Ha),Ya=(n("z1qB"),function(){function e(e){var t=this;this.url="/document/loadaudio",this.close=function(){t.scope.$dialog.resolve_data(),t.scope.$dialog.dialog_close()},this.scope=e}return e.prototype.init=function(){this.initOperate(),this.initMediaSrc()},e.prototype.initOperate=function(){this.scope.$dialog.operates([{label:"关闭",func:this.close,default:!1}])},e.prototype.initMediaSrc=function(){var e;(null===(e=this.scope.params)||void 0===e?void 0:e.index)&&(this.src=this.url+"?index="+this.scope.params.index)},e.$inject=["$scope"],e}());window.app.controller("CommonMediaViewController",Ya);var Ga={controller:"CommonMediaViewController",template:Va.a,name:"media_view"};O.a.factory("hcUploadFile",["$hcDialog","dataService","$rootScope","Upload","$q","$http","$filter",function(e,t,i,o,a,l,r){return{upload:function(t){return e.closeTarget("hcUploadFile"),console.log("in upload"),e.getDialog({template:n("P1gZ"),name:"hcUploadFile",controller:["$scope","$timeout","Upload","attachService","$q","$rootScope","contextService",function(n,i,o,a,l,c,d){n.init=function(e){var i;n.params=t||{},n.process="selectFile",n.initUploadOperate(e),n.initSize(n.params.size,n.params.minSize),n.initFileType(),n.initUploadDesc(),console.log("after init"),console.log("upload_desc:",n.upload_desc),console.log("camera:",n.camera),console.log("capture:",n.capture),console.log("accept:",n.accept),console.log("hcUploadFile in upload, params:");var o=d.getContext("auth");"emmcloud"===(null==o||null===(i=o.sso)||void 0===i?void 0:i.sso_type)&&(n.params.multiple=void 0)},n.initUploadOperate=function(e){"auto"!==n.params.upload_type||e?i((function(){$(".hc-dialog[name=hcUploadFile]").show()})):i((function(){$(".hc-upload-file .upload_tip:last").click()}))},n.initSize=function(e,t){"string"!=typeof e&&(e=j()(e)),e||(e="10MB"),e.replace(/(\d*\.?\d*)(\w*)/,(function(e,t,i){n.size=t||2,n.size_unit=i.toUpperCase()||"MB"})),"MB"===n.size_unit&&(n.specific_size=1024*n.size*1024),"KB"===n.size_unit&&(n.specific_size=1024*n.size),"string"!=typeof t&&(t=j()(t)),t||(t="0MB"),t.replace(/(\d*\.?\d*)(\w*)/,(function(e,t,i){n.minSize=t||2,n.minSize_unit=i.toUpperCase()||"MB"})),"MB"===n.minSize_unit&&(n.specific_min_size=1024*n.minSize*1024),"KB"===n.minSize_unit&&(n.specific_min_size=1024*n.minSize)},n.initFileType=function(){var e;switch(n.type=n.params.type||"all",n.type){case"img":n.file_type=["png","jpg","jpeg","bmp"];break;case"file":n.file_type=["doc","docx","dot","dotx","docm","dotm","xml","xls","xlsx","ppt","pptx","pdf","zip","mp4","mp3","rar"];break;case"video":n.file_type=["mp4","mp3"];break;default:n.file_type=["doc","docx","dot","dotx","docm","dotm","xml","xls","xlsx","ppt","pptx","pdf","png","jpg","jpeg","bmp","zip","lrmx","mp4","mp3","rar"]}n.file_type=n.params.file_type||n.file_type,n.camera=n.params.camera,n.capture=n.params.capture;var i=!0;w()(e=n.file_type).call(e,(function(e){var t;~s()(t=["png","jpg","jpeg","bmp"]).call(t,e)||(i=!1)})),t.accept=i?"image/*":""},n.initUploadDesc=function(){n.params.upload_desc?n.upload_desc=n.params.upload_desc:(n.upload_desc="文件大小："+n.size+n.size_unit+"以下",n.minSize&&(n.upload_desc=n.upload_desc+","+n.minSize+n.minSize_unit+"以上"))};var _=function(e){var t;return console.log("in check file type"),!(t=(e.name.match(/\.(\w+)$/)||[])[1])&&(t=e.type.split("/").pop()),!t&&/image:/.test(decodeURIComponent(e.name))&&(Oe()(e,"name",{value:e.name+".jpeg"}),t="jpeg"),console.log("upload file name and type:"+e.name,0+t),!(!new RegExp(n.file_type.join("|"),"ig").test(t)&&("/"===e.name?(console.log("no_file_select:"+e.name),n.show_warning("未检测到附件，如有需要请重新上传",3e3),1):(console.log("不支持"+e.name+"文件格式的上传"),n.show_warning("不支持"+e.name+"文件格式的上传",5e3),1))||(console.log("in check file size:"+n.specific_size+" "+e.size),!(n.specific_min_size>e.size?(console.log(e.name+"文件小于"+n.minSize+n.minSize_unit),n.show_warning(e.name+"文件小于"+n.minSize+n.minSize_unit),!1):n.specific_size>e.size||(console.log(e.name+"文件大小超过"+n.size+n.size_unit),n.show_warning(e.name+"文件大小超过"+n.size+n.size_unit),!1))))&&function(){var t;console.log("check_img_size");var i=n.params.max_image_height,o=n.params.max_image_width,a=null!==(t=n.params.strict)&&void 0!==t&&t;if("img"===n.type&&o&&i){console.log("check_img_size in");var r=l.defer(),c=new Image,s=window.URL.createObjectURL(e);return c.src=s,c.onload=function(){console.log("in check img size: height "+i+" "+this.height+" width "+o+" "+this.width),!a||this.height===i&&this.width===o?i<this.height||o<this.width?(console.log("图片"+e.name+" 尺寸不符合要求，请上传"+i+"*"+o+"大小的图片"),n.show_warning("图片"+e.name+" 尺寸不符合要求，请上传"+i+"*"+o+"大小的图片",5e3),window.URL.revokeObjectURL(s),r.resolve(!1)):(window.URL.revokeObjectURL(s),r.resolve(!0)):(console.log("图片"+e.name+" 尺寸不符合要求，请上传尺寸严格等于"+i+"*"+o+"像素的图片"),n.show_warning("图片"+e.name+" 尺寸不符合要求，请上传尺寸严格等于"+i+"*"+o+"像素的图片",5e3),window.URL.revokeObjectURL(s),r.resolve(!1))},r.promise}return!0}()};n.uploadFiles=function(){var t=p()(u.a.mark((function t(o,a){var l,d,p,m,h,g,v,y,x;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("in upload files2"),o&&0!==o.length){t.next=11;break}if(console.log("uploadFiles files.length:",o.length),console.log("uploadFiles file:",a),!a){t.next=9;break}console.log("files值取不到"),o=[a],t.next=11;break;case 9:return console.log("file is null"),t.abrupt("return");case 11:console.log("file count:"+o.length),w()(o).call(o,(function(e){console.log("File name:"+e.name),console.log("File type:"+e.type)})),n.vga=[],t.prev=14,l=!0,d=!1,t.prev=17,m=Ka()(o);case 19:return t.next=21,m.next();case 21:return h=t.sent,l=h.done,t.next=25,h.value;case 25:if(g=t.sent,l){t.next=35;break}return a=g,t.next=30,_(a);case 30:if(t.sent){t.next=32;break}b()(o).call(o,s()(o).call(o,a),1);case 32:l=!0,t.next=19;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(17),d=!0,p=t.t0;case 41:if(t.prev=41,t.prev=42,l||null==m.return){t.next=46;break}return t.next=46,m.return();case 46:if(t.prev=46,!d){t.next=49;break}throw p;case 49:return t.finish(46);case 50:return t.finish(41);case 51:t.next=56;break;case 53:t.prev=53,t.t1=t.catch(14),console.log(t.t1);case 56:console.log("afterCheck files",o),o=Pe()(o).call(o,(function(e){return(/mp4|mp3/.test(e.type)||/mp4|mp3/.test(e.name))&&n.vga.push(e),!0})),n.file_sizes=w()(o).call(o,(function(e){return e.size})),console.log("file_sizes:",n.file_sizes),v=function(){n.params.processVGA&&(n.vga[0]&&D.a.getCustomDialogCtrl("progressBarCtrl").then((function(t){e.getDialog(t).params({merge_url:n.params.merge_url,chunk_url:n.params.chunk_url,md5_url:n.params.md5_url,uploadLocal:n.params.uploadLocal,vod_info:{file:n.vga[0],after_process:n.params.after_process,title:n.params.title,fileSize:n.file_sizes[0]}}).size("small").show()})),n.video_save=n.params.video_save||!1)},console.log("$scope.vga, ",n.vga),0===n.vga.length&&n.params.uploadLocal&&delete n.params.url,y=window.hcm_wengen+(n.params.url||(n.params.multiple?"/document/savedocuments":"/document/savedocument")),console.log("uploadFiles url:"+y),(null==(x=angular.extend({watermark:n.params.watermark},n.params.params||{}))?void 0:x.extend)&&(x.extend=j()(null==x?void 0:x.extend)),n.video_save||(o.length>0?(n.process="upload",n.show_waiting(),n.file_name=w()(o).call(o,(function(e){return e.name})).join(","),console.log("file count:"+o.length),console.log("uploadFiles $scope.params:"),n.params.onlyTc&&n.vga[0]||n.vga[0]&&n.params.uploadLocal?v():n.uploadFunc(y+(-1==s()(y).call(y,"?")?window.hcm_env_pre:window.hcm_env_post),x,o).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.params.is_silent||(n.params.success_tips?c.show_warning(n.params.success_tips):c.show_warning(r("translate")("common_hc_upload_multi_succeed"))),n.upload_status=!0,n.process="uploadState";var t={file:a,file_index:n.file_index,response:e,fileSize:n.file_sizes[0],uploadLocal:n.params.uploadLocal};n.params.after_process&&n.params.after_process(t);var o=e.data;"object"!==f()(o)&&(o={data:o}),n.returnData(n.params.multiple?o.index_list:angular.extend(o,{name:n.file_name})),i((function(){"auto"===n.params.upload_type&&n.close()}),100),c.hide_waiting(),n.params.uploadLocal||v()}),(function(e){n.upload_status=!1,n.process="uploadState",i((function(){n.returnData(e)}),2500),e.data&&e.status>0&&(n.errorMsg="object"===f()(e.data)&&e.data.errmsg||""),c.hide_waiting()}),(function(e){console.log("上传中"),n.file_progress=Math.min(100,Math.floor(100*e.loaded/e.total))}))):n.returnData());case 68:case"end":return t.stop()}}),t,null,[[14,53],[17,37,41,51],[42,,46,50]])})));return function(e,n){return t.apply(this,arguments)}}(),n.returnData=function(e){e||(e=n.params.multiple?[]:{}),n.$dialog.resolve_data(e)},n.uploadFunc=function(t,i,a){console.log("文件上传开始");var r=l.defer(),s={url:t,data:i};if(n.params.section_upload)D.a.getCustomDialogCtrl("HCMSectionUploadDialog").then((function(t){e.getDialog(t).show({file:n.params.multiple?a:a[0]}).then((function(e){var t=e;r.resolve({data:{success:!0,index:t,index_list:t}})}))}));else if(n.params.single_upload){if(n.params.single_upload){var d=w()(a).call(a,(function(e){return o.upload(angular.extend(angular.copy(s),{file:e}))}));l.all(d).then((function(e){var t,n=Pe()(t=w()(e).call(e,(function(e){return e.data&&e.data.index_list&&e.data.index_list[0]}))).call(t,(function(e){return e}));r.resolve({data:{success:!0,index:n,index_list:n}})})).catch((function(e){var t,n;(null==e||null===(t=e.data)||void 0===t?void 0:t.description)?c.show_warning(null==e||null===(n=e.data)||void 0===n?void 0:n.description,"info"):c.show_warning("上传文件失败");c.hide_waiting(),r.reject()}))}}else n.params.multiple?s.file=a:s.file=a[0],console.log("Upload.upload(params): ",s),o.upload(s).then((function(e){console.log("upload file index:"+e.data.index),r.resolve(e)}),(function(e){console.log("upload file error:"),console.log(e),r.reject(e)}),(function(e){r.notify(e)}));return r.promise},n.close=function(){var e=$("label input").last()[0];console.log("上传控件"+e),e&&e.files&&(e.files&&e.files[0]?console.log("上传文件名称"+e.files[0].name):console.log("上传文件名称"+e.files.name)),n.params.close&&n.params.close(),n.$dialog.dialog_close()}}]}).params(t).size("small").show()},pasteUploadFiles:(c=p()(u.a.mark((function e(t,n,i){var l,r,c,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(){return(d=p()(u.a.mark((function e(t,n,i){var l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("文件上传开始"),l=a.defer(),(r={url:t,data:n}).file=i,e.next=6,o.upload(r).then((function(e){console.log("upload file index:"+e.data.index),l.resolve(e)}),(function(e){console.log("upload file error:"),l.reject(e)}),(function(e){l.notify(e)}));case 6:return e.abrupt("return",l.promise);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)},c=function(e,t,n){return d.apply(this,arguments)},r=function(){n.upload_desc?n.upload_desc=n.upload_desc:(n.upload_desc="文件大小："+n.size+n.size_unit+"以下",n.minSize&&(n.upload_desc=n.upload_desc+","+n.minSize+n.minSize_unit+"以上"))},l=function(){var e;switch(n.type=n.type||"all",n.type){case"img":n.file_type=["png","jpg","jpeg","bmp"];break;case"file":n.file_type=["doc","docx","dot","dotx","docm","dotm","xml","xls","xlsx","ppt","pptx","pdf","zip","mp4","mp3","rar"];break;case"video":n.file_type=["mp4","mp3"];break;default:n.file_type=["doc","docx","dot","dotx","docm","dotm","xml","xls","xlsx","ppt","pptx","pdf","png","jpg","jpeg","bmp","zip","lrmx","mp4","mp3","rar"]}n.file_type=n.file_type||n.file_type,n.camera=n.camera,n.capture=n.capture;var t=!0;w()(e=n.file_type).call(e,(function(e){var n;~s()(n=["png","jpg","jpeg","bmp"]).call(n,e)||(t=!1)})),n.accept=t?"image/*":""},_=n.size,m=n.minSize,"string"!=typeof _&&(_=j()(_)),_||(_="10MB"),_.replace(/(\d*\.?\d*)(\w*)/,(function(e,t,i){n.size=t||2,n.size_unit=i.toUpperCase()||"MB"})),"MB"===n.size_unit&&(n.specific_size=1024*n.size*1024),"KB"===n.size_unit&&(n.specific_size=1024*n.size),"string"!=typeof m&&(m=j()(m)),m||(m="0MB"),m.replace(/(\d*\.?\d*)(\w*)/,(function(e,t,i){n.minSize=t||2,n.minSize_unit=i.toUpperCase()||"MB"})),"MB"===n.minSize_unit&&(n.specific_min_size=1024*n.minSize*1024),"KB"===n.minSize_unit&&(n.specific_min_size=1024*n.minSize),l(),r(),e.next=10,c(t,n,i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}var _,m}),e)}))),function(e,t,n){return c.apply(this,arguments)}),trainTcVodGenerateAssignment:function(){return t.callHcmOpenApi("train.tc.vod.generate.assignment",{},null,!0).then((function(e){return e}))},delSourceFile:function(e,t){var n=$q.defer();return"mp4"===t.file_type?l.post(e,{index:t.index}).then((function(e){n.resolve(e)}),(function(i,o,a,l,r,c){i&&i.data||uploadError("00045",j()({error:i,url:e,param:t,cause:"error",statusText:r,xhrStatus:c})),i=i.data,n.reject(i)})):n.resolve(!0),n.promise},audioAndVideoToTcVod:function(t){t.file&&e.getDialog({template:n("c8qL"),name:"progress",controller:"progressBarCtrl"}).params({vod_info:t}).size("small").show()},cancelAudioAndVideoToTcVod:function(e,t){e.uploaderInfo.isVideoUploadCancel=!0,t.cancel()},showVGA:function(t){return console.log("showVGA info:",t),D.a.getCustomDialogCtrl("mediaViewCtrl").then((function(n){return e.getDialog(n).params({name:t.name,fileId:t.fileId,playStartFunc:t.playStartFunc,playEndFunc:t.playEndFunc,extra_property:t.extra_property}).size("middle-small").show()}))},showCommonVGA:function(t){return e.getDialog(Ga).title("视频预览").params({index:t}).size("middle-small").show()}};var c}]);n("yXHg");O.a.directive("hcInputUpload",[function(){return{restrict:"EA",template:n("jQuF"),scope:{options:"=",key:"=",label:"=",model:"=ngModel"},controller:["formStructureService","$scope","$hcDialog","hcUploadFile","attachService","$element","$rootScope",function(e,t,n,i,o,a,l){t.init=function(){/127.0.0.1:3000/.test(location.href)&&alert("请使用新的选择器hc-input-upload-multi，hc-input-upload即将去除"),t.file={},t.setBtn()};var r=t.$watch("model",(function(e){e&&!t.file.name&&(o.annexInfo(t.model).then((function(e){t.getFileInfo(e.source_name),r()})),t.operateBtn[1].show=!0)}));t.setBtn=function(){var e;t.options.btn=t.options.btn||["upload","download","delete"],t.initBtn=w()(e=t.options.btn).call(e,(function(e){var n;return Pe()(n=t.operateBtn).call(n,(function(t){return e===t.key}))[0]}))},t.operateBtn=[{key:"upload",icon:"icon-hcm-upload",show:!t.options.readOnly},{key:"download",icon:"icon-hcm-download",show:t.model},{key:"delete",icon:"icon-hcm-delete",show:!t.options.readOnly&&t.model},{key:"show",icon:"icon-hcm-view",show:!0}],t.operatefuc={download:function(){this.downloadFile=function(){"pc"===client?window.open("document/loadsourcedocument/"+t.model):n.confirm("是否确认下载附件").then((function(){window.open("document/loadsourcedocument/"+t.model)}))},t.options.downloadFuc?t.options.downloadFuc(t.model,t.file.type).then(this.downloadFile):this.downloadFile()},upload:function(){var e={type:t.options.type,file_type:t.options.file_type,size:t.options.size||"5MB",upload_desc:t.options.upload_desc,file_name:t.options.file_name,upload_type:t.options.upload_type||"auto",after_process:t.options.after_process};i.upload(e).then((function(e){e.index&&(t.getFileInfo(e.name),t.model=e.index,t.operateBtn[1].show=!0,t.operateBtn[2].show=!t.options.readOnly)}))},delete:function(){n.confirm("确定要删除附件？").then((function(){t.model="",t.file={},t.operateBtn[1].show=!1,t.operateBtn[2].show=!1}))},show:function(){}},t.hidePreview=function(){t.show_preview=!1},t.showPreview=function(){if(t.options.show_preview&&!t.show_preview){if(!/(bmp|jpeg|png|jpg)$/gi.test(t.file.type))return!1;if(t.model){t.show_preview=!0;var e="/document/loadsourcedocument/"+window.hcm_env_pre;t.loadImg(e+t.model)}}},t.getFileInfo=function(e){t.file={},t.file.source_name=e,t.file.name=e.replace(/(\.\w+)$/,""),t.file.type=e.split(".")[e.split(".").length-1],/(doc|docx|dot|dotx|docm|dotm)$/gi.test(t.file.type)?t.file.classtype="word":/(xml|xls|xlsx)$/gi.test(t.file.type)?t.file.classtype="excel":/(pdf)$/gi.test(t.file.type)?t.file.classtype="pdf":/(ppt|pptx)$/gi.test(t.file.type)&&(t.file.classtype="ppt")},t.loadImg=function(e){var n=new Image;n.onload=function(){var e,i,o=Fe()(e=$(a[0])).call(e,".previewCanvas")[0],l=o.getContext("2d"),r=Fe()(i=$(a[0])).call(i,".hc-input-upload"),c=$("body").height()-r.offset().top-r.height()-40,s=t.options.max_width||r.width(),d=t.options.max_height||(c>400?400:c);if(n.width<=s&&n.height<=d)s=n.width,d=n.height;else{var u=s/n.width,_=d/n.height;u<=_?(d=n.height*u,s=n.width*u):(s=n.width*_,d=n.height*_)}o.width=s,o.height=d,t.max_width=s+"px",t.max_height=d+"px",l.drawImage(n,0,0,s,d)},n.src=e}}]}}]);n("IW8H"),n("pnyO");var Ja=function(){function e(e,t,n,i,o){var a=this;if(e.list=[],e.options.items_inline=e.options.items_inline||!1,e.options.mark_down=e.options.mark_down||!1,e.isChecked=function(t){var n=e.model?q()(e.model)?e.model:[e.model]:[];return(null==n?void 0:s()(n).call(n,t))>-1},e.preventEvent=function(e){e.preventDefault()},e.updateSelection=function(t,n){if(e.model=e.model||[],t.stopPropagation(),!a.$filter("valueToFunc")(e.options.readOnly)()){var i,o,l=s()(i=e.model).call(i,n),r=Ni()(e.model);if(-1==l)e.model.push(n),e.model=Ni()(e.model),e.options.change&&e.options.change(e,n,r);else b()(o=e.model).call(o,l,1),e.model=Ni()(e.model),e.options.change&&e.options.change(e,n,r)}},e.options.selectorObject||e.options.selectorModel||e.options.selector){var l=e.options.selectorObject||"hcm.model";e.options.selector?e.selector=e.options.selector:e.selector=function(t){var n,i=angular.extend(a.$filter("valueToFunc")(e.options.selectorFilter)()||{},(null===(n=e.options.selectorModel)||void 0===n?void 0:L()(n).call(n,"common_basic_"))?{enable:!0}:{});return a.dataService.callHcmOpenApi(l+".list",{model:e.options.selectorModel,filter_dict:i,page_index:1,page_size:e.options.page_size||t||200,extra_property:a.$filter("valueToFunc")(e.options.extra_property)()},void 0,void 0,!1)}}this.componentDefaultService=t,this.$filter=n,this.dataService=i,this.$scope=e,this.superSelectorService=o}return e.prototype.$onInit=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t=this;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.componentDefaultService.setComponentDefault(this.$scope.model,"hc-input-checkbox",this.$scope.options)];case 1:return e=n.sent(),this.$scope.model=e||this.$scope.model||[],this.$scope.options.list?(this.$scope.list=this.superSelectorService.parseList(this.$scope.options.list,this.$scope.options.selectorFilter),this.$scope.$watch("options.selectorFilter",(function(e,n){e!==n&&(t.$scope.list=t.superSelectorService.parseList(t.$scope.options.list,t.$scope.options.selectorFilter))}),!0)):this.$scope.selector&&this.$scope.selector(this.$scope.options.page_size).then((function(e){var n,i;t.$scope.options.selectorParser?t.$scope.list=ie()(n=t.$scope.list).call(n,t.$scope.options.selectorParser("list"in e?e.list:e)):t.$scope.list=ie()(i=t.$scope.list).call(i,"list"in e?e.list:e)})),[2]}}))}))},e.$inject=["$scope","componentDefaultService","$filter","dataService","superSelectorService"],e}(),Xa=n("j6Mp"),Qa=n.n(Xa);O.a.directive("hcInputCheckbox",["$filter",function(){return{restrict:"EA",template:Qa.a,scope:{options:"=",model:"=ngModel",ngChange:"&"},controller:Ja}}]),O.a.directive("hcInputDate",["$filter",function(e){return{restrict:"EA",template:"<input class='component-input-inner' hc-input-date-parse type='date' placeholder='{{options.placeholder}}' ng-model='model' ng-disabled='(options.readOnly|valueToFunc)()'>",scope:{options:"=",model:"=ngModel"}}}]),O.a.directive("hcInputDateParse",["$filter",function(e){return{restrict:"EA",require:"ngModel",link:function(t,n,i,o){o.$formatters.push((function(e){if(e)return new Date(e)})),o.$parsers.push((function(t){return e("date")(t,"yyyy-MM-dd")}))}}}]);n("T4mp");var Za=n("TSbF"),el=n.n(Za);n("QWL2");O.a.controller("DatePickerDialogCtrl",["$timeout","$rootScope","$scope","dataService","contextService",function(e,t,n,i,o){n.current_date=n.params,n.setDate=function(t){e((function(){n.$dialog.resolve_data(t),n.$dialog.dialog_close()}),200)}}]);var tl={controller:"DatePickerDialogCtrl",template:el.a};O.a.directive("hcInputDatePicker",["$filter",function(e){return{restrict:"EA",template:n("TREg"),scope:{options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope","$hcDialog",function(e,t){e.init=function(){""===e.model?e.model=ka()().format("YYYY-MM-DD"):e.model=ka()(e.model).format("YYYY-MM-DD")},e.pickerDate=function(){t.getDialog(tl).params(e.model).size("small").title(null).show().then((function(t){e.model=ka()(t).format("YYYY-MM-DD")}))}}]}}]),O.a.directive("hcInputDatetime",["$filter",function(e){return{restrict:"EA",template:n("Rz+B"),scope:{key:"=",options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope","$hcDialog","$rootScope","$filter","$element","componentDefaultService",function(){var t=p()(u.a.mark((function t(n,i,o,a,l,c){var s,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.client=window.client,!n.options&&(n.options={enabledMonths:!1}),t.next=4,c.setComponentDefault(n.model,"hc-input-datetime",n.options);case 4:s=t.sent,n.$apply((function(){e("isValidValue")(s)&&(n.model=s)})),(n.options.enabledDate||n.options.enabledMonths)&&(n.options.inputLock=!0),d=function(){if(!a("valueToFunc")((n.options||{}).readOnly)()){var e,t="icon-hcm-calendar";(n.options||{}).format&&!/[yMd]/gi.test(n.options.format)&&(t="icon-hcm-clock"),"mobile"===window.client&&(t=null!==(e=n.options.icon)&&void 0!==e?e:"icon-hcm-arrow-right"),Fe()(l).call(l,".input-icon").attr("class","input-icon "+t),n.element=l}},n.getRealYear=function(e,t,n){return!0===e?e=ka()().format("YYYY"):e?"string"!=typeof e||n||(e=M()(e.substring(0,4))):t&&("string"==typeof t&&(t=M()(t)),e=t),e},n.getDateFormat=function(){return a("timeFormat")(n.options.format)||"YYYY-MM-DD"},n.select=function(e){var t,i,a,l;e&&e.stopPropagation();var r=function(){return!0};n.options.enabledDate?r=n.options.enabledDate:n.options.enabledMonths&&(r=function(e,t){var i;return"years"===t||ae()(i=n.options.enabledMonths).call(i,e._d.getMonth()+1)}),o.$broadcast("datetime-picker-show",{datetime:n.model,enabledDate:r,format:n.options.format||"yyyy-MM-dd",enableToday:null===(t=n.options.enableToday)||void 0===t||t,enableTillNow:null!==(i=n.options.enableTillNow)&&void 0!==i&&i,tillNowTip:n.options.tillNowTip||"至今",disabledYear:null!==(a=n.options.disabledYear)&&void 0!==a&&a,minuteStep:null!==(l=n.options.minuteStep)&&void 0!==l?l:1,minYear:n.getRealYear(n.options.minYear,"1900"),maxYear:n.getRealYear(n.options.maxYear,"2199"),callback:function(e){var t=n.model;n.model=e,n.options.onChange&&n.options.onChange(e,t)}})},n.keyUp=function(e){13===(window.event?e.keyCode:e.which)&&n.autoFillDate()},n.blur=function(){n.autoFillDate()},n.clear=function(){n.model=null},n.changeDate=function(t,n){var i,o=n.split(/[\-\/:\s*]/g);return/^\d+$/g.test(t)?w()(o).call(o,(function(e){var o;i=ie()(o=i||[]).call(o,r()(t).call(t,0,e.length)),t=r()(t).call(t,e.length,n.length)})):i=/[\u4E00-\u9FFF]+/g.test(t)?t.match(/(\d+)|([\u4E00-\u9FFF]+)/g):t.split(/[^\d]+/g),i.length=o.length,i=w()(o).call(o,(function(t,n){if(i[n])if(/[\u4E00-\u9FFF]+/g.test(i[n]))t=e("convertYearQuarterToNumber")(i[n],t);else{var o=new RegExp("\\w{"+i[n].length+"}$","gim");t=t.replace(o,(function(){var e;return r()(e=i[n]).call(e,0,t.length)}))}return t=t.replace(/[a-z]/gi,"0")})),i=w()(i).call(i,(function(e,t){return/^(YYYY|MM|DD|Q|H)$/g.test(o[t])&&/^0+$/g.test(e)&&(e=e.replace(/0$/g,"1")),"Q"===o[t]&&(e="Q".concat(e)),"H"===o[t]&&(e="H".concat(e)),e}))},n.autoFillDate=function(){if(n.inner_model&&/[\u4e00-\u9fa5a-g|i-p|r-z|A-G|I-P|R-Z]/g.test(n.inner_model)){n.inner_model!=(n.options.tillNowTip||"至今")&&!/^\d{4}\s*(?:上半年|下半年|一季度|二季度|三季度|四季度)$/.test(n.inner_model)&&n.dateError()}var t=n.inner_model;if("?"===t)n.model=t;else if(t==(n.options.tillNowTip||"至今"))!n.model&&(n.model=null);else if(t){var i=n.getDateFormat(),o=n.changeDate(t,i);t=i.replace(/[a-z]+/gi,(function(){return b()(o).call(o,0,1)})),!0===n.check_valid(t)&&(n.model=n.inner_model=t,n.inner_model=e("parseQuaterAndHalfYear")(n.inner_model))}else n.model=null},n.$watch("(options.readOnly|valueToFunc)()",(function(e,t){d()})),n.$watch("model",(function(t,i){var o;if(!0===n.check_valid(t)){var a,l=n.getDateFormat(),r=ka()(null==t?void 0:t.toString()).format(l);r="Invalid date"===r?null==t?void 0:t.toString().format(l):r,n.inner_model=!ae()(a=[null,void 0,""]).call(a,t)&&L()(l).call(l,"YYYY")?(o=r,n.options.enableTillNow&&RegExp("^2199").test(o)?n.options.tillNowTip||"至今":""===o?null:e("parseQuaterAndHalfYear")(o)):""===t?null:t,n.options.change&&n.options.change(n,n.model,n.model,i)}})),n.check_valid=function(e){if(e){var t=n.getDateFormat();if(/YYYY/i.test(t)){if(isNaN(a("parseFormat")(e,n.options.format||"yyyy-MM-dd")))return n.dateError(),!1;if(!ka()(e,[t]).isValid())return n.dateError(),!1;var i=n.getRealYear(n.options.minYear,"1900",!0),o=n.getRealYear(n.options.maxYear,"2199",!0);if(Date.parse(e)<Date.parse(i)||Date.parse(e)>Date.parse(o+1))return n.dateError("请输入有效的日期范围"),!1}}return!0},n.dateError=function(e){var t,o=Fe()(t=$(n.element)).call(t,"input")[0];n.element&&o&&o.focus(),n.inner_model=null,i.notify(e||"日期(时间)输入格式不正确","warning")};case 20:case"end":return t.stop()}}),t)})));return function(e,n,i,o,a,l){return t.apply(this,arguments)}}()]}}]),O.a.directive("hcInputDatetimeInspur",["$filter",function(e){return{restrict:"EA",template:n("9hks"),scope:{key:"=",options:"=",model:"=ngModel",placeholder:"@"},compile:function(){return function(t,n){if(!e("valueToFunc")((t.options||{}).readOnly)()){var i,o="icon-hcm-calendar";(t.options||{}).format&&!/[yMd]/g.test(t.options.format)&&(o="icon-hcm-clock"),Fe()(i=$(n)).call(i,".input-icon").attr("class","input-icon "+o),t.element=n}}},controller:["$scope","$hcDialog",function(t,n){t.select=function(){var e,n;t.$root.$broadcast("datetime-picker-show",{datetime:t.model,format:(t.options||{}).format||"yyyy-MM-dd",enableToday:null===(e=(t.options||{}).enableToday)||void 0===e||e,enableTillNow:null!==(n=(t.options||{}).enableTillNow)&&void 0!==n&&n,tillNowTip:(t.options||{}).tillNowTip||"至今",minYear:(t.options||{}).minYear||"",maxYear:(t.options||{}).maxYear||"",minuteStep:1,callback:function(e){var n=t.model;t.model=e,((t.options||{}).onChange||function(){})(e,n)}})},t.keyUp=function(e){13==(window.event?e.keyCode:e.which)&&t.autoFillDate()},t.blur=function(){t.autoFillDate()},t.changeDate=function(e,t){var n,i=t.split(/[\-\:\s*]/g);return/^\d+$/g.test(e)?w()(i).call(i,(function(i){var o;n=ie()(o=n||[]).call(o,r()(e).call(e,0,i.length)),e=r()(e).call(e,i.length,t.length)})):n=e.split(/[^\d]+/g),n.length=i.length,n=w()(i).call(i,(function(e,t){if(n[t]){var i=new RegExp("\\w{"+n[t].length+"}$","gim");e=e.replace(i,(function(){var i;return r()(i=n[t]).call(i,0,e.length)}))}return e=e.replace(/[a-z]/gi,"0")})),n=w()(n).call(n,(function(e,t){return/^(yyyy|mm|dd|Q|H)$/gi.test(i[t])&&/^0+$/g.test(e)&&(e=e.replace(/0$/g,"1")),"Q"===i[t]&&(e="Q".concat(e)),"H"===i[t]&&(e="H".concat(e)),e}))},t.autoFillDate=function(){if(t.inner_model&&"0"!=t.inner_model&&/[\u4e00-\u9fa5a-g|i-p|r-z|A-G|I-P|R-Z]/g.test(t.inner_model)&&t.dateError(),a=t.inner_model){var n=(t.options||{}).format||"yyyy-MM-dd",i=t.changeDate(a,n),o=n.replace(/[a-z]+/gi,(function(){return b()(i).call(i,0,1)})),a=o;o=e("parseFormat")(o,n),isNaN(o.getDate())?t.dateError():"0"!=t.inner_model&&"0"===a[0]?t.dateError("请输入有效的日期范围"):t.model=t.inner_model=a}else t.model=""},t.dateError=function(e){var i,o=Fe()(i=$(t.element)).call(i,"input")[0];t.element&&o&&o.focus(),t.inner_model="",n.notify(e||"日期(时间)输入格式不正确","warning")},t.$watch("model",(function(e,n){t.inner_model=e,t.options&&t.options.change&&t.options.change(t,t.model,t.model,n)}));t.valueChange=function(n){e("valueToFunc")(t.options.readOnly)()||(t.hide_time=0==n,t.hide_time?t.model=0:t.model=function(e,t){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}("yyyy-MM-dd hh:mm",new Date))},0==t.model||null==t.model?t.valueChange(1):t.hide_time=!1}]}}]);n("Avvc");window.app.directive("hcDatetimeRange",[function(){return{restrict:"EA",template:'<div class="time-range"><hc-input-datetime placeholder="输入起始时间" options="options" ng-model="start"></hc-input-datetime><span class="separate"> - </span><hc-input-datetime placeholder="输入结束时间" options="options" ng-model="end"></hc-input-datetime></div>',scope:{key:"=",options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope",function(e){e.start="",e.end="",e.$watch("{start:start,end:end}",(function(t){var n={};t.start&&(n.start=t.start),t.end&&(n.end=t.end),(t.start||t.end)&&(e.model=n)})),e.initData=function(){var t=e.options.format&&e.options.format.toUpperCase();t=t||"YYYY-MM-DD";var n=e.options&&e.options.default;if(n)if(/^(month|week|day|year)$/i.test(n)||!0===n)switch(e.end=window.moment(new Date).format(t),!0){case/^day$/gi.test(n):e.start=window.moment(new Date).subtract(1,"days").format(t);break;case/^week$/gi.test(n):e.start=window.moment(new Date).subtract(7,"days").format(t);break;case/^year$/gi.test(n):e.start=window.moment(new Date).subtract(1,"years").format(t);break;default:e.start=window.moment(new Date).subtract(1,"months").format(t)}else e.model=angular.isFunction(n)?n():n,e.start=e.model&&e.model.start,e.end=e.model&&e.model.end;e.options&&(e.options.default=null)},e.initData()}]}}]),O.a.directive("hcInputDatetimeMobile",["$compile",function(e){return{restrict:"EA",template:n("SAVD"),scope:{options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope","$filter",function(e,t){e.init=function(){e.model&&(e.inner_model=new Date(e.model))},e.onChange=function(){e.options.format?e.model=t("dateFormat")(this.inner_model,e.options.format):e.model=t("dateFormat")(this.inner_model,"yyyy-MM-dd hh:mm:ss")},e.$watch("model",(function(n,i){if("time"==e.options.dateType){var o=new Date,a=t("dateFormat")(o,"yyyy-MM-dd");a=a+" "+e.model,e.inner_model=new Date(Date.parse(a.replace(/-/g,"/")))}else e.model&&(e.inner_model=new Date(Date.parse(e.model.replace(/-/g,"/"))));e.options.format?e.model=t("dateFormat")(e.inner_model,e.options.format):e.model=t("dateFormat")(e.inner_model,"yyyy-MM-dd hh:mm:ss"),e.options.change&&e.options.change(e,e.model,e.model)}))}]}}]),O.a.directive("hcInputLabelMulti",["$rootScope","$filter","$timeout",function(e,t,i){return{restrict:"EA",template:n("ZTcu"),scope:{options:"=",model:"=ngModel"},compile:function(e){return e.css("border","0"),e.css("padding","0"),e.css("height","inherit"),e.css("background-color","#fff"),function(e){e.isAdd=!1,e.model=e.model||[],e.add=function(t){t.stopPropagation(),e.isAdd=!0},e.remove=function(t){e.model=e.removeAt(e.model,t),e.$emit("hcInputLabelMultiRemove",e.model)},e.confirm=function(t){if(e.model=e.model||[],angular.isUndefined(e.options.newValue))e.isAdd=!1;else{var n=angular.isUndefined(e.model)?0:e.model.length;e.model[n]=e.options.newValue,e.$emit("hcInputLabelMultiAdd",e.model),e.options.newValue=void 0,e.isAdd=t}},e.inputLable=function(e){e.stopPropagation()},e.inputKeyDown=function(t){switch(t.keyCode){case 13:case 27:e.confirm(!0)}},e.customBlur=function(){e.confirm(!1)},e.removeAt=function(e,t){var n=r()(e).call(e,0,t+1);n.pop();var i=r()(e).call(e,t+1);return ie()(n).call(n,i)}}}}}]),O.a.directive("focusMe",(function(){return{link:function(e,t,n){e.$watch(n.focusMe,(function(i){!0===i&&(t[0].focus(),e[n.focusMe]=!1)}))}}}));var nl=n("r9jm"),il=n.n(nl),ol=n("iioW"),al=n.n(ol);O.a.directive("hcInputNumber",["componentDefaultService","$filter","$timeout","$rootScope",function(e,t,n,o){return{restrict:"EA",template:al.a,scope:{label:"=",options:"=",model:"=ngModel"},compile:function(){return function(a,l){a.options=a.options||{};var c=e.setComponentDefault(a.model,"hc-input-number",a.options);t("isValidValue")(c)&&(a.model=c),a.change=function(){a.options.change&&a.options.change(a,a.model)},a.step=a.options.step||1,a.$watch("options.precision",(function(e){e&&(a.step=1/Math.pow(10,e))})),a.max=E()(a.options.max)||null,a.min=E()(a.options.min)||null,a.editing=!1,a.canup=!0,a.candown=!0,t("valueToFunc")(a.options.readOnly)()&&(a.canup=!1,a.candown=!1),"mobile"==window.client&&a.options.showBoard&&(a.borderStyle={border:"1px solid #d8dde6",borderRadius:"4px"});var d=k()((function(e){a.options.staticMode&&(a.model="max"===e?a.options.max:a.options.min);var t=(null==a?void 0:a.label)||"本字段";"NaN"!==E()(a.options.max).toString()&&(t+="最大值为"+a.options.max+" "),"NaN"!==E()(a.options.min).toString()&&(t+="最小值为"+a.options.min),a.model="",o.show_warning(t,"",2e3)}),1e3),u=function(){a.editing||((a.model||0===a.model)&&((a.precision||void 0!==a.options.precision)&&(a.model=_(a.model,a.precision||a.options.precision)),a.model>a.options.max&&d("max"),a.model<a.options.min&&d("min")),n((function(){a.$emit("number_change_event",!0)}),200))},_=function(e,t){if(void 0===t)return e;if(0===t)return Math.round(e);var n=String(e),i=s()(n).call(n,".");if(-1===i)return e;if(!n.replace(".","").split("")[i+t])return e;var o=n.length;return"5"===n.charAt(o-1)&&(n="".concat(r()(n).call(n,0,Math.max(0,o-1)),"6")),il()(Number(n).toFixed(t))};a.onFocus=function(e){a.editing=!0,null!==a.model&&e.currentTarget.select()},a.onBlur=function(){a.editing=!1,u()},a.$watch("model",(function(e,t){u()}),!0);var p=!1,m=!1;function f(){var e=a.model;!t("valueToFunc")(a.options.readOnly)()&&p&&(a.precision||void 0!==a.options.precision?a.model=_(Object(i.l)(" "!==a.model?a.model:a.max||0,"-",a.step),a.precision||a.options.precision):a.model=E()(Object(i.l)(" "!==a.model?a.model:a.max||0,"-",a.step))),t("valueToFunc")(a.options.readOnly)()||(a.canup=!0,a.candown=!0,a.options.staticMode&&a.model<a.options.min&&(a.model=e,a.candown=!1,d("min")))}function h(){var e=a.model;!t("valueToFunc")(a.options.readOnly)()&&m&&(a.precision||void 0!==a.options.precision?a.model=_(Object(i.l)(" "!==a.model?a.model:a.min||0,"+",a.step),a.precision||a.options.precision):a.model=E()(Object(i.l)(" "!==a.model?a.model:a.min||0,"+",a.step))),t("valueToFunc")(a.options.readOnly)()||(a.canup=!0,a.candown=!0,a.options.staticMode&&a.model>a.options.max&&(a.model=e,a.canup=!1,d("max")))}a.minus_down=function(){"pc"===window.client&&(p=!0,f())},a.minus_up=function(){"pc"===window.client&&(p=!1)},a.add_down=function(){"pc"==window.client&&(m=!0,h())},a.add_up=function(){"pc"==window.client&&(m=!1)},Fe()(l).call(l,".minus").on("touchstart",(function(){p=!0,f()})),Fe()(l).call(l,".minus").on("touchend",(function(){p=!1})),Fe()(l).call(l,".add").on("touchstart",(function(){m=!0,h()})),Fe()(l).call(l,".add").on("touchend",(function(){m=!1})),a.keydown=function(e){if(38==e.keyCode||40==e.keyCode){if(e.preventDefault(),$scope.options.keyboardPrevent)return;switch(e.keyCode){case 38:m=!0,h();break;case 40:p=!0,f()}}},a.keyup=function(e){if(38==e.keyCode||40==e.keyCode){if(e.preventDefault(),$scope.options.keyboardPrevent)return;switch(e.keyCode){case 38:m=!1;break;case 40:p=!1}}},a.mouse_wheel=function(e){console.log(e,a.options.disableMouseWheel),e.preventDefault(),a.options.disableMouseWheel||(e.originalEvent.wheelDelta>0?(m=!0,h(),m=!1):(p=!0,f(),p=!1))},a.$watch("model",(function(e,t){e!==t&&a.change()}))}}}}]),O.a.directive("hcInputNumberParse",["$filter",function(e){return{restrict:"EA",require:"ngModel",link:function(t,n,i,o){o.$formatters.push((function(t){return e("isValidValue")(t)?E()(t):""}))}}}]),n("wat2"),O.a.directive("hcInputInterval",["$compile",function(e){return{restrict:"EA",template:n("2kE+"),scope:{options:"=",model:"=ngModel"},controller:["$scope",function(e){var t,n;e.options.readOnly&&(e.options.min_demand_options&&(e.options.min_demand_options.readOnly=e.options.readOnly),e.options.max_demand_options&&(e.options.max_demand_options.readOnly=e.options.readOnly)),"hc-super-selector"===(null===(t=e.options)||void 0===t?void 0:t.min_demand_component)&&(e.options.min_demand_options.returnFormat="id"),"hc-super-selector"===(null===(n=e.options)||void 0===n?void 0:n.max_demand_component)&&(e.options.max_demand_options.returnFormat="id")}]}}]),O.a.directive("hcInputNumberSuper",["$rootScope","$filter","$timeout","componentDefaultService",function(e,t,o,a){return{restrict:"EA",template:"mobile"===window.client?n("ZxGa"):n("iOfC"),scope:{label:"=",options:"=",model:"=ngModel"},compile:function(){return function(n,l){angular.isUndefined(n.options.min)||angular.isUndefined(n.options.max)||(n.options.placeholder=n.options.min+"-"+n.options.max),n.step=n.options.step||1/Math.pow(10,n.options.precision||0),n.precision=n.options.precision||(n.step.toString().split(".")[1]||"").length,n.max=E()(n.options.max)||null,n.min=E()(n.options.min)||null,n.options.list="mobile"===window.client?function(e,t,n){for(var o=[],a=t||0;a>=(e||0);a=Object(i.b)(a,n||1))o.push({label:a,value:a});return o}(n.min,n.max,n.step):[],n.options.readOnly=t("valueToFunc")(n.options.readOnly)(),n.editing=!1;var r=a.setComponentDefault(n.model,"hc-input-number-super",n.options);t("isValidValue")(r)&&(n.model=r);var c=E()(n.model);n.options.doNotDefaultMax?void 0!==n.model&&null!==n.model?n.model=c:void 0===n.model&&"pc"===e.client&&(n.model=""):n.model=isNaN(c)?n.options.max||0:c;var s=function(){var t,i;null===(t=(i=n.options).change)||void 0===t||t.call(i,n,n.model);var a=function(t){n.model="max"===t?n.options.max:n.options.min;var i=(null==n?void 0:n.label)||"本字段";"NaN"!==E()(n.options.max).toString()&&(i+="最大值为"+n.options.max+" "),"NaN"!==E()(n.options.min).toString()&&(i+="最小值为"+n.options.min),e.show_warning(i)};n.editing||(n.model&&""!==n.model&&(n.model=E()(n.model.toFixed(n.precision)),n.model>n.options.max&&a("max"),n.model<n.options.min&&a("min")),o((function(){n.$emit("number_change_event",!0)}),200))};n.onFocus=function(){n.editing=!0},n.onBlur=function(){n.editing=!1,s()},n.$watch("model",(function(e,t){e!==t&&s()})),n.minus=function(){(!n.min||n.model>n.min)&&(n.model=E()((n.model-n.step).toFixed(n.precision)),Fe()(l).call(l,"input").css("background-color","#eee"),o((function(){Fe()(l).call(l,"input").css("background-color","transparent")}),100))};var d=!1,u=!1;function _(){!t("valueToFunc")(n.options.readOnly)()&&d&&(null==n.min||n.model>n.min)&&(n.model=E()(((""!==n.model?n.model:n.max||0)-n.step).toFixed(n.precision)))}function p(){!t("valueToFunc")(n.options.readOnly)()&&u&&(null==n.max||n.model<n.max)&&(n.model=E()(((""!==n.model?n.model:n.min||0)+n.step).toFixed(n.precision)))}n.minus_down=function(){"pc"===window.client&&(d=!0,_())},n.minus_up=function(){"pc"===window.client&&(d=!1)},n.add_down=function(){"pc"==window.client&&(u=!0,p())},n.add_up=function(){"pc"==window.client&&(u=!1)},n.mouse_wheel=function(e,t,n,i){e.preventDefault()},Fe()(l).call(l,".minus").on("touchstart",(function(){d=!0,_()})),Fe()(l).call(l,".minus").on("touchend",(function(){d=!1})),Fe()(l).call(l,".add").on("touchstart",(function(){u=!0,p()})),Fe()(l).call(l,".add").on("touchend",(function(){u=!1}))}}}}]);var ll=n("crtA"),rl=n.n(ll),cl=(n("5vos"),function(){function e(e,t,n,i,o,a){var l=this;e.list=[];var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));if(Fe()(t).call(t,"input").attr("name",r),e.id=r,e.options.show_image=e.options.show_image||!1,e.options.items_inline=e.options.items_inline||!1,e.options.larger_label=e.options.larger_label||!1,e.options.mark_down=e.options.mark_down||!1,e.valueChange=function(t){if(!l.$filter("valueToFunc")(e.options.readOnly)()){var n=Ni()(e.model);e.model=t,e.options.change&&e.options.change(e.options,e.model,e,n)}},e.preventEvent=function(e){e.preventDefault()},e.options.selectorObject||e.options.selectorModel||e.options.selector){var c=e.options.selectorObject||"hcm.model";e.options.selector?e.selector=e.options.selector:e.selector=function(t){var n,i=angular.extend(l.$filter("valueToFunc")(e.options.selectorFilter)()||{},(null===(n=e.options.selectorModel)||void 0===n?void 0:L()(n).call(n,"common_basic_"))?{enable:!0}:{});return l.dataService.callHcmOpenApi(c+".list",{model:e.options.selectorModel,filter_dict:i,page_index:1,page_size:e.options.page_size||t||200,extra_property:l.$filter("valueToFunc")(e.options.extra_property)()},void 0,void 0,!1)}}this.componentDefaultService=n,this.$filter=i,this.dataService=o,this.$scope=e,this.superSelectorService=a}return e.prototype.$onInit=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t=this;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.componentDefaultService.setComponentDefault(this.$scope.model,"hc-input-radio",this.$scope.options)];case 1:return e=n.sent(),this.$filter("isValidValue")(e)&&(this.$scope.model=e),this.$scope.options.list?(this.$scope.list=this.superSelectorService.parseList(this.$scope.options.list,this.$scope.options.selectorFilter),this.$scope.$watch("options.selectorFilter",(function(e,n){e!==n&&(t.$scope.list=t.superSelectorService.parseList(t.$scope.options.list,t.$scope.options.selectorFilter))}),!0)):this.$scope.selector&&this.$scope.selector(this.$scope.options.page_size).then((function(e){var n,i;t.$scope.options.selectorParser?t.$scope.list=ie()(n=t.$scope.list).call(n,t.$scope.options.selectorParser("list"in e?e.list:e)):t.$scope.list=ie()(i=t.$scope.list).call(i,"list"in e?e.list:e)})),[2]}}))}))},e.$inject=["$scope","$element","componentDefaultService","$filter","dataService","superSelectorService"],e}());O.a.directive("hcInputRadio",["$filter",function(){return{restrict:"EA",template:rl.a,scope:{options:"=",model:"=ngModel"},controller:cl}}]),O.a.directive("hcInputSelectMulti",["$rootScope","$filter","$timeout",function(e,t,i){return{restrict:"EA",template:n("H1WK"),scope:{options:"=",model:"=ngModel"}}}]);n("y+IN");O.a.directive("hcInputSwitch",["$compile",function(e){return{restrict:"EA",template:'<label><input class="hc-input-switch mui-switch-anim" ng-model="model" ng-change="is_checked()" type="checkbox" ng-disabled="(options.readOnly|valueToFunc)()"></label>',scope:{label:"=",options:"=",model:"=ngModel"},compile:function(){return function(e){var t;e.model=e.model||(null===(t=e.options)||void 0===t?void 0:t.default)||!1,e.is_checked=function(){var t,n;return e.$emit("hcInputSwitchChange",e.label,e.model),null===(t=(n=e.options).change)||void 0===t||t.call(n,e,e.model),e.model}}}}}]),O.a.directive("hcPubSwitch",["$compile",function(e){return{restrict:"EA",scope:{isEnable:"=",accountId:"="},template:'<label class="hc-input-switch" ng-model="isEnable" ng-click="changeState()"><input type="checkbox"><span></span><span></span><span></span></label>',compile:function(){return function(e,t){Fe()(t).call(t,"input")[0].checked=e.isEnable||!1,e.changeState=function(){e.isEnable=!e.isEnable,Fe()(t).call(t,"input")[0].checked=e.isEnable,e.$emit("to-account-switch",e.accountId)}}}}}]),O.a.directive("hcLinkField",["$filter",function(e){return{restrict:"EA",template:"<div><span class='hc-link' ng-click='options.redirect_to(options.state)' ng-bind='options.label'></span></div>",scope:{options:"="}}}]);var sl=n("yATM");O.a.directive("hcSysLink",["$filter",function(){return{restrict:"EA",template:"<div class='hc-sys-link' ng-init='init()' ng-click='goToLink()'>{{label}}</div>",scope:{options:"=",model:"=ngModel"},controller:["$scope","$rootScope","$hcDialog","$state","componentDefaultService","$filter",function(e,t,n,i,o,a){var l=function(){var t,n;if(g()(t=re()(null!==(n=e.model)&&void 0!==n?n:{})).call(t,(function(t){e[t]=angular.copy("url"===t?e.model[t]:a("valueToFunc")(e.model[t])())})),e.params)if("report"===e.params.type)e.params.filter=sl.a.dump(Pe()(e.params)||{});else if("pc"===window.client){var i;g()(i=re()(e.params)).call(i,(function(t){e.params[t]&&a("isJSON")(e.params[t])&&(e.params[t]=j()(e.params[t]))}))}};e.init=function(){e.model=a("isValidValue")(e.model)?e.model:o.setComponentDefault(e.model,"hc-sys-link",e.options),l()},e.$watch("model",(function(t,n){t!==n&&e.init()})),e.goToLink=function(){if(l(),e.model){if(o=window.client,!ae()(a=angular.isArray(e.options.target)?e.options.target:["pc","mobile"]).call(a,o))return void t.show_warning("请在"+("pc"===window.client?"移动":"网页")+"端查看该链接！");"mobile"===window.client?(n.closeAll(),e.options.onClick?e.options.onClick(e,e.model):e.state?t.super_go(e.state,e.params):window.commonOpen(e.url)):e.options.onClick?e.options.onClick(e,e.model):e.state?window.commonOpen(window.location.protocol+"//"+window.location.host+location.pathname+location.search+i.href(e.state,e.params)):window.commonOpen(e.url)}var o,a}}]}}]),O.a.directive("hcSysLocationMap",["$filter",function(){return{restrict:"EA",template:n("TDwY"),scope:{options:"=",model:"=ngModel"},controller:["$scope","$rootScope",function(e,t){e.init=function(){e.location_watch&&e.location_watch(),e.location_watch=e.$watch("model",(function(t){if(t){var n=t.split(";");e.longitude=n[0],e.latitude=n[1],e.show_map=!0}else e.show_map=!1}),!0)}}]}}]),O.a.directive("hcPhotoField",["$filter",function(e){return{restrict:"EA",template:n("263P"),scope:{options:"=",model:"=ngModel"},controller:["$filter","$scope","$rootScope","hcImageService",function(e,t,n,i){t.list_photo=[],t.$watch("model",(function(e){var n;t.list_photo&&0!=t.list_photo.length||(t.list_photo=e?w()(n=e.split(",")).call(n,(function(e){return{index:e}})):[])})),t.photo_add=function(e){var n={index:null,uploading:!0};t.list_photo.push(n),i.uploadImg(e).then((function(e){var i;n.index=e,n.uploading="false",t.model=w()(i=t.list_photo).call(i,(function(e){return e.index})).join()}))},t.photo_remove=function(e,n){var i,o;n.stopPropagation(),b()(i=t.list_photo).call(i,e,1),t.model=w()(o=t.list_photo).call(o,(function(e){return e.index})).join()},t.photo_view=function(i){var o,a=w()(o=t.list_photo).call(o,(function(n){return e("commonImage")(n.index,[t.options.type]||!1)}));n.img_preview(a,i)}}]}}]),O.a.directive("pickerSelector",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{items:"=",value:"="},template:n("6S05"),link:function(t,i,o){var a=new(n("iQKG"))(i[0],{probeType:2,scrollbars:!1,mouseWheel:!0,fadeScrollbars:!0,bounce:!0,click:!0,bindToWrapper:!0,tap:!0});a.on("scrollEnd",(function(){var n=-Math.round(this.y/45);this.scrollTo(0,45*Math.round(this.y/45));var i=t.items[n].value;i!==t.value&&e((function(){t.value=i,e((function(){t.$emit("selector-change")}),100)}),100)})),t.$watch("items",(function(t){t&&(e((function(){a.refresh()}),600),e((function(){a.refresh()}),1200),e((function(){a.refresh()}),2e3))}),!0),t.$watch("value",(function(e,n){(e||0===e)&&g()(angular).call(angular,t.items,(function(e,n){e.selected&&(t.items[n].selected=!1),e.value==t.value&&(t.items[n].selected=!0,a.scrollTo(0,45*-n))}))}))}}}]).directive("datetimePicker",["$filter","$timeout",function(e,t){return{restrict:"E",scope:!0,template:n("FfYN"),controller:["$scope","$rootScope",function(n,i){var o,a;n.client=window.client;var l=function(){};if(n.close_date_picker=function(e){e&&(a||function(){})(),n._hide=!0,t((function(){n.dialog_show=!1,i.$broadcast("datetime-picker-hidden")}),150)},n.initMobilePickerArray=function(){n.array_year=[],n.array_month=[],n.array_day=[],n.array_hour=[],n.array_minute=[],n.array_second=[];for(var e=1;e<=12;e++)n.array_month.push({text:e+"月",value:e,selected:n.month===e});for(var t=1;t<=31;t++)n.array_day.push({text:t+"日",value:t,selected:n.day===t});for(var i=0;i<24;i++)n.array_hour.push({text:i+"时",value:i,selected:n.hour===i});for(var o=0;o<60;o++)n.array_minute.push({text:o+"分",value:o,selected:n.minute===o});for(var a=0;a<60;a++)n.array_second.push({text:a+"秒",value:a,selected:n.second===a});n.array_year=[];for(var l=n.minYear||n.year-5;l<=(n.maxYear||n.year+5);l++)n.array_year.push({text:l+"年",value:l,selected:n.year===l})},n.isSelectable=function(e){if(n.enabledDate){var t,i=!0,o={y:"years",M:"months",d:"days",h:"hours",m:"minutes",s:"seconds"};return ao()(t=["y","M","d","h","m","s"]).call(t,(function(t){var a,l,r;return-1===s()(a=n.format).call(a,t)||!(i=null===(l=null===(r=n.enabledDate)||void 0===r?void 0:r.call(n,moment(e),o[t]))||void 0===l||l)})),i}return!0},"mobile"===n.client){var r=function(){var e=[31,28,31,30,31,30,31,31,30,31,30,31];(n.year%4==0&&n.year%100!=0||n.year%400==0)&&(e[1]=29);var t=e[n.month-1];if(t>n.array_day.length)for(var i=n.array_day.length+1;i<=t;i++)n.array_day.push({text:i+"日",value:i});else if(t<n.array_day.length){var o;n.day>t&&(n.day=t),b()(o=n.array_day).call(o,t)}};n.initMobilePickerArray(),n.init_enabled_date=function(){var e,t,i,o,a,l;n.array_year=Pe()(e=n.array_year).call(e,(function(e){var t,i;return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,moment([e.value]),"years"))||void 0===t||t})),n.array_month=Pe()(t=n.array_month).call(t,(function(e){var t,i,o=moment(n.datetime).startOf("year").add(e.value-1,"month");return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,o,"months"))||void 0===t||t})),n.array_day=Pe()(i=n.array_day).call(i,(function(e){var t,i,o=moment(n.datetime).startOf("month").add(e.value-1,"day");return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,o,"days"))||void 0===t||t})),n.array_hour=Pe()(o=n.array_hour).call(o,(function(e){var t,i,o=moment(n.datetime).startOf("days").add(e.value,"hour");return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,o,"hours"))||void 0===t||t})),n.array_minute=Pe()(a=n.array_minute).call(a,(function(e){var t,i,o=moment(n.datetime).startOf("hours").add(e.value,"minute");return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,o,"minutes"))||void 0===t||t})),n.array_second=Pe()(l=n.array_second).call(l,(function(e){var t,i,o=moment(n.datetime).startOf("minutes").add(e.value,"second");return null===(t=null===(i=n.enabledDate)||void 0===i?void 0:i.call(n,o,"seconds"))||void 0===t||t}))},l=function(){"mobile"===n.client&&n.initMobilePickerArray(),n.datetime?/^\d{1,2}:\d{1,2}(:\d{1,2})?$/.test(n.datetime)&&(n.datetime=e("dateFormat")(new Date,"yyyy-MM-dd ")+n.datetime):n.datetime=e("dateFormat")(new Date,"yyyy-MM-dd hh:mm:ss");var t=e("dateFormat")(n.datetime,"yyyy-MM-dd").split("-");n.year=M()(t[0]),n.month=M()(t[1]),n.day=M()(t[2]);var i=e("dateFormat")(n.datetime,"hh:mm:ss").split(":");n.hour=M()(i[0]),n.minute=M()(i[1]),n.second=M()(i[2]),n.array_year=[];for(var o=n.minYear||n.year-5;o<=(n.maxYear||n.year+5);o++)n.array_year.push({text:o+"年",value:o});r(),"mobile"===n.client&&n.init_enabled_date()},n.select_date=function(t){t.stopPropagation(),n.isSelectable(n.datetime)?((o||function(){})(e("dateFormat")(n.datetime,n.format)),n.close_date_picker()):i.show_warning("当前日期不可选")},n.clean_date=function(){n.datetime="",(o||function(){})(""),n.close_date_picker()},n.setToday=function(e,t){var i,o,a;(t&&(t.stopPropagation(),t.preventDefault()),"today"===e)?(n.datetime=new Date,s()(i=n.format).call(i,"h")>=0||s()(o=n.format).call(o,"m")>=0||s()(a=n.format).call(a,"s")>=0||n.select_date(t)):"tillNow"===e&&(n.datetime=new Date("2199/12/31 23:59:59"),n.select_date(t));l(),n.dialog_title=n.getWeekDay(n.datetime)},n.getWeekDay=function(t){var i,o,a=L()(i=n.format.toLowerCase()).call(i,"yyyy-mm-dd")?"星期".concat(["天","一","二","三","四","五","六"][t.getDay()]):"";return ie()(o="".concat(e("dateFormat")(t,n.format),"  ")).call(o,a)},n.$on("selector-change",(function(){"mobile"===n.client&&n.initMobilePickerArray(),r();var e=[n.year||"2000","/",n.month||"01","/",n.day||"01"," ",n.hour||"00",":",n.minute||"00",":",n.second||"00"];n.datetime=new Date(e.join("")),"mobile"===n.client&&n.init_enabled_date(),n.dialog_title=n.getWeekDay(n.datetime)}))}else n.select_date=function(t){var a;null===(a=o)||void 0===a||a(e("dateFormat")(t,n.format)),n.dialog_show=!1,i.$broadcast("datetime-picker-hidden")};n.$on("datetime-picker-show",(function(t,i){var r,c,d;if(("string"==typeof(i=i||{})||i instanceof Date)&&(i={datetime:i}),n.enableToday=null===(r=i.enableToday)||void 0===r||r,n.enableTillNow=null!==(c=i.enableTillNow)&&void 0!==c&&c,n.renderBtnList=e("isValidValue")(n.enableToday)||e("isValidValue")(n.enableTillNow),n.enabledDate=i.enabledDate,n.tillNowTip=i.tillNowTip||"至今",n.format=i.format||"yyyy-MM-dd hh:mm",n.datetime=i.datetime,n.disabledYear=null!==(d=i.disabledYear)&&void 0!==d&&d,n.datetime){var u=e("parseFormat")(n.datetime,n.format);isNaN(u.getDate())||(n.datetime=u)}else{var _=new Date;_.setSeconds(0),n.datetime=_}if(o=i.callback,a=i.closeCallback,"mobile"===n.client)n.dialog_title=n.getWeekDay(n.datetime),n.minYear=i.minYear,n.maxYear=i.maxYear,l();else{var p,m,f,h,g,v={m:"minute",h:"hour",d:"day",M:"month",Q:"quarter",H:"halfYear",y:"year"},b="d";ao()(p="dMQHyhm".split("")).call(p,(function(e){var t;if(s()(t=n.format).call(t,e)>=0)return b=e,!0}));var y="d";ao()(m="mhdMQHy".split("")).call(m,(function(e){var t;if(s()(t=n.format).call(t,e)>=0)return y=e,!0})),n.datetime_config={startView:v[b],enabledDate:i.enabledDate,enableToday:null===(f=i.enableToday)||void 0===f||f,enableTillNow:null!==(h=i.enableTillNow)&&void 0!==h&&h,tillNowTip:i.tillNowTip||"至今",minView:v[y],minuteStep:i.minuteStep||1,disabledYear:null!==(g=i.disabledYear)&&void 0!==g&&g}}n.dialog_show=!0,n._hide=!1})),n.$on("datetime-picker-hide",(function(){n.close_date_picker()}))}]}}]);var dl=n("zZ81"),ul=n.n(dl);O.a.directive("hcSelector",[function(){return{restrict:"EA",template:ul.a,scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$timeout",function(e,t){e.$watch("model",(function(t){""!==t&&null!=t?e.in_process||(e.options.query||"object"!==f()(t)||angular.isArray(t)?e.mapSelector():(e.selector_label="name"in t?t.name:t.content,e.in_process=!1)):e.selector_label=""})),e.init=function(){e.options=e.options||{},e.client=window.client,e.hover=!1;var t=$(".component-container .hc-selector");e.options.widthSet&&t.css({width:e.options.widthSet}),e.options.readOnly&&t.css({"padding-right":0})},e.onClick=function(t){var n;e.options.readOnly||(e.options.selectorOptions=e.options.selectorOptions||[],(e.options.dictParams?e.options.selector({event:t,scope:e}):(n=e.options).selector.apply(n,Object(Pt.h)(e.options.selectorOptions))).then((function(n){n&&(e.selector_label=n.name,e.model=e.options.selectorParse?e.options.selectorParse(n):n,e.mapSelector(t,n))})))},e.mapSelector=function(n,i){var o,a,l;if(e.in_process=!0,e.options.queryMapper)e.selector_label=e.options.queryMapper(e.model);else if(e.options.selectorMapper){var r="object"===f()(e.model)?e.model.id?e.model.id:e.model.value:e.model;e.options.selectorMapper(r).then((function(n){var i,o;n&&(e.selector_label=n.name,e.options.originObject=n,e.model=e.options.selectorParse?e.options.selectorParse(n):n,null===(o=(i=e.options).change)||void 0===o||o.call(i,e,e.model,n),t((function(){e.in_process=!1}),200))}))}else"object"===f()(e.model)?e.selector_label=e.model.name:"object"===f()(i)?e.selector_label=null!==(o=i.name)&&void 0!==o?o:e.model:e.selector_label=e.model,null===(l=(a=e.options).change)||void 0===l||l.call(a,e,e.model,e.model),t((function(){e.in_process=!1}),200)},e.del=function(){e.model=null,e.selector_label=null,e.options.query&&(e.options.form_data=null)}}]}}]);n("hWPd");var _l=n("YSSH"),pl=n.n(_l);window.app.directive("outsideSelectPanel",[function(){return{restrict:"E",scope:{options:"="},template:pl.a,controller:["$scope","$element","$controller","$timeout",function(e,t,n,i){e.params=e.options,e.filter_key=e.options.returnFormat||"id",e.limited=e.options.limited,n("SelectorPanelController",{$scope:e}),e.init=p()(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.initInfo(),e.panel_max_height="pc"===client?25:120,n.next=4,e.refreshData();case 4:i((function(){e.checkOverflow(),e.is_overflow&&Fe()(t).call(t,".select-pane-container").css("max-height",e.panel_max_height),e.expanded=!1}),300);case 5:case"end":return n.stop()}}),n)}))),e.onClick=function(t){if(e.multi){var n,i;if(e.isDisabled(t))return;e.isSelected(t)?b()(n=e.originObject).call(n,e.selected_items_meta[t.key||t.id],1):e.originObject.push(t);var o=[];w()(i=e.originObject).call(i,(function(t){o.push(t[e.filter_key])})),e.model=o.length?o:null}else e.originObject=e.isSelected(t)?null:t,e.isSelected(t)?null==e.options.returnFormat?e.model=t.id:"object"===e.options.returnFormat?e.model=t:e.model=t[e.options.returnFormat]:e.model=null},e.isDisabled=function(t){return!!(e.multi&&e.limited&&e.model)&&(!(e.model.length<e.limited)&&!e.isSelected(t))},e.checkOverflow=function(){e.is_overflow=Fe()(t).call(t,".select-pane-container")[0].scrollHeight>e.panel_max_height},e.expandClick=function(){e.expanded=!e.expanded,e.expanded?Fe()(t).call(t,".select-pane-container").css("max-height","none"):Fe()(t).call(t,".select-pane-container").css("max-height",e.panel_max_height)},e.$watch("model",(function(t,n){t!==n&&e.$emit("outside_panel_data",e.model)})),e.$watch("options.originObject",(function(t,n){t!==n&&(e.originObject=t,null===e.originObject&&(e.model=null))}),!0),e.$watch("expanded",(function(t,n){t!==n&&e.$emit("subcomponent_expand",e.expanded)})),e.$watch("is_overflow",(function(t,n){t!==n&&e.$emit("subcomponent_overflow",e.is_overflow)}))}]}}]);n("Gzbq");var ml=n("3xDC"),fl=n.n(ml);n("NIGo"),n("YNsf");O.a.controller("treeSelectorPanelController",["contextService","$scope","$filter",function(e,t,n){t.keyWordChange=function(){t.list&&(t.item_list=n("TreeSearch")(t.list,t.search_key.key))},t.client=window.client,t.search_key={key:"",blur:t.keyWordChange,clear:function(){t.search_key.key="",$(".selector-search input").focus(),t.keyWordChange(),navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&window.scroll(0,0)}},t.params.selector(null,t.page_index,1e5).then((function(e){var i,o;(t.selectedNode=[],t.selectedId=[],t.params.hasNull&&-1!==(e.list[0]||{}).id&&b()(i=e.list).call(i,0,0,{name:"空",id:-1,order_num:0}),t.list=n("treeIdFill")(e.list),t.params.enable_level)&&(t.list=Pe()(o=t.list).call(o,(function(e){return e.level<=t.params.enable_level})));t.item_list=n("TreeSearch")(t.list,t.search_key.key)})),t.confirm=function(){if(t.selectedNode){var e,i,o,a,l,r={};if(w()(e=t.list).call(e,(function(e){r[e.id]=e})),t.params.enable_selected)t.selectedNode=Pe()(o=t.selectedNode).call(o,(function(e){return n("valueToFunc")(t.params.enable_selected)({selectedNode:e})}));else t.selectedNode=Pe()(a=t.selectedNode).call(a,(function(e){return!e.children}));if(w()(i=t.selectedNode).call(i,(function(e){var t,n,i;e.tree=Pe()(t=w()(n=fl()(i=e.tree_id.split("!")).call(i)).call(n,(function(e){return r[e]}))).call(t,(function(e){return e}))})),!0===t.params.full_path)w()(l=t.selectedNode).call(l,(function(e){var t,n;e.name=fl()(t=w()(n=e.tree).call(n,(function(e){return e.name}))).call(t).join("")}))}t.$dialog.resolve_data(t.params.multi?t.selectedNode:t.selectedNode[0]),t.$dialog.dialog_close()},t.foldNode=function(e,t){e&&e.stopPropagation(),t.expand=!t.expand},t.clickNode=function(e,n,i){e&&e.stopPropagation(),!t.params.multi&&t.singleSelect(n),t.params.multi&&t.multiSelect(n,i)},t.singleSelect=function(e){var i=!e.children;t.params.enable_selected&&(i=n("valueToFunc")(t.params.enable_selected)({selectedNode:e})),i?(t.selectedNode=[e],t.selectedId=[e.id]):e.expand=!e.expand},t.multiSelect=function(e,n){if(e.children&&!n)e.expand=!e.expand;else{var i,o=function(e,n){var i,o=s()(i=t.selectedId).call(i,e.id);if(n){if(o>=0)return;t.selectedNode.push(e),t.selectedId.push(e.id)}else{var a,l;if(o<0)return;b()(a=t.selectedNode).call(a,o,1),b()(l=t.selectedId).call(l,o,1)}},a=!~s()(i=t.selectedId).call(i,e.id);o(e,a);!function e(t){var n;t.children&&w()(n=t.children).call(n,(function(t){o(t,a),t.children&&e(t)}))}(e)}},t.$dialog.operates([{label:"取消",cancel:!0,func:function(){t.$dialog.dialog_close()}},{label:"确定",default:!0,cancel:!0,func:t.confirm}])}]);var hl={controller:"treeSelectorPanelController",template:n("coWP"),name:"hc-super-selector"},gl=n("55J8"),vl=n("Q0us");O.a.directive("hcSuperSelector",[function(){return{restrict:"EA",template:n("3pjH"),scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$rootScope","$q","$timeout","$hcDialog","dataService","$filter","componentDefaultService","contextService",function(e,t,n,i,o,a,l,r,c){var s,d;return Object(Pt.c)(this,void 0,void 0,(function(){function t(){var t;if(m&&"object"===f()(e.options.originObject)&&!q()(e.options.originObject))e.selector_label=e.options.originObject.name.toString();else{var n=e.options.individual_name;e.selector_label=(null===(t=e.options.originObject)||void 0===t?void 0:t[n])||e.model.toString()}}var n,i,u,_,p,m;return Object(Pt.e)(this,(function(h){switch(h.label){case 0:return n=function(){var t;e.options.list&&(null===(t=e.options.list)||void 0===t||w()(t).call(t,(function(e){var t,n;e.id=null!==(t=e.id)&&void 0!==t?t:e.value,e.name=null!==(n=e.name)&&void 0!==n?n:e.label})))},e.client=window.client,e.language=c.getContext("auth").language,[4,r.setComponentDefault(e.model,"hc-super-selector",e.options)];case 1:return i=h.sent(),e.$apply((function(){l("isValidValue")(i)&&(e.model=i)})),e.filter_key=e.options.returnFormat||"id",n(),e.options.selectorAPI&&(e.options.selectorMapper?e.selectorMapper=e.options.selectorMapper:e.selectorMapper=function(t){var n={};return n[e.filter_key||"id"]=t,a.callHcmOpenApi(e.options.selectorAPI,{filter_str:null,filter_dict:angular.extend(angular.copy(l("valueToFunc")(e.options.selectorFilter)())||{},n),page_index:1,page_size:e.options.page_size||50,extra_property:l("valueToFunc")(e.options.extra_property)()},void 0,void 0,!1)},e.options.selector?e.selector=e.options.selector:e.selector=function(t,n,i){var o=angular.extend(l("valueToFunc")(e.options.selectorFilter)()||{});return a.callHcmOpenApi(e.options.selectorAPI,{filter_str:t,filter_dict:o,page_index:n||1,page_size:e.options.page_size||i||200,extra_property:l("valueToFunc")(e.options.extra_property)()},void 0,void 0,!e.options.cancelSelectorWaiting)}),e.options.selectorObject||e.options.selectorModel||e.options.object?(u=e.options.selectorObject||"hcm.model",_=(null===(s=e.options.selectorModel)||void 0===s?void 0:L()(s).call(s,"common_basic_"))||ae()(vl.a).call(vl.a,e.options.selectorModel),e.options.selectorMapper?e.selectorMapper=e.options.selectorMapper:(e.options.returnFormat&&"id"!==e.options.returnFormat?e.selectorMapper=function(t){var n={};return n[e.filter_key]=t,a.callHcmOpenApi(u+".list",{model:e.options.selectorModel||e.options.object,filter_str:null,filter_dict:angular.extend(angular.copy(l("valueToFunc")(e.options.selectorFilter)())||{},n),page_index:1,page_size:e.options.page_size||50,extra_property:l("valueToFunc")(e.options.extra_property)()},_?"session,1":void 0,void 0,!1)}:e.selectorMapper=function(t){return a.callHcmOpenApi(u+".get",{model:e.options.selectorModel||e.options.object,state:e.options.mapperState,id_:"object"===f()(t)?t.id:t},_?"session,1":void 0,void 0,!1)},e.options.multi&&(e.selectorMapper=function(t){var n={};return n[e.filter_key]=t,a.callHcmOpenApi(u+".list",{model:e.options.selectorModel||e.options.object,filter_str:null,filter_dict:angular.extend(angular.copy(l("valueToFunc")(e.options.selectorFilter)())||{},n),page_index:1,page_size:e.options.page_size||50,extra_property:l("valueToFunc")(e.options.extra_property)()},_?"session,1":void 0,void 0,!1)})),e.options.selector?e.selector=e.options.selector:e.selector=function(t,n,i){var o,r=angular.extend(l("valueToFunc")(e.options.selectorFilter)()||{},(null===(o=e.options.selectorModel)||void 0===o?void 0:L()(o).call(o,"common_basic_"))?{enable:!0}:{});return a.callHcmOpenApi(u+".list",{model:e.options.selectorModel||e.options.object,filter_str:t,filter_dict:r,page_index:n||1,page_size:e.options.page_size||i||200,extra_property:l("valueToFunc")(e.options.extra_property)()},void 0,void 0,!e.options.cancelSelectorWaiting)}):e.options.selectorAPI||(e.selectorMapper=e.options.selectorMapper,e.selector=e.options.selector),e.$watch("model",(function(t,i){var o,a,l,r;if(i&&ae()(o=[null,void 0]).call(o,t)&&(e.model=t,e.selector_label=null),ae()(a=[null,void 0]).call(a,t)||"string"==typeof t&&""===t)return e.options.hasAll&&(e.selector_label="全部"),e.options.originObject=null,void p();n(),e.options.multi?e.multiMapSelector(!(null===(l=e.options)||void 0===l?void 0:l.skipInitChange)||t!==i):e.mapSelector(!(null===(r=e.options)||void 0===r?void 0:r.skipInitChange)||t!==i)}),!0),e.$on("outside_panel_data",(function(t,n){e.model=n})),p=function(){e.panelOptions=Ni()(e.options),e.panelOptions.multi&&null===e.panelOptions.originObject&&(e.panelOptions.originObject=[]),e.panelOptions.selectorMapper=e.selectorMapper,e.panelOptions.selector=e.selector},m=!!(null===(d=e.options.selectorModel)||void 0===d?void 0:L()(d).call(d,"common_basic_tree_item_data")),e.onClick=function(t){if(null==t||t.stopPropagation(),!e.options||!l("valueToFunc")(e.options.readOnly)()){var n,i=m;i?(n=angular.extend({},hl)).title=e.options.selectorModel.split(".")[1]:(n=angular.extend({},gl.a),"pc"===window.client&&(e.options.panelStyles&&e.options.panelStyles.width&&(n.width=e.options.panelStyles.width),e.options.panelStyles&&e.options.panelStyles.height&&(n.height=e.options.panelStyles.height)));var a=$(t.target).parents("hc-super-selector").outerWidth();a="pc"!==window.client||i?null:Math.max(a,"zh_cn"===e.language?260:300);var r,c=Ni()(e.options);c.selectorMapper=e.selectorMapper,c.selector=e.selector,o.getDialog(n).anchor("pc"!==window.client||i?null:angular.element(t.target).closest("hc-super-selector")).size("pc"===window.client?"middle":(r=e.options.list,(e.options.inDrawer?"middle":e.options.panelSize?e.options.panelSize:r&&(null==r?void 0:r.length)<6?"bottom-dialog-50":"bottom-dialog-90")||"bottom-dialog-90")).slideInConfig("pc"!==window.client&&e.options.inDrawer?"right":null).styles({width:a}).title("pc"!==window.client||i?e.options.title||"请选择":null).show(angular.extend(c,{data:e.model})).then((function(t){if(e.clicked=!0,t)if(!0===e.options.multi){var n=[];w()(t).call(t,(function(t){n.push(t[e.filter_key])})),e.model=n.length?n:null,e.options.originObject=t}else e.options.originObject=t,null==e.options.returnFormat?e.model=t.id:"object"===e.options.returnFormat?e.model=t:e.model=t[e.options.returnFormat],i&&(e.selector_label=t.name)}))}},e.del=function(t){t&&t.stopPropagation(),e.selector_label=null,e.options.form_mode?e.model=null:e.model=void 0,e.options.originObject=null,e.options.change&&(e.options.multi?e.options.change(e,null,!0):e.options.change(e,null,null,!0))},e.fetch={getting:!1,waiting:!1},e.mapSelector=function(n){var i,o=function(i){var o,a,r,c,s;switch(i){case"object":e.selector_label=(null===(o=e.model)||void 0===o?void 0:o.name)||e.model,n&&(null===(r=(a=e.options).change)||void 0===r||r.call(a,e,e.model,e.clicked)),e.fetch.getting=!1;break;default:e.selectorMapper?(e.in_process=!0,e.selectorMapper(e.model).then((function(t){var o,a;if("id"!==i&&(t=(null===(o=t.list)||void 0===o?void 0:o[0])||{name:e.model}),t){if(!q()(e.options.originObject)&&(null===(a=e.options.originObject)||void 0===a?void 0:a.tree))if(e.options.full_path)e.selector_label=e.options.originObject.name.toString();else{var r=e.options.individual_name||"name_alias";e.selector_label=l("getJSON")(r,t)||t.name||t}else if(l("isValidValue")(e.model)){e.options.originObject=t;r=e.options.individual_name||"name_alias";e.selector_label=l("getJSON")(r,t)||t.name||t}"id"===i?n&&e.options.change&&e.options.change(e,t,e.clicked):n&&e.options.change&&e.options.change(e,e.model,t,e.clicked),void 0!==e.options.selectorParse&&e.options.selectorParse(t),"outside"===e.options.type&&p()}})).finally((function(){e.fetch.getting=!1,e.fetch.waiting&&(e.mapSelector(),e.fetch.waiting=!1)}))):(t(),n&&(null===(s=(c=e.options).change)||void 0===s||s.call(c,e,e.model,e.clicked)),e.fetch.getting=!1)}};if(e.fetch.getting)e.fetch.waiting=!0;else{if(e.fetch.getting=!0,e.options.query&&-1===e.model&&e.options.hasNull)return e.selector_label=l("translate")("common_super_selector_empty"),void(e.fetch.getting=!1);if(e.options.list){!function t(n,i){void 0===i&&(i=null),w()(n).call(n,(function(n){var o,a;(null===(o=n.list)||void 0===o?void 0:o.length)?t(n.list,n.name):"object"!==e.options.returnFormat?e.model===n[e.options.returnFormat||"id"]&&(e.selector_label=i?i+"+"+n.name:n.name,e.options.originObject=n):e.selector_label=null===(a=e.model)||void 0===a?void 0:a.name}))}(e.options.list),n&&e.options.change&&e.options.change(e,e.model,e.clicked),e.fetch.getting=!1}else e.options.returnFormat&&"id"!==e.options.returnFormat?"object"===e.options.returnFormat?o("object"):"name"===e.options.returnFormat?o("name"):o():o("id");"outside"!==e.options.type||ae()(i=["id","name"]).call(i,e.options.returnFormat)||p()}},e.multiMapSelector=function(n){var i,o,a,r=function(i){var o,a,r,s,d;switch(i){case"object":e.selector_label=(null===(o=e.model)||void 0===o?void 0:o.name)||e.model,n&&(null===(r=(a=e.options).change)||void 0===r||r.call(a,e,e.model,e.options.originObject,e.clicked)),e.fetch.getting=!1;break;default:e.selectorMapper?e.selectorMapper(e.model,e.options.originObject).then((function(t){var o,a,r,s,d;e.options.query&&e.options.hasNull&&(null===(r=e.model)||void 0===r?void 0:ae()(r).call(r,"id"===i?-1:"空"))&&t.list.push({id:-1,name:"空"}),e.options.originObject=t.list,n&&(null===(d=(s=e.options).change)||void 0===d||d.call(s,e,e.model,e.options.originObject,e.clicked)),t&&(w()(o=w()(a=q()(e.model)?e.model:[e.model]).call(a,(function(e){var n;return Fe()(n=t.list).call(n,(function(t){return t[i]===e}))}))).call(o,(function(t){var n=e.options.individual_name||"name_alias";c.push(l("getJSON")(n,t)||t.name)})),e.selector_label=c.toString(),void 0!==e.options.selectorParse&&e.options.selectorParse(t),"outside"===e.options.type&&p())})).finally((function(){e.fetch.getting=!1,e.fetch.waiting&&(e.multiMapSelector(n),e.fetch.waiting=!1)})):(t(),n&&(null===(d=(s=e.options).change)||void 0===d||d.call(s,e,e.model,e.options.originObject,e.clicked)),e.fetch.getting=!1)}};if(e.fetch.getting)e.fetch.waiting=!0;else{e.fetch.getting=!0;var c=[];if(e.options.list){e.options.originObject=[],n&&(null===(a=(o=e.options).change)||void 0===a||a.call(o,e,e.model,e.options.originObject,e.clicked)),e.selector_label=function t(n,i){var o;void 0===i&&(i=null);var a=[];return e.options.query&&e.options.hasNull&&!i&&(n=ie()(n).call(n,{id:-1,name:"空"})),g()(o=q()(e.model)?e.model:[e.model]).call(o,(function(o){g()(n).call(n,(function(n){var l;(null===(l=n.list)||void 0===l?void 0:l.length)?a=ie()(a).call(a,t(n.list,n.name)):o===n[e.options.returnFormat||"id"]&&(e.options.originObject.push(n),a.push(i?i+"+"+n.name:n.name))}))})),a}(e.options.list).toString(),e.fetch.getting=!1}else e.options.returnFormat&&"id"!==e.options.returnFormat?"object"===e.options.returnFormat?r("object"):"name"===e.options.returnFormat?r("name"):r():r("id");"outside"!==e.options.type||ae()(i=["id","name"]).call(i,e.options.returnFormat)||p()}},[2]}}))}))}]}}]);var bl=n("7rEP"),yl=n.n(bl);O.a.directive("hcSelect",[function(){return{restrict:"EA",template:yl.a,scope:{options:"=",label:"=",model:"=ngModel",key:"=",ngChange:"&"},controller:["$scope","dataService","$element","componentDefaultService","$filter","$hcDialog",function(){var e=p()(u.a.mark((function e(t,n,i,o,a,l){var r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){return t.options.inDrawer?"middle":e&&(null==e?void 0:e.length)<6?"bottom-dialog-50":"bottom-dialog-90"},t.show_list=!1,t.client=window.client,t.options&&t.options.list&&(t.options.list=w()(r=t.options.list).call(r,(function(e){var t,n;return e.id=null!==(t=e.id)&&void 0!==t?t:e.value,e.name=null!==(n=e.name)&&void 0!==n?n:e.label,e}))),t.options&&t.options.selectorModel&&n.callHcmOpenApi("hcm.model.list",{model:t.options.selectorModel,page_size:1e3,filter_dict:angular.isFunction(t.options.filter_dict)?t.options.filter_dict():t.options.filter_dict}).then((function(e){var n;t.options.list=w()(n=e.list).call(n,(function(e){return{value:e.id,label:e.name}}))})),e.next=7,o.setComponentDefault(t.model,"hc-select",t.options);case 7:c=e.sent,t.$apply((function(){a("isValidValue")(c)&&(t.model=c)})),t.$watch("model",(function(e,n){t.$emit("hcSelectChange",t.label,t.model,n,t.key),t.matchLabel(e),e!==n&&t.options.change&&t.options.change(t,t.model,n)})),t.$watch("options.list",(function(e,n){e&&w()(e).call(e,(function(e){var t,n;e.id=null!==(t=e.id)&&void 0!==t?t:e.value,e.name=null!==(n=e.name)&&void 0!==n?n:e.label})),e&&!t.selector_label&&t.matchLabel(t.model)}),!0),t.matchLabel=function(e){if(t.options&&t.options.list){var n,i=!t.options.originObject;if(ae()(n=[null,void 0]).call(n,e))t.selector_label="";else if(!0===t.options.multi){var o,a=[];t.options.originObject=t.options.originObject||[],null===(o=t.model)||void 0===o||w()(o).call(o,(function(e){var n;"object"===t.options.returnFormat?(a.push(e.label||e.name),i&&t.options.originObject.push(e)):null===(n=t.options.list)||void 0===n||w()(n).call(n,(function(n){var o,l;ae()(o=[null,void 0]).call(o,t.options.returnFormat)?(!ae()(l=[null,void 0]).call(l,n.value)&&n.value===e||n.id&&n.id===e)&&(a.push(n.label||n.name),i&&t.options.originObject.push(n)):n[t.options.returnFormat]===e&&(a.push(n.label||n.name),i&&t.options.originObject.push(n))}))})),t.selector_label=a.toString()}else{var l,r=Pe()(l=t.options.list).call(l,(function(e){return e[t.options.returnFormat||"id"]===t.model}))[0]||{};t.selector_label=r.name,i&&(t.options.originObject=r)}}},t.onClick=function(e){var n,i;if(!t.options||!a("valueToFunc")(t.options.readOnly)()){var o=$(e.target).parents("hc-select").outerWidth();o="pc"===window.client?o>260?o:260:null,l.getDialog(gl.a).anchor("pc"===window.client&&angular.element(e.target).closest("hc-select")).size("pc"===window.client?"middle":s(t.options.list)||"bottom-dialog-90").slideInConfig("pc"!==window.client&&t.options.inDrawer?"right":null).styles({width:o}).title("pc"===window.client?null:(null===(n=t.options)||void 0===n||null===(i=n.originObject)||void 0===i?void 0:i.label)||"请选择").show(angular.extend(t.options,{data:t.model})).then((function(e){if(t.clicked=!0,e)if(!0===t.options.multi){var n=[];w()(e).call(e,(function(e){var i,o;o=ae()(i=[null,void 0]).call(i,t.options.returnFormat)?e.value||e.id:"object"===t.options.returnFormat?e:e[t.options.returnFormat],n.push(o)})),t.model=n.length?n:null,t.options.originObject=e}else t.options.originObject=e,null==t.options.returnFormat?t.model=e.id||e.value:"object"===t.options.returnFormat?t.model=e:t.model=e[t.options.returnFormat]}))}},t.del=function(e){e&&e.stopPropagation(),t.selector_label=null,t.model=null,t.options.originObject=null};case 14:case"end":return e.stop()}}),e)})));return function(t,n,i,o,a,l){return e.apply(this,arguments)}}()]}}]),O.a.directive("hcSelectBasicItem",["$compile","basicItemService",function(e,t){return{restrict:"EA",template:"<hc-select-dialog ng-change='ngChange' class='hc-select component-input-inner' ng-model='model' options='options' ng-disabled='options.readOnly'><option value=''>{{options.placeholder||'--请选择--'}}</option></hc-select-dialog>",scope:{options:"=",label:"=",model:"=ngModel",ngChange:"&"},compile:function(e,n){return function(e){e.options=e.options||{},e.options.multiple=!1,e.options.value_field=e.options.value_field||"id",t.getItemList(e.options.cate_id).then((function(t){e.options.list=w()(t).call(t,(function(t){return{value:t[e.options.value_field].toString(),label:t.name}})),e.$broadcast("basic-item-option-change",e.options)}))}}}}]),O.a.directive("hcSelectorDepart",[function(){return{restrict:"EA",template:"<div class=\"component-container\" ng-init=\"init();hover=false\" ng-mouseover=\"hover=true\"   ng-mouseleave=\"hover=false\">\n                <div class='component-input-inner hc-selector' ng-bind='selector_label||(options.readOnly?\"\":options.placeholder)' ng-class='{placeholder:!model}' ng-disabled='(options.readOnly|valueToFunc)()' ng-click='onClick($event)' hc-title=\"{{selector_label}}\" options=\"{mode: 'tip', showOnOverflow: true}\"></div>\n                 <div ng-show=\"!(options.readOnly|valueToFunc)()\" ng-click=\"([null,undefined].includes(model)||options.no_delete)? onClick($event) : del($event)\" class=\"input-icon\"\n         ng-class=\"(![null,undefined].includes(model)&&(client==='mobile'||hover)&&!options.no_delete)?'icon-hcm-delete': options.icon?options.icon:client==='pc'?'icon-hcm-screening':'icon-hcm-arrow-right'\"></div>\n </div>",scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$rootScope","$q","$timeout","hcDialogSelector","selectorDataService","contextService","commonSelectorService","componentDefaultService","$filter",function(e,t,n,i,o,a,l,r,c,s){e.client=window.client,e.options.selectorModel="OrgDepartment",e.options.selector="new"===e.options.mode?r.getOrgTreePanel:o.orgSelector,e.options.selectorMapper=e.options.selectorMapper||a.getDepartmentJson,e.options.selectorOptions=e.options.selectorOptions||[{auto_select:!1},{role:e.options.role||"manager"},e.options.filters||null],"new"!==e.options.mode&&e.options.selectorOptions&&(e.options.role=(e.options.selectorOptions[1]||{}).role),!e.options.selectorParse&&(e.options.selectorParse=function(e){return e.id});var d=c.setComponentDefault(e.model,"hc-selector-depart",e.options);s("isValidValue")(d)&&(e.model=d),e.$watch("model",(function(t){var n;ae()(n=["",null,void 0]).call(n,t)?e.selector_label="":e.in_process||("object"===f()(t)?(e.selector_label="name"in t?t.name:t.content,e.in_process=!1):e.mapSelector())}));var u=$(".component-container .hc-selector");e.options&&e.options.widthSet&&u.css({width:e.options.widthSet}),s("valueToFunc")((e.options||{}).readOnly)()&&u.css({"padding-right":0}),e.onClick=function(t){var n;s("valueToFunc")((e.options||{}).readOnly)()||("new"===e.options.mode?e.options.selector(e.options).then((function(t){t&&(e.selector_label="name"in t?t.name:t,e.model=e.options.selectorParse?e.options.selectorParse(t):t,e.mapSelector())})):(e.options.selectorOptions=ie()(n=[]).call(n,e.options.selectorOptions||[]),e.options.selector.apply(this,e.options.selectorOptions).then((function(t){t&&(e.selector_label="name"in t?t.name:t,e.model=e.options.selectorParse?e.options.selectorParse(t):t,e.mapSelector())}))))},e.mapSelector=function(){if(e.in_process=!0,e.options.selectorMapper){var t="object"===f()(e.model)?e.model.id?e.model.id:e.model.value:e.model;e.options.selectorMapper(t,null,e.options.api).then((function(t){t&&(e.selector_label="name"in t?t.name:t,e.options.originObject=t,e.model=e.options.selectorParse?e.options.selectorParse(t):t,e.options.change&&e.options.change(e,e.model,t),i((function(){e.in_process=!1}),200))}))}else"object"===f()(e.model)?e.selector_label="name"in e.model?e.model.name:e.model:e.selector_label=e.model,e.options.change&&e.options.change(e,e.model,e.model),i((function(){e.in_process=!1}),200)},e.del=function(){e.model=null,e.selector_label=null,e.options.originObject=null,(e.options.selectorOptions[0]||{}).selected=null,e.options.change&&e.options.change(e,e.model,null)}}]}}]),O.a.directive("hcSelectorEmployee",["$compile","$filter",function(e,t){return{restrict:"EA",template:'<div class="component-container" ng-init="init()">\n                <div class=\'component-input-inner hc-selector\' ng-bind=\'selector_label||options.placeholder\' ng-class=\'{placeholder:!model}\' ng-disabled=\'options.readOnly\' ng-click=\'onClick($event)\' hc-title="{{selector_label}}" options="{mode: \'tip\', showOnOverflow: true}"></div>\n                <div class="icon-hcm-delete delete" ng-click="del()" ng-if="(model || selector_label) && !options.readOnly"></div>\n                <div ng-show="!(options.readOnly|valueToFunc)()" ng-click="onClick($event)" class="input-icon icon-hcm-screening"></div>\n                   </div>',scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$rootScope","$q","$timeout","selectorService","selectorDataService","contextService","componentDefaultService","$filter",function(e,t,n,i,o,a,l,r,c){/127.0.0.1:3000/.test(location.href)&&alert("请使用新的选择器hc-tree-list-selector，hc-selector-employee选择器即将去除"),e.auth=l.getContext("auth"),e.options.selector=o.selectEmployee,e.options.selectorMapper=a.getEmployeeJsonInfo,e.options.selectorOptions=[{auto_select:!1},{role:e.options.role||"manager"}],e.options.selectorParse=e.options.selectorParse||function(e){return e.id},e.$watch("model",(function(t){e.in_process||("object"===f()(t)?(e.selector_label="name"in t?t.name:t.content,e.in_process=!1):c("isValidValue")(e.model)&&e.mapSelector())}));var s=$(".component-container .hc-selector");e.options&&e.options.widthSet&&s.css({width:e.options.widthSet}),e.options&&c("valueToFunc")(e.options.readOnly)()&&s.css({"padding-right":0}),e.onClick=function(t){var n;e.options&&c("valueToFunc")(e.options.readOnly)()||(e.options.selectorOptions=ie()(n=[]).call(n,e.options.selectorOptions||[]),e.options.selector.apply(this,e.options.selectorOptions).then((function(t){t&&(e.selector_label="name"in t?t.name:t,e.model=e.options.selectorParse?e.options.selectorParse(t):t,e.mapSelector())})))},e.mapSelector=function(){if(e.in_process=!0,e.options.selectorMapper){var t="object"===f()(e.model)?e.model.id?e.model.id:e.model.value:e.model;e.options.selectorMapper(t).then((function(t){t&&(e.selector_label="name"in t?t.name:t,e.options.originObject=t,e.model=e.options.selectorParse?e.options.selectorParse(t):t,e.options.change&&e.options.change(e,e.model,t),i((function(){e.in_process=!1}),200))}))}else"object"===f()(e.model)?e.selector_label="name"in e.model?e.model.name:e.model:e.selector_label=e.model,e.options.change&&e.options.change(e,e.model,e.model),i((function(){e.in_process=!1}),200)},e.del=function(){e.model=null,e.selector_label=null,e.options.change&&e.options.change(e,e.model)}}]}}]);n("RwJX");O.a.controller("TreeSelectorPanelController",["$hcSimpleTree","contextService","$scope",function(e,t,n){n.init=function(){n.tree_model=e.createTree(n.params.selector,{rootNodeName:n.params.rootNodeName}),n.tree_model.$setDblClick((function(e){n.tree_model.selectedNode=e,n.submit()})),n.tree_model.$initTree(),n.$dialog.operates([{label:"返回",func:n.close,default:!1},{label:"确定",func:n.submit,default:!0}])},n.$watch("tree_model.selectedNode",(function(e){e?n.params.condition?n.$dialog.options.operates[1].disabled=!n.params.condition(e):n.$dialog.options.operates[1].disabled=!1:n.$dialog.options.operates[1].disabled=!0})),n.submit=function(){n.$dialog.resolve_data(n.tree_model.selectedNode),n.$dialog.dialog_close()},n.close=function(){n.$dialog.dialog_close()}}]);var wl={controller:"TreeSelectorPanelController",template:n("mu9B"),title:"请选择",size:"middle"},xl=n("pBBD"),kl=n.n(xl);O.a.service("HCTreeSelectorService",["$q","$http","dataService",function(e,t,n){this.commonModelSelector=function(e,t,i){return{selectorMapper:function(t){return n.callHcmOpenApi("hcm.model.get",{model:e,id_:t})},selector:function(i){return n.callHcmOpenApi("hcm.model.list",{model:e,filter_str:null,filter_dict:te()({parent_id:i?i.id:null},t||{}),page_size:1e3}).then((function(e){return e.list}))},condition:i||function(e){return e.is_leaf}}},this.JobSelector=function(e,t){return{selectorMapper:function(e){return n.callHcmOpenApi("org.job.get",{id_:e})},selector:function(t){return t&&t.is_category_leaf?n.callHcmOpenApi("org.job.list",{filter_dict:te()({job_type_id:t.id,enabled:!0},e||{})}).then((function(e){var t;return g()(t=e.list).call(t,(function(e){e.is_leaf=!0})),e.list})):n.callHcmOpenApi("org.job.type.list",{filter_dict:te()({parent_id:t?t.id:null,enabled:!0},e||{})}).then((function(e){var t;return g()(t=e.list).call(t,(function(e){e.is_category_leaf=e.is_leaf,e.is_leaf=!1})),e.list}))},condition:t||function(e){return e.is_leaf}}},this.OrgPositionSelector=function(e,t){return{selectorMapper:function(e){return n.callHcmOpenApi("org.position.get",{id_:e})},selector:function(e){return e?n.callHcmOpenApi("department.get.sub.org",{dept_id:e.id}).then((function(e){return g()(e).call(e,(function(e){e.is_leaf=40===e.org_type})),e})):n.callHcmOpenApi("dept.my.list",{role:"cm-org-emp"})},condition:t||function(e){return e.is_leaf}}}}]);n("3bqz");O.a.directive("hcTreeSelector",["$compile",function(e){return{restrict:"EA",template:kl.a,scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$rootScope","$q","$timeout","$hcDialog","dataService","HCTreeSelectorService","$filter",function(e,t,n,i,o,a,l,r){if(e.options.selectorObject&&(e.options.selectorMapper=function(t){return a.callHcmOpenApi(e.options.selectorObject+".get",{id_:t},"session,1",!1,!1)},e.options.selector=function(t){var n=null;return n="function"==typeof e.options.selectorFilter?e.options.selectorFilter():e.options.selectorFilter,n=te()(n||{},{parent_id:t?t.id:null}),a.callHcmOpenApi(e.options.selectorObject+".list",{filter_dict:n}).then((function(e){return e.list}))}),e.options.selectorModel){var c,s=null;s="function"==typeof e.options.selectorFilter?e.options.selectorFilter():e.options.selectorFilter,c=e.options.selectorModel+"Selector"in l?l[e.options.selectorModel+"Selector"](s,e.options.condition):l.commonModelSelector(e.options.selectorModel,s,e.options.condition),e.options.selectorMapper=c.selectorMapper,e.options.selector=c.selector,e.options.condition=c.condition}e.$watch("model",(function(t){!t||"string"==typeof t&&""===t||e.in_process||e.mapSelector()})),e.onClick=function(t){var n;e.options&&r("valueToFunc")(e.options.readOnly)()||e.options.selector&&o.getDialog(wl).slideInConfig("pc"!==window.client&&(null===(n=e.options)||void 0===n?void 0:n.inDrawer)?"right":null).show({selector:e.options.selector,condition:e.options.condition,rootNodeName:e.options.rootNodeName}).then((function(t){e.model="object"===e.options.returnFormat?t:t.id}))},e.mapSelector=function(){if(e.in_process=!0,e.options.query&&-1===e.model)return e.selector_label="空",void(e.in_process=!1);!e.options.selectorMapper||"object"===e.options.returnFormat&&"object"===f()(e.model)?(e.selector_label="name"in e.model?e.model.name:e.model,e.options.change&&e.options.change(e.model),i((function(){e.in_process=!1}),200)):e.options.selectorMapper(e.model).then((function(t){i((function(){e.in_process=!1}),200),e.options.originObject=t,e.options.change&&e.options.change(t),t&&(e.selector_label="name"in t?t.name:t,void 0!==e.options.selectorParse&&e.options.selectorParse(t))}))},e.del=function(t){t&&t.stopPropagation(),e.model=null,e.selector_label=null,e.options.change&&e.options.change(e,e.model)}}]}}]);var $l=n("sWfg"),Ol=n.n($l),Dl=(n("4l/g"),n("ZVgi")),Cl=n.n(Dl);O.a.controller("HCSelectDialogWindowCtrl",["$scope",function(e){e.selected=e.params.selected?e.params.selected.toString().split(","):[],e.item_list=e.params.item_list,e.field_label=e.params.field_label||"label",e.field_key=e.params.field_key||"value",e.seach={},e.seach[e.field_label]="",e.select=function(t){if(e.params.multiple){var n,i,o=s()(n=e.selected).call(n,t[e.field_key].toString());if(o<0)e.selected.push(t[e.field_key].toString());else b()(i=e.selected).call(i,o,1)}else e.$dialog.resolve_data(t),e.$dialog.dialog_close()},e.$dialog.operates([{label:"取消",func:function(){e.$dialog.dialog_close()},default:!1},{label:"确定",hide:!e.params.multiple,func:function(){var t;e.$dialog.resolve_data(Pe()(t=e.item_list).call(t,(function(t){var n;return ae()(n=e.selected).call(n,t[e.field_key].toString())}))),e.$dialog.dialog_close()},default:!0}])}]);var Ml={controller:"HCSelectDialogWindowCtrl",template:Cl.a,title:"请选择"};O.a.directive("hcSelectDialog",[function(){return{restrict:"EA",template:Ol.a,scope:{options:"=",model:"=ngModel"},controller:["$scope","$filter","dataService","$hcDialog",function(e,t,n,i){var o,a,l,r,c,s;(e.item_list=e.options.list,e.is_multi=null===(o=e.options)||void 0===o?void 0:o.multiple,e.model_type=(null===(a=e.options)||void 0===a?void 0:a.modelType)||"string",e.field_key=(null===(l=e.options)||void 0===l?void 0:l.selectorKey)||"value",e.field_label=(null===(r=e.options)||void 0===r?void 0:r.selectorLabel)||"label",null===(c=e.options)||void 0===c?void 0:c.selectorModel)&&n.callHcmOpenApi("hcm.model.list",{model:e.options.selectorModel,filter_dict:t("valueToFunc")(null===(s=e.options)||void 0===s?void 0:s.selectorFilter)(),page_size:1e3}).then((function(t){e.item_list=t.list}));e.$on("basic-item-option-change",(function(t,n){n.list&&(e.item_list=n.list)})),e.select=function(){e.options&&e.options.readOnly||e.item_list&&(e.item_list=e.item_list.length?e.item_list:e.options.list,i.getDialog(Ml).params({item_list:e.item_list,field_key:e.field_key,field_label:e.field_label,selected:"string"===e.model_type&&e.model?e.model.split(","):e.model,multiple:!!e.is_multi}).size("middle").show().then((function(t){var n,i;e.is_multi?"string"===e.model_type?e.model=w()(t).call(t,(function(t){return t[e.field_key]})).join():e.model=w()(t).call(t,(function(t){return t[e.field_key]})):e.model=t[e.field_key],null===(n=e.options)||void 0===n||null===(i=n.onChange)||void 0===i||i.call(n,e.model,t)})))}}]}}]),O.a.directive("hcSelectMulti",["$compile","$rootScope","$filter",function(e,t,i){return{restrict:"EA",template:n("S5z/"),scope:{label:"=",options:"=",model:"=ngModel"},compile:function(e){return function(e){e.isMulti=e.options.isMulti||!1,e.type=e.options.type||"lable",e.options.readOnly=i("valueToFunc")(e.options.readOnly)(),e.model=e.isMulti?e.model||[]:e.model,e.selectItem=function(t){var n,i;if(!e.options.readOnly){var o;if(e.isMulti)if(s()(o=e.model).call(o,e.options.list[t].id)>-1){var a,l;b()(a=e.model).call(a,s()(l=e.model).call(l,e.options.list[t].id),1)}else{if(e.options.maxLength&&e.model.length>=e.options.maxLength)return;e.model.push(e.options.list[t].id)}else s()(n=ie()(i=[]).call(i,e.model)).call(n,e.options.list[t].id)<0&&(e.model=e.options.list[t].id);e.$emit("hcSelectMultiChange",e.label,e.model)}},e.viewEmpInfo=function(n,i){n.stopPropagation(),e.options.readOnly||"pc"===window.client&&t.super_go("emp",{id:i},null,!0)}}}}}]),O.a.directive("hcSelectPerson",["$compile","$rootScope","$hcDialog",function(e,t,i){return{restrict:"EA",template:n("qfGi"),scope:{label:"=",options:"=",model:"=ngModel"},compile:function(){return{post:function(e){e.type=e.options.type||"emp",e.model=String(e.model)||"",e.changeColor=function(t,n){e.color_yes||e.color_no||e.options.readOnly||("yes"===n?(e.show_yes=!0,e.show_no=!1):"no"===n&&(e.show_yes=!1,e.show_no=!0))},e.clearColor=function(){e.options.readOnly||((e.show_yes||e.show_no)&&(e.show_no=!1,e.show_yes=!1),e.color_yes||e.color_no||(e.model=null))},e.selectItem=function(t,n){e.options.readOnly||("yes"===n?(e.model="1",e.color_yes=!0,e.color_no=!1):"no"===n&&(e.model="0",e.color_yes=!1,e.color_no=!0),e.$emit("hcSelectPersonChange",e.label,e.model))},"1"===e.model?(e.color_yes=!0,e.color_no=!1):"0"===e.model&&(e.color_yes=!1,e.color_no=!0),e.viewEmpInfo=function(n,i){n.stopPropagation(),e.options.readOnly||"pc"===window.client&&t.super_go("emp",{id:i},null,!0)}}}}}}]);var Sl=n("xlHU"),El=n.n(Sl);O.a.directive("hcStar",["$filter",function(e){return{restrict:"EA",template:'<ul class="hc-star-rating" ng-model="model" ng-disabled="(options.readOnly|valueToFunc)()"><li ng-repeat="star in stars" ng-class="{filled:accMul($index+1,stepScore)<=accSub(model,min)}" ng-click="click($index + 1)" class="icon icon-hcm-evaluation-solid"></li> <span class="score" ng-show="{{options.showScore}}">{{model}}</span> </ul>',scope:{options:"=",model:"=ngModel"},compile:function(){return function(t){var n;t.$watch("model",(function(e,n){e!==n&&t.options.change&&t.options.change(t,t.model)})),t.max=t.options.max||5,t.min=t.options.min||0,t.step=t.options.step||5,t.precision=t.options.precision||2,t.stars=so()(El()(n=Array(t.step)).call(n)),t.accMul=i.a,t.accSub=i.b,t.stepScore=((t.max-t.min)/t.step).toFixed(t.precision),t.click=function(n){e("valueToFunc")(t.options.readOnly)()||(t.model=t.min+Object(i.a)(n,t.stepScore))}}}}}]),O.a.directive("hcStarView",["$rootScope","$injector","$compile",function(e,t,n){return{restrict:"AE",scope:{score:"="},template:'<ul class="hc-star-rating"><li ng-repeat="star in stars track by $index" ng-class="{filled:star<score}">★</li></ul>',link:function(e,t){e.stars=[0,1,2,3,4]}}}]);var Pl=n("IvGF"),jl=n.n(Pl);O.a.directive("hcTextArea",["componentDefaultService","$filter",function(e,t){return{restrict:"EA",template:jl.a,scope:{options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope","$element","$rootScope","$timeout",function(){var n=p()(u.a.mark((function n(i,o,a,l){var r,c,s,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.id=(new Date).getTime().toString(),i.client=window.client,i.options=i.options||{},i.operate_list=i.options.operate_list||[],i.options.bordered=i.options.bordered||!1,i.options.showCount&&i.options.maxlength&&(o.addClass("show-count"),o.attr("data-count",ie()(r="".concat(null!==(c=null===(s=i.model)||void 0===s?void 0:s.length)&&void 0!==c?c:0,"/")).call(r,i.options.maxlength))),n.next=8,e.setComponentDefault(i.model,"hc-text-area",i.options);case 8:d=n.sent,i.$apply((function(){t("isValidValue")(d)&&(i.model=d)})),i.customBlur=function(){if(i.model&&i.options.xss_protect){var e=t("securityFilter")(i.model);null==e&&a.show_warning("非法脚本注入，请重新输入","warning"),i.model=t("xss_filter")(e)}i.checkIos&&window.scroll(0,0)},i.customFocus=function(){i.options.customFocus&&i.options.customFocus(i,i.model)},i.checkIos=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},i.change=function(){angular.isString(i.model)&&(i.model=i.model.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"")),i.options.change&&i.options.change(i,i.model)},i.fetchEditText=function(){var e=window.document.getElementById(i.id);return{value:e.value,start:e.selectionStart,end:e.selectionEnd}},i.changeStr=function(e,t,n,i){return e.substring(Number(t),Number(n)).length||t===n?e.substring(0,Number(t))+i+e.substring(Number(n),e.length):e+i},i.setOp=function(e){var n=i.fetchEditText();e.getInsertValue?i.model=t("valueToFunc")(e.getInsertValue)():i.model=i.changeStr(n.value,n.start,n.end," ".concat(e.key," ")),angular.isNumber(e.cursorOffset)&&(Fe()(o).call(o,"#".concat(i.id)).focus(),!e.getInsertValue&&l((function(){Fe()(o).call(o,"#".concat(i.id))[0].selectionEnd=n.start+" ".concat(e.key," ").length+(e.cursorOffset||0)-1}),0))},i.options.showCount&&i.options.maxlength&&i.$watch("model",(function(e,t){var n,a,l;e!==t&&o.attr("data-count",ie()(n="".concat(null!==(a=null===(l=i.model)||void 0===l?void 0:l.length)&&void 0!==a?a:0,"/")).call(n,i.options.maxlength))}));case 18:case"end":return n.stop()}}),n)})));return function(e,t,i,o){return n.apply(this,arguments)}}()]}}]),O.a.directive("msdElastic",["$timeout","$window",function(e,t){return{require:"ngModel",restrict:"A, C",link:function(n,i,o,l){var r,c,s,d,u=i[0],_=i;if("TEXTAREA"===u.nodeName&&t.getComputedStyle){_.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"}),(null===(r=n.options)||void 0===r?void 0:r.maxHeight)&&_.css({"max-height":null===(c=n.options)||void 0===c?void 0:c.maxHeight}),(null===(s=n.options)||void 0===s?void 0:s.rows)&&_.attr("rows",null===(d=n.options)||void 0===d?void 0:d.rows);var p=u.value;u.value="",u.value=p;var m,f,h=o.msdElastic?o.msdElastic.replace(/\\n/g,"\n"):"",v=angular.element(t),b="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",y=$('<textarea aria-hidden="true" tabindex="-1" style="'+b+'"/>').data("elastic",!0),w=y[0],x=getComputedStyle(u),k=x.getPropertyValue("resize"),O="border-box"===x.getPropertyValue("box-sizing")||"border-box"===x.getPropertyValue("-moz-box-sizing")||"border-box"===x.getPropertyValue("-webkit-box-sizing")?{width:M()(x.getPropertyValue("border-right-width"),10)+M()(x.getPropertyValue("padding-right"),10)+M()(x.getPropertyValue("padding-left"),10)+M()(x.getPropertyValue("border-left-width"),10),height:M()(x.getPropertyValue("border-top-width"),10)+M()(x.getPropertyValue("padding-top"),10)+M()(x.getPropertyValue("padding-bottom"),10)+M()(x.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},D=M()(x.getPropertyValue("min-height"),10)||20,C=M()(x.getPropertyValue("height"),10)||38,S=Math.max(D,C)-O.height,E=M()(x.getPropertyValue("max-height"),10),P=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];_.data("elastic")||(E=E&&E>0?E:9e4,w.parentNode!==document.body&&$(document.body).append(w),_.css({resize:"none"===k||"vertical"===k?"none":"horizontal"}).data("elastic",!0),u.oninput="onpropertychange"in u&&"oninput"in u?u.onkeyup=T:T,a()(v).call(v,"resize",A),n.$watch((function(){return l.$modelValue}),(function(){e(A,0,!1)})),n.$on("elastic:adjust",(function(){j(),A()})),e(T,0,!1),n.$on("$destroy",(function(){y.remove(),v.unbind("resize",A)})))}function j(){var e=b;m=u,x=getComputedStyle(u),g()(angular).call(angular,P,(function(t){e+=t+":"+x.getPropertyValue(t)+";"})),w.setAttribute("style",e)}function T(){var t,i,o,a,l;m!==u&&j(),f||(f=!0,w.value=u.value+h,w.style.overflowY=u.style.overflowY,t=""===u.style.height?"auto":M()(u.style.height,10),"px"===(i=getComputedStyle(u).getPropertyValue("width")).substr(i.length-2,2)&&(a=M()(i,10)-O.width,w.style.width=a+"px"),(o=w.scrollHeight)>E?(o=E,l="scroll"):o<S&&(o=S),o+=O.height,u.style.overflowY=l||"hidden",t!==o&&(n.$emit("elastic:resize",_,t,o),u.style.height=o+"px"),e((function(){f=!1}),1,!1))}function A(){f=!1,T()}}}}]),O.a.directive("hcDataGrid",(function(){return{restrict:"E",scope:{model:"="},template:n("WThP"),controller:["$scope","$rootScope","$element","$timeout","$interval",function(e,t,n,i,o){/127.0.0.1:3000/.test(location.href)&&alert("请使用新的选择器hc-list，hc-data-grid即将去除");var l=".table-content-div .scroll";e.$watch("model.version",(function(t,n){t&&n&&t!==n&&(console.log("刷新表格部分"),e.setOuterOperate(),e.init(),e.model.$initScroll("all"))}),!0),e.componentConstruct=function(){e.searchTemplate="<hc-form-component\n                                key='{{ _col.key }}'\n                                label='{{_col.label}}'\n                                options='_col.search'\n                                ng-model='model.search_key[_col.key]'\n                                component='{{ _col.search.component||_col.component}}'\n                                placeholder=' '\n                                ng-disabled='_col.search.readOnly'\n                        ></hc-form-component>",e.contentTemplate="<hc-form-component\n                                           row='{{$parent.$parent.$index}}'\n                                           label='{{_col.label}}'\n                                           key='{{_col.key}}'\n                                           options='_col.options'\n                                           ng-model='_row[_col.key]'\n                                           component='{{ _col.component}}'\n                                           placeholder=' '\n                                           ng-disabled='_col.options.disabled'\n                                           attrs='field.attrs'\n                        ></hc-form-component>",e.fixRowContentTemplate="<hc-form-component\n                                           row='{{$parent.$parent.$index}}'\n                                           label='{{model.cellColumns[$parent.$parent.$index][$index].label}}'\n                                           key='{{model.cellColumns[$parent.$parent.$index][$index].key}}'\n                                           options='model.cellColumns[$parent.$parent.$index][$index].options'\n                                           ng-model='_row[model.cellColumns[$parent.$parent.$index][$index].key]'\n                                           component='{{model.cellColumns[$parent.$parent.$index][$index].component}}'\n                                           placeholder=' '\n                                           ng-disabled='model.cellColumns[$parent.$parent.$index][$index].options.disabled'\n                                           attrs='field.attrs'\n                        ></hc-form-component>",e.rowContentTemplate="<hc-form-component\n                                           row='{{$parent.$parent.$index}}'\n                                           label='{{model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].label}}'\n                                           key='{{model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].key}}'\n                                           options='model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].options'\n                                           ng-model='_row[model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].key]'\n                                           component='{{model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].component}}'\n                                           placeholder=' '\n                                           ng-disabled='model.cellColumns[$parent.$parent.$index][$index+model.options.fixedLeft].options.disabled'\n                                           attrs='field.attrs'\n                        ></hc-form-component>"},e.init=function(){e.componentConstruct();var t=e.limit=50;i((function(){var i,o,r;Fe()(i=$(n[0])).call(i,l).niceScroll({cursorcolor:"#999",cursorwidth:"10px",railoffset:!0,enablescrollonselection:!1}),a()(o=Fe()(r=$(n[0])).call(r,l)).call(o,"scroll",(function(i){var o,a;i.currentTarget.scrollTop/30>=t-40&&(t+=20,e.limit<e.model.data.length&&e.load(t)),Fe()(o=$(n[0])).call(o,".table-head-div .scroll").scrollLeft(i.currentTarget.scrollLeft),Fe()(a=$(n[0])).call(a,".table-content-div .fix").scrollTop(i.currentTarget.scrollTop)})),e.setOuterOperate(),e.model.options.colResizable&&e.initColResize(),e.model.$initWidth(),e.model.$setStyle()}))},e.load=function(t){var i;e.limit=t,e.$digest(),Fe()(i=$(n[0])).call(i,l).getNiceScroll().resize()},e.fillFullScreen=function(t){var i,o,a=angular.copy(t),l=Fe()(i=$(n[0])).call(i,".table-layout").width(),r=e.getTableWidth(a),c=[];return r<l&&(c=b()(a).call(a,0,e.basicColumnLength),o=Yn()(c).call(c,(function(e,t){return e+t})),l-=o,r-=o,a=w()(a).call(a,(function(e){return Math.floor(e/r*l)}))),ie()(c).call(c,a)},e.setOuterOperate=function(){e.model.$initWidth=function(){var t,o=[];e.basicColumnLength=0,e.model.options.showSelectColumn&&o.push(40)&&e.basicColumnLength++,e.model.options.showIndexColumn&&o.push(60)&&e.basicColumnLength++,e.fixColumnLength=e.basicColumnLength+e.model.options.fixedLeft,w()(t=e.model.columns).call(t,(function(t){t.options.width=/col/.test(t.options.width)?"300":t.options.width,o.push(JSON.parse(t.options.width||e.model.options.minWidth))})),o=e.fillFullScreen(o),e.model.columnWidth=o,i((function(){var t,i;w()(t=e.model.columnWidth).call(t,(function(e,t){var i;Fe()(i=$(n[0])).call(i,"table").each((function(){var n;Fe()(n=$(this)).call(n,"th").eq(t).css("width",e)}))})),e.setTableWidth(),Fe()(i=$(n[0])).call(i,".hc-data-grid").css({opacity:1,"pointer-events":"inherit"})}))},e.model.$setStyle=function(){var t,n="<style>";w()(t=e.model.columns).call(t,(function(t,i){(t.options.color||t.options.align)&&(n+=".hc-data-grid"+(e.model.options.title?"name= $scope.model.options.title + ":"")+" tr td:nth-child("+(i+e.basicColumnLength+1)+"){",t.options.color&&(n+="color:"+t.options.color+";cursor: pointer;"),t.options.align&&(n+="text-align:"+t.options.align+"!important;"),n+="}")})),n+="</style>",e.styleTemplate=n},e.model.$refreshScroll=function(){var e=we()((function(){var t;Fe()(t=$(n[0])).call(t,l).getNiceScroll().resize(),clearTimeout(e)}),500)},e.$on("gridScrollFresh",(function(){e.model.$refreshScroll()})),e.model.$initScroll=function(e){var t,i=Fe()(t=$(n[0])).call(t,l).getNiceScroll(0);i&&(i.doScrollTop(0,10),"all"===e&&i.doScrollLeft(0,10))}},e.initColResize=function(){var t,n,i,l,r=!1;e.resizeMouseDown=function(o,l){var c,s,d;o.stopPropagation(),i=l,r=!0,t=o.clientX,n=$(o.target).parent().width(),a()(c=$("body")).call(c,"mousemove",(function(t){e.mouseMoveEvent(t)})),a()(s=$(document)).call(s,"selectstart",(function(){return!1})),a()(d=$("body")).call(d,"mouseup mouseleave",(function(t){t.stopPropagation(),r=!1,e.model.$refreshScroll(),$("body").unbind("mousemove mouseup mouseleave"),$(document).unbind("selectstart")}))},e.mouseMoveEvent=function(a){var c;(a.stopPropagation(),r)&&(a.clientX>t&&a.clientX+20>=$("body").width()?(c=n+a.clientX-t,l&&0===l.$$state.status||(l=o((function(){r?(c+=40,e.resizeColumnWidth(i,c)):o.cancel(l)}),500))):(o.cancel(l),c=n+a.clientX-t,e.resizeColumnWidth(i,c)))}},e.getTableWidth=function(e,t){return Yn()(e).call(e,(function(e,n,i){return t&&i>=t?e+0:e+n}))},e.setTableWidth=function(){var t,i;e.fixTableWidth=e.getTableWidth(e.model.columnWidth,e.fixColumnLength),e.scrollTableWidth=e.getTableWidth(e.model.columnWidth),Fe()(t=$(n[0])).call(t,".table-layout .fix table").css("width",e.fixTableWidth),Fe()(i=$(n[0])).call(i,".table-layout .scroll table").css("width",e.scrollTableWidth)},e.resizeColumnWidth=function(t,i){var o;i>=20&&(e.model.columnWidth[t]=i,Fe()(o=$(n[0])).call(o,"table").each((function(){var e;Fe()(e=$(this)).call(e,"th").eq(t).css("width",i)})),e.setTableWidth())},e.newRow=function(){e.model.$newRow()},e.delRow=function(){e.model.$delRow()},e.clearSelectRow=function(){e.model.$clearSelectRow()},e.selectAllRows=function(){e.model.all_row_select=1===e.model.all_row_select?0:1;for(var t=0;t<e.model.row_status.length;t++)1!==e.model.rowAllowSelect[t]&&(e.model.row_status[t]=e.model.all_row_select)},e.onPagingClick=function(t){switch(t){case"first":e.model.paging.current_page>1&&(e.model.paging.current_page=1,e.onPagingChange());break;case"previous":e.model.paging.current_page>1&&(e.model.paging.current_page=e.model.paging.current_page-1,e.onPagingChange());break;case"next":e.model.paging.current_page<e.model.paging.total_page&&(e.model.paging.current_page=e.model.paging.current_page+1,e.onPagingChange());break;case"last":e.model.paging.current_page<e.model.paging.total_page&&(e.model.paging.current_page=e.model.paging.total_page,e.onPagingChange())}},e.onPageAmountChange=function(){e.model.paging.page_size=M()(e.model.paging.current_page_size),e.model.paging.current_page=1,e.onPagingChange()},e.onPagingChange=function(){e.model.$initScroll("y"),e.model.paging.hasOwnProperty("onPagingChange")&&e.model.paging.onPagingChange(e.model.paging.current_page,e.model.paging.page_size)},e.setSortingCol=function(t,n,i){t.stopPropagation();var o=["asc","desc",""];i?n.sorting=i:n.sorting?n.sorting=o[s()(o).call(o,n.sorting)+1]:n.sorting=o[0],e.model.options.sortingCallback&&e.model.options.sortingCallback(n.key,n.sorting)},e.onRowClick=function(t,n){if(1===e.model.edit_status[n])return!1;e.model.options.clickSelection?e.model.row_status[n]=0===e.model.row_status[n]?1:0:e.model.options.onRowClick&&e.model.options.onRowClick(t,n)},e.selectRow=function(t,n){t.stopPropagation(),1!==e.model.rowAllowSelect[n]&&(e.model.row_status[n]=0===e.model.row_status[n]?1:0)},e.onCellClick=function(t,n,i,o){i.options.onClick&&(t.stopPropagation(),i.options.onClick(n,i,o,e))},e.mouseEnter=function(t,n){if(e.model.options.mouseEnter)e.model.options.mouseEnter(t,n);else{for(var i,o,a=Fe()(i=$(".hc-data-grid .table-layout .table-content-div .scroll table tbody")).call(i,"tr"),l=Fe()(o=$(".hc-data-grid .table-layout .table-content-div .fix table tbody")).call(o,"tr"),r=0;r<a.length;r++)a.eq(r).removeClass("tr-hover"),l.eq(r).removeClass("tr-hover");a.eq(n+1).attr("class","tr-hover"),l.eq(n+1).attr("class","tr-hover")}},e.mouseLeave=function(t,n){if(e.model.options.mouseLeave)e.model.options.mouseLeave(t,n);else{var i,o,a=Fe()(i=$(".hc-data-grid .table-layout .table-content-div .scroll table tbody")).call(i,"tr"),l=Fe()(o=$(".hc-data-grid .table-layout .table-content-div .fix table tbody")).call(o,"tr");a.eq(n+1).removeClass("tr-hover"),l.eq(n+1).removeClass("tr-hover")}}}]}})),O.a.factory("$hcDataGrid",["$timeout","$filter","$q","attachService",function(e,t,n,i){return{createDataGrid:function(){return{data:[],options:{},columns:[],cellColumns:[],valid_rules:[],validDuplicationColumns:[],row_status:[],ban_status:[],edit_status:[],all_row_select:0,rowAllowSelect:[],paging:{current_page:1},search_key:{},$setOptions:function(e){return this.version=e.version||"refresh"+(new Date).getTime(),this.options={title:e.title,type:e.type||"view",minWidth:e.minWidth||100,fixedLeft:e.fixedLeft&&JSON.parse(e.fixedLeft)||0,allowSelect:!(!e.showSelectColumn||!e.allowSelect),required:e.required,tip:e.tip,sortable:e.sortable,sortingCallback:e.sortingCallback,colResizable:e.colResizable,gridType:e.gridType,showMenuBar:e.showMenuBar,showPaging:e.showPaging,showSearchBar:e.showSearchBar,showSelectColumn:e.showSelectColumn,showIndexColumn:e.showIndexColumn,onRowClick:e.onRowClick,outerOperate:e.outerOperate,validRowRepeatColumns:e.validRowRepeatColumns,clickSelection:e.clickSelection,mouseEnter:e.mouseEnter,mouseLeave:e.mouseLeave},this},$setMeta:function(t){this.version="refresh"+(new Date).getTime();var n=this;return n.columns=n.fixColumns=n.scrollColumns=null,e((function(){var e,i;n.columns=t;for(var o=n.columns.length-1;o>=0;o--){var a;if(n.columns[o].options=n.columns[o].options||{},n.columns[o].options.hide)b()(a=n.columns).call(a,o,1),o<n.options.fixedLeft&&n.options.fixedLeft--}n.fixColumns=r()(e=n.columns).call(e,0,n.options.fixedLeft),n.scrollColumns=r()(i=n.columns).call(i,n.options.fixedLeft,n.columns.length)})),n},$getData:function(){return this.data},$setFileData:function(e,t){var i=n.defer(),o=this;return o.data=[],o.$initStatus(t,e.length),this.$batchGetAnnex(e).then((function(){return o.data=e,o.$initScroll&&o.$initScroll(),o.$refreshScroll&&o.$refreshScroll(),i.resolve(o)})),i.promise},$setData:function(e,t){return this.data=[],this.$initStatus(t,e.length),this.data=e,this.$initScroll&&this.$initScroll(),this.$refreshScroll&&this.$refreshScroll(),this},$changeData:function(e,t,n){var i,o,a=this;return e=ie()(i=[]).call(i,e),t=ie()(o=[]).call(o,t),w()(t).call(t,(function(e){a.data[e]={}})),a.$changeStatus("edit_status","view"===n?0:1,t),w()(t).call(t,(function(t,n){a.data[t]=e[n]})),this},$initStatus:function(e,t){e=e||this.options.type,this.all_row_select=0,this.row_status=[],this.edit_status=[];for(var n=0;n<t;n++)this.row_status[n]=0,this.edit_status[n]="view"!==e?1:0;return this},$addStatus:function(e,t){e=e||this.options.type;for(var n=0;n<t;n++)this.row_status.push(0),this.edit_status.push("view"!==e?1:0);return this},$changeStatus:function(e,t,n){for(var i=0;i<n.length;i++)this[e][n[i]]=t;return this},$clearSelectRow:function(e){var t;e=e||"row_status",this.all_row_select=0,this[e]=w()(t=this.data).call(t,(function(){return 0}))},$getSelectedRows:function(e){var t;e=e||"row_status";var n=[],i=[],o=this.data;return w()(t=this[e]).call(t,(function(e,t){1===e&&n.push(o[t])&&i.push(t)})),{selectRows:n,selectIndex:i}},$newRow:function(e){var t,n={};return g()(t=this.columns).call(t,(function(e){n[e.key]=""})),this.data.push(n),this.$addStatus(e,1),this.$refreshScroll&&this.$refreshScroll(),this},$delRow:function(){for(var e,t=!1,n=0;n<this.row_status.length;n++)if(1===this.row_status[n]){t=!0;break}if(!t)return"请先选择行";var i=Pe()(e=this.data).call(e,(function(e,t){return 0===this.row_status[t]}),this);return this.$setData(i),this.$clearSelectRow(),this},$setRowStatus:function(e){this.row_status=e},$setAllowSelect:function(e){this.options.allowSelect=e},$setRowAllowSelect:function(e,t){this.rowAllowSelect[e]=t},$fillRowData:function(e,t){var n=!0;if(this.validDuplicationColumns.length>0)for(var i=0;i<this.data.length;i++){for(var o=!1,a=0;a<this.validDuplicationColumns.length;a++)if(this.data[i][this.validDuplicationColumns[a]]!==e[this.validDuplicationColumns[a]]){o=!0;break}if(!o){n=!1;break}}if(!n)return!1;this.$newRow(t);var l=this.data.length-1;return this.data[l]=e,this.$refreshScroll&&this.$refreshScroll(),!0},$setValidDuplication:function(e){return e instanceof Array&&(this.validDuplicationColumns=e),this},$updateRowData:function(e,t){var n;return g()(n=this.data).call(n,(function(n){w()(e).call(e,(function(e){n[e]=t}))})),!0},$validData:function(){if(0===this.data.length)return"表格数据不能为空";for(var e,t,n,i,o=0;o<this.data.length;o++){for(var a in n=this.data[o],this.columns)if(this.columns[a].hasOwnProperty("options")){if(e=this.columns[a].options,t=n[this.columns[a].key],i=this.columns[a].validName||this.columns[a].name||this.columns[a].label||this.columns[a].key,e.hasOwnProperty("required")&&e.required&&(""===t||null==t))return"第"+(o+1)+"行 "+i+" 不允许为空";if(e.hasOwnProperty("max")&&E()(t||0)>e.max)return"第"+(o+1)+"行 "+i+" 不允许超过 "+e.max.toString();if(e.hasOwnProperty("min")&&E()(t||0)<e.min)return"第"+(o+1)+"行 "+i+" 不允许小于 "+e.min.toString()}for(var l=0;l<this.valid_rules.length;l++){var r=this.valid_rules[l](n);if(!0!==r)return r}}return!0},$setValidRule:function(e){var t;e instanceof Array?this.valid_rules=ie()(t=this.valid_rules).call(t,e):this.valid_rules.push(e);return this},$setFilter:function(){var t,i,o=n.defer(),a=this;return e((function(){var e=Z()(a.search_key);e=Pe()(e).call(e,(function(e){return a.search_key[e]})),t=w()(e).call(e,(function(e){var t,n=a.search_key[e],o=Pe()(t=a.columns).call(t,(function(t){return t.key===e}))[0];if(o&&o.search&&o.search.filter_type){var l;/^[<>].*/.test(n)&&(l=n[0]);var r=new RegExp({date:"[^\\d-]",age:"[^\\d]"}[o.search.filter_type],"g");n=n.replace(r,""),i=l?{key:e,op:l,value:n}:{key:e,op:"like",value:"%"+n+"%"};var c=new RegExp({date:"[^<>\\d-]",age:"[^<>\\d]"}[o.search.filter_type],"g");a.search_key[e]=a.search_key[e].replace(c,"")}else if(n instanceof Array)n.length>0&&(i={key:e,op:"in",value:n});else if(n&&n.match(/[,，;；]/)){var s;n=Pe()(s=n.split(/[,，;；]/)).call(s,(function(e){return e})),i={key:e,op:"or",value:w()(n).call(n,(function(e){return{op:"like",value:"%"+e+"%"}}))}}else i={key:e,op:"like",value:"%"+n+"%"};return n&&i})),t=Pe()(t).call(t,(function(e){return e})),o.resolve(t)}),200),o.promise},$setPaging:function(e){(e=angular.extend(e,{page:e.page?JSON.parse(e.page):1,page_size:e.page_size?JSON.parse(e.page_size):20,current_page:e.current_page?JSON.parse(e.current_page):1})).page_size=e.page_size||20,this.paging={total_count:e.total_count||0,page_size:e.page_size,current_page:e.current_page||1,current_page_size:t("gridPageSizeList")(e.page_size)[0],page_size_list:t("gridPageSizeList")(e.page_size_list||[10,15,20,30]),total_page:Math.ceil(e.total_count/e.page_size),onPagingChange:e.onPagingChange,template:e.template},this.paging.page_list=[];for(var n=0;n<this.paging.total_page;n++)this.paging.page_list.push({label:n+1,value:n+1});return this},$batchGetAnnex:function(e){var t,o,a=n.defer(),l=w()(t=Pe()(o=this.columns).call(o,(function(e){return"hc-input-upload"===e.component}))).call(t,(function(e){return e.key})),r=[];return l.length>0&&w()(e).call(e,(function(e){g()(l).call(l,(function(t){e[t]&&r.push(e[t])}))})),r.length>0?i.annexInfoMore(r).then((function(){a.resolve(!0)})):a.resolve(!0),a.promise}}}}}]),Pe()(O.a).call(O.a,"gridPageSizeList",["$filter",function(e){return function(t){var n;return t=ie()(n=[]).call(n,t),t=w()(t).call(t,(function(t){return t=t+e("translate")("/page")||" 条/页"}))}}]),O.a.factory("validateService",["$q","$http","dataService",function(e,t,n){return{mobileCheck:function(e){return function(t){return!!/^1[345789]\d{9}$/.test(t)||(e||"手机号码格式错误")}},emailCheck:function(e){return function(t){return!!/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(t)||(e||"邮箱格式错误")}}}}]),O.a.factory("dataListService",["$timeout","contextService","$q","$state","$hcDialog","dataService","templateService","formStructureService",function(e,t,n,i,o,a,l,r){return{getValueById:function(e,t){var i=n.defer(),o="";return"hc-selector"==e.component&&this.getValueFromSelector(e,t).then((function(e){o=e,i.resolve(o)})),"hc-common-select"==e.component&&this.getValueFromCommonSelector(e,t).then((function(e){o=e,i.resolve(o)})),i.promise},getValueFromSelector:function(e,t){var i=n.defer(),o="";return null!=t&&""!=t&&null!=t||i.resolve(o),"object"==f()(t)?o="name"in t?t.name:"":e.options.selectorMapper&&e.options.selectorMapper(t).then((function(e){o="name"in e?e.name:"",i.resolve(o)})),i.promise},getValueFromCommonSelector:function(e,t){var i=n.defer(),o="";return null!=t&&""!=t&&null!=t||i.resolve(o),"object"==f()(t)?(o="name"in t?t.name:"",o="value"in t?t.value:o,i.resolve(o)):this.getConfig(e,t).then((function(e){o=e,i.resolve(o)})),i.promise},getConfig:function(e,t){var i=n.defer(),o=this,a="";return e.options.control_type?o.getValue(e,t).then((function(e){a=e,i.resolve(a)})):r.getSingleConfig(e.options.selectKey).then((function(n){e.options.control_type=n.control_type,o.getValue(e,t).then((function(e){a=e,i.resolve(a)}))})),i.promise},getValue:function(e,t){var i,o=n.defer(),a=[],l="",c=[e.options.selectKey];return e.options&&e.options.selector?(i=e.options.selector,c=ie()(c).call(c,e.options.selectorParams||[])):i=r.getFileSelect,i.apply(this,c).then((function(n){var i;"enum"===e.options.control_type?a=n:s()(i=["baseitem","link"]).call(i,e.options.control_type)>=0&&(0===n.length&&o.resolve(l),a=w()(n).call(n,(function(e){var t={};return t.key=e.id,t.value=e.name,t})));for(var r=0;r<a.length;r++)if(a[r].key==t){l=a[r].value;break}o.resolve(l)})),o.promise}}}]);n("8If0");O.a.directive("hcmBtn",[function(){return{template:n("meT6"),restrict:"E",transclude:!0,scope:{btnData:"=",btnOperate:"="},controller:["$scope","$rootScope","$filter",function(e,t,n){e.$watch("btnData.version",(function(t,n){t&&n&&e.initHcmBtn()}),!0),e.initHcmBtn=function(){/127.0.0.1:3000/.test(location.href)&&alert("请使用新的选择器hc-list-btn，hcm-btn即将去除"),e.btn=n("hcmBtnTransfer")(e.btnData)},e.btnClickFuc=function(t,n,i){t&&t.stopPropagation(),n.list?(!n.showMulti&&e.closeAllDropDown(),n.showMulti=!n.showMulti):(i&&(i.showMulti=!1),n.click?n.click(n):(/127.0.0.1:3000/.test(location.href)&&!n.list&&alert("请替换成click方法，该功能即将去除"),e.btnOperate&&e.btnOperate(n.operate)))},e.closeAllDropDown=function(){var t;e.btn&&w()(t=e.btn).call(t,(function(e){e.showMulti=!1}))},t.$on("win_body_click_event",(function(){e.closeAllDropDown()}))}]}}]),Pe()(O.a).call(O.a,"hcmBtnTransfer",(function(){return function(e){var t,n=angular.copy(e);n.content=Pe()(t=n.content).call(t,(function(e){var t;return e.list?(e.list=Pe()(t=e.list).call(t,(function(e){return!e.hide})),e.list.length>0):!e.hide}));for(var i,o,a=n.count||4,l=n.content.length;l--;l>0){var r;if(l>a&&n.content[l].list)b()(r=n.content).call(r,l,1,n.content[l-1].list),n.content=ie()([]).apply([],n.content)}n.content.length>a&&b()(i=n.content).call(i,a,0,{name:"更多操作",type:"airCore",list:b()(o=n.content).call(o,a-1)});return n.content}})),O.a.directive("hcCommonSelect",[function(){return{restrict:"EA",template:'<div class="hc-common-select" ng-init="init()"><hc-single-select ng-if="!options.multi&&itemList"></hc-single-select><hc-multi-select ng-if="options.multi&&itemList"></hc-multi-select></div>',scope:{options:"=",key:"=",label:"=",model:"=ngModel",setData:"="},controller:["formStructureService","$scope","hcCommonSelectService","$q","$filter",function(e,t,n,i,o){t.init=function(){var e,n;/127.0.0.1:3000/.test(location.href)&&alert("请使用新的选择器hc-super-selector，hc-common-selector选择器即将去除"),t.options.module_type=t.options.module_type||"list",t.options.getValue&&(t.options.getValue=t.options.getValue.replace("by","").toLowerCase()),s()(e=["baseitem_to_str","baseitem_input_str"]).call(e,t.options.control_type)>=0&&(t.options.getValue=t.options.getValue||"value",t.options.returnFormat=t.options.returnFormat||t.options.getValue),"enum"===t.options.control_type?(t.options.key="key",t.options.value="value"):~s()(n=["baseitem","link","baseitem_multi_value","baseitem_input_str","baseitem_to_str"]).call(n,t.options.control_type)&&(t.options.key="id",t.options.value="name"),t.model=o("valueEffect")(t.model)?t.model:t.options.default,t.model&&t.triggerChange(!0),t.dataHandle(),t.options.refresh=function(){t.dataHandle()}},t.dataHandle=function(){t.getData().then((function(e){t.itemList=n.transformData(t.dataList,e),t.is_tree=t.itemList.length!==t.dataList.length,(t.is_tree||t.dataList.length>200||"mobile"===window.client)&&(t.options.module_type="dialog")}))},t.getData=function(){var e=i.defer();return t.options.list?(t.dataList=t.options.list,e.resolve()):t.options.getOuterData?t.options.getOuterData(t.options.getOuterParams).then((function(n){t.options.list=n,t.dataList=t.options.list,e.resolve()})):t.options.control_type&&t.options.selectKey?n.getListData(t.options).then((function(n){t.dataList=n,e.resolve(!0)})):t.options.control_type?console.log("字典型数据获取需传入$scope.options.selectKey"):console.log("非字典型数据引用，需要存入list或者获取list的方法$scope.options.getOuterData"),e.promise},t.triggerChange=function(e){t.options.change&&t.options.change(t,t.model,t.currentValue,e)},t.stateChangeControl=function(e){t.options.stateChange&&t.options.stateChange(t,e,200)}}]}}]),O.a.directive("hcSingleSelect",[function(){return{restrict:"EA",template:'<div class="hc-single-select" ng-if="itemList" ng-init="singleInit()"><hc-list-select ng-if="options.module_type==\'list\'"></hc-list-select><hc-dialog-select ng-if="options.module_type==\'dialog\'" ></hc-dialog-select></div>',scope:!1,controller:["formStructureService","$scope","hcCommonSelectService","$q","$filter",function(e,t,n,i,o){t.singleInit=function(){o("valueEffect")(t.model)&&t.changeValue(t.model,!0)},t.$watch("model",(function(e,n){t.innerTransform?t.innerTransform=!1:o("valueEqual")(e,n)||(o("valueEffect")(e)?t.changeValue(t.model,!0):n&&t.clear(null,!0))})),t.changeValue=function(e,n){if(!o("valueEffect")(e))return!1;var i,a;"object"!==f()(e)?e=Pe()(i=t.dataList).call(i,(function(n,i){var o;return o=n[t.options[t.options.getValue]]==e,!t.is_tree&&(t.itemList[i].select=o),o}))[0]:e=Pe()(a=t.dataList).call(a,(function(n,i){var o;return o=n[t.options.key]==e[t.options.key],!t.is_tree&&(t.itemList[i].select=o),t.options.list&&!0===t.options.multiMsg&&(t.itemList[i].select=!1),o}))[0];if(e){var l=t.changeDataFormat(e);t.$parent.currentValue=e[t.options.value],l!==t.$parent.model&&(t.innerTransform=!0,t.$parent.model=l,t.triggerChange(n))}else"edit"===t.options.operate_type?t.editChangeValue(t.$parent.model,n):console.log(t.key+"没找到匹配的数据")},t.changeDataFormat=function(e){return t.options.selectorParse?t.options.selectorParse(e):t.options.returnFormat?e[t.options[t.options.returnFormat]]:e},t.editChangeValue=function(e,n){t.$parent.model=t.$parent.currentValue=e,t.triggerChange(n)},t.clear=function(e,n){var i;t.innerTransform=""!==t.$parent.model,e&&e.stopPropagation(),t.$parent.model="",t.$parent.currentValue="",w()(i=t.itemList).call(i,(function(e){e.select=!1})),t.triggerChange(n)}}]}}]),O.a.directive("hcMultiSelect",[function(){return{restrict:"EA",template:'<div class="hc-multi-select" ng-if="itemList" ng-init="multiInit()"><hc-list-select ng-if="options.module_type==\'list\'"></hc-list-select><hc-dialog-select ng-if="options.module_type==\'dialog\'" ></hc-dialog-select></div>',scope:!1,controller:["formStructureService","$scope","hcCommonSelectService","$q","$filter",function(e,t,n,i,o){t.multiInit=function(){o("valueEffect")(t.model)&&t.changeValue(t.model,!0)},t.$watch("model",(function(e,n){t.innerTransform?t.innerTransform=!1:o("valueEqual")(e,n)||(e&&0!==e.length?t.changeValue(t.model,!0):n&&t.clear(null,!0))})),t.changeValue=function(e,n){var i,o,a;((!e||0===e.length)&&(e=[]),e=ie()(i=[]).call(i,e),"object"!==f()(e[0]))?e=Pe()(o=t.dataList).call(o,(function(n,i){var o;return w()(e).call(e,(function(e){!o&&(o=n[t.options[t.options.getValue]]==e)})),!t.is_tree&&(t.itemList[i].select=o),o})):e=Pe()(a=t.dataList).call(a,(function(n,i){var o;return w()(e).call(e,(function(e){!o&&(o=n[t.options.key]==e[t.options.key])})),!t.is_tree&&(t.itemList[i].select=o),o}));if(0===e.length)return t.clear(null,n),console.log(t.key+"没找到匹配的数据"),!1;var l=t.changeDataFormat(e);t.innerTransform=!0,t.is_tree||n?t.triggerChange(n):t.haveChanged=!0,t.$parent.model=l,t.$parent.currentValue=w()(e).call(e,(function(e){return e[t.options.value]})).join(",")},t.changeDataFormat=function(e){return t.options.selectorParse?w()(e).call(e,(function(e){return t.options.selectorParse(e)})):t.options.returnFormat?w()(e).call(e,(function(e){return e[t.options[t.options.returnFormat]]})):e},t.clear=function(e,n){var i;e&&e.stopPropagation(),t.innerTransform=!0,t.$parent.model=[],t.$parent.currentValue="",w()(i=t.itemList).call(i,(function(e){e.select=!1})),t.triggerChange(n)},t.completeChoose=function(){t.haveChanged&&(t.haveChanged=!1,t.triggerChange())}}]}}]),O.a.directive("hcListSelect",[function(){return{restrict:"EA",template:n("EXx3"),scope:!1,controller:["$scope","$rootScope","$element",function(e,t,n){e.init=function(){e.model&&e.initSelectItem(e.model),e.show_select_box=!1,e.options.limit=e.options.limit||10},e.stateChange=function(t){if(0===e.itemList.length)return!1;e.show_select_box=t||!e.show_select_box,e.show_select_box?e.calculatePos():e.completeChoose&&e.completeChoose(),e.stateChangeControl(e.show_select_box)},e.checkScroll=function(){var t=angular.element(n[0]).parents("hc-common-select").parents();angular.element(window).add(t).on("scroll click",(function i(o){var a;e.show_select_box&&(0===Fe()(a=angular.element(n[0])).call(a,o.target).length&&(angular.element(window).add(t).off("scroll click",i),e.stateChange(),e.$digest()))}))},e.calculatePos=function(){if(e.show_select_box){var t,i=Fe()(t=angular.element(n[0])).call(t,".select-box"),o=i.parents("hc-common-select");i.css({left:o.offset().left,width:o.outerWidth()});var a=Jn()((function(){if(i.not(".ng-hide").length>0){var t=angular.element(".header-banner").height()||0,n=angular.element(".bottom-menu").height()||0,l=window.innerHeight-t-n,r=i.height(),c=o.offset().top,s=window.innerHeight-(o.offset().top+o.innerHeight());l<r?i.css({height:l,top:0,bottom:"initial"}):l>r&&s<r?i.css({height:"initial",top:c-r,bottom:"initial"}):i.css({height:"initial",top:o.offset().top+o.outerHeight(),bottom:"initial"}),e.checkScroll(),clearInterval(a)}}),10)}},e.search_key_press=function(t){if(13===(window.event?t.keyCode:t.which)){var n=new RegExp(e.keyword);e.arr=[];for(var i=0;i<e.itemList.length;i++)n.test(e.itemList[i][e.options.value])&&e.arr.push(e.itemList[i]);e.options.multi||e.selectItem(e.arr[0])}},e.initSelectItem=function(t){var n,i,o,a=ie()(n=[]).call(n,angular.copy(t));"object"===f()(a[0])?(a=w()(a).call(a,(function(t){return t[e.options.key]})),w()(i=e.itemList).call(i,(function(t){t.select=!!~s()(a).call(a,t[e.options.key])}))):w()(o=e.itemList).call(o,(function(t){t.select=!!~s()(a).call(a,t[e.options[e.options.getValue]])}))},e.canSelectAll=function(){var t;e.selectAll=!e.selectAll,e.changeValue(Pe()(t=e.itemList).call(t,(function(t){return new RegExp(e.keyword).test(t[e.options.value])&&(t.select=e.selectAll),t.select})))},e.selectItem=function(t){if(e.options.multi){var n;t.select=!t.select,e.changeValue(Pe()(n=e.itemList).call(n,(function(e){return e.select})))}else{var i,o;if(w()(i=e.itemList).call(i,(function(e){e.select=!1})),t.select=!0,e.options.list&&e.options.multiMsg)w()(o=e.options.list).call(o,(function(e){return e.select=!1})),t.select=!1;e.stateChange(!1),e.changeValue(t)}}}]}}]),O.a.directive("hcDialogSelect",[function(){return{restrict:"EA",template:n("4Yc9"),scope:!1,controller:["$scope","hcCommonSelectService",function(e,t){e.editChange=function(){if("edit"!==e.options.operate_type)return!1;e.editChangeValue(e.currentValue)},e.show_dialog=function(){e.is_tree?t.treeDialogSelector({options_list:e.itemList,dataList:e.dataList,label:e.label||e.options.label,options:{key:e.options.key,multi:e.options.multi,value:e.options.value,expand_all:!0}}).then((function(t){e.changeValue(t)})):t.listDialogSelector({options_list:e.itemList,label:e.label||e.options.label,value:e.options.value,options:{key:e.options.key,multi:e.options.multi,value:e.options.value,expand_all:!0,style:e.options.style}}).then((function(t){e.changeValue(t)}))}}]}}]),Pe()(O.a).call(O.a,"valueEffect",(function(){return function(e){return 0===e||e}})),Pe()(O.a).call(O.a,"valueEqual",(function(){return function(e,t){return"object"===f()(e)&&"object"===f()(t)?j()(e)===j()(t):e===t}})),O.a.factory("hcCommonSelectService",["$q","dataService","$hcDialog","$rootScope","formStructureService",function(e,t,i,o,a){return{getListData:function(t){var n,i=e.defer(),o=[];return t.selector?n=t.selector:(o=[t.selectKey],n=a.getFileSelect),o=ie()(o).call(o,t.selectorParams||[]),n.apply(this,o).then((function(e){i.resolve(e)})),i.promise},transformData:function(e,t){var n;if(t&&(e=w()(e).call(e,(function(e){var t={};return null!=e.id&&(t.id=e.id),null!=e.name&&(t.name=e.name),null!=e.key&&(t.key=e.key),null!=e.value&&(t.value=e.value),null!=e.parent_select_enabled&&(t.parent_select_enabled=e.parent_select_enabled),null!=e.is_leaf&&(t.is_leaf=e.is_leaf),null!=e.parent_id&&(t.parent_id=e.parent_id),null!=e.number&&(t.number=e.number),t}))),0==e.length||!e[0].id)return e;var i={},o=JSON.parse(j()(e));return g()(o).call(o,(function(e){i[e.id]=e})),g()(o).call(o,(function(e){if(e.parent_id&&i[e.parent_id]){var t=i[e.parent_id].children||[];t.push(e),i[e.parent_id].children=t}})),(o=Pe()(n=w()(o).call(o,(function(e){return i[e.id]}))).call(n,(function(e){return!e.parent_id})))&&1===o.length&&(o[0].expanded=!0),o},listDialogSelector:function(e){return i.getDialog({template:n("BSnz"),controller:["$scope",function(t){t.$dialog.title(e.label||"请选择"),t.init=function(){t.list=t.params.options_list},t.choose=function(e){var n;1==t.params.options.multi?e.select=!e.select:(w()(n=t.list).call(n,(function(e){e.select=!1})),e.select=!0)},t.confirm=function(){var e,n=Pe()(e=t.list).call(e,(function(e){return e.select}));1==t.params.options.multi?t.$dialog.resolve_data(n):t.$dialog.resolve_data(n[0]),t.$dialog.dialog_close()},t.$dialog.operates([{label:"取消",cancel:!0,func:function(){t.$dialog.dialog_close()}},{label:"确定",default:!0,cancel:!0,func:t.confirm}])}]}).params(e).size("middle").show()},treeDialogSelector:function(e){var t={title:e.label?e.label:"",list:e.options_list,options:e.options,dataList:e.dataList};return i.getDialog({controller:"hcSelectorDialogCtrl",template:'<div style="padding: 0 15px 0 15px;margin-top: 5px"><input type="text" style="border-style: none none solid none;padding: 0px" ng-change="keyWordChange(keyWord)" ng-model="keyWord" placeholder="输入查询关键字" ng-keydown="$event.which === 13 && search_button(keyWord)"></div>\n                               <hc-tree-select data-list="params.list" data-options="options"></hc-tree-select>'}).params(t).size("middle").show()}}}]);var Tl=n("R8cT"),Al=n.n(Tl);O.a.factory("hcExportCommonService",["dataService","$q","$rootScope",function(e,t,n){return{export:function(n){var i=t.defer();return e.callHcmOpenWebSocket("common.export",{category:n.category,dept_id:n.dept_id,filters:n.filters}).then((function(e){var t=window.hcm_wengen+"/document/temp/download?index=".concat(e,"&name=")+n.category_name+".xlsx"+window.hcm_env_post;window.open(document.location.origin+t),i.resolve(!0)}),(function(){i.resolve(!1)}),(function(e){({value:e.progress,message:e.info})})),i.promise},download_in_page:function(e,t){"object"==f()(e)&&e instanceof Blob&&(e=Al.a.createObjectURL(e));var n=document.createElement("a");t&&(n.download=t),n.href=e,n.click()}}}]);n("+6tr");O.a.directive("hcSearchTree",["$timeout",function(e){return{template:n("stJW"),scope:{tag:"@",config:"=",search:"=",filter:"="},restrict:"E",link:function(t,n,i){var o=function(e){return Fe()($(n)).call($(n),e)};t.$on("position_tree_node_success",(function(n,i){e((function(){var e,n=".hc-tree-panel .hc-tree-node.positioned";"search"==i&&!1===t.config.options.searched_selected&&(n=".hc-tree-panel .hc-tree-node.searched"),(e=t.search_suffix?o(n).parents("hc-tree").prev():o(n)).offset()&&o(".hc-tree-panel").animate({scrollTop:e.offset().top-o(".hc-tree-panel").offset().top+o(".hc-tree-panel").scrollTop()-5})}),200)}))},controller:["$scope","$hcDialog",function(e,t){var n,i,o,a;e.config.options&&e.config.options.selected&&e.config.options.selected instanceof Array&&w()(a=e.config.options.selected).call(a,(function(t){!1===e.config.options.allow_cancel&&(t.allow_cancel=!1)}));function l(){if(o<i.list.length)u();else if(i){if(!i.next_ts)return o=0,e.search_click(),!1;i.next().then((function(){u()}))}}function r(){o=0,n=e.keyword,i.list.length?l():t.notify("没有搜到信息，请换个检索词")}function c(e){(i=e)&&(i.origin&&r()||i.next(!0).then(r))}function d(t){var n,i=t.tree_id;e.search&&e.search.suffix&&((n="function"==typeof e.search.suffix?e.search.suffix(t):e.search.suffix)?("*"!=n&&(n="*"+n),i+="!"+n,e.search_suffix=!0):e.search_suffix=!1);e.$broadcast("position_tree_node",i,!1,"search"),o+=1}function u(){var t=i.list[o];t.tree_id?d(t):e.search&&e.search.get_tree_id&&e.search.get_tree_id(t).then((function(e){t.tree_id=e,d(t)}))}e.search_key_press=function(t){13==(window.event?t.keyCode:t.which)&&e.search_click()},e.$on("tree_construct_change",(function(){n=""})),e.search_click=function(){if(!e.search||!e.search.function)return t.notify("请设置检索函数"),!1;if(/^\s*$/g.test(e.keyword||""))return t.notify("请输入检索词"),!1;if(n&&e.keyword==n)i.list.length?l():t.notify("没有搜到信息，请换个检索词");else{var o=e.search.function(e.keyword);o.then?o.then(c):c(o)}},e.remove_selected=function(t){if(e.config&&e.config.options){var n=e.config.options.selected;if(n){var i=s()(n).call(n,t);b()(n).call(n,i,1)}}}}]}}]),O.a.directive("hcOrgSearch",[function(){return{template:'<hc-search-tree data-tag=\'<hc-org-tree data-template="config.template" data-options="config.options"\ndata-filter="config.filter"></hc-org-tree>\' data-search="search" data-config="config"></hc-search-tree>',scope:{template:"=",options:"=",filter:"=",limit:"="},restrict:"E",controller:["$scope","hcOrgTreeService",function(e,t){e.search={function:function(n){var i=Pe()(e)||{};return t.searchOrg(n,i.role,i.mini_type,i.mapping,Pe()(e).init_node)}},e.config={template:e.template,filter:Pe()(e),options:e.options||{}};var n=e.limit||[];if(n&&"string"==typeof n&&(n=n.split(",")),n.length){var i=e.config.options.useable;e.config.options.useable=function(e){return~s()(n).call(n,String(e.org_type))&&(!i||i(e))}}}]}}]),O.a.directive("hcOrgEmpSearch",[function(){return{template:'<hc-search-tree data-tag=\'<hc-org-emp-tree data-template="config.template" data-options="config.options"\ndata-filter="config.filter"></hc-org-emp-tree>\' data-search="search" data-config="config"></hc-search-tree>',scope:{template:"=",options:"=",filter:"=",limit:"="},restrict:"E",controller:["$scope","hcOrgTreeService","$q",function(e,t,n){e.config={template:e.template,filter:Pe()(e),options:e.options||{}};var i=e.limit||[];i&&"string"==typeof i&&(i=i.split(","));var o=e.config.options.useable;e.config.options.useable=function(e){return(!e.hasOwnProperty("org_type")||~s()(i).call(i,String(e.org_type)))&&(!o||o(e))},e.search={function:function(i){var o=Pe()(e)||{},a=n.defer(),l=t.searchEmp(i,o.role,o.person_filter);return l&&l.next(!0).then((function(){l.list.length?a.resolve(l):a.resolve(t.searchOrg(i,o.role,o.mini_type))})),a.promise},get_tree_id:function(i){var o=n.defer();return t.getOrgDetail(i.dept_id).then((function(t){Pe()(e).hide_position?o.resolve([t.tree_id,i.id].join("!")):o.resolve([t.tree_id,i.position_id,i.id].join("!"))})),o.promise}}}]}}]),O.a.directive("hcOrgExtSearch",[function(){return{template:'<hc-search-tree data-tag=\'<hc-org-ext-tree data-extend="config.extend" data-template="config.template"\ndata-options="config.options" data-filter="config.filter"></hc-org-ext-tree>\' data-search="search" data-config="config"></hc-search-tree>',scope:{template:"=",options:"=",filter:"=",extend:"=",suffix:"=",limit:"="},restrict:"E",controller:["$scope","hcOrgTreeService",function(e,t){e.search={function:function(n){var i=Pe()(e)||{};return t.searchOrg(n,i.role,i.mini_type)},suffix:e.suffix},e.config={template:e.template,filter:Pe()(e),extend:e.extend,options:e.options||{}};var n=e.limit||[];n&&"string"==typeof n&&(n=n.split(","));var i=e.config.options.useable;e.config.options.useable=function(e){return(!e.hasOwnProperty("org_type")||~s()(n).call(n,String(e.org_type)))&&(!i||i(e))}}]}}]),Pe()(O.a).call(O.a,"cloneTreeNode",(function(){return function(e){var t=angular.extend({},e);return delete t.children,t}})),O.a.controller("hcTreeCtrl",["$scope","$rootScope","$timeout","$q","$filter","$hcDialog",function(e,t,n,i,o,a){function l(){n((function(){$(".hc-tree-panel").getNiceScroll().resize(),e.options&&e.options.toggle_expand&&e.options.toggle_expand()}),500)}function r(t){var n;e.$emit("hc-tree-init-all-nodes",e.options&&(t||e.list),e.options&&(t||e.list)),e.options&&g()(n=t||e.list).call(n,(function(t){if(e.options.useable&&(t.useable=!!e.options.useable(t)),e.options.selected&&"*"!=t.id[0])if(e.options.multi){var n,i,o=Pe()(n=e.options.selected).call(n,(function(e){return e.tree_id?e.tree_id==t.tree_id:e.id?e.id==t.id:void 0}))[0];if(!o)return;var a,l,r=s()(i=e.options.selected).call(i,o);if(!1!==t.useable)t.selected=!0,!1===e.options.allow_cancel&&(t.allow_cancel=!1),b()(a=e.options.selected).call(a,r,1,t);else b()(l=e.options.selected).call(l,r,1)}else e.options.selected.tree_id==t.tree_id&&(!1!==t.useable?(t.selected=!0,e.options.selected=t):e.options.selected=null)})),e.options&&(e.options.stop_selected=!1),l()}function c(t){var n=i.defer();return e.load&&e.load(t).then((function(e){if(g()(e).call(e,(function(e){e.parent=o("cloneTreeNode")(t),e.tree_id=e.id,t&&(e.tree_id=t.tree_id+"!"+e.tree_id)})),t.children){var i,a=w()(i=t.children).call(i,(function(e){return e.tree_id}));g()(e).call(e,(function(e){~s()(a).call(a,e.tree_id)&&(e.expanded=t.children[s()(a).call(a,e.tree_id)].expanded,e.children=t.children[s()(a).call(a,e.tree_id)].children)}))}r(e),t.children=e,0==e.length&&(t.is_leaf=!0),n.resolve(t.children),l()})),n.promise}function d(t){var i;if(e.options.postion_tree_id&&e.list){var o=e.options.postion_tree_id.split("!"),a=Pe()(i=e.list).call(i,(function(n){var i=s()(o).call(o,String(n.id));return~i?i<o.length-1?"*"==o[i+1][0]||(!(!t||!n.expanded||i!=o.length-2)||!n.expanded):n.tree_id==e.options.postion_tree_id:(n.expanded&&(n.expanded=!1),!1)}))[0];if(a){var l=s()(o).call(o,String(a.id));~l&&(b()(o).call(o,0,l+1),function t(i,o,a){if(!i)return e.$emit("tree-node-not-found");if(0===o.length)"search"==e.options.postion_from&&!1===e.options.searched_selected?e.options.searched=i:(e.options.multi||(null==i.useable&&e.options&&e.options.useable&&(i.useable=!!e.options.useable(i)),i&&!1!==i.useable&&i!=e.options.selected&&(e.options.search_parent=i,e.options.selected=i,e.$emit("tree-node-selected",i))),i!=e.options.positioned&&(e.options.search_parent=i,e.options.positioned=i)),n((function(){e.$emit("position_tree_node_success",e.options.postion_from)}),200);else if(i){var l,r=b()(o).call(o,0,1)[0];if(!i.children||a&&!o.length)(!i.children&&1!=i.is_leaf||a&&!o.length)&&c(i).then((function(){var e;i.children&&(i.is_leaf&&(i.is_leaf=!1),i.expanded=!0,t("*"==r?i.children[0]:Pe()(e=i.children).call(e,(function(e){return e.id==r}))[0],o,a))}));else if(i.expanded=!0,"*"==r)t(i.children[0],o,a);else t(Pe()(l=i.children).call(l,(function(e){return e.id==r}))[0],o,a)}}(a,o,t))}}}e.init=function(){r(),e.options.refreshScroll=l},e.sortable_config={filter:function(){return!e.options||!e.options.sortable},group:{name:"tree_sort:"+Math.random()},animation:150,onSort:function(t){var n;e.options&&st()(e.options)&&st()(n=e.options).call(n,t.models)}},e.$on("tree_node_reload",(function(t,n){if(!e.list)return!1;for(var i=function(t){e.list[t].children&&c(e.list[t]).then((function(n){e.list[t].children=n}))},o=0;o<e.list.length;o++)i(o)})),e.toggle_expand=function(e,t){e&&e.stopPropagation(),t.is_leaf||(t.expanded=!t.expanded,l(),!t.children&&c(t))},e.node_select=function(t,n,i){t.stopPropagation(),e.options&&n&&(e.options.stop_selected?a.confirm(e.options.stop_selected_message).then((function(){e.stop_selected_fuc(n,i)})):e.stop_selected_fuc(n,i))},e.stop_selected_fuc=function(t,n){e.options.check_select?e.options.check_select(t).then((function(i){i.success&&e.node_select_fuc(t,n)})):e.node_select_fuc(t,n)},e.node_select_fuc=function(t,n){if(!1!==t.useable&&"0"!==t.is_au){if(!1!==t.allow_cancel)if(e.options.positioned=null,e.options.searched=null,e.options.multi){e.options.selected||(e.options.selected=[]);var i=e.options.selected,o=s()(i).call(i,t);~o?b()(i).call(i,o,1):i.push(t)}else{if(t==e.options.selected)return;e.options.search_parent=t,e.$emit("tree_construct_change"),e.options.selected=t,e.$emit("tree-node-selected",t,n)}}else e.toggle_expand(null,t)},e.node_name_select=function(t,n){t.stopPropagation(),e.options&&n&&!1!==n.useable&&(e.options.positioned=null,e.options.searched=null,e.options.multi&&(e.options.search_parent=n,e.$emit("tree_construct_change")))},e.$on("position_tree_node",(function(t,n,i,o){e.options.postion_tree_id=n,e.options.postion_from=o,d(i)})),e.$on("tree_control_selected",(function(t,n){e.options.stop_selected=n.stop_selected,e.options.stop_selected&&(e.options.stop_selected_message=n.message?n.message:"")})),e.multi_checked_css=function(e,t){var n;return t.selected&&s()(n=t.selected).call(n,e)>=0?!1===e.allow_cancel?"icon-hcm-click-rectangle-radius not-allow-cancel":"checked icon-hcm-click-rectangle-radius":"icon-hcm-none-rectangle-radius"}}]),O.a.directive("hcTree",[function(){return{template:n("ci9f"),restrict:"E",scope:{template:"=",load:"=",list:"=",options:"="},controller:"hcTreeCtrl"}}]),O.a.directive("hcTreeGrid",[function(){return{template:n("wW/t"),restrict:"E",scope:{template:"=",load:"=",list:"=",level:"=",options:"="},controller:"hcTreeCtrl"}}]),O.a.directive("hcTreeSelect",[function(){return{template:n("0IgF"),restrict:"E",scope:{template:"=",load:"=",list:"=",level:"=",options:"="},controller:"hcTreeCtrl"}}]);var Il=n("qD00"),Ll=(n("a9iL"),n("uG5i"),n("+UZt"),n("HV3j"),n("XMR8"),n("2cJo"),n("k2n1"),n("R91f"));n("NYRg"),n("zk52"),n("zYGM"),n("UAti"),n("huAG"),n("62R/");function Fl(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}window.app.directive("hcColorPicker",[function(){return{template:n("7Gu+"),scope:{options:"=",model:"=ngModel",key:"="},controller:["$scope","$element","$compile",function(e,t,n){e.uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),e.change=function(){$(".".concat(e.uuid)).css("background-color",e.model?e.model:"rgb(255, 255, 255, 00)")},e.options=function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=Fl(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=Fl(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}({change:e.change,placeholder:"请输入十六进制颜色（八位）"},e.options),e.initComponent=function(){$((function(){$("#".concat(e.uuid)).colorpicker({customClass:"colorpicker-2x",sliders:{saturation:{maxLeft:200,maxTop:200},hue:{maxTop:200},alpha:{maxTop:200}}}),$("#".concat(e.uuid)).on("colorpickerCreate",(function(t){$(".".concat(e.uuid)).css("background-color",e.model?e.model:"rgb(255, 255, 255, 00)")})),$("#".concat(e.uuid)).on("colorpickerShow",(function(t){$("#".concat(e.uuid)).colorpicker("setValue",e.model),e.options.readOnly?($("#".concat(e.uuid)).colorpicker("hide"),$(".colorpicker-bs-popover").css("display","none")):$(".colorpicker-bs-popover").css("display","flex")})),$("#".concat(e.uuid)).on("colorpickerChange",(function(t){e.model=Object(i.q)(t.color.toString())})),e.options.readOnly&&($("#".concat(e.uuid)).colorpicker("disable"),$("#".concat(e.uuid)).css("cursor","unset"))}))},e.init=function(){var o;e.model=e.model?e.model:e.options.default?e.options.default:null,e.$watch("model",(function(t,n){e.options.change&&e.options.change(t,n)}));var a=ie()(o="<div id=".concat(e.uuid,' class="colorInput input-group" data-color="rgb(255, 255, 255, 00)" style="border-radius: 2px;"><span class="input-group-text colorpicker-input-addon"><i style="width: 20px; height: 20px" class=')).call(o,e.uuid,"></i></span></div>"),l=angular.element(a),r=n(l)(e);Fe()(t).call(t,".colorPickerBox").append(r),$("#78fa510d-ac76-49ba-91f9-59112f327ec2").colorpicker?e.initComponent():Object(i.j)("./static/resources/lib/bootstrap.js").then((function(){Object(i.j)("./static/resources/lib/bootstrap-colorpicker.js").then((function(){e.initComponent()}))}))}}]}}]);n("HjF+"),n("vjaz"),n("2B1R");var Rl=n("gA8o"),Bl=n.n(Rl),Ul=n("hi0z"),ql=n("k85I");Ai.default.use(Ii.default),O.a.directive("leftMenu",(function(){return{restrict:"E",scope:{leftmenuitems:"=leftmenuitems",inititem:"=inititem"},template:n("Jrtj"),controller:["$scope",function(e){e.currentItem=e.inititem,e.changeItem=function(t){return e.currentItem=t,window.scrollTo(0,0),!0}}]}})).directive("bottomMenu",(function(){return{restrict:"E",scope:{menu:"=menu",controller:"=controller"},template:n("bt7P"),controller:["$scope",function(e){null!=e.controller&&(e.controller={set_caption:function(t,n){e.menu[t].o_caption=e.menu[t].caption,e.menu[t].caption=n},restore_caption:function(t){e.menu[t].caption=e.menu[t].o_caption},enable_item:function(t){e.menu[t].enabled=!0},disable_item:function(t){e.menu[t].enabled=!1}})}]}})),O.a.directive("multiPage",(function(){return{restrict:"E",scope:{object:"=object",func:"="},template:n("qOlg"),controller:["$scope",function(e){e.exec_func=function(){void 0!==e.func?e.func():void 0!==e.object&&e.object.next()}}]}})),O.a.directive("locationMap",(function(){return{restrict:"E",scope:{callback:"=callback",initStatus:"=initStatus",controller:"=controller"},template:n("QGj9"),controller:["$timeout","$rootScope","$scope","$q","locationService","contextService",function(e,t,n,i,o,a){n.mapcontroller={},n.map={center:null,markers:[],geo:null,zoom:16},n.controller={begin:function(){n.controller.geo_locate()},addMarkers:function(e){w()(n).markers=e,n.mapcontroller.addMarkers(e)},marke_visitpath:function(e){n.mapcontroller.marke_visitpath(e)}},n.init=function(){"open"==n.initStatus&&n.geo_locate()},n.geo_success=function(e){n.locating_msg="正在进行地址转换",o.geoTranslateClient(e.lat,e.lng).then((function(t){w()(n).geo={lat:t.lat,lng:t.lng,accuracy:e.accuracy},w()(n).center=t,n.is_locating=!1,n.curr_location={title:"[当前位置]",location:{lat:t.lat,lng:t.lng},address:"获取中..."},o.geoDecodeClient(t.lat,t.lng).then((function(e){n.location_city=e.addressComponents.city,n.curr_location.location.address=e.addressComponents.streetNumber,n.callback(n.curr_location)}))}))},n.geo_locate=function(){n.is_locating||(n.is_locating=!0,n.is_locating_err=!1,n.locating_msg="正在使用微信定位，请稍候...",o.getLocationByWx().then(n.geo_success,(function(){n.locating_msg="微信定位失败，尝试浏览器定位...",o.getLocationByGeo().then(n.geo_success,(function(e){n.is_locating_err=!0,n.locating_msg=e.message,n.is_locating=!1;var t={lat:36.55799,lng:116.75768};t.photo=a.getContext("auth").employee.photo,n.geo_success(t)}))})))}}]}})),O.a.directive("locationSelection",(function(){return{restrict:"E",scope:{callback:"=callback",initStatus:"=initStatus",controller:"=controller"},template:n("SZbD"),controller:["$timeout","$rootScope","$scope","$q","locationService","multiPageService",function(e,t,i,o,a,l){i.map={center:null,markers:[],geo:null,zoom:16},i.bottom_menu_controller={},i.selected_index=null,i.selected_position=null,i.init=function(){var e=n("iQKG");i.myScroll=new e("#pois_list",{mouseWheel:!0,click:!0,tap:!0}),"open"==i.initStatus&&(i.is_location_selection=!0,i.geo_locate())},i.controller={begin:function(){i.is_location_selection=!0,i.controller.geo_locate()}},i.geo_success=function(e){i.locating_msg="正在进行地址转换",a.geoTranslateClient(e.lat,e.lng).then((function(t){w()(i).geo={lat:t.lat,lng:t.lng,accuracy:e.accuracy},w()(i).center=t,i.is_locating=!1,i.curr_location={title:"[当前位置]",location:{lat:t.lat,lng:t.lng},address:"获取中..."},a.geoDecodeClient(t.lat,t.lng).then((function(e){i.location_city=e.addressComponents.city,i.curr_location.address=e.addressComponents.streetNumber,i.init_position_list(t.lat,t.lng)}))}))},i.init_position_list=function(t,n){i.select_position(-1),i.pois_list_service=l(a.getNearBy,{distance:"1000",lat:t,lng:n},(function(t){i.pois_list=t,e((function(){i.myScroll.refresh()}),600),e((function(){i.myScroll.refresh()}),1200)})),i.pois_list_service.start()},i.geo_locate=function(){i.is_locating||(i.is_locating=!0,i.is_locating_err=!1,i.locating_msg="正在使用微信定位，请稍候...",a.getLocationByWx().then(i.geo_success,(function(){i.locating_msg="微信定位失败，尝试浏览器定位...",a.getLocationByGeo().then(i.geo_success,(function(e){i.is_locating_err=!0,i.locating_msg=e.message,i.is_locating=!1}))})))},i.b_menu={btn_0:{caption:"确定",class:"",enabled:!0,func:function(){null!=i.selected_position?(i.selected_position.city=i.location_city,i.callback(i.selected_position),i.is_location_selection=!1):t.show_warning("别心急，还没选择地址呢","warning")}},btn_refresh:{caption:"重新定位",class:"",func:function(){i.geo_locate()}}},i.$watch("is_locating",(function(e){i.b_menu.btn_refresh.caption=e?"定位中...":"重新定位"})),i.select_position=function(e){i.selected_index=e,i.selected_position=-1==e?i.curr_location:i.pois_list[e],w()(i).center=i.selected_position.location,w()(i).markers=[i.selected_position.location]}}]}})),O.a.directive("map",(function(){return{restrict:"E",scope:{center:"=center",geo:"=geo",zoom:"=zoom",zoomControl:"=",markers:"=markers",draggable:"=draggable",overlaysCustom:"=overlaysCustom"},template:n("+mD9"),controller:["$scope","$timeout","locationService",function(e,t,i){function o(e){this.config=e||{}}e.status={},e.init=function(){e.map_init_trys=0,e.map_init()},e.map_init=function(){try{e.status={code:0,message:"Initting"},e.map=new qq.maps.Map(document.getElementById("map"),{center:null==e.center?new qq.maps.LatLng(36.662182,117.129303):new qq.maps.LatLng(e.center.lat,e.center.lng),zoom:e.zoom||16,draggable:!0===e.draggable,zoomControl:!0===e.zoomControl}),e.status={code:1,message:"Inited"}}catch(n){e.map_init_trys<5?(e.map_init_trys=e.map_init_trys+1,t((function(){e.map_init()}),300)):e.status={code:-1,message:"map init error"}}},e.$watch("zoom",(function(t){t&&w()(e)&&w()(e).setZoom(t)})),e.$watch("center",(function(t){if(t&&w()(e)){var n=new qq.maps.LatLng(e.center.lat,e.center.lng);w()(e).setCenter(n)}})),e.$watch("geo",(function(t){if(null!=t){null!=e.geo_dot&&e.geo_dot.setMap(null),null!=e.geo_accuracy&&e.geo_accuracy.setMap(null),e.geo_dot=new qq.maps.Marker({map:w()(e),position:new qq.maps.LatLng(t.lat,t.lng)});var i=new qq.maps.Point(12,12),o=new qq.maps.Size(24,24),a=new qq.maps.Point(0,0),l=new qq.maps.MarkerImage(n("wrNy"),o,a,i);e.geo_dot.setIcon(l);try{e.geo_accuracy=new qq.maps.Circle({center:new qq.maps.LatLng(t.lat,t.lng),radius:t.accuracy,map:w()(e),strokeWeight:0})}catch(e){}}})),e.$watch("markers",(function(t){if(null!=t){var n;if(null!=e.curr_markers)g()(n=e.curr_markers).call(n,(function(e){e.setMap(null)})),e.curr_markers=[];null==e.curr_markers&&(e.curr_markers=[]),g()(t).call(t,(function(t){e.curr_markers.push(new qq.maps.Marker({map:w()(e),position:new qq.maps.LatLng(t.lat,t.lng)}))}))}})),e.$watch("overlaysCustom",(function(t){if(null!=t){var n;if(o.prototype.hasOwnProperty("draw")||(o.prototype=new qq.maps.Overlay,o.prototype.construct=function(){this.config.overlay.appendTo($(this.getPanes().overlayMouseTarget))},o.prototype.draw=function(){var e=this.getProjection().fromLatLngToDivPixel(this.config.position);this.config.overlay.css({left:e.x+"px",top:e.y+"px"})},o.prototype.destroy=function(){this.config.overlay.remove()}),null!=e.curr_overlays_round)g()(n=e.curr_overlays_round).call(n,(function(e){e.setMap(null)})),e.curr_overlays_round=[];null==e.curr_overlays_round&&(e.curr_overlays_round=[]),g()(t).call(t,(function(t){var n=new o({position:new qq.maps.LatLng(t.lat,t.lng),overlay:t.overlay});n.setMap(w()(e)),e.curr_overlays_round.push(n)}))}}))}]}})),O.a.directive("mapBaidu",(function(){return{restrict:"E",scope:{center:"=center",geo:"=geo",zoom:"=zoom",zoomControl:"=",markers:"=markers",draggable:"=draggable",overlaysCustom:"=overlaysCustom"},template:n("+mD9"),controller:["$scope","$timeout","locationService",function(e,t,n){function i(e){this.config=e||{}}e.status={},e.init=p()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadBadiMap();case 2:e.map_init_trys=0,e.map_init();case 4:case"end":return t.stop()}}),t)}))),e.loadBadiMap=function(){return new G.a((function(e,t){var n=window.document.getElementById("baidu_map");window.server_disable_map||n?e():(window.onBMapCallback=function(){e()},(n=window.document.createElement("script")).setAttribute("id","baidu_map"),n.setAttribute("type","text/javascript"),n.setAttribute("src","https://api.map.baidu.com/api?v=2.0&ak=D7KG4CoeclWrYbUGU7dMCGfS9Uhn0YFz&callback=onBMapCallback"),window.document.body.appendChild(n))}))},e.map_init=function(){try{e.status={code:0,message:"Initting"},e.map=new BMap.Map("map",{enableMapClick:!1}),w()(e).centerAndZoom(null==e.center?new BMap.Point(117,36):new BMap.Point(e.center.lng,e.center.lat),e.zoom||15),w()(e).enableScrollWheelZoom(!1),w()(e).addControl(new BMap.ScaleControl),e.status={code:1,message:"Inited"}}catch(n){e.map_init_trys<5?(e.map_init_trys=e.map_init_trys+1,t((function(){e.map_init()}),300)):e.status={code:-1,message:"map init error"}}},e.$watch("zoom",(function(t){t&&w()(e)&&w()(e).setZoom(t)})),e.$watch("center",(function(t){if(t&&w()(e)){var n=new BMap.Point(e.center.lng,e.center.lat);w()(e).setCenter(n)}})),e.$watch("geo",(function(t){null!=t&&(null!=e.geo_dot&&e.geo_dot.setMap(null),null!=e.geo_accuracy&&e.geo_accuracy.setMap(null))})),e.$watch("markers",(function(t){if(null!=t){var n;if(null!=e.curr_markers)g()(n=e.curr_markers).call(n,(function(e){e.setMap(null)})),e.curr_markers=[];null==e.curr_markers&&(e.curr_markers=[]),g()(t).call(t,(function(t){e.curr_markers.push(new BMap.Marker(new BMap.Point(t.lng,t.lat))),w()(e).addOverlay(mkr)}))}})),e.$watch("overlaysCustom",(function(t){if(null!=t){var n;if(i.prototype.hasOwnProperty("draw")||(i.prototype=new BMap.Overlay,i.prototype.initialize=function(e){return this._map=e,this.config.overlay.appendTo($(e.getPanes().markerPane)),this.config.overlay[0]},i.prototype.draw=function(){var e=this._map.pointToOverlayPixel(this.config.position);this.config.overlay.css({left:e.x+"px",top:e.y+"px"})},i.prototype.destroy=function(){this.config.overlay.remove()}),null!=e.curr_overlays_round)g()(n=e.curr_overlays_round).call(n,(function(t){w()(e).removeOverlay(t)})),e.curr_overlays_round=[];null==e.curr_overlays_round&&(e.curr_overlays_round=[]),g()(t).call(t,(function(t){var n=new i({position:new BMap.Point(t.lng,t.lat),overlay:t.overlay});w()(e).addOverlay(n),e.curr_overlays_round.push(n)}))}}))}]}})),O.a.directive("mapGaode",(function(){return{restrict:"E",scope:{center:"=center",geo:"=geo",zoom:"=zoom",zoomControl:"=",markers:"=markers",overlaysCustom:"=overlaysCustom"},template:n("+mD9"),controller:["$scope","$timeout","locationService",function(e,t,n){e.status={},e.init=p()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.map_init_trys=0,e.map_init();case 2:case"end":return t.stop()}}),t)}))),e.map_init=function(){try{e.status={code:0,message:"Initting"},window._AMapSecurityConfig||(window._AMapSecurityConfig={securityJsCode:"f4118c9ead6368e60e0eaef6604a32e5"}),Ul.load({key:ql.a,version:"2.0",plugins:["AMap.Scale","AMap.ToolBar","AMap.MapType"]}).then((function(){console.log("正在加载高德地图服务"),e.map=new AMap.Map("map",{viewMode:"3D",zoom:e.zoom||5,zoomControl:!0,vectorMapForeign:"style_zh_cn",center:null==e.center?[116.397428,39.90923]:[e.center.lng,e.center.lat]});var t=new AMap.Scale,n=new AMap.ToolBar({position:{top:"16px",left:"16px"}});w()(e).addControl(t),w()(e).addControl(n)})).catch((function(e){console.log("加载高德地图服务失败"),console.log(e)})),e.status={code:1,message:"Inited"}}catch(n){console.log(n),e.map_init_trys<5?(e.map_init_trys=e.map_init_trys+1,t((function(){e.map_init()}),300)):e.status={code:-1,message:"map init error"}}},e.$watch("zoom",(function(t){t&&w()(e)&&w()(e).setZoom(t)})),e.$watch("center",(function(t){t&&w()(e)&&(w()(e).setCenter([e.center.lng,e.center.lat]),w()(e).clearMap())})),e.$watch("overlaysCustom",(function(t){t&&w()(e)&&(null!=e.curr_overlays_round&&(w()(e).clearMap(),e.curr_overlays_round=[]),null==e.curr_overlays_round&&(e.curr_overlays_round=[]),g()(t).call(t,(function(t){var n=new AMap.LngLat(Number(t.lng),Number(t.lat)),i=new AMap.Marker({position:n,content:t.overlay});w()(e).add(i),e.curr_overlays_round.push(i)})))}))}]}})),O.a.directive("locationmMapComponent",(function(){return{restrict:"E",scope:{center:"=center",geo:"=geo",zoom:"=zoom",markers:"=markers",mapcontroller:"=mapcontroller"},template:n("+mD9"),controller:["$filter","$scope","$timeout","locationService",function(e,t,n,i){t.status={},t.curr_markers=[],t.init=function(){t.map_init_trys=0,t.map_init()},t.mapcontroller.marke_visitpath=function(e){var n=[],i=0,o=0,a=200,l=200;for(var r in e)n.push(new qq.maps.LatLng(e[r].latitude,e[r].longitude)),i=e[r].latitude>i?e[r].latitude:i,o=e[r].longitude>o?e[r].longitude:o,a=e[r].latitude<=a?e[r].latitude:a,l=e[r].longitude<=l?e[r].longitude:l;var c=a+(i-a)/2,s=l+(o-l)/2;if(t.pre_center=t.center,t.center=new qq.maps.LatLng(c,s),n.length>2){t.zoom=4,t.map_init();new qq.maps.Polyline({path:n,strokeColor:"#03a9f4",strokeWeight:3,map:w()(t)})}},t.mapcontroller.addMarkers=function(n){null!=n&&(null!=t.pre_center&&(t.center=t.pre_center),t.zoom=8,t.map_init(),g()(n).call(n,(function(n){var i=new qq.maps.Marker({map:w()(t),position:new qq.maps.LatLng(n.lat,n.lng)}),o=new qq.maps.Point(0,0),a=new qq.maps.Size(40,40),l=(new qq.maps.Point(0,0),new qq.maps.MarkerImage(e("hcPhoto")(n.photo,40),a,o));i.setIcon(l),t.curr_markers.push(i)})))},t.map_init=function(){try{t.status={code:0,message:"Initting"},t.map=new qq.maps.Map(document.getElementById("map"),{center:null==t.center?new qq.maps.LatLng(36.662182,117.129303):new qq.maps.LatLng(t.center.lat,t.center.lng),zoom:t.zoom||16,draggable:!1,zoomControl:!0}),t.status={code:1,message:"Inited"}}catch(e){t.map_init_trys<5?(t.map_init_trys=t.map_init_trys+1,n((function(){t.map_init()}),300)):t.status={code:-1,message:"map init error"}}},t.$watch("center",(function(e){e&&w()(t).panTo(new qq.maps.LatLng(e.lat,e.lng))})),t.$watch("geo",(function(e){null!=e&&(null!=t.geo_dot&&t.geo_dot.setMap(null),null!=t.geo_accuracy&&t.geo_accuracy.setMap(null))}))}]}})),O.a.directive("msgBarNoPhoto",(function(){return{restrict:"E",scope:{id:"=id"},controller:["hcImageService","empService","$scope","$state","$http",function(e,t,n,i,o){n.goToMyProfile=function(){i.go("emp",{id:n.id,tab:"contact"})},n.UploadImg=function(){n.uploading=!0,o.post("savephoto",{emp_id:n.id,photo:n.my_img_file}).then((function(e){window.sessionStorage.removeItem("auth"),n.uploading=!1,n.img_selected=!1,i.go("index",{},{reload:!0})}))},n.selectImg=function(o){null!=o&&(n.uploading=!0,e.uploadImg(o).then((function(e){t.setPhoto(n.emp_id,e,"life").then((function(){window.sessionStorage.removeItem("auth"),n.uploading=!1,n.img_selected=!1,i.go("index",{},{reload:!0})}))})))}}],template:n("+rOd")}})),O.a.directive("sbLoad",["$parse",function(e){return{restrict:"A",link:function(e,t,n){t.on("load",(function(t){e.$apply(n.sbLoad)}))}}}]),O.a.directive("fileMsg",(function(){return{restrict:"E",scope:{logo:"=logo",text:"=text"},template:n("Pfpq")}})),O.a.directive("fileSelector",(function(){return{template:n("lfmw"),scope:{controller:"=controller",callback:"=callback",cancel:"=cancel"},controller:["$scope","$rootScope","fileService","$state","$timeout",function(e,t,n,i,o){e.init=function(){e.initFileType(),e.folder_id=0,e.folder_name="我的文档",e.folder_id_his=[],e.folder_name_his=[],e.file_id=0,e.file_selected={},e.getMyFilesByType(e.folder_id,e.type)},e.getMyFilesByType=function(t,i){n.getMyFilesByType(t,i).then((function(t){e.files=t}))},e.goToSubFolder=function(t){e.file_selected={},e.folder_id_his.push(e.folder_id),e.folder_name_his.push(e.folder_name),e.folder_id=t.id,e.folder_name=t.name,e.getMyFilesByType(e.folder_id,e.type)},e.BackToParentFolder=function(){0!=e.folder_id&&(e.file_selected={},e.folder_id=e.folder_id_his.pop(),e.folder_name=e.folder_name_his.pop(),e.getMyFilesByType(e.folder_id,e.type))},e.controller={beginSelect:function(t){e.type=t,e.init(),e.file_selected={},e.is_selecting=!0}},e.cancelSelect=function(){e.is_selecting=!1,e.cancel()},e.doSelectFile=function(t){var n={file_selected:t};e.is_selecting=!1,e.callback(n)},e.initFileType=function(){e.file_type=["folder","cms","doc","docx","xls","xlsx","ppt","pptx","pdf","png","bmp","jpg","jpeg","gif","rar","zip"]},e.fileItemClick=function(t){1==t.is_folder?e.goToSubFolder(t):e.doSelectFile(t)}}]}})),O.a.directive("fileSelectorPc",(function(){return{template:n("mBLv"),scope:{controller:"=controller",callback:"=callback"},controller:["$scope","$rootScope","fileService","$state","$timeout",function(e,t,n,i,o){e.init=function(){""==i.params.id||null==i.params.id?e.folder_id=0:e.folder_id=i.params.id,e.folder_id=0,e.folder_name="我的文档",e.folder_id_his=[],e.folder_name_his=[],e.initFileType(),e.getMyFiles(e.folder_id)},e.getMyFiles=function(t){n.getMyPicFiles(t).then((function(t){e.files=t}))},e.initFileType=function(){e.file_type=["folder","cms","doc","docx","xls","xlsx","ppt","pptx","pdf","png","bmp","jpg","jpeg","gif","rar","zip"]},e.fileItemClick=function(t,n){1==t.is_folder?e.goToSubFolder(t):e.selectItem(t,n)},e.goToSubFolder=function(t){e.folder_id_his.push(e.folder_id),e.folder_name_his.push(e.folder_name),e.folder_id=t.id,e.folder_name=t.name,e.getMyFiles(e.folder_id)},e.BackToParentFolder=function(t){if(0!=e.folder_id){for(var n=e.folder_id_his.length-1;n>t;n--)e.folder_id_his.pop(),e.folder_name_his.pop();e.folder_id=e.folder_id_his.pop(),e.folder_name=e.folder_name_his.pop(),e.getMyFiles(e.folder_id)}},e.goToFile=function(){},e.PreviewFile=function(){},e.selectItem=function(t,n){n.stopPropagation(),e.select_item=t,e.is_selecting=!1,e.callback(e.select_item.index)},e.clickBlank=function(){e.select_item={}},e.startFolderSelect=function(){e.pre_move_item=e.select_item,e.folder_selector_controller.beginSelect(e.pre_move_item)},e.cancel=function(){e.is_selecting=!1,e.callback(null)},e.controller={beginSelect:function(){e.select_item={},e.is_selecting=!0}}}]}})),O.a.directive("listSchool",(function(){return{restrict:"E",scope:{icon:"=icon",name:"=name",desc:"=desc"},template:n("XY+Y")}})),O.a.directive("carouselMobile",["documentPreviewService",function(e){return{template:n("WCmr"),scope:{file:"=file",controller:"=controller"},controller:["$scope","$rootScope","fileService","$state","$timeout","weChatService","$http",function(t,n,i,o,a,l,r){t.init=function(){t.pic_type=["png","jpg","jpeg","bmp"],t.previewFile()},t.controller={showCarousel:function(){t.show_carousel=!0,t.init()}},t.previewFile=function(){var e;if("html"!=t.file.type)if(s()(e=t.pic_type).call(e,t.file.type)>=0){var n=[];n.push(location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadsourcedocument/"+t.file.index+window.hcm_env_pre);var i={current:n[0],urls:n};l.preViewImg(i)}else t.getFilePreViewStatus();else o.go("content",{id:t.file_id,index:t.file.index})},t.getFilePreViewStatus=function(){var e=window.hcm_wengen+"/document/getdocumentinfo/"+t.file.index+window.hcm_env_pre;r.get(e,{}).then((function(e){return(e=e.data).isPreview?e.isPreview&&0==e.pageSize?(t.msg={logo:"icon-smiley-wink-1",text:"文件转码中，请稍后再试。。。"},t.show_msg=!0,void a((function(){}),2e3)):void(e.isPreview&&e.pageSize>0&&(t.file_status=e,t.showImg())):(t.msg={logo:"icon-smiley-wink-1",text:"对不起，该文件类型不支持预览"},t.show_msg=!0,void a((function(){t.show_msg=!1}),2e3))}))},t.showImg=function(){e.preViewDocument(t.file.index)}}]}}]),O.a.directive("iScroll",["$timeout","$rootScope",function(e,t){return{restrict:"A",link:function(i,o,a){if(""!=(a.iScroll||"")&&!("testScroll"in a)){var l=n("iQKG"),r=a.iScroll,c=a.iScrollMark,s={};s=new l(o[0],{probeType:2,scrollbars:!0,mouseWheel:!0,fadeScrollbars:!0,bounce:!0,click:!0,bindToWrapper:!0,tap:!0,disableMouse:!1,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|CANVAS)$/}});var d=t.iscroll_cache_position?t.iscroll_cache_position[r+"_position"]:null;d&&s.scrollTo(0,M()(d),0),s.on("scrollEnd",(function(){this.maxScrollY-this.y>-50&&i.$broadcast(r+"_bottom"),t.iscroll_last_position||(t.iscroll_last_position={}),c?(t.iscroll_last_position[r+"_position"]||(t.iscroll_last_position[r+"_position"]={}),t.iscroll_last_position[r+"_position"][c]=this.y):t.iscroll_last_position[r+"_position"]=this.y,i.$emit(r+"_scrollEnd",this.y)})),s.on("scroll",(function(){i.$emit(r+"_scrolling"),this.maxScrollY==this.y&&i.$broadcast(r+"_bottom")})),i.$on(r+"_cache_position",(function(e,n){t.iscroll_cache_position||(t.iscroll_cache_position={}),t.iscroll_cache_position[r+"_position"]=s.y})),i.$on(r+"_restore_position",(function(e,n){if(c)var i=t.iscroll_last_position&&t.iscroll_last_position[r+"_position"]?t.iscroll_last_position[r+"_position"][c]:null;else i=t.iscroll_last_position?t.iscroll_last_position[r+"_position"]:null;i&&s.scrollTo(0,M()(i),0),u()})),i.$on(r+"_refresh",(function(e,t){t&&s.scrollTo(0,0,0),u()})),u()}function u(){e((function(){s.refresh()}),600),e((function(){s.refresh()}),1200),e((function(){s.refresh()}),2e3)}}}}]),O.a.directive("bScroll",["$timeout",function(e){return{restrict:"A",scope:{options:"="},link:function(e,t,n){var i,o;"pc"===window.client?(i={fade:!1,interactive:!0},o=!1):(i=!0,o=!0);var a={probeType:2,scrollbar:i,mouseWheel:!0,bounce:o,freeScroll:!0,click:!0,bindToWrapper:!0,tap:!0,disableMouse:!1,scrollX:!0,scrollY:!0,observeDOM:!0};n.options&&(a=angular.extend(a,e.options||{}),e.options=a),we()((function(){new Ai.default(t[0],a)}))}}}]),O.a.directive("ngRightClick",["$parse",function(e){return{restrict:"A",link:function(t,n,i){a()(n).call(n,"contextmenu",(function(n){var o=e(i.ngRightClick);t.$apply((function(){o(t,{$event:n})}))}))}}}]),O.a.factory("scrollService",[function(){return{$setScroll:function(){return{config:{},watchScroll:"",refresh:"",resize:"",destroy:"",$initScroll:function(e,t){return this.config=e,this.watchScroll=t,this}}}}}]),O.a.directive("listNext",[function(){return{restrict:"E",scope:{listController:"=",reverse:"="},controller:["$scope","$filter",function(e,t){e.getTips=function(){return(e.listController||{}).is_refreshing?t("translate")("loading"):(e.listController||{}).next_ts?t("translate")("click for more"):t("translate")("no more contents")}}],template:n("OsKP")}}]),O.a.directive("selectDateMonth",(function(){return{restrict:"E",scope:{params:"="},template:n("lv7E"),controller:["$scope",function(e){e.init=function(){e.is_show_select_panel=!1,e.date_month="",e.params&&!e.params.placeholder&&(e.params.placeholder=""),e.params&&e.params.default_value&&e.init_default_value(),e.$on("win_body_click_event",(function(t){e.is_show_select_panel=!1}))},e.init_default_value=function(){var t=/(\d{4})(0)(\d+)/;RegExp(t).test(e.params.default_value)&&(e.date_month=e.params.default_value.replace(t,"$1年$3月"))||(t=/(\d{4})(\d{2})/,e.date_month=e.params.default_value.replace(t,"$1年$2月"))},e.show_select_panel=function(t){e.is_show_select_panel=!e.is_show_select_panel,t.stopPropagation()},e.set_date=function(t,n){e.is_show_select_panel=!1,e.date_month=t.getFullYear()+"年"+(t.getMonth()+1)+"月";var i=t.getMonth()+1<10?"0":"",o=t.getFullYear()+i+(t.getMonth()+1);e.params&&e.params.return_date&&e.params.return_date(o)}}]}})),O.a.directive("selectDateMonthYearMinute",(function(){return{restrict:"E",scope:{params:"="},template:n("Uh7L"),controller:["$scope",function(e){e.init=function(){e.is_show_select_panel=!1,e.date_month_year_minute="",e.params&&!e.params.placeholder&&(e.params.placeholder=""),e.params&&e.params.default_value&&e.init_default_value(),e.$on("win_body_click_event",(function(t){e.is_show_select_panel=!1}))},e.init_default_value=function(){e.date_month_year_minute=e.params.default_value.replace(/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/,"$1年$2月$3日$4时$5分")},e.show_select_panel=function(t){e.is_show_select_panel=!e.is_show_select_panel,t.stopPropagation()},e.set_date=function(t,n){e.is_show_select_panel=!1,e.date_month_year_minute=t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"+t.getHours()+"时"+t.getMinutes()+"分";var i=t.getMonth()+1<10?"0":"",o=t.getDate()<10?"0":"",a=(t.getHours(),t.getMinutes(),t.getFullYear()+"-"+i+(t.getMonth()+1)+"-"+o+t.getDate()+" "+t.getHours()+":"+t.getMinutes());e.params&&e.params.return_date&&e.params.return_date(a)}}]}})),O.a.directive("formButton",["$timeout",function(e){return{restrict:"E",scope:{params:"="},template:n("/WzU"),controller:["$scope",function(t){t.init=function(){t.is_clicked=!1,t.button_text="确定",t.params&&t.params.button_text&&(t.button_text=t.params.button_text)},t.button_click=function(){t.is_clicked=!0,e((function(){t.is_clicked=!1}),200)}}]}}]).directive("dynamicCommonItem",["$compile",function(e){return{restrict:"EA",replace:!0,template:"<div>{{item}}</div>",scope:{item:"=",object:"="},link:function(t,n,i){var o=null;void 0!==t.item&&(o="<"+t.item,o+=" object='object'></"+t.item+">"),n.html(o),e(n.contents())(t)}}}]).directive("hcDragging",[function(){return{restrict:"A",scope:!0,link:function(e,t,n){$(t).css("transition-duration","0ms");var i=0,o=0,a=$(window).width()-$(t).outerWidth(),l=$(window).height()-$(t).outerHeight(),r=M()($(t).css("left")),c=M()($(t).css("top"));isNaN(r)&&(r=a-M()($(t).css("right"))),isNaN(c)&&(c=l-M()($(t).css("bottom")));var s={left:10,top:50,right:10,bottom:50};""!=(n.hcDragging||"")&&angular.extend(s,e[n.hcDragging]),i+=s.left,a-=s.right,o+=s.top,l-=s.bottom;var d={time:new Date,x:0,y:0},u=0,_=0;$(t).on("touchstart",(function(e){$(this).css("transition-duration","0ms");var t=e.originalEvent.targetTouches[0],n=$(this).offset();u=t.pageX-n.left,_=t.pageY-n.top})),$(t).on("touchmove",(function(e){if(e.preventDefault(),!$(this).hasClass("dragging-disabled")){var t=e.originalEvent.targetTouches[0],n=Math.min(Math.max(t.pageX-u,i),a)-r,s=Math.min(Math.max(t.pageY-_,o),l)-c;0==n&&0==s||(d={time:new Date,x:n,y:s},$(this).css("-webkit-transform","translate("+n+"px,"+s+"px)"))}})),$(t).on("touchend",(function(e){d.x&&(Math.abs(d.x)>(a-i)/2?($(this).addClass("hc-dragging-opposite"),d.x=d.x>0?a:-a):($(this).removeClass("hc-dragging-opposite"),d.x=d.x>0?i:-i),$(this).css("transition-duration","200ms"),$(this).css("-webkit-transform","translate("+d.x+"px,"+d.y+"px)"))}));var p={x:0,y:0};p.x=Math.min(Math.max(r+p.x,i),a)-r,p.y=Math.min(Math.max(c+p.y,o),l)-c,(p.x||p.y)&&$(t).css("-webkit-transform","translate("+p.x+"px,"+p.y+"px)")}}}]),O.a.directive("hcPager",["$rootScope","$injector","$compile","$timeout","$filter",function(e,t,n,i,o){return{replace:!0,restrict:"E",scope:{pageCount:"=",currentPage:"=",onPageChange:"&",showGoto:"=",showPageSize:"=",pageSize:"=",maxPageSize:"=",pageUnit:"="},template:'<div class="hc-pager ng-pagination">\n                <ul><li ng-click="pageChange(1)" class="icon-hcm-arrow-left-end" ng-class="{disable:currentPage==1}"></li>\n                <li ng-click="pageChange(currentPage-1>0?currentPage-1:1)" class="icon-hcm-arrow-left" ng-class="{disable:currentPage==1}"></li>\n                <li ng-click="pageChange(currentPage+1<=pageCount?currentPage+1:pageCount)" class="icon-hcm-arrow-right" ng-class="{disable:currentPage==pageCount}"></li>\n                <li ng-click="pageChange(pageCount)" ng-if="paginationConfig.showFirstLastText" class="icon-hcm-arrow-right-end" ng-class="{disable:currentPage==pageCount}"></li></ul>\n                <lable ng-if="showGoto"><input class="goto_page" type="text" ng-keyup="keyupHanlderCur($event)"><span>/{{pageCount}}{{pageUnit||"页"}}</span></lable>\n                <button  ng-if="showGoto" ng-click="goToPage()">跳转</button>\n                <div class="pageAmount_wrapper" ng-if="showPageSize"><input type="text" ng-keyup="keyupHanlderSize($event)" ng-model="pageSize"><span>'.concat(o("translate")("/page")||" 条/页","</span></div>\n                </div>"),link:function(e,t,n){e.paginationConfig=angular.extend(n,{showIfOnePage:!1,showFirstLastText:!0}),e.pageChange=function(t){t>=1&&t<=e.pageCount?(e.currentPage=t,e.$emit("current-page-change-event",e.currentPage),i((function(){e.onPageChange()}))):(e.currentPage=1,i((function(){e.onPageChange()})))},e.updateGoPageNum=function(e){Fe()(t).call(t,".goto_page").val(e)},e.updatePageSize=function(e){Fe()(t).call(t,".pageAmount_wrapper>input").val(e)},e.keyupHanlderSize=function(n){var o=n.target.value,a=M()(o,10);if(Bl()(a)){if(!n.preventDefault)return!1;n.preventDefault()}else a>=0&&a<=e.maxPageSize||(n.target.value=a<0?0:e.maxPageSize),13===n.keyCode&&(e.pageSize=a,e.currentPage=M()(Fe()(t).call(t,".goto_page").val()),e.$emit("current-page-size-change-event",e.pageSize),i((function(){e.onPageChange()})))},e.keyupHanlderCur=function(n){var o=n.target.value,a=M()(o,10);if(Bl()(a)){if(!n.preventDefault)return!1;n.preventDefault()}else a>=1&&a<=e.pageCount||(n.target.value=a<1?1:e.pageCount),13===n.keyCode&&(e.pageSize=M()(Fe()(t).call(t,".pageAmount_wrapper>input").val()),e.currentPage=a,i((function(){e.onPageChange()})))},e.goToPage=function(){e.pageSize=M()(Fe()(t).call(t,".pageAmount_wrapper>input").val()),e.currentPage=M()(Fe()(t).call(t,".goto_page").val()),i((function(){e.onPageChange()}))},e.$watch("currentPage",(function(t,n){t!==n&&e.updateGoPageNum(e.currentPage)})),e.$watch("pageCount",(function(t,n){t&&(e.updateGoPageNum(e.currentPage),e.updatePageSize(e.pageSize))})),e.$watch("pageSize",(function(t,n){t!==n&&e.updatePageSize(e.pageSize)}))}}}]),O.a.directive("draggingNavigate",(function(){return{restrict:"E",scope:{async:"=",navigates:"="},template:n("Bvup"),controller:["$scope","$rootScope",function(e,t){function n(t){t&&t.length&&(1==t.length?e.main_navigate=t[0]:(e.main_navigate={icon:"icon-hcm-more-point-solid",handler:function(){e.is_collapsed=!e.is_collapsed}},e.expand_navigates=t))}e.is_collapsed=!0,e.expand_navigates=[],e.main_navigate={icon:"icon-homepage",handler:function(){t.super_go("index",{},{location:"replace"})}},!0===e.async?e.$on("dragging_navigate_refresh",(function(e,t){n(t)})):n(e.navigates),e.navigate_click=function(t){t.disabled||(e.is_collapsed=!0,(t.handler||function(){})())}}]}})),O.a.directive("hcCompile",["$compile",function(e){return{restrict:"AE",template:"",link:function(t,n,i){i.content?(n.html(i.content),e(n.contents())(t)):i.template&&t.$watch(i.template,(function(o){if(i.compileParams){var a=JSON.parse(i.compileParams),l=Z()(a);g()(l).call(l,(function(e){var t=new RegExp("compileParams."+e,"gim");o=o.replace(t,a[e])}))}n.html(o),e(n.contents())(t)}))}}}]),O.a.directive("resizePanel",["$compile","$timeout",function(e,t){return{restrict:"A",scope:{resize:"="},link:function(t,n,i){var o=JSON.parse(i.resizePanel||"{}");$(n).css("position")in["absolute","relative"]||$(n).css("position","relative"),$("<div class='resize-panel-drag' ng-mousedown='mouse_down($event)'></div>").appendTo($(n)),e(n.contents())(t);var a,l,r=!1;t.mouse_down=function(e){e.stopPropagation(),r=!0,a=e.clientX,l=$(n).width(),$("body").mousemove((function(e){if(e.stopPropagation(),r){var t=l+e.clientX-a;t>o.min_width&&t<o.max_width&&$(n).width(t),$(".nicescroll-rails").css("opacity",0)}})),$("body").mouseup((function(e){e.stopPropagation(),r&&(t.resize&&t.resize.change&&t.resize.change(),$(".nicescroll-rails").css("opacity",1)),r=!1,$("body").mouse_move=null}))}}}}]),O.a.directive("inputOperate",(function(){return{scope:{operate:"="},link:function(e,t){e.operate=angular.extend({setFocus:function(){t.focus()},setBlur:function(){t.blur()}},e.operate||{})}}})),O.a.directive("selectImgMethods",(function(){return{restrict:"E",scope:{model:"=ngModel",customAlbum:"=",customCamera:"="},template:"<div style='position:fixed;z-index: 100000;bottom:0;width:100%;background-color: #eee' id='selectImgMethods'><div style='text-align: center;width:100%;padding:15px 0;border:1px solid #E7E7E7;background-color: white;color:black' ng-click='goToCamera()'>拍照</div><div style='text-align: center;width:100%;padding:15px 0;border-bottom:1px solid #E7E7E7;background-color: white;color:black' ng-click='goToAlbum()'>从手机相册选择</div><div style='text-align: center;width:100%;padding:15px 0;margin-top:5px;background-color: white;color:black' ng-click='close()'>取消</div></div>",controller:["$scope","$rootScope",function(e,t){var n=document.getElementsByTagName("select-img-methods");e.goToCamera=function(){if(e.customCamera)e.customCamera(),n?n[0].parentNode.removeChild(n[0]):console.log("no");else{var t={quality:100,encodingType:imp.iCamera.EncodingType.JPEG};imp.iCamera.open(t,(function(t){e.successFunc(t)}),(function(t){e.failedFunc(t)}))}},t.win_click=function(){t.$on("win_body_click_event",(function(e){n&&n[0].parentNode.removeChild(n[0])}))},e.goToAlbum=function(){if(console.log(t),console.log(e),e.customAlbum)e.customAlbum(),n?n[0].parentNode.removeChild(n[0]):console.log("no");else{var i={quality:100,encodingType:imp.iCamera.EncodingType.JPEG,targetWidth:0,targetHeight:0};imp.iCamera.select(i,(function(t){e.successFunc(t)}),(function(e){}))}},e.successFunc=function(t){var i;console.log("成功返回结果:"+t),i=q()(t)?t[0].thumbnailData:t.thumbnailData,e.model=i,n?n[0].parentNode.removeChild(n[0]):console.log("no")},e.failedFunc=function(t){n&&n[0].parentNode.removeChild(n[0]),e.show_warning("拍照组件初始化失败："+j()(t))},e.close=function(){n&&n[0].parentNode.removeChild(n[0])}}]}})).directive("copyContent",(function(){return{restrict:"E",scope:{model:"="},template:'<div class="copy-content"><textarea id="selectCopy" readonly ng-model="model"/></textarea><div ng-click="copy()">复制并关闭</div></div>',controller:["$scope","$rootScope","$hcDialog",function(e,t,n){e.copy=function(){document.getElementById("selectCopy").select();try{document.execCommand("Copy"),n.closeTarget("copyContent"),t.show_warning("复制成功")}catch(e){t.show_warning("复制失败，请重新手动复制")}}}]}}));n("mRH6");var Wl=function(){function e(e,t){this.$document=e,this.$parse=t,this.restrict="A"}return e.instance=function(t,n){return new e(t,n)},e.prototype.link=function(e,t,n){var i=this.$parse(n.hcResizableSuccess)||null,o=this,l=document.createElement("span");l.style.width="20px",l.style.height="20px",l.style.color="#FFF",l.className="hcm-resize-icon icon-hcm-arrow-amplification-reverse",l.style.bottom="0px",l.style.right="0px",l.style.zIndex="1500",l.style.position="absolute",l.style.visibility="hidden",l.style.cursor="nwse-resize";var r={},c={};function s(e){var n={width:c.width-(r.x-e.clientX)+"px",height:c.height-(r.y-e.clientY)+"px"};return t.css(n),!1}function d(t){o.$document.unbind("mousemove",s),o.$document.unbind("mouseup",d),e.$apply((function(){i(e,{$data:{width:c.width-(r.x-t.clientX),height:c.height-(r.y-t.clientY)},$event:t})}))}l.onmousedown=function(e){var n,i;return e.stopImmediatePropagation(),r.x=e.clientX,r.y=e.clientY,c.width=t.prop("offsetWidth"),c.height=t.prop("offsetHeight"),a()(n=o.$document).call(n,"mousemove",s),a()(i=o.$document).call(i,"mouseup",d),!1},a()(t).call(t,"mouseover",(function(){l.style.visibility="visible"})),a()(t).call(t,"mouseout",(function(){l.style.visibility="hidden"})),e.$watch(n.hcResizable,(function(e){var n=Fe()(t).call(t,".hcm-resize-icon");e?n.length<1&&t.append(l):n.length>0&&n.remove()}))},e}();O.a.directive("hcResizable",["$document","$parse",Wl.instance]);var zl=function(){function e(e,t){this.$document=e,this.$parse=t,this.restrict="A"}return e.instance=function(t,n){return new e(t,n)},e.prototype.link=function(e,t,n){var i=this.$parse(n.hcDraggableSuccess)||null,o=this,l=document.createElement("div");l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.style.width="100%",l.style.height="100%",l.style.backgroundColor="rgba(0, 0, 0, 0.4)",l.className="hcm-draggable-mask",l.style.zIndex="1000",l.style.position="absolute",l.style.visibility="hidden",l.style.cursor="move";var r={};function c(e){var n=r.top+e.clientY,i={left:r.left+e.clientX+"px",top:n+"px"};return t.css(i),!1}function s(t){o.$document.unbind("mousemove",c),o.$document.unbind("mouseup",s),e.$apply((function(){i(e,{$data:{top:r.top+t.clientY,left:r.left+t.clientX},$event:t})}))}l.onmousedown=function(e){var n,i;return e.preventDefault(),r.top=t.prop("offsetTop")-e.clientY,r.left=t.prop("offsetLeft")-e.clientX,a()(n=o.$document).call(n,"mousemove",c),a()(i=o.$document).call(i,"mouseup",s),!1},a()(t).call(t,"mouseover",(function(){l.style.visibility="visible"})),a()(t).call(t,"mouseout",(function(){l.style.visibility="hidden"})),e.$watch(n.hcDraggable,(function(e){var n=Fe()(t).call(t,".hcm-draggable-mask");e?n.length<1&&t.append(l):n.length>0&&n.remove()}))},e}();O.a.directive("hcDraggable",["$document","$parse",zl.instance]);n("SYor");var Nl=n("RKTd"),Kl=n.n(Nl),Hl=n("wd/R");O.a.directive("timer",["$compile",function(e){return{restrict:"EA",replace:!1,scope:{interval:"=interval",startTimeAttr:"=startTime",endTimeAttr:"=endTime",countdownattr:"=countdown",finishCallback:"&finishCallback",autoStart:"&autoStart",language:"@?",fallback:"@?",maxTimeUnit:"=",seconds:"=?",minutes:"=?",hours:"=?",days:"=?",months:"=?",years:"=?",secondsS:"=?",minutesS:"=?",hoursS:"=?",daysS:"=?",monthsS:"=?",yearsS:"=?"},controller:["$scope","$element","$attrs","$timeout","I18nService","$interpolate","progressBarService",function(t,n,i,o,l,r,c){var s;"function"!=typeof Kl()(String.prototype)&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.autoStart=i.autoStart||i.autostart,t.language=t.language||"en",t.fallback=t.fallback||"en";var d=new l;function u(){t.timeoutId&&clearTimeout(t.timeoutId)}t.$watch("language",(function(e,n){void 0!==e&&d.init(e,t.fallback)})),d.init(t.language,t.fallback),t.displayProgressBar=0,t.displayProgressActive="active",0===Kl()(s=n.html()).call(s).length?n.append(e("<span>"+r.startSymbol()+"millis"+r.endSymbol()+"</span>")(t)):n.append(e(n.contents())(t)),t.startTime=null,t.endTime=null,t.timeoutId=null,t.countdown=angular.isNumber(t.countdownattr)&&M()(t.countdownattr,10)>=0?M()(t.countdownattr,10):void 0,t.isRunning=!1,t.$on("timer-start",(function(){t.start()})),t.$on("timer-resume",(function(){t.resume()})),t.$on("timer-stop",(function(){t.stop()})),t.$on("timer-clear",(function(){t.clear()})),t.$on("timer-reset",(function(){t.reset()})),t.$on("timer-set-countdown",(function(e,n){t.countdown=n})),t.$watch("startTimeAttr",(function(e,n){e!==n&&t.isRunning&&t.start()})),t.$watch("endTimeAttr",(function(e,n){e!==n&&t.isRunning&&t.start()}));var _=function e(){var n=null;t.millis=Hl().diff(t.startTime);var i=t.millis%1e3;if(t.endTimeAttr&&(n=t.endTimeAttr,t.millis=Hl(t.endTime).diff(Hl()),i=t.interval-t.millis%1e3),t.countdownattr&&(n=t.countdownattr,t.millis=1e3*t.countdown),t.millis<0)return t.stop(),t.millis=0,p(),void(t.finishCallback&&t.$eval(t.finishCallback));p(),t.timeoutId=we()((function(){e(),t.$apply()}),t.interval-i),t.$emit("timer-tick",{timeoutId:t.timeoutId,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days}),t.countdown>0?t.countdown--:t.countdown<=0&&(t.stop(),t.finishCallback&&t.$eval(t.finishCallback)),null!==n&&(t.progressBar=c.calculateProgressBar(t.startTime,t.millis,t.endTime,t.countdownattr),100===t.progressBar&&(t.displayProgressActive=""))};function p(){var e;void 0!==i.startTime&&(t.millis=Hl().diff(Hl(t.startTimeAttr))),e=d.getTimeUnits(t.millis),t.maxTimeUnit&&"day"!==t.maxTimeUnit?"second"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3),t.minutes=0,t.hours=0,t.days=0,t.months=0,t.years=0):"minute"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4),t.hours=0,t.days=0,t.months=0,t.years=0):"hour"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5),t.days=0,t.months=0,t.years=0):"month"===t.maxTimeUnit?(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24%30),t.months=Math.floor(t.millis/36e5/24/30),t.years=0):"year"===t.maxTimeUnit&&(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24%30),t.months=Math.floor(t.millis/36e5/24/30%12),t.years=Math.floor(t.millis/36e5/24/365)):(t.seconds=Math.floor(t.millis/1e3%60),t.minutes=Math.floor(t.millis/6e4%60),t.hours=Math.floor(t.millis/36e5%24),t.days=Math.floor(t.millis/36e5/24),t.months=0,t.years=0),t.secondsS=1===t.seconds?"":"s",t.minutesS=1===t.minutes?"":"s",t.hoursS=1===t.hours?"":"s",t.daysS=1===t.days?"":"s",t.monthsS=1===t.months?"":"s",t.yearsS=1===t.years?"":"s",t.secondUnit=e.seconds,t.minuteUnit=e.minutes,t.hourUnit=e.hours,t.dayUnit=e.days,t.monthUnit=e.months,t.yearUnit=e.years,t.sseconds=t.seconds<10?"0"+t.seconds:t.seconds,t.mminutes=t.minutes<10?"0"+t.minutes:t.minutes,t.hhours=t.hours<10?"0"+t.hours:t.hours,t.ddays=t.days<10?"0"+t.days:t.days,t.mmonths=t.months<10?"0"+t.months:t.months,t.yyears=t.years<10?"0"+t.years:t.years}t.start=function(){t.startTime=t.startTimeAttr?Hl(t.startTimeAttr):Hl(),t.endTime=t.endTimeAttr?Hl(t.endTimeAttr):null,angular.isNumber(t.countdown)||(t.countdown=angular.isNumber(t.countdownattr)&&M()(t.countdownattr,10)>0?M()(t.countdownattr,10):void 0),u(),_(),t.isRunning=!0,t.$emit("timer-started",{timeoutId:t.timeoutId,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})},t.resume=function(){u(),t.countdownattr&&(t.countdown+=1),t.startTime=Hl().diff(Hl(t.stoppedTime).diff(Hl(t.startTime))),_(),t.isRunning=!0,t.$emit("timer-started",{timeoutId:t.timeoutId,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})},t.stop=t.pause=function(){var e=t.timeoutId;t.clear(),t.$emit("timer-stopped",{timeoutId:e,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})},t.clear=function(){t.stoppedTime=Hl(),u(),t.timeoutId=null,t.isRunning=!1},t.reset=function(){t.startTime=t.startTimeAttr?Hl(t.startTimeAttr):Hl(),t.endTime=t.endTimeAttr?Hl(t.endTimeAttr):null,t.countdown=angular.isNumber(t.countdownattr)&&M()(t.countdownattr,10)>0?M()(t.countdownattr,10):void 0,u(),_(),t.isRunning=!1,t.clear(),t.$emit("timer-reset",{timeoutId:t.timeoutId,millis:t.millis,seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days})},a()(n).call(n,"$destroy",(function(){u(),t.isRunning=!1})),t.countdownattr?(t.millis=1e3*t.countdownattr,t.addCDSeconds=function(e){t.countdown+=e,t.isRunning||t.start()},t.$on("timer-add-cd-seconds",(function(e,n){t.addCDSeconds(n)})),t.$on("timer-set-countdown-seconds",(function(e,n){t.isRunning||t.clear(),t.countdown=n,t.millis=1e3*n,p()}))):t.millis=0,p(),void 0!==t.autoStart&&!0!==t.autoStart||t.start()}]}}]).directive("timerControls",(function(){return{restrict:"EA",scope:!0,controller:["$scope",function(e){e.timerStatus="reset",e.$on("timer-started",(function(){e.timerStatus="started"})),e.$on("timer-stopped",(function(){e.timerStatus="stopped"})),e.$on("timer-reset",(function(){e.timerStatus="reset"})),e.timerStart=function(){e.$broadcast("timer-start")},e.timerStop=function(){e.$broadcast("timer-stop")},e.timerResume=function(){e.$broadcast("timer-resume")},e.timerToggle=function(){switch(e.timerStatus){case"started":e.timerStop();break;case"stopped":e.timerResume();break;case"reset":e.timerStart()}},e.timerAddCDSeconds=function(t){e.$broadcast("timer-add-cd-seconds",t)}}]}}));var Vl={zh_CN:{y:"年",mo:"个月",w:"周",d:"天",h:"小时",m:"分钟",s:"秒",ms:"毫秒",decimal:"."}};function Yl(e){var t=function(e,n){return function(e,t){var n,i,o;e=Math.abs(e);var a=t.languages[t.language]||Vl[t.language];if(!a)throw new Error("No language "+a+".");var l,c,s,d=[];for(n=0,i=t.units.length;n<i;n++)l=t.units[n],c=t.unitMeasures[l],s=n+1===i?e/c:Math.floor(e/c),d.push({unitCount:s,unitName:l}),e-=s*c;var u,_,p=0;for(n=0;n<d.length;n++)if(d[n].unitCount){p=n;break}if(t.round)for(n=d.length-1;n>=0&&((o=d[n]).unitCount=Math.round(o.unitCount),0!==n);n--)_=d[n-1],u=t.unitMeasures[_.unitName]/t.unitMeasures[o.unitName],(o.unitCount%u==0||t.largest&&t.largest-1<n-p)&&(_.unitCount+=o.unitCount/u,o.unitCount=0);var m=[];for(n=0,d.length;n<i&&((o=d[n]).unitCount&&m.push(Gl(o.unitCount,o.unitName,a,t)),m.length!==t.largest);n++);if(!m.length)return Gl(0,t.units[t.units.length-1],a,t);if(!t.conjunction||1===m.length)return m.join(t.delimiter);if(2===m.length)return m.join(t.conjunction);if(m.length>2)return r()(m).call(m,0,-1).join(t.delimiter)+(t.serialComma?",":"")+t.conjunction+r()(m).call(m,-1)}(e,Jl({},t,n||{}))};return Jl(t,{language:"zh_CN",delimiter:", ",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},e)}function Gl(e,t,n,i){var o;o=void 0===i.decimal?n.decimal:i.decimal;var a,l=e.toString().replace(".",o),r=n[t];return a="function"==typeof r?r(e):r,l+i.spacer+a}function Jl(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])t.hasOwnProperty(i)&&(e[i]=t[i]);return e}O.a.factory("I18nService",(function(){var e=function(){};return e.prototype.language="zh_CN",e.prototype.fallback="zh_CN",e.prototype.timeHumanizer={},e.prototype.init=function(){this.fallback="zh_CN",this.language=this.fallback,this.timeHumanizer=Yl({language:this.language,halfUnit:!1})},e.prototype.getTimeUnits=function(e){var t=1e3*Math.round(e/1e3),n={};return void 0!==this.timeHumanizer?n={millis:this.timeHumanizer(t,{units:["ms"]}),seconds:this.timeHumanizer(t,{units:["s"]}),minutes:this.timeHumanizer(t,{units:["m","s"]}),hours:this.timeHumanizer(t,{units:["h","m","s"]}),days:this.timeHumanizer(t,{units:["d","h","m","s"]}),months:this.timeHumanizer(t,{units:["mo","d","h","m","s"]}),years:this.timeHumanizer(t,{units:["y","mo","d","h","m","s"]})}:console.error('i18nService has not been initialized. You must call i18nService.init("en") for example'),n},e})),O.a.factory("progressBarService",(function(){var e=function(){};return e.prototype.calculateProgressBar=function(e,t,n,i){var o=0;return t/=1e3,o=100-(o=null!==n?100*t/Hl(n).diff(e,"seconds"):100*t/i),(o=Math.round(10*o)/10)>100&&(o=100),o},new e}));n("+E5y");O.a.directive("basicItemTree",[function(){return{template:'<style>\n    .hc-tree-grid-row-more {\n        padding: 5px;\n        line-height: 20px;\n        margin-left: 180px;\n    }\n</style>\n<hc-tree-grid data-list="list" data-options="options" data-template="basicItemGridRow"></hc-tree-grid>',restrict:"E",scope:{list:"=",options:"="},controller:["$scope",function(e){e.basicItemGridRow=n("wWDB")}]}}]),O.a.directive("basicItemGrid",[function(){var e=n("wWDB");return{template:'<div ng-sortable="sortable_config" ng-if="list&&options" ng-init="init()">\n                        <div ng-click="node_select($event,_node)" ng-repeat="_node in list track by _node.id">\n                            '.concat(e,"\n                        </div>\n                    </div>"),restrict:"E",scope:{list:"=",options:"="},controller:["$scope",function(e){e.init=function(){e.sortable_config={group:{name:"basic_item_grid_sort"},disabled:e.options.disabled,animation:150,onSort:function(t){var n;e.options&&st()(e.options)&&st()(n=e.options).call(n,t.models)}}},e.node_select=function(t,n){t.stopPropagation(),e.options.selected!=n&&(e.options.selected=n,e.$emit("tree-node-selected",n))}}]}}]);n("I+zC");O.a.controller("HourMinuteSelectorPanelController",["contextService","$scope","$timeout",function(e,t,i){var o=n("iQKG");t.init=function(){i((function(){t.hour_scroll=new o("#hour-list",{scrollY:!0,mouseWheel:!0,click:!0}),t.minute_scroll=new o("#minute-list",{scrollY:!0,mouseWheel:!0,click:!0});var e=angular.element("#hour-item-"+t.hour)[0],n=angular.element("#minute-item-"+t.minute)[0];t.hour_scroll.scrollToElement(e,300),t.minute_scroll.scrollToElement(n,300)}),500),t.hour_list=[];for(var e=0;e<24;e++)e<10?t.hour_list.push("0"+e.toString()):t.hour_list.push(e.toString());t.minute_list=[];for(var n=0;n<60;n++)n<10?t.minute_list.push("0"+n.toString()):t.minute_list.push(n.toString());if(t.model=t.params.model,t.model){var a=t.model.split(":");t.hour=a[0],t.minute=a[1]}else t.hour="00",t.minute="00"},t.onHourClick=function(e,n){var i=angular.element(n.target)[0];t.hour!==e&&t.hour_scroll.scrollToElement(i,300),t.hour=e,t.$dialog.notify_data(t.hour+":"+t.minute)},t.onMinuteClick=function(e,n){var i=angular.element(n.target)[0];t.minute!==e&&t.minute_scroll.scrollToElement(i,300),t.minute=e,t.$dialog.notify_data(t.hour+":"+t.minute)}}]);var Xl={controller:"HourMinuteSelectorPanelController",template:n("9+eV"),mask:!1,size:"auto-size",height:280,width:260,maskClose:!0};O.a.directive("hcInputHourMinute",["$filter",function(e){return{restrict:"EA",template:n("894O"),scope:{options:"=",model:"=ngModel",placeholder:"@"},controller:["$scope","$rootScope","$filter","$hcDialog",function(e,t,n,i){e.init=function(){e.showIcon="icon-hcm-clock"},e.onClick=function(t){e.options&&n("valueToFunc")(e.options.readOnly)()||i.getDialog(Xl).anchor(angular.element(t.target).closest("hc-input-hour-minute")).show({model:e.model}).then((function(e){}),(function(){}),(function(t){e.model=t}))},e.mouseEnter=function(){e.showIcon="icon-hcm-delete"},e.mouseLeave=function(){e.showIcon="icon-hcm-clock"},e.clearInput=function(){"icon-hcm-clock"!==e.showIcon&&(e.model=null)},e.$watch("model",(function(t,n){t!==n&&e.options.change&&e.options.change(e,e.model,e.model)}))}]}}]);var Ql=n("1yxs"),Zl=n.n(Ql),er=(n("K2GO"),function(){function e(e,t,n,i,o,l){var r;this.$scope=e,this.$filter=t,this.$element=n,this.componentDefaultService=i,this.ocLazyLoad=o,this.$rootScope=l,this.loaded=!1,this.client=window.client,this.sliderOptions={showSelectionBar:!0,hideLimitLabels:!0,onChange:a()(r=this.valueOnchange).call(r,this)}}return e.prototype.$onInit=function(){var e=this,t=this;this.ocLazyLoad.load(["static/resources/lib/angularjs-slider/dist/rzslider.js","static/resources/lib/angularjs-slider/dist/rzslider.css"]).then((function(){return Object(Pt.c)(e,void 0,void 0,(function(){var e,n,i=this;return Object(Pt.e)(this,(function(o){var a;switch(o.label){case 0:return this.loaded=!0,[4,this.componentDefaultService.setComponentDefault(this.model,"hc-slider",this.options)];case 1:return e=o.sent(),this.$scope.model=this.$filter("isValidValue")(e)?e:this.model,this.model=this.$scope.model=this.$scope.model?this.$scope.model:this.options.floor||0,n={},g()(a=["foor","ceil","step","precision","showTicks","withInput"]).call(a,(function(e){i.options[e]&&(n[e]=i.$filter("valueToFunc")(i.options[e])())})),this.sliderOptions=Object(Pt.a)(Object(Pt.a)(Object(Pt.a)(Object(Pt.a)({},this.sliderOptions),this.options),n),{readOnly:this.sliderOptions.readOnly}),we()((function(){t.$scope.$broadcast("rzSliderForceRender")})),[2]}}))}))})),this.$scope.$watch("$ctrl.model",(function(t){(t||0===t)&&(e.$scope.model=t)})),this.$scope.$watch((function(){return t.$filter("valueToFunc")(e.options.readOnly)()}),(function(e,n){t.sliderOptions.readOnly=!!e,t.$scope.$broadcast("rzSliderForceRender")}))},e.prototype.valueOnchange=function(){if(!this.$filter("valueToFunc")(this.options.readOnly)()){var e=Ni()(this.model);this.model=this.$scope.model,this.options.change&&this.options.change(this.options,this.model,this.$scope,e)}},e.prototype.onBlur=function(){var e,t=Fe()(e=this.$element).call(e,".slider-with-input")[0].value;t>this.options.ceil&&this.changeAndShowTip("max"),t<this.options.floor&&this.changeAndShowTip("min")},e.prototype.changeAndShowTip=function(e){var t="本字段";"NaN"!==E()(this.options.ceil).toString()&&(t+="最大值为"+this.options.ceil+" "),"NaN"!==E()(this.options.floor).toString()&&(t+="最小值为"+this.options.floor),this.model=null,this.$scope.model=this.options.floor,this.$rootScope.show_warning(t,"",2e3)},e.$inject=["$scope","$filter","$element","componentDefaultService","$ocLazyLoad","$rootScope"],e}());window.app.component("hcSlider",{bindings:{model:"=ngModel",options:"<?"},controller:er,template:Zl.a}),O.a.directive("hcImg",[function(){return{restrict:"EA",template:n("ySMr"),scope:{options:"=",key:"=",label:"=",model:"=ngModel"},controller:["formStructureService","$scope","$hcDialog","hcUploadFile","attachService","$element","$rootScope",function(e,t,n,i,o,a,l){t.init=function(){t.file_list=[],t.model&&(t.file_list=t.model.split(";"))},t.showImg=function(e){var t=[];t.push("/img?type=image&index="+e),l.img_preview(t,0)}}]}}]),n("z7z0"),O.a.factory("$hcPaging",["$filter",function(e){return{createPaging:function(t){var n,i={_page_size_list:w()(n=[10,20,30,50,100,200]).call(n,(function(t){return{value:t,label:t+(e("translate")("/page")||" 条/页")}})),_page_size:20,_total_count:0,_page_count:null,_current_page:M()(t.current_page)||1,onPagingChange:null,onPagingChangeMore:null,template:null,outsideCanRefresh:!0,_is_fetching:!1,is_waitting_show:!1,mobile_more:function(){this._is_fetching||this.current_page>=this.page_count||(this._current_page+=1,this._updateMobile())},_updateMobile:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._is_fetching=!0,this.onPagingChangeMore(t).then((function(){e._is_fetching=!1}))},_canRefresh:function(e){return e!==this._current_page&&1<=e&&e<=this._page_count&&this.outsideCanRefresh},refreshPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._current_page=M()(e),this.onPagingChangeMore?this._updateMobile(!0):this.onPagingChange&&this.onPagingChange()},set current_page(e){if(e=M()(e),this.onPagingChangeMore&&this._canRefresh(e))this._current_page=e,this.onPagingChangeMore();else if(1===e||this._canRefresh(e)){var t;this._current_page=e,null===(t=this.onPagingChange)||void 0===t||t.call(this)}},get current_page(){return this._current_page},set total_count(e){if(void 0!==e){this._total_count=e,this._page_count=Math.ceil(e/this._page_size)}},get total_count(){return this._total_count},set page_size(e){if(void 0!==e){var t=M()(e);t!==this._page_size&&(this._page_size=t,this._page_count=Math.ceil(this._total_count/this._page_size),this.onPagingChange&&this.onPagingChange())}},get page_size(){return this._page_size},get page_count(){return this._page_count},get page_size_list(){return this._page_size_list},set page_size_list(t){var n=this;this._page_size_list=w()(t).call(t,(function(t){return{value:t,label:t+e("translate")("/page")||" 条/页"}})),Pe()(t).call(t,(function(e){return e.value===n._page_size})).length<1&&(this.page_size=t[0].value)},set setPagingInfo(e){e instanceof Object&&o(e)}},o=function(e){var t;g()(t=re()(e)).call(t,(function(t){void 0!==e[t]&&(i[t]=e[t])}))};return o(t),i}}}]),O.a.directive("hcPaging",[function(){return{restrict:"E",scope:{paging:"="},template:n("fSWE"),controller:["$scope",function(e){e.client=client,e.showPageSizeList=!1,e.showCurrentPageList=!1,e.clickPageSizeButton=function(t){null==t||t.stopPropagation(),e.showPageSizeList=!e.showPageSizeList},e.clickCurrentPageList=function(){e.showCurrentPageList=!e.showCurrentPageList},e.hideList=function(){e.showPageSizeList=!1,e.showCurrentPageList=!1},e.onPagingClick=function(t){switch(t){case"first":e.paging.current_page=1;break;case"previous":e.paging.current_page=e.paging.current_page-1;break;case"next":e.paging.current_page=e.paging.current_page+1;break;case"last":e.paging.current_page=e.paging.page_count;break;case"mobile_more":e.paging.mobile_more()}"mobile"===window.client&&angular.element(".model-mobile-page").length>0&&angular.element(".model-mobile-page")[0].scrollTo(0,0)},e.getNumList=function(e){for(var t=[1],n=2;n<=e;n++)t.push(n);return t},e.$on("win_body_click_event",(function(){e.showPageSizeList=!1}))}]}}]),O.a.directive("hcMiniPaging",[function(){return{restrict:"E",scope:{model:"=ngModel"},template:n("49nm"),controller:["$scope",function(e){e.model=e.model||1,e.onPagingClick=function(t){switch(t){case"previous":e.model=M()(e.model)-1;break;case"next":e.model=M()(e.model)+1}}}]}}]);n("6MB7");O.a.directive("attendCalendar",(function(){return{restrict:"E",scope:{config:"="},template:n("FGGk"),controller:["$scope","$filter",function(e,t){function n(n){e.dates=[];var i=new Date,o=t("dateFormat")(new Date,"yyyyMM");e.config.period=n||o,e.config.period!==o&&(i=new Date(e.config.period.replace(/(\d{4})(\d{2})/,"$1/$2/01"))),i.setDate(1);var a=1-i.getDay();i.setMonth(i.getMonth()+1),i.setDate(0);for(var l,r=i.getDate()+6-i.getDay(),c=a;c<=r;c++){var s=new Date(i);s.setDate(c);var d={curr_month:i.getMonth()===s.getMonth(),date:t("dateFormat")(s,"yyyy-MM-dd")};e.config.selectDay===d.date&&(l=d),e.dates.push(d)}if(l)e.cell_select(l);else if(o===e.config.period){var u=(new Date).getDate();e.cell_select(e.dates[u-a])}}e.cell_select=function(t){e.select_item=t,(e.config.cellClick||function(){})(t.date)},e.init=function(){n(e.config.period)},e.$on("refresh_calendar",(function(t,i){i.selectDay&&(e.config.selectDay=i.selectDay),n(i.period||i)}))}]}})),O.a.directive("wfCard",[function(){return{restrict:"EA",scope:{template:"=",form:"=",type:"=",id:"=",wf:"="},template:n("rgqz"),controller:["$scope","contextService",function(e,t){e.$watch("id",(function(t){e.show_content=!1,e.info=JSON.parse(e.form),e.show_content=!0}))}]}}]);var tr=n("Hu0P"),nr=n("DKEN"),ir=(n("Gbzp"),n("z430")),or=n.n(ir);O.a.service("storedAddressSelectorService",["dataService",function(e){return{setStoredAddress:function(t){return e.callHcmOpenApi("recruit.address.set",t,null,!0)},removeStoredAddress:function(t,n){return e.callHcmOpenApi("recruit.address.remove",{city:t,address:n},null,!0)},modifyStoredAddress:function(t){return e.callHcmOpenApi("recruit.address.modify",t,null,!0)},getStoredAddressCity:function(){return e.callHcmOpenApi("recruit.address.get.city",{},null,!0)},getStoredAddressList:function(t){return e.callHcmOpenApi("recruit.address.get.list",{city:t},null,!0)}}}]),O.a.controller("storedAddressSelectorCtrl",["$scope","storedAddressSelectorService","selectorService",function(e,t,n){e.params.search_key=e.params.search_key||"",e.params.city_show=!0,e.operates=[{label:"返回",cancel:!0,func:function(){e.$dialog.dialog_close()}}],"pc"===client&&e.operates.push({label:"新建地址",left:!0,default:!0,func:function(){e.set_address()}}),e.$dialog.operates(e.operates),e.set_address=function(i){var o;i&&(o={province:i.province,city:i.city,address:i.address.split("，")[1],geo:i.geo}),n.selectAddress(o).then((function(n){var o={province:n.province,city:n.city,address:n.city+"，"+n.address,geo:n.geo};i?(o.id=i.id,t.modifyStoredAddress(o)):t.setStoredAddress(o),e.select_address(n.province,n.city,n.city+"，"+n.address,n.geo)}))},t.getStoredAddressCity().then((function(t){e.city_list=t})),e.select_city=function(n){e.current_city=n,e.params.city_show=!e.params.city_show,t.getStoredAddressList("全部"===n?"":n).then((function(t){e.address_list=t}))},e.select_city("全部"),e.select_address=function(t,n,i,o){e.$dialog.resolve_data({province:t,city:n,address:i,geo:o}),e.$dialog.dialog_close()},e.remove_address=function(n){var i;t.removeStoredAddress(e.address_list[n].city,e.address_list[n].address),b()(i=e.address_list).call(i,n,1)}}]);var ar={controller:"storedAddressSelectorCtrl",template:or.a,title:"请选择地址"},lr=n("J23k"),rr=n("2eYA");O.a.service("commonSelectorService",["$hcDialog","dataService","$q","documentPreviewService","weChatService","$rootScope","contextService",function(e,t,n,i,o,a,l){return{treeListSelectorDialog:function(t){return t||(t={}),e.getDialog(tr.a).title(t.title||"选择器").params(t).size("large").show()},categoryListSelectorDialog:function(t){return t||(t={}),e.getDialog(rr.a).params(t).size(t.size||"large").show()},multiTreeListSelectorDialog:function(t){return t||(t={}),t.selectorType=2,e.getDialog("common"===t.tree_type?nr.a:tr.a).params(t).size("large").show()},storedAddressSelector:function(t){return e.getDialog(ar).params(t).size("middle").title("请选择地址").show()},storedAddressSelectorParse:function(e){return e.address},moveEmpLimit:function(e){var i=n.defer();return t.callHcmOpenApi("employee.get.action.by.number",{number:e.number},"session",!0).then((function(t){var n,o,a,l,r,c={};c.position_type=Pe()(n=[{name:"主任职",id:1},{name:"兼职",id:2},{name:"借调",id:3},{name:"挂职",id:4}]).call(n,(function(e){return e.id===t.position_type})),c.in_employeecategory=c.out_employeecategory=w()(o=t.in_employeecategory_list).call(o,(function(e){return e.employee_category})),c.in_positionstatus=w()(a=t.in_positionstatus_list).call(a,(function(e){return e.position_status})),c.out_positionstatus=w()(l=t.out_positionstatus_list).call(l,(function(e){return e.position_status})),c.reason_values=w()(r=t.reason_list).call(r,(function(e){return e.reason})),c.post_operate=t.post_operate,i.resolve(e.key?"id"===e.data_format?t[e.key]:c[e.key]:t)})),i.promise},getPositionType:function(e){var t,i=n.defer();return i.resolve(Pe()(t=[{name:"主任职",id:1},{name:"兼职",id:2},{name:"借调",id:3},{name:"挂职",id:4}]).call(t,(function(t){return t.id===e}))[0]),i.promise},getOrgTreePanel:function(t){return t||(t={}),e.getDialog(lr.a).params(t).size("middle").slideInConfig("pc"!==window.client&&t.inDrawer?"right":null).show()},confirm:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.confirm.apply(this,n)},browserConfirm:function(e){var t=n.defer();return t.resolve(confirm(e.join("\n"))),t.promise},simpleInput:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.simpleInput.apply(this,n)},preViewDocument:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.preViewDocument.apply(this,t)},openNewPage:function(e){var t=!1,n=l.getContext("auth");if(L()(e).call(e,"http")){var i=n.company_setting.company_referer_white_list.split(",");w()(i).call(i,(function(n){ae()(e).call(e,n)&&(t=!0)}))}else t=!0;t?o.openNewPage(e).then((function(e){e&&window.open(e,"_blank")})):a.show_warning("地址未在可信域名中")}}}]);var cr=n("JZM8"),sr=n.n(cr);O.a.service("componentDefaultService",["contextService","$filter","$q","commonTreeLoaderService",function(e,t,n,i){return{setComponentDefault:function(n,o,a){var l,c;if(!((null==a?void 0:a.force_assign)&&~s()(l=["hc-text-area","hc-sys-link"]).call(l,o))&&a.form_mode&&"new"!==a.form_mode)return null;var d,u=e.getContext("auth");if(ae()(c=[null,void 0]).call(c,n))switch(o){case"hc-input-number":t("isValidValue")(a.defaultValue)&&(n=a.defaultValue);break;case"hc-input-number-super":if(t("isValidValue")(a.default_value)){var _=E()(n);n=isNaN(_)?a.default_value:_}break;case"hc-mark-down":case"hc-input-upload-multiple":case"hc-input-json":case"hc-category-list-selector":case"hc-tag-list-selector":t("isValidValue")(a.default)&&(n=a.default);break;case"hc-compose-selector":if(t("isValidValue")(a.default)){var p,m=Fe()(p=a.list).call(p,(function(e){return e.value===a.default})),f={};(null==m?void 0:m.filterMode)?f[m.filterMode]=m.value:f=a.default,n=f}break;case"hc-select":case"hc-super-selector":case"hc-text-area":case"hc-input":case"hc-input-radio":case"hc-input-location":case"hc-slider":t("isValidValue")(a.default)&&(n=t("valueToFunc")(a.default)());break;case"hc-input-checkbox":if(t("isValidValue")(a.default)){var h=t("valueToFunc")(a.default)();(h instanceof Array||(d=h)&&"function"==typeof d.then)&&(n=h)}break;case"hc-tree-list-selector":var g;if(t("isValidValue")(a.default))if(!0===a.default)if("Employee"!==a.selectorModel&&"BaseEmployee"!==a.selectorModel||!u.employee.id){if(ae()(g=["Department","OrgDepartment"]).call(g,a.selectorModel)){var v=u.roles;a.role||(a.role=(a.extra_property||{}).role);var b=a.role in v?v[a.role]:v.manager;(b||[]).length>0&&(n=2===a.selectorType?[b[0].id]:b[0].id)}}else n=2===a.selectorType?[u.employee.id]:u.employee.id;else n=angular.isFunction(a.default)?a.default(a):2===a.selectorType?[a.default]:a.default;break;case"hc-selector-depart":if(t("isValidValue")(a.default))if(!0===a.default){var y,x,k,$;if("new"===a.mode)y=(null==a||null===(x=a.extra_property)||void 0===x?void 0:x.role)||(null==a?void 0:a.role);else y=(null==a||null===(k=a.selectorOptions)||void 0===k||null===($=k[1])||void 0===$?void 0:$.role)||(null==a?void 0:a.role);var O=y in u.roles?u.roles[y]:u.roles.manager;(O||[]).length>0&&(n=O[0].id)}else n=a.default;break;case"hc-standard-tree-selector":if(t("isValidValue")(a.default))if(!0===a.default&&"common"!==a.tree_type)if(a.root_get){n=(0,i.getNewOrgTreeLoader({}).org_tree_loader)(null,!1,sr()(a,["filter_dict","extra_property"])).then((function(e){var t,n=null===(t=e[0])||void 0===t?void 0:t.id;return n?a.multi?[n]:n:null}))}else{var D,C,M=(C=(null==a||null===(D=a.extra_property)||void 0===D?void 0:D.role)||(null==a?void 0:a.role))in u.roles?u.roles[C]:u.roles.manager;(M||[]).length>0&&(n=(null==a?void 0:a.multi)?w()(M).call(M,(function(e){return e.id})):M[0].id)}else n=t("valueToFunc")(a.default)();break;case"hc-input-datetime":if(t("isValidValue")(a.default)){var S=t("timeFormat")(a.format)||"YYYY-MM-DD";if(!0===a.default)n=t("dateFormat")(ka()().toDate(),a.format);else if(a.default<0){var P="YYYY"===S?"years":"YYYY-MM"===S?"months":"days";n=ka()().subtract(-a.default,P).format(S)}else n=angular.isFunction(a.default)?a.default(a):a.default}break;case"hc-datetime-picker-range":if(t("isValidValue")(a.default)){t("timeFormat")(a.format);if(!0===a.default)if(a.range_step&&a.range_unit){var j=a.range_unit,T=a.range_step;if(L()(T).call(T,"+")){var A=r()(T).call(T,1);n=[t("dateFormat")(ka()().startOf("day").toDate(),a.format),t("dateFormat")(ka()().subtract(-A,j).endOf("day").toDate(),a.format)]}else if(L()(T).call(T,"-")){var I=r()(T).call(T,1);n=[t("dateFormat")(ka()().subtract(I,j).startOf("day").toDate(),a.format),t("dateFormat")(ka()().endOf("day").toDate(),a.format)]}else"0"===T&&(n=[t("dateFormat")(ka()().month(ka()().month()).startOf(j).toDate(),a.format),t("dateFormat")(ka()().month(ka()().month()).endOf(j).toDate(),a.format)])}else n=[t("dateFormat")(ka()().toDate(),a.format),t("dateFormat")(ka()().toDate(),a.format)];else n=angular.isFunction(a.default)?a.default(a):a.default}break;case"hc-selector-employee":t("isValidValue")(a.default)&&u.employee.id&&(n=u.employee.id);break;case"hc-sys-link":case"hc-iframe":t("isValidValue")(a.default)&&(n=a.default)}return n}}}]);n("Errb");O.a.directive("empMini",["$compile",function(e){return{restrict:"EA",template:n("rLiH"),scope:{emp:"="},controller:["$scope","$rootScope",function(e,t){e.init=function(){},e.goToEmp=function(e,n){n.stopPropagation(),t.super_go("emp",{id:e})}}]}}]),n("K5eH"),O.a.factory("empFilterSelector",["$hcDialog","dataService","$q",function(e,t,i){return{getQueryConfig:function(){return t.callHcmOpenApi("emp.get.filter.config",{},null,!0)},getAllFilter:function(e){return t.callHcmOpenApi("common.query.get.all.config.by.key",{key:e},null,!0)},getAllFilterById:function(e,n){return t.callHcmOpenApi("common.query.get.all.config.by.id",{id:n},null,!0)},getAllFilterConfigById:function(e,n){return t.callHcmOpenApi("common.query.get.all.config.by.id",{object_id:n},null,!0)},getDefaultFilter:function(e){var n,o=i.defer();return t.callHcmOpenApi("common.query.get.all.config.by.key",{key:e},null,!0).then((function(e){w()(e).call(e,(function(e){e.default&&(n=e)})),o.resolve(n)})),o.promise},deleteFilter:function(e){return t.callHcmOpenApi("common.query.delete.config.by.key",e,null,!0)},batchDeleteFilter:function(e){return t.callHcmOpenApi("common.query.delete.config.by.key.batch",e,null,!0)},saveFilter:function(e){return t.callHcmOpenApi("common.query.save.config.by.key",{key:e.key,info:e.info},null,!0)},saveDefaultFilter:function(e){return t.callHcmOpenApi("common.query.save.default.config.by.key",e,null,!0)},empFilterName:function(t){return e.getDialog({controller:"empFilterNameCtrl",template:n("tCJr")}).params(t).size("small").show()},getEmpConfig:function(){return t.callHcmOpenApi("emp.information.schema.get.config",{},null,!0)},getDisplayList:function(e){return{config:e=w()(e).call(e,(function(e){var t,n,i={name:e.name,category:e.category};return i.fields=Pe()(t=e.fields).call(t,(function(e){return 0!=e.display})),i.fields=w()(n=i.fields).call(n,(function(e){return{key:e.key,name:e.name,permit:!0,fix:/(employee_id.name|empbasicinfo#name)/.test(e.key)}})),i}))}},empAdvancedQuery:function(t){var i={key:(t=t||{}).key||"emp_advance_filter",unNecessary:t.unNecessary,advance_filter:t.advance_filter,condition_list:t.condition_list,formula:t.formula,solution_id:t.solution_id};return e.getDialog({controller:"empQueryFilterCtrl",template:n("fGto")}).params(i).size("lager").show()},empDisplaySet:function(t){var i={key:t.key||"emp_display_filter",current_category:t.current_category,solution_meta:t.solution_meta,permitDisplayFilter:t.permitDisplayFilter};return e.getDialog({controller:"empDisplayFilterCtrl",template:n("rica")}).params(i).size("lager").show()}}}]),O.a.controller("empFilterNameCtrl",["contextService","$scope","$rootScope","$hcDataGrid","dataService","$hcDialog","$state","$hcForm",function(e,t,n,i,o,a,l,r){t.init=function(){t.key=t.params.key,t.title=t.params.title,t.$dialog.title(t.title),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]),t.solution_list=[],t.meta=[{key:"name",label:"方案名称",component:"hc-input",options:{placeholder:"请输入方案名称",singleLine:!0,readOnly:!1,required:!0,width:"col-12"}}],t.form=r.createForm("name").$setMeta(t.meta)},t.valid=function(){var e=t.form.$validData();return 1!=e?(a.notify(e),!1):e},t.submit=function(){if(1==t.valid()){var e=t.form.$getData().name,i={key:t.key};o.callHcmOpenApi("common.query.get.all.config.by.key",i,null,!0).then((function(i){var o=!0;i.length>0&&w()(i).call(i,(function(t){t.name==e&&(n.show_warning("方案名称已存在，请更改"),o=!1)})),o&&(t.$dialog.resolve_data(e),t.$dialog.dialog_close())}))}},t.close=function(){t.$dialog.dialog_close()}}]),O.a.controller("empQueryFilterCtrl",["contextService","$scope","$rootScope","$hcDataGrid","dataService","$hcDialog","$state","$hcForm","hcDialogSelector","$timeout","empFilterSelector",function(e,t,n,i,o,a,l,r,c,s,d){t.init=function(){t.initDialog(),t.key=t.params.key,t.condition_list=t.params.condition_list?t.params.condition_list:[],t.formula=t.params.formula?t.params.formula:{content:""},t.solution_id=t.params.solution_id?t.params.solution_id:null,t.solution_data=null,t.solution_list=[],t.solution_meta={key:"solution_select",label:"当前方案",component:"hc-select",options:{placeholder:"",singleLine:!0,readOnly:!1,required:!0,width:"col-3",list:t.solution_list,change:t.solution_change}},t.formula_meta={key:"formula",label:"",component:"hc-text-area",options:{placeholder:"",singleLine:!0,readOnly:!1,required:!0,width:"col-12",rows:2,change:t.formula_change}},t.getQueryMeta(),t.getSolutionList()},t.initDialog=function(){t.dialog_register?t.dialog_register("empQueryFilterCtrl",t):(t.$dialog.title("查询方案"),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]))},t.getQueryMeta=function(){d.getQueryConfig().then((function(e){w()(e).call(e,(function(e,t){e.id=t})),t.meta_list=e}))},t.getSolutionList=function(){d.getAllFilter(t.key).then((function(e){var n;(w()(e).call(e,(function(e){e.label=e.name,e.value=e.id})),t.solution_list=e,t.solution_meta.options.list=t.solution_list,!t.solution_data&&t.solution_id)&&w()(n=t.solution_list).call(n,(function(e){e.id===t.solution_id&&(t.solution_data={name:e.name})}))}))},t.del=function(){t.solution_id&&a.confirm("确定查询方案 "+t.solution_data.name+" ?",[{caption:"确认",func:function(){d.deleteFilter({object_id:t.solution_id}).then((function(){for(var e,i,o=0;o<t.solution_list.length;o++)if(t.solution_list[o].id===t.solution_id){i=o;break}b()(e=t.solution_list).call(e,i,1),n.show_warning("方案删除成功")}))}}])},t.copy=function(){t.validCondition()&&d.empFilterName({title:"方案另存为",key:t.key}).then((function(e){t.saveSolution("new",e)}))},t.save=function(){t.validCondition()&&t.solution_id&&t.saveSolution("modify",t.solution_data.name)},t.saveSolution=function(e,i){t.makeFilter();var o={key:t.key,info:{config:{condition_list:t.condition_list,advance_filter:t.advance_filter,formula:t.formula},name:i}};"modify"===e&&(o.info.id=t.solution_id),d.saveFilter(o).then((function(i){if("new"===e)i.label=i.name,i.value=i.id,t.solution_list.unshift(i),t.solution_id=i.id;else for(var o=0;o<t.solution_list.length;o++)if(t.solution_list[o].id===t.solution_id){t.solution_list[o].config=i.config,t.solution_list[o].default=i.default;break}t.solution_data=i,n.show_warning("方案保存成功")}))},t.solution_change=function(e,n){!n&&t.solution_list.length>0?(t.solution_id=null,t.solution_data=null,t.formula.content="",t.show_formula=!1,t.condition_list=[],t.advance_filter=null):(t.solution_id=n,t.condition_list=[],s((function(){t.refreshSolutionData()}),200))},t.refreshSolutionData=function(){for(var e=0;e<t.solution_list.length;e++)if(t.solution_list[e].id===t.solution_id)return t.condition_list=angular.copy(t.solution_list[e].config.condition_list),t.advance_filter=angular.copy(t.solution_list[e].config.advance_filter),t.show_formula=angular.copy(t.solution_list[e].config.show_formula),t.formula.content=angular.copy(t.solution_list[e].config.formula.content),void(t.solution_data=angular.copy(t.solution_list[e]))},t.addCondition=function(e){var n={key:e.key+"_compare",label:"",component:"hc-select",options:{placeholder:"",singleLine:!1,readOnly:!1,required:!0,width:"col-3",list:[{label:"等于",value:"="},{label:"不等于",value:"!="}]}};switch(e.control_type){case"string":n.options.list.push({label:"包含",value:"like"});break;case"integer":case"date":n.options.list.push({label:"大于",value:">"},{label:"大于等于",value:">="},{label:"小于",value:"<"},{label:"小于等于",value:"<="})}var i={key:e.key+"_value",label:"",options:{label:e.alias,placeholder:"",singleLine:!1,readOnly:!1,required:!0,width:"col-3",returnFormat:"value",getValue:"byValue",control_type:e.control_type}};switch(!0){case/date/g.test(e.control_type):i.component="hc-input-datetime",i.options.format="yyyy-MM-dd";break;case/(link|baseitem|enum)/g.test(e.control_type):i.component="expert_information#name.name"!==e.key?"hc-common-select":"hc-input",i.options.multi=!0,i.options.selectKey=e.category.number+"#"+e.number;break;default:i.component="hc-input",i.options.placeholder="多值之间用逗号隔开"}var o={key:e.key+"_formula",options:{list:[{label:"且",value:"and"},{label:"或",value:"or"}],required:!0,width:"col-3",change:t.formula_refresh}};t.condition_list.push({key:e.key+(new Date).getTime(),field:e,compare:null,value:null,formula:"and",compare_meta:n,value_meta:i,formula_meta:o}),t.formula_operate("add")},t.delCondition=function(e){var n;b()(n=t.condition_list).call(n,e,1),t.formula_operate("del")},t.validCondition=function(){if(!t.params.unNecessary&&0===t.condition_list.length)return n.show_warning("请先选择条件"),!1;for(var e=0;e<t.condition_list.length;e++){if(!t.condition_list[e].formula)return n.show_warning("第 "+(e+1)+" 行的 比较符 不能为空"),!1;if(null==t.condition_list[e].compare||""===t.condition_list[e].compare||void 0===t.condition_list[e].compare)return n.show_warning("第 "+(e+1)+" 行的 比较符 不能为空"),!1}return!0},t.toggleFormula=function(){t.show_formula=!t.show_formula},t.formula_operate=function(e){"add"===e?t.formula.content=t.formula.content+(1===t.condition_list.length?"":" and ")+t.condition_list.length:t.initFormulaContent()},t.initFormulaContent=function(){var e;t.formula={},t.formula.content="",w()(e=t.condition_list).call(e,(function(e,n){t.formula.content+=0===n?n+1:" "+e.formula+" "+(n+1)}))},t.formula_refresh=function(e,n){var i;w()(i=t.condition_list).call(i,(function(i,o){if(e.$parent.$index===o){var a=new RegExp("(or|and)(\\s?\\(?\\s?)("+(o+1)+")","g");t.formula.content=t.formula.content.replace(a,n+"$2$3")}}))},t.formula_change=function(e,n){(n=n.replace(/[^orand()\s\d]/g,"")).replace(/(or|and)\s?\(?\s?(\d)/g,(function(e,n,i){var o=JSON.parse(i)-1;t.condition_list[o]&&(t.condition_list[o].formula=n)}))},t.makeFilter=function(){var e,n=w()(e=t.condition_list).call(e,(function(e){var t,n;if(n={key:e.field.key,op:e.compare,value:e.value},e.value||0===e.value){if(e.value instanceof Array||(e.value=e.value.split(/[，,]/)),"hc-input-datetime"!==e.value_meta.component)switch(n.op){case"=":n.op="in",n.value=e.value;break;case"!=":n.op="not in",n.value=e.value;break;case"like":n.op="or",n.value=w()(t=e.value).call(t,(function(e){return{op:"like",value:"%"+e+"%"}}))}}else n.op="is",n.value=null;return n}));t.advance_filter={filter:n,formatter:t.formula.content}},t.get_submit=function(){if(t.validCondition())return t.formula.content=t.formula.content.replace(/（/g,"("),t.formula.content=t.formula.content.replace(/）/g,")"),t.makeFilter(),{advance_filter:t.advance_filter,condition_list:t.condition_list,formula:t.formula,solution_id:t.solution_id,name:t.solution_data&&t.solution_data.name}},t.submit=function(){var e=t.get_submit();e&&(t.$dialog.resolve_data(e),t.$dialog.dialog_close())},t.close=function(){t.$dialog.dialog_close()}}]),O.a.controller("empDisplayFilterCtrl",["contextService","$scope","$rootScope","$hcDataGrid","dataService","$hcDialog","$state","$hcForm","hcDialogSelector","$timeout","empFilterSelector",function(e,t,n,i,o,a,l,r,c,s,d){t.init=function(){t.currentType="modify",t.solution={},t.solution_meta_list=[],t.initSortConfig(),t.$dialog.title("显示方案"),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]),d.getEmpConfig().then((function(e){t.categoryList=e.data,t.getSolution()}))},t.initSortConfig=function(){t.sortable_config={group:{name:"emp_display_filter_sort"},animation:150,onSort:function(e){var n=t.currentCategory.fields[e.newIndex+1],i=t.currentCategory.fields[e.newIndex-1];n&&1==n.fix&&(t.currentCategory.fields[e.newIndex].fix=!0),i&&0==i.fix&&(t.currentCategory.fields[e.newIndex].fix=!1)}}},t.getSolution=function(){t.params.key?d.getAllFilter(t.params.key).then((function(e){t.solution_meta_list=e||[],t.initSetting()})):(t.solution_meta_list=[],t.initSetting())},t.initSetting=function(){var e,n;(t.solution_meta_list.unshift({name:"初始方案",id:"初始方案",config:d.getDisplayList(t.categoryList).config}),t.params.solution_meta)?t.initStructure(t.params.solution_meta):(w()(e=t.solution_meta_list).call(e,(function(e){e.default&&(n=e)})),t.initStructure(n||t.solution_meta_list[0]))},t.initStructure=function(e){t.solution=JSON.parse(j()(e)),t.changeCategory()},t.changeCategory=function(){var e,n;w()(e=t.solution.config).call(e,(function(e){e.category==t.params.current_category||!t.params.current_category&&e.expand?(n=!0,e.expand=!0,t.currentCategory=e):e.expand=!1})),n||(t.solution.config[0].expand=!0,t.currentCategory=t.solution.config[0])},t.changeProject=function(){var e;t.solution.id&&(t.solution=JSON.parse(j()(Pe()(e=t.solution_meta_list).call(e,(function(e){return e.id===t.solution.id}))[0])),t.changeCategory())},t.newSetting=function(){d.empFilterName({title:"新增方案",key:t.params.key}).then((function(e){t.solution=d.getDisplayList(t.categoryList),t.solution.name=e,t.saveSetting()}))},t.addSetting=function(){d.empFilterName({title:"新增方案",key:t.params.key}).then((function(e){delete t.solution.id,t.solution.name=e,t.saveSetting()}))},t.saveSetting=function(){var e=!t.solution.id,i={key:t.params.key,info:{config:t.solution.config,name:t.solution.name,id:"初始方案"!=t.solution.id?t.solution.id:""}};t.stopOperation&&n.show_warning("正在提交中，请勿重复操作"),t.stopOperation=!0,n.show_waiting(),d.saveFilter(i).then((function(i){var o;(t.stopOperation=!1,n.hide_waiting(),e)?t.solution_meta_list.push(i):t.solution_meta_list=w()(o=t.solution_meta_list).call(o,(function(e){return e.id==i.id&&(e=i),e}));t.solution=JSON.parse(j()(i)),n.show_warning("方案保存成功")}))},t.setDefault=function(){if(t.solution.default)return!1;t.solution.default=!0;var e={key:t.params.key,info:t.solution};t.stopOperation&&n.show_warning("正在设置中，请勿重复操作"),t.stopOperation=!0,n.show_waiting(),d.saveFilter(e).then((function(){var e;t.stopOperation=!1,n.hide_waiting(),t.solution_meta_list=w()(e=t.solution_meta_list).call(e,(function(e){return e.default=e.id===t.solution.id,e})),n.show_warning("设置成功")}))},t.delSetting=function(){a.confirm("确定删除查询方案 "+t.solution.name+" ?",[{caption:"确认",func:function(){t.stopOperation&&n.show_warning("正在删除中，请勿重复操作"),t.stopOperation=!0,n.show_waiting(),d.deleteFilter({object_id:t.solution.id}).then((function(e){var i;t.stopOperation=!1,n.hide_waiting(),t.solution_meta_list=Pe()(i=t.solution_meta_list).call(i,(function(e){return e.id!=t.solution.id})),t.solution=JSON.parse(j()(t.solution_meta_list[0])),n.show_warning("方案删除成功")}))}}])},t.chooseCategory=function(e,n){e.stopPropagation();var i=!n.expand;t.currentCategory&&(t.currentCategory.expand=!1),t.currentCategory=n,t.params.current_category=n.category,t.currentCategory.expand=i},t.addCondition=function(e,t){var n,i,o,a=Pe()(n=e.fields).call(n,(function(e){return!e.hide})).length,l=b()(i=e.fields).call(i,t,1)[0];l.hide=!1,b()(o=e.fields).call(o,a,0,l)},t.operateCondition={fix:function(e,t,n){var i,o,a;e.stopPropagation();var l=b()(i=t.fields).call(i,n,1)[0];l.fix=!l.fix;var r=0;w()(o=t.fields).call(o,(function(e){e.fix&&(r+=1)})),b()(a=t.fields).call(a,r,0,l)},delete:function(e,t,n){var i;e.stopPropagation();var o=b()(i=t.fields).call(i,n,1)[0];o.hide=!0,o.fix=!1,t.fields.push(o)},move_up:function(e,t,n){if(e.stopPropagation(),0!==n){var i,o,a=b()(i=t.fields).call(i,n,1)[0];b()(o=t.fields).call(o,n-1,0,a),t.fields[n].fix&&(t.fields[n-1].fix=!0)}},move_down:function(e,t,n){if(e.stopPropagation(),n!==t.fields.length-1){var i,o,a=b()(i=t.fields).call(i,n,1)[0];b()(o=t.fields).call(o,n+1,0,a),t.fields[n].fix||(t.fields[n+1].fix=!1)}}},t.submit=function(){t.$dialog.resolve_data(t.solution),t.close()},t.close=function(){t.$dialog.dialog_close()}}]),O.a.controller("hcEmpTreeListSelector",["contextService","$scope","$rootScope",function(e,t,n){t.init=function(){var e=t.params?t.params.role:void 0;t.$dialog.title("选择人员"),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]),t.tree_filter={mapping:!1,mini_type:100,role:e||"cm-org-emp",hide_position:!0},t.tree_options={auto_select:!1,searched_selected:!1},t.emp_list=[]},t.$on("tree-node-selected",(function(e,i){100==i.org_type&&(t.isEmpRepeat(i.id)?n.show_warning(i.name+"已存在"):t.emp_list.push(i))})),t.isEmpRepeat=function(e){var n;return ao()(n=t.emp_list).call(n,(function(t){return t.id==e}))},t.close=function(){t.$dialog.dialog_close()},t.submit=function(){t.$dialog.resolve_data(t.emp_list),t.$dialog.dialog_close()},t.del=function(e){var n;b()(n=t.emp_list).call(n,e,1)},t.setCurrentEmp=function(e){t.current_emp_id=e}}]),O.a.controller("hcOrgTreeListSelector",["contextService","$scope","$rootScope",function(e,t,n){t.init=function(){var e=t.params?t.params.role:void 0;t.$dialog.title("选择组织"),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]),t.tree_filter={mapping:!0,mini_type:20,role:e||"cm-org-emp",hide_position:!1},t.tree_options={auto_select:!1},t.org_list=[]},t.$on("tree-node-selected",(function(e,i){20==i.org_type&&(t.isOrgRepeat(i.id)?n.show_warning(i.name+"已存在"):t.org_list.push(i))})),t.isOrgRepeat=function(e){var n;return ao()(n=t.org_list).call(n,(function(t){return t.id==e}))},t.close=function(){t.$dialog.dialog_close()},t.submit=function(){t.$dialog.resolve_data(t.org_list),t.$dialog.dialog_close()},t.del=function(e){var n;b()(n=t.org_list).call(n,e,1)},t.setCurrentOrg=function(e){t.current_org_id=e}}]),n("L+g9"),O.a.directive("hcEmpSelector",["$rootScope","dataService","$hcDialog","hcDialogSelector",function(e,t,i,o){return{restrict:"E",template:n("gG57"),scope:{options:"=",model:"=ngModel"},compile:function(){return function(e){e.selectEmp=function(){o.orgEmpSelector(null,{role:e.options.role||"cm-org-emp",mini_type:100,hide_position:!0},["100"]).then((function(t){e.emp=t,e.model=e.options.returnObj?t:t.id}))},e.$watch("model",(function(t){null!=t&&""!==t&&("object"===f()(t)?(e.emp=t,e.model=e.options.returnObj?e.model:e.model.id):e.getEmp())})),e.getEmp=function(){t.callHcmOpenApi("emp.person.get.emp.info",{employee_id:e.model}).then((function(t){e.emp=t}))}}}}}]);n("VyHM");var dr=n("IbM4"),ur=n.n(dr),_r=function(e){function t(t,n,i){var o=e.call(this,t)||this;return o.dataService=n,o.BaseCRUDService=i,o.initSelectorMapper(),o}return Object(Pt.d)(t,e),t.prototype.initSelectorMapper=function(){var e=this;if(this.multi){var t={org:"root.org.list.get",common:"hcm.model.list"};this.selectorMapper=function(n,i,o,a,l){if("org"===e.tree_type){(null==i?void 0:i.id)&&(i.origin_id=i.id,delete i.id);var r=xa().format("YYYY-MM-DD");i.begin_date={lte:r},i.end_date={gt:r}}return e.dataService.callHcmOpenApi(t[e.tree_type],{filter_str:n,filter_dict:i,page_index:o,page_size:a,extra_property:l,model:e.selectorModel},void 0,void 0,!1).then((function(e){return"list"in e?e:{list:e}}))}}else{var n=this.BaseCRUDService.getModelService(this.selectorModel||this.model,{waiting:!1}),i=ae()(vl.a).call(vl.a,this.selectorModel||this.model);this.selectorMapper=function(e,t,o,a){return void 0===a&&(a=null),this.rootAllSelected&&-1===e?G.a.resolve({id:-1,name:this.rootNodeName||"全部"}):n.getItemInfo(e,t,o,a,i?"session,0.5":void 0)}}},t.$inject=["standardTreeSelectorOptions","dataService","BaseCRUDService"],t}(Il.a);O.a.directive("hcStandardTreeSelector",[function(){return{restrict:"EA",template:ur.a,scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:["$scope","$hcDialog","$filter","componentDefaultService","$controller","dataService","$injector",function(e,t,n,i,o,a,l){return Object(Pt.c)(this,void 0,void 0,(function(){var r;return Object(Pt.e)(this,(function(c){switch(c.label){case 0:return o(vl.b,{$scope:e}),e.options=l.instantiate(_r,{standardTreeSelectorOptions:e.options}),e.mapSelector=function(t){var n;e.fetch.getting?e.fetch.waiting=!0:(e.fetch.getting=!0,e.options.returnFormat&&"id"!==e.options.returnFormat?"object"===e.options.returnFormat?(e.fetch.getting=!1,e.selector_label="name"in e.model?e.model.name:e.model,e.options.change&&e.options.change(e,e.model,t)):(e.fetch.getting=!1,e.selector_label=e.model,e.options.change&&e.options.change(e,e.model,t)):(n=e.options).selectorMapper.apply(n,Object(Pt.h)(e.getMapperParams())).then((function(n){a.callHcmOpenApi("get_tree_id_batch",{dept_ids:[null==n?void 0:n.id]},"session,1",!1,!1).then((function(i){var o;for(var a in i)o=i[a];if(e.options.originObject=n,te()(e.options.originObject,{t_id:o}),e.options.change&&e.options.change(e,e.model,n,t),n)if(angular.isFunction(e.options.individual_name))e.model&&(e.selector_label=e.options.individual_name(n));else{var l=e.options.individual_name||"name";e.model&&(e.selector_label=l in n?n[l]:n)}}))})).finally((function(){e.fetch.getting=!1,e.fetch.waiting&&(e.mapSelector(),e.fetch.waiting=!1)})))},[4,i.setComponentDefault(e.model,"hc-standard-tree-selector",e.options)];case 1:return r=c.sent(),e.$apply((function(){n("isValidValue")(r)&&(e.model=r)})),e.onClick=function(t){n("valueToFunc")((e.options||{}).readOnly)()||e.openPanel(lr.a,"middle")},e.openPanel=function(i,o){var a,l,r,c,s=[];e.options.multi?null===(l=null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.originObject)||void 0===l||w()(l).call(l,(function(e){s.push(e.t_id)})):s=null===(c=null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.originObject)||void 0===c?void 0:c.t_id,t.getDialog(i).title(e.options.title||n("translate")("common_selector_dialog_default_title")||i.title).size(o).show(angular.extend(e.options,{type:"system"},{tree_id:s,expand_to_current_node:"pc"===window.client})).then((function(t){var n=function(e,t){return t?"object"===t?e:e[t]:e.id};if(q()(t))if(e.options.originObject=w()(t).call(t,(function(e){return angular.extend({},e||{},{treeParent:null})})),e.options.multi){var i=w()(t).call(t,(function(t){return n(t,e.options.returnFormat)}));e.model=i.length?i:null}else console.error("单选时，返回值不应为列表");else e.options.originObject=angular.extend({},t||{},{treeParent:null}),e.model=n(t,e.options.returnFormat)}))},[2]}}))}))}]}}]);var pr=n("x3YV"),mr=n.n(pr),fr=(n("Mgp2"),n("U/5H"));function hr(e){return{createSortableTree:function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{model:i.model,name:i.name,state:i.state,loader:i.loader,selectedList:i.selectedList||[],data:i.data,showCheckBox:i.showCheckBox,selected_callback:i.selected_callback,disableSelect:i.disableSelect||!1,class:i.class,iconList:i.iconList,sortableOptions:i.sortableOptions,treeList:i.treeList,getNodeLayer:null!==(e=i.getNodeLayer)&&void 0!==e?e:function(){},nodeCondition:null!==(t=i.nodeCondition)&&void 0!==t?t:function(){},nodeIcon:null!==(n=i.nodeIcon)&&void 0!==n?n:function(){},$init:function(){},$expandNode:function(e){e.expand=!e.expand,this.$setSortable()},$collapseNode:function(e){e.expand=!e.expand},$setSortable:function(){for(var e,t=Fe()(e=this.element).call(e,".tree-node-child"),n=0;n<t.length;n++)new fr(t[n],this.sortableOptions)},$setData:function(e){this.data=e}}}}}window.app.directive("hcSortableTree",[function(){return{restrict:"E",scope:{model:"="},template:mr.a,controller:["$scope","$element",function(e,t){e.init=function(){e.model.element=t,e.model.$setSortable()},e.$watch("model.selectedList",(function(t,n){if(t){var i,o,a=w()(i=e.model.selectedList).call(i,(function(e){return e.key}));null===(o=e.model.data)||void 0===o||w()(o).call(o,(function(e){for(var t in e.selectAll=!0,e.fields)if(e.fields.hasOwnProperty(t)&&!ae()(a).call(a,e.fields[t].key)){e.selectAll=!1;break}}))}}),!0),e.isNodeSelected=function(t){var n,i=w()(n=e.model.selectedList).call(n,(function(e){return e.key}));return ae()(i).call(i,t.key)},e.operateField=function(t,n){var i,o;if(!e.model.disableSelect){var a=w()(i=e.model.selectedList).call(i,(function(e){return e.key}));ae()(a).call(a,t.key)?b()(o=e.model.selectedList).call(o,s()(a).call(a,t.key),1):e.model.selectedList.push(t);var l=n.fields;for(var r in n.selectAll=!0,l){var c,d;if(l.hasOwnProperty(r))ae()(c=w()(d=e.model.selectedList).call(d,(function(e){return e.key}))).call(c,l[r].key)||(n.selectAll=!1)}e.model.selected_callback&&e.model.selected_callback([t],n)}},e.operateFieldBatch=function(t,n){t&&t.stopPropagation(),e.model.disableSelect||(n.selectAll=!n.selectAll,n.selectAll?e.categoryNodeFunc.selectAll(n.fields,e.model.selectedList):e.categoryNodeFunc.unSelectAll(n.fields,e.model.selectedList),e.model.selected_callback&&e.model.selected_callback(n.fields,n))},e.categoryNodeFunc={selectAll:function(e,t){w()(e).call(e,(function(e){var n;ae()(n=w()(t).call(t,(function(e){return e.key}))).call(n,e.key)||t.push(e)}))},unSelectAll:function(e,t){t.delete((function(t){var n;return ae()(n=w()(e).call(e,(function(e){return e.key}))).call(n,t.key)}))}}}]}}]),O.a.factory("$hcSortableTree",hr),hr.$inject=["$filter"];var gr=n("QkVN"),vr=n.n(gr),br=n("JZvF"),yr=n.n(br);n("XYMM");window.app.controller("FilterPanelDialogCtrl",["$rootScope","$scope","$hcDataset","$hcConfigList","$hcConfigListService","columnDefsService","$filter","$hcDialog",function(e,t,n,i,o,a,l,r){t.init=function(){var o,r,c,s,d,u,_,p,m,f,h;(t.is_change=!1,t.$dialog.operates(t.default_operate).title(l("translate")("common_filter_panel_setting_dialog_title")),t.tab_item=t.params.remove_info?[]:[{value:"info",label:l("translate")("common_filter_panel_setting_dialog_filter_criteria")}],t.column_defs=null===(o=t.params)||void 0===o||null===(r=o.column_defs)||void 0===r?void 0:r.children,t.params.selector_flag||(null===(c=t.column_defs)||void 0===c?void 0:c.length)||t.params.remove_list)||b()(f=t.tab_item).call(f,0,0,{value:"list",label:l("translate")("common_filter_panel_setting_dialog_list_fields")});(t.params.setSort&&t.tab_item.push({value:"sort",label:"排序条件"}),t.selected_list=angular.copy(t.params.selected_list),t.selected_list.list=Pe()(s=t.selected_list.list||[]).call(s,(function(e){return!l("valueToFunc")(e.hide)()})),t.dataset={},t.config_model={},t.complete_fields={list:[],info:[],sort:[]},g()(d=["info","list","sort"]).call(d,(function(o){var a,r="sort"===o?"list":o;w()(a=angular.copy(t.params.complete_fields)).call(a,(function(e){var n,i,a;(null===(n=e[r+"_fields"])||void 0===n?void 0:n.length)&&t.complete_fields[o].push({key:e.key,name:e.name,fields:w()(i=Pe()(a=e[r+"_fields"]).call(a,(function(e){return!l("valueToFunc")(e.hide)()}))).call(i,(function(t){return t.category_name=e.name,t}))})})),t.dataset[o]=n.createDataset({selected_list:t.selected_list[o],data:t.complete_fields[o],checkField:function(t){var n,i=!(null==t||null===(n=t.options)||void 0===n?void 0:n.required);return i||e.show_warning("必填项不能删除；新增请通过元数据实现"),i},selected_callback:function(){t.is_change=!0}}),t.config_model[o]=i.createConfigList({meta:[{key:"category_name",width:150,label:l("translate")("common_filter_panel_setting_dialog_model_belongs"),field:["category_name"]},{key:"label",width:100,label:l("translate")("common_filter_panel_setting_dialog_fields"),field:["label"]}],data:t.selected_list[o],show_index:!0,operate_width:"list"===o?160:140,operates:t.operates[o],onSortCallback:function(){t.is_change=!0}})})),t.search_data={list:null===(u=t.config_model.list)||void 0===u?void 0:u.data,info:null===(_=t.config_model.info)||void 0===_?void 0:_.data,sort:null===(p=st()(t.config_model))||void 0===p?void 0:p.data},null===(m=t.column_defs)||void 0===m?void 0:m.length)&&(t.tab_item.push({value:"column_defs",label:l("translate")("common_filter_panel_setting_dialog_multiple_headers")}),a.initColumnDefs(null===(h=t.params.column_defs)||void 0===h?void 0:h.children,t.complete_fields.list),t.sortTree=a.sortTree,t.ableFieldsTree=a.ableFieldsTree);t.current_tab=t.tab_item[0].value},t.delete=function(e,n,i){if(t.config_model[t.current_tab].data!==t.dataset[t.current_tab].selected_list){var a,l,r=Be()(a=t.dataset[t.current_tab].selected_list).call(a,(function(t){return t.key===e.key}));b()(l=t.dataset[t.current_tab].selected_list).call(l,r,1)}o.delete(e,n,i),t.is_change=!0},t.deleteAll=function(){var n;"info"===t.current_tab&&(null===(n=t.selected_list[t.current_tab])||void 0===n?void 0:Fe()(n).call(n,(function(e){return e.options.required})))?e.show_warning("当前筛选条件中有必填项，无法清空！"):(t.selected_list[t.current_tab]=t.dataset[t.current_tab].selected_list=t.config_model[t.current_tab].data=[],t.is_change=!0)},t.operates={info:[{icon:"icon-hcm-edit",func:function(e,t,n){r.simpleInput("修改后的label文本","当前名称为  ".concat(e.label),e.label,!0).then((function(t){e.label=t}))},desc:l("translate")("common_filter_panel_setting_dialog_edit_label")},{icon:"icon-hcm-arrow-cross-up-solid",func:function(e,n,i){o.moveUp(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_move_up"),disabled:function(e){return 0==e.oldIndex}},{icon:"icon-hcm-arrow-cross-down-solid",func:function(e,n,i){o.moveDown(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_move_down"),disabled:function(e){return e.oldIndex==t.selected_list[t.current_tab].length-1}},{icon:"icon-hcm-delete-circle-solid",func:function(e,n,i){t.delete(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_delete"),disabled:function(e){var t;return null==e||null===(t=e.options)||void 0===t?void 0:t.required}}],list:[{icon:"icon-hcm-pin",func:function(e,n,i){n.stopPropagation();var o=s()(i).call(i,e),a=b()(i).call(i,o,1)[0];a.fixed=!a.fixed;var l=0;w()(i).call(i,(function(e){e.fixed&&(l+=1)})),b()(i).call(i,l,0,a),t.is_change=!0},able:function(e){return null==e?void 0:e.fixed},desc:l("translate")("common_filter_panel_setting_dialog_pin_or_unpin")},{icon:"icon-hcm-edit",func:function(e,n,i){r.simpleInput("修改后的label文本","当前名称为  ".concat(e.label),e.label,!0).then((function(n){e.label=n,t.is_change=!0}))},desc:l("translate")("common_filter_panel_setting_dialog_edit_label")},{icon:"icon-hcm-arrow-cross-up-solid",func:function(e,n,i){o.moveUp(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_move_up"),disabled:function(e){var n,i=!1;return w()(n=t.selected_list[t.current_tab]).call(n,(function(t,n){t.key==e.key&&0==n&&(i=!0)})),i}},{icon:"icon-hcm-arrow-cross-down-solid",func:function(e,n,i){o.moveDown(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_move_down"),disabled:function(e){var n,i=!1;return w()(n=t.selected_list[t.current_tab]).call(n,(function(n,o){n.key==e.key&&o==t.selected_list[t.current_tab].length-1&&(i=!0)})),i}},{icon:"icon-hcm-delete-circle-solid",func:function(e,n,i){t.delete(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_delete")}],sort:[{icon:"icon-hcm-arrow-cross-up-solid",func:function(e,n,i){e.type="asc",t.is_change=!0},able:function(e){return"asc"===e.type},desc:l("translate")("common_filter_panel_setting_dialog_asc")},{icon:"icon-hcm-arrow-cross-down-solid",func:function(e,n,i){e.type="desc",t.is_change=!0},able:function(e){return"desc"===e.type},desc:l("translate")("common_filter_panel_setting_dialog_desc")},{icon:"icon-hcm-delete-circle-solid",func:function(e,n,i){t.delete(e,n,i),t.is_change=!0},desc:l("translate")("common_filter_panel_setting_dialog_delete")}]},t.searchKey={key:null,blur:function(e){var n;13===(window.event?e.keyCode:e.which)&&(t.config_model[t.current_tab].data=Pe()(n=angular.copy(t.search_data[t.current_tab])).call(n,(function(e){var n;return ae()(n=e.label).call(n,t.searchKey.key)})))}},t.addCondition=function(e){var n,i=w()(n=t.selected_list[t.current_tab]).call(n,(function(e){return e.key}));ae()(i).call(i,e.key)||t.selected_list[t.current_tab].push(e)},t.addConditionBatch=function(e,n){var i,o;e&&e.stopPropagation(),n.selectAll[t.current_tab]=!n.selectAll[t.current_tab];var a=w()(i=t.selected_list[t.current_tab]).call(i,(function(e){return e.key}));w()(o=n[t.current_tab+"_fields"]).call(o,(function(e){ae()(a).call(a,e.key)||t.selected_list[t.current_tab].push(e)}))},t.changeType=function(e){t.current_tab=e},t.isSelected=function(e){var n,i=w()(n=t.selected_list[t.current_tab]).call(n,(function(e){return e.key}));return ae()(i).call(i,e.key)},t.deleteField=function(e){},t.close=function(){t.$dialog.check_close()},t.setSortIndex=function(e){w()(e).call(e,(function(e,t){e.sequence=10*(t+1)}))},t.submit=function(){var e,n;(null===(e=t.column_defs)||void 0===e?void 0:e.length)&&(a.refreshSortTree(),w()(n=a.column_defs_list).call(n,(function(e){var n,i;if(!ae()(n=w()(i=t.selected_list.list).call(i,(function(e){return e.key}))).call(n,e.key)&&"field"===(null==e?void 0:e.type)){var o,l,r=angular.copy(null===(o=Pe()(l=a.able_fields_list).call(l,(function(t){return t.key===e.key})))||void 0===o?void 0:o[0]),c=r&&a.getAppointAttr(r,["key","label","field","width"]);r&&t.selected_list.list.push(c)}})));t.setSortIndex(t.selected_list.list);var i={list:t.selected_list.list,info:t.selected_list.info,sort:st()(t.selected_list),column_defs:{children:a.column_defs},is_change:t.is_change};t.$dialog.resolve_data(i),t.$dialog.dialog_close()},t.default_operate=t.default_operate||[{label:"清空",func:t.deleteAll,key:"back",left:!1},{label:"返回",func:t.close,key:"back",left:!1},{label:"确定",func:t.submit,key:"submit",default:!0,is_important:!0,left:!1}],t.$watch("selected_list",(function(e,n){var i;e[t.current_tab].selected_list===t.config_model[t.current_tab].data||t.searchKey.key||(t.config_model[t.current_tab].data=e[t.current_tab],"sort"===t.current_tab&&g()(i=st()(t.config_model).data).call(i,(function(e){e.type||(e.type="asc")})))}),!0)}]);var wr={controller:"FilterPanelDialogCtrl",template:yr.a,name:"filterPanel"},xr=n("lq6P");n("GrsS");O.a.controller("QueryPanelController",["$controller","$scope","$filter","$rootScope",function(e,t,n,i){var o,a;if(e(xr.a,{$scope:t,CRUDService:"CommonEmpCRUDService"}),t.operate_list=[],t.tipOptions={mode:"tip",seconds:0},t.component=null===(o=t.params)||void 0===o?void 0:o.component,t.params.advance_operate_list)t.operate_list=t.params.advance_operate_list,t.operate_default=t.operate_list[0].value;else if("hc-input"===t.params.component)switch(t.params.data_type){case"number":case"integer":case"float":case"numeric":t.operate_list=[{label:n("translate")("common_query_panel_equal"),value:"="},{label:n("translate")("common_query_panel_greater"),value:">"},{label:n("translate")("common_query_panel_greater_or_equal"),value:">="},{label:n("translate")("common_query_panel_less"),value:"<"},{label:n("translate")("common_query_panel_less_or_equal"),value:"<="},{label:n("translate")("common_query_panel_not_equal"),value:"!="}],t.operate_default="=";break;case"tags":t.operate_list=[{label:"包含",value:"like"}],t.operate_default="like";break;default:t.operate_list=[{label:n("translate")("common_query_panel_equal"),value:"="},{label:n("translate")("common_query_panel_not_equal"),value:"!="},{label:n("translate")("common_query_panel_like"),value:"like"},{label:n("translate")("common_query_panel_in"),value:"in"}],t.operate_default="="}else t.operate_list=[{label:n("translate")("common_query_panel_equal"),value:"="},{label:n("translate")("common_query_panel_greater"),value:">"},{label:n("translate")("common_query_panel_greater_or_equal"),value:">="},{label:n("translate")("common_query_panel_less"),value:"<"},{label:n("translate")("common_query_panel_less_or_equal"),value:"<="},{label:n("translate")("common_query_panel_not_equal"),value:"!="}],t.operate_default="=";t.params.advance_default_operator&&(t.operate_default=t.params.advance_default_operator),t.info_meta=[{key:"query_type",label:n("translate")("common_query_panel_type"),component:"hc-input-radio",options:{width:"col-12",items_inline:!0,singleLine:!0,required:!0,default:1,hide:"hc-input-datetime"===t.params.component||!ae()(a=["numeric","number","integer","float"]).call(a,t.params.data_type),list:[{name:n("translate")("common_query_panel_single_value"),value:1},{name:n("translate")("common_query_panel_type_range"),value:2}]}},{key:"query_type",label:n("translate")("common_query_panel_type"),component:"hc-super-selector",options:{width:"col-12",icon:"icon-hcm-arrow-down-solid",items_inline:!0,singleLine:!0,required:!0,default:1,no_delete:!0,hide:"hc-input"===t.params.component,change:function(e,i){if("hc-input"!==t.params.component)switch(t.current_query_type=i,i){case 1:!t.base_form.data.value&&(t.base_form.data.value=n("dateFormat")(new Date,t.params.format))}},list:[{name:n("translate")("common_query_panel_current_time"),id:1},{name:n("translate")("common_query_panel_specify_time_period"),id:2},{name:n("translate")("common_query_panel_relative_time_period"),id:3}]}},{key:"operate",name:"值",component:"hc-select",options:{width:"col-4",icon:"icon-hcm-arrow-down-solid",default:t.operate_default,required:function(){var e,n;return"hc-input-datetime"===t.params.component?ae()(e=[1]).call(e,t.base_form.data.query_type):!ae()(n=[2]).call(n,t.base_form.data.query_type)},no_delete:!0,list:t.operate_list,hide:function(){var e,n;return"hc-input-datetime"===t.params.component?!ae()(e=[1]).call(e,t.base_form.data.query_type):ae()(n=[2]).call(n,t.base_form.data.query_type)},change:function(e){var i,o;"范围"==e.selector_label?w()(i=t.base_form.fields).call(i,(function(e){"value"==e.key&&(e.options.placeholder=n("translate")("common_query_panel_input_range_placeholder"))})):w()(o=t.base_form.fields).call(o,(function(e){"value"==e.key&&(e.options.placeholder=n("translate")("common_query_panel_input_placeholder"))}))}}},{key:"value",name:"值",component:t.params.component,options:{width:"col-8",data_type:t.params.data_type,format:t.params.format,default:t.params.default,data_precision:t.params.data_precision,required:function(){var e,n;return"hc-input-datetime"===t.params.component?ae()(e=[1]).call(e,t.base_form.data.query_type):!ae()(n=[2]).call(n,t.base_form.data.query_type)},hide:function(){var e,n;return"hc-input-datetime"===t.params.component?!ae()(e=[1]).call(e,t.base_form.data.query_type):ae()(n=[2]).call(n,t.base_form.data.query_type)}}},{key:"common_period",component:"hc-super-selector",name:"常用区间",options:{icon:"icon-hcm-arrow-down-solid",placeholder:n("translate")("common_query_panel_common_intervals"),list:[{name:n("translate")("common_query_panel_this_week"),id:1},{name:n("translate")("common_query_panel_this_month"),id:2},{name:n("translate")("common_query_panel_this_year"),id:3},{name:n("translate")("common_query_panel_recent_week"),id:4},{name:n("translate")("common_query_panel_recent_month"),id:5},{name:n("translate")("common_query_panel_recent_half_year"),id:6},{name:n("translate")("common_query_panel_recent_year"),id:7}],hide:function(){var e;return"hc-input-datetime"!==t.params.component||!ae()(e=[2]).call(e,t.base_form.data.query_type)},change:function(e,i){var o=n("timeFormat")(t.params.format);switch(i){case 1:t.base_form.data.begin_date=ka()().week(ka()().week()).startOf("week").format(o),t.base_form.data.end_date=ka()().week(ka()().week()).endOf("week").format(o);break;case 2:t.base_form.data.begin_date=ka()().month(ka()().month()).startOf("month").format(o),t.base_form.data.end_date=ka()().month(ka()().month()).endOf("month").format(o);break;case 3:t.base_form.data.begin_date=ka()().year(ka()().year()).startOf("year").format(o),t.base_form.data.end_date=ka()().year(ka()().year()).endOf("year").format(o);break;case 4:t.base_form.data.begin_date=ka()().subtract(1,"weeks").add(1,"days").format(o),t.base_form.data.end_date=ka()().format(o);break;case 5:t.base_form.data.begin_date=ka()().subtract(1,"months").add(1,"days").format(o),t.base_form.data.end_date=ka()().format(o);break;case 6:t.base_form.data.begin_date=ka()().subtract(6,"months").add(1,"days").format(o),t.base_form.data.end_date=ka()().format(o);break;case 7:t.base_form.data.begin_date=ka()().subtract(1,"years").add(1,"days").format(o),t.base_form.data.end_date=ka()().format(o)}}}},{key:"begin_date",name:"开始值",component:t.params.component,options:{data_type:t.params.data_type,data_precision:t.params.data_precision,placeholder:n("translate")("common_query_panel_start_value"),format:t.params.format,width:"col-6",required:function(){var e,n;return"hc-input-datetime"===t.params.component?!ae()(e=[1,3]).call(e,t.base_form.data.query_type):ae()(n=[2]).call(n,t.base_form.data.query_type)},hide:function(){var e,n;return"hc-input-datetime"===t.params.component?ae()(e=[1,3]).call(e,t.base_form.data.query_type):!ae()(n=[2]).call(n,t.base_form.data.query_type)}}},{key:"end_date",name:"结束值",component:t.params.component,options:{data_precision:t.params.data_precision,data_type:t.params.data_type,placeholder:n("translate")("common_query_panel_end_value"),format:t.params.format,width:"col-6",required:function(){var e,n;return"hc-input-datetime"===t.params.component?!ae()(e=[1,3]).call(e,t.base_form.data.query_type):ae()(n=[2]).call(n,t.base_form.data.query_type)},hide:function(){var e,n;return"hc-input-datetime"===t.params.component?ae()(e=[1,3]).call(e,t.base_form.data.query_type):!ae()(n=[2]).call(n,t.base_form.data.query_type)}}},{key:"dynamic_period",name:"动态周期",component:"hc-super-selector",options:{icon:"icon-hcm-arrow-down-solid",placeholder:n("translate")("common_query_panel_dynamic_periodicity"),width:"col-12",list:[{id:"-",name:n("translate")("common_query_panel_before")},{id:"0",name:n("translate")("common_query_panel_current_day")},{id:"+",name:n("translate")("common_query_panel_after")}],change:function(e,n){"0"===n&&t.base_form.data.number&&(t.base_form.data.number="")},required:function(){return"hc-input-datetime"===t.params.component&&3===t.base_form.data.query_type},hide:function(){return"hc-input-datetime"!==t.params.component||3!==t.base_form.data.query_type}}},{key:"number",name:"数值",component:"hc-input",options:{width:"col-6",placeholder:n("translate")("common_query_panel_value"),data_type:"integer",required:function(){return"hc-input-datetime"===t.params.component&&(3===t.base_form.data.query_type&&"0"!==t.base_form.data.dynamic_period)},hide:function(){return"hc-input-datetime"!==t.params.component||3!==t.base_form.data.query_type},readOnly:function(){return"0"===t.base_form.data.dynamic_period}}},{key:"unit",name:"周期类型",component:"hc-super-selector",options:{icon:"icon-hcm-arrow-down-solid",placeholder:n("translate")("common_query_panel_unit_of_time"),width:"col-6",list:[{id:"day",name:n("translate")("common_query_panel_day")},{id:"week",name:n("translate")("common_query_panel_week")},{id:"month",name:n("translate")("common_query_panel_month")},{id:"year",name:n("translate")("common_query_panel_year")}],required:function(){return"hc-input-datetime"===t.params.component&&3===t.base_form.data.query_type},hide:function(){return"hc-input-datetime"!==t.params.component||3!==t.base_form.data.query_type}}}],t.submit=p()(u.a.mark((function e(){var o,a,l,r,c,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.parseData(t.data),e.next=3,t.validFormData(o);case 3:if(e.t1=e.sent,e.t0=!1===e.t1,e.t0){e.next=7;break}e.t0=t.submitting;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:if(!((o.end_date||o.begin_date)&&o.end_date<o.begin_date)){e.next=13;break}return a="hc-input-datetime"===t.params.component?"开始时间不能大于结束时间":"开始值不能大于结束值",i.show_warning(a),e.abrupt("return");case 13:l={},(s=angular.copy(t.base_form.data.value))&&(c=s.toString().replace(/，/g,",").split(",")),d="in"===t.base_form.data.operate?c:angular.isArray(s)?s.join(""):s,"hc-input-datetime"===t.params.component&&(t.singleValue=1===t.base_form.data.query_type?1:2),e.t2="hc-input-datetime"===t.params.component?t.singleValue:t.base_form.data.query_type,e.next=1===e.t2?21:2===e.t2?24:28;break;case 21:return l[n("compareParse")(t.base_form.data.operate,"letter")]="?"===d?null:d,r={id:l,key:t.params.key},e.abrupt("break",28);case 24:return l.gte=t.base_form.data.begin_date,l.lte=t.base_form.data.end_date,r={id:l,key:t.params.key},e.abrupt("break",28);case 28:3===t.base_form.data.query_type&&(r.dynamic={key:t.params.key,options:{range_step:t.base_form.data.dynamic_period+(t.base_form.data.number||""),range_unit:t.base_form.data.unit,format:t.params.format}}),t.$dialog.resolve_data(r),t.$dialog.dialog_close();case 31:case"end":return e.stop()}}),e)}))),t.close=function(){t.$dialog.dialog_close()},t.queryNullValue=function(){var e={};e["neq"===n("compareParse")(t.base_form.data.operate,"letter")?"neq":"eq"]=null,t.$dialog.resolve_data({id:e,key:t.params.key}),t.$dialog.dialog_close()},t.default_operate=[{label:"取消",func:t.close,key:"back",left:!1},{label:n("translate")("common_query_panel_empty"),func:t.queryNullValue,hide:function(){return 1!==t.base_form.data.query_type},key:"null",left:!1},{label:"确定",func:t.submit,key:"submit",default:!0,is_important:!0,left:!1}]}]);var kr=function(e){return{controller:"QueryPanelController",template:n("+YUs"),mask:!1,height:e,width:260,maskClose:!0,name:"query-input-datetime"}},$r=(n("1LhX"),n("+vSj"),n("upCD")),Or=n.n($r),Dr=n("tcdP"),Cr=(n("rZ3M"),n("STz3")),Mr=n.n(Cr),Sr=n("Q8xb"),Er=n.n(Sr),Pr=(n("kdDS"),n("WJ9t")),jr=n.n(Pr),Tr=(n("WgMX"),function(){function e(e,t,n){var i=this;this.info_meta=[],this.initFieldComponent=function(e){var t,n,o,a,l=i,r=angular.copy(e);return r.component=e.options.component||e.component,r.options.no_label=!0,r.options.width="col-6",r.options.singleLine=!0,"pc"===window.client&&(r.options.query=!0),ae()(t=["hc-super-selector","hc-select","hc-standard-tree-selector"]).call(t,r.component)&&(r.options.multi=!0),ae()(n=["hc-tree-list-selector","hc-category-list-selector"]).call(n,r.component)&&(r.options.selectorType=2),void 0===r.options.hasNull&&ae()(o=["hc-super-selector","hc-select"]).call(o,r.component)&&(r.options.hasNull=!0),r.options.required=null===(a=i.conditionRequired)||void 0===a||a,r.options.readOnly=function(){var e,t,n;return ae()(e=["空值",-1]).call(e,null===(n=null===(t=l.model)||void 0===t?void 0:t.data)||void 0===n?void 0:n.operate)},r},this.initConditionComponent=function(e,t){var n,o,l,r,c,s,d,u,_,p,m,f,h,v,b,y,w=[],x=i;if("hc-input"===e.options.component)switch(e.options.data_type){case"number":case"integer":case"float":case"numeric":w=[{label:"等于",value:"等于"},{label:"大于",value:"大于"},{label:"小于",value:"小于"},{label:"大于等于",value:"大于等于"},{label:"小于等于",value:"小于等于"},{label:"不等于",value:"不等于"},{label:"空值",value:-1}],y="等于";break;case"tags":w=[{label:"包含",value:"包含"},{label:"不包含",value:"不包含"}],y="包含";break;default:w=[{label:Pe()(i).call(i,"translate")("common_query_panel_equal"),value:"等于"},{label:Pe()(i).call(i,"translate")("common_query_panel_not_equal"),value:"不等于"},{label:Pe()(i).call(i,"translate")("common_query_panel_like"),value:"包含"},{label:Pe()(i).call(i,"translate")("common_query_panel_not_like"),value:"不包含"},{label:Pe()(i).call(i,"translate")("common_query_panel_greater"),value:"大于"},{label:Pe()(i).call(i,"translate")("common_query_panel_less"),value:"小于"},{label:Pe()(i).call(i,"translate")("common_query_panel_greater_or_equal"),value:"大于等于"},{label:Pe()(i).call(i,"translate")("common_query_panel_less_or_equal"),value:"小于等于"},{label:Pe()(i).call(i,"translate")("common_query_panel_empty"),value:"空值"}],y="包含"}else!ae()(n=["hc-super-selector","hc-select","hc-tree-list-selector","hc-category-list-selector","hc-standard-tree-selector","hc-selector-depart"]).call(n,e.component)||!0!==(null===(_=null==t?void 0:t.options)||void 0===_?void 0:_.multi)&&2!==(null===(p=null==t?void 0:t.options)||void 0===p?void 0:p.selectorType)?ae()(o=["hc-super-selector"]).call(o,e.component)&&ae()(l=[!1,void 0]).call(l,null===(m=null==t?void 0:t.options)||void 0===m?void 0:m.hasNull)||ae()(r=["hc-tree-list-selector","hc-standard-tree-selector","hc-category-list-selector","hc-selector-depart"]).call(r,e.component)&&ae()(c=[!1,void 0]).call(c,null===(f=null==t?void 0:t.options)||void 0===f?void 0:f.multi)?(w=[{label:"等于",value:"等于"},{label:"不等于",value:"不等于"}],y="等于"):"hc-input-datetime"===e.component||"hc-input-datetime"===e.options.component?(w=[{label:"等于",value:"等于"},{label:"大于",value:"大于"},{label:"小于",value:"小于"},{label:"大于等于",value:"大于等于"},{label:"小于等于",value:"小于等于"},{label:"不等于",value:"不等于"},{label:"空值",value:"空值"}],y="等于"):(w=[{label:"等于",value:"等于"},{label:"不等于",value:"不等于"},{label:"空值",value:"空值"}],y="等于"):(w=[{label:"包含于",value:"包含于"},{label:"不包含于",value:"不包含于"}],y="包含于");return i.childInclude&&(ae()(s=["Department","OrgDepartment"]).call(s,(null===(h=e.options)||void 0===h?void 0:h.model)||(null===(v=e.options)||void 0===v?void 0:v.selectorModel))||"hc-selector-depart"===e.component&&ae()(d=[!1,void 0]).call(d,null===(b=null==e?void 0:e.options)||void 0===b?void 0:b.multi))&&w.push({label:"包含下级",value:"包含下级"}),{key:"operate",component:"hc-super-selector",label:e.label,options:{width:"col-6",icon:"icon-hcm-arrow-down-solid",singleLine:!0,default:y,no_delete:!0,list:w,change:a()(u=function(e,t){var n,i,o=this;ae()(n=["空值",-1]).call(n,t)&&g()(i=this.model.fields).call(i,(function(e){var t,n;if(e.key&&"operate"!==e.key)if("hc-input-datetime"===e.component)o.model.data[e.key]=xa().format(Pe()(o).call(o,"timeFormat")(null===(t=e.options)||void 0===t?void 0:t.format)||"YYYY-MM-DD");else switch(null===(n=e.options)||void 0===n?void 0:n.data_type){case"number":case"integer":case"float":case"numeric":o.model.data[e.key]=-1,o.model.data.operate=-1;break;default:o.model.data[e.key]="空值"}else;}))}).call(u,x)}}},this.scope=e,this.hcForm=t,this.filter=n}return e.prototype.$onInit=function(){var e=this.initFieldComponent(this.options),t=this.initConditionComponent(this.options,e);this.info_meta.push(t,e),this.model=this.hcForm.createForm().$setMeta(this.info_meta)},e.$inject=["$scope","$hcForm","$filter"],e}());window.app.component("queryFieldForm",{bindings:{model:"=?ngModel",options:"<?",conditionRequired:"<?",childInclude:"<?"},controller:Tr,template:jr.a});n("McUH");var Ar=function(){function e(e,t,n,o,l,c,d,u,_){var p=this;this.tips='1.点击上方符号可在输入框插入该符号\n 2.数字代表上方表单序号相同的一项\n 3.数字与操作符之间需要有空格分隔开\n 4.代入公式按钮会生成过滤条件的"且"逻辑的公式',this.init=function(){return Object(Pt.c)(p,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return this.initOperate(),this.scope.fieldInfoModel=[],this.scope.selected_items=[],this.scope.mode="simple",this.initFields(),this.initSortableConfig(),this.initFormulaTextArea(),this.scope.params&&(this.scope.params.translateValue=!1!==this.scope.params.translateValue),(null===(e=this.scope.params)||void 0===e?void 0:e.query_str)?[4,this.initAdvanceFormMeta(this.scope.params.query_str)]:[3,2];case 1:return t.sent(),[3,3];case 2:this.initDefaultQueryFields(),t.label=3;case 3:return[2]}}))}))},this.del=function(e,t){var n,i;b()(n=p.scope.selected_items).call(n,t,1),b()(i=p.scope.fieldInfoModel).call(i,t,1),"simple"===p.scope.mode&&p.scope.default_formular(),0===p.scope.selected_items.length&&p.formulaModel&&(p.formulaModel="")},this.initFields=function(){p.scope.dataset={},p.scope.advanceFields={list:[],info:[]},p.allInfoMeta=[];var e=Object(Pt.f)(p.advanceService.initFields(p.scope.params.advanceFields),2),t=e[0],n=e[1];p.allInfoMeta=n,p.scope.advanceFields.info=t,p.meta_object=Pe()(p).call(p,"toObj")(p.allInfoMeta);p.scope.advanceFields.info[0]&&(p.scope.advanceFields.info[0].expand=!0),p.scope.dataset.info=p.hcDataset.createDataset({selected_list:[],data:p.scope.advanceFields.info,mode:"drag",sortable_config:{group:{pull:!1},ghostClass:"drag-item",draggable:".item"},operate_icon:"icon-hcm-arrow-right-circle",selected_callback:function(e){var t;(null==e?void 0:e[0])&&p.scope.selected_items.push(te()({uniKey:Object(i.g)()},null==e?void 0:e[0])),"simple"===p.scope.mode&&!1!==(null===(t=p.scope.params)||void 0===t?void 0:t.condition_required)&&(p.formulaModel?p.formulaModel=p.formulaModel+" 且 "+p.scope.selected_items.length:p.formulaModel=""+p.scope.selected_items.length)}})},this.initDefaultQueryFields=function(){var e,t;(null===(e=p.scope.params)||void 0===e?void 0:e.default_query_fields)&&(g()(t=p.scope.params.default_query_fields).call(t,(function(e){var t=p.advanceService.getFieldByKey(e,p.scope.dataset.info.data);t&&p.scope.selected_items.push(te()({uniKey:Object(i.g)()},t))})),p.scope.default_formular())},this.initSortableConfig=function(){p.scope.sortable_config={group:{name:"field",pull:!1,put:!0},sort:!1,draggable:".item",ghostClass:"drag-item"}},this.initOperate=function(){p.scope.close=function(){p.scope.$dialog.dialog_close()},p.scope.submit=function(){var e,t,n=p.getQueryStr(null===(e=p.scope.params)||void 0===e?void 0:e.translateValue);if(!1!==n){if("object"===(null===(t=p.scope.params)||void 0===t?void 0:t.returnFormat)){var i=p.getQueryStr();p.scope.$dialog.resolve_data({value:i,label:n})}else p.scope.$dialog.resolve_data(n);p.scope.$dialog.dialog_close()}},p.scope.clear=function(){p.scope.fieldInfoModel=[],p.scope.selected_items=[],p.formulaModel=""},p.scope.advance=function(){p.hcDialog.confirm("高级模式下可能会丢失当前字段查询表单, 是否继续?").then((function(){p.scope.$dialog.notify_data(p.scope.params.query_str),p.scope.$dialog.dialog_close()}))},p.scope.default_formular=function(){var e,t,n="";!1!==(null===(t=p.scope.params)||void 0===t?void 0:t.condition_required)?(g()(e=p.scope.selected_items).call(e,(function(e,t){n+=n?" 且 "+(t+1):t+1})),p.formulaModel=n):p.formulaModel=n},p.scope.default_operate=p.scope.default_operate||[{label:"返回",func:p.scope.close,key:"back",left:!0},{label:Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_button_reset"),func:p.scope.clear,key:"clear",left:!0},{label:"确定",func:p.scope.submit,key:"submit",default:!0,is_important:!0,left:!1,disabled:function(){return 0===p.scope.selected_items.length}}],p.scope.$dialog.operates(p.scope.default_operate).title(Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_title")).tip(Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_title_tip"))},this.initAdvanceFormMeta=function(e){return Object(Pt.c)(p,void 0,void 0,(function(){var t,n,o,a,l,r,c,d=this;return Object(Pt.e)(this,(function(u){switch(u.label){case 0:return t=this.$q.defer(),[4,G.a.all(this.advanceService.transferQueryStr(e,this.allInfoMeta,this.scope.advanceFields.info,{translateData:!0,valueParser:this.scope.params.query_str_value_parser,default_query_fields:null===(c=this.scope.params)||void 0===c?void 0:c.default_query_fields}))];case 1:return n=Pt.f.apply(void 0,[u.sent(),3]),o=n[0],a=n[1],l=n[2],g()(o).call(o,(function(e){var t=e.split(".");1===t.length&&t.unshift("master");var n=d.advanceService.getFieldByPath(t[0],e,d.scope.dataset.info.data);n?d.scope.selected_items.push(te()({uniKey:Object(i.g)()},n)):d.hcDialog.notify("初始化找不到"+e+"字段信息, 会导致当前公式逻辑错乱",void 0,void 0,d.scope.default_formular)})),t.resolve(),r=this,this.$timeout((function(){var e;g()(a).call(a,(function(e,t){var n,i,o,a,l,r;if(null!==e){var c;if(ae()(n=["number","integer","float","numeric"]).call(n,null===(a=null===(o=null===(i=d.scope.selected_items)||void 0===i?void 0:i[t])||void 0===o?void 0:o.options)||void 0===a?void 0:a.data_type))g()(c=re()(e)).call(c,(function(t){var n,i,o,a;"operate"===t||(q()(e[t])?e[t][null===(i=null===(n=e[t])||void 0===n?void 0:s()(n))||void 0===i?void 0:i.call(n,"空值")]=-1:(null===(a=null===(o=e[t])||void 0===o?void 0:ae()(o))||void 0===a?void 0:a.call(o,"空值"))&&(e[t]=-1))}));null===(r=null===(l=d.scope.fieldInfoModel)||void 0===l?void 0:l[t])||void 0===r||r.$setData(e)}})),r.formulaModel=r.getAutoFormular()!==l||!1!==(null===(e=d.scope.params)||void 0===e?void 0:e.condition_required)?l:""}),0),[2,t.promise]}}))}))},this.initFormulaTextArea=function(){var e;p.formulaModel="",p.formulaOptions={readOnly:function(){return 0===p.scope.selected_items.length},placeholder:function(){return 0===p.scope.selected_items.length?"请输入公式，有字段此对话框才激活。":Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_example")},showPlaceholder:!0,operate_list:[{key:"且",label:Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_and"),hideIcon:!0,cursorOffset:0},{key:"或",label:Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_or"),hideIcon:!0,cursorOffset:0},{key:"()",label:Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_bracket"),hideIcon:!0,cursorOffset:-1},{key:"default_formular",label:Pe()(p).call(p,"translate")("common_advance_panel_setting_dialog_generate_formulas"),hideIcon:!0,getInsertValue:a()(e=function(){var e;return!1===(null===(e=this.scope.params)||void 0===e?void 0:e.condition_required)?this.getAutoFormular():this.scope.default_formular()}).call(e,p),cursorOffset:0}],styles:{resize:"none"}}},this.getQueryStr=function(e){var t=p.scope.fieldInfoModel;return p.conditionArr=[],g()(t).call(t,(function(t,n){var i,o,a,l,r,c=Object(Pt.f)(p.translateFormValue(t,e),2),s=c[0],d=c[1],u=p.scope.selected_items[n];d=d||(null==u?void 0:u.options.data_type),g()(i=re()(s)).call(i,(function(e){var t;"operate"===e?a=s[e]:(t=Object(Pt.f)([e,p.transEmptyValue(u,s[e])],2),l=t[0],r=t[1])}));var _,m=l?p.getFieldLabel(l):l;(-1!==a&&"空值"!==(null===(o=null==a?void 0:Kl()(a))||void 0===o?void 0:o.call(a))||(a=" 等于 ",r="空值"),"hc-super-selector"===u.component&&!1!==u.options.hasNull&&(r instanceof Array?r=w()(r).call(r,(function(e){return-1===e&&(e="空值"),e})):-1===r&&(r="空值")),void 0!==m&&void 0!==r)?p.conditionArr.push(m+" "+a+" "+p.parseArrayValue(r,d,ae()(_=["in","包含于"]).call(_,a))):p.conditionArr.push(null)})),p.transFormularStr()},this.translateFormValue=function(e,t){var n,i,o,a=e.$getData(),l={};return g()(n=re()(a)).call(n,(function(n){var r,c,s,d,u,_,p,m,f;if(t&&"operate"!==n&&"name"!==(null===(c=null===(r=e.field_metas[n])||void 0===r?void 0:r.options)||void 0===c?void 0:c.returnFormat)&&(null===(d=null===(s=e.field_metas[n])||void 0===s?void 0:s.options)||void 0===d?void 0:d.originObject)){var h,g=(null===(u=e.field_metas[n])||void 0===u?void 0:u.options.individual_name)||"name";if(angular.isArray(null===(p=null===(_=e.field_metas[n])||void 0===_?void 0:_.options)||void 0===p?void 0:p.originObject))i=null===(f=null===(m=e.field_metas[n])||void 0===m?void 0:m.options)||void 0===f?void 0:w()(h=f.originObject).call(h,(function(e){return e[g]})),o="string";else i=a[n];l[n]=i}else l[n]=a[n]})),[l,o]},this.transEmptyValue=function(e,t){var n,i,o=((i={})[e.key]=t,i),a=ie()(n=[]).call(n,e);return(o=p.queryService.transFilterDict(a,o))[e.key]},this.parseArrayValue=function(e,t,n){var i;void 0===n&&(n=!1);var o="";angular.isArray(e)?o="["+w()(e).call(e,(function(e){return p.transValue(e,t)}))+"]":(o=p.transValue(e,t),n&&(o="["+o+"]"));return~s()(i=[null,void 0]).call(i,o)||(o=p.transBoolValue(o)),o},this.transBoolValue=function(e){var t,n;return"number"==typeof e?e:null===(n=(t="boolean"==typeof e?""+e:e).replaceAll)||void 0===n?void 0:n.call(t,"true","True").replaceAll("false","False")},this.transValue=function(e,t){if(null===e)return"空值";if("string"==typeof e&&"空值"===(null==e?void 0:Kl()(e).call(e)))return e;if("string"==typeof e&&!p.validChar(e))throw p.rootScope.show_warning('查询条件值: "'+e+'"包含非法字符'),new Error("字符串校验失败");switch(t){case"string":case"text":case"datetime":case"date":return"'"+e+"'";default:return(null==e?void 0:e.child_include)?e.child_include:e}},this.getFieldLabel=function(e){var t,n;ae()(e).call(e,".")&&(t=(Pe()(n=p.scope.params.advanceFields).call(n,(function(t){return t.key===r()(e).call(e,0,s()(e).call(e,"."))}))[0]||{}).name);return t?t+"#"+p.meta_object[e].label:p.meta_object[e].label},this.transFormularStr=function(){var e,t=(p.formulaModel||p.getAutoFormular()).replaceAll(/\s*/g,"").replaceAll("("," ( ").replaceAll(")"," ) ").replaceAll("（"," ( ").replaceAll("）"," ) ");return!!p.isValid(t)&&w()(e=t.replaceAll("且"," 且 ").replaceAll("或"," 或 ").replaceAll("  "," ").split(" ")).call(e,(function(e){return Bl()(e-0)?e:p.conditionArr[e-1]})).join(" ")},this.validChar=function(e){return/^[\u4e00-\u9fa5\u3000-\u303f\uff08-\uff09\uff1a-\uff1b_a-zA-Z0-9\s\%\/\\\[\]\-\"\.\:\|\+]+$/.test(e)},this.isValid=function(e){return p.checkParentheses(e)&&p.checkFormula(e)&&p.checkFormulaCharacter(e)&&p.checkCondition(e)},this.checkParentheses=function(e){for(var t={"(":")"},n=Object(Pt.h)(Mr()(t)),i=[],o=0;o<e.length;o++)if(t[e[o]])i.push({value:e[o],index:o});else if(!s()(n).call(n,e[o])){var a=i.pop()||{};if(t[a.value]!=e[o])return!p.rootScope.show_warning("组合公式括号不匹配!");if(!p.checkFormula(r()(e).call(e,a.index+1,o)))return!1}return 0===i.length||!p.rootScope.show_warning("组合公式括号不匹配!")},this.checkFormula=function(e){var t=null==e?void 0:Kl()(e).call(e);return(t||!p.rootScope.show_warning("公式(括号内公式)表达式为空"))&&(!L()(t).call(t,"且")&&!L()(t).call(t,"或")&&!be()(t).call(t,"且")&&!be()(t).call(t,"或")||!p.rootScope.show_warning("不合法的公式(或者括号内公式)开头或者结尾!"))&&(!(ae()(t).call(t,"且或")||ae()(t).call(t,"或且")||ae()(t).call(t,"或或")||ae()(t).call(t,"且且"))||!p.rootScope.show_warning("公式表达式逻辑操作符相连"))},this.checkFormulaCharacter=function(e){var t;return!(e&&Fe()(t=e.split("")).call(t,(function(e){var t;return Bl()(e-0)&&!ae()(t=["","(",")","且","或"]).call(t,(null==e?void 0:Kl()(e).call(e))||"")}))&&p.rootScope.show_warning("组合公式中包含非预期字符"))},this.checkConditionForm=function(e){var t;return!0===(null===(t=p.scope.fieldInfoModel[e])||void 0===t?void 0:t.$validData())||!p.rootScope.show_warning('组合公式中序号"'+(e+1)+'"条件不能为空')},this.checkConditionExist=function(e){return p.conditionArr[e]||!p.rootScope.show_warning('组合公式中序号"'+(e+1)+'"条件不存在')},this.checkCondition=function(e){var t;return!Fe()(t=e.replaceAll("且"," and ").replaceAll("或"," or ").replaceAll("  "," ").split(" ")).call(t,(function(e){return e&&!Bl()(e-0)&&(!p.checkConditionExist(e-1)||!p.checkConditionForm(e-1))}))},this.swithMode=function(e){var t;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),"simple"===p.scope.mode?p.scope.mode="advance":p.scope.mode="simple"},this.scope=e,this.hcDataset=t,this.rootScope=n,this.filter=o,this.$timeout=l,this.hcDialog=c,this.queryService=d,this.advanceService=u,this.$q=_,this.init()}return e.prototype.getAutoFormular=function(){var e,t=this,n="";return g()(e=this.scope.fieldInfoModel).call(e,(function(e,i){var o,a=e.$getData();g()(o=re()(a)).call(o,(function(e){"operate"===e&&(!1===t.scope.params.condition_required||1!==re()(a).length)||!1===t.scope.params.condition_required&&!Pe()(t).call(t,"isValidValue")(a[e])||(n+=n?" 且 "+(i+1):i+1)}))})),n},e.$inject=["$scope","$hcDataset","$rootScope","$filter","$timeout","$hcDialog","queryService","advanceService","$q"],e}();window.app.controller("AdvancePanelCtrl",Ar);var Ir={controller:"AdvancePanelCtrl",template:Er.a,name:"advancePanel",tip:"左侧字段点击可添加至右侧查询条件表单"};function Lr(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=Lr(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=Lr(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}O.a.directive("hcQuery",[function(){return{restrict:"E",scope:{model:"="},template:Or.a,controller:["$scope","$rootScope","BaseCRUDService","$hcForm","$hcDialog","$filter","queryService","crudSettingService","contextService","$element","$timeout","planPanelService",function(e,t,n,i,o,l,c,d,u,_,p,m){e.client=window.client,e.tipOptions={mode:"tip",seconds:0},e.init=function(){var t,n,i,o;e.startWatch(),e.more_tips=l("translate")("common_advance_query_hc_title_set_filters"),e.filter_dict={},e.favorite_list_show=!1,e.searchKey={blur:function(t){13===(window.event?t.keyCode:t.which)&&e.model.$search()}},e.queryKey={blur:function(t){13===(window.event?t.keyCode:t.which)&&(e.show_keyword=!1,e.model.$search())}},e.wordSearchKey={blur:function(t){if(13===(window.event?t.keyCode:t.which)){e.complete_fields=angular.copy(e.model.complete_fields);var n,i,o=e.wordSearchKey.str;if(o)w()(n=e.model.complete_fields).call(n,(function(t,n){var i;e.complete_fields[n].list_fields=Pe()(i=t.list_fields).call(i,(function(e){var t,n;return~s()(t=e.label||"").call(t,o)||~s()(n=e.key).call(n,o)}))})),e.complete_fields=Pe()(i=e.complete_fields).call(i,(function(e){return e.list_fields.length}));else e.complete_fields=angular.copy(e.model.complete_fields)}}},e.shouldShowLeftIcon=function(){var t;return e.model.filter_str&&Kl()(t=e.model.filter_str).call(t).length>0},e.clearAndSearch=function(){e.model.filter_str=null,e.model.$search()},e.advanceDialogOptions={selectorModel:e.model.model,state:e.model.state,change:a()(t=function(){return e.model.$search()}).call(t,e.model),icon:"icon-hcm-delete-circle-solid",placeholder:"高级查询 格式参考： a > 2 and b < 3 and (d ='张三' or d = 3)",translateValue:null===(n=e.model.advance_query_config)||void 0===n?void 0:n.translateValue,default_query_fields:null===(i=e.model.advance_query_config)||void 0===i?void 0:i.default_query_fields,condition_required:null===(o=e.model.advance_query_config)||void 0===o?void 0:o.condition_required,selector:function(){return new G.a((function(t){var n;t(w()(n=e.model.trans_complete_fields).call(n,(function(e){var t;return e.info_fields=Pe()(t=e.info_fields||{}).call(t,(function(e){var t,n;return!l("valueToFunc")((null===(t=e.options)||void 0===t?void 0:t.disabled)||(null===(n=e.options)||void 0===n?void 0:n.hide))()})),e})))}))},delCallback:function(){e.show_query_input=!1,e.model.isAdvance=!1}}},e.startWatch=function(){e.query_form_watch&&e.query_form_watch(),e.query_form_watch=e.$watch("model.query_model.data",(function(t,n){var i;t&&t!==n&&("pc"===window.client||e.model.advance_query_config.mobile_outside_query||(null===(i=e.model.filters)||void 0===i?void 0:Fe()(i).call(i,(function(e){var t;return!0===(null===(t=e.options)||void 0===t?void 0:t.topFilter)}))))&&("{}"!==j()(t)||n&&"{}"!==j()(n))&&e.model.$search(void 0!==n)}),!0)};var f=0;!function(e){new ResizeObserver((function(e){var t=e[0].contentRect;t.width!==f&&(f=t.width,console.log("宽度变化".concat(t.width)),h())})).observe(e)}(_[0]);var h=ho()((function(){console.log("重新计算展开"),p((function(){var t,n=Fe()(_).call(_,".query-form"),i=n.height(),o=Fe()(_).call(_,".query-form > .hc-form").height();i<o&&i<192?(e.need_flex=!0,e.need_flex&&(null===(t=e.model)||void 0===t?void 0:t.isExpansion)?(e.contract=!1,e.contract_info=l("translate")("common_advance_query_hc_title_collapse"),n.css("height","auto"),n.css("overflow-y","scroll")):(e.contract=!0,e.contract_info=l("translate")("common_advance_query_hc_title_expand"),n.css("overflow-y","hidden"),n.css("height","48px"))):e.need_flex=o>48}))}),500);e.$watch((function(){var t,n,i;return Pe()(t=(null==e||null===(n=e.model)||void 0===n||null===(i=n.query_model)||void 0===i?void 0:i.fields)||[]).call(t,(function(e){return!l("valueToFunc")((e.options||{}).hide)()})).length}),(function(e,t){h()}),!0),e.refreshPage=function(){var t,n;e.model.display_callback(d.mergeSetting(e.model.all_list_meta,null===(t=e.model.current_plan)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.display_setting,!0),null,!1,e.is_manual,e.model.column_defs)},e.showFavoriteList=function(){e.favorite_list_show=!e.favorite_list_show,e.favorite_list_show?e.model.favorite_list_callback().showFavoriteList():(e.model.favorite_list_callback().closeFavoriteList(),e.refreshPage())},e.$on("favorite_list_show",(function(t,n){e.favorite_list_show=n})),e.togglePanel=function(){e.contract=!e.contract;var t=Fe()(_).call(_,".query-form");if(e.contract){e.contract_info="展开";var n=t[0].scrollTop;n&&t[0].scrollBy({top:-n,behavior:"smooth"}),t.css("height","48px"),t.css("overflow-y","hidden")}else e.contract_info="收起",t.css("height","auto"),t.css("overflow-y","scroll")},e.showFilterPanel=function(){if("pc"===window.client){var t,n,i,a,r=d.mergeSetting(e.model.all_list_meta,(e.model.display_setting||[]).length?e.model.display_setting:e.model.list_meta,!0);o.getDialog(wr).size("large").show({advance_query_config:e.model.advance_query_config,selector_flag:e.model.selector_flag,column_defs:e.model.column_defs,complete_fields:w()(t=e.model.trans_complete_fields).call(t,(function(e){var t;return e.info_fields=Pe()(t=e.info_fields||{}).call(t,(function(e){var t,n;return!l("valueToFunc")((null===(t=e.options)||void 0===t?void 0:t.disabled)||(null===(n=e.options)||void 0===n?void 0:n.hide))()})),e})),selected_list:{list:r,info:Pe()(n=e.model.query_model.fields).call(n,(function(e){return!l("valueToFunc")((e.options||{}).hide)()})),sort:st()(e.model)||[]},setSort:null===(i=u.getContext("auth"))||void 0===i||null===(a=i.company_setting)||void 0===a?void 0:a.query_panel_set_sort,remove_list:"common_model_stat"===e.model.page_state}).then((function(t){var n,i,a,l,r,c=w()(n=t.info).call(n,(function(e){return e.key})),s=t.list;e.model.sort=st()(t);var d,_=Pe()(i=st()(t)).call(i,(function(e){return e.type}));d=0===_.length?e.model.meta_sorts:w()(_).call(_,(function(e){return{key:e.key,type:e.type}})),e.model.display_setting=s,e.query_form_watch&&e.query_form_watch(),g()(a=re()(e.model.query_model.data||{})).call(a,(function(t){ae()(c).call(c,t)||delete e.model.query_model.data[t]}));var p=[];w()(c).call(c,(function(n){var i,o;p.push(vr()({},e.model.model_meta_object[n],{label:Fe()(i=t.info).call(i,(function(e){return e.key===n})).label},{options:{placeholder:Fe()(o=t.info).call(o,(function(e){return e.key===n})).label}}))})),e.model.show_fields=p,e.model.query_model.$setMeta(p),e.model.column_defs=t.column_defs,e.model.isExpansion=!0,(null===(l=u.getContext("auth"))||void 0===l||null===(r=l.company_setting)||void 0===r?void 0:r.save_plan_notify)&&(null==t?void 0:t.is_change)&&o.confirm("是否保存当前方案？").then((function(){e.savePlan()})),e.model.display_callback(s,null,null,null,t.column_defs,d),e.startWatch()}))}};var v=function(){var t,n,i,o,a,r,c,s;return{key:"advance_query_info",model:e.model.model,state:e.model.state,biz_type:e.model.biz_type,current_plan:e.model.current_plan,plan_list:e.model.plan_list||[],config:{description:e.model.description,page_state:e.model.page_state,isAdvancePlan:e.model.isAdvance,filter_dict:Fr({},e.model.query_model.data),filter_str:e.model.filter_str,query_str:e.model.query_str,dynamic_filter_list:e.model.dynamic_filter_list,tree_config:l("valueToFunc")(null===(t=e.model)||void 0===t?void 0:t.tree_config)(),display_setting:(s=e.model.display_setting?e.model.display_setting:e.model.list_meta,w()(s).call(s,(function(e){var t={};return t.key=e.key,t.hide=e.hide,t.fixed=e.fixed,t.sequence=e.sequence,t.display_hide=e.display_hide,t.label=e.label,t}))),show_fields_key:w()(n=e.model.show_fields).call(n,(function(e){return{key:e.key}})),column_defs:e.model.column_defs,isExpansion:null===(i=u.getContext("auth"))||void 0===i||null===(o=i.company_setting)||void 0===o?void 0:o.plan_filter_form_expansion,filter_fields:e.model.query_model.fields,page_size:e.model.paging.page_size,sort:(null===(a=u.getContext("auth"))||void 0===a||null===(r=a.company_setting)||void 0===r?void 0:r.query_panel_set_sort)?st()(e.model):void 0,meta_info:null===(c=e.model.report_model)||void 0===c?void 0:c.meta_info}}};e.savePlan=function(){var t,n,i,o=!!u.getContext("auth").roles.onlyoneowner,a=v();if(m.setPlanExclude(a),null===(t=e.model.current_plan)||void 0===t?void 0:t.id)if((null===(n=e.model.current_plan)||void 0===n?void 0:n.id)&&"shared"===(null===(i=e.model.current_plan)||void 0===i?void 0:i.is_shared)&&!o)m.newPlan(a).then((function(t){e.model.current_plan=t,e.model.$getPlan()}));else{var l;m.editPlan(te()(a,{id:e.model.current_plan.id,name:null===(l=e.model.current_plan)||void 0===l?void 0:l.name}),a.config).then((function(t){e.model.current_plan=t,e.model.$getPlan()}))}else m.newPlan(a).then((function(t){e.model.current_plan=t,e.model.$getPlan()}))},e.planList=function(t){o.getDialog(te()(Dr.a,{width:300})).size("pc"===window.client?"small":null).anchor(angular.element(t.target).closest(".plan")).show(v()).then((function(t){t&&(e.model.current_plan=t,e.model.$refreshQuery(t),e.model.$getPlan())}),null,(function(t){var n;if(e.query_form_watch&&e.query_form_watch(),e.is_manual=!0,"clear"===t)return e.model.query_model.$setMeta(e.model.$getInitFields()).$setData(e.model.default_filter_dict),e.model.show_fields=e.model.query_model.fields,e.model.filter_dict={},e.model.current_plan=null,e.model.display_callback(null,null,!0,e.is_manual,null,e.model.meta_sorts,null,null,null,!0),e.model.display_setting=null,e.model.column_defs=null,e.model.query_str=null,e.model.sort=null,void e.startWatch();if(w()(n=e.model.plan_list).call(n,(function(e){return e.id===t.id&&(e=t),e})),e.model.current_plan=t,e.model.$refreshQuery(t),t){var i;e.model.column_defs=t.config.column_defs,e.model.sort=st()(t.config);var o=null===(i=st()(e.model))||void 0===i?void 0:w()(i).call(i,(function(e){return{key:e.key,type:e.type}}));e.model.trans_query_str=e.model.$transQueryStr(angular.copy(e.model.query_str)),e.model.$getInitFields(t.config.show_fields_key),e.model.display_callback(d.mergeSetting(e.model.all_list_meta,t.config.display_setting,!0),null,!1,e.is_manual,e.model.column_defs,o,null,null,t.config.page_size,!0)}else e.model.display_callback(e.model.list_meta,null,!1,e.is_manual,e.model.column_defs,null,null,null,null,!0);e.startWatch()}))},e.build_query=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" and ";return e?e+n+t:t},e.transValue=function(e,t){switch(t){case"string":case"datetime":case"date":return"'"+e+"'";default:return e.child_include?e.child_include:e}},e.getFieldLabel=function(t,n){var i,o,a;(o="list"===n?l("toObj")(e.model.all_list_meta):l("toObj")(e.model.all_info_meta),ae()(t).call(t,"."))&&(i=(Pe()(a=e.model.complete_fields).call(a,(function(e){return e.key===r()(t).call(t,0,s()(t).call(t,"."))}))[0]||{}).name);return i?i+"#"+o[t].label:o[t].label},e.changeType=function(){var t,n,i;if(e.advance_query_dialog=null===(t=e.model)||void 0===t||null===(n=t.auth)||void 0===n||null===(i=n.company_setting)||void 0===i?void 0:i.advance_query_dialog,e.show_keyword=!1,e.model.isAdvance)e.model.query_str?o.confirm("确认清空高级搜索条件并返回普通模式？").then((function(){e.model.query_str=null,e.model.isAdvance=!e.model.isAdvance})):e.model.isAdvance=!e.model.isAdvance;else{var a,r=e.model.$getFilterDict(),c=null;g()(a=re()(r)).call(a,(function(t){var n=e.getFieldLabel(t,"info"),i=(e.model.range_key_object||{})[t]||t,o=e.model.query_model.field_metas[i].options.data_type;if(angular.isArray(r[t])){var a,s=null;w()(a=r[t]).call(a,(function(t){s=s?s+","+e.transValue(t,o):e.transValue(t,o)})),c=e.build_query(c,n+" in ["+s+"]"," and ")}else{var d,u=e.model.query_model.field_metas[i];if(!u)return;if("hc-selector"===u.component){if(ae()(d=["hc-input-datetime","hc-input"]).call(d,u.options.component)){var _=re()(r[t]);if(2===_.length)g()(_).call(_,(function(i){var a=r[t][i];a=e.transValue(a,o),c=e.build_query(c,n+" "+l("compareParse")(i,"character")+" "+a)}));else{var p=r[t][_[0]];p=e.transValue(p,o),c=e.build_query(c,n+" "+l("compareParse")(_[0],"character")+" "+p)}}}else if("hc-input-datetime"===u.component&&"this_month"===u.options.range_default){var m=re()(r[t]),f=r[t][m[0]];f=e.transValue(f,o),c=e.build_query(c,n+" "+l("compareParse")(m[0],"character")+" "+f)}else c=e.build_query(c,n+" = "+e.transValue(r[t],o))}})),e.model.query_str=c,e.model.isAdvance=!e.model.isAdvance}},e.openAdvanceDialog=function(t){var n;o.getDialog(Ir).size("normal").show({query_str:t,advanceFields:w()(n=e.model.trans_complete_fields).call(n,(function(e){var t;return e.info_fields=Pe()(t=e.info_fields||{}).call(t,(function(e){var t,n;return!l("valueToFunc")((null===(t=e.options)||void 0===t?void 0:t.disabled)||(null===(n=e.options)||void 0===n?void 0:n.hide))()})),e})),all_info_meta:e.model.complete_fields,query_model:e.model.query_model,range_key_object:e.model.range_key_object,translateValue:e.model.advance_query_config.translateValue,query_str_value_parser:e.model.query_str_value_parser,default_query_fields:e.model.advance_query_config.default_query_fields,condition_required:e.model.advance_query_config.condition_required,child_include:e.model.advance_query_config.child_include}).then((function(t){e.model.isAdvance=!0,e.model.query_str=t,e.model.$search(),e.show_query_input=!0}))},e.showKeyword=function(t){t&&t.stopPropagation(),e.show_keyword=!e.show_keyword},e.keyWordContentClick=function(e){e&&e.stopPropagation()},e.$on("win_body_click_event",(function(){e.show_keyword=!1})),e.addKeyWord=function(t,n){t&&t.stopPropagation();var i=e.getFieldLabel(n.key,"list");e.model.query_str=e.model.query_str?e.model.query_str+" "+i+" ":i+" "},e.onSearchClick=function(){var t;e.model.search_callback&&(null===(t=e.model.advance_query_config)||void 0===t?void 0:t.search_click_callback)&&(e.model.search_callback(),Fe()(_).call(_,"input.search").blur())}}]}}]),O.a.factory("$hcQuery",["$hcDialog","$filter","$hcForm","contextService","queryService","componentDefaultService","crudSettingService","$q","$timeout",function(e,t,n,i,o,a,l,c,d){return{create:function(){var d,_;return{all_info_meta:[],all_list_meta:[],complete_fields:[],display_callback:null,list_meta:[],model_meta:[],query_model:{},filters:[],show_fields_key:[],show_fields:[],model_meta_object:{},isAdvance:!1,isAdvancePlan:!1,filter_dict:{},dynamic_filter_list:[],filter_str:null,query_str:null,trans_query_str:null,model:null,state:null,selector_flag:!1,blur_fields:null,advance_query_config:{},type:null,tree_config:{},show_favorite:!1,favorite_list_callback:null,auth:i.getContext("auth"),sort:null,meta_sorts:[],isExpansion:null===(d=i.getContext("auth"))||void 0===d||null===(_=d.company_setting)||void 0===_?void 0:_.plan_filter_form_expansion,$setOptions:function(e){return te()(this,e),this},$setMeta:function(e){var t=this;return w()(e).call(e,(function(e){t.$transMeta(e)})),this},$transMeta:function(n){var i;n.options||(n.options={});var a=n.options;a.placeholder=n.label,a.singleLine=!1,void 0===a.multi&&"hc-super-selector"===n.component&&(a.multi=!0);var l;switch(void 0===a.hasNull&&"hc-super-selector"===n.component&&!(null==(l=a.list)?void 0:Fe()(l).call(l,(function(e){return-1===e.id||-1===e.value})))&&(a.hasNull=!0),"pc"===window.client&&(a.query=!0),"mobile"===window.client&&(a.singleLine=!1),"number"===a.data_type&&(a.number_no_check=!0),this.setSelector=function(i,a,l){var c=this;n.component="hc-selector",i.required&&(i.no_delete=!0),i.component=l,i.dictParams=!0,i.selector=function(o){var s,d,u,_={},p=o.scope.model;p&&(1===re()(p).length?(g()(d=re()(p)).call(d,(function(e){_.operate=t("compareParse")(e,"character"),_.value=p[e]})),_.query_type=1):(g()(u=re()(p)).call(u,(function(e){"gte"===e&&(_.begin_date=p[e]),"lte"===e&&(_.end_date=p[e])})),_.query_type=2));return g()(s=c.dynamic_filter_list).call(s,(function(e){var t,i;e.key===n.key&&(_.query_type=3,_.dynamic_period=r()(t=e.options.range_step).call(t,0,1),_.number=Number(r()(i=e.options.range_step).call(i,1)),_.unit=e.options.range_unit)})),e.getDialog(a()).anchor(angular.element(o.event.target).closest("hc-selector")).show({key:n.key,data:_,format:i.format,data_type:i.data_type,data_precision:i.data_precision,default:i.default,component:l,no_delete:i.no_delete,advance_operate_list:i.advance_operate_list})},i.selectorParse=function(e){if(e.dynamic){var t,n,i=s()(t=w()(n=c.dynamic_filter_list).call(n,(function(e){return e.key}))).call(t,e.dynamic.key);return~i?(angular.extend(c.dynamic_filter_list),c.dynamic_filter_list[i]=e.dynamic):c.dynamic_filter_list.push(e.dynamic),o.setDynamicTime(e.dynamic.options)}var a;return g()(a=c.dynamic_filter_list).call(a,(function(t){var n,i;t.key===e.key&&b()(n=c.dynamic_filter_list).call(n,s()(i=c.dynamic_filter_list).call(i,t),1)})),e.id},i.queryMapper=function(e){var n="";if(1===re()(e).length){var i;g()(i=re()(e)).call(i,(function(i){n=null===e[i]?t("compareParse")(i,"translate")+":空":t("compareParse")(i,"translate")+":"+e[i]}))}else{var o=re()(e);n=e[o[0]]+"~"+e[o[1]]}return n}},n.component){case"hc-input":a.no_trans_query||("pc"===window.client?this.setSelector(a,kr,"hc-input"):(n.component="hc-query-panel",a.singleLine=!1,a.component="hc-input"));break;case"hc-input-number":case"hc-input-label-multi":case"hc-text-area":"pc"===window.client?this.setSelector(a,kr,"hc-input"):(n.component="hc-query-panel",a.singleLine=!1,a.component="hc-input");break;case"hc-input-datetime":a.no_trans_query||("pc"===window.client?this.setSelector(a,kr,"hc-input-datetime"):(n.component="hc-query-panel",a.singleLine=!1,a.component="hc-input-datetime"));break;case"hc-input-radio":n.component="hc-super-selector",w()(i=n.options.list||[]).call(i,(function(e){e.label=e.name}))}},$setFieldOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=angular.copy(t);return w()(n).call(n,(function(t,i){n[i]=e.model_meta_object[t.key||t]})),n},$getInitFields:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return angular.copy(n.length?this.$setFieldOptions(n):r()(e=this.model_meta).call(e,0,this.advance_query_config.remove_info_meta?this.model_meta.length:null!==(t=this.advance_query_config.default_meta_length)&&void 0!==t?t:i))},$initQuery:function(){var e=[this.loader(this.state,this.biz_type,this.append_relations,this.force_refresh)];this.plan_list||e.push(this.$getPlan());var n=this;c.all(e).then(function(){var e=p()(u.a.mark((function e(i){var l,r,c,s,d,_,m,f,h,v,y,x,k,$,O,D,C,M,S,E,P,j,T,A,I,L,F,R,B,U,q,W,z,N;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=[],w()(l=i[0]).call(l,(function(e){"master"===e.key?h.push({key:e.key,info_fields:e.info_fields}):h.push({key:e.key,info_fields:e.info_fields,list_fields:e.list_fields})})),h=n.func_parse?n.func_parse(h):h,v=Fe()(r=i[0]).call(r,(function(e){return"master"===e.key})),Fe()(h).call(h,(function(e){return"master"===e.key})).list_fields=null===(c=v.list_fields)||void 0===c?void 0:w()(c).call(c,(function(e){var t;return e=te()(e,Fe()(t=n.list_meta).call(t,(function(t){return t.key===e.key})))})),w()(s=i[0]).call(s,(function(e){var t;g()(t=re()(e)).call(t,(function(t){var n=Fe()(h).call(h,(function(t){return t.key===e.key}));t in n||(n[t]=e[t])}))})),n.complete_fields=n.advance_query_config.remove_info_meta?[]:h,y=o.transCompleteFields(n.complete_fields,n.filters),x=ro()(y,3),n.trans_complete_fields=x[0],n.all_list_meta=x[1],n.all_info_meta=x[2],k={},"simple"!==n.type&&(k=o.setDefaultPlan(n,i[1]||n.plan_list)),k=o.dealUrlParams(n,k),n.$setOptions(angular.extend(n,k)),n.page_size&&(n.paging._page_size=n.page_size),n.$setMeta(n.all_info_meta),n.model_meta=n.all_info_meta,n.model_meta_object=n.all_info_meta_object=t("toObj")(n.all_info_meta),n.isAdvance=angular.copy(n.isAdvancePlan),$={},O=n.selector_flag?2:3,n.query_model_init_fields=Pe()(d=n.$getInitFields(n.show_fields_key,O)).call(d,(function(e){return e})),"mobile"===window.client&&n.mobile_tree_config&&(n.query_model_init_fields=Pe()(D=n.query_model_init_fields).call(D,(function(e){return e.key!==n.mobile_tree_config.key})),b()(C=n.query_model_init_fields).call(C,0,0,n.mobile_tree_config)),n.filter_dict||(n.filter_dict={}),e.next=28,G.a.all(w()(_=n.query_model_init_fields).call(_,function(){var e=p()(u.a.mark((function e(i){var o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t("valueToFunc")(null==i||null===(o=i.options)||void 0===o?void 0:o.hide)()){e.next=5;break}return e.next=3,a.setComponentDefault(n.filter_dict[i.key],i.component,i.options);case 3:l=e.sent,t("isValidValue")(l)&&($[i.key]=l);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 28:n.default_filter_dict&&g()(M=re()(n.default_filter_dict)).call(M,(function(e){void 0===n.default_filter_dict[e]&&delete n.default_filter_dict[e]})),n.filter_dict=Fr(Fr(Fr(Fr({},$),n.filter_dict),n.reserve_filter_dict),n.default_filter_dict),S=t("toObj")(n.dynamic_filter_list),g()(m=re()(n.filter_dict)).call(m,(function(e){var t,i,a;"hc-input-datetime"===(null===(t=n.all_info_meta_object[e])||void 0===t||null===(i=t.options)||void 0===i?void 0:i.component)&&(null===(a=S[e])||void 0===a?void 0:a.options)&&(n.filter_dict[e]=o.setDynamicTime(S[e].options))})),(E=Fe()(f=n.query_model_init_fields).call(f,(function(e){var t,n;return"hc-selector-depart"===e.component||ae()(t=["OrgDepartment","Department"]).call(t,null===(n=e.options)||void 0===n?void 0:n.selectorModel)})))?("hc-compose-selector"===E.component&&((N=(null===(R=n.filter_dict)||void 0===R||null===(B=R[E.key])||void 0===B?void 0:B.child_include)&&"child_include")&&(null==E||null===(U=E.options)||void 0===U?void 0:Fe()(q=U.list).call(q,(function(e){return e.filterMode===N})))&&(F="child_include"),L=null==E||null===(W=E.options)||void 0===W?void 0:w()(z=W.list).call(z,(function(e){return e.value}))),o.getInChargeOrg(n.filter_dict[E.key],(null===(P=E.options)||void 0===P||null===(j=P.extra_property)||void 0===j?void 0:j.role)||(null===(T=E.options.selectorOptions)||void 0===T||null===(A=T[1])||void 0===A?void 0:A.role)||(null===(I=E.options)||void 0===I?void 0:I.role),L).then((function(e){n.filter_dict[E.key]=F?Ie()({},F,e):e,n.$setFormAndFetchData()}))):n.$setFormAndFetchData();case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},$setFormAndFetchData:function(){var e,t=this,i=w()(e=this.query_model_init_fields).call(e,(function(e){var n,i,o,a;if(e&&t.current_plan&&"{}"!==j()(t.current_plan)&&(null===(n=t.current_plan)||void 0===n||null===(i=n.config)||void 0===i?void 0:i.filter_fields)&&(null===(o=t.current_plan)||void 0===o||null===(a=o.config)||void 0===a?void 0:a.filter_fields.length)>0){var l,r,c=Fe()(l=t.current_plan.config.filter_fields).call(l,(function(t){return t.key===e.key}));return c?vr()(e,{label:c.label},{options:{placeholder:null===(r=c.options)||void 0===r?void 0:r.placeholder}}):c}return e}));this.query_model=n.createForm().$setMeta(i),this.query_model.$setData(angular.copy(this.filter_dict)),this.filter_dict=this.$getFilterDict(),this.filter_dict=o.setQueryDefault(this.query_model),this.show_fields=this.query_model.fields,this.isAdvance&&this.$search();var a,l=this.filter_dict;("pc"===window.client||this.advance_query_config.mobile_outside_query)&&((~s()(a=[void 0,null]).call(a,l)||"{}"===j()(l))&&this.$search(!1));we()((function(){"mobile"===window.client&&!t.advance_query_config.mobile_outside_query&&t.$search()}),250)},$refreshQuery:function(e){var t;if(e){angular.isString(e.config)&&(e.config=JSON.parse(e.config)),this.isAdvancePlan=e.config.isAdvancePlan,this.dynamic_filter_list=e.config.dynamic_filter_list,this.isAdvance=e.config.isAdvancePlan;var n=w()(t=this.$getInitFields(e.config.show_fields_key)).call(t,(function(t){if(t){var n,i=Fe()(n=e.config.filter_fields).call(n,(function(e){return e.key===t.key})),o=i.label,a=i.options;return vr()(t,{label:o},{options:{placeholder:a.placeholder}})}}));this.query_model.$setMeta(n).$setData(Fr(Fr({},this.reserve_filter_dict),e.config.filter_dict)),this.show_fields=this.query_model.fields,this.filter_str=e.config.filter_str,this.query_str=e.config.query_str,this.display_setting=e.config.display_setting,this.isExpansion=e.config.isExpansion||!1,this.isAdvance&&this.$search()}},$refreshQueryForm:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];for(var i in t)t.hasOwnProperty(i)&&(this.query_model.field_metas[i]||n.push(this.all_info_meta_object[i]));this.query_model.$setMeta(this.func_parse(ie()(e=this.query_model.fields).call(e,n))).$setData(angular.extend(this.query_model.data,t))},$search:function(){var e,t,n,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.filter_dict=this.$getFilterDict(),this.trans_query_str=this.$transQueryStr(angular.copy(this.query_str));var a=(null===(e=i.getContext("auth"))||void 0===e||null===(t=e.company_setting)||void 0===t?void 0:t.query_panel_set_sort)?null===(n=st()(this))||void 0===n?void 0:w()(n).call(n,(function(e){return{key:e.key,type:e.type}})):null,r=l.mergeSetting(this.all_list_meta,this.display_setting,!0);this.display_callback(r.length&&this.current_plan?r:null,o,null,null,this.column_defs,a,null,null,null,!0)},$getFilterDict:function(){return o.transFilterDict(this.query_model.fields,angular.copy(this.query_model.data))||{}},$transQueryStr:function(e){if(e)return e.replace(/currentUser\(\)/g,(this.auth.employee||{}).id)},$getPlan:function(){var e=this,t=c.defer();return this.get_plan?l.getAvailablePlan(null,{model:this.model,state:this.state,biz_type:this.biz_type},1,50).then((function(n){e.plan_list=n.list,t.resolve(n.list)})):t.resolve(),t.promise}}}}}]);var Rr,Br,Ur=n("MAKL"),qr=n.n(Ur),Wr=n("Ej2G"),zr=n.n(Wr),Nr=n("nJdR"),Kr=n.n(Nr),Hr=(n("KMDG"),n("TFHr"),n("0YYn")),Vr=n("i5y0"),Yr=n.n(Vr);(Br=Rr||(Rr={})).sum="sum",Br.avg="avg";var Gr=function(){function e(e){this.key="",this.label="",this.field="",this.decimal=2,this.type=Rr.sum,this.pre_load=!1,this.prune(e)}return e.prototype.prune=function(e){var t,n;try{for(var i=Object(Pt.i)(Yr()(e)),o=i.next();!o.done;o=i.next()){var a,l=Object(Pt.f)(o.value,2),r=l[0],c=l[1];ae()(a=re()(this)).call(a,r)&&(this[r]=c)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(),Jr=function(){function e(e){this.key="",this.label="",this.width=0,this.sequence=0,this.align="left",this.prune(e)}return e.prototype.prune=function(e){var t,n;try{for(var i=Object(Pt.i)(Yr()(this)),o=i.next();!o.done;o=i.next()){var a,l,r=Object(Pt.f)(o.value,2),c=r[0];r[1];if(ae()(a=re()(this)).call(a,c))ae()(l=[void 0,null]).call(l,e[c])?delete this[c]:this[c]=e[c]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e}(),Xr=function(){function e(e){this.key="",this.label="",this.options={child_include:!0},this.prune(e,this)}return e.prototype.prune=function(e,t){var n,i;try{for(var o=Object(Pt.i)(Yr()(t)),a=o.next();!a.done;a=o.next()){var l,r,c=Object(Pt.f)(a.value,2),s=c[0];c[1];if(ae()(l=re()(t)).call(l,s))if($.isPlainObject(e[s]))this.prune(e[s],t[s]);else ae()(r=[void 0,null]).call(r,e[s])?delete t[s]:t[s]=e[s]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e}();O.a.directive("hcQueryNew",[function(){return{restrict:"E",scope:{model:"="},template:zr.a,controller:["$scope","$rootScope","BaseCRUDService","$hcForm","$hcDialog","$filter","queryService","crudSettingService","$element","$timeout",function(e,t,n,i,o,a,l,r,c,s){e.client=window.client,e.tipOptions={mode:"tip",seconds:0},e.initOperates=function(){var t=[{key:"toggle",class:function(){return e.contract?"icon-hcm-arrow-down-circle":"icon-hcm-arrow-up-circle"},title:e.contract_info,hide:function(){return!e.need_flex},func:function(t){e.togglePanel(t)}},{key:"set",title:"点击设置方案",icon:"icon-hcm-set",func:function(t){e.model.showFilterPanel(t)},hide:function(){return e.model.advance_query_config.remove_info_meta}},{key:"trans",title:"切换至高级模式",icon:"icon-hcm-changeuser",func:function(t){e.changeType(t)},hide:function(){return e.model.selector_flag}},{key:"plan",title:function(){var t,n;return(null===(t=e.model.current_plan)||void 0===t?void 0:t.name)?"当前方案:"+(null===(n=e.model.current_plan)||void 0===n?void 0:n.name):"查询方案选择"},class:"plan",icon:"icon-hcm-lamp",func:function(t){e.model.openPlanConfig(t)}}];e.operates=Pe()(t).call(t,(function(t){var n;return!ae()(n=e.model.remove_operate_list||[]).call(n,t.key)}))},e.init=function(){e.model.openPlanConfig=function(t){o.getDialog(Dr.a).size("pc"===window.client?"small":null).anchor(angular.element(t.target).closest(".plan")).show({key:"advance_query_info",model:e.model.model,state:e.model.state,biz_type:e.model.biz_type,current_plan:e.model.current_plan,plan_list:e.model.plan_list||[],config:{description:e.model.description,page_state:e.model.page_state,isAdvancePlan:e.model.isAdvance,filter_str:e.model.filter_str,filter_dict:e.model.query_model.data,query_str:e.model.query_str,dynamic_filter_list:e.model.dynamic_filter_list,model_meta:e.model.getCurrentModelMeta()}}).then((function(t){t&&(e.model.current_plan=t,e.model.$refreshQuery(t),e.model.$getPlan())}),null,function(){var t=p()(u.a.mark((function t(n){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.query_form_watch&&e.query_form_watch(),e.is_manual=!0,"clear"!==n){t.next=10;break}return e.model.query_model.$setMeta(e.model.$getInitFields()).$setData(e.model.default_filter_dict),e.model.filter_dict={},e.model.display_callback(null,null,!0,e.is_manual,null,null,null),e.model.current_plan=null,e.model.column_defs=null,e.startWatch(),t.abrupt("return");case 10:return w()(i=e.model.plan_list).call(i,(function(e){return e.id===n.id&&(e=n),e})),e.model.current_plan=n,t.next=14,e.model.$refreshQuery(n);case 14:n?(e.model.column_defs=n.config.model_meta.column_defs,e.model.display_callback(e.model.list_fields,null,!1,e.is_manual,e.model.column_defs,e.model.sort_fields,e.model.stat_fields)):(e.model.query_model.$setMeta(e.model.$getInitFields()).$setData(e.model.default_filter_dict),e.model.display_callback(e.model.list_meta,null,!1,e.is_manual,e.model.column_defs,e.model.sort_fields,e.model.stat_fields)),e.startWatch();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.model.showFilterPanel=p()(u.a.mark((function t(){var n,i,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("pc"!==window.client){t.next=15;break}return t.next=3,l.designMeta({base_object_str:"hcm.dataset",model:e.model.model,state:e.model.state,available_tabs:e.model.available_tabs||["fields","filters","statistics","sorts"],selected_list:{fields:e.model.list_fields||[],filters:e.model.query_model.fields,sorts:e.model.sort_fields,statistics:e.model.stat_fields,categories:e.model.cate_fields||[],column_defs:e.model.column_defs,relations:e.model.relations}});case 3:n=t.sent,e.model.list_fields=n.fields,e.model.sort_fields=n.sorts,e.model.stat_fields=n.statistics,e.query_form_watch&&e.query_form_watch(),e.model.query_model.$setMeta(n.filters),e.model.column_defs=n.column_defs,e.model.cate_fields=n.categories,e.model.display_callback(n.fields,null,null,null,n.column_defs,n.sorts,n.statistics,n.categories),e.startWatch(),t.next=21;break;case 15:return a={list:Pe()(i=e.model.default_filters_meta).call(i,(function(e){return!e.options.hide})),multi:!0,originObject:angular.copy(e.model.show_fields)},t.next=18,o.getDialog({controller:"SelectorPanelController",template:Kr.a,name:"query-more",height:null,width:null,mask:!1,maskClose:!0}).size(null).slideInConfig("right").show(a);case 18:n=t.sent,e.model.show_fields=n,e.model.query_model.$setMeta(n||[]);case 21:return t.abrupt("return",n);case 22:case"end":return t.stop()}}),t)}))),e.initOperates(),e.startWatch(),e.filter_dict={},e.searchKey={blur:function(t){13===(window.event?t.keyCode:t.which)&&e.model.$search()}},e.queryKey={blur:function(t){13===(window.event?t.keyCode:t.which)&&(e.show_keyword=!1,e.model.$search())}}},e.startWatch=function(){e.query_form_watch&&e.query_form_watch(),e.query_form_watch=e.$watch("model.query_model.data",(function(t,n){t&&t!==n&&"pc"===window.client&&("{}"!==j()(t)||n&&"{}"!==j()(n))&&e.model.$search(void 0!==n)}),!0)},e.$watch((function(){var t,n,i;return Pe()(t=(null==e||null===(n=e.model)||void 0===n||null===(i=n.query_model)||void 0===i?void 0:i.fields)||[]).call(t,(function(e){return!a("valueToFunc")((e.options||{}).hide)()})).length}),(function(t,n){if(e.single_count=Math.floor((Fe()(c).call(c,".basic").width()-Fe()(c).call(c,".right-content").width())/150),t&&t!==n&&"pc"===window.client){e.component_count=t,e.need_flex=e.component_count>e.single_count;var i=Fe()(c).call(c,".query-form");e.need_flex?(e.contract=!1,e.contract_info="收起",i.css("height",50*Math.ceil(e.component_count/e.single_count)+"px")):(e.contract=!0,e.contract_info="展开",i.css("height","48px"))}}),!0),e.togglePanel=function(){e.contract=!e.contract;var t=Fe()(c).call(c,".query-form");e.contract?(e.contract_info="展开",t.css("height","50px")):(e.contract_info="收起",t.css("height",50*Math.ceil(e.component_count/e.single_count)+"px"))},e.build_query=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" and ";return e?e+n+t:t},e.transValue=function(e,t){var n;return ae()(n=["string","datetime","date"]).call(n,t)?"'"+e+"'":e},e.showKeyword=function(t){t&&t.stopPropagation(),e.show_keyword=!e.show_keyword},e.keyWordContentClick=function(e){e&&e.stopPropagation()},e.$on("win_body_click_event",(function(){e.show_keyword=!1})),e.$watch("model.timestamp",(function(t){t&&e.init()}),!0)}]}}]),O.a.factory("$hcQueryNew",["$hcDialog","$filter","$hcForm","contextService","queryService","componentDefaultService","crudSettingService","$q",function(e,t,n,i,o,a,l,c){return{create:function(){return{complete_fields:[],display_callback:null,list_meta:[],default_filters_meta:[],query_model:{},filters:[],show_fields_key:[],show_fields:[],default_filters_meta_object:{},isAdvance:!1,isAdvancePlan:!1,filter_dict:{},dynamic_filter_list:[],filter_str:null,query_str:null,trans_query_str:null,model:null,state:null,state_params:{},selector_flag:!1,blur_fields:null,advance_query_config:{},type:null,tree_config:{},timestamp:0,auth:i.getContext("auth"),$setOptions:function(e){var t,n=this;return g()(t=re()(e)).call(t,(function(t){n[t]=e[t]})),n},$transMeta:function(n){var i=this;return null==n||g()(n).call(n,(function(n){var a;n.options||(n.options={});var l=n.options;if(l.placeholder=n.label,l.singleLine=!1,void 0===l.multi&&"hc-super-selector"===n.component&&(l.multi=!0),void 0===l.hasNull&&"hc-super-selector"===n.component&&(l.hasNull=!0),"pc"===window.client&&(l.query=!0),"mobile"===window.client&&(l.singleLine=!0),"number"===l.data_type&&(l.number_no_check=!0),i.setSelector=function(a,l,c){n.component="hc-selector",a.required&&(a.no_delete=!0),a.component=c,a.dictParams=!0,a.selector=function(o){var s,d,u,_={},p=o.scope.model;p&&(1===re()(p).length?(g()(d=re()(p)).call(d,(function(e){_.operate=t("compareParse")(n,"character"),_.value=p[e]})),_.query_type=1):(g()(u=re()(p)).call(u,(function(e){"gte"===n&&(_.begin_date=p[e]),"lte"===n&&(_.end_date=p[e])})),_.query_type=2));return g()(s=i.dynamic_filter_list).call(s,(function(e){var t,i;e.key===n.key&&(_.query_type=3,_.dynamic_period=r()(t=e.options.range_step).call(t,0,1),_.number=Number(r()(i=e.options.range_step).call(i,1)),_.unit=e.options.range_unit)})),e.getDialog(l()).anchor(angular.element(o.event.target).closest("hc-selector")).show({key:n.key,data:_,format:a.format,data_type:a.data_type,data_precision:a.data_precision,default:a.default,component:c,no_delete:a.no_delete,advance_operate_list:a.advance_operate_list})},a.selectorParse=function(e){if(e.dynamic){var t,n,a=s()(t=w()(n=i.dynamic_filter_list).call(n,(function(e){return e.key}))).call(t,e.dynamic.key);return~a?(angular.extend(i.dynamic_filter_list),i.dynamic_filter_list[a]=e.dynamic):i.dynamic_filter_list.push(e.dynamic),o.setDynamicTime(e.dynamic.options)}var l;return g()(l=i.dynamic_filter_list).call(l,(function(t){var n,o;t.key===e.key&&b()(n=i.dynamic_filter_list).call(n,s()(o=i.dynamic_filter_list).call(o,t),1)})),e.id},a.queryMapper=function(e){var n="";if(1===re()(e).length){var i;g()(i=re()(e)).call(i,(function(i){n=null===e[i]?t("compareParse")(i,"character")+" 空":t("compareParse")(i,"character")+" "+e[i]}))}else{var o=re()(e);n=e[o[0]]+"~"+e[o[1]]}return n}},!l.no_trans_query)switch(n.component){case"hc-input":case"hc-input-number":case"hc-input-label-multi":case"hc-text-area":"pc"===window.client?i.setSelector(l,kr,"hc-input"):(n.component="hc-query-panel",l.singleLine=!1,l.component="hc-input");break;case"hc-input-datetime":"pc"===window.client?i.setSelector(l,kr,"hc-input-datetime"):(n.component="hc-query-panel",l.singleLine=!1,l.component="hc-input-datetime");break;case"hc-input-radio":n.component="hc-select",w()(a=n.options.list||[]).call(a,(function(e){e.label=e.name}))}})),n},$setFieldOptions:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=angular.copy(t);return w()(n).call(n,(function(t,i){n[i]=e.default_filters_meta_object[t.key||t]})),n},$getInitFields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this;return(e||[]).length?t.$setFieldOptions(e):t.default_filters_meta},$initQuery:function(){var e,n,i,l,r,c=this;c.timestamp=qr()(),c.func_parse?c.func_parse(c.filter_fields):c.filter_fields;var s={};"simple"!==c.type&&(s=o.setDefaultPlan(c,c.plan_list)),s=o.dealUrlParams(c,s),c.$setOptions(angular.extend(c,s)),c.filter_fields=c.$transMeta(angular.copy(c.filter_fields)),c.filter_fields&&(c.default_filters_meta=c.filter_fields),c.default_filters_meta_object=t("toObj")(c.default_filters_meta),c.isAdvance=angular.copy(c.isAdvancePlan);var d={},u=c.selector_flag?2:3;c.query_model_init_fields=Pe()(e=c.$getInitFields(c.show_fields_key,u)).call(e,(function(e){return e})),"mobile"===window.client&&c.mobile_tree_config&&b()(n=c.query_model_init_fields).call(n,0,0,c.mobile_tree_config),c.filter_dict||(c.filter_dict={}),w()(i=c.query_model_init_fields).call(i,(function(e){var n;if(!t("valueToFunc")(null==e||null===(n=e.options)||void 0===n?void 0:n.hide)()){var i=a.setComponentDefault(c.filter_dict[e.key],e.component,e.options);t("isValidValue")(i)&&(d[e.key]=i)}})),c.filter_dict=angular.extend(d,c.filter_dict);var _,p=t("toObj")(c.dynamic_filter_list);(g()(l=re()(c.filter_dict)).call(l,(function(e){var t,n,i;"hc-input-datetime"===(null===(t=c.default_filters_meta_object[e])||void 0===t||null===(n=t.options)||void 0===n?void 0:n.component)&&(null===(i=p[e])||void 0===i?void 0:i.options)&&(c.filter_dict[e]=o.setDynamicTime(p[e].options))})),c.default_filter_dict)&&(g()(_=re()(c.default_filter_dict)).call(_,(function(e){void 0===c.default_filter_dict[e]&&delete c.default_filter_dict[e]})),c.default_filter_dict&&(c.filter_dict=angular.extend(c.filter_dict,c.default_filter_dict)));var m=Pe()(r=c.query_model_init_fields).call(r,(function(e){var t;return"hc-selector-depart"===e.component||ae()(t=["OrgDepartment","Department"]).call(t,(e.options||{}).selectorModel)}))[0];if(m){var f,h,v,y,x,k;if("hc-compose-selector"===m.component)y=null==m||null===(x=m.options)||void 0===x?void 0:w()(k=x.list).call(k,(function(e){return e.value}));o.getInChargeOrg(c.filter_dict[m.key],(null===(f=m.options)||void 0===f||null===(h=f.extra_property)||void 0===h?void 0:h.role)||((m.options.selectorOptions||[])[1]||{}).role||(null===(v=m.options)||void 0===v?void 0:v.role),y).then((function(e){c.filter_dict[m.key]=e,c.$setFormAndFetchData()}))}else c.$setFormAndFetchData()},$setFormAndFetchData:function(){var e=this;e.query_model=n.createForm().$setMeta(e.query_model_init_fields).$setData(angular.copy(e.filter_dict)),e.filter_dict=e.$getFilterDict(),e.filter_dict=o.setQueryDefault(e.query_model),e.show_fields=e.query_model.fields,e.$search(),we()((function(){"mobile"===window.client&&e.$search()}),250)},$refreshQuery:(d=p()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return angular.isString(t.config)&&(t.config=JSON.parse(t.config)),e.t0=this.service,e.next=6,this.service.getFields(t.config.model_meta);case 6:return e.t1=e.sent,this.list_fields=e.t0.getDefaultFields.call(e.t0,e.t1),e.t2=this.service,e.next=11,this.service.getFilterFields(t.config.model_meta);case 11:e.t3=e.sent,this.filter_fields=e.t2.getDefaultFields.call(e.t2,e.t3),this.sort_fields=t.config.model_meta.sorts,this.stat_fields=t.config.model_meta.statistics,this.cate_fields=t.config.model_meta.categories,this.$setMeta(this.filter_fields),this.isAdvancePlan=t.config.isAdvancePlan,this.dynamic_filter_list=t.config.dynamic_filter_list,this.isAdvance=t.config.isAdvancePlan,this.query_model.$setMeta(this.filter_fields).$setData(t.config.filter_dict),this.filter_str=t.config.filter_str,this.query_str=t.config.query_str,this.isAdvance&&this.$search();case 24:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)}),$refreshQueryForm:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,i=[];for(var o in t)t.hasOwnProperty(o)&&(n.query_model.field_metas[o]||i.push(n.default_filters_meta_object[o]));n.query_model.$setMeta(n.func_parse(ie()(e=n.query_model.fields).call(e,i))).$setData(angular.extend(n.query_model.data,t))},$search:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.filter_dict=this.$getFilterDict(),this.trans_query_str=this.$transQueryStr(angular.copy(this.query_str)),this.display_callback((null===(e=this.list_fields)||void 0===e?void 0:e.length)?this.list_fields:null,t,null,null,this.column_defs,this.sort_fields,this.stat_fields,this.cate_fields)},$getFilterDict:function(){return o.transFilterDict(this.query_model.fields,angular.copy(this.query_model.data))||{}},$transQueryStr:function(e){if(e){var t,n=e.replace(/currentUser\(\)/g,(this.auth.employee||{}).id);return w()(t=n.match(/'([0-9:\-\s]+)'/g)||[]).call(t,(function(e){n=n.replace(e,e.replace(/[:\-\s]/g,""))})),n}},$getPlan:function(){var e=c.defer(),t=this;return t.get_plan?l.getAvailablePlan(null,{model:t.model,state:t.state,biz_type:t.biz_type},1,50).then((function(n){t.plan_list=n.list,e.resolve(n.list)})):e.resolve(),e.promise},getCurrentModelMeta:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={fields:this.list_fields,filters:this.query_model.fields,sorts:this.sort_fields,statistics:this.stat_fields,categories:this.cate_fields,column_defs:this.column_defs},a=angular.copy(i||o);if(!e){var l,r;g()(l=["fields","filters"]).call(l,(function(e){var i,o=w()(i=a[e]).call(i,(function(e,t){return{key:e.key,sequence:10*(t+1)}})),l=t("deepRemoveDop")(angular.copy(a[e]),n.complete_fields[e]||[]);a[e]=t("arrayMerge")(o,l)}));var c={fields:{define:Jr},filters:{define:Xr},sorts:{define:Hr.a},statistics:{define:Gr}};g()(r=re()(c)).call(r,(function(e){var t;a[e]=w()(t=a[e]).call(t,(function(t){return new c[e].define(t)}))}))}return a.relations=this.relations,a}};var d}}}]);var Qr=n("BfIq"),Zr=n.n(Qr),ec=n("kcif"),tc=n.n(ec),nc=n("gu9h"),ic=n("8Auy"),oc=n("xMnI"),ac=n.n(oc);function lc(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}window.app.controller("hcSearchListSelectorCtrl",["$scope","BaseCRUDService",function(e,t){var n=t.getModelService(e.params.model||e.params.selectorModel);e.init=function(){e.searchOptions=function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=lc(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=lc(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}({crudService:n},e.params),$i.a.loadComponent("hcSearchList").then((function(){e.isLoaded=!0,e.$apply()}))},e.$dialog.operates([{label:"取消",func:function(){e.$dialog.dialog_close()},left:!0},{label:"确认",func:function(){e.confirm()},default:!0,is_important:!0}]),e.confirm=function(){e.$dialog.resolve_data({select_item:e.searchOptions.getSelectedItem()}),e.$dialog.dialog_close()}}]);var rc={controller:"hcSearchListSelectorCtrl",template:ac.a,name:"hc-search-list-selector"},cc=n("+hqv"),sc=n("CGID"),dc=n.n(sc);window.app.controller("DatasetListInfoDialogCtrl",["BaseCRUDService","$controller","$rootScope","$scope",function(e,t,n,i){var o=i.$dialog.options.model_name?e.getModelService(i.$dialog.options.model_name):e.getBaseService(i.$dialog.options.object_str);t(xr.a,{$scope:i,CRUDService:o}),i.meta_state=i.$dialog.options.meta_state,i.submit=p()(u.a.mark((function e(){var t,o,a,l,r,c,s,d,_,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){var e=p()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validFormData(c);case 2:if(e.t1=e.sent,e.t0=!1===e.t1,e.t0){e.next=6;break}e.t0=i.submitting;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return");case 8:i.afterSubmit(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(e){return new G.a((function(t){return $timeout((function(){return t()}),e)}))},!re()(i.base_form.asyncTask).length){e.next=6;break}return e.next=5,r(800);case 5:re()(i.base_form.asyncTask).length&&console.log("form_relation提交时未执行完毕");case 6:if(c=i.parseData(i.data),w()(t=i.base_form.fields).call(t,(function(e){"hc-field-list"===e.component&&(c.childrens=c.childrens||{},c.childrens[e.options.key]=i.base_form.data[e.key])})),!i.model_meta||!Pe()(o=i.model_meta.childrens).call(o,(function(e){return!e.is_form})).length){e.next=16;break}if(d=!0,_=null,c.childrens={},w()(s=i.sub_model.model_list||[]).call(s,(function(e){c.childrens[e.key]=e.list_model.data,e.required&&!e.list_model.data.length&&(d=!1,_=e.name)})),d){e.next=16;break}return n.show_warning(_+"不能为空"),e.abrupt("return");case 16:if(!(m=Pe()(a=i.base_form.fields).call(a,(function(e){return"hc-field-list"===e.component}))).length){e.next=21;break}return e.next=20,i.validChildrenData(m,c);case 20:f=e.sent;case 21:if(!f){e.next=25;break}n.show_warning(f),e.next=27;break;case 25:return e.next=27,l();case 27:case"end":return e.stop()}}),e)}))),i.setFormData=function(){i.params.data&&i.params.data.id&&!i.params.data.modify_flag?i.loadData():(i.data=angular.extend({},i.form_data_in_param?i.params.data:i.data||{}),i.base_form.$setMeta(i.info_meta,i.group_meta).$setData(i.data),i.model_meta&&i.initSubList(i.model_meta.childrens),i.base_form.$getDefault().then((function(){"new"===i.mode&&i.base_form.$dealFormDataChange(i.base_form.data,{}),i.startWatch()})),i.initAfter(i.data))}}]);var uc=function(e,t,n){return{controller:"DatasetListInfoDialogCtrl",template:dc.a,model_name:e,object_str:n,meta_state:t,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}}},_c=n("UAnq"),pc=n.n(_c);n("WxOZ");window.app.controller("hcDatasetListSelectorPanelCtr",["$scope","$controller","$hcDataset","BaseCRUDService","commonPanelService","$hcDialog","$filter",function(e,t,n,i,o,a,l){var r=this;e.selectorModel=e.params.selectorModel||e.params.model;var c=i.getModelService(e.selectorModel);t(cc.a,{$scope:e,CRUDService:c,InfoDialog:uc(e.selectorModel)}),e.selector_flag=!0,e.dataset_flag=!0,e.no_advance_query=!0,e.initAfter=function(){e.list_config=Object(Pt.a)(Object(Pt.a)({},e.list_config),{view_list:{pc:["simple_list"]},view:{pc:"simple_list"},hideComponents:["hcm-foot","hcm-content-indicator"],selector_type:2}),e.list_model.$setOptions(e.list_config),e.hideComponents=e.list_config.hideComponents},e._updateList=function(t){var i,o,a=null==(o=t)?void 0:Yn()(o).call(o,(function(t,n,i){var o=n[e.params.field_key];n.label||(n.label=n.name),n.key||(n.key="key"+(i+1));var a=Be()(t).call(t,(function(e){return e.name===o.name}));return~a?t[a].fields.push(n):t.push({key:o.key||o.name,name:o.name,fields:[n]}),t}),[]),l=null===(i=e.params.originObject)||void 0===i?void 0:w()(i).call(i,(function(e){if(!e.key){var n=Be()(t).call(t,(function(t){return t.id===e.id}));e.key="key"+(n+1)}return e.label||(e.label=e.name),e}));e.dataset_model=n.createDataset({data:a,selected_list:l}),e.list_model.$setData(e.params.originObject)},e.getMetaState=function(){return e.params.state||"datasetListSelector"},e.$dialog.operates(o.getDialogOperates(e)),e.$watch("dataset_model.selected_list",(function(t,n){void 0!==n&&(e.list_model.$setData(t),e.list_model.selected_items=t)}),!0),e.$watch("list_btn_model.actions",(function(){e.list_btn_model&&e.list_btn_model.actions.length&&e.$dialog.operates(o.getEnabledActions(e))})),e.$dialog.close=function(){e.is_data_changed&&e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.SelectedInfo=function(){a.getDialog(Mo.a).show({mode:"edit",data:e.list_model.selected_items,alter:e.getInfoAlterParam()}).then((function(t){e.dataset_model.selected_list=angular.copy(t)}))},e.editItem=function(t,n){return Object(Pt.c)(r,void 0,void 0,(function(){var i,o,r;return Object(Pt.e)(this,(function(c){var s;switch(c.label){case 0:return i=(null==n?void 0:n.options)||{},[4,a.getDialog(uc(e.selectorModel)).size((n||{}).size).show({mode:"edit",data:t,meta_params:angular.extend({},l("valueToFunc")(i.meta_params)(e.getEnvironmentParams())),alter:angular.extend(e.getInfoAlterParam(),i.alter_info?l("valueToFunc")(i.alter_info)(t,e.getEnvironmentParams()):{}),parentBaseForm:e.parentBaseForm})];case 1:return(o=c.sent()).modify_flag||(o.modify_flag=!0),r=Be()(s=e.list_model.data).call(s,(function(e){return e.id===t.id})),o.id=t.id,e.list_model.data[r]=o,[2]}}))}))},e.getInfoAlterParam=function(){return{meta:e.list_model.columns,model:e.model,state:e.params.selector_state}}}]);var mc={controller:"hcDatasetListSelectorPanelCtr",template:pc.a,title:"选择器",name:"hcDatasetListSelectorPanel"},fc=n("xwIL"),hc=n.n(fc),gc=n("y/Cr");n("mqRb"),n("8R7V"),n("1Jpz");window.app.controller("HCTagListSelectorPanelCtrl",["$controller","BaseCRUDService","commonPanelService","$scope","$rootScope","$state","$filter","dataService","$sce",function(e,t,n,i,o,a,l,r,c){i.params.disableTotal=!0,i.selector_flag=!0,i.search={keyword:null},i.obj=null,i.selectorModel=i.params.model||i.params.selectorModel;var s=t.getModelService(i.selectorModel);a.params.page_size=null,i.page_size=9999,e(gc.a,{$scope:i,CRUDService:s,InfoDialog:null}),i.params.dialogTitle?i.setTitle=function(){i.$dialog.title(i.params.dialogTitle)}:i.setTitle=function(){},i.setRowSelector=function(){},i.initAfter=function(){var e;(i.category_key=i.params.category_key,i.list_model.$setRowSelector(i.params.selectorType),i.list_model.selector_flag=!0,i.selectedItems=[],i.params.originObject)&&(2===i.params.selectorType?(i.list_model.selected_items=i.params.originObject,i.selectedItems=w()(e=i.params.originObject).call(e,(function(e){return e.id}))):(i.list_model.selected_items=[i.params.originObject],i.list_model.selected_item=i.params.originObject,i.selectedItems.push(i.params.originObject)))},i.getFilterDict=function(){var e=i.params.filter_dict||{};return e=i.funcParse(angular.isFunction(e)?e():e)},i.getInitData=function(){var e={};return i.category_id&&(e[i.category_meta.key]=i.category_id),te()(e,i.params.init_data)},i.getOuterAdvanceParams=function(){var e;return{default_filter_dict:l("valueToFunc")(null===(e=i.params)||void 0===e?void 0:e.advance_filter_dict)()}},i.getModelMetaExtendParams=function(){var e,t,n;return so()(null!==(e=null===(t=i.params)||void 0===t||null===(n=t.alter)||void 0===n?void 0:n.modelMetaExtendParams)&&void 0!==e?e:[])},i.setState=function(){},i.defaultAction=null,i.$dialog.operates(n.getDialogOperates(i)),i.$dialog.close=function(){i.is_data_changed&&i.$dialog.resolve_data(),i.$dialog.dialog_close()},i.getMetaState=function(){return i.params.state||"tagListSelector"},i.getQueryStr=function(){return i.params.query_str?i.params.query_str:!((i.model_meta||{}).advance_query||{}).close&&(i.advance_query||{}).isAdvance?i.advance_query.trans_query_str:null},i.$watch("list_btn_model.actions",(function(){i.list_btn_model&&i.list_btn_model.actions.length&&i.$dialog.operates(n.getEnabledActions(i))})),i.getInfoAlterParam=function(){return{meta:i.list_model.columns,model:i.model,state:i.params.selector_state}},i._updateList=function(e){i.data_list=e,i.data=function(e){var t;return Yn()(e).call(e,(function(e,t){var n=Be()(e).call(e,(function(e){return e.id===t[i.category_field]}));if(~n)e[n].list?e[n].list.push(t):e[n].list=[t];else{var o=Be()(e).call(e,(function(e){return-99999===e.id}));o>-1&&(e[o].list?e[o].list.push(t):e[o].list=[t])}return e}),ie()(t=[]).call(t,i.category_list))}(e)},i.getAllFilterDict=function(){var e,t=i.advance_query_enabled&&(i.advance_query||{}).$getFilterDict?angular.extend(i.getFilterDict()||{},(angular.copy(i.advance_query)||{}).$getFilterDict()||{}):angular.extend(i.getFilterDict()||{},null===(e=i.list_filter_model)||void 0===e?void 0:e.$getFilters());return i.transFilterDict(angular.copy(t))},i.selectTag=function(e){var t,n,o,a,l=Be()(t=i.selectedItems).call(t,(function(t){return t===e.id}));1===i.params.selectorType?~l?(i.list_model.selected_items=[],i.list_model.selected_item=null,b()(n=i.selectedItems).call(n,0,1)):(i.list_model.selected_items=[e],i.list_model.selected_item=e,i.selectedItems[0]=e.id):~l?(b()(o=i.list_model.selected_items).call(o,l,1),b()(a=i.selectedItems).call(a,l,1)):(i.list_model.selected_items.push(e),i.selectedItems.push(e.id))},i.tagRowShow=function(e){return!!(e.list&&q()(e.list)&&e.list.length)},i.$search_key_press=function(e){13===(window.event?e.keyCode:e.which)&&i.$search_click(e)},i.$search_click=function(e){i.keyword=i.search.keyword,null==e||e.stopPropagation(),i.keyword?i.keyword!==i.last_key_word?i.$search():i.keyword===i.last_key_word&&i.search_data.length>0&&"pc"===window.client?i.show_search=!0:i.$search():o.show_warning("请输入关键词检索")},i.$search=function(){r.callHcmOpenApi("hcm.model.list",{model:i.selectorModel,filter_str:i.keyword}).then((function(e){return e.list})).then((function(e){i.last_key_word=i.keyword;var t=i.keyword;i.search_data=Yn()(e).call(e,(function(e,n){var o,a,l=null===(o=Fe()(a=i.data_list).call(a,(function(e){return e.id===n.id})))||void 0===o?void 0:o[i.category_field];if(l){var r,s,d=Pe()(r=i.category_list).call(r,(function(e){return i.tagRowShow(e)}));if(n.category_index=Be()(d).call(d,(function(e){return e.id===l})),n.category_index<0)return e;var u=d[n.category_index].name;n.full_name=c.trustAsHtml(ie()(s="".concat(u,"/")).call(s,n.name).split(t).join('<span class="sys-color">'.concat(t,"</span>"))),e.push(n)}return e}),[]),i.search_data.length?i.show_search=!0:o.show_warning("未检索出对应结果")}))},i.$delete=function(e){e&&(i.show_search=!1)},i.scrollTo=function(e){var t,n,o,a;i.show_search=!1;var l=Be()(t=Pe()(n=i.data).call(n,(function(e){return i.tagRowShow(e)}))[e.category_index].list).call(t,(function(t){return t.id===e.id})),r=Fe()(o=Fe()(a=$(".hc-list-tag .list-content")).call(a,".tag_list").eq(e.category_index)).call(o,".tag_content").eq(l);r[0].scrollIntoView(!0,{behavior:"smooth",block:"nearest",inline:"center"}),r.addClass("searched"),we()((function(){r.removeClass("searched")}),2500)}}]);var vc={controller:"HCTagListSelectorPanelCtrl",template:hc.a,title:"选择器",name:"category-list-selector"},bc=n("1hbj"),yc=n("gdWe"),wc=n.n(yc),xc=(n("n4ug"),n("6hxS"));window.app.controller("CommonModelMasterDetailDialogCtrl",["BaseCRUDService","$controller","$rootScope","$scope","$timeout","$compile",function(e,t,n,i,o,a){var l,r;i.params.model=i.$dialog.options.model_name,i.params.meta_state=i.$dialog.options.meta_state,i.params.id=i.$dialog.options.id,i.currentRenderingKey="";var c=e.getModelService(i.params.model);t(xc.a,{$scope:i,CRUDService:c,InfoDialog:null}),i.getMetaState=function(){return i.params.meta_state},i.setState=function(){},i.getItemInfo=p()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),i.getEnvironmentParams=function(){return angular.extend({},i.params||{})},i.getRestParams=function(){return{state_params:i.params}};var s=function(e){r&&(e.params.waterfall_child&&e.params.parent_key===i.currentRenderingKey?i.$broadcast("waterfall_child_change",e):($(".model-master-detail-dialog .nav-item-content .render").children().remove(),l.$destroy(),r=null)),o((function(){if(!r){var t,n;if(e.params.waterfall_child){var o;n="common-model-view-waterfall-component",i.currentRenderingKey=e.params.parent_key,i.params.waterfall_meta=Fe()(o=i.nav_items).call(o,(function(t){return t.key===e.params.parent_key}))}else{switch(e.view){case"base":n="common-model-view-base-component";break;case"multi":n="common-model-view-multi-component";break;case"single":n="common-model-view-single-component"}i.currentRenderingKey=e.key}var c=ie()(t="<".concat(n," params='params'><")).call(t,n,">"),s=$(".model-master-detail-dialog .nav-item-content .render").last();s.html(c),(l=i.$new()).params=i.params,r=a(s)(l)}}))};i.goChild=function(){var e=p()(u.a.mark((function e(t){var n,o,a,l,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Fe()(n=i.total_nav_items).call(n,(function(e){return e.key===t}))){e.next=8;break}return r=Fe()(a=i.nav_items).call(a,(function(e){return e.key===t})),e.next=5,null===(l=i.goChildBeforeAsync)||void 0===l?void 0:l.call(i,r);case 5:i.currentTab=r.list[0].key,e.next=14;break;case 8:return e.next=10,null===(c=i.goChildBeforeAsync)||void 0===c?void 0:c.call(i,o);case 10:i.currentTab=o.key,i.goFuncBefore(o),i.params=te()({},i.params,o.params,{key:o.key,base_config:Ni()(i.base_config)}),s(o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.initAfter=function(){var e;G.a.all([$i.a.loadComponent("commonModelViewBaseComponent"),$i.a.loadComponent("commonModelViewMultiComponent"),$i.a.loadComponent("commonModelViewSingleComponent"),$i.a.loadComponent("commonModelViewWaterfallComponent")]).then((function(){var e,t,n,o,a;i.isLoaded=!0,i.$apply(),i.total_nav_items=w()(e=(n=ie()(t=[])).call.apply(n,ie()(o=[t]).call(o,so()(w()(a=i.nav_items).call(a,(function(e){var t,n,i,o,a;"waterfall"===e.view&&g()(t=e.list).call(t,(function(t){var n;(t.params.waterfall_child=!0,t.params.parent_key=e.key,t.list&&t.list.length>0)&&g()(n=t.list).call(n,(function(t){var n;t.params=null!==(n=t.params)&&void 0!==n?n:{},t.params.waterfall_child=!0,t.params.parent_key=e.key}))}));return e.list&&e.list.length>0?(i=ie()(n=[])).call.apply(i,ie()(o=[n]).call(o,so()(w()(a=e.list).call(a,(function(e){return e.list&&e.list.length>0?e.list:e}))))):e})))))).call(e,(function(e){return e.params=i.getParams(e),e})),i.currentTab=i.total_nav_items[0].key})),i.dialog_action=i.funcParse(Pe()(e=i.model_meta.actions).call(e,(function(e){return"float"!==e.type}))),i.$dialog.operates(i.dialog_action,i.parseParentAction)}}]);var kc=n("mJ0u"),$c=n("TYOo"),Oc=function(e){void 0===e&&(e=[]);var t=function(e){return e.substring(s()(e).call(e,"[",0)+1,Zr()(e).call(e,"]"))};return w()(e).call(e,(function(e){return"expression[VALIDATE("+t(e.validator)+", "+(n=e.tips||"",(L()(i=n.toString()).call(i,"expression[")&&be()(o=n.toString()).call(o,"]")?t(e.tips):"'"+e.tips+"'")+", '")+e.tips_type+"')]";var n,i,o}))},Dc=function(){function e(e,t,n,o,a,l,r){this._actionMap=new ut.a([["BACK",function(){history.go(-1)}],["CALL_API",function(e){var t=this,n=e.options,i=n.params?"function"==typeof n.params?n.params():n.params:{};return this.dataService.callHcmOpenApi(n.api,i).then((function(e){return t.context.is_data_changed=!0,e}))}],["OPEN_WEBSOCKET",function(e){var t,n=this,i=e.label,o=e.options,a=o.params?"function"==typeof o.params?o.params():o.params:{},l=this.useProgress(o),r=l.instance,c=l.sendMessage;return r.show(),c(0,null!==(t=null==o?void 0:o.begin_tip)&&void 0!==t?t:"开始"+this.$filter("valueToFunc")(i)()+"..."),this.$rootScope.show_waiting(),this.dataService.callHcmOpenWebSocket(o.api,a).then((function(e){var t;return n.context.is_data_changed=!0,c(100,null!==(t=null==o?void 0:o.completeTip)&&void 0!==t?t:"已完成"),n.$rootScope.hide_waiting(),e}),(function(e){return e instanceof Event?(console.log(e),n.$rootScope.show_warning("WebSocket连接错误","warning")):n.$rootScope.show_warning(e,"warning"),n.$hcDialog.closeTarget("hc-dialog-progress"),G.a.reject(e)}),(function(e){c(e.progress,e.message)})).finally((function(){var e;c(100,null!==(e=null==o?void 0:o.completeTip)&&void 0!==e?e:"已完成"),n.$rootScope.hide_waiting()}))}],["GO_STATE",function(e){var t,n=e.options;return"report"===(null===(t=n.params)||void 0===t?void 0:t.type)&&Pe()(n.params)&&"object"===f()(Pe()(n.params))&&(n.params.filter=sl.a.dump(Pe()(n.params)||{})),this.$rootScope.super_go(n.state,n.params,n.options,n.open_new_page)}],["CLOSE",function(e){var t,n,i=e.options;(null===(t=this.context)||void 0===t?void 0:t.$dialog)&&("resolve"===(null==i?void 0:i.status)?this.context.$dialog.resolve_data(null==i?void 0:i.params):"reject"===(null==i?void 0:i.status)&&(null===(n=this.context.$dialog)||void 0===n||n.reject_data(i.params)),this.context.$dialog.dialog_close())}],["SET_ENV",function(e){var t,n,i=e.options;return this.context.customEnvironmentParams=(null===(t=this.context)||void 0===t?void 0:t.customEnvironmentParams)||{},(null==i?void 0:i.params)&&te()(null===(n=this.context)||void 0===n?void 0:n.customEnvironmentParams,i.params)}],["COMMON_LIST_DIALOG",function(e){var t,n,i,o,a,l,r=e.options;switch(r.component){case"hc-standard-tree-selector":a=lr.a,l="middle";break;case"hc-super-selector":a=r.selectorModel&&L()(t=r.selectorModel).call(t,"common_basic_tree_item_data")?hl:gl.a,l="middle";break;case"hc-category-list-selector":a=rr.a,l="large";break;case"hc-tree-list-selector":a="common"===(null==r?void 0:r.tree_type)?nr.a:tr.a,l="large";break;case"hc-dataset-list-selector":a=mc,l="large";break;case"hc-search-list-selector":a=rc,l="large";break;case"hc-tag-list-selector":a=vc,l="large";break;default:return}var c=null;return(null===(i=null===(n=this.context.actionInstanceMap)||void 0===n?void 0:n[e.key])||void 0===i?void 0:i.isActive)?this.context.actionInstanceMap[e.key].resetDialog(r||{}):(c=this.$hcDialog.getDialog(Object(Pt.a)(Object(Pt.a)({},a),(null==r?void 0:r.dialog_options)||{})).title((null==r?void 0:r.title)||this.$filter("translate")("common_selector_dialog_default_title")).size(r.size||l),((null==r?void 0:r.reuse)||(null===(o=null==r?void 0:r.dialog_options)||void 0===o?void 0:o.reuse))&&(this.context.actionInstanceMap=this.context.actionInstanceMap||{},this.context.actionInstanceMap[e.key]=c),c.show(r||{}))}],["COMMON_INFO_DIALOG",function(e,t,n){var i,o,a,l,r,c,s;void 0===n&&(n={});var d=e.options,u=n.select_item,_=null;return(null===(o=null===(i=this.context.actionInstanceMap)||void 0===i?void 0:i[e.key])||void 0===o?void 0:o.isActive)?this.context.actionInstanceMap[e.key].resetDialog(d||{}):(_=this.$hcDialog.getDialog(Object(Pt.a)(Object(Pt.a)({},Object(bc.a)(d.model,d.state,d.base_object_str)),(null==d?void 0:d.dialog_options)||{})).title((null==d?void 0:d.title)||this.$filter("translate")("common_selector_dialog_default_title")).size(d.size||e.size),(null===(a=null==d?void 0:d.dialog_options)||void 0===a?void 0:a.reuse)&&(this.context.actionInstanceMap=this.context.actionInstanceMap||{},this.context.actionInstanceMap[e.key]=_),_.show({mode:d.mode,data:d.data,meta_params:d.meta_params,form_data_in_param:d.form_data_in_param,alter:angular.extend((null===(r=(l=this.context).getInfoAlterParam)||void 0===r?void 0:r.call(l))||{},this.$filter("valueToFunc")(d.alter)(u,null===(s=(c=this.context).getEnvironmentParams)||void 0===s?void 0:s.call(c)))}))}],["COMMON_VIEW_DIALOG",function(e){var t,n,i,o,a,l=e.options,r=null;return(null===(n=null===(t=this.context.actionInstanceMap)||void 0===t?void 0:t[e.key])||void 0===n?void 0:n.isActive)?this.context.actionInstanceMap[e.key].resetDialog(l||{}):(r=this.$hcDialog.getDialog(angular.extend(Object(kc.a)(l.model,l.state),Object(Pt.a)({component:l.dialog_component||"hc-dialog",mask:null===(i=l.mask)||void 0===i||i,maskClose:null!==(o=l.maskClose)&&void 0!==o&&o,styles:l.styles||{},squeezed:!0===l.squeezed?angular.element(".hcm-nav-content").last():l.squeezed,dialog_style:l.dialog_style||{}},(null==l?void 0:l.dialog_options)||{}))).size(l.size||e.size).name(l.name||""),(null===(a=null==l?void 0:l.dialog_options)||void 0===a?void 0:a.reuse)&&(this.context.actionInstanceMap=this.context.actionInstanceMap||{},this.context.actionInstanceMap[e.key]=r),r.show(l.params||{}))}],["COMMON_MASTER_DETAIL_DIALOG",function(e){var t,n,i,o,a,l,r,c,s=e.options,d=null;return(null===(n=null===(t=this.context.actionInstanceMap)||void 0===t?void 0:t[e.key])||void 0===n?void 0:n.isActive)?this.context.actionInstanceMap[e.key].resetDialog(s||{}):(d=this.$hcDialog.getDialog(angular.extend((l=s.model,r=s.state,c=s.id,{controller:"CommonModelMasterDetailDialogCtrl",template:wc.a,model_name:l,meta_state:r,id:c}),{mask:null===(i=s.mask)||void 0===i||i,maskClose:null!==(o=s.maskClose)&&void 0!==o&&o})).size(s.size||e.size||"super-max").name("masterDetailDialog").title((null==s?void 0:s.title)||"主子模型"),(null===(a=null==s?void 0:s.dialog_options)||void 0===a?void 0:a.reuse)&&(this.context.actionInstanceMap=this.context.actionInstanceMap||{},this.context.actionInstanceMap[e.key]=d),d.show(s.params||{}))}],["CONFIRM",function(e){var t=e.options;return this.$hcDialog.confirm(t.content,t.options,t.style,t.hideCannel)}],["SIMPLE_FORM",function(e){var t=e.options;return this.$hcDialog.simpleForm(t.title,t.meta,t.data,t.form_options)}],["SHOW_WARNING",function(e){var t=e.options;return this.$rootScope.show_warning(t.content,(null==t?void 0:t.level)||"warning",null==t?void 0:t.waiting)}],["GUIDE",function(e){var t,n=this,i=e.options;(null===(t=i.guide_options)||void 0===t?void 0:t.use_new_guide)?JSON.parse(window.sessionStorage.getItem("guide"+e.key))||(window.sessionStorage.setItem("guide"+e.key,"true"),we()((function(){return n.$hcDialog.tour(i.guide_steps,i.guide_options)}),500)):we()((function(){return n.$hcDialog.tour(i.guide_steps,i.guide_options)}),500)}],["PROMPT",function(e){var t=e.options;return this.$hcDialog.prompt(t.content,t.options,t.style)}],["TOAST",function(e){var t=e.options;return this.$hcDialog.toast(t.content,t.type,t.duration,t.mask,t.callback)}],["WORKFLOW_CREATE",function(e,t,n){var i,o,a;void 0===n&&(n={});var l=e.options,r=Object(Pt.g)(e,["options"]);return Object(Pt.c)(this,void 0,void 0,(function(){var e,c,s,d,u,_,p,m,f,h,g;return Object(Pt.e)(this,(function(v){switch(v.label){case 0:return e={wf_edit:!0,go_option:{module_type:"dialog",dialog_size:"full"}},c=n.SELECT_ITEM,s=n.FORMINFO,d=n.SELECT_ITEMS,u=(null!==(i=null==s?void 0:s())&&void 0!==i?i:null==c?void 0:c())||(null==d?void 0:d()),(null==r?void 0:r.params)?[4,this.$filter("valueToFunc")(r.params)(u,n)]:[3,2];case 1:return p=v.sent(),[3,3];case 2:p={},v.label=3;case 3:return _=p,m=this.exprParse(_||{},t,n),null===(a=null!==(o=null==l?void 0:l.form_data)&&void 0!==o?o:null==m?void 0:m.form_data)||void 0===a?[3,4]:(h=a,[3,8]);case 4:return(null==r?void 0:r.data)?[4,this.$filter("valueToFunc")(r.data)(u,n)]:[3,6];case 5:return g=v.sent(),[3,7];case 6:g={},v.label=7;case 7:h=g,v.label=8;case 8:return f=h,[2,this.wfCreateService.createAndStartWorkflow(Object(Pt.a)(Object(Pt.a)(Object(Pt.a)(Object(Pt.a)({},e),m),l),{form_data:f}))]}}))}))}],["WORKFLOW_VIEW_V3",function(e){var t,n=e.options;return Object(Pt.c)(this,void 0,void 0,(function(){var e,i,o;return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return n.wf_inst_id?(e=null==n?void 0:n.business_id)?[3,2]:[4,this.dataService.callHcmOpenApi("hcm.model.get",{model:"WorkFlowInstance",id_:n.wf_inst_id})]:[2,this.$rootScope.show_warning("该单据尚未绑定流程！")];case 1:i=a.sent(),e=null==i?void 0:i.business_id,a.label=2;case 2:return"page"!==(null==n?void 0:n.module_type)?[3,3]:[2,this.$rootScope.super_go("workflow_bill_v3",{wf_inst_id:n.wf_inst_id,business_id:e},{reload:!0})];case 3:return[4,D.a.getCustomDialogCtrl("WorkflowDetailNewInfoCtrl")];case 4:return o=a.sent(),[4,this.$hcDialog.getDialog(o(e)).params({mode:"view",wf_inst_id:n.wf_inst_id,business_id:e,basic_state:null==n?void 0:n.basic_state}).size(null!==(t=null==n?void 0:n.dialog_size)&&void 0!==t?t:"full").show()];case 5:return[2,a.sent()]}}))}))}],["COMMON_UPLOAD",function(e,t,n){var i,o=e.options;return void 0===n&&(n={}),Object(Pt.c)(this,void 0,void 0,(function(){var e,t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:switch(e={params:{},size:2048},null==o?void 0:o.mode){case"tpl":e=Object(Pt.a)(Object(Pt.a)({},e),{url:"/document/temp/upload"+window.hcm_env_pre,type:"file",file_type:["zip"],is_silent:!0,upload_desc:this.$filter("translate")("Please upload the template in zip format")});break;case"document":e=Object(Pt.a)(Object(Pt.a)({},e),{url:"/document/savedocuments"+window.hcm_env_pre,type:"file",file_type:["xlsx","zip"],is_silent:!0,upload_type:(null===(i=null==o?void 0:o.params)||void 0===i?void 0:i.upload_type)||"auto",upload_desc:this.$filter("translate")("Please upload the template in zip format")})}return[4,this.hcUploadFile.upload(Object(Pt.a)(Object(Pt.a)({},e),(null==o?void 0:o.params)||{}))];case 1:return t=n.sent(),this.$hcDialog.closeTarget("hcUploadFile"),t&&"document"===(null==o?void 0:o.mode)?[2,t]:t&&t.data?[2,t.data]:[2]}}))}))}],["EXEC_ACTION_KEY",function(e,t,n){var i,o,a,l,r,c=e.options,s=null===(l=(null===(o=null===(i=this.context)||void 0===i?void 0:i.$dialog)||void 0===o?void 0:o.list_btn_model)||(null===(a=this.context)||void 0===a?void 0:a.list_btn_model))||void 0===l?void 0:l.getAction(c.actionKey);return s&&(null===(r=this.context)||void 0===r?void 0:r.parseAction(s,null,t))}],["COMMON_DOWNLOAD",function(e,t,n){var o=e.options;return void 0===n&&(n={}),Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){return Object(i.p)("/document/temp/download?index="+o.index+(o.export_name?"&name="+o.export_name+"."+o.file_type:"")+window.hcm_env_post),[2,"success download"]}))}))}],["DIALOG_CUSTOMER_HTML",function(e,t){var n=e.options;this.$hcDialog.getDialog({template:'<div class="no-support" style="height:100%;width:100%;overflow:auto;" ng-bind-html="bind_html|toTrusted" ng-init="init()"></div>',controller:["$scope","$filter",function(e,t){e.init=function(){e.bind_html=n.bind_html}}]}).title(n.title||"").size(n.size).show()}],["AI_STREAM_DIALOG",function(e){var t=e.options;this.$hcDialog.getDialog($c.default).params({tip:t.tip,agent_name:t.agent_name,params:t.params}).size(t.size).show()}]]),this.$filter=e,this.$hcDialog=t,this.$rootScope=n,this.dataService=o,this.wfCreateService=a,this.hcUploadFile=l,this.$hcmQueueTask=r}return e.prototype.getInstance=function(e){return this.context=e,this},e.prototype.exprParse=function(e,t,n,i){if(void 0===n&&(n={}),void 0===i&&(i=!1),"function"==typeof e)return e;var o=Object(Pt.a)(Object(Pt.a)(Object(Pt.a)({WINDOW:window},nc.b),{RES:function(e){return t[e]},ELEMENT:function(e){return angular.element(e)}}),n),a=ic.a.expressionEval(this.$filter("exprToArr")(e),o,i);return this.$filter("arrToOriginObject")(a,e)},e.prototype.canEnterAction=function(e,t,n){return void 0===n&&(n={}),Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(i){return e.entry_condition?[2,this.exprParse(e.entry_condition,t,n)]:[2,!0]}))}))},e.prototype.validateAction=function(e,t,n){return void 0===n&&(n={}),Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(i){var o;e.validators&&e.validators.length&&(this.exprParse(Oc(e.validators),t,Object(Pt.a)({VALIDATE:a()(o=this._notifyError).call(o,this)},n),!0),e.validators_tips&&this.$rootScope.show_warning(this.exprParse(e.validators_tips,t,n)));return[2]}))}))},e.prototype._notifyError=function(e,t,n){void 0===n&&(n="message"),e&&("confirm"===n?this.$hcDialog.confirm(t):"none"===n?console.error(t):this.$rootScope.show_warning(t),function(e){throw new Error(e)}(t))},e.prototype.isCommonAction=function(e){return e.action&&this._actionMap.has(e.action)},e.prototype.getCommonAction=function(e){var t;return a()(t=this._actionMap.get(e)).call(t,this)},e.prototype.execCommonAction=function(e,t,n){void 0===n&&(n={});var i=this.exprParse(e.options||{},t,n);return this._actionMap.get(e.action).call(this,Object(Pt.a)(Object(Pt.a)({},e),{options:i}),t,n)},e.prototype.actionChain=function(e,t,n,o){return void 0===n&&(n={}),Object(Pt.c)(this,void 0,void 0,(function(){var a,l,r,c,s,d,u,_,p,m,f,h,g;return Object(Pt.e)(this,(function(v){switch(v.label){case 0:a=n.select_item,l=angular.extend({},t),v.label=1;case 1:v.trys.push([1,9,10,11]),r=Object(Pt.i)(e),c=r.next(),v.label=2;case 2:return c.done?[3,8]:(s=c.value).asyncHandle?[4,Object(i.c)(o(s,a,l))]:[3,4];case 3:return u=v.sent(),[3,6];case 4:return[4,o(s,a,l)];case 5:u=v.sent(),v.label=6;case 6:d=u,s.key&&(s.asyncHandle?(_=Object(Pt.f)(d,2),p=_[0],m=_[1],l[s.key]=m,l[s.key+"_err"]=p):l[s.key]=d),v.label=7;case 7:return c=r.next(),[3,2];case 8:return[3,11];case 9:return f=v.sent(),h={error:f},[3,11];case 10:try{c&&!c.done&&(g=r.return)&&g.call(r)}finally{if(h)throw h.error}return[7];case 11:return[2,l]}}))}))},e.prototype.getCustomDialogCtrl=function(e){return D.a.getCustomDialogCtrl(e)},e.prototype.getTaskQueue=function(e){return this.$hcmQueueTask.createQueueTask(e)},e.prototype.useProgress=function(e){var t,n,i=this.$hcDialog.progress({processingTitle:e.processingTitle,completeTitle:e.completeTitle,dialogOptions:{hideClose:null!==(t=e.hideClose)&&void 0!==t&&t,autoClose:null===(n=e.autoClose)||void 0===n||n,closeWaiting:e.closeWaiting||1500}});return{instance:i,sendMessage:function(e,t){i.params({progress:{value:e,message:t}})}}},e.$inject=["$filter","$hcDialog","$rootScope","dataService","wfCreateService","hcUploadFile"],e}();window.app.factory("$commonAction",["$filter","$hcDialog","$rootScope","dataService","wfCreateService","hcUploadFile","$hcmQueueTask",function(e,t,n,i,o,a,l){return{createCommonAction:function(r){return new Dc(e,t,n,i,o,a,l).getInstance(r)}}}]),window.app.factory("$hcmQueueTask",["$q",function(e){var t=function(t){var n=t||{},i=n.delay,o=void 0===i?0:i,a=n.timeout,l=void 0===a?0:a,r=n.chunkSize,c=void 0===r?1:r,s=null,d=[],u=0,_=0,p=0,m=0,f=[],h=!1,g=null;function v(t){var n=!1,i=!1;(function(t){var n=e.defer(),i=[];return G.a.all(w()(t).call(t,(function(e,t){return e().then((function(e){return G.a.resolve(e)})).catch((function(e){return i.push(t),G.a.resolve(e)}))}))).then((function(e){i.length>0?n.reject(e):n.resolve(e)})),n.promise})(t).then((function(e){if(f.push.apply(f,Object(Pt.h)(e)),_-=e.length,p+=e.length,n=!0,clearTimeout(s),s=null,g.notify({status:"resolve",msg:"任务执行成功",data:e,total:u,rest:_,success:p,fail:m,progress:Math.round(100-_/u*100)}),h&&i){var t=d.shift();t?v(t):y()}})).catch((function(e){if(f.push.apply(f,Object(Pt.h)(e)),_-=e.length,m+=e.length,n=!0,clearTimeout(s),s=null,g.notify({status:"reject",error:e,msg:"任务执行失败",total:u,rest:_,success:p,fail:m,progress:Math.round(100-_/u*100)}),h&&i){var t=d.shift();t?v(t):y()}})),l&&(s=we()((function(){if(h){s=null,f.push("此次任务超时了～"),_-=c,p+=c,g.notify({status:"timeout",msg:"此次任务超时了～",total:u,rest:_,success:p,fail:m,progress:Math.round(100-_/u*100)});var e=d.shift();e?v(e):y()}}),l)),we()((function(){if(n){var e=d.shift();e?v(e):y()}i=h}),null!=o?o:0)}function b(){h=!1,clearTimeout(s),s=null}function y(){b(),g&&g.resolve({status:"resolve",result:f})}return{addTasks:function(e){d=ie()(d).call(d,function(e){return tc()(e,c)}(e)),u+=e.length,_+=+e.length},run:function(){var t=e.defer();if(h)return t.reject("任务正在执行中"),t.promise;if(g=t,h=!0,!s){var n=d.shift();n&&v(n)}return g.promise},pause:function(){b()},start:function(){if(h=!0,!s){var e=d.shift();e&&v(e)}},stop:function(){this.pause(),g&&g.resolve({status:"interrupt",result:f})}}};return{createQueueTask:function(e){return t(e)}}}]);var Cc=n("luRN"),Mc=n.n(Cc),Sc=(n("Qpgx"),n("fFwQ"));O.a.directive("hcCmd",[function(){return{restrict:"E",scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},template:Mc.a,controller:["$scope","contextService",function(e,t){e.options.save||e.model||(e.model=(e.options||{}).default),e.init=function(){e.time={year:ka()().format("YYYY"),month:ka()().format("MM"),day:ka()().format("DD")},e.employee=t.getContext("auth").employee,e.options.selectorParse&&e.options.selectorParse(e),angular.element("#hc-cmd").html(Object(Sc.marked)(e.model))}}]}}]);var Ec=n("2P52"),Pc=n.n(Ec);window.app.directive("hcTreeListSelector",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:Pc.a,controller:["$scope","$controller","$filter","commonSelectorService","componentDefaultService",function(){var e=p()(u.a.mark((function e(t,n,i,o,a){var l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(vl.b,{$scope:t}),e.next=3,a.setComponentDefault(t.model,"hc-tree-list-selector",t.options);case 3:l=e.sent,t.$apply((function(){i("isValidValue")(l)&&(t.model=l)})),t.options.state=t.options.state||"treeListSelector","common"===t.options.tree_type&&(t.options.addRootAll=!0);case 7:case"end":return e.stop()}}),e)})));return function(t,n,i,o,a){return e.apply(this,arguments)}}()]}}]),window.app.directive("hcCategoryListSelector",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:Pc.a,controller:["$scope","$controller","$filter","componentDefaultService",function(e,t,n,i){t(vl.b,{$scope:e}),e.options.state=e.options.state||"categoryListSelector";var o=i.setComponentDefault(e.model,"hc-category-list-selector",e.options);n("isValidValue")(o)&&(e.model=o),e.onClick=function(t){var i;if(null==t||null===(i=t.stopPropagation)||void 0===i||i.call(t),!e.options||!n("valueToFunc")(e.options.readOnly)()){var o=e.options.size;e.openPanel(rr.a,o)}}}]}}]),window.app.directive("hcDatasetListSelector",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:Pc.a,controller:["$scope","$controller","$filter","componentDefaultService",function(e,t,n,i){e.options.selectorType=2,t(vl.b,{$scope:e}),e.onClick=function(t){var i;null==t||null===(i=t.stopPropagation)||void 0===i||i.call(t),e.options&&n("valueToFunc")(e.options.readOnly)()||e.openPanel(mc)}}]}}]),window.app.directive("hcTagListSelector",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:Pc.a,controller:["$scope","$controller","$filter","componentDefaultService",function(e,t,n,i){t(vl.b,{$scope:e}),e.options.selectorType||(e.options.selectorType=2),e.options.state=e.options.state||"tagListSelector";var o=i.setComponentDefault(e.model,"hc-tag-list-selector",e.options);n("isValidValue")(o)&&(e.model=o),e.onClick=function(t){var i;null==t||null===(i=t.stopPropagation)||void 0===i||i.call(t),e.options&&n("valueToFunc")(e.options.readOnly)()||e.openPanel(vc)}}]}}]);n("/zKR");function jc(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}function Tc(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=jc(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=jc(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}O.a.service("commonTreeLoaderService",["treeLoaderService","dataService","$q","$filter",function(e,t,n,i){this.getCommonTreeLoader=function(e,n){return{common_tree_loader:function(i){return t.callHcmOpenApi("hcm.model.list",{model:e,filter_str:null,filter_dict:{parent_id:(i||{}).id||"",enabled:1},page_index:1,page_size:1e4,extra_property:{state:n}}).then((function(e){return e.list}))}}},this.getOrgTreeLoader=function(t,i,o){return{org_tree_loader:function(a){var l=n.defer();return a||o?e.getSubOrg(a?a.id:o,"org"===t?20:40).then((function(e){l.resolve(e)})):e.getMyDepartmentByRole(i||"manager").then((function(e){l.resolve(e)})),l.promise}}},this.getNewCommonTreeLoader=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{common_tree_loader:function(o){var a,l,r,c,s,d,u={model:e,filter_str:null,filter_dict:L()(e).call(e,"common_basic_tree_item_data")?Tc(Tc(Tc({},{enable:!0}),i.filter_dict),{},{parent_id:(null==o?void 0:o.is_virtual_root_node)?"":null!==(a=null!==(l=null==o?void 0:o.id)&&void 0!==l?l:null===(r=i.filter_dict)||void 0===r?void 0:r.parent_id)&&void 0!==a?a:""}):Tc(Tc(Tc({},{enabled:!0}),i.filter_dict),{},{parent_id:(null==o?void 0:o.is_virtual_root_node)?"":null!==(c=null!==(s=null==o?void 0:o.id)&&void 0!==s?s:null===(d=i.filter_dict)||void 0===d?void 0:d.parent_id)&&void 0!==c?c:""}),page_index:1,page_size:1e4,extra_property:Tc(Tc({},{state:n}),i.extra_property)};return u.filter_dict.id&&(o?delete u.filter_dict.id:delete u.filter_dict.parent_id),t.callHcmOpenApi("hcm.model.list",u).then((function(e){return e.list}))}}},this.getNewOrgTreeLoader=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{org_tree_loader:function(o,a){var l,r,c,s,d,u,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=arguments.length>3?arguments[3]:void 0,m=arguments.length>4?arguments[4]:void 0,f=_.effect_date||ka()().format("YYYY-MM-DD"),h=i("deepMerge")({filter_dict:{org_type:[10,20,40],begin_date:{lte:f},date_:f,end_date:{gt:f}},extra_property:{is_display_unit:!!(null==_||null===(l=_.config_params)||void 0===l?void 0:ae()(l).call(l,"is_display_unit")),sorts:[{key:"orderno",type:"asc"},{key:"number",type:"asc"}],role:"manager"}},i("deepMerge")(t,{filter_dict:{enabled:!(null==_||null===(r=_.config_params)||void 0===r?void 0:ae()(r).call(r,"revoke"))||[!0,!1]},extra_property:{is_display_unit:null==_||null===(c=_.config_params)||void 0===c?void 0:ae()(c).call(c,"is_display_unit")}})),g=n.defer();if((void 0===(null==t||null===(s=t.filter_dict)||void 0===s?void 0:s.org_type)||(null==t||null===(d=t.filter_dict)||void 0===d||null===(u=d.org_type)||void 0===u?void 0:ae()(u).call(u,40)))&&o&&20===o.org_type&&(h.extra_property.sorts=[{key:"org_type",type:"desc"},{key:"orderno",type:"asc"},{key:"number",type:"asc"}]),h.extra_property.is_show_revoke=!(!0===h.filter_dict.enabled),o&&!o.is_virtual_root_node){h.filter_dict.parent_id=o.id,h.extra_property.org_id=o.id,h.filter_dict.origin_id&&delete h.filter_dict.origin_id;var v=angular.copy(h);v.extra_property&&v.extra_property.conditions&&delete v.extra_property.conditions,v.filter_str&&delete v.filter_str,v.cache_support&&delete v.cache_support,m?e.getNumCount(angular.extend(h.extra_property,{begin_date:f},{filter_str:t.filter_str,cache_support:t.cache_support})).then((function(e){g.resolve(e)})):h.extra_property.calculate_filter&&a?G.a.all([e.getMySubOrgList(v),e.getNumCount(angular.extend(h.extra_property,{begin_date:f},{filter_str:t.filter_str,cache_support:t.cache_support}))]).then((function(e){var t={};t.data=e[0],t.emp_count=e[1],g.resolve(t)})):e.getMySubOrgList(v).then((function(e){g.resolve(e)}))}else{p&&(h.filter_dict=Tc(Tc({},h.filter_dict),p));var b=angular.copy(h);b.extra_property&&b.extra_property.conditions&&delete b.extra_property.conditions,b.filter_str&&delete b.filter_str,b.cache_support&&delete b.cache_support,e.getMyOrgList(b).then((function(n){h.extra_property.calculate_filter&&(n.length>1||1===n.length&&n[0].is_leaf)?(h.extra_property.org_id=w()(n).call(n,(function(e){return e.id})),e.getNumCount(angular.extend(h.extra_property,{cache_support:t.cache_support})).then((function(e){w()(n).call(n,(function(t){return t.emp_count=e[t.id]})),g.resolve(n)}))):g.resolve(n)}))}return g.promise}}}}]);var Ac=n("Bdp6"),Ic=n.n(Ac);n("OBAF"),n("srGB");window.app.controller("BaseSubDialogController",["BaseCRUDService","$controller","$rootScope","$scope",function(e,t,n,i){var o=i.params.SubDialogCRUDService||e.getModelService(i.params.model||i.params.alter.model);t(xr.a,{$scope:i,CRUDService:o}),i.getAlterEvalContext=function(){return{BASE_FORM:i.params.alter}},i.getMetaState=function(){return i.params.SubGetMetaState},i.getLoadModelMetaParams=function(){return i.params.load_model_meta_params?i.params.load_model_meta_params:["info",i.getMetaState()]},i.submit=p()(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w()(t=i.info_meta).call(t,(function(e){var t;e.options.originObject&&(i.data[r()(t=e.key).call(t,0,-3)]=e.options.originObject)})),n=i.parseData(i.data),e.next=4,i.validFormData(n);case 4:if(e.t0=e.sent,!1!==e.t0){e.next=7;break}return e.abrupt("return");case 7:i.$dialog.resolve_data(n),i.close();case 9:case"end":return e.stop()}}),e)}))),i.getFormData=function(e){return angular.extend(e,i.params.data)}}]);var Lc={controller:"BaseSubDialogController",title:"表格信息",template:dc.a},Fc=n("36qD"),Rc=n("gj9F");O.a.directive("hcSubList",[function(){return{restrict:"E",scope:{model:"="},template:Ic.a,controller:["$scope","$q","$rootScope","BaseCRUDService","$hcListNew","$hcDialog","$hcListBtn","$filter","dataService","$state","commonSelectorService","HCMCRUDImpExpService","contextService",function(e,t,n,i,o,a,l,r,c,d,u,_,p){e.init=function(){e.auth=p.getContext("auth"),e.show_warning=n.show_warning,e.initList(),e.model.$init=function(){e.initList()}},e.initList=function(){var t;w()(t=e.model.model_list).call(t,(function(t){t.is_data_changed=!1;var n=i.getModelService(t.model);e.model.list_meta?e.setListMeta(t,e.model.list_meta[t.key],n,!1):n.getBizMeta("list",e.model.state||null).then((function(i){e.setListMeta(t,i,n,!0)}))}))},e.setListMeta=function(t,n,i,a){var l,c,s=a?e.funcParse(n):n;a||(s.actions=e.funcParse(n.actions)),t.list_model=o.createList().$setColumns(s.fields).$setOperateDefault(t.operate_default||e.editItem).$setStyle("full row-select").$setName(t.model).$setRowSelector(void 0!==t.selector_type?t.selector_type:1).$setTemplate((t.options||{}).template_setting).$setOptions(s.list_config),"mobile"===window.client&&t.list_model.$setView(t.mobile_view||"list"),(e.model.operateRow||{})[t.model]&&t.list_model.$setOperateRow(e.model.operateRow[t.model]),t.list_btn_model=e.getSubListMeta(Pe()(l=s.actions).call(l,(function(e){return!r("valueToFunc")(e.hide)()}))),ae()(c=["update","edit","view"]).call(c,e.model.mode)&&i&&e.loadData(i,t)},e.funcParse=function(n){var i={$q:t,SCOPE:e,STATE:d,MOMENT:cc.a,$filter:r,dataService:c,commonSelectorService:u};return ic.a.jsonEval(n,i)},e.getSubListMeta=function(t){var n=["edit","setting","refresh"],i=r("toObj")(t);return g()(n).call(n,(function(e){delete i[e]})),i.new&&(i.new.func=e.createListItem),i.delete&&(i.delete.func=e.removeListItem),i.setup&&(i.setup.func=function(t){e.metaSetup(t,i.setup.data)}),i.flex_field&&(i.flex_field.func=function(t){e.fieldSetup(i.flex_field.data)}),Mr()(i)},e.loadData=function(t,n,i){t.getItemList(null,e.getFilterDict(n.filter_dict,n.parent_id),1,1e3,e.getExtraProperty()).then((function(e){n.list_model.$setData(e.list),i&&i()}))},e.getFilterDict=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return t[n]=e.model.id,t},e.getExtraProperty=function(){return{state:e.getMetaState(),sorts:e.getSortMeta()}},e.getMetaState=function(){return e.model.state},e.getSortMeta=function(){return e.sort_meta},e.metaSetup=function(t,n){a.getDialog(Ll.a).show({meta_key:n,biz_type:"list",model:t.model,state:e.getMetaState()}).then((function(){e.loadModelMeta()}))},e.fieldSetup=function(t){a.getDialog(Rc.a).show({model_name:t}).then((function(){e.loadModelMeta()}))},e.getLoadModelMetaParams=function(){return e.model.load_model_meta_params||["info",e.getMetaState()]},e.createListItem=function(t){a.getDialog(Lc).show({mode:"new",model:t.model,SubDialogCRUDService:e.model.SubDialogCRUDService&&e.model.SubDialogCRUDService(t.model),SubGetMetaState:e.model.state,alter:e.model.parent_data}).then((function(e){var n;t.list_model.data=t.list_model.data||[],t.list_model.data.push(e),t.is_data_changed=!0,null===(n=t.list_model)||void 0===n||n.$refreshData()}))},e.editItem=function(t,n,i){a.getDialog(Lc).show({mode:"edit",model:i,data:t,SubDialogCRUDService:e.model.SubDialogCRUDService&&e.model.SubDialogCRUDService(i),SubGetMetaState:e.model.state,load_model_meta_params:e.model.load_model_meta_params,alter:e.model.parent_data}).then((function(n){var o,a;angular.extend(t,n);var l=Pe()(o=e.model.model_list).call(o,(function(e){return e.model===i}))[0]||{};l.is_data_changed=!0,null==l||null===(a=l.list_model)||void 0===a||a.$refreshData()}))},e.removeListItem=function(e){var t=e.list_model;if(t.selected_item){var i=t.selected_item.name||"";a.confirm("是否确认删除"+i+"？").then((function(){var n,i,o,a=s()(n=t.data).call(n,t.selected_item);b()(i=t.data).call(i,a,1),t.selected_item=null,t.selected_items=[],e.is_data_changed=!0,null===(o=e.list_model)||void 0===o||o.$refreshData()}))}else n.show_warning("请选择一条删除")},e.batchRemoveListItem=function(e){var t=e.list_model;t.selected_items.length?a.confirm("是否确认删除选中的项目？").then((function(){var n,i;w()(n=t.selected_items).call(n,(function(e){var n,i,o=s()(n=t.data).call(n,e);b()(i=t.data).call(i,o,1)})),t.selected_item=null,t.selected_items=[],e.is_data_changed=!0,null===(i=e.list_model)||void 0===i||i.$refreshData()})):n.show_warning("请选择需要删除的项目")},e.sub_import=function(t){a.getDialog(Fc.a).params({category:t.model,category_name:t.name,params:{is_sublist:!0,file_name:t.name,is_from_config:!1,extend_property:{extra_property:{state:e.model.state},list_data:t.list_model.data,parent_id:t.parent_id},callback:function(e){t.list_model.$setData(e)}}}).size("small").title(t.name).show()},e.sub_export=function(t){e.model.id?_.list_export({category:t.model,file_name:t.name,is_from_config:!1,celery_mode:!1,extend_property:{filter_dict:e.getFilterDict(t.filter_dict,t.parent_id),extra_property:e.getExtraProperty()}}):n.show_warning("暂无相关数据需要导出")}}]}}]),O.a.factory("$hcSubList",[function(){return{create:function(){return{model_list:[],model_list_object:{},state:null,$setOptions:function(e){var t,n,i=this;return g()(t=re()(e)).call(t,(function(t){i[t]=e[t]})),this.model_list_object=Yn()(n=this.model_list).call(n,(function(e,t){return e[t.key]=t,e}),{}),this.$init&&this.$init(),i}}}}}]);n("66V8"),n("DrvE");var Bc,Uc,qc,Wc,zc,Nc,Kc,Hc,Vc=n("TTrh"),Yc=n.n(Vc),Gc=n("0XPj"),Jc=n.n(Gc);n("4eRX");function Xc(e){if(void 0===K.a||null==z()(e)){if(q()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return Qc(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return V()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qc(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=B()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function Qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Pe()(O.a).call(O.a,"hcListCellData",["$filter",function(e){return function(t,n,i,o){var a,l;if(!n||!n.field)return null;var c,s,d="function"==typeof n.field?n.field(t):(c=n.field,s=t,Yn()(c).call(c,(function(e,t){return e&&t in e?e[t]:null}),s));return d=n.mask?function(e,t){function n(t){if(q()(e)){var n=Pe()(e).call(e,(function(e){return e.key===t}));return n.length>0?n[0].name:t}return angular.isFunction(e)?e(t):t in e?e[t]:t}return q()(t)?w()(t).call(t,(function(e){return n(e)})):n(t)}(n.mask,d):d,d=n.formatter?e(n.formatter.split(":")[0]).apply(void 0,ie()(a=[d]).call(a,so()(r()(l=n.formatter.split(":")).call(l,1)))):d,i||n.fieldFunc&&(d=n.fieldFunc(t,n,d)),o||d instanceof Array&&(d=d.join(",")),d instanceof Object&&d.__proto__===Object.prototype&&(d=j()(d)),d}}]),Pe()(O.a).call(O.a,"diffFieldData",["$filter","dmp",function(e,t){return function(e,n){var i,o,a,l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=(null!==(i=e)&&void 0!==i?i:"").toString(),n=(null!==(o=n)&&void 0!==o?o:"").toString(),t.createDiffHtml(null!==(a=r?e:n)&&void 0!==a?a:"",null!==(l=r?n:e)&&void 0!==l?l:"")}}]),Pe()(O.a).call(O.a,"parseFieldData",(function(){return function(e,t){return Yn()(e).call(e,(function(e,t){return e&&t in e?e[t]:null}),t)}})),Pe()(O.a).call(O.a,"validData",["$filter",function(e){return function(t,n,i){var o,a=null,l=null,r={},c=function(i,r){var c,s;a=t[i].key,l=(t[i].validName||t[i].label||t[i].name||t[i].key)+" "+r,(null===(c=t[i].options)||void 0===c?void 0:c.setValidInfoMsg)&&(l=e("valueToFunc")(null===(s=t[i].options)||void 0===s?void 0:s.setValidInfoMsg)(t[i],n)),o=!0};return w()(t).call(t,(function(t,a){if(t.hasOwnProperty("options")&&!o){var l,r,s,d,u,_=t.options,p=null==i||null===(l=Pe()(i).call(i,(function(e){return e.key===t.key})))||void 0===l||null===(r=l[0])||void 0===r?void 0:r.field,m=p?e("parseFieldData")(p,n):t.dataPath?e("getJSON")(t.dataPath,n):null==n?void 0:n[t.key];_.hasOwnProperty("required")&&e("valueToFunc")(_.required)(n)&&ae()(s=[NaN]).call(s,m)&&c(a,"格式错误"),_.hasOwnProperty("required")&&e("valueToFunc")(_.required)(n)&&(ae()(d=[void 0,null]).call(d,m)||angular.isString(m)&&!Kl()(m).call(m)||0===m.length)&&c(a,"不允许为空"),_.hasOwnProperty("max")&&E()(m||0)>_.max&&c(a," 不允许超过 "+_.max.toString()),_.hasOwnProperty("min")&&E()(m||0)<_.min&&c(a," 不允许小于 "+_.min.toString()),_.hasOwnProperty("data_type")&&("number"!==_.data_type||_.number_no_check||!m||/^-?[0-9]*$/.test(m)||c(a,"只能输入数字字符")),_.hasOwnProperty("minlength")&&_.minlength&&!ae()(u=[void 0,null,""]).call(u,m)&&(angular.isNumber(m)||angular.isString(m))&&m.toString().length<_.minlength&&c(a," 长度不允许小于 "+_.minlength.toString())}})),a&&(r.key=a),l&&(r.msg=l),"{}"===j()(r)?null:r}}]),Pe()(Bc=window.app).call(Bc,"translate",["$translate",function(e){return function(t){return t?e.instant(t):(console.log(t+"该字段未设置对应翻译字段"),t)}}]),Pe()(Uc=window.app).call(Uc,"getJSON",[function(){return To.a}]),Pe()(qc=window.app).call(qc,"setJSON",[function(){return To.d}]),Pe()(Wc=window.app).call(Wc,"hasJSON",[function(){return To.c}]),Pe()(zc=window.app).call(zc,"getFieldByPath",[function(){return To.a}]);var Zc=new ut.a,es=new ut.a,ts=new ut.a,ns=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dept";return ie()(t="".concat(n,"_")).call(t,e)},is=function(e,t,n){var i,o=e.field,a=e.expr,l=e.field_type;l&&(t=null===(i=n[l.toUpperCase()])||void 0===i?void 0:i.call(n));return!t||os(t,o,a)},os=function(e,t,n){var i,o,a,l=Xc(null===(i=n.split(":")[1])||void 0===i?void 0:i.split(";"));try{for(l.s();!(o=l.n()).done;){var c,s=o.value,d=(a=s,L()(a).call(a,">=")||L()(a).call(a,"<=")||L()(a).call(a,"!=")?[r()(a).call(a,0,2),r()(a).call(a,2)]:L()(a).call(a,">")||L()(a).call(a,"<")||L()(a).call(a,"=")?[r()(a).call(a,0,1),r()(a).call(a,1)]:[null,a]),u=ro()(d,2),_=u[0],p=u[1],m=Object(To.a)(t,e);if("!="===_)return p+""!=m+"";if("="===_)return p+""==m+"";if(">"===_)return E()(m)>E()(p);if(">="===_)return E()(m)>=E()(p);if("<"===_)return E()(m)<E()(p);if("<="===_)return E()(m)<=E()(p);if(Object(To.c)(t,e)&&!ae()(c=s.split("+")).call(c,""+Object(To.a)(t,e)))return!1}}catch(e){l.e(e)}finally{l.f()}return!0},as=function(e,t){var n,i=Pe()(e),o=e.field_type;if(!i||!o)return!1;var a=null===(n=t[o.toUpperCase()])||void 0===n?void 0:n.call(t);return ao()(i).call(i,(function(e){return!function(e,t,n){var i=e.type,o=void 0===i?"AND":i,a=e.condition,l=void 0===a?[]:a;return q()(t)?"OR"===o.toUpperCase()?ci()(t).call(t,(function(e){return ao()(l).call(l,(function(t){return is(t,e,n)}))})):ci()(t).call(t,(function(e){return ci()(l).call(l,(function(t){return is(t,e,n)}))})):"OR"===o.toUpperCase()?ao()(l).call(l,(function(e){return is(e,t,n)})):ci()(l).call(l,(function(e){return is(e,t,n)}))}(e,a,t)}))};Pe()(Nc=window.app).call(Nc,"actionPermission",["dataService","contextService",function(e,t){var n=t.getContext("auth")||{},i=function(t,n){var i=[],o=[];return g()(n).call(n,(function(e){var n=ns(e,t),a=Zc.get(n);a?i.push(a):ts.get(n)||o.push(e)})),o.length&&(g()(o).call(o,(function(e){var n=ns(e,t);ts.set(n,!0)})),function(t,n){return e.callHcmOpenApi("role.convert.org",{convert_key:t,origin_value:n},"session,0.1",!1,!1)}(t,o).then((function(e){var n;g()(n=re()(e)).call(n,(function(n){Zc.set(ns(n,t),e[n])}))}))),i},o=function(t){return n=t,i=[],o=[],g()(n).call(n,(function(e){var t=ns(e),n=es.get(t);n?i.push(n):ts.get(t)||o.push(e)})),o.length&&(g()(o).call(o,(function(e){ts.set(ns(e),!0)})),e.callHcmOpenApi("role.get.parent.ids",{org_ids:o},"session,0.1",!1,!1).then((function(e){g()(o).call(o,(function(t){es.set(ns(t),e[t])}))}))),i.length===n.length?i:null;var n,i,o};return function(e,t){return!!e&&(!!q()(e)&&function(){return ci()(e).call(e,(function(e){return function(e,t){var a,l,r;if("string"==typeof e)return!n.roles[e];var c,d=e.role,u=e.field_type,_=e.field,p=e.convert_key,m=null===(a=n.roles)||void 0===a||null===(l=a[d])||void 0===l?void 0:w()(l).call(l,(function(e){return e.id}));if(!m||!m.length)return!0;if("string"!=typeof u)return!0;var f,h,g,v=null===(f=t[u.toUpperCase()])||void 0===f?void 0:f.call(t);if(!v)return!0;if(c=[Object(To.a)(_,v)],c=q()(v)?w()(v).call(v,(function(e){return Object(To.a)(_,e)})):[Object(To.a)(_,v)],!(c=Pe()(c).call(c,(function(e){var t;return-1===s()(t=[void 0,null,""]).call(t,e)}))).length)return!1;if(p)g=i(p,c);else{if(!(h=c))return!0;g=o(h)}return!(null===(r=g)||void 0===r?void 0:r.length)||ao()(g).call(g,(function(e){return!Jc()(e,m).length}))}(e,t)||as(e,t)}))})}}]),Pe()(Kc=window.app).call(Kc,"actionPermissionAsync",["dataService","contextService",function(e,t){var n=t.getContext("auth")||{},i=function(){var t=p()(u.a.mark((function t(n){var i,o,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],o=[],g()(n).call(n,(function(e){var t=ns(e),n=es.get(t);n?i.push(n):ts.get(t)||o.push(e)})),!o.length){t.next=9;break}return g()(o).call(o,(function(e){ts.set(ns(e),!0)})),t.next=7,e.callHcmOpenApi("role.get.parent.ids",{org_ids:o},"session,0.1",!1,!1);case 7:a=t.sent,g()(o).call(o,(function(e){es.set(ns(e),a[e]),i.push(a[e])}));case 9:if(i.length!==n.length){t.next=11;break}return t.abrupt("return",i);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(t,n){return e.callHcmOpenApi("role.convert.org",{convert_key:t,origin_value:n},"session,0.1",!1,!1)},a=function(){var e=p()(u.a.mark((function e(t,n){var i,a,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],a=[],g()(n).call(n,(function(e){var n=ns(e,t),o=Zc.get(n);o?i.push(o):ts.get(n)||a.push(e)})),!a.length){e.next=9;break}return g()(a).call(a,(function(e){var n=ns(e,t);ts.set(n,!0)})),e.next=7,o(t,a);case 7:r=e.sent,g()(l=re()(r)).call(l,(function(e){Zc.set(ns(e,t),r[e]),i.push(r[e])}));case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=p()(u.a.mark((function e(t,o){var l,r,c,d,_,p,m,f,h,g,v,b,y,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=2;break}return e.abrupt("return",!n.roles[t]);case 2:if(_=t.role,p=t.field_type,m=t.field,f=t.convert_key,h=null===(l=n.roles)||void 0===l||null===(r=l[_])||void 0===r||null===(c=r[0])||void 0===c?void 0:c.id){e.next=6;break}return e.abrupt("return",!0);case 6:if("string"!=typeof p){e.next=14;break}if(b=null===(v=o[p.toUpperCase()])||void 0===v?void 0:v.call(o)){e.next=10;break}return e.abrupt("return",!0);case 10:g=[Object(To.a)(m,b)],g=q()(b)?w()(b).call(b,(function(e){return Object(To.a)(m,e)})):[Object(To.a)(m,b)],e.next=15;break;case 14:return e.abrupt("return",!0);case 15:if((g=Pe()(g).call(g,(function(e){var t;return-1===s()(t=[void 0,null,""]).call(t,e)}))).length){e.next=18;break}return e.abrupt("return",!1);case 18:if(!f){e.next=24;break}return e.next=21,a(f,g);case 21:x=e.sent,e.next=30;break;case 24:if(y=g){e.next=27;break}return e.abrupt("return",!0);case 27:return e.next=29,i(y);case 29:x=e.sent;case 30:if(null===(d=x)||void 0===d?void 0:d.length){e.next=32;break}return e.abrupt("return",!0);case 32:return e.abrupt("return",ao()(x).call(x,(function(e){return!ae()(e).call(e,h)})));case 33:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return function(){var e=p()(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:if(q()(t)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",G.a.any(w()(t).call(t,function(){var e=p()(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,n);case 2:if(e.sent||as(t,n)){e.next=7;break}return e.abrupt("return",G.a.resolve());case 7:return e.abrupt("return",G.a.reject());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),Pe()(Hc=window.app).call(Hc,"recInterviewAvg",(function(){return function(e){return e<=5?Yc()(e):e<=10?Yc()(e/10*5):Yc()(e/100*5)}}));n("cLVH");O.a.directive("hcTitle",["HcTitleService","toastService","$filter","contextService",function(e,t,n,i){return{restrict:"A",scope:{options:"=?",model:"="},replace:!1,link:function(o,a,l){o.options=o.options||{};var c=a[0],s=e.getElement(),d=function(e){var t,o;return(null===(o=null===(t=i.getContext("auth"))||void 0===t?void 0:t.company_setting)||void 0===o?void 0:o.xss_protect)?n("xss_filter")(n("securityFilter")(e)):n("securityFilter")(e)},u=function(e){var t;return"INPUT"===e.tagName?function(e){if(e.length){var t,n,i=document.createElement("span");i.innerText=d(l.hcTitle),i.style.position="absolute",i.style.visibility="hidden",document.body.appendChild(i);var o=i.scrollWidth,a=e.width()-M()(r()(t=e.css("padding-left")).call(t,0,-2),10)-M()(r()(n=e.css("padding-right")).call(n,0,-2),10);return document.body.removeChild(i),o>a}}(a):(null===(t=null==o?void 0:o.options)||void 0===t?void 0:t.onOverflowY)?e.scrollHeight>e.offsetHeight:e.scrollWidth>e.offsetWidth};a.on("mouseenter",(function(e){s.style.visibility="hidden",!1!==o.options.show&&(o.options.showOnOverflow&&!u(c)||(l.hcTitle||c.innerText)&&function(e,n,i){var a,l,u,_;$(s).removeClass("hc-title hc-tip hc-tip-top hc-tip-bottom hc-tip-left hc-tip-right"),s.classList.add("hc-"+(o.options.mode||"title")),s.innerHTML=(d(i.hcTitle)||c.innerText)+"<span/>",o.options&&!ae()(a=[null,void 0,""]).call(a,o.options.tipStyle)&&"string"==typeof o.options.tipStyle&&(o.options.tipStyle=JSON.parse(o.options.tipStyle)),"[object Object]"===Object.prototype.toString.call(null===(l=o.options)||void 0===l?void 0:l.tipStyle)&&$(s).css(o.options.tipStyle),null===(u=document.querySelector(".h-c-main-content"))||void 0===u||u.appendChild(s),"mobile"===window.client&&o.options.mobile&&t.info(d(i.hcTitle),2e3,!1);var p=n.currentTarget.getBoundingClientRect(),m={};if("tip"===o.options.mode){var f,h;"row"===o.options.direction?(m.top=p.top-(s.offsetHeight-(p.bottom-p.top))/2+"px",window.innerWidth-p.right>=s.offsetWidth+5?(m.left=p.right+5+"px",s.classList.add("hc-tip-right"),s.classList.remove("hc-tip-left")):(m.left=p.left-s.offsetWidth+"px",s.classList.add("hc-tip-left"),s.classList.remove("hc-tip-right"))):"column_top"===o.options.direction?(p.top>=s.offsetHeight+5?(m.top=p.top-s.offsetHeight-5+"px",s.classList.add("hc-tip-top"),s.classList.remove("hc-tip-bottom")):(m.top=p.bottom+5+"px",s.classList.add("hc-tip-bottom"),s.classList.remove("hc-tip-top")),m.left=p.right-(s.offsetWidth+e.offsetWidth)/2+"px"):(window.innerHeight-p.bottom>=s.offsetHeight+5?(m.top=p.bottom+5+"px",s.classList.add("hc-tip-bottom"),s.classList.remove("hc-tip-top")):(m.top=p.top-s.offsetHeight-5+"px",s.classList.add("hc-tip-top"),s.classList.remove("hc-tip-bottom")),m.left=p.right-(s.offsetWidth+e.offsetWidth)/2+"px");var g=r()(f=m.top).call(f,0,-2),v=r()(h=m.left).call(h,0,-2);m.top=Math.min(Math.max(0,g),window.innerHeight-s.offsetHeight)+"px",m.left=Math.min(Math.max(0,v),window.innerWidth-s.offsetWidth)+"px",o.options.hideArrow?s.querySelector("span").style.display="none":"row"===o.options.direction||(s.querySelector("span").style.left=p.left-v+p.width/2+"px")}else"column_top"===o.options.direction?p.top>=s.offsetHeight+5?m.top=p.top-s.offsetHeight+"px":m.top=p.bottom+"px":window.innerHeight-p.bottom>=s.offsetHeight?m.top=p.bottom+"px":m.top=p.top-s.offsetHeight+"px",window.innerWidth-p.right>=s.offsetWidth?m.left=p.right+"px":m.left=p.left-s.offsetWidth+"px";o.show_tip=we()((function(){$(s).css({opacity:"0",visibility:"visible","z-index":1e5}).css(m).stop().animate({opacity:1},200)}),null!==(_=o.options.seconds)&&void 0!==_?_:500)}(c,e,l))})),a.on("mouseleave mousedown click",(function(){clearTimeout(o.show_tip),$(s).removeAttr("style"),$(s).stop().animate({opacity:0},200,null,(function(){return $(s).css({visibility:"hidden"})}))}))}}}]);var ls=function(){function e(){}return e.prototype.getElement=function(){return this.container||(this.container=document.createElement("div"),this.container.style.zIndex="100000"),this.container},e.prototype.createElement=function(){var e=document.createElement("div");return e.style.zIndex="100000",e},e}();O.a.service("HcTitleService",[ls]),O.a.directive("hcAutoCopy",["$rootScope","hcAutoCopyService",function(e,t){return{restrict:"A",link:function(n,i,o){a()(i).call(i,"click",(function(){var n=function(e,t){var n=null;t.hcAutoCopy?n=o.hcAutoCopy:t.value?n=t.value:e.innerHTML&&(n=e.innerText);return n}(i,o);null!==n&&(t.copy(n)&&e.show_warning("已成功复制："+n))}))}}}]),O.a.factory("hcAutoCopyService",[function(){return{copy:function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select();var n=document.execCommand("copy");return document.body.removeChild(t),n}}}]);var rs=n("j2Oo"),cs=n.n(rs);n("+/Eq");function ss(e){if(void 0===K.a||null==z()(e)){if(q()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return ds(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return V()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ds(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=B()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function us(e){return{createDataset:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{model:n.model,state:n.state,loader:n.loader,selected_list:n.selected_list||[],load_params:n.load_params,data:n.data,multi:!n.hasOwnProperty("multi")||n.multi,mode:n.mode,selected_callback:n.selected_callback,expandNodeFunc:n.expandNodeFunc,checkField:n.checkField,sortable_config:n.sortable_config,operate_icon:n.operate_icon,$initDataset:(t=p()(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this).loader){e.next=5;break}return e.next=4,t.loader.apply(t,so()(t.load_params));case 4:t.data=e.sent;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),$isSelected:function(e){var t,n;return ae()(t=w()(n=this.selected_list).call(n,(function(e){return e.key}))).call(t,e.key)},$addField:function(e){var t;Fe()(t=this.data).call(t,(function(t){return t.key===e.category_key})).fields.push(e)},$expandNode:(e=p()(u.a.mark((function e(t){var n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.expand){e.next=5;break}return e.next=3,null===(n=this.expandNodeFunc)||void 0===n?void 0:n.call(this,t.category_path);case 3:(i=e.sent)&&(t.fields=i);case 5:t.expand=!t.expand;case 6:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}}}}window.app.directive("hcDataset",[function(){return{restrict:"E",scope:{model:"="},template:cs.a,controller:["$scope","$filter",function(e,t){e.field_type={numeric:{icon:"icon-hcm-type-number"},float:{icon:"icon-hcm-type-number"},integer:{icon:"icon-hcm-type-number"},string:{icon:"icon-hcm-type-text"},text:{icon:"icon-hcm-type-text"},boolean:{icon:"icon-hcm-radio-circle"},datetime:{icon:"icon-hcm-clock"},date:{icon:"icon-hcm-calendar"},link:{icon:"icon-hcm-link"},formula:{icon:"icon-hcm-type-formulas"}},e.init=function(){var t;"drag"===(null===(t=e.model)||void 0===t?void 0:t.mode)&&e.initSortable()},e.initSortable=function(){var n;e.dataset_config=t("deepMerge")({group:{name:"field",pull:!0,put:!1},filter:".check-box",draggable:".to-select",animation:150,chosenClass:"hide-check-box",sort:!1,scroll:!1},null!==(n=e.model.sortable_config)&&void 0!==n?n:{})},e.search_key_press=function(t){13===(window.event?t.keyCode:t.which)&&e.search_click()},e.search_click=function(){var t,n;e.initSortable();var i=new RegExp(e.model.keyword);e.model.search_data=(null===(t=e.model.search_data)||void 0===t?void 0:t.length)?e.model.search_data:angular.copy(e.model.data),e.model.data=w()(n=angular.copy(e.model.search_data)).call(n,(function(t){var n;return t.expand=!!e.model.keyword,g()(n=re()(t)).call(n,(function(e){var n;be()(e).call(e,"fields")&&(t[e]=Pe()(n=t[e]).call(n,(function(e){return i.test(e.label)})))})),t}))},e.$watch("model.selected_list",(function(t,n){var i;if(t){var o,a=w()(i=e.model.selected_list).call(i,(function(e){return e.key})),l=ss(e.model.data);try{for(l.s();!(o=l.n()).done;){var r,c=o.value;if(null===(r=c.fields)||void 0===r?void 0:r.length){c.selectAll=!0;var s,d=ss(c.fields);try{for(d.s();!(s=d.n()).done;){var u=s.value;if(!ae()(a).call(a,u.key)){c.selectAll=!1;break}}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){l.e(e)}finally{l.f()}}}),!0),e.isNodeSelected=function(t){var n,i=null===(n=e.model.selected_list)||void 0===n?void 0:w()(n).call(n,(function(e){return e.key}));return null==i?void 0:ae()(i).call(i,t.key)},e.operateField=function(t,n){var i,o,a,l;if(!e.model.checkField||e.model.checkField(t)){var r=w()(i=e.model.selected_list).call(i,(function(e){return e.key}));ae()(r).call(r,t.key)?b()(o=e.model.selected_list).call(o,s()(r).call(r,t.key),1):e.model.selected_list.push(t);var c=n.fields;for(var d in n.selectAll=!0,c){var u,_;if(c.hasOwnProperty(d))ae()(u=w()(_=e.model.selected_list).call(_,(function(e){return e.key}))).call(u,c[d].key)||(n.selectAll=!1)}null===(a=(l=e.model).selected_callback)||void 0===a||a.call(l,[t],n)}},e.operateFieldBatch=function(t,n){var i,o;t&&t.stopPropagation(),n.selectAll=!n.selectAll,n.selectAll?e.categoryNodeFunc.selectAll(n.fields,e.model.selected_list):e.categoryNodeFunc.unSelectAll(n.fields,e.model.selected_list),null===(i=(o=e.model).selected_callback)||void 0===i||i.call(o,n.fields,n)},e.categoryNodeFunc={selectAll:function(e,t){w()(e).call(e,(function(e){var n;ae()(n=w()(t).call(t,(function(e){return e.key}))).call(n,e.key)||t.push(e)}))},unSelectAll:function(e,t){t.delete((function(t){var n,i;return!(null==t||null===(n=t.options)||void 0===n?void 0:n.required)&&ae()(i=w()(e).call(e,(function(e){return e.key}))).call(i,t.key)}))}}}]}}]),O.a.factory("$hcDataset",us),us.$inject=["dataService"];var _s=n("LCda"),ps=n.n(_s);n("tx43");function ms(e){return{createConfigList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return te()({set meta(e){this.columns=e},get meta(){return this.columns},operate_width:100,operate_default:function(){},$initConfigList:function(){}},e)}}}function fs(){return{moveUp:function(e,t,n){t.stopPropagation();var i=s()(n).call(n,e);if(0!==i){var o=b()(n).call(n,i,1)[0];b()(n).call(n,i-1,0,o),n[i].fixed&&(n[i-1].fixed=!0)}},moveDown:function(e,t,n){t.stopPropagation();var i=s()(n).call(n,e);if(i!==n.length-1){var o=b()(n).call(n,i,1)[0];b()(n).call(n,i+1,0,o),n[i].fixed||(n[i+1].fixed=!1)}},delete:function(e,t,n){var i=s()(n).call(n,e);b()(n).call(n,i,1)}}}window.app.directive("hcConfigList",[function(){var e=!0;return{restrict:"E",scope:{model:"="},template:ps.a,controller:["$scope","$filter","$element","$timeout",function(t,n,i,o){var a,l;t.sortable_config={ghostClass:null!==(a=null===(l=t.model)||void 0===l?void 0:l.ghostClass)&&void 0!==a?a:"ghostItem",swapThreshold:.5,scrollSensitivity:60,direction:"vertical",onStart:function(){e=!1},onEnd:function(){e=!0},onSort:function(e){o((function(){var n,o;Fe()(i).call(i,"[row-key=".concat(e.oldIndex,"]")).children("div").removeClass("content-cell-hover"),Fe()(i).call(i,"[row-key=".concat(e.newIndex,"]")).children("div").addClass("content-cell-hover"),null===(n=(o=t.model).onSortCallback)||void 0===n||n.call(o,e)}))}},t.init=function(){t.initList()},t.initList=function(){var e,o,a,l,r,c=(r=null===(e=t.model)||void 0===e?void 0:w()(o=Pe()(a=e.columns).call(a,(function(e){return!n("valueToFunc")(e.hide)()}))).call(o,(function(e){return e.width})),Yn()(r).call(r,(function(e,t){return e+t}),0)),s=null===(l=t.model)||void 0===l?void 0:l.operate_width,d=c+60+s,u=i.width()-8;if(t.element=i,d<u){var _,p,m=u-s;null===(_=t.model)||void 0===_||w()(p=_.columns).call(p,(function(e){return e.width=10*Math.round(e.width/c*m/10)})),t.modifyContentWidth()}},t.$watch("model.columns",(function(e){e&&t.initList()})),t.$watch("element.width()",(function(e,n){n!==e&&t.initList()}),!1),t.modifyContentWidth=function(){o((function(){var e=0,t=0;Fe()(i).call(i," .hcm-grid-header > div").each((function(t,n){return e+=n.offsetWidth})),Fe()(i).call(i," .flex-content .hcm-grid-header > div").each((function(e,n){return t+=n.offsetWidth})),e&&Fe()(i).call(i," .flex-content .hcm-grid-content").width(t),e&&Fe()(i).call(i," .fix-right-content .hcm-grid-content").width(e-t)}),100)},t.modifyContentWidth(),t.execute_func=function(e,i,o,a){o.stopPropagation(),n("valueToFunc")(e.disabled)(i)||(e.action?t.model.action_func(e.action,i,null,event,t.model):e.func(i,o,a))},t.onResizeMove=function(e,t,n){Fe()(i).call(i,"[col-key=".concat(t.attr("col-key"),"]")).css("width","".concat(n,"px"))},t.mouseEnter=function(t){var n,i;Fe()(n=$(".flex-content")).call(n,"[row-key=".concat(t,"]")).children("div").addClass("content-cell-hover"),e&&Fe()(i=$(".fix-right-content")).call(i,"[row-key=".concat(t,"]")).children("div").addClass("content-cell-hover")},t.mouseLeave=function(e){Fe()(i).call(i,"[row-key=".concat(e,"]")).children("div").removeClass("content-cell-hover")},t.parseWidth=function(e){return 10*M()(e/10)},t.changeStyle=function(){var e,t,n=Fe()(i).call(i," .hc-config-list .fix_right_content"),o=Fe()(i).call(i," .config-list-scroll-container").scrollLeft(),a=Fe()(i).call(i," .flex-content").width(),l=Fe()(i).call(i," .fix-right-content").width();return Math.round(l+a)-Math.round(i.width())<=o?(null==n||null===(e=n.attr("class"))||void 0===e?void 0:ae()(e).call(e,"fix-style"))&&!1:(null==n||null===(t=n.attr("class"))||void 0===t?void 0:ae()(t).call(t,"fix-style"))||!0}}]}}]),O.a.factory("$hcConfigList",ms),ms.$inject=["dataService"],O.a.factory("$hcConfigListService",fs),fs.$inject=[];var hs=n("U7jy"),gs=n.n(hs),vs=(n("GkyW"),function(){function e(e){this.$element=e}return e.prototype.$onInit=function(){var e,t;this.expandable_element=Fe()(e=this.$element).call(e,".expandable-item-expanded-content").first(),this.expanded=null!==(t=this.expanded)&&void 0!==t&&t,this.expandable_element.css("height","0px")},e.prototype.onItemClick=function(e){this.clickable||this.changeExpandState(e)},e.prototype.changeExpandState=function(e){var t,n;this.expandable_element.children().length>0&&(e&&(null===(t=e.stopPropagation)||void 0===t||t.call(e),null===(n=e.preventDefault)||void 0===n||n.call(e)),this.expanded=!this.expanded,this.expanded?this.expand():this.collapse())},e.prototype.collapse=function(){var e=this,t=this.expandable_element.children().outerHeight(!0);requestAnimationFrame((function(){e.expandable_element.css("height",t+"px"),requestAnimationFrame((function(){e.expandable_element.css("height",e.expanded?"":"0px")}))}))},e.prototype.expand=function(){var e=this,t=this.expandable_element.children().outerHeight(!0);this.expandable_element.css("height",t+"px"),this.expandable_element.one("transitionend",(function(t){e.expandable_element.css("height",e.expanded?"":"0px")}))},e.prototype.getArrow=function(){return this.clickable?"icon-hcm-arrow-right":this.expandable_element.children().length>0?this.expanded?"icon-hcm-arrow-down":"icon-hcm-arrow-right":this.arrow},e.$inject=["$element"],e}());O.a.component("expandableItem",{bindings:{prefix:"<?",eTitle:"<?",body:"<?",description:"<?",extra:"<?",arrow:"<?",clickable:"<?"},template:gs.a,transclude:!0,controller:vs});var bs=n("4imo"),ys=n.n(bs),ws=(n("taJo"),function(){function e(e,t){this.$element=e,this.$filter=t}return e.prototype.$onInit=function(){var e=this.meta.expandable;this.expandable_list_meta="nest"===(null==e?void 0:e.expand_type)?this.meta:null==e?void 0:e.list_meta},e.prototype.getFieldContent=function(e,t){var n=this.meta[t];return this.$filter("hcListCellData")(e,n)},e.prototype.getRowExpandable=function(e){var t=this.meta.expandable;return this.$filter("hcListCellData")(e,t,!1,!!this.expandable_list_meta)},e.prototype.onRowClick=function(e,t){var n,i;null===(i=(n=this.meta).operate_default)||void 0===i||i.call(n,e,t)},e.prototype.isArray=function(e){return q()(e)},e.prototype.isValidExpandable=function(e){return q()(e)?e.length>0:this.$filter("isValidValue")(e)},e.$inject=["$element","$filter"],e}());O.a.component("expandableList",{bindings:{meta:"<",data:"<"},template:ys.a,controller:ws});n("yyVZ"),n("MPnf");var xs={"hcm-no-content":function(){return n.e(146).then(n.t.bind(null,"UxUl",7))},"hcm-list-no-content":function(){return n.e(144).then(n.t.bind(null,"wLlb",7))},"hcm-layout-old":function(){return n.e(142).then(n.t.bind(null,"ycq+",7))},"hcm-layout-new":function(){return n.e(141).then(n.t.bind(null,"jk3+",7))},"hcm-chart-pie":function(){return n.e(134).then(n.t.bind(null,"Hjv5",7))},"hcm-chart-pie-radius":function(){return n.e(136).then(n.t.bind(null,"SIHK",7))},"hcm-chart-line":function(){return n.e(130).then(n.t.bind(null,"K8vR",7))},"hcm-chart-line-2d":function(){return n.e(131).then(n.t.bind(null,"uDps",7))},"hcm-chart-line-stark-2d":function(){return n.e(132).then(n.t.bind(null,"XKUe",7))},"hcm-chart-bar-x":function(){return n.e(127).then(n.t.bind(null,"zo3x",7))},"hcm-chart-bar-y":function(){return n.e(128).then(n.t.bind(null,"X/tm",7))},"hcm-chart-bar-2d":function(){return n.e(126).then(n.t.bind(null,"2OUQ",7))},"hcm-chart-stack-x":function(){return n.e(137).then(n.t.bind(null,"DgaJ",7))},"hcm-chart-stack-y":function(){return n.e(138).then(n.t.bind(null,"wSER",7))},"hcm-bar-updown-opacity":function(){return n.e(124).then(n.t.bind(null,"wjEI",7))},"hcm-basic-scatter-opacity":function(){return n.e(125).then(n.t.bind(null,"nBIn",7))},"hcm-radar":function(){return n.e(147).then(n.t.bind(null,"j6b0",7))},"hcm-funnel":function(){return n.e(140).then(n.t.bind(null,"Zx2B",7))},"hcm-mixed-graph":function(){return n.e(145).then(n.t.bind(null,"Xudq",7))},"hcm-chart-map":function(){return n.e(133).then(n.t.bind(null,"3KRE",7))},"hcm-semi-circle-progress-opacity":function(){return n.e(148).then(n.t.bind(null,"ynJN",7))},"hcm-column-progress-opacity":function(){return n.e(139).then(n.t.bind(null,"LDwF",7))},"hcm-chart-custom":function(){return n.e(129).then(n.t.bind(null,"Q6+Q",7))},"hcm-chart-pie-3d":function(){return n.e(135).then(n.t.bind(null,"GFg4",7))},"hcm-list-lock":function(){return n.e(143).then(n.t.bind(null,"KG37",7))}};O.a.directive("hcSvg",["$filter",function(e){return{restrict:"E",scope:{options:"=",model:"=ngModel"},template:'<div ng-init="init()" class="svg-panel"></div>',controller:["$scope","$element",function(t,n){t.init=function(){t.initSvg()};var i=e("themeColor");t.initSvg=function(){var e;t.options.icon&&(null===(e=xs[t.options.icon])||void 0===e||e.call(xs).then((function(e){var i=e.default;Fe()(n).call(n,".svg-panel").children().remove(),Fe()(n).call(n,".svg-panel").html(i),t.colorWatcher||(t.colorWatcher=t.$watch("options.color",(function(e,n){t.setColor(e)}),!0)),t.setColor(t.options.color)})))},t.setColor=function(e){var t,o,a;e&&(Fe()(t=angular.element(n)).call(t,"path").attr("fill",!0===e?i:e),Fe()(o=angular.element(n)).call(o,"circle").attr("fill",!0===e?i:e),Fe()(a=angular.element(n)).call(a,"polygon").attr("fill",!0===e?i:e))},t.$watch("options.icon",(function(e,n){e!==n&&t.initSvg()}),!0)}]}}]);var ks=n("Tj9R"),$s=n.n(ks);n("iVDd");O.a.directive("hcComposeSelector",[function(){return{restrict:"E",scope:{model:"=ngModel",options:"="},template:$s.a,controller:["$scope","$element","commonSelectorService","dataService","$filter","componentDefaultService","$hcDialog",function(e,t,n,i,o,a,l){var r;e.client=window.client,e.filter_key=e.options.returnFormat?e.options.returnFormat:"id",e.options.multi=null!==(r=e.options.multi)&&void 0!==r?r:2===e.options.selectorType;var c=a.setComponentDefault(e.model,"hc-compose-selector",e.options);if(o("isValidValue")(c)&&(e.model=c),e.options.selectorModel&&!e.options.selectorMapper){var s=e.options.selectorObject||"hcm.model";e.options.selectorMapper=function(t){return i.callHcmOpenApi(s+".get",{model:e.options.selectorModel,id_:"object"===f()(t)?t.id:t})},e.options.multi&&(e.options.selectorMapper=function(t){var n={id:t};return i.callHcmOpenApi(s+".list",{model:e.options.selectorModel,filter_str:null,filter_dict:angular.extend(angular.copy(o("valueToFunc")(e.options.selectorFilter)())||{},n),page_index:1,page_size:500,extra_property:o("valueToFunc")(e.options.extra_property)()})})}e.$watch("model",(function(t,n){var i,o;n&&ae()(i=[null,void 0]).call(i,t)&&(e.model=t,e.selector_label=null),ae()(o=[null,void 0]).call(o,t)||"string"==typeof t&&""===t||t&&e.mapSelector()})),e.itemSelect=function(t,i){if(t&&t.stopPropagation(),0===i.value)n[e.options.selector+"Dialog"](e.options).then((function(t){var n,o;o=q()(t)?w()(t).call(t,(function(e){return e.id})):t.id;var a=Fe()(n=e.options.list).call(n,(function(e){return e.value===i.value})),l={};(null==a?void 0:a.filterMode)?l[a.filterMode]=o:l=o,e.model=l}));else{var o;e.selector_label=i.label;var a=Fe()(o=e.options.list).call(o,(function(e){return e.value===i.value})),l={};(null==a?void 0:a.filterMode)?l[a.filterMode]=a.value:l=i.value,e.model=l,e.options.originObject=null}};var d=function(t){if(e.options.multi){var n,i=[];w()(n=t.list).call(n,(function(t){var n=e.options.individual_name||"name_alias";i.push(o("getJSON")(n,t)||t.name)})),e.selector_label=i.toString()}else e.selector_label="name"in t?t.name:t};e.mapSelector=function(){var t,n,i,o="object"!==f()(e.model)||q()(e.model)?null:null===(t=re()(e.model||{}))||void 0===t?void 0:t[0];if(o)if(null===(n=L()(o))||void 0===n?void 0:n.call(o,"fm:")){var a;e.selector_label=(Pe()(a=e.options.list).call(a,(function(e){return e.filterMode===o}))[0]||{}).label}else{var l=e.model[o];e.options.selectorMapper(l).then((function(t){e.options.originObject=e.options.multi?t.list:t,e.options.change&&e.options.change(e,t),e.model&&d(t)}))}else e.model<0?e.selector_label=(Pe()(i=e.options.list).call(i,(function(t){return t.value===e.model}))[0]||{}).label:e.options.selectorMapper(e.model).then((function(t){e.options.originObject=e.options.multi?t.list:t,e.options.change&&e.options.change(e,t),e.model&&d(t)}))},e.onClick=function(n){var i,a;n&&n.stopPropagation(),e.options&&o("valueToFunc")(e.options.readOnly)()||!(e.options.list||[]).length||l.dropdownList(w()(i=Pe()(a=e.options.list).call(a,(function(e){return!o("valueToFunc")(e.hide)()}))).call(i,(function(e){return Object(Pt.a)({key:e.value,name:e.label},e)})),null,t,{styles:{minWidth:t.outerWidth()+"px"}}).then((function(t){e.itemSelect(null,t)}))},e.del=function(t){t&&t.stopPropagation(),e.selector_label=null,e.model=null,e.options.originObject=null,e.options.change&&e.options.change(e,null)}}]}}]);var Os=n("a9Ck"),Ds=n.n(Os),Cs=(n("iWvb"),n("BHT/")),Ms=n("g1Qd"),Ss=function(){function e(e,t,n){var i,o,a,l,r,c=this;this.scope=e,this.hcDialog=t,this.timeout=n,e.client=window.client,e.only_content="content"===(null===(i=e.options)||void 0===i?void 0:i.returnFormat),e.displayDirective=(null===(o=e.options)||void 0===o?void 0:o.singleView)?"hc-input":"hc-text-area",e.text=e.only_content?e.model:null===(a=e.model)||void 0===a?void 0:a.content,e.text="json"===(null===(l=e.options)||void 0===l?void 0:l.mode)&&"object"===f()(e.text)?j()(e.text):e.text,e.options=e.options||{},e.placeholder=(null===(r=e.options)||void 0===r?void 0:r.placeholder)||"","hc-input"===e.displayDirective?e.options.customClick=function(){return Object(Pt.c)(c,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,e.editCompute()];case 1:return[2,t.sent()]}}))}))}:e.options.customFocus=function(){return Object(Pt.c)(c,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,e.editCompute()];case 1:return[2,t.sent()]}}))}))},e.editCompute=function(){return Object(Pt.c)(c,void 0,void 0,(function(){var i,o,a,l,r,c,s,d,u,_,p;return Object(Pt.e)(this,(function(m){return e.options.readOnly=!0,t.getDialog(Cs.a).size("super-max").show({compute:e.only_content?te()(new Ms.a,{content:e.model}):e.model,service:(null===(i=e.options)||void 0===i?void 0:i.computeService)||null,mode:(null===(o=e.options)||void 0===o?void 0:o.mode)||"python",extra_desc:(null===(a=e.options)||void 0===a?void 0:a.extra_desc)||null,operate_list:(null===(l=e.options)||void 0===l?void 0:l.operate_list)||[],need_check:!0===(null===(r=e.options)||void 0===r?void 0:r.need_check),check_args_input:null===(s=null===(c=e.options)||void 0===c?void 0:c.check_args_input)||void 0===s||s,hide_operate:!0===(null===(d=e.options)||void 0===d?void 0:d.hide_operate),fieldFormat:null===(u=e.options)||void 0===u?void 0:u.fieldFormat,attachment:null!==(p=null===(_=e.options)||void 0===_?void 0:_.attachment)&&void 0!==p?p:{enable:!1,path:"_attachment"},options:e.options}).then((function(t){var n,i,o;(null===(n=e.options)||void 0===n?void 0:n.returnFormat)?(e.model=t[null===(i=e.options)||void 0===i?void 0:i.returnFormat],e.text=e.model):(e.model=t,e.text=(null===(o=e.model)||void 0===o?void 0:o.content)||e.text)})),n((function(){e.options.readOnly=!1}),1e3),[2]}))}))},e.change=function(){var t,n;e.text=e.only_content?e.model:null===(t=e.model)||void 0===t?void 0:t.content,e.text="json"===(null===(n=e.options)||void 0===n?void 0:n.mode)&&"object"===f()(e.text)?j()(e.text):e.text,e.options=e.options||{}},e.$watch("model",(function(t,n){t!==n&&e.change()}))}return e.prototype.$onInit=function(){},e.$inject=["$scope","$hcDialog","$timeout"],e}();O.a.directive("hcInputCompute",(function(){return{restrict:"E",template:Ds.a,scope:{options:"=",model:"=ngModel",placeholder:"@"},controller:Ss}}));n("iluf");var Es=n("x2r2"),Ps=n.n(Es),js=(n("oSlQ"),function(){function e(e,t,i,o){var l=this;this.scope=e,this.http=t,this.$element=i,this.$rootScope=o,this.BASE_URL=window.hcm_wengen+"/document/uEditor",this.init=function(){return Object(Pt.c)(l,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){var t;switch(e.label){case 0:return[4,n.e(185).then(n.t.bind(null,"e+Gt",7))];case 1:return e.sent(),[4,n.e(184).then(n.t.bind(null,"AGh3",7))];case 2:return e.sent(),[4,n.e(186).then(n.t.bind(null,"ObVO",7))];case 3:return e.sent(),Fe()(t=this.$element).call(t,"#hcUEditorContainer > div").attr("id",this.uuid),window.uParse("#"+this.uuid,{}),this.Editor=window.UE.getEditor(this.uuid,{lang:"zh-cn",UEDITOR_HOME_URL:"/static/resources/lib/uEditor/",imagePath:"/static/resources/lib/uEditor/",serverUrl:this.BASE_URL,zIndex:999999,imageActionName:"upload",imageUrlPrefix:"/document/loadsourceimage?index=",allHtmlEnabled:!0,allowDivTransToP:!0}),this.Editor.hcm_wengen=window.hcm_wengen,this.utils=window.UE.utils,this.registerUI(),[2]}}))}))},this.initData=function(){return Object(Pt.c)(l,void 0,void 0,(function(){var e,t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,(e=this).getContentByIndex(e.scope.model)];case 1:return(t=n.sent())&&e.setContent(t),[2]}}))}))},this.registerUI=function(){var e=l;we()((function(){var t;window.UE.ui.buttons.save.onclick=a()(t=function(){var e,t=""+this.Editor.getContent(),n=window.UE.htmlparser(t),i="";w()(e=n.getNodesByTagName("p")).call(e,(function(e){var t=e.getAttr("data-background");t&&(i=t)})),this.save('<html lang="zh-cn"><head><title></title></head><body style="text-align:center"><div style="'+i+'">'+t+"</div></body></html>")}).call(t,e)}),800)},this.save=function(e){var t=l;t.$rootScope.show_waiting(!0),t.http.post(l.BASE_URL+"?action=saveHtml"+window.hcm_env_post,{actions:"saveHtml",html:e}).then((function(e){var n=e.data;t.scope.model=n.index,console.log("result:"+j()(n))})).finally((function(){t.$rootScope.hide_waiting(!0)}))},this.getContentByIndex=function(e){return Object(Pt.c)(l,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return console.log("index:"+e),[4,this.http.post(this.BASE_URL+"?action=index"+window.hcm_env_post,{index:e})];case 1:return[2,t.sent().data.content]}}))}))},this.setContent=function(e){var t=l;t.Editor.ready((function(){t.Editor.setContent(e)}))},this.scope=e,this.http=t,this.$element=i,this.$rootScope=o,te()(e,this),this.uuid="idxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}return e.prototype.$onInit=function(){var e=this;this.init().then((function(){return Object(Pt.c)(e,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return[4,this.initData()];case 1:return e.sent(),[2]}}))}))}))},e.prototype.$onDestroy=function(){window.UE.delEditor(this.uuid)},e.$inject=["$scope","$http","$element","$rootScope"],e}());window.app.directive("hcUEditor",[function(){return{restrict:"E",template:Ps.a,scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:js}}]);var Ts=function(){function e(e,t,n){this.$rootScope=e,this.$controller=t,this.$compile=n}return e.prototype.getPanel=function(e){var t=this;return{options:{template:e.template,controller:e.controller},showPanel:function(n,i){var o=t.$rootScope.$new();o.params=i;var a=t.$controller(e.controller,{$scope:o},!0)();o.$ctrl=a,this.$ctrl=a;var l=$(e.template);a.element=l,l.data("$ngControllerController",a);var r=t.$compile(l)(o);return n.html(r),this}}},e.$inject=["$rootScope","$controller","$compile"],e}();O.a.service("$hcPanel",Ts);var As=n("OqSx"),Is=n.n(As),Ls=function(){function e(e){this.$filter=e}return e.prototype.valueMask=function(e){return this.options.mask?this.options.mask(e):e},e.$inject=["$filter"],e}(),Fs=(n("N8gl"),{template:Is.a,controller:Ls,bindings:{model:"=ngModel",options:"="}}),Rs=(window.app.component("hcInputMask",Fs).name,n("TDuI")),Bs=n.n(Rs),Us=function(){function e(e){this.$filter=e}return e.prototype.itemMask=function(e){return this.options.itemMask?this.options.itemMask(e):e},e.prototype.removeItem=function(e){var t;b()(t=this.model).call(t,e,1)},e.prototype.editItem=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){var t,n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return t=this.model,n=e,[4,this.options.editSelector(angular.copy(this.model[e]))];case 1:return t[n]=i.sent(),[2]}}))}))},e.prototype.addItem=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return this.model=this.model||[],[4,this.options.newSelector()];case 1:var n;if(e=t.sent(),q()(e))this.model=ie()(n=this.model).call(n,e);else this.model.push(e);return[2]}}))}))},e.$inject=["$filter"],e}(),qs=(n("MXMH"),{template:Bs.a,controller:Us,bindings:{model:"=ngModel",options:"="}}),Ws=(window.app.component("hcInputTag",qs).name,n("88R2")),zs=n.n(Ws),Ns=(n("n/Oj"),{select:"point",geo:"point","select-circle":"circle","select-polygon":"polygon"}),Ks=function(){function e(e,t,i,o,a,l,r,c){var s=this;this.$scope=e,this.$rootScope=t,this.$element=i,this.$timeout=o,this.$filter=a,this.$hcDialog=l,this.componentDefaultService=r,this.locationService=c,this.client=window.client,this.selectLocation=function(){return Object(Pt.c)(s,void 0,void 0,(function(){var e,t,i,o,a,l,r,c,s;return Object(Pt.e)(this,(function(d){switch(d.label){case 0:return e=null===(l=this.data)||void 0===l?void 0:l.longitude,t=null===(r=this.data)||void 0===r?void 0:r.latitude,this.$filter("isValidValue")(e)&&this.$filter("isValidValue")(t)||(i=window.storage.getItem("local","hc_input_location_last_selected",null),e=null==i?void 0:i.longitude,t=null==i?void 0:i.latitude),[4,Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"Zvc7"))];case 1:return o=d.sent().locationDialog,a=this,[4,this.$hcDialog.getDialog(o).params({mode:Ns[this.options.mode]||"point",longitude:e,latitude:t,radius:null===(c=this.data)||void 0===c?void 0:c.radius,path:null===(s=this.data)||void 0===s?void 0:s.path,data:this.data}).show()];case 2:return a.data=d.sent(),"object"===this.options.returnFormat?[2,this.data]:"select-circle"===this.options.mode?[2,{longitude:this.data.longitude,latitude:this.data.latitude,radius:this.data.radius}]:"select-polygon"===this.options.mode?[2,this.data.path]:"location"===this.options.returnFormat?[2,this.data.location]:"geo"===this.options.returnFormat?[2,this.data.geo]:[2]}}))}))},this.geoLocation=function(){return Object(Pt.c)(s,void 0,void 0,(function(){var e,t,n,i,o;return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.locationService.getLocationByGeo()];case 1:return e=a.sent(),[3,3];case 2:return t=a.sent(),console.log(t),[2];case 3:return n=e.longitude,i=e.latitude,"object"!==this.options.returnFormat?[3,5]:(o=[Object(Pt.a)(Object(Pt.a)({},e),{longitude:n,latitude:i,location:n+","+i,geo:i+","+n})],[4,this.locationService.getLocationInfo(n,i)]);case 4:return[2,Pt.a.apply(void 0,ie()(o).call(o,[a.sent()]))];case 5:if("location"===this.options.returnFormat)return[2,n+","+i];if("geo"===this.options.returnFormat)return[2,i+","+n];a.label=6;case 6:return[2]}}))}))}}return e.prototype.$onInit=function(){var e,t,n,i;return Object(Pt.c)(this,void 0,void 0,(function(){var o,a,l=this;return Object(Pt.e)(this,(function(r){var c;switch(r.label){case 0:return this.options.returnFormat=(null===(e=this.options)||void 0===e?void 0:e.returnFormat)||"location",this.options.mode=(null===(t=this.options)||void 0===t?void 0:t.mode)||"select",this.map_element=Fe()(c=this.$element).call(c,".map-img"),[4,this.componentDefaultService.setComponentDefault(this.model,"hc-input-location",this.options)];case 1:return o=r.sent(),this.$filter("isValidValue")(o)?!0!==o?[3,3]:[4,this.geoLocation()]:[3,5];case 2:o=r.sent(),r.label=3;case 3:return a=this,[4,this.parseModel(o)];case 4:return a.model=r.sent(),this.refresh(),null===(i=null===(n=this.options)||void 0===n?void 0:n.change)||void 0===i||i.call(n,o,void 0),[3,6];case 5:this.refresh(),r.label=6;case 6:return this.startWatchModel(),this.$scope.$watch("$ctrl.options.mode",(function(e,t){e!==t&&l.refresh()})),this.resizeListenter=function(){clearTimeout(l.resize_timer),l.resize_timer=we()((function(){l.refresh()}),233)},window.addEventListener("resize",this.resizeListenter,!1),[2]}}))}))},e.prototype.$onDestroy=function(){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){return window.removeEventListener("resize",this.resizeListenter,!1),[2]}))}))},e.prototype.startWatchModel=function(){var e=this;this.terminateWatchModel(),this.modelWatcher=this.$scope.$watch("$ctrl.model",(function(t,n){var i,o;t!==n&&(e.refresh(),null===(o=null===(i=e.options)||void 0===i?void 0:i.change)||void 0===o||o.call(i,t,n))}))},e.prototype.terminateWatchModel=function(){var e;null===(e=this.modelWatcher)||void 0===e||e.call(this)},e.prototype.parseModel=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return"object"!==this.options.returnFormat||"object"!==f()(e)?[3,2]:(t=[Object(Pt.a)(Object(Pt.a)({},e),{location:e.longitude+","+e.latitude,geo:e.latitude+","+e.longitude})],[4,this.locationService.getLocationInfo(e.longitude,e.latitude)]);case 1:return[2,Pt.a.apply(void 0,ie()(t).call(t,[n.sent()]))];case 2:return[2,e]}}))}))},e.prototype.refresh=function(){var e,t;return Object(Pt.c)(this,void 0,void 0,(function(){var n,i,o,a,l,r,c,s,d,u,_,p,m,h,g,v;return Object(Pt.e)(this,(function(b){switch(b.label){case 0:if(!this.$filter("isValidValue")(this.model))return this.data=null,this.map_element[0].style.background=null,[2];if("object"===this.options.returnFormat&&"object"===f()(this.model)){if(q()(this.model))return console.log("hc-input-location "+this.options.mode+" 数据格式错误"),console.log(this.model),[2];this.data=Object(Pt.a)(Object(Pt.a)({},this.data),this.model),n=this.model.longitude,i=this.model.latitude,"select-polygon"===this.options.mode?(o=this.locationService.getPolygonBounds(this.data.path),c=o.center,s=o.bounds,this.data.bounds=s):this.data.radius&&(this.data.bounds=this.locationService.getCircleBounds(n,i,this.data.radius))}else"select-circle"===this.options.mode?(a=this.model,this.data.radius=a.radius,n=a.longitude,i=a.latitude,this.data.bounds=this.locationService.getCircleBounds(n,i,this.data.radius)):"select-polygon"===this.options.mode?(l=this.model,this.data.path=l,r=this.locationService.getPolygonBounds(l),c=r.center,s=r.bounds,n=c.longitude,i=c.latitude,this.data.bounds=s):"string"==typeof this.model&&(d=this.model.split(","),"geo"===this.options.returnFormat&&(d=fl()(d).call(d)),v=Object(Pt.f)(d,2),n=v[0],i=v[1]);b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.locationService.getLocationInfo(n,i)];case 2:return u=b.sent(),[3,4];case 3:return b.sent(),u={address:"string"==typeof this.model?this.model:n+","+i},[3,4];case 4:return this.data=Object(Pt.a)(Object(Pt.a)(Object(Pt.a)({},this.data),u),{location:n+","+i,geo:i+","+n,longitude:n,latitude:i}),window.storage.setItem("local","hc_input_location_last_selected",this.data),_=this.map_element.outerWidth(),p=this.map_element.outerHeight(),_&&p?(m=n,h=i,g=null===(e=this.data)||void 0===e?void 0:e.path,"select-polygon"===this.options.mode&&(null==g?void 0:g.length)>=3?(m=null,h=null):g=null,this.map_element[0].style.background="url("+this.locationService.getMapImgUrl(m,h,Math.ceil(_)+1,Math.ceil(p)+1,g,"mobile"===this.client?2:1,m&&h&&"中国"!==(null===(t=this.data)||void 0===t?void 0:t.country)?"baidu":"amap")+") no-repeat center/cover, url("+location.protocol+"//"+location.host+window.hcm_wengen+"/img?index=) no-repeat center, #f8f8f8",[2]):[2]}}))}))},e.prototype.onClick=function(e){var t,n,i;return Object(Pt.c)(this,void 0,void 0,(function(){var o,a,l;return Object(Pt.e)(this,(function(r){switch(r.label){case 0:return null==e||e.stopPropagation(),this.$filter("valueToFunc")(null===(t=this.options)||void 0===t?void 0:t.readOnly)()?[2]:(o=this.model,"function"!=typeof this.options.onClick?[3,2]:[4,this.options.onClick(this.model,this.selectLocation,this.geoLocation)]);case 1:return a=r.sent(),[3,6];case 2:return"geo"!==this.options.mode?[3,4]:[4,this.geoLocation()];case 3:return a=r.sent(),[3,6];case 4:return[4,this.selectLocation()];case 5:a=r.sent(),r.label=6;case 6:return this.terminateWatchModel(),l=this,[4,this.parseModel(a)];case 7:return l.model=r.sent(),this.refresh(),this.model!==o&&(null===(i=null===(n=this.options)||void 0===n?void 0:n.change)||void 0===i||i.call(n,this.model,o)),this.startWatchModel(),[2]}}))}))},e.prototype.clear=function(e){null==e||e.stopPropagation(),this.model=null},e.$inject=["$scope","$rootScope","$element","$timeout","$filter","$hcDialog","componentDefaultService","InputLocationService"],e}();O.a.component("hcInputLocation",{bindings:{model:"=ngModel",options:"<?"},controller:Ks,template:zs.a});var Hs=function(){function e(e,t,n){var i=this;this.$timeout=e,this.$hcDialog=t,this.$filter=n,this.parseList=function(e,t){var n,o=e;e&&t&&"object"===f()(t)&&g()(n=re()(t)).call(n,(function(e){if(i.$filter("isValidValue")(t[e]))if("object"!==f()(t[e]))o=Pe()(o).call(o,(function(n){return n[e]===t[e]}));else if(q()(t[e]))o=Pe()(o).call(o,(function(n){var i;return null===(i=t[e])||void 0===i?void 0:ae()(i).call(i,n[e])}));else{var n;g()(n=re()(t[e])).call(n,(function(n){switch(n){case"in":o=Pe()(o).call(o,(function(i){var o;return null===(o=t[e][n])||void 0===o?void 0:ae()(o).call(o,i[e])}));break;case"notin":o=Pe()(o).call(o,(function(i){var o;return!(null===(o=t[e][n])||void 0===o?void 0:ae()(o).call(o,i[e]))}))}}))}}));return o}}return e.prototype.getMyData=function(){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return[4,this.$hcDialog.getDialog().params({}).show()];case 1:return[2,e.sent()]}}))}))},e.$inject=["$timeout","$hcDialog","$filter"],e}();window.app.service("superSelectorService",Hs);var Vs=n("d1AN"),Ys=n.n(Vs),Gs=function(){function e(e,t,n,i){this.scope=e,this.hcDialog=t,this.$timeout=n,this.$filter=i}return e.prototype.onClick=function(e){var t=this;null==e||e.stopPropagation(),this.options&&this.$filter("valueToFunc")(this.options.readOnly)()||D.a.getCustomDialogCtrl("HCMScriptEditorDialog").then((function(e){t.hcDialog.getDialog(e).show({data:"json"===t.options.mode?j()(t.model):t.model,options:{mode:t.options.mode,refer_data:t.options.refer_data,operates:t.options.alter_operates}}).then((function(e){var n,i;t.model="json"===t.options.mode?JSON.parse(e):e,null===(i=(n=t.options).change)||void 0===i||i.call(n,t.scope,t.model)}))}))},e.prototype.$onInit=function(){},e.$inject=["$scope","$hcDialog","$timeout","$filter"],e}(),Js=(n("GFsN"),{template:Ys.a,controller:Gs,bindings:{model:"=ngModel",options:"=",placeholder:"@"}}),Xs=(window.app.component("hcInputScript",Js).name,n("yJFs")),Qs=n.n(Xs),Zs=(n("4Wti"),function(){function e(e,t,n,i,o){this.scope=e,this.hcDialog=t,this.$timeout=n,this.$filter=i,this.baseCRUDService=o}return e.prototype.$onInit=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return e=this,[4,this.baseCRUDService.getModelService(this.options.selectorModel).getItemList(null,this.options.selectorFilter?this.$filter("valueToFunc")(this.options.selectorFilter)():null,0,this.options.max||20)];case 1:return e.refer_list=n.sent(),this.scope.$ctrl.options.multi&&(this.model||(this.model=[]),"object"!==f()(this.model)&&(t=this.model,this.model=[],this.model.push(t))),[2]}}))}))},e.prototype.select=function(e){var t,n,i;this.scope.$ctrl.options.multi?(this.model||(this.model=[]),s()(n=this.model).call(n,e.id)>-1?b()(i=this.model).call(i,null===(t=this.model)||void 0===t?void 0:s()(t).call(t,e.id),1):this.model.push(e.id)):this.model=e.id},e.prototype.isSelected=function(e){var t;return this.scope.$ctrl.options.multi?(null===(t=this.model)||void 0===t?void 0:s()(t).call(t,e))>-1:this.model==e||void 0},e.$inject=["$scope","$hcDialog","$timeout","$filter","BaseCRUDService"],e}()),ed={template:Qs.a,controller:Zs,bindings:{model:"=ngModel",options:"=",placeholder:"@"}},td=(window.app.component("hcInputRefer",ed).name,n("zdEE")),nd=n.n(td),id=n("BF1V"),od=n.n(id),ad=function(){function e(e){this.dataService=e,this.OPERATE_LIST=[{key:"eq",name:"等于"},{key:"neq",name:"不等于"},{key:"gt",name:"大于"},{key:"lt",name:"小于"},{key:"gte",name:"大于等于"},{key:"lte",name:"小于等于"},{key:"in",name:"列表中包含"},{key:"notin",name:"列表中不包含"},{key:"child_include",name:"包含下级"},{key:"isnull",name:"为空"},{key:"like",name:"包含"},{key:"llike",name:"左包含"},{key:"rlike",name:"右包含"}],this.AGGR_MODE_LIST=[{name:"计数",value:"count"},{name:"去重计数",value:"distinct_count"},{name:"分组聚合",value:"group_concat"},{name:"合计",value:"sum"},{name:"最小值",value:"min"},{name:"最大值",value:"max"},{name:"平均",value:"avg"}],this.FIELD_TYPE_ICON={numeric:"icon-hcm-type-number",float:"icon-hcm-type-number",integer:"icon-hcm-type-number",string:"icon-hcm-type-text",text:"icon-hcm-type-text",boolean:"icon-hcm-radio-circle",datetime:"icon-hcm-clock",date:"icon-hcm-calendar",link:"icon-hcm-link",formula:"icon-hcm-type-formulas"}}return e.prototype._repairFilter=function(e,t){var n;e=null!=e?e:{};var i={};return g()(n=re()(e)).call(n,(function(n){var o;!L()(n).call(n,t+".")&&"string"==typeof e[n]&&L()(o=e[n]).call(o,":"+t+".")?i[e[n].substring(1)]=":"+n:i[n]=e[n]})),i},e.prototype._repairStaticFilter=function(e,t){e=angular.copy(null!=e?e:[]);var n=w()(e).call(e,(function(e){return e.key})),i=V()(new od.a(ie()([]).apply([],Object(Pt.h)(w()(t).call(t,(function(e){var t,n;return w()(t=Pe()(n=Pe()(e)).call(n,(function(e){return"filter"===e.value.type}))).call(t,(function(e){return e.value.value}))})))))),o=Pe()(i).call(i,(function(e){return s()(n).call(n,e)<0}));return g()(o).call(o,(function(t){switch(t){case"date_":e.push({key:"date_",label:"日期",component:"hc-input-datetime"})}})),e},e.prototype.filter2VisFilter=function(e){var t;e=null!=e?e:{};var n,i=function(e){return e&&L()(e)&&L()(e).call(e,":")?{type:"field",value:r()(e).call(e,1)}:e&&L()(e)&&L()(e).call(e,"=")?{type:"formula",value:e}:{type:"const",value:e}};return n=[],g()(t=re()(e)).call(t,(function(t){var o,a=e[t];null!==a&&"object"===f()(a)?g()(o=re()(a)).call(o,(function(e){n.push({key:t,op:e,value:i(a[e])})})):n.push({key:t,op:"eq",value:i(a)})})),n},e.prototype.visFilter2Filter=function(e){var t=function(e){if(!e)return null;switch(e.type){case"field":return":"+e.value;case"formula":return""+e.value;default:return e.value}},n={};return g()(e).call(e,(function(e){e.key in n||(n[e.key]={}),"eq"===e.op?n[e.key]=t(e.value):n[e.key]instanceof Object&&(n[e.key][e.op]=t(e.value))})),n},e.prototype.visDataSource2Origin=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){var t,n,i,o,a;return Object(Pt.e)(this,(function(l){var r;switch(l.label){case 0:return t=this,n=e.model_relation,i=e.static_filters,[4,this.visDataSourceCheck(e)];case 1:return l.sent(),o=Pe()(n).call(n,(function(e){return"master"===e.key}))[0],a=Pe()(n).call(n,(function(e){return"master"!==e.key})),[2,{static_filters:angular.copy(i),model:o.model,relation_mode:o.relation_mode||null,conditions:Pe()(o)?t.visFilter2Filter(angular.copy(Pe()(o))):{},relations:w()(r=angular.copy(a)).call(r,(function(e){return{model:e.model,key:e.key,name:e.name,type:e.type,ondemand:e.ondemand,filter:t.visFilter2Filter(Pe()(e)),field_context:e.field_context,state:e.state}}))}]}}))}))},e.prototype.origin2VisDataSource=function(e){return Object(Pt.c)(this,void 0,G.a,(function(){var t,n,i,o;return Object(Pt.e)(this,(function(a){var l;return t=this,n=angular.copy(e,{}),i=n.model?ie()(l=[{key:"master",name:"主模型",model:n.model,relation_mode:n.relation_mode,filter:n.conditions}]).call(l,n.relations):[],g()(i).call(i,(function(e){e.filter=t.filter2VisFilter(t._repairFilter(Pe()(e),e.key)),e.relation_mode="master"===e.key?e.relation_mode:null})),o=t._repairStaticFilter(e.static_filters,i),[2,{model_relation:i,static_filters:o}]}))}))},e.prototype.meta2VisMeta=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){var t,n,i;return Object(Pt.e)(this,(function(o){var a,l;switch(o.label){case 0:return e=angular.copy(e),[4,this.origin2VisDataSource(e)];case 1:return t=o.sent(),n=t.model_relation,i=t.static_filters,e.model_relation=n,e.static_filters=i,delete e.model,delete e.conditions,delete e.relations,e.aggr=e.aggr||[],e.aggr_dim=Pe()(a=e.aggr).call(a,(function(e){return"dim"in e})),e.aggr_aggr=Pe()(l=e.aggr).call(l,(function(e){return"aggr"in e})),delete e.aggr,[2,e]}}))}))},e.prototype.visMeta2Meta=function(e){var t,n;return Object(Pt.c)(this,void 0,void 0,(function(){var i,o;return Object(Pt.e)(this,(function(a){var l,r;switch(a.label){case 0:return[4,this.visDataSource2Origin({model_relation:e.model_relation,static_filters:e.static_filters})];case 1:return i=a.sent(),delete(o=angular.copy(e)).static_filters,delete o.model_relation,o.static_filters=i.static_filters,angular.extend(o,i),[4,this.metaFieldCheck({aggr:o.aggr_aggr,dim:o.aggr_dim,sorts:o.sorts},e.model_relation)];case 2:return a.sent(),o.aggr=ie()(l=null!==(t=o.aggr_dim)&&void 0!==t?t:[]).call(l,w()(r=null!==(n=o.aggr_aggr)&&void 0!==n?n:[]).call(r,(function(e){var t;return e.aggr.field=L()(t=e.aggr.field).call(t,"master.")?e.aggr.field.substring(7,e.aggr.field.length):e.aggr.field,e}))),delete o.aggr_dim,delete o.aggr_aggr,[2,o]}}))}))},e.prototype.getMultiModelFields=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.paas.object.field.list",{filter_dict:{model:e,has_name:!0,is_logic:!0},extra_property:{}})];case 1:return[2,t.sent().list]}}))}))},e.prototype.getModelRelationFields=function(e){return Object(Pt.c)(this,void 0,G.a,(function(){var t,n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return[4,this.getMultiModelFields(w()(e).call(e,(function(e){return e.model})))];case 1:return t=i.sent(),n=[],g()(e).call(e,(function(e){var i;n=ie()(n).call(n,w()(i=Pe()(t).call(t,(function(t){return t.model===e.model}))).call(i,(function(t){return{key:"master"===e.key?t.key:e.key+"."+t.key,name:e.name+"."+t.name+"("+e.model+"."+t.key+")",short_name:t.name+(t.object?"(主键)":""),model:e.model,model_key:e.key,model_name:e.name,type:t.type}})))})),[2,n]}}))}))},e.prototype.getModelRelationGroupFields=function(e){return Object(Pt.c)(this,void 0,G.a,(function(){var t,n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return[4,this.getMultiModelFields(w()(e).call(e,(function(e){return e.model})))];case 1:return t=i.sent(),n=[],g()(e).call(e,(function(e){var i;n.push({key:e.key,name:e.name,list_fields:w()(i=Pe()(t).call(t,(function(t){return t.model===e.model}))).call(i,(function(t){return{name:t.name+(t.object?"(主键)":""),category_name:e.name,category_key:e.key,key:"master"===e.key?t.key:e.key+"."+t.key,type:"var"}}))})})),[2,n]}}))}))},e.prototype.getModelRelationFieldDict=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.getModelRelationFields(e)];case 1:return[2,t.sent().toObject((function(e){return e.key}),(function(e){return e}))]}}))}))},e.prototype.getModelFieldBizMeta=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.paas.object.field.biz.meta",{field:e,biz_type:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.getTreeLoaderByModelRelation=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){var n,i,o,a;return Object(Pt.e)(this,(function(l){switch(l.label){case 0:return n=this.FIELD_TYPE_ICON,e?e.child?[2,e.child]:[4,this.getMultiModelFields(e.model)]:[3,3];case 1:return i=l.sent(),[4,this.getModelFieldBizMeta(w()(i).call(i,(function(e){return{model:e.model,field:e.key}})),"list")];case 2:return o=l.sent(),a=i.toObject((function(e){return e.model+"."+e.key}),(function(e,t){return o[t]})),[2,w()(i).call(i,(function(t){return{key:t.key,model_key:e.key,name:t.name+(t.object?"(主键)":""),is_leaf:!0,icon:n[t.type],meta:a[t.model+"."+t.key],id:t.key}}))];case 3:return[4,this.getMultiModelFields(w()(t).call(t,(function(e){return e.model})))];case 4:return i=l.sent(),[4,this.getModelFieldBizMeta(w()(i).call(i,(function(e){return{model:e.model,field:e.key}})),"list")];case 5:return o=l.sent(),a=i.toObject((function(e){return e.model+"."+e.key}),(function(e,t){return o[t]})),[2,w()(t).call(t,(function(e){var t,o=w()(t=Pe()(i).call(i,(function(t){return t.model===e.model}))).call(t,(function(t){return{key:t.key,model_key:e.key,name:t.name+(t.object?"(主键)":""),is_leaf:!0,icon:n[t.type],meta:a[t.model+"."+t.key],id:t.key,layer:1}}));return{id:e.key,key:e.key,model:e.model,name:e.name,is_leaf:!1,child:o}}))]}}))}))},e.prototype.getFilterFormulaRefer=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){var i;switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.formula.list",{domain:"base.report"})];case 1:return t=n.sent(),[2,[{label:"可选变量",items:w()(e).call(e,(function(e){return{label:e.label,category:"上下文参数",value:e.key,type:"var"}}))},{label:"可选公式",items:w()(i=t.list).call(i,(function(e){return{label:e.name,value:e.name,category:e.category,type:"func",helper:{title:e.description,description:e.doc}}}))}]]}}))}))},e.prototype.getVisItemByNode=function(e,t){var n,i,o,a,l,c,s;switch(t){case"dim":a=e.model_key+"_"+e.key,o=te()({},e.meta,{key:a,dim:{field:"master"===e.model_key?e.key:e.model_key+"."+e.key},field:(l=a,s=angular.copy(e.meta.field),e.meta.field[0]!==e.meta.key?ie()(c=[r()(l).call(l,0,-3)]).call(c,b()(s).call(s,1)):[l])});break;case"aggr":a=e.model_key+"_"+e.key,o=te()({},e.meta,{key:a,aggr:{ag:"count",field:"master"===e.model_key?e.key:e.model_key+"."+e.key},field:[a]});break;case"sort":o={label:e.meta.label,key:"master"===e.model_key?e.key:e.model_key+"."+e.key,type:"asc"};break;default:a=e.model_key+"_"+e.key,o=te()({},e.meta,{key:a,field:"master"===e.model_key?e.meta.field:ie()(n=[e.model_key]).call(n,e.meta.field),origin_key:"master"===e.model_key?e.key:e.model_key+"."+e.key,fields:e.meta.fields?"master"===e.model_key?e.meta.fields:w()(i=e.meta.fields).call(i,(function(t){return e.model_key+"."+t})):void 0})}return o},e.prototype.visDataSourceCheck=function(e){var t,n;return Object(Pt.c)(this,void 0,void 0,(function(){var i,o,a,l,r,c,s,d,u,_,p,m,f,h,g,v,b;return Object(Pt.e)(this,(function(y){var x;switch(y.label){case 0:if(i=e.model_relation,o=e.static_filters,V()(new od.a(w()(i).call(i,(function(e){return e.key})))).length!==i.length)throw new Error("模型标记必须是唯一的：存在重复标记值");if(1!==(a=Pe()(i).call(i,(function(e){return"master"===e.key}))).length)throw new Error("有且必须只有一个主模型定义（master）");if(a=a[0],Pe()(a)&&Pe()(x=Pe()(a)).call(x,(function(e){return"field"===e.value.type})).length>0)throw new Error("主模型关系中只允许定义固定值或公式");if(l=Pe()(i).call(i,(function(e){return"master"!==e.key})),(r=Pe()(l).call(l,(function(e){return(Pe()(e)||[]).length<1}))).length>0)throw new Error("非主模型必须定义关系："+r[0].name+"未定义关系");return[4,this.getModelRelationFieldDict(i)];case 1:c=y.sent();try{for(s=Object(Pt.i)(o),d=s.next();!d.done;d=s.next())if(u=d.value,c.hasOwnProperty(u.key))throw new Error("静态过滤"+u.key+"与主模型字段冲突，将会带来不可预料的错误，请修改")}catch(e){h={error:e}}finally{try{d&&!d.done&&(g=s.return)&&g.call(s)}finally{if(h)throw h.error}}_=function(e){var i,o=(null===(t=Pe()(e))||void 0===t?void 0:Pe()(t).call(t,(function(t){var n;return!((null===(n=c[t.key])||void 0===n?void 0:n.model)===e.model)})))||[];if(o.length>0)throw new Error(e.name+"关系定义中字段"+o[0].key+"不存在或者不属于该模型");var a=(null===(n=Pe()(e))||void 0===n?void 0:Pe()(i=Pe()(n).call(n,(function(e){var t;return"field"===(null===(t=e.value)||void 0===t?void 0:t.type)}))).call(i,(function(e){return!c[e.value.value]})))||[];if(a.length>0)throw new Error(e.name+"关系定义中中值字段"+a[0].value.value+"不存在")};try{for(p=Object(Pt.i)(i),m=p.next();!m.done;m=p.next())f=m.value,_(f)}catch(e){v={error:e}}finally{try{m&&!m.done&&(b=p.return)&&b.call(p)}finally{if(v)throw v.error}}return[2,!0]}}))}))},e.prototype.metaFieldCheck=function(e,t){var n,i,o,a;return Object(Pt.c)(this,void 0,void 0,(function(){var l,r,c,s;return Object(Pt.e)(this,(function(d){switch(d.label){case 0:return[4,this.getModelRelationFieldDict(t)];case 1:var u,_,p;if(l=d.sent(),e.aggr)if((r=Pe()(u=e.aggr).call(u,(function(e){var t;return!l[null===(t=null==e?void 0:e.aggr)||void 0===t?void 0:t.field]}))).length>0)throw new Error("统计字段'"+r[0].label+"'引用了不存在的模型字段："+(null===(i=null===(n=r[0])||void 0===n?void 0:n.aggr)||void 0===i?void 0:i.field));if(e.dim)if((c=Pe()(_=e.dim).call(_,(function(e){var t;return!l[null===(t=null==e?void 0:e.dim)||void 0===t?void 0:t.field]}))).length>0)throw new Error("维度字段'"+c[0].label+"'引用了不存在的模型字段："+(null===(a=null===(o=c[0])||void 0===o?void 0:o.dim)||void 0===a?void 0:a.field));if(e.sorts)if((s=Pe()(p=e.sorts).call(p,(function(e){return!l[null==e?void 0:e.key]}))).length>0)throw new Error("排序字段'"+s[0].key+"'不存在，请修复");return[2]}}))}))},e.$inject=["dataService"],e}();O.a.service("metaVisService",ad);var ld=n("bQov"),rd=function(){function e(e,t,n,i,o){this.scope=e,this.hcDialog=t,this.$filter=n,this.dataService=i,this.metaVisService=o}return e.prototype.onClick=function(){var e=this;D.a.getCustomDialogCtrl("HCMScriptEditorDialog").then((function(t){var n,i,o;e.hcDialog.getDialog(t).show({data:e.model,options:{mode:"json",refer_data:[{label:"可选字段",items:a()(n=e.getReferData).call(n,e)},{label:"可选参数",items:w()(i=e.options.params||[]).call(i,(function(e){return{label:e.label,category:"参数",value:e.key,type:"var"}}))}],operates:[{label:"预览",left:!0,func:a()(o=e.previewData).call(o,e)}]}}).then((function(t){e.model=t}))}))},e.prototype.getReferData=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t,n,i,o;return Object(Pt.e)(this,(function(a){var l;switch(a.label){case 0:return e=[],[4,this.dataService.callHcmOpenApi("hcm.model.meta",{model:this.options.dataModel,state:this.options.dataState,biz_type:"list"})];case 1:return t=a.sent(),e=ie()(e).call(e,w()(l=t.static_filters||[]).call(l,(function(e){return{label:e.label,category:"数据块参数",value:e.key,type:"var"}}))),o=(i=this.metaVisService).getModelRelationFields,[4,this.metaVisService.meta2VisMeta(t)];case 2:return[4,o.apply(i,[a.sent().model_relation])];case 3:return n=a.sent(),[2,e=ie()(e).call(e,w()(n).call(n,(function(e){return{label:e.short_name,category:e.model_name,value:e.key,type:"var"}})))]}}))}))},e.prototype.previewData=function(e){var t,n=this;function i(t){n.hcDialog.getDialog(Object(ld.a)(n.options.dataModel,n.options.dataState)).params({filter_dict:ic.a.jsonEval(JSON.parse(e.getValue()),t)}).show()}this.options.params?this.hcDialog.simpleForm("请输入参数",w()(t=this.options.params).call(t,(function(e){return{component:"hc-input",key:e.key,label:e.label}})),{}).then((function(e){i(e)})):i({})},e.prototype.$onInit=function(){},e.$inject=["$scope","$hcDialog","$filter","dataService",ad],e}(),cd=(n("Q61V"),{template:nd.a,controller:rd,bindings:{model:"=ngModel",options:"=",placeholder:"@"}}),sd=(window.app.component("hcInputQuery",cd).name,n("9BZJ"),n("7JZs")),dd=n.n(sd),ud=(n("1QAC"),function(){function e(e,t,n,i,o){var a,l,r,c=this;this.$document=e,this.$element=t,this.$timeout=n,this.$filter=i,this.calendarService=o,this.row_height=58,this.resizer_height=32,this.client=window.client,this.scrollToSelected=function(e,t){var n=((null!=t?t:c.table_element.height())-c.resizer_height)/2;c.trow_container.scrollTop(Math.max(Math.round(c.selected_vertical_position-n),0))},this.resizeStart=function(e,t){c.resize_start_timestamp=(new Date).getTime(),c.table_element.removeClass("enable-transition"),c.resizer_element.removeClass("open"),c.resizer_element.addClass("moving")},this.resizeEnd=function(e,t){var n=c.view_expanded?c.max_table_height:c.min_table_height,i=Math.abs(c.table_element.height()-n);(i>=c.row_height||i<=20&&(new Date).getTime()-c.resize_start_timestamp<350)&&(c.view_expanded=!c.view_expanded);var o=c.view_expanded?c.max_table_height:c.min_table_height;c.table_element.addClass("enable-transition"),c.resizer_element.removeClass("moving"),c.view_expanded&&c.resizer_element.addClass("open"),c.setTableHeight(o)},this.selectDate=function(e){c.selectedDate=e},this.goCurrentDate=function(){c.selectedDate=c.current_date},this.goPreviousMonth=function(){c.selectedDate=xa(c.selected_date).subtract(1,"month").format("YYYY-MM-DD")},this.goNextMonth=function(){c.selectedDate=xa(c.selected_date).add(1,"month").format("YYYY-MM-DD")},this.noExtend=null!==(a=this.no_extend)&&void 0!==a&&a,this.disableGoto=null!==(l=this.disableGoto)&&void 0!==l&&l,this.disableResize=null!==(r=this.disable_resize)&&void 0!==r&&r,this.current_date=xa().format("YYYY-MM-DD"),this.moment_local=(window.hcm_language||"zh_cn").replace("_","-")}return Oe()(e.prototype,"selectedDate",{get:function(){return this.selected_date},set:function(e){var t,n,i=this,o=this.selected_date;this.selected_date=e;var a=xa(this.selected_date),l=a.year(),r=a.month()+1;this.year===l&&this.month===r||(this.year=l,this.month=r,this.calendar_matrix=this.getMonthDaysMatrix(this.year,this.month),this.max_table_height=this.row_height*this.calendar_matrix.length+this.resizer_height),this.selected_date_str=a.locale(this.moment_local).format("LL"),this.selected_week_index=Be()(t=this.calendar_matrix).call(t,(function(e){return Fe()(e).call(e,(function(e){return e.date===i.selected_date}))})),this.selected_vertical_position=this.selected_week_index*this.row_height+this.row_height/2,null===(n=this.selectCallback)||void 0===n||n.call(this,e,o,this.calendar_matrix),this.$timeout((function(){var e=i.view_expanded?i.max_table_height:i.min_table_height;i.setTableHeight(e),i.scrollToSelected(i.table_element,e),i.view_expanded&&i.resizer_element.addClass("open")}))},enumerable:!0,configurable:!0}),Oe()(e.prototype,"disableResize",{get:function(){return this.disable_resize},set:function(e){this.disable_resize=e,this.view_expanded=!!this.disable_resize,this.resizer_height=this.disable_resize?0:32,this.min_table_height=this.row_height+this.resizer_height},enumerable:!0,configurable:!0}),Oe()(e.prototype,"noExtend",{get:function(){return this.no_extend},set:function(e){this.no_extend=e,this.calendar_matrix=this.getMonthDaysMatrix(this.year,this.month),this.max_table_height=this.row_height*this.calendar_matrix.length+this.resizer_height},enumerable:!0,configurable:!0}),Oe()(e.prototype,"datesConfig",{get:function(){return this.dates_config},set:function(e){this.dates_config=e},enumerable:!0,configurable:!0}),e.prototype.$onInit=function(){var e,t,n,i,o=this;this.row_height=this.rowHeight?this.rowHeight:58,this.table_element=Fe()(e=this.$element).call(e,".calendar-tbody"),this.trow_container=Fe()(t=this.table_element).call(t,".trow-container"),this.resizer_element=Fe()(n=this.table_element).call(n,"hc-resizer"),this.selectedDate=null!==(i=this.selected_date)&&void 0!==i?i:this.current_date,this.table_resize_observer=new ResizeObserver((function(e){o.scrollToSelected()})),this.table_resize_observer.observe(this.trow_container[0]),this.rowHeight&&this.$timeout((function(){o.calendar_matrix=o.getMonthDaysMatrix(o.year,o.month),o.max_table_height=o.row_height*o.calendar_matrix.length+o.resizer_height,o.setTableHeight(o.max_table_height)}))},e.prototype.$onDestroy=function(){this.table_resize_observer.disconnect()},e.prototype.getMonthDaysMatrix=function(e,t){for(var n=xa({year:e,month:Number(t)-1,day:1}),i=n.weekday()<6?n.weekday()+1:0,o=Math.ceil((i+n.daysInMonth())/7),a=n.clone().subtract(i,"day"),l=[],r=0;r<o;r++){l[r]=[];for(var c=1;c<=7;c++){var s=a.format("YYYY-MM-DD"),d=a.month()===Number(t)-1;l[r].push({date:s,label:s===this.current_date?this.$filter("translate")("time_today"):a.format("D"),is_this_month:d,hide:this.no_extend&&!d}),a=a.add(1,"day")}}return l},e.prototype.getDateClass=function(e){var t,n,i,o=null!==(i=null===(n=null===(t=this.dates_config)||void 0===t?void 0:t[e.date])||void 0===n?void 0:n.class)&&void 0!==i?i:[];return"string"==typeof o&&(o=o.split(" ")),o=this.$filter("deepCopy")(o),e.date===this.selected_date&&o.push("selected"),e.is_this_month||o.push("invalid"),o},e.prototype.getDateDesc=function(e){var t,n;this.dates_config=null!==(t=this.dates_config)&&void 0!==t?t:{};var i=null!==(n=this.dates_config[e])&&void 0!==n?n:{};if(!i.hasOwnProperty("desc")){if(this.defaultDesc)i.desc=this.defaultDesc;else{var o=xa(e),a=this.calendarService.solarDayToLunarDay(o.year(),o.month()+1,o.date());i.desc=a.label}this.dates_config[e]=i}return i.desc},e.prototype.isDateMarked=function(e){var t,n;return!!(null===(n=null===(t=this.dates_config)||void 0===t?void 0:t[e])||void 0===n?void 0:n.marked)},e.prototype.setTableHeight=function(e,t){this.table_element.css({height:e+"px"})},e.$inject=["$document","$element","$timeout","$filter","homeWidgetCalendarService"],e}());O.a.component("timeCalendar",{bindings:{selectedDate:"=?",datesConfig:"<?",defaultDesc:"<?",selectCallback:"<?",disableGoto:"<?",disableResize:"<?",noExtend:"<?",rowHeight:"<?"},template:dd.a,controller:ud});var _d=n("fUbB"),pd=n.n(_d);n("WSaC"),n("ehd8");window.app.directive("hcTagNew",[function(){return{restrict:"E",scope:{model:"=ngModel",options:"="},template:pd.a,controller:["$scope","$hcDialog","$timeout","$element","dataService","$filter",function(e,t,n,i,o,a){e.init=function(){e.tags=[],e.selected_items_meta={},e.originObject=[],e.selected_tags=[],e.options.selectorType=2,e.panel_max_height="pc"===client?24:120,e.client=window.client,e.setOverFlowStyle(),e.options.default&&(e.tags=e.options.default,e.selectorMapper(e.tags).then((function(t){e.originObject=t.list}))),e.model&&e.model.length>0&&(e.selectorMapper(e.model).then((function(t){e.originObject=t.list})),e.tags=angular.copy(e.model),e.selected_tags=angular.copy(e.tags))},e.$watch("model",(function(t,n){t!==n&&(e.selected_tags=e.model||[])})),e.$watch("expanded",(function(t,n){t!==n&&e.$emit("subcomponent_expand",e.expanded)})),e.$watch("is_overflow",(function(t,n){t!==n&&e.$emit("subcomponent_overflow",e.is_overflow)})),e.addTag=function(n){var i;null==n||null===(i=n.stopPropagation)||void 0===i||i.call(n),t.getDialog(vc).title(e.options.title||"选择标签").size("pc"===window.client?"large":l(e.options.list)||"bottom-dialog-90").slideInConfig("pc"!==window.client&&e.options.inDrawer?"right":null).show(te()({},e.options,{originObject:e.originObject})).then((function(t){var n;e.originObject=t,e.tags=w()(n=e.originObject).call(n,(function(e){return e.name})),e.selected_tags=angular.copy(e.tags),e.model=angular.copy(e.selected_tags),e.setOverFlowStyle()}))},e.selectorMapper=function(t){var n={};return n.name=t,o.callHcmOpenApi("hcm.model.list",{model:e.options.selectorModel||e.options.model,filter_str:null,filter_dict:angular.extend(angular.copy(a("valueToFunc")(e.options.selectorFilter)())||{},n),page_index:1,page_size:e.options.page_size||50,extra_property:a("valueToFunc")(e.options.extra_property)()},void 0,void 0,!1)},e.itemClick=function(t){var i;e.isSelected(t)?b()(i=e.selected_tags).call(i,e.selected_items_meta[t],1):e.selected_tags.push(t),n((function(){e.model=0!==e.selected_tags.length?e.selected_tags:null}))},e.isSelected=function(t){var n;if(0!==e.selected_tags.length){var i=!1;return w()(n=e.selected_tags).call(n,(function(n,o){i||(i=n===t),i&&(e.selected_items_meta[n]=o)})),i}};var l=function(t){return e.options.inDrawer?"middle":t&&(null==t?void 0:t.length)<6?"bottom-dialog-50":"bottom-dialog-90"};e.checkOverflow=function(){e.is_overflow=Fe()(i).call(i,".tag-items")[0].scrollHeight-16>e.panel_max_height},e.setOverFlowStyle=function(){n((function(){e.checkOverflow(),e.expanded=!1,e.expandClick(),e.is_overflow||(e.expanded=!1)}),300)},e.expandClick=function(){e.expanded=!e.expanded,e.expanded?Fe()(i).call(i,".tag-items").css("max-height","none"):Fe()(i).call(i,".tag-items").css("max-height",e.panel_max_height)}}]}}]);n("7HZp");var md=n("IpWV");window.app.directive("hcLogin",(function(){return{restrict:"E",template:n("wsP6"),scope:{params:"="},controller:["$scope","$rootScope","$http","$filter","contextService","$hcDialog",function(e,t,n,i,o,a){e.init=function(){var t,n,o,a,l,r,c,s,d,u,_;e.mode=null!==(t=null===(n=e.params)||void 0===n?void 0:n.init_mode)&&void 0!==t?t:"password",e.send_time=0,e.show_password=!1,e.app_type=(null===(o=e.params)||void 0===o?void 0:o.app_type)?e.params.app_type:"service",e.next="function"==typeof(null===(a=e.params)||void 0===a?void 0:a.next)?i("valueToFunc")(null===(l=e.params)||void 0===l?void 0:l.next)():null===(r=e.params)||void 0===r?void 0:r.next,e.extra_property="function"==typeof(null===(c=e.params)||void 0===c?void 0:c.extra_property)?null===(s=e.params)||void 0===s?void 0:s.extra_property():null===(d=e.params)||void 0===d?void 0:d.extra_property,e.loginSuccess=null===(u=e.params)||void 0===u||null===(_=u.hooks)||void 0===_?void 0:_.loginSuccess,e.state_name=e.params.state,e.state_params=e.params.state_params,e.disable_login_strengthen_verification=e.getServerContext("disable_login_strengthen_verification"),e.force_login_strengthen_verification=e.getServerContext("force_login_strengthen_verification"),e.password_encrypt_strategy=e.getServerContext("password_encrypt_strategy")||"no",e.send_mobile_code_time=e.getServerContext("send_mobile_code_time")||300,e.private_protocol=e.getServerContext("private_protocol"),!e.disable_login_strengthen_verification&&e.force_login_strengthen_verification&&(e.display_img_code=!0),("get_code"===e.mode||e.display_img_code)&&e.getCodeImg()},e.getServerContext=function(e){var t,n;return null===(t=o.getContext("auth"))||void 0===t||null===(n=t.company_setting)||void 0===n?void 0:n[e]},e.passwordLogin=function(){e.checkValid(e.username,"手机号码/邮箱")&&e.checkValid(e.password,"密码")&&(!e.display_img_code||e.checkValid(e.img_code,"图片验证码"))&&e.checkAgreement()&&n.post(window.hcm_wengen+"/login?mobile="+e.username+"&password="+e.password+"&app_type="+e.app_type+"&encrypt="+e.password_encrypt_strategy+(e.display_img_code?"&image_code="+(e.img_code||""):"")+"&mode=PWD&account_type=master&pure_result=true"+(e.next?"&next="+e.next:"")+(e.extra_property?"&"+e.extra_property:"")).then(function(){var n=p()(u.a.mark((function n(i){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(200!==i.status||void 0!==i.data.success){n.next=8;break}if(n.t0=e.loginSuccess,!n.t0){n.next=5;break}return n.next=5,e.loginSuccess();case 5:t.super_go(e.state_name,e.state_params),n.next=9;break;case 8:i.data.success||(e.display_img_code=i.data.need_img_valid,e.display_img_code&&e.getCodeImg(),e.message=i.data.message);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},e.codeLogin=function(){e.checkValid(e.username,"手机号码/邮箱")&&e.checkValid(e.valid_code,"验证码")&&e.checkAgreement()&&n.post(window.hcm_wengen+"/login?mobile="+e.username+"&valid_code="+e.valid_code+"&app_type="+e.app_type+"&encrypt="+e.password_encrypt_strategy+"&mode=CODE&account_type=master&pure_result=true"+(e.next?"&next="+e.next:"")+(e.extra_property?"&"+e.extra_property:"")).then(function(){var n=p()(u.a.mark((function n(i){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(200!==i.status||void 0!==i.data.success){n.next=8;break}if(n.t0=e.loginSuccess,!n.t0){n.next=5;break}return n.next=5,e.loginSuccess();case 5:t.super_go(e.state_name,e.state_params),n.next=9;break;case 8:i.data.success||(e.display_img_code=i.data.need_img_valid,e.display_img_code&&(e.img_code="",e.getCodeImg()),e.message=i.data.message);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},e.onRegisterBtnClick=function(){t.super_go("login_component_register",{app_type:e.app_type,extra_property:e.extra_property?"&"+e.extra_property:"",next:e.next})},e.onForgetPasswordBtnClick=function(){e.img_code="",e.message="",e.password="",e.display_img_code=!1,e.getCodeImg(),e.changeMode("get_code")},e.onRememberPasswordBtnClick=function(){e.img_code="",e.message="",e.valid_code="",e.changeMode("password")},e.getCode=function(){e.checkValid(e.username,"手机号码/邮箱")&&e.checkValid(e.img_code,"图片验证码")&&n.post(window.hcm_wengen+"/login?mobile="+e.username+"&image_code="+e.img_code+"&mode=GETCODE&account_type=master&pure_result=true"+(e.extra_property?"&"+e.extra_property:"")).then((function(t){t.data.success&&!t.data.message?(e.message="验证码已发送",clearTimeout(e.timer),e.getCodeSendTime(e.username)?(e.send_time=e.getCodeSendTime(e.username),e.count_down=e.send_mobile_code_time-Math.ceil((qr()()-e.send_time)/1e3),e.count_down<0&&(e.count_down=e.send_mobile_code_time,e.setCodeSendTime(e.username))):(e.count_down=e.send_mobile_code_time,e.setCodeSendTime(e.username)),e.countDownStart(),e.changeMode("code"),e.display_img_code=!1):(e.message=t.data.message,e.img_code="",e.getCodeImg())}))},e.getCodeSendTime=function(e){return window.sessionStorage.getItem("login_code_expired"+e)},e.setCodeSendTime=function(e){window.sessionStorage.setItem("login_code_expired"+e,qr()().toString())},e.changeMode=function(t){e.mode=t},e.getCodeImg=function(){e.imageIndex=window.hcm_wengen+"/img_valid_code?a="+Math.random()+window.hcm_env_post},e.checkValid=function(e,n){if(i("isValidValue")(e))return!0;t.show_warning("请输入"+n)},e.countDownStart=function(){e.count_down>=0?(e.count_down--,e.timer=we()((function(){e.$apply((function(){e.countDownStart()}))}),1e3)):(clearTimeout(e.timer),e.countDownEndCallback())},e.countDownEndCallback=function(){e.message="验证码已过期，请重新获取",e.img_code="",e.getCodeImg(),e.changeMode("get_code")},e.changePasswordVisibility=function(){e.show_password=!e.show_password},e.openProtocolDialog=function(){e.protocolEl=document.getElementById("protocol_agreement"),a.getDialog(md.a).title("用户协议").show().then((function(){e.protocolEl.checked=!0}))},e.checkAgreement=function(){return e.protocolEl=document.getElementById("protocol_agreement"),!(e.private_protocol&&!e.protocolEl.checked)||(t.show_warning("请先阅读并同意用户隐私协议"),!1)}}]}}));n("26yk"),n("ncxl");window.app.component("treeMenuSubCategoryDialog",{template:n("Zlwg"),bindings:{model:"<"},transclude:!0,controller:["$rootScope","$scope","$hcDialog","$timeout","$element",function(e,t,n,i,o){t.init=function(){t.model=t.$parent.$dialog,t.parentElement=t.model.options.targetEl[0],i((function(){t.generateMask(t.parentElement)}),300),t.parentElement.addEventListener("mousewheel",(function(){t.model&&t.generateMask(t.parentElement)}))},t.$watch("model.options.params.data",(function(e){e&&i((function(){var e=Fe()(o).call(o,".sub-category-dialog"),n=t.model.options.targetEl;e[0].clientHeight>n[0].clientHeight?e.offset().top<n.offset().top?(e.css("border-top-left-radius","8px"),e.css("border-top-right-radius","8px")):(e.css("border-bottom-left-radius","8px"),e.css("border-bottom-right-radius","8px")):e.offset().left>n.offset().left?(e.css("border-top-left-radius","0"),e.css("border-bottom-left-radius","0")):(e.css("border-top-right-radius","0"),e.css("border-bottom-right-radius","0"))}))})),t.resolveItem=function(e,n){n.stopPropagation(),t.model.resolve_data(e),t.model.dialog_close()},t.generateMask=function(e){var n=function(e,t,n,i,o,a,l,r){e.setAttributeNS(null,"x",t),e.setAttributeNS(null,"y",n),e.setAttributeNS(null,"rx",i),e.setAttributeNS(null,"width",o),e.setAttributeNS(null,"height",a),e.setAttributeNS(null,"fill",l),e.setAttributeNS(null,"pointer-events",r)},i=function(){return document.createElementNS("http://www.w3.org/2000/svg","rect")},o=document.getElementById("hc-dialog-sub-category-mask-svg"),a=document.getElementById("hc-dialog-sub-category-mask:focus"),l=e.getBoundingClientRect(),r=Math.max(l.left,0),c=Math.max(l.top,0),s=l.width,d=l.height,u=[r,c,4,s,d,"black","auto"],_=[0,0,0,"100%",c,"transparent","auto"],p=[r+s,0,0,"calc(100% - ".concat(r+s,"px)"),"100%","transparent","auto"],m=[0,c+d,0,"100%","calc(100% - ".concat(c+d,"px)"),"transparent","auto"],f=[0,0,0,r,"100%","transparent","auto"];if(a){var h,v;t.removeMask();var b=i();n.apply(void 0,ie()(h=[b]).call(h,u)),b.setAttribute("class","hc-dialog-tour-placeholder"),a.appendChild(b),g()(v=[_,p,m,f]).call(v,(function(e){var t,a=i();n.apply(void 0,ie()(t=[a]).call(t,so()(e))),o.appendChild(a)}))}},t.removeMask=function(){var e=document.getElementById("hc-dialog-sub-category-mask-svg"),t=document.getElementById("hc-dialog-sub-category-mask:focus");for(t.children[1]&&t.removeChild(t.children[1]);e.children[2];)e.removeChild(e.children[2])},t.dealMouseOver=function(){t.model.dialog_close()}}]}),window.app.directive("hcTreeMenu",(function(){return{restrict:"E",template:n("8u5t"),scope:{params:"="},controller:["$scope","$rootScope","$hcDialog","$timeout","$element",function(e,t,n,i,o){e.init=p()(u.a.mark((function t(){var n,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data=e.params.data,e.firstCategoryLimited=(null===(n=e.params.menu_config)||void 0===n?void 0:n.firstCategoryLimited)||5,e.secondCategoryLimited=(null===(i=e.params.menu_config)||void 0===i?void 0:i.secondCategoryLimited)||2,e.viewAllItem={id:"all",name:"查看全部"},document.addEventListener("mousewheel",(function(){e.sub_category_dialog&&e.sub_category_dialog.styles(e.calcSubCategoryDialogPosition($("#hc-tree-menu-content")))}));case 5:case"end":return t.stop()}}),t)}))),e.showSubCategory=function(t,i){var o="hc-tree-menu-content"===t.target.id?angular.element(t.target):angular.element(t.target).parents(".hc-tree-menu-content");e.sub_category_dialog?e.sub_category_dialog.styles(e.calcSubCategoryDialogPosition(o)).params({data:i.children}):(e.sub_category_dialog=n.getDialog({component:"tree-menu-sub-category-dialog",name:"tree-menu-sub-category-dialog",maskClose:!0,resolveOnClose:!0,targetEl:o}).styles(e.calcSubCategoryDialogPosition(o)),e.sub_category_dialog.show().then((function(n){e.sub_category_dialog=null,e.hover_item="";var i=angular.element(t.currentTarget);i.removeClass("hover"),i.siblings("div.hover").removeClass("hover"),n&&e.itemClick(n)})),e.sub_category_dialog.params({data:i.children}))},e.dealMouseOver=function(t,i){if(i.children&&0!==i.children.length){var o=angular.element(t.currentTarget);o.siblings("div.hover").removeClass("hover"),e.hover_item!==i.id&&(o.addClass("hover"),e.hover_item=i.id,e.showSubCategory(t,i))}else n.closeTarget("tree-menu-sub-category-dialog")},e.calcSubCategoryDialogPosition=function(e){var t,n,i,o,a,l,r,c,s,d=$(".hc-tree-menu-content:has(div.hover)"),u=e.offset(),_=u.left+e[0].clientWidth,p=u.top+e[0].clientHeight;return _+645>document.body.clientWidth?(t=_=document.body.clientWidth-u.left,o="auto",l=8,s=8,d.addClass("border-radius-left")):(o=_,t="auto",r=8,c=8,d.addClass("border-radius-right")),p+e[0].clientHeight/2>document.body.clientHeight?(i=document.body.clientHeight-p,a=p):(n=u.top,a=document.body.clientHeight-u.top-50),{top:n,right:t,left:o,bottom:i,"max-height":a,"min-height":e[0].clientHeight,"border-top-left-radius":l,"border-top-right-radius":r,"border-bottom-right-radius":c,"border-bottom-left-radius":s,"margin-left":0,transform:"unset",position:"fixed"}},e.itemClick=function(t){e.params.item_click(t)}}]}}));var fd=n("8axT"),hd=n.n(fd),gd=function(){function e(e,t,n,i,o,a,l){var c=this;this.scope=e,this.hcDialog=t,this.$filter=n,this.dataService=i,this.BaseCRUDService=o,this.queryService=a,this.$timeout=l,this.client=window.client,this.mode="simple",this.onClick=function(e){return Object(Pt.c)(c,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){return this.options.beforeClick&&this.options.beforeClick(this.options),this.$filter("valueToFunc")(this.options.readOnly)()||(null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),"simple"===this.mode?this.openSimpleDialog():this.openAdvanceDialog()),[2]}))}))},this.openSimpleDialog=function(){var e,t;c.baseCRUDService=c.BaseCRUDService.getModelService(c.options.selectorModel),null===(e=null==(t=c.options.selector&&"function"==typeof c.options.selector?c.options.selector:function(){return c.baseCRUDService.getQueryFields(c.options.state,"list",[],!1).then((function(e){return w()(e).call(e,(function(e){return{info_fields:e.info_fields,name:e.name,key:e.key}}))}))})?void 0:t())||void 0===e||e.then((function(e){var t,n=[];g()(e).call(e,(function(e){"common_used"!==e.key&&(n=ie()(n).call(n,e.info_fields))})),c.setMeta(n);var i=c.$filter("toObj")(n),o={advanceFields:e,all_info_meta:n,model_meta_object:i,query_str:"object"===c.options.returnFormat&&"string"!=typeof c.model?null===(t=c.model)||void 0===t?void 0:t.value:c.model,translateValue:c.options.translateValue,default_query_fields:c.options.default_query_fields,condition_required:c.options.condition_required,child_include:c.options.child_include,returnFormat:c.options.returnFormat,query_str_value_parser:c.baseCRUDService.convertQueryStrToObj(c.options.state,"list",c.options.meta_info)};c.hcDialog.getDialog(Ir).show(o).then((function(e){c.model=e}),null,(function(){c.openAdvanceDialog()}))}))},this.openAdvanceDialog=function(){c.hcDialog.getDialog(ki.a).show({data:c.model,mode:"python"}).then((function(e){c.model=e}),null,(function(){c.openSimpleDialog()}))},this.del=function(e){var t,n,i;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),c.model=null,null===(i=(n=c.options).delCallback)||void 0===i||i.call(n)},this.setMeta=function(e){w()(e).call(e,(function(e){c.transMeta(e)}))},this.transMeta=function(e){var t;e.options||(e.options={});var n=e.options;n.placeholder=e.label,n.singleLine=!1,void 0===n.multi&&"hc-super-selector"===e.component&&(n.multi=!0),"pc"===c.client&&(n.query=!0),"mobile"===c.client&&(n.singleLine=!1),"number"===n.data_type&&(n.number_no_check=!0);var i=function(t,n,i){var o=this;e.component="hc-selector",t.required&&(t.no_delete=!0),t.component=i,t.dictParams=!0,t.selector=function(a){var l,c,s,d={},u=a.scope.model;u&&(1===re()(u).length?(w()(c=re()(u)).call(c,(function(e){d.operate=o.$filter("compareParse")(e,"character"),d.value=u[e]})),d.query_type=1):(w()(s=re()(u)).call(s,(function(e){"gte"===e&&(d.begin_date=u[e]),"lte"===e&&(d.end_date=u[e])})),d.query_type=2));return w()(l=o.dynamic_filter_list).call(l,(function(t){var n,i;t.key===e.key&&(d.query_type=3,d.dynamic_period=r()(n=t.options.range_step).call(n,0,1),d.number=Number(r()(i=t.options.range_step).call(i,1)),d.unit=t.options.range_unit)})),o.$hcDialog.getDialog(n()).anchor(angular.element(a.event.target).closest("hc-selector")).show({key:e.key,data:d,format:t.format,data_type:t.data_type,data_precision:t.data_precision,default:t.default,component:i,no_delete:t.no_delete,advance_operate_list:t.advance_operate_list})},t.selectorParse=function(e){if(e.dynamic){var t,n,i=s()(t=w()(n=o.dynamic_filter_list).call(n,(function(e){return e.key}))).call(t,e.dynamic.key);return~i?(angular.extend(o.dynamic_filter_list),o.dynamic_filter_list[i]=e.dynamic):o.dynamic_filter_list.push(e.dynamic),o.queryService.setDynamicTime(e.dynamic.options)}var a;return w()(a=o.dynamic_filter_list).call(a,(function(t){var n,i;t.key===e.key&&b()(n=o.dynamic_filter_list).call(n,s()(i=o.dynamic_filter_list).call(i,t),1)})),e.id},t.queryMapper=function(e){var t="";if(1===re()(e).length){var n;w()(n=re()(e)).call(n,(function(n){t=o.$filter("compareParse")(n,"character")+" "+e[n]}))}else{var i=re()(e);t=e[i[0]]+"~"+e[i[1]]}return t}};switch(e.component){case"hc-input":case"hc-input-number":case"hc-input-label-multi":case"hc-text-area":"pc"===c.client?i(n,kr,"hc-input"):(e.component="hc-query-panel",n.singleLine=!1,n.component="hc-input");break;case"hc-input-datetime":n.no_trans_query||("pc"===c.client?i(n,kr,"hc-input-datetime"):(e.component="hc-query-panel",n.singleLine=!1,n.component="hc-input-datetime"));break;case"hc-input-radio":e.component="hc-select",w()(t=e.options.list||[]).call(t,(function(e){e.label=e.name}))}},this.getModel=function(e){return"object"===c.options.returnFormat&&e&&"label"in e?e.label:e}}return e.prototype.$onInit=function(){var e=this;this.scope.$watch("$ctrl.model",(function(t,n){var i,o;t!==n&&(null===(o=(i=e.options).change)||void 0===o||o.call(i,e.scope,e.model))}))},e.$inject=["$scope","$hcDialog","$filter","dataService","BaseCRUDService","queryService","$timeout"],e}();window.app.component("hcInputQueryString",{bindings:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:gd,template:hd.a});var vd=n("P8zp"),bd=n.n(vd),yd=function(){function e(e,t,n,i){var o=this;this.scope=e,this.hcDialog=t,this.$filter=n,this.BaseCRUDService=i,this.client=window.client,this.onClick=function(e){return Object(Pt.c)(o,void 0,void 0,(function(){var t;return Object(Pt.e)(this,(function(n){return null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),this.openDialog(),[2]}))}))},this.openDialog=function(){var e,t;o.baseCRUDService=o.BaseCRUDService.getModelService(o.options.selectorModel),null===(e=null==(t=o.options.selector&&"function"==typeof o.options.selector?o.options.selector:function(){return o.baseCRUDService.getQueryFields(o.options.state,"list",[],!1).then((function(e){return w()(e).call(e,(function(e){return{list_fields:e.list_fields,info_fields:e.info_fields,name:e.name,key:e.key}}))}))})?void 0:t())||void 0===e||e.then((function(e){var t,n,i=[];g()(e).call(e,(function(e){"common_used"!==e.key&&(i=ie()(i).call(i,e.info_fields))}));var a=o.$filter("toObj")(i),l={advanceFields:e,all_info_meta:i,model_meta_object:a,query_str:o.model,selected_list:{list:(null===(t=o.model)||void 0===t?void 0:t.list)||[],info:(null===(n=o.model)||void 0===n?void 0:n.info)||[]},complete_fields:e,remove_info:o.options.onlyList};o.hcDialog.getDialog(wr).show(l).then((function(e){var t,n,i,a;(null===(t=e.list)||void 0===t?void 0:t.length)||(null===(n=e.info)||void 0===n?void 0:n.length)?o.model={list:(null===(i=e.list)||void 0===i?void 0:i.length)?e.list:null,info:(null===(a=e.info)||void 0===a?void 0:a.length)?e.info:null}:o.model=null}))}))},this.del=function(e){var t,n,i;null===(t=null==e?void 0:e.stopPropagation)||void 0===t||t.call(e),o.model=null,null===(i=(n=o.options).delCallback)||void 0===i||i.call(n)},this.valueMask=function(e){var t,n,i,a,l;return e&&((null===(t=e.list)||void 0===t?void 0:t.length)||(null===(n=e.info)||void 0===n?void 0:n.length))?o.options.onlyList?"已选择"+((null===(i=e.list)||void 0===i?void 0:i.length)||0)+"个列表字段，点击继续选择...":"已选择"+((null===(a=e.list)||void 0===a?void 0:a.length)||0)+"个列表字段"+((null===(l=e.info)||void 0===l?void 0:l.length)||0)+"个过滤条件，点击继续选择...":o.options.onlyList?"点击进行列表字段选择":"点击进行列表字段和过滤条件选择"}}return e.prototype.$onInit=function(){var e=this;this.scope.$watch("$ctrl.model",(function(t,n){var i,o;t!==n&&(null===(o=(i=e.options).change)||void 0===o||o.call(i,e.scope,e.model))}))},e.$inject=["$scope","$hcDialog","$filter","BaseCRUDService"],e}();window.app.component("hcInputFieldsSelector",{bindings:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&"},controller:yd,template:bd.a});n("2gEB"),n("lKF2"),n("+0X3"),n("PHVV"),n("dr1a"),n("OJEM"),n("0fmo");var wd=n("D3lZ"),xd=n.n(wd),kd=function(){function e(e){this.$element=e,this.current_transform=0,this.client=window.client}return e.prototype.$onInit=function(){var e,t,n,i,o=this;this.current_index=0,this.current_date=xa().format("YYYY-MM-DD"),null===(t=this.model)||void 0===t||w()(e=t.data).call(e,(function(e,t){e.type<=o.current_date&&(o.current_index=t)})),this.before_num=this.current_index-1>0?this.current_index:0,this.after_num=(null===(n=this.model)||void 0===n?void 0:n.data.length)-(this.current_index+2)>0?(null===(i=this.model)||void 0===i?void 0:i.data.length)-(this.current_index+2):0,this.left_flag=0==this.current_transform,this.right_flag=this.current_transform==100*this.before_num,we()((function(){var e,t,n;w()(e=$(".home-widget-emp-change .node")).call(e,(function(e,t){return t.style.transform="translateX("+100*-(o.current_index-1>0?o.current_index-1:0)+"%)"})),o.left_flag=o.current_index<=1,o.right_flag=(null===(t=o.model)||void 0===t?void 0:t.data.length)<=3||(null===(n=o.model)||void 0===n?void 0:n.data.length)-o.current_index==3}),200)},e.prototype.rollNode=function(e){var t,n,i=this,o=$(".home-widget-emp-change .node");this.current_transform=M()(o[0].style.transform.replace("translateX(","").replace("%)","")||0),"left"==e?this.current_transform=this.current_transform+100:"right"===e&&(this.current_transform=this.current_transform-100),w()(o).call(o,(function(e,t){return t.style.transform="translateX("+i.current_transform+"%)"})),this.left_flag=0==this.current_transform,this.right_flag=!((null===(t=this.model)||void 0===t?void 0:t.data.length)-3>0)||this.current_transform==100*-((null===(n=this.model)||void 0===n?void 0:n.data.length)-3)},e.$inject=["$scope","$rootScope","$element","$timeout","$hcDialog"],e}();window.app.component("homeWidgetEmpChangeTimeline",{bindings:{model:"=ngModel",options:"<?"},controller:kd,template:xd.a});n("bFZk");var $d=n("/AtL"),Od=n.n($d);O.a.directive("hcPrimaryPhoto",[function(){return{restrict:"EA",template:Od.a,scope:{options:"=",key:"=",model:"=ngModel",placeholder:"@",label:"=",disabled:"=ngDisabled",sourceList:"="},controller:["$rootScope","$scope","hcUploadFile","$hcListBtn","$filter","hcImageViewerService","weChatService","$state","dataService","$hcDialog","hcImageService","$element",function(e,t,n,i,o,a,l,r,c,s,d,u){var _=this;t.init=function(){var e=t.model;t.client=window.client,t.options=t.options||{},t.photo_type=t.options.photo_type,"square"===t.photo_type?"mobile"===t.client?t.photo_size=t.options.mobile_photo_size||"44,60":t.photo_size=t.options.photo_size||"125,175":"mobile"===t.client?t.photo_size=t.options.mobile_photo_size||"44,44":t.photo_size=t.options.photo_size||"120,120",t.photo_size=t.photo_size.split(","),t.read_only=t.options.readOnly,t.can_preview=t.options.can_preview,t.camera=t.options.camera,t.upload_label=o("valueToFunc")(t.options.upload_label)(),t.source_list_flag=t.sourceList&&t.sourceList.length>1,t.can_download=t.options.can_download,t.btn_meta=[],t.can_preview&&t.btn_meta.push({label:"预览",icon:"icon-hcm-img-solid",key:"upload",placeholder:"预览图片",func:t.preview}),t.read_only||t.camera||t.btn_meta.push({label:t.upload_label||"上传",icon:"icon-hcm-camera",key:"upload",placeholder:"上传图片",func:t.upload}),!t.read_only&&t.camera&&t.btn_meta.push({label:t.upload_label||("mobile"===t.client?"拍照":"上传"),icon:"icon-hcm-camera",key:"camera",placeholder:"拍照",func:t.upload}),t.source_list_flag&&t.btn_meta.push({label:"切换",icon:"icon-hcm-refresh",placeholder:"切换图片",key:"upload",func:t.change}),t.can_download&&t.btn_meta.push({label:"下载",icon:"icon-hcm-download",placeholder:"下载图片",key:"download",func:t.download}),t.list_btn_model=i.createListBtn().$setMeta(t.btn_meta),t.list_btn_model.actions_group.un_select_actions=t.list_btn_model.actions,t.init_model=e,t.model||(t.model=t.init_model)},t.headerShowMore=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return t.btn_meta&&t.btn_meta.length>1?"mobile"!==t.client?[3,2]:[4,s.btnActions(t.list_btn_model,{name:"hcPrimaryPhoto"})]:[3,4];case 1:return e=Pt.f.apply(void 0,[n.sent(),2]),e[0],e[1].func(),[3,3];case 2:t.btn_meta[0].func(),n.label=3;case 3:return[3,5];case 4:t.btn_meta&&1===t.btn_meta.length&&t.btn_meta[0].func(),n.label=5;case 5:return[2]}}))}))},t.handleImgRightClick=function(e){!t.read_only||t.can_download||t.can_preview||null==e||e.preventDefault()},t.upload=function(){return Object(Pt.c)(_,void 0,void 0,(function(){var e,i,o;return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return(e=angular.extend({type:"img",size:"5MB",upload_type:"auto",url:"/img"},t.options)).multiple=!1,t.options.upload_img?(Fe()(u).call(u,".hc-input-img-add").click(),[2]):((null==e?void 0:e.params)&&(null===(o=e.params)||void 0===o?void 0:o.ignore_login)&&(e.params.ignore_login=qr()().toString()),[4,n.upload(e)]);case 1:return i=a.sent(),t.model=i.index,[4,t.saveImg()];case 2:return a.sent(),[2]}}))}))},t.saveImg=function(){return Object(Pt.c)(_,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return t.options.save_api?(t.save_api=t.options.save_api,t.save_params=o("valueToFunc")(t.options.save_params)(t,r),[4,c.callHcmOpenApi(t.save_api,Object(Pt.a)(Object(Pt.a)({},t.save_params),{info:{photo:t.model}}))]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.addImg=function(e){t.is_uploading=!0,d.uploadImg(e).then((function(e){t.model=e,t.saveImg()}))},t.download=function(){var e=o("hcPhoto")(t.model);t.downLoadName=o("valueToFunc")(t.options.downLoadName)();var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){var i=o("securityFilter")(n.response),a=window.URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=(t.downLoadName||t.label)+".jpeg",l.click()},n.send()},t.preview=function(){var e,n=[o("commonImage")(t.model,[t.options.image_config||"hcPhoto"])];"pc"===t.client?a.showImg(n,0):(e={current:n[0],urls:n},l.preViewImg(e))},t.change=function(){},t.showMore=function(e){e.stopPropagation(),t.is_show_operate=!t.is_show_operate}}]}}]);var Dd=n("ntX9"),Cd=n("AkJS"),Md=n.n(Cd),Sd=function(){function e(e,t,n){var i=this;this.$onInit=function(){i.maskOptions={onClick:i.dataBlockSetting,mask:i.dataBlockMask}},this.onClick=function(e){i.$filter("valueToFunc")(i.options.readOnly)()||(null==e||e.stopPropagation(),i.dataBlockSetting())},this.dataBlockSetting=function(){return Object(Pt.c)(i,void 0,void 0,(function(){var e=this;return Object(Pt.e)(this,(function(t){return this.hcDialog.getDialog(Dd.a).show({data:angular.copy(this.model),context:this.options.context,hide_preview:this.options.hide_preview,hide_previewAll:this.options.hide_previewAll}).then((function(t){e.model=t})),[2]}))}))},this.dataBlockMask=function(e){return e?"已定义"+e.length+"个数据块，点击继续定义...":"点击进行数据块定义"},this.scope=e,this.hcDialog=t,this.$filter=n}return e.prototype.valueMask=function(e){return this.dataBlockMask(e)},e.$inject=["$scope","$hcDialog","$filter"],e}();window.app.component("hcInputDataBlock",{bindings:{model:"=ngModel",options:"<?"},controller:Sd,template:Md.a});var Ed=n("sYR6"),Pd=n.n(Ed),jd=n("nSVW"),Td=n.n(jd),Ad=n("r/mB"),Id=n("irzn"),Ld=n("AjA1"),Fd=n("DuDV"),Rd=function(e){function t(t,n,i,o,a,l,r,c){var s=e.call(this,t,n,i,o,r)||this;return s.scope=t,s.rootScope=n,s.hcDialog=i,s.hcForm=o,s.dataService=a,s.metaVisService=l,s.$filter=r,s.dataBlockService=c,s.info_meta=Id,s}return Object(Pt.d)(t,e),t.prototype.getMeta=function(){return Object(Pt.c)(this,void 0,G.a,(function(){var e,t,n=this;return Object(Pt.e)(this,(function(i){var o,l,r,c;(e=this,t=ic.a.jsonEval(Pe()(o=this.info_meta.fields).call(o,(function(t){return!e.options.mode||t.mode===e.options.mode})),{scope:this.scope,$ctrl:this}),e.options.mode||(t.getKey("filter_dict").options.tip="master模型过滤条件及其与主数据模型的关联关系写在这里"),t.getKey("relations"))&&(t.getKey("relations").options.mask=a()(l=this.manualMetaMask).call(l,this),t.getKey("relations").options.onClick=a()(r=this.manualMetaVis).call(r,this));t.getKey("sorts")&&(t.getKey("sorts").options.itemMask=function(e){return e.label||e.key},t.getKey("sorts").options.newSelector=a()(c=this.visItemAdd).call(c,this),t.getKey("sorts").options.editSelector=function(t){return Object(Pt.c)(n,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,e.hcDialog.getDialog(Fd.a).show({data:t})];case 1:return[2,n.sent()]}}))}))});return[2,t]}))}))},t.prototype.getAlterOperator=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){var t;return[2,[{label:"高级",func:a()(t=this.advanceEdit).call(t,this),left:!0}]]}))}))},t.prototype.initForm=function(){var t;return Object(Pt.c)(this,void 0,G.a,(function(){var n;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return n=this,[4,e.prototype.initForm.call(this)];case 1:var o;if(i.sent(),null===(t=this.info_meta)||void 0===t?void 0:t.groups)this.form_model.$setGroups(Pe()(o=this.info_meta.groups).call(o,(function(e){return!n.options.mode||e.mode===n.options.mode})));return[2]}}))}))},t.prototype.initOptions=function(){var t;return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initOptions.call(this)];case 1:return n.sent(),(null===(t=this.info_meta)||void 0===t?void 0:t.tip)&&(this.options.tip=this.info_meta.tip),[2]}}))}))},t.prototype.manualMetaVis=function(){var e=this,t={model:this.form_model.data.model,relations:this.form_model.data.relations||[]};this.hcDialog.getDialog(Ld.a).show({exclude_domain:["static"],data:t}).then((function(t){e.form_model.data.model=t.model,e.form_model.data.relations=t.relations}))},t.prototype.manualMetaMask=function(e){var t,n;return this.form_model.data.model?""+ie()(t=[this.form_model.data.model]).call(t,w()(n=e||[]).call(n,(function(e){return(e.name||e.key)+"-"+e.model}))).join(";"):"主模型为空，请点击进行定义..."},t.prototype.visItemAdd=function(){return Object(Pt.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return[4,this.metaVisService.meta2VisMeta(this.form_model.data)];case 1:return e=i.sent(),[4,this.hcDialog.getDialog(lr.a).size("middle").show({treeLoader:function(t){return Object(Pt.c)(n,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.metaVisService.getTreeLoaderByModelRelation(t,e.model_relation)];case 1:return[2,n.sent()]}}))}))},multi:!0})];case 2:return t=i.sent(),[2,w()(t).call(t,(function(e){return n.metaVisService.getVisItemByNode(e,"sort")}))]}}))}))},t.prototype.advanceEdit=function(){var e=this;this.hcDialog.getDialog(ki.a).show({readOnly:!1,data:j()(this.form_model.data)}).then((function(t){te()(e.form_model.data,JSON.parse(t))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","metaVisService","$filter","dataBlockService"],t}(Ne.a),Bd={title:"关联关系设置",name:"关联关系设置",template:He.a,controller:Rd},Ud=function(e){function t(t,n,i,o,a){var l=e.call(this,t,n,i,o,a)||this;return l.scope=t,l.rootScope=n,l.hcDialog=i,l.hcList=o,l.filter=a,l}return Object(Pt.d)(t,e),t.prototype.getData=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){return[2,angular.copy(this.scope.params.data)]}))}))},t.prototype.getRowOperator=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){return[2,null]}))}))},t.prototype.initDialog=function(){return Object(Pt.c)(this,void 0,G.a,(function(){var t;return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initDialog.call(this)];case 1:return n.sent(),t=this,this.scope.$dialog.setClose((function(){j()(t.scope.params.data)!==j()(t.list_model.data)?t.hcDialog.confirm("数据已修改，确认不保存关闭吗?").then((function(){t.scope.$dialog.dialog_close()})):t.scope.$dialog.dialog_close()})),[2]}}))}))},t.prototype.getMeta=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){return[2,[{key:"key",label:"标识",field:["key"]},{key:"name",label:"名称",field:["name"]},{key:"type",label:"取数模式",field:["type"],mask:[{key:"single",name:"单行"},{key:"multi",name:"多行"}]}]]}))}))},t.prototype.getAlterOperator=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){var t;return[2,[{label:"新增关联关系",left:!0,direction:"up",func:a()(t=this.newItem).call(t,this)}]]}))}))},t.prototype.getInfoOptions=function(){var e;return{context:this.options.context,index_block:Pe()(e=this.list_model.data).call(e,(function(e){return e.page_count}))[0]}},t.prototype.editItem=function(e){var t=this;e.relations=e.relations||[],this.hcDialog.getDialog(Bd).show({data:e,options:this.getInfoOptions()}).then((function(n){e?e=te()(e,n):(t.list_model.data=t.list_model.data||[],t.list_model.data.push(n)),t.list_model.$refreshData()}))},t.prototype.newItem=function(){var e=this;this.hcDialog.getDialog(Bd).show({options:this.getInfoOptions()}).then((function(t){e.list_model.data=e.list_model.data||[],e.list_model.data.push(t),e.list_model.$refreshData()}))},t.prototype.parseData=function(){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(e){return[2,angular.copy(this.list_model.data)]}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","$filter"],t}(Ad.a),qd={title:"关联列表",template:Td.a,controller:Ud},Wd=function(){function e(e,t,n){var i=this;this.$onInit=function(){i.maskOptions={onClick:i.dataBlockSetting,mask:i.dataBlockMask}},this.onClick=function(e){i.$filter("valueToFunc")(i.options.readOnly)()||(null==e||e.stopPropagation(),i.dataBlockSetting())},this.dataBlockSetting=function(){return Object(Pt.c)(i,void 0,void 0,(function(){var e=this;return Object(Pt.e)(this,(function(t){return this.hcDialog.getDialog(qd).show({data:angular.copy(this.model),context:this.options.context}).then((function(t){e.model=t})),[2]}))}))},this.dataBlockMask=function(e){return e?"已定义"+e.length+"个关联数据块，点击继续定义...":"点击进行关联定义"},this.scope=e,this.hcDialog=t,this.$filter=n}return e.prototype.valueMask=function(e){return this.dataBlockMask(e)},e.$inject=["$scope","$hcDialog","$filter"],e}();window.app.component("hcInputDataRelation",{bindings:{model:"=ngModel",options:"<?"},controller:Wd,template:Pd.a});var zd=n("TMUX"),Nd=n.n(zd),Kd=function(){function e(e,t,n){var i=this;this.$onInit=function(){i.maskOptions={onClick:i.dataBlockSetting,mask:i.dataBlockMask}},this.onClick=function(e){i.$filter("valueToFunc")(i.options.readOnly)()||(null==e||e.stopPropagation(),i.dataBlockSetting())},this.dataBlockSetting=function(){return Object(Pt.c)(i,void 0,void 0,(function(){var e=this;return Object(Pt.e)(this,(function(t){return this.hcDialog.getDialog(Bd).show({data:angular.copy(this.model),options:{mode:"block"}}).then((function(t){e.model=t})),[2]}))}))},this.dataBlockMask=function(e){return"点击定义数据源..."},this.scope=e,this.hcDialog=t,this.$filter=n}return e.prototype.valueMask=function(e){return this.dataBlockMask(e)},e.$inject=["$scope","$hcDialog","$filter"],e}();window.app.component("hcInputDataBlockSingle",{bindings:{model:"=ngModel",options:"<?"},controller:Kd,template:Nd.a});n("2vh3");var Hd=function(){function e(e,t){this.$q=e,this.dataService=t}return e.prototype.getInstanceInfo=function(e,t,n,i){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(o){switch(o.label){case 0:return e?[4,this.dataService.callHcmOpenApi("hcm.comm.instance.get",{id_:e,owner:n,code:i})]:[3,2];case 1:return[2,o.sent()];case 2:return[4,this.dataService.callHcmOpenApi("hcm.comm.private.instance.get",{member:t,code:i})];case 3:return[2,o.sent()]}}))}))},e.prototype.getCommMessageList=function(e,t,n,i,o){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.message.list",{instance_id:e,from_:t,page_size:n,end_ts:i,code:o})];case 1:return[2,a.sent()]}}))}))},e.prototype.getNewCommMessageList=function(e,t,n,i){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.new.message.list",{instance_id:e,from_:t,owner:n,code:i})];case 1:return[2,o.sent()]}}))}))},e.prototype.judgeMessageRead=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.message.unread.judge",{ids:e,code:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.sendMessage=function(e,t,n,i,o){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.message.send",{instance_id:e,component:t,content:n,sender:i,code:o})];case 1:return[2,a.sent()]}}))}))},e.prototype.fetchInstInfo=function(e,t,n,i,o){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(a){switch(a.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.fetch.inst.info",{instance_id:e,last_ts:n,owner:t,msg_ids:i||[],code:o})];case 1:return[2,a.sent()]}}))}))},e.prototype.readMessage=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.set.message.read",{instance_id:e,code:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.SetMessageReadById=function(e,t){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.set.read.by.id",{message_id:e,code:t})];case 1:return[2,n.sent()]}}))}))},e.prototype.getQuestionFromKeyword=function(e,t,n){return Object(Pt.c)(this,void 0,G.a,(function(){return Object(Pt.e)(this,(function(i){switch(i.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.similar.keys.tip",{content:e,cutoff:t,code:n},"session,0.015",null,!1)];case 1:return[2,i.sent()]}}))}))},e.prototype.feedback=function(e,t,n,i){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.useful.message.list",{instance_id:e,source_id:t,is_useful:n,code:i})];case 1:return[2,o.sent()]}}))}))},e.prototype.messageRecall=function(e){return Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.comm.recall.message",{id_:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.callAgent=function(e,t,n,i){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),Object(Pt.c)(this,void 0,void 0,(function(){return Object(Pt.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.ai.agent",{name:e,params:t,alter_message:n,stream_key:i})];case 1:return[2,o.sent()]}}))}))},e.$inject=["$q","dataService"],e}();O.a.service("HCMCommService",Hd);n("A1tD");var Vd=n("ewae"),Yd=n("EVdn");window.app.directive("hcCommComponent",["$compile","$hcDialog","HCMCommService",function(e,t,n){var i=this;return{restrict:"EA",scope:{isOwner:"=",component:"=",content:"=",proxy:"=",onlyread:"="},template:"<div class='hc-comm-component'\"></div>",link:function(o,a){var l=function(e,a){return Object(Pt.c)(i,void 0,void 0,(function(){var i=this;return Object(Pt.e)(this,(function(l){return o.isOwner?(null==e||e.stopPropagation(),null==e||e.preventDefault(),t.getDialog({template:'<div><ul><li ng-click="clear($event)"><span class="icon-hcm-back"></span>  撤回</li></ul></div>',controller:["$scope",function(e){e.clear=function(t){null==t||t.stopPropagation(),e.$dialog.resolve_data(),e.$dialog.dialog_close()}}],mask:!1,maskClose:!0}).anchor(angular.element(e.target)).styles({width:"100px",borderRadius:"4px"}).size("small").name("chat-right-click-dropdown").show().then((function(){return Object(Pt.c)(i,void 0,void 0,(function(){return Object(Pt.e)(this,(function(e){switch(e.label){case 0:return[4,n.messageRecall(a).then((function(e){var t,n;e.success&&(o.component=null===(t=e.response)||void 0===t?void 0:t.component,o.content=null===(n=e.response)||void 0===n?void 0:n.content,r())}))];case 1:return e.sent(),[2]}}))}))})),[2]):[2]}))}))},r=function(){Vd.a.loadComponent("hc-comm-"+o.component,!0).then((function(){var t="<hc-comm-"+o.component+'\n                            class="'+(o.isOwner?"is-owner":"")+"\"\n                            options='content'\n                            proxy='proxy'\n                            onlyread='onlyread'\n                            >\n                        </hc-comm-"+o.component+">";a.html(t),e(a.contents())(o)}))};r(),a.off("contextmenu").contextmenu((function(e){var t=Yd(this).attr("data-id");l(e,t),o.$apply()}))}}}]),n("akBX"),n("lQeB");var Gd=n("Ga1B"),Jd=n("ustT");function Xd(e,t){var n=re()(e);if(Te.a){var i=Te()(e);t&&(i=Pe()(i).call(i,(function(t){return X()(e,t).enumerable}))),n.push.apply(n,i)}return n}window.app.directive("hcModelView",[function(){return{template:n("Tb5b"),scope:{params:"="},controller:["$scope","BaseCRUDService","$controller","$hcDialog","contextService","$filter",function(e,t,n,i,o,a){var l=t.getModelService(e.params.model);n(xc.a,{$scope:e,CRUDService:l,InfoDialog:Object(bc.a)(e.params.model)}),e.getMetaState=function(){return e.params.nav_state||e.params.meta_state},e.setMeta=function(t,n,o){return i.getDialog(o?Jd.a:Gd.a).show(function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)g()(n=Xd(Object(i),!0)).call(n,(function(t){Ie()(e,t,i[t])}));else if(Se.a)Ce()(e,Se()(i));else{var o;g()(o=Xd(Object(i))).call(o,(function(t){Oe()(e,t,X()(i,t))}))}}return e}({model:e.params.id,biz_type:t,state:n},o))},e.child_states={base:"common_model_view_base",multi:"common_model_view_multi",single:"common_model_view_single",info:"common_model_view_info"},e.initMultiView=function(){var t;(null===(t=e.params.multi_view_key)||void 0===t?void 0:L()(t).call(t,"multiView"))&&(e.multi_view_config={position:"top",valueOnChange:function(t){var n=t[e.params.parent_field]||t.id;dataService.callHcmOpenApi("hcm.model.get",{model:e.model_meta.model,id_:n}).then((function(i){e.item_info=t;var o=angular.extend(angular.copy(e.params),{id:n,name:i.name});e.params=o}))}},e.mutli_view_top=e.params.multi_view_key&&"top"===e.multi_view_config.position)},e.setState=function(){var t=angular.extend({},{key:e.nav_items[0].key});e.params=angular.extend(e.params,t)},e.getItemInfo=p()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==f()(e.params.id)&&!e.params.id){t.next=4;break}return t.next=3,l.getItemInfo(e.params.id,e.getFrom(),e.getExtraProperty());case 3:e.item_info=t.sent;case 4:case"end":return t.stop()}}),t)}))),e.isCurrent=function(t){var n,i;if(t.key===e.params.key)return!0;if(t.no_model)return!1;if(t.params)for(var o=0,a=re()(null!==(l=null==t?void 0:t.params)&&void 0!==l?l:{});o<a.length;o++){var l,r,c=a[o];if(void 0!==t.params[c]&&(e.params[c]&&e.params[c]!==(null===(r=t.params[c])||void 0===r?void 0:r.toString())))return!1}if(e.params.base_object_str!==(null==t||null===(n=t.params)||void 0===n?void 0:n.base_object_str))return!1;if(!e.params.c_model)return!0;if(t.meta_state&&t.meta_state!==e.params.meta_state)return!1;if(null==t||null===(i=t.params)||void 0===i?void 0:i.c_model){var s=t.params.c_model===e.params.c_model;return t.params.meta_state?s&&t.params.meta_state===e.params.meta_state:s}return!0},e.getEnvironmentParams=function(){return angular.extend({},e.params||{})},e.getRestParams=function(){return{state_params:e.params}},e.goFunc=function(t,n){if(e.goFuncBefore(t),a("isValidValue")(n)&&(e.current_nav=n),e.current_hover=null,t.func)t.func(t);else{var i=angular.extend({},e.params,t.params,{key:t.key});e.params=i,e.nowState="",we()((function(){switch(t.jump_state){case"common_model_view_base":e.nowState="base";break;case"common_model_view_multi":e.nowState="multi";break;case"common_model_view_single":e.nowState="single"}}),100)}},e.init=p()(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.nowState=e.params.state,e.auth=o.getContext("auth"),t.t0=e.initBeforeAsync,!t.t0){t.next=6;break}return t.next=6,e.initBeforeAsync();case 6:return t.next=8,e.loadModelMeta();case 8:e.initMultiView();case 9:case"end":return t.stop()}}),t)}))),e.goChild=function(t,n){var i,o,a;if("object"!==f()(t)?(a=t,o=e.nav_items[a]):(o=t,a=n),e.current_nav===a&&(null===(i=o.list)||void 0===i?void 0:i.length)&&!angular.isUndefined(a))e.current_nav=null;else{e.current_nav=a,"mobile"===e.client&&a.target instanceof HTMLElement&&e.scrollIntoView(a.target);var l=(o.list||[]).length&&!o.model?o.list[0]:o;o.list&&!e.auto_go_first_child||e.goFunc(l,a)}},e.initAfter=function(){e.goChild(e.nav_items[0],0)},e.createLabel=function(t){var n;return t.icon||e.expand?t.label:r()(n=t.label).call(n,1)}}]}}]);n("XKcw");var Qd=n("0Xdj");window.app.directive("hcModelViewBase",[function(){return{template:n("eR9L"),scope:{params:"="},controller:["$scope","$controller","BaseCRUDService",function(e,t,n){var i=e.params.base_object_str?n.getBaseService(e.params.base_object_str):n.getModelService(e.params.model);t(Qd.a,{$scope:e,CRUDService:i,InfoDialog:Object(bc.a)(e.params.model)}),e.initBefore=function(){e.model_name="crud_view_"+e.params.model+"_"+e.params.meta_state},e.getInfoAlterParam=function(){return{model:e.params.model}},e.getItemID=function(){return e.params&&e.params.id},e.getMetaState=function(){return e.params.meta_state}}]}}]);n("pp/y");var Zd=n("YvK2");window.app.directive("hcModelViewSignle",[function(){return{template:n("Nvbu"),scope:{params:"="},controller:["$scope","$controller","BaseCRUDService",function(e,t,n,i){var o=e.params.base_object_str?i.getBaseService(e.params.base_object_str):i.getModelService(e.params.c_model);n(Zd.a,{$scope:e,CRUDService:o,InfoDialog:Object(bc.a)(e.params.c_model)}),e.title=e.params.caption,e.getInfoAlterParam=function(){return{model:e.params.c_model}},e.getFilterDict=function(){var t={};return t[e.params.parent_field||"origin_id"]=$filter("tryInteger")(e.params.id),t},e.getItemID=function(){return e.params&&e.params.id},e.getMetaState=function(){return e.params.meta_state}}]}}]);var eu=n("9DwR");window.app.directive("hcModelViewMulti",[function(){return{template:n("vLjf"),scope:{params:"="},controller:["$controller","$scope","BaseCRUDService","$filter","listGlobalConfigService",function(e,t,n,i,o){var a=t.params.base_object_str?n.getBaseService(t.params.base_object_str):n.getModelService(t.params.c_model);e(eu.a,{$scope:t,CRUDService:a,InfoDialog:t.params.base_object_str?Object(bc.a)(null,null,t.params.base_object_str):Object(bc.a)(t.params.c_model)}),t.title=t.params.caption,t.category_id=i("isValidValue")(t.params.category_id)?M()(t.params.category_id,10):null,t.category_field=t.params.category_field,t.getFilterDict=function(){var e={};if(t.params.parent_field){var n=t.params.appoint?t.params.appoint_id:t.params.id;e[t.params.parent_field]=i("tryInteger")(n)}return e},t.getInfoAlterParam=function(){return{model:t.params.c_model}},t.getPagingParams=p()(u.a.mark((function e(){var n,i,a,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getListGlobalConfig();case 2:return n=e.sent,i=n.paging,a=i.page_size_list,l=i.page_size,e.abrupt("return",{page_size_list:a,current_page:(t.params.view_params||[]).page_index,page_size:(t.params.view_params||[]).page_size||t.page_size||l});case 5:case"end":return e.stop()}}),e)}))),t.parseUrlFilterStr=function(){return(t.params.view_params||[]).filter_str},t.getPageDefault=function(){var e;return ie()(e="".concat(t.params.c_model,"-")).call(e,t.params.meta_state)},t.fetchCategory=p()(u.a.mark((function e(){var o,a,l,r,c,s,d,_,p,m,f,h,g,v,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.category_list,t.showCategoryEdit=t.getCategoryEdit(),!t.params.categorySelector){e.next=9;break}return e.next=5,t.params.categorySelector();case 5:d=e.sent,s=d.list,e.next=32;break;case 9:if(!(null===(o=t.params)||void 0===o?void 0:o.category_selector_api)){e.next=17;break}return m=((null===(_=t.params)||void 0===_?void 0:_.category_selector_params)?i("valueToFunc")(t.funcParse(t.params.category_selector_params))(t.params):null===(p=t.params)||void 0===p?void 0:p.category_selector_params)||{},e.next=13,dataService.callHcmOpenApi(t.params.category_selector_api,m);case 13:f=e.sent,s=angular.isArray(f)?f:f.list||f.result.list,e.next=32;break;case 17:if(!(null===(a=t.category_meta)||void 0===a?void 0:a.object)){e.next=24;break}return e.next=20,n.getModelService(t.category_meta.object).getItemList(null,{enabled:!0},null,1e3,{state:(t.params.meta_state||"")+"_category"});case 20:h=e.sent,s=h.list,e.next=32;break;case 24:if(!(null===(l=t.category_meta)||void 0===l?void 0:l.refer)){e.next=31;break}return e.next=27,n.getModelService(t.category_meta.refer).getItemList(null,{},null,1e3,{state:(t.params.meta_state||"")+"_category"});case 27:v=e.sent,s=w()(g=v.list).call(g,(function(e){return{id:e.name,name:e.name}})),e.next=32;break;case 31:(null===(r=t.category_meta)||void 0===r?void 0:r.mask)?s=w()(b=t.category_meta.mask).call(b,(function(e){return{id:e.key,name:e.name}})):(null===(c=t.list_config)||void 0===c?void 0:c.category_list)?s=t.list_config.category_list:t.category_field&&$hcDialog.notify("Category Field不具备展开条件","warning");case 32:return t.category_list=s,e.abrupt("return",t.category_list);case 34:case"end":return e.stop()}}),e)}))),t.getMetaState=function(){return t.params.meta_state}}]}}]);n("CXT3"),n("BA/D"),n("0/o2"),n("ycTW"),n("n6mP"),n("YGK9"),n("fjVq"),n("qUvo"),n("McPW"),n("YCGa"),n("499Y"),n("VZqk"),n("VSoI"),n("LZSG"),n("VGtR"),n("fN3S"),n("5oKP"),n("H7Z3"),n("Gxle"),n("IvRp"),n("Fmk9"),n("mUT7"),n("doPP"),n("fPXW"),n("i/5t"),n("Qbax"),n("KgKk"),n("jbf5"),n("pl5w"),n("TWi8"),n("8Vg0"),n("3R2l");function tu(e){var t;e.private_template={};var n=e.template||{};e.private_template.caption=n.caption||"{{_node.name}}  {{_node.charge_business&&_node.charge_business}}",e.private_template.icon=ie()(t=n.icon||[]).call(t,[{"_node.node_type=='employee'":"icon-user-manegement"},{"_node.mapping&&_node.org_type==40":"icon-leader-manegement-line"},{"_node.org_type==40":"icon-leader-manegement"},{"_node.mapping&&(_node.org_type==20||_node.org_type==30)":"icon-department-virtual"},{"(_node.org_type==20||_node.org_type==30)":"icon-department"},{"_node.mapping&&_node.org_type==10":"icon-unit-virtual"},{"_node.org_type==10":"icon-unit"},{"":""}])}O.a.controller("hcDialogSelectorCtrl",["$scope",function(e){var t=e.params;g()(angular).call(angular,t,(function(t,n){e[n]=t})),e.options=e.options||{},e.dialog_register?(e.get_return=function(){return e.options.selected},e.dialog_register("hcDialogSelectorCtrl",e)):e.$dialog.title(e.params.title).operates([{cancel:!0,label:"取消",func:function(){e.$dialog.dialog_close()}},{default:!0,label:"确定",disabled:function(){return!e.options.selected},func:function(){e.$dialog.resolve_data(e.options.selected),e.$dialog.dialog_close()}}])}]),O.a.controller("hcSelectorDialogCtrl",["$scope","hcCommonSelectService",function(e,t){var n=e.params;g()(angular).call(angular,n,(function(t,n){e[n]=t})),e.options=e.options||{},e.realList=[],e.get_submit=function(){return void 0===e.options.selected?e.realList:e.options.selected},e.submit=function(){e.$dialog.resolve_data(e.get_submit()),e.$dialog.dialog_close()},e.dialog_register?e.dialog_register("hcDialogSelectorCtrl",e):e.$dialog.title(e.params.title).operates([{cancel:!0,label:"取消",func:function(){e.$dialog.dialog_close()}},{default:!0,label:"确定",func:e.submit}]),e.keyWordChange=function(t){e.searchKeyWord(t)},e.searchKeyWord=function(n){if(e.realList=[],void 0===n||""===n)e.params.list=t.transformData(e.params.dataList);else{var i,o=n.split(/,|，/);w()(i=e.params.dataList).call(i,(function(t){for(var n=0;n<o.length;n++){var i;if(" "!=o[n])s()(i=t.name).call(i,o[n])>=0&&t.is_leaf&&e.realList.push(t)}})),e.params.list=e.realList}},e.search_button=function(t){e.options.multi&&(e.searchKeyWord(t),e.submit())},e.find_parent=function(t,n){for(var i=!1,o=0;o<t.length;o++)if(t[o].id===n){i=!0;break}if(!i)for(var a=0;a<e.params.dataList.length;a++)if(e.params.dataList[a].id===n){t.push(e.params.dataList[a]),null!=e.params.dataList[a].parent_id&&(t=e.find_parent(t,e.params.dataList[a].parent_id));break}return t}}]),O.a.factory("hcDialogSelector",["$hcDialog",function(e){return{orgSelector:function(t,n,i,o){var a={title:"组织选择器",filter:angular.extend({mini_type:40},n||{}),limit:i,options:t,template:o};return e.getDialog({controller:"hcDialogSelectorCtrl",template:'<hc-org-search template="template" filter="filter" options="options" limit="limit"></hc-org-search>'}).params(a).size("middle").show()},orgPositionSelector:function(t,n,i){var o={title:"岗位选择器",limit:"40",filter:angular.extend({mini_type:40},n||{}),options:t};return e.getDialog({controller:"hcDialogSelectorCtrl",template:'<hc-org-search template="template" filter="filter" options="options" limit="limit"></hc-org-search>'}).params(o).size("middle").show()},orgEmpSelector:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["100"],o=arguments.length>3?arguments[3]:void 0,a={title:"组织人员选择器",limit:i,filter:angular.extend({mini_type:100},n||{}),options:t,template:o};return e.getDialog({controller:"hcDialogSelectorCtrl",template:'<hc-org-emp-search template="template" filter="filter" options="options" limit="limit"></hc-org-emp-search>'}).params(a).size("middle").show()}}}]),O.a.directive("hcRootTree",[function(){return{template:'<hc-tree ng-if="private_root" data-list="private_root" data-load="load" data-template="node_template" data-options="private_options"></hc-tree>',scope:{options:"=",template:"=",load:"="},restrict:"E",controller:["$scope","$filter","$timeout",function(e,t,n){var i,o=[],a="{{_node.name}}";e.template&&(o=e.template.icon||o,a=e.template.caption||a);var l="";g()(i=fl()(o).call(o)).call(i,(function(e){var t,n,i=Z()(e)[0],o=e[i];(/\?/g.test(l)&&(l="("+l+")"),i)?l=ie()(t=ie()(n="".concat(i,"?'")).call(n,o,"':")).call(t,l):l="'".concat(o,"'")})),e.node_template="<span>".concat(a,"</span>"),l&&(e.node_template='<span class="hc-tree-node-icon" ng-class="'.concat(l,'"></span>')+e.node_template),e.options?e.private_options=e.options:e.private_options={},e.load&&e.load().then((function(i){if(e.private_root=i,e.private_options.finishInit&&n((function(){e.private_options.finishInit()}),0),0!==e.private_root.length){var o=e.private_root[0];1!==e.private_root.length||o.children?1===e.private_root.length&&(o.expanded=!0):e.load(o).then((function(e){g()(e).call(e,(function(e){e.parent=t("cloneTreeNode")(o),e.tree_id=o.tree_id+"!"+e.id})),o.children=e,o.expanded=!0})),o=function e(t){return"1"===t[0].is_au?t[0]:t[0].children?e(t[0].children):void 0}(e.private_root)||o,e.private_options&&!1!==e.private_options.auto_select&&!1!==o.useable&&!e.private_options.multi&&o!==e.private_options.selected&&n((function(){e.$broadcast("position_tree_node",o.tree_id)}),500)}})),e.$on("refresh_tree_node",(function(n,i,o){if(e.private_root){var a,l=i.tree_id.split("!");if(!/!/.test(i.tree_id)){var r;if("modify"==o)w()(r=e.private_root).call(r,(function(e){if(e.tree_id===i.tree_id)for(var t in i)"tree_id"!=t&&(e[t]=i[t])}));return!1}var c=l[l.length-1],d=Pe()(a=e.private_root).call(a,(function(e){return~s()(l).call(l,String(e.id))}))[0];if(!d)return;var u=s()(l).call(l,String(d.id));if(-1==u)return;b()(l).call(l,0,u+1);var _,p=function e(t,n){if(t){if(1===n.length)return t;var i,o=b()(n).call(n,0,1);if(t.children)return e(Pe()(i=t.children).call(i,(function(e){return e.id==o}))[0],n)}}(d,l);if(!p)return;if("modify"===o&&p.children)g()(_=p.children).call(_,(function(e){if(e.id==c)for(var t in i)"tree_id"!=t&&(e[t]=i[t])}));else if("add"===o)p.is_leaf=!1,e.load(p).then((function(n){g()(n).call(n,(function(e){e.parent=t("cloneTreeNode")(p),e.tree_id=p.tree_id+"!"+e.id})),p.children=n,p.expanded=!0,e.$emit("tree_construct_change"),e.private_options.refreshScroll&&e.private_options.refreshScroll()}));else if("remove"===o){var m,f,h;if(!p.children)return;var v=Pe()(m=p.children).call(m,(function(e){return e.tree_id==i.tree_id}))[0];if(!v)return;var y=s()(f=p.children).call(f,v);if(-1===y)return;b()(h=p.children).call(h,y,1)[0].tree_id==e.options.selected.tree_id&&(e.options.selected=p,e.options.positioned=null,e.$emit("tree-node-selected",p),e.$emit("tree_construct_change"),e.private_options.refreshScroll&&e.private_options.refreshScroll()),0===p.children.length&&(p.is_leaf=!0,p.expanded=!1)}}}))}]}}]),O.a.directive("hcOrgTree",[function(){return{template:'<hc-root-tree data-load="load" data-template="private_template" data-options="options"></hc-root-tree>',scope:{options:"=",filter:"=",template:"="},restrict:"E",controller:["$scope","hcOrgTreeService",function(e,t){tu(e),e.load=function(n){var i,o=Pe()(e)||{};return n?(n&&(i=n.id),t.getSubOrg(i,o.role,o.mini_type,o.mapping,o.person_filter,o.hide_position)):Pe()(e).init_node?(i=Pe()(e).init_node,t.getSingleOrg(i)):t.getMyDepartmentByRole(o.role||"manager")}}]}}]),O.a.directive("hcOrgEmpTree",[function(){return{template:'<hc-root-tree data-load="load" data-template="private_template" data-options="options"></hc-root-tree>',scope:{options:"=",filter:"=",template:"="},restrict:"E",controller:["$scope","hcOrgTreeService","$q",function(e,t,n){tu(e),e.load=function(i){var o,a=n.defer();!i&&Pe()(e).init_node?o=Pe()(e).init_node:i&&(o=i.id);var l=Pe()(e)||{};return t.getSubOrg(o,l.role,100,l.mapping,l.person_filter,l.hide_position).then((function(e){g()(e).call(e,(function(e){!e.id&&(e.id="none"),!e.hasOwnProperty("org_type")&&(e.node_type="employee")})),a.resolve(e)})),a.promise}}]}}]),O.a.directive("hcOrgExtTree",["hcOrgTreeService","$q",function(){return{template:'<hc-root-tree data-load="load" data-template="private_template" data-options="options"></hc-root-tree>',scope:{extend:"=",options:"=",filter:"=",template:"="},restrict:"E",controller:["$scope","hcOrgTreeService","$q",function(e,t,n){tu(e),e.load=function(i){var o;i&&(o=i.id);var a=n.defer(),l=function(t){return t&&e.extend&&e.extend.check&&e.extend.check(t)},r=Pe()(e)||{};return t.getSubOrg(o,r.role,r.mini_type,r.mapping,r.person_filter,r.hide_position).then((function(t){g()(t).call(t,(function(e){e.is_leaf&&l(e)&&(e.is_leaf=!1)})),l(i)&&e.extend.load?e.extend.load(i).then((function(e){a.resolve(ie()(e).call(e,t))})):a.resolve(t)})),a.promise}}]}}]),O.a.factory("hcOrgTreeService",["dataService","listCacheService2","$q",function(e,t,n){return{searchOrg:function(e,n,i,o,a){return t(null,"department.position.search",{key:e,role:n||"manager",dept_id:a,filter_org_type:i,need_mapping:!!o})},searchEmp:function(e,n,i){return t(null,"employee.search",{key:e,role:n,person_filter:i})},getSubOrg:function(t,i,o,a,l,r){var c=n.defer();return e.callHcmOpenApi("department.get.sub.org",{dept_id:t,role:i||"manager",filter_org_type:o,need_mapping:!!a,person_filter:l,hide_position:r,need_plan:!1},null,!0).then((function(e){w()(e).call(e,(function(e){e.name=""!==e.name&&e.name?e.name:e.org_full_name})),c.resolve(e)})),c.promise},getSingleOrg:function(t,i){var o=n.defer();return e.callHcmOpenApi("department.position.get.by.idtype",{object_id:t,org_type:i},null,!0).then((function(e){e.org_type=e.org_type&&e.org_type.key,o.resolve([e])})),o.promise},getOrgDetail:function(t,n){return e.callHcmOpenApi("department.position.get.by.idtype",{object_id:t,org_type:n},null,!0)},getMyDepartmentByRole:function(t,n){return e.callHcmOpenApi("dept.my.list",{role:t,is_display_unit:n},"local,240",!0)}}}]);n("NuNr"),n("Tno2"),n("0JZJ"),n("aP30"),n("z+Xr"),n("Xm1+"),n("IaXc"),n("ZgQE"),n("endN"),n("uwYl"),n("wtcX"),n("ukgP");var nu=n("dz9j"),iu=n.n(nu);n("byi6");window.app.directive("hcMarkDown",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:iu.a,controller:["$scope","hcUploadFile","$element","componentDefaultService","$filter",function(e,t,n,i,o){var a;e.init=function(){e.edit=!0;var t=i.setComponentDefault(e.model,"hc-mark-down",e.options);o("isValidValue")(t)&&(e.model=t),e.check_security(e.model),("view"===e.options.mode||"edit"===e.options.mode&&e.options.preview)&&e.previewFunc()},e.editFunc=function(){e.edit=!0},e.previewFunc=function(){e.modifyPreviewContent(),e.edit=!1},e.modifyPreviewContent=function(){var t=e.model||"";Fe()(n).call(n,"view"===e.options.mode?"#markdown_view_preview":"#markdown_edit_preview").html(Object(Sc.marked)(e.check_security(t)))},e.$watch("model",(function(t,n){t!==n&&e.modifyPreviewContent()})),e.$on("hc-mark-down-refresh",(function(t,n){e.model=n,e.previewFunc()})),e.check_security=function(t){e.updateInfo=null;return/<script|<html|<image|alert\(|\(javascript\:/.test(t)&&(e.updateInfo="包含非法html 请联系管理员进行数据升级"),e.updateInfo||t},e.addImage=function(){var n,i={file_type:["jpg","jpeg","png","img"],size:e.options.image_size,is_silent:!0,params:(null===(n=e.options)||void 0===n?void 0:n.upload_params)||{}};t.upload(i).then((function(t){var n,i,o;t.success&&e.addContent(ie()(n=ie()(i=ie()(o="![".concat(t.name,"](")).call(o,window.hcm_wengen,"/document/loadsourcedocument/")).call(i,t.index,' "')).call(n,t.name,'")'))}))},e.addContent=function(t,i){var o=Fe()(n).call(n,"textarea")[0],a=o.selectionStart,l=o.selectionEnd;"around"===i?e.model=o.value=o.value.substring(0,a)+t+o.value.substring(a,l)+t+o.value.substring(l):(e.model=o.value=o.value.substring(0,a)+t+o.value.substring(a),o.setSelectionRange(a+t.length,a+t.length))},e.printHtml=function(){var t=Fe()(n).call(n,"view"===e.options.mode?"#markdown_view_preview":"#markdown_edit_preview").html(),i=window.open();i.focus();var o="<html><head><meta charset='utf-8'/><title>打印</title></head><body>";o+=t,o+="</body></html>",i.document.write(o),i.print(),i.close()},e.head_params=["h1","h2","h3","h4","h5","h6"],e.headFunc=function(t){for(var n="",i=0;i<t[1];i++)n+="#";e.show_head=!1,e.addContent(n+" ")},e.all_operates="pc"===window.client?[{key:"bold",label:"加粗",icon:"icon-hcm-document-bold",func:function(){e.addContent("**","around")}},{key:"italic",label:"倾斜",icon:"icon-hcm-document-italic",func:function(){e.addContent("*","around")}},{key:"strike",label:"删除线",icon:"icon-hcm-document-strike",func:function(){e.addContent("~~","around")}},{key:"headline",label:"标题",icon:"icon-hcm-document-headline",func:function(){e.show_head=!e.show_head}},{key:"em_space",label:"全角空格",icon:"icon-hcm-space-long",func:function(){e.addContent("&emsp;")}},{key:"no_breaking_space",label:"半角空格",icon:"icon-hcm-space-normal",func:function(){e.addContent("&nbsp;")}},{key:"striping",label:"分隔线",icon:"icon-hcm-document-striping",func:function(){e.addContent("---")}},{key:"cite",label:"引用",icon:"icon-hcm-document-cite",func:function(){e.addContent("> ")}},{key:"symbol",label:"列表",icon:"icon-hcm-document-symbol",func:function(){e.addContent("- ")}},{key:"image",label:"插入图片",icon:"icon-hcm-img-solid",func:e.addImage}]:[{key:"image",icon:"icon-hcm-img-solid",func:e.addImage}],e.all_operates.push({key:"print_html",label:"打印",icon:"icon-hcm-printer",func:e.printHtml}),e.operates=Pe()(a=e.all_operates).call(a,(function(t){var n,i;return-1===s()(n=(null===(i=e.options)||void 0===i?void 0:i.remove_operates)||[]).call(n,t.key)}))}]}}]);var ou=n("pkm6"),au=n.n(ou);n("DZcp");window.app.directive("hcPdfPreview",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:au.a,controller:["$scope","dataService","$filter","weChatService",function(e,t,n,i){e.init=function(){e.preview_list=[],e.model&&t.callHcmOpenApi("document.conert.to.png",{index:e.model},null,!0).then((function(t){for(var i=1;i<=t.page_size;i++)e.preview_list.push(n("getDocUrl")(t.index)+"/"+i)}))},e.preview=function(t){var n,o=e.preview_list;"pc"===e.client||(n={current:t,urls:o},i.preViewImg(n))}}]}}]);n("fs6q");var lu=n("I/Ar"),ru=n.n(lu),cu=n("sYAY");window.app.directive("hcCode",[function(){return{restrict:"E",scope:{options:"=",model:"=ngModel",ngChange:"&"},template:ru.a,controller:["$scope","$element",function(e,t){var i={json:"ace/mode/json",js:"ace/mode/javascript",python:"ace/mode/python"},o={};e.init=p()(u.a.mark((function t(){var n=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.status="finish",t.next=3,e.initEditor();case 3:e.loadData(),e.format(),e.options.getValue=function(){return e.editor.getValue()},e.options.setValue=function(t){return e.editor.setValue(t,-1)},e.options.onResize=function(){return e.editor.env.onResize()},e.options.insert=function(t){return e.editor.insert(t)},e.options.setBeautyValue=function(e){return n.editor.setValue(o[n.options.mode](e),-1)};case 10:case"end":return t.stop()}}),t)}))),e.initEditor=p()(u.a.mark((function a(){var l,r,c,s,d,_;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.e(80).then(n.t.bind(null,"5VLF",7));case 2:return r=a.sent,c=r.default,o={json:c.js,js:c.js},s=document.createElement("div"),Fe()(t).call(t,".hcm-code").append(s),a.next=9,Object(cu.a)();case 9:d=a.sent,_=ie()(l="".concat(window.cdn_domain)).call(l,window.hcm_wengen?window.hcm_wengen:"","/static/resources/lib/ace"),d.config.set("basePath",_),d.config.set("modePath",_),d.config.set("themePath",_),d.config.set("workerPath",_),e.editor=d.edit(s),e.getMode()in i&&e.editor.session.setMode(i[e.getMode()]),"edit"===e.options.type&&Fe()(t).call(t,".ace_editor").css({"margin-top":"36px"}),!1===e.options.showGutter&&e.editor.renderer.setShowGutter(e.options.showGutter),e.editor.setTheme("ace/theme/chrome"),e.editor.setHighlightActiveLine(!1),e.editor.setHighlightGutterLine(!0),e.editor.setOption("wrap","free"),e.editor.setOption("showPrintMargin",!1),e.editor.setOption("highlightSelectedWord",!0),e.editor.setReadOnly(e.options.readOnly||!1);case 26:case"end":return a.stop()}}),a)}))),e.getMode=function(){return e.options.mode||"json"},e.loadData=function(){var t=angular.copy(angular.isObject(e.model)?j()(e.model):e.model);e.editor.setValue(t||"",-1)},e.format=function(){e.getMode()in o&&e.editor.setValue(o[e.getMode()](e.editor.getValue()),-1)},e.edit=function(){e.status="edit",e.editor.setReadOnly(!1)},e.finish=function(){var t=e.editor.getValue();e.status="finish",e.editor.setReadOnly(!0),e.model="json"===e.getMode()?JSON.parse(t):t},e.$watch("model",(function(t,n){t&&t!==n&&(e.loadData(),e.format())})),e.$on("code_format",(function(){e.format()}))}]}}]);var su=n("q92V"),du=n.n(su),uu=n("AE40"),_u=n.n(uu),pu=n("ftYD"),mu=n.n(pu),fu=n("0YDr"),hu=n.n(fu),gu=(n("zXHt"),n("NXiU")),vu=n.n(gu);window.app.controller("hcFieldListDialogController",["BaseCRUDService","$controller","$rootScope","$scope","$filter","dataService","hcmDraftsService",function(e,t,n,i,o,a,l){var c=i.params.alter.SubDialogCRUDService?i.params.alter.SubDialogCRUDService(i.params.model||i.params.alter.model):e.getModelService(i.params.model||i.params.alter.model);t(xr.a,{$scope:i,CRUDService:c}),i.is_field_list_info=!0,i.individualParse=function(e){var t=j()(e).split("BASE_FORM"),n=w()(t).call(t,(function(e,n){var i;return n>0?"BASE_FORM"+(L()(i=t[1]).call(i,"()")?e:"().data"+e):e})),i="";return g()(n).call(n,(function(e){i+=e})),JSON.parse(i)},i.getAlterEvalContext=function(){return{BASE_FORM:function(){return i.params.alter.base_form},BASE_ALTER:function(){return i.params.alter.base_alter}}},i.getFormAlterInfo=function(){var e;return{base_alter:i.params.alter.base_alter,parent_form:angular.copy((null===(e=i.params.alter.base_form)||void 0===e?void 0:e.data)||{})}},i.getMetaState=function(){return i.params.alter.SubMetaState},i.getFormData=function(e){return angular.extend(e,i.params.data)},i.getLoadModelMetaParams=function(){return i.params.alter.load_model_meta_params?i.params.alter.load_model_meta_params:ie()(e=["info",i.getMetaState(),null]).call(e,i.params.alter.meta_params?o("valueToFunc")(i.params.alter.meta_params)():{});var e},i.submit=p()(u.a.mark((function e(){var t,o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w()(t=i.info_meta).call(t,(function(e){var t,n,o,a,l,c;e.options.originObject&&(angular.isArray(e.options.originObject)?i.data[r()(o=e.key).call(o,0,-3)]={name:w()(a=e.options.originObject).call(a,(function(e){return e.name})).toString()}:i.data[r()(l=e.key).call(l,0,-3)]=e.options.originObject);e.key&&null===i.base_form.data[e.key]&&(null===(t=i.data)||void 0===t?void 0:t[r()(n=e.key).call(n,0,-3)])&&(i.data[r()(c=e.key).call(c,0,-3)]=null)})),o=function(e){return new G.a((function(t){return we()((function(){return t()}),e)}))},!re()(i.base_form.asyncTask).length){e.next=12;break}return e.next=5,o(800);case 5:if(!re()(i.base_form.asyncTask).length){e.next=12;break}return e.next=8,o(400);case 8:if(!re()(i.base_form.asyncTask).length){e.next=12;break}return n.show_warning("字段关联未执行完毕, 请再次点击提交"),console.error("form_relation未执行完毕"),e.abrupt("return");case 12:return c=i.parseData(i.data),e.next=15,i.validFormData(c);case 15:if(e.t0=e.sent,!1!==e.t0){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,a.callHcmOpenApi("hcm.object.convert.to.list",{obj_list:[c],model:i.params.model||i.params.alter.model,state:i.params.alter.SubMetaState||null});case 20:s=e.sent,l.removeDraft(i.getEnvironmentParams()||{}),i.$dialog.resolve_data(angular.extend(c,s[0])),i.close();case 24:case"end":return e.stop()}}),e)})))}]);window.app.directive("hcFieldList",[function(){return{restrict:"E",scope:{key:"=",options:"=",label:"=",model:"=ngModel",ngChange:"&",parentBaseForm:"<?"},template:vu.a,controller:["$scope","$controller","BaseCRUDService","$filter","commonSelectorService","$hcDialog","HCMCRUDImpExpService","$rootScope","$state",function(e,t,n,i,o,a,l,c,d){var _,m,f,h,v=e.options.SubDialogCRUDService?e.options.SubDialogCRUDService(e.options.model):n.getModelService(e.options.model);(t(gc.a,{$scope:e,CRUDService:v,InfoDialog:(_=e.options.model,{controller:"hcFieldListDialogController",title:"表格信息",template:dc.a,model_name:_,object_str:f,meta_state:m,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}})}),e.no_advance_query=!0,e.is_visualization=!1,e.cancel_history_back_action=!0,e.options.service=v,e.options.list_meta&&(e.list_meta=e.options.list_meta),e.options.list_btn_meta&&(e.list_btn_meta=e.options.list_btn_meta),e.hide_label=e.options.hide_label,e.is_show_list=!0,e.category_field=e.params.category_field,e.getMetaState=function(){return e.options.state},e.options.sub_list_func=e.options.sub_list_func&&"function"==typeof e.options.sub_list_func?e.options.sub_list_func():e.options.sub_list_func,e.options.sub_list_func)&&g()(h=re()(e.options.sub_list_func)).call(h,(function(t){e[t]=e.options.sub_list_func[t]}));e.initAfter=p()(u.a.mark((function t(){var n,o,a,l,r,c,s,d,_,p,m,f,h,g,v,b,y,w;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.readOnly=i("valueToFunc")(e.options.readOnly)(),h=[],g=0;case 3:if(!(g<e.list_btn_model.actions.length)){t.next=23;break}if("refresh"===(v=e.list_btn_model.actions[g]).key&&(v.hide=!0),!e.readOnly){t.next=19;break}return t.next=9,i("valueToFunc")(null===(y=v.options)||void 0===y?void 0:y.readOnlyShow)();case 9:if(t.t1=b=t.sent,t.t0=null!==t.t1,!t.t0){t.next=13;break}t.t0=void 0!==b;case 13:if(!t.t0){t.next=17;break}t.t2=b,t.next=18;break;case 17:t.t2=!1;case 18:v.hide=!t.t2;case 19:h.push(v);case 20:g++,t.next=3;break;case 23:e.list_btn_model.$setMeta(h),!e.readOnly&&"view"!==e.options.mode||"wf"===e.options.mode_type||e.list_model.$setOperateDefault().$setRowSelector(0),e.options.operate_row&&e.list_model.$setOperateRow(e.options.operate_row),e.options.operate_width&&e.list_model.$setOperateRow(e.options.operate_width),e.list_btn_model.$setStyle("btn-info"),(null===(n=e.options)||void 0===n?void 0:n.btn_show_max)&&e.list_btn_model.$setShowMax(e.options.btn_show_max),(null===(o=e.options)||void 0===o?void 0:o.extra_label)&&(e.extra_label=null===(a=e.options)||void 0===a?void 0:a.extra_label),(null===(l=e.options)||void 0===l?void 0:l.extra_title)&&(e.extra_title=null===(r=e.options)||void 0===r?void 0:r.extra_title),"mobile"===window.client&&(null===(c=e.options)||void 0===c||null===(s=c.mobile)||void 0===s?void 0:s.btn_show_max)&&e.list_btn_model.$setShowMax(e.options.mobile.btn_show_max),e.model_meta=e.model_meta||{},e.model_meta.model=e.options.model,w=e.options.max_row||5,e.list_model.$setMaxRow(w),e.max_height=((null===(d=e.model_meta)||void 0===d||null===(_=d.list_config)||void 0===_||null===(p=_.row_config)||void 0===p?void 0:p.moderate)||48)*w+48+12,e.list_model.$setMaxHeight(e.max_height),e.list_model.$closeSort(),e.list_model.is_child_list=!0,e.list_model.disable_sort=!0,e.options.selected_items&&(e.list_model.selected_items=e.options.selected_items,e.list_model.$refreshData()),"table-footer"===(null===(m=e.options.stat_config)||void 0===m?void 0:m.stat_mode)&&(e.list_model.$setOptions({stat_config:e.options.stat_config}),e.stat_meta=e.options.statistics||[],e.list_model.$setStatMeta(e.stat_meta),e.list_model.$refreshData(),e.stat_data=e.generateStatData(),e.list_model.$setStat(e.stat_data)),e.category_field=null===(f=e.model_meta.list_config)||void 0===f?void 0:f.category_field,e.category_id=i("isValidValue")(e.params.category_id)?e.params.category_id:null,e.category_type="tabs",e.fetchCategoryBefore();case 47:case"end":return t.stop()}}),t)}))),e.setData=function(t){var n=e.model;if(e.category_field&&i("isValidValue")(t)){var o,a=e.category_field.split(".");n=null===(o=e.model)||void 0===o?void 0:Pe()(o).call(o,(function(e){return String(i("getValue")(e,a))===String(-99999===t?null:t)})),e.getCategoryCount()}e.list_model.$setData(n),e.stat_data=e.generateStatData(),e.list_model.$setStat(e.stat_data)},e.getCategoryCount=function(){var t,n=e.model,o=e.category_field.split("."),a={};null==n||g()(n).call(n,(function(e){var t,n,l=i("getValue")(e,o);null==l?a.null=(null!==(t=a.null)&&void 0!==t?t:0)+1:a[l]=(null!==(n=a[l])&&void 0!==n?n:0)+1})),e.parseCategoryCount({list:w()(t=re()(a)).call(t,(function(t){var n;return n={},Ie()(n,e.category_field,t),Ie()(n,"id",a[t]),n}))})},e.getTreeAndFetchData=function(){e.getPlanAndFetchData()},e.showList=function(){e.is_show_list=!e.is_show_list},e.getAlterEvalContext=function(){return{BASE_FORM:function(){return e.options.base_form},BASE_FORM_DATA:function(t){var n,i;return null===(n=e.options.base_form)||void 0===n||null===(i=n.data)||void 0===i?void 0:i[t]},BASE_ALTER:function(){return e.options.base_alter}}},e.getAlterExprContext=function(){return{BASE_FORM_DATA:function(t){var n,i,o;return t?null===(n=e.options.base_form)||void 0===n||null===(i=n.data)||void 0===i?void 0:i[t]:null===(o=e.options.base_form)||void 0===o?void 0:o.data},BASE_ALTER:function(){return e.options.base_alter}}},e.getEnvironmentParams=function(){return angular.extend({},d.params,e.params||{},e.options||{},{hcm_wengen:window.hcm_wengen,hcm_env_post:window.hcm_env_post,hcm_env_pre:window.hcm_env_pre},e.customEnvironmentParams||{})},e.individualParse=function(e){var t=j()(e);return t=(t=(t=t.replace("SCOPE.params.alter","BASE_ALTER()")).replace("SCOPE.model.parent_data","BASE_FORM().data")).replace("SCOPE.model.sub_list_func","SCOPE"),JSON.parse(t)},e.getPlanAndFetchData=function(){e.setData(e.category_id),e.initAfter()},e.fetchDataSuccess=function(t){e.model=t.list},e.generateStatData=function(){var t,n;if(e.list_model.stat_meta){var o={count:function(e){return e.length||0},sum:function(e){return hu()(e)},avg:function(e){return e.length&&mu()(hu()(e),e.length)},min:function(e){return _u()(e)},max:function(e){return du()(e)}};return[Yn()(t=w()(n=e.list_model.stat_meta).call(n,(function(t){var n,a,l;return[t.key,i("number")(o[t.type](w()(n=e.list_model.data).call(n,(function(n){return i("hcListCellData")(n,e.list_model.columns_metas[t.field])}))),t.decimal||(null===(a=e.model_meta)||void 0===a||null===(l=a.list_config)||void 0===l?void 0:l.statistics_decimal)||0)]}))).call(t,(function(e,t){var n=ro()(t,2),i=n[0],o=n[1];return e[i]=o,e}),{})]}},e.getFilterDict=function(){var t={};return t[e.options.parent_id]=e.options.master_id||null,t},e.checkFetch=function(){var t,n,i;return null===(t=e.options)||void 0===t||null===(n=t.base_form)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.id},e.deal_field_list_data=function(t,n,i){var o,a,l,r,c=null,d=angular.copy(i);switch(n){case"new":e.model?e.model.push(t):e.model=[t];break;case"edit":c=s()(o=e.list_model.data).call(o,i),angular.extend(e.model[c],t);break;case"delete":c=s()(a=e.list_model.data).call(a,t),b()(l=e.model).call(l,c,1),e.list_model.selected_item=null,e.list_model.selected_items=[];break;case"batchDelete":w()(t).call(t,(function(t){var n,i;c=s()(n=e.model).call(n,t),b()(i=e.model).call(i,c,1)})),e.list_model.selected_item=null,e.list_model.selected_items=[];break;case"batchNew":e.model=e.model?ie()(r=e.model).call(r,t):t;break;case"batchEdit":w()(i).call(i,(function(n,i){var o;angular.extend(e.model[s()(o=e.list_model.data).call(o,n)],t[i]||{})}))}if(e.category_field&&!e.params.disableCount){var u=q()(t)?t:[t],_=q()(i)?d:[d];e.deal_category_count(u,n,_)}e.list_model.$refreshData()},e.deal_category_count=function(t,n,o){g()(t).call(t,(function(t,a){var l,r,c,s,d=i("getValue")(t,e.category_field.split("."));switch(n){case"new":case"batchNew":Fe()(l=e.category_list).call(l,(function(e){return null===e.id})).count++,Fe()(r=e.category_list).call(r,(function(e){return e.id===d})).count++;break;case"delete":case"batchDelete":Fe()(c=e.category_list).call(c,(function(e){return null===e.id})).count--,Fe()(s=e.category_list).call(s,(function(e){return e.id===d})).count--;break;case"edit":case"batchEdit":var u,_,p=i("getValue")(o[a],e.category_field.split("."));if(d!==p)Fe()(u=e.category_list).call(u,(function(e){return e.id===p})).count--,Fe()(_=e.category_list).call(_,(function(e){return e.id===d})).count++}}))},e.getInfoAlterParam=function(){return{model:e.options.model,base_form:e.options.base_form,meta_params:e.options.info_meta_params,base_alter:e.options.base_alter,SubDialogCRUDService:e.options.SubDialogCRUDService,SubMetaState:e.getMetaState(),load_model_meta_params:e.options.load_model_meta_params}},e.batchSelect=function(){var t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.model||(a.model="Employee");var l=function(){o.multiTreeListSelectorDialog(a).then(function(){var t=p()(u.a.mark((function t(n){var o,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=[],a.mapping?w()(n).call(n,(function(e,t){var n;e.model_id=e.id,l[t]={},g()(n=re()(a.mapping)).call(n,(function(n){if(i("isJSON")(a.mapping[n])){var o,c,s=a.mapping[n].structure,d={};d[s[s.length-1]]=i("parseFieldData")(a.mapping[n].field,e),w()(o=r()(c=fl()(s).call(s)).call(c,1)).call(o,(function(e){var t={};t[e]=d,d=t})),l[t][n]=d}else angular.isArray(a.mapping[n])&&(l[t][n]=i("parseFieldData")(a.mapping[n],e))}))})):l=n,!a.dataParser||"function"!=typeof a.dataParser){t.next=6;break}return t.next=5,a.dataParser(l);case 5:l=t.sent;case 6:e.model||(e.model=[]),e.model=ie()(o=e.model).call(o,l);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};ae()(t=["Employee","PreEmployee"]).call(t,a.model)&&(a.filter_dict||{}).action?o.moveEmpLimit({number:a.filter_dict.action}).then((function(e){a.filter_dict["job_info.position_status_id"]=e.in_positionstatus,a.filter_dict["job_info.employee_category_id"]=e.in_employeecategory,delete a.filter_dict.action,l()})):ae()(n=["JobInformation"]).call(n,a.model)&&(a.filter_dict||{}).action?o.moveEmpLimit({number:a.filter_dict.action}).then((function(e){a.filter_dict.position_status_id=e.in_positionstatus,a.filter_dict.employee_category_id=e.in_employeecategory,delete a.filter_dict.action,l()})):l()},e.batchSelect_org=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.model||(t.model="Department");var n=function(){o.multiTreeListSelectorDialog(t).then(function(){var n=p()(u.a.mark((function n(o){var a,l;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=[],t.mapping?w()(o).call(o,(function(e,n){var o;e.model_id=e.id,l[n]={},g()(o=re()(t.mapping)).call(o,(function(o){if(i("isJSON")(t.mapping[o])){var a,c,s=t.mapping[o].structure,d={};d[s[s.length-1]]=i("parseFieldData")(t.mapping[o].field,e),w()(a=r()(c=fl()(s).call(s)).call(c,1)).call(a,(function(e){var t={};t[e]=d,d=t})),l[n][o]=d}else angular.isArray(t.mapping[o])&&(l[n][o]=i("parseFieldData")(t.mapping[o],e))}))})):l=o,!t.dataParser||"function"!=typeof t.dataParser){n.next=6;break}return n.next=5,t.dataParser(l);case 5:l=n.sent;case 6:e.model||(e.model=[]),e.model=ie()(a=e.model).call(a,l);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};n()},e.sub_import=function(){var t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=i("valueToFunc")(o||{})();a.getDialog(Fc.a).params({category:l.category||e.options.model,category_name:e.label,params:{is_sublist:!0,is_immediate:l.is_immediate||!1,file_name:l.file_name||e.label,is_from_config:l.is_from_config||!1,mediately:l.mediately||!1,category:l.category||e.options.model,report_name:l.report_name,extend_property:angular.extend({extra_property:{state:e.options.state},list_data:e.list_model.data,parent_id:null===(t=e.options)||void 0===t?void 0:t.parent_id},l.extend_property||{}),callback:(n=p()(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.model=n;case 1:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)})}}).size("small").title(e.label).show()},e.sub_export=function(){var t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o=i("valueToFunc")(o||{})(),e.getFilterDict()[e.options.parent_id]?l.list_export({category:e.options.model,file_name:o.file_name||e.label,is_from_config:!1,celery_mode:!1,extend_property:{filter_dict:e.getFilterDict(),extra_property:angular.extend(e.getExtraProperty(),{state:null===(t=o.extend_property)||void 0===t||null===(n=t.extra_property)||void 0===n?void 0:n.state})}}):c.show_warning("暂无相关数据需要导出")},e.changeCategory=function(){var t=p()(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.category_id=n,e.setData(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setTitle=function(){},e.setExpand=function(){},e.$watch("model",(function(t,n){t!==n&&e.setData(e.category_id)}),!0),e.options.getSelectedItems=function(){return e.list_model.selected_items},e.options.clearSelectedItems=function(){e.list_model.$clearSelectedItems()},e.options.selectItem=function(t){e.list_model.selectItem(t)},e.options.collector={getDirty:function(t,n){return e.list_model.getDirty(t,n)},getModel:function(){return e.options.model},getMetaState:function(){return e.getMetaState()}},e.$on("hc-field-list-refresh",(function(t,n,i){n===e.options.model&&(e.options.state=i.state,e.list_meta=null,e.list_btn_meta=[],e.model=[],e.init())})),e.$on("hc-field-list-refresh-data",(function(){e.list_model.$refreshData()}))}]}}]);n("DJld");n("Yhui"),n("aHuD"),n("CNSk"),n("T0bJ");n("fHBn");var bu=function(){function e(e,t,n){var i,o,a,l,r,c;this.direction=e,this.side=t,this.event=n,this.resized=$(n.currentTarget).parent(),this.side=t,"vertical"===e?(this.attr="width",this.start=null!==(i=n.pageX)&&void 0!==i?i:null===(a=null===(o=null==n?void 0:n.changedTouches)||void 0===o?void 0:o[0])||void 0===a?void 0:a.pageX,this.start_scale=this.resized.width()):(this.attr="height",this.start=null!==(l=n.pageY)&&void 0!==l?l:null===(c=null===(r=null==n?void 0:n.changedTouches)||void 0===r?void 0:r[0])||void 0===c?void 0:c.pageY,this.start_scale=this.resized.height())}return e.prototype.getScale=function(e){var t,n,i,o,a,l,r;if("vertical"===this.direction){var c=(null!==(t=e.pageX)&&void 0!==t?t:null===(i=null===(n=null==e?void 0:e.changedTouches)||void 0===n?void 0:n[0])||void 0===i?void 0:i.pageX)-this.start;"right"===this.side&&(c=-c),r=this.start_scale+c}else{c=(null!==(o=e.pageY)&&void 0!==o?o:null===(l=null===(a=null==e?void 0:e.changedTouches)||void 0===a?void 0:a[0])||void 0===l?void 0:l.pageY)-this.start;"bottom"===this.side&&(c=-c),r=this.start_scale+c}return r},e.prototype.setScale=function(e){var t;this.resized.css(((t={})[this.attr]=e+"px",t))},e}(),yu=function(){function e(e,t){var n=this;this.$document=e,this.$element=t,this.onStart=function(e){var t;e.preventDefault(),n.target=new bu(n.direction,n.side,e),n.timer=n.createTimer(),null===(t=n.startCallback)||void 0===t||t.call(n,e,n.target.resized),"mobile"===n.client?(n.$document.on("touchmove",n.onMove),n.$document.on("touchend",n.onEnd)):(n.$document.on("mousemove",n.onMove),n.$document.on("mouseup",n.onEnd))},this.createTimer=function(){return we()((function(){n.$document.off("mousemove",n.onMove),n.$document.off("mouseup",n.onEnd),n.$document.off("touchmove",n.onMove),n.$document.off("touchend",n.onEnd),n.timer=null}),1500)},this.onMove=function(e){var t;if(!n.undraggable){n.timer&&(clearTimeout(n.timer),n.timer=n.createTimer());var i=n.target.getScale(e);i>n.resizeMax?i=n.resizeMax:i<n.resizeMin&&(i=n.resizeMin),n.target.setScale(i),null===(t=n.moveCallback)||void 0===t||t.call(n,e,n.target.resized,i)}},this.onEnd=function(e){var t;n.timer&&clearTimeout(n.timer),null===(t=n.endCallback)||void 0===t||t.call(n,e,n.target.resized),n.$document.off("mousemove",n.onMove),n.$document.off("mouseup",n.onEnd),n.$document.off("touchmove",n.onMove),n.$document.off("touchend",n.onEnd)},this.client=window.client}return e.prototype.$onInit=function(){this.direction=this.direction||"vertical",this.resizeMax=+this.resizeMax||500,this.resizeMin=+this.resizeMin||200,this.$element.first().addClass(this.direction),"mobile"===this.client?this.$element.on("touchstart",this.onStart):this.$element.on("mousedown",this.onStart)},e.prototype.$onDestroy=function(){this.$element.off("mousedown",this.onStart),this.$element.off("touchstart",this.onStart)},e.$inject=["$document","$element"],e}();O.a.component("hcResizer",{bindings:{direction:"@?",side:"@?",resizeMin:"<?",resizeMax:"<?",undraggable:"<?",startCallback:"<?",moveCallback:"<?",endCallback:"<?"},template:'<ng-transclude><div class="handle"></div></ng-transclude>',transclude:!0,controller:yu});n("qGZf");function wu(e){if(void 0===K.a||null==z()(e)){if(q()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return xu(e,t);var i=r()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return V()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xu(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,l=!1;return{s:function(){i=B()(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw o}}}}function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}window.app.directive("titlePcScore",[function(){return{restrict:"AE",scope:{options:"=",model:"=ngModel"},template:n("7QeL"),controller:["$scope","$rootScope","$hcForm","$filter","dataService","$timeout","$hcDialog","$compile",function(e,t,n,i,o,a,l,r){e.init=function(){e.client=window.client,e.obj_score=null,e.meeting_id=i("valueToFunc")(e.options.meeting_id)(),e.object_id=i("valueToFunc")(e.options.object_id)(),e.scorer_id=i("valueToFunc")(e.options.scorer_id)(),e.group_id=i("valueToFunc")(e.options.group_id)(),e.getMeetingInfo()},a((function(){var t=$(".hc-dialog-content");t.length&&(t.css({padding:"0","box-shadow":"none"}),e.contentHeight=t[0].offsetHeight)})),e.getMeetingInfo=function(){o.callHcmOpenApi("title.eval.meeting.get.meeting.info",{group_id:e.group_id},null,!0).then((function(t){e.naire_id=t.naire_id,e.getNaireContent(t.naire_id)}))},e.getNaireContent=function(){var t=p()(u.a.mark((function t(i){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.callHcmOpenApi("title.eval.naire.answer.get.naire.answer",{scorer_id:e.scorer_id},null,!0);case 2:return e.naire_answer=t.sent,t.next=5,o.callHcmOpenApi("eval.naire.get.content",{naire_id:i},null,!0).then((function(t){var i,o,a,l,r;(e.naire=t,2===(null===(i=e.object_info)||void 0===i?void 0:i.status))&&(null===(l=t.content)||void 0===l||g()(r=l.content).call(r,(function(e){e.options.readOnly=!0})));g()(o=t.content.content).call(o,(function(e){"naire-candidate"===e.component&&(e.options.is_edit=!1)})),e.isWithWeight=t.content.isWithWeight,e.showScore=t.content.show_score,e.naire_form=n.createForm().$setMeta(null===(a=t.content)||void 0===a?void 0:a.content),e.naire_form.$setData(e.naire_answer.naire_answer),e.model=e.naire_form.data,console.log(e.naire_answer.scorer_info.object.name)}));case 5:e.initInput();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getNaireTempContent=p()(u.a.mark((function t(){var i,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.naire_temp_id,a=e.naire_type,t.next=3,o.callHcmOpenApi("eval.naire.template.get.temp.content",{naire_temp_id:i,naire_type:a},null,!0).then((function(t){var i;e.naire=t,e.naire_form=n.createForm().$setMeta(null===(i=t.content)||void 0===i?void 0:i.content),e.model=e.naire_form.data}));case 3:case"end":return t.stop()}}),t)}))),e.initInput=function(){for(var t in e.model){var n,i=e.naire_form.fields[t-1];if(i&&"radiofield"===i.type)if(i.options.reason&&s()(n=i.options.reason).call(n,e.model[t])>-1){var o,a,l;Fe()(o=$(".hc-naire .naire-content hc-form-component").eq(t-1)).call(o,"hc-input-radio .reason_input").remove();var c="<input class='reason_input' ng-model='model.reason[".concat(t,"]' placeholder='请输入选择该选项的原因' type='text'>");2===(null===(a=e.object_info)||void 0===a?void 0:a.status)&&(c="<input class='reason_input' readonly ng-model='model.reason[".concat(t,"]' type='text'>")),Fe()(l=$(".naire-content hc-form-component").eq(t-1)).call(l,"hc-input-radio").append(r(c)(e))}}},e.$watch("model",(function(t,n){if(e.naire_form&&null!=t&&null!=t&&t!==n){for(var i in e.score=0,e.score_topic_count=0,t){var o,a=e.naire_form.fields[i-1];if(a&&s()(o=["radiofield","numberfield","starfield"]).call(o,a.type)>-1)if(e.score_topic_count+=1,"radiofield"===a.type){var l,c;if(n&&t[i]!==n[i])Fe()(c=$(".hc-naire .naire-content hc-form-component").eq(i-1)).call(c,"hc-input-radio .reason_input").remove();if(a.options.reason&&-1!==s()(l=a.options.reason).call(l,t[i])&&t[i]!==(!n||n[i])){var d,u,_="<input class='reason_input' ng-model='model.reason[".concat(i,"]' placeholder='请输入选择该选项的原因' type='text'>");2===(null===(d=e.object_info)||void 0===d?void 0:d.status)&&(_="<input class='reason_input' readonly ng-model='model.reason[".concat(i,"]' type='text'>")),Fe()(u=$(".hc-naire .naire-content hc-form-component").eq(i-1)).call(u,"hc-input-radio").append(r(_)(e))}var p,m=wu(a.options.list);try{for(m.s();!(p=m.n()).done;){var f=p.value;if(f.value===t[i]){e.score=e.isWithWeight?e.score+f.score*a.options.weight/100:e.score+f.score;break}}}catch(e){m.e(e)}finally{m.f()}}else null===t[i]&&(t[i]=0),e.score=e.isWithWeight?e.score+t[i]*a.options.weight/100:e.score+t[i]}!1===e.isCalcSumScore&&0!==e.score_topic_count&&(e.score=e.score/e.score_topic_count),e.obj_score=E()(E()(e.score).toFixed(2)),e.score=e.obj_score}}),!0),e.options&&e.options.func&&(e.options.func.saveAnswer=e.saveAnswer)}]}}]);var ku=n("FfHU"),$u=n.n(ku),Ou=(n("ZamE"),["$scope","$element","$rootScope","$hcDialog","contextService"]),Du=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];g()(Ou).call(Ou,(function(n,i){e[n]=t[i]}))},Cu=function(){function e(e,t,n,i,o){var a,l,r;Du.call.apply(Du,Object(Pt.h)([this],arguments)),this.is_open_new_page="pc"===window.client&&(null!==(r=null===(l=null===(a=o.getContext("auth"))||void 0===a?void 0:a.company_setting)||void 0===l?void 0:l.open_new_page)&&void 0!==r?r:null)}return e.prototype.onClick=function(e){var t,n;return Object(Pt.c)(this,void 0,void 0,(function(){var i;return Object(Pt.e)(this,(function(o){switch(o.label){case 0:return i=null,this.item.c_list?[4,this.openPanel(this.item.c_list,this.item,e)]:[3,2];case 1:return i=o.sent(),[3,3];case 2:i=this.item,o.label=3;case 3:if(i&&(null===(n=(t=this.breadcrumb).onChange)||void 0===n||n.call(t,i)),"show_dialog"===i.view){switch(i.param.dialog_name){case"chat_robot":this.$scope.$emit("chat-robot",i.params||{});break;default:this.$rootScope.show_warning("暂不支持")}return[2]}return i.url?(location.href=i.url,[2]):(i.view&&this.superGo(i.view,i.params,Object(Pt.a)(Object(Pt.a)({},i.options),{inherit:!1}),this.is_open_new_page),[2])}}))}))},e.prototype.openPanel=function(e,t,n){return this.$hcDialog.dropdownList(e,t,"pc"===window.client?angular.element(n.target):null,{title:"pc"===window.client?null:"请选择",size:"pc"===window.client?"small":(null==e?void 0:e.length)>6?"bottom-dialog-90":"bottom-dialog-50",styles:{minWidth:"160px"},dialogOptions:{class:"hc-breadcrumb-item-dropdown"}})},e.prototype.superGo=function(e,t,n,i){void 0===t&&(t={}),void 0===n&&(n={}),this.$rootScope.super_go(e,t,n,i)},e.$inject=Ou,e}(),Mu={template:$u.a,controller:Cu,bindings:{separator:"<?",item:"="},require:{breadcrumb:"^hcBreadcrumb"}},Su=(window.app.component("hcBreadcrumbItem",Mu).name,n("jgjg"),n("3tSd")),Eu=function(){},Pu={template:n.n(Su).a,controller:Eu,bindings:{separator:"<?",items:"=",onChange:"=?"}};window.app.component("hcBreadcrumb",Pu).name,n("5bRe"),n("ixdl"),n("g6gh"),n("XlRO"),n("Mg95"),n("zFQm"),n("hjms"),n("WnQ3"),n("r23J"),n("acpW"),n("aHuD"),n("CNSk"),n("XSAP"),n("qq1h"),n("dxPr"),n("T0bJ");n("Fh3/"),n("wiQb"),O.a.directive("searchBox",[function(){return{restrict:"E",template:n("0Teu"),scope:{model:"="},controller:["$scope","$rootScope","$q","searchBoxService",function(e,t,n,i){e.$watch("model.version",(function(t,n){t&&n&&e.init()}),!0),e.init=function(){e.initConfig().then((function(t){e.tipIndex=null,e.oringinSearchTip=t,e.tipName=w()(t).call(t,(function(e){return e.label})),e.resultSearchTip=[],e.model.filters.length>0&&e.setFilterParams()}))},e.initConfig=function(){var t=n.defer();return e.model.getConfig?e.model.getConfig().then((function(e){t.resolve(e)})):e.model.config&&t.resolve(e.model.config),t.promise},t.$on("win_body_click_event",(function(){e.inputActive=!1})),e.showTip=function(t,n){t&&t.stopPropagation(),e.inputActive=n,e.setTip()},e.keywordsChange=function(t){e.simplifyKeywords(t);var n=e.matchFilterItem(e.keywords);n.search_key&&n.op?"value"!==e.tipType&&e.setTip():e.setTip()},e.setTip=function(){var t=e.matchFilterItem(e.keywords);document.getElementsByClassName("tip-list")[0].scrollTop=0,e.tipIndex=null,e.resultSearchTip=[],t.search_key?t.op?(e.tipType="value",e.setDictionaryTip(t)):(e.tipType="op",e.setOpTip(t.match_info.options&&t.match_info.options.control_type)):(e.tipType="type",e.setTypeTip(t.content))},e.matchFilterItem=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={};return t.replace(/^([\u4e00-\u9fa5]*)(:|>=|<=|>|<)?([\s\S]+)?$/,(function(i,o,a,l){var r,c,d=e.oringinSearchTip[s()(r=e.tipName).call(r,o)];n={search_name:o,search_key:d&&d.key,op:a,value_id:l&&w()(c=l.split(",")).call(c,(function(t){var n,i;if(e.resultSearchAllData&&~s()(n=e.resultSearchTip).call(n,t))return e.resultSearchAllData[s()(i=e.resultSearchTip).call(i,t)].id})),value:l&&l.split(","),match_info:d,content:t}})),n},e.setTypeTip=function(t){var n,i=new RegExp(t);e.resultSearchTip=Pe()(n=e.tipName).call(n,(function(e){return i.test(e)&&t!==e}))},e.setOpTip=function(t){var n;~s()(n=["integer","date"]).call(n,t)?e.resultSearchTip=[":",">",">=","<","<="]:e.resultSearchTip=[":"]},e.setDictionaryTip=function(t){var n;if(!~s()(n=["baseitem_to_str","baseitem_multi_value","link","baseitem"]).call(n,t.match_info.options.control_type))return!1;t.match_info.key&&i.getFieldSelector(t.match_info.options.selectKey||t.match_info.key).then((function(n){var i;n&&(s()(i=["baseitem_multi_value","link","baseitem"]).call(i,t.match_info.options.control_type)>-1&&(e.resultSearchAllData=n),e.resultSearchTip=w()(n).call(n,(function(e){return e.name||e.value})))}))},e.selectTip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=e.matchFilterItem(e.keywords);if("type"===e.tipType)if(e.resultSearchTip.length!==e.tipName.length){var i=new RegExp(n.search_name+"$");e.keywords=e.keywords.replace(i,(function(){return t}))}else e.keywords=t;else"op"===e.tipType?e.keywords+=t:e.keywords+=(n.value?",":"")+t;e.setTip(),e.inputOperate.setFocus()},e.tipLocate=function(e){document.getElementsByClassName("tip-list")[0].scrollTop=34*(e||0)-70},e.operate=function(t,n){var i=window.event?t.keyCode:t.which;13===i?e.search_operate(n):i?38===i?(t.preventDefault(),e.tipIndex=e.tipIndex>0?e.tipIndex-1:null,e.tipLocate(e.tipIndex)):40===i&&(t.preventDefault(),(!e.tipIndex||e.tipIndex<e.resultSearchTip.length-1)&&(e.tipIndex=null===e.tipIndex?0:e.tipIndex+1,e.tipLocate(e.tipIndex))):(t.stopPropagation(),e.search_operate(n))},e.search_operate=function(n){if(null==e.tipIndex){e.simplifyKeywords(n),e.simplifyKeywords(n);var i=e.matchFilterItem(e.keywords);i.match_info?(e.model.filters.push(i),e.setFilterParams(),e.keywords="",e.inputOperate.setBlur(),e.inputActive=!1,e.setTip()):t.show_warning("搜索条件有误，请重新输入")}else null!=e.tipIndex&&e.selectTip(e.resultSearchTip[e.tipIndex])},e.deleteFilter=function(t){var n;b()(n=e.model.filters).call(n,t,1),e.setFilterParams()},e.simplifyKeywords=function(t){if(!t)return"";t=(t=(t=t.replace(/([^\s]+?)：/,(function(e,t){return t+":"}))).replace(/，/g,",")).replace(/([^\s]+?)([《》])/,(function(e,t,n){return"《"===n&&(n="<"),"》"===n&&(n=">"),t+n})),e.keywords=t},e.setFilterParams=function(){var t;e.result_filters=w()(t=e.model.filters).call(t,(function(e){var t,n=~s()(t=["baseitem_multi_value","baseitem"]).call(t,e.match_info.options.control_type)?"value_id":"value",i=e[n];return":"===e.op?1===i.length&&"value"===n?{key:e.search_key,op:"like",value:"%"+i[0]+"%"}:{key:e.search_key,op:"in",value:i}:{key:e.search_key,op:e.op,value:i[0]}})),e.model.callback&&e.model.callback(e,e.result_filters)}}]}}]),O.a.factory("$searchBox",[function(){return{create:function(){return{placeholder:null,config:[],getConfig:null,filters:[],result_filters:[],callback:null,$setOptions:function(e){var t,n=this;return n.version=e.version||(new Date).getTime(),g()(t=re()(e)).call(t,(function(t){n[t]=e[t]})),n},set set_config(e){this.config=e,this.valueChange&&this.valueChange("config")},set set_getConfig(e){this.getConfig=e,this.valueChange&&this.valueChange("config")},set set_filter(e){this.filter=e,this.valueChange&&this.valueChange("filter")}}}}}])},XMR8:function(e,t,n){"use strict";n("oVuX");var i=n("WxoT"),o=n.n(i),a=n("+oHS"),l=n.n(a),r=n("mrSG"),c=(n("/8mQ"),n("CGID")),s=n.n(c);window.app.controller("fixMetaDialogCtrl",["$controller","$rootScope","$scope","$hcForm","MetaEditorService",function(e,t,n,i,a){var c=this,s=[{key:"auto_fixed",label:"已进行的自动修复",component:"hc-text-area",options:{width:"col-12",readOnly:!0,singleLine:!1}},{key:"validate",label:"需手动修改，删除已有元数据时，不清楚的请联系开发老师 确认清楚后再删除",component:"hc-code",options:{width:"col-6",readOnly:!0,singleLine:!1}},{key:"edit",label:"在此处修改",component:"hc-code",options:{width:"col-6",readOnly:!1,singleLine:!1}}];n.init=function(){n.base_form=i.createForm().$setMeta(s),n.base_form.data.auto_fixed=l()(n.params.changes).join("\n")||"无自动修复",n.base_form.data.validate=o()(n.params.validate,null,4),n.base_form.data.edit=n.params.fixedMeta,n.$dialog.title(n.params.biz_type+" 类型元数据，文档在wiki搜索: 元数据校验").operates([{label:"返回",func:n.close,key:"back",left:!0},{label:"重新校验",func:n.valid,key:"valid",left:!0},{label:"覆盖原有元数据",func:n.submit,key:"submit",default:!0,is_important:!0,left:!1}])},n.close=function(){n.$dialog.check_close()},n.getMeta=function(){return JSON.parse(n.base_form.field_metas.edit.options.getValue())},n.valid=function(){return Object(r.c)(c,void 0,void 0,(function(){var e,t,i,o;return Object(r.e)(this,(function(l){switch(l.label){case 0:return e=n.getMeta(),t=n.base_form.data,o=(i=JSON).stringify,[4,a.validate_meta(n.params.biz_type,e)];case 1:return t.validate=o.apply(i,[l.sent(),null,4]),[2]}}))}))},n.submit=function(){var e=n.getMeta();n.$dialog.resolve_data(e),n.$dialog.dialog_close()}}]),t.a={controller:"fixMetaDialogCtrl",template:s.a,size:"super-max"}},XQQm:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("526F"),o=n.n(i),a=n("WxoT"),l=n.n(a),r=n("eLKs"),c=n.n(r),s=n("OBge"),d=n.n(s),u=n("mrSG"),_=n("1GJp"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.d)(t,e),t.prototype.getMeta=function(){return Object(u.c)(this,void 0,d.a,(function(){return Object(u.e)(this,(function(e){return[2,this.setting_form_meta.fields]}))}))},t.prototype.initOptions=function(){return Object(u.c)(this,void 0,d.a,(function(){return Object(u.e)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.initOptions.call(this)];case 1:return t.sent(),this.options.tip=this.setting_form_meta.tip,[2]}}))}))},t.prototype.getAlterOperator=function(){return Object(u.c)(this,void 0,d.a,(function(){return Object(u.e)(this,(function(e){var t;return[2,[{label:"高级",func:c()(t=this.advanceEdit).call(t,this),left:!0}]]}))}))},t.prototype.advanceEdit=function(){var e=this;this.hcDialog.getDialog(_.a).show({readOnly:!1,data:l()(this.form_model.data)}).then((function(t){o()(e.form_model.data,JSON.parse(t))}))},t}(n("/PXk").a)},"XY+Y":function(e,t){e.exports='<style>\n    .list-icon-text {\n        display: table;\n        width: 100%;\n        background: #ffffff;\n    }\n\n    .list-icon-text > div {\n        display: table-cell;\n        vertical-align: middle;\n    }\n\n    .list-icon-text > div:first-child {\n        padding-left: 10px;\n    }\n\n    .list-icon-text > div:last-child {\n        padding-right: 10px;\n    }\n\n    .list-icon-text .icon {\n        width: 36px;\n        text-align: left;\n        font-size: 24px;\n        padding-top: 6px;\n    }\n\n    .list-icon-text .text {\n        display: table;\n        width: 100%;\n    }\n\n    .list-icon-text .text > div {\n        display: table-cell;\n        vertical-align: middle;\n\n    }\n\n    .list-icon-text .text .main-text {\n        font-size: 16px;\n        padding: 14px 0;\n    }\n\n    .list-icon-text .text .alter-text {\n        font-size: 10px;\n        color: #aaa;\n        text-align: right;\n    }\n\n    .list-icon-text .go {\n        width: 20px;\n        text-align: right;\n        font-size: 12px;\n        padding-top: 2px;\n        color: #aaa;\n    }\n\n    .list-icon-text .text,\n    .list-icon-text .go {\n        border-top: 1px solid rgb(246, 246, 248);\n    }\n\n    list-pic-name2:first-child .go,\n    list-pic-name2:first-child .text {\n        border-top: none;\n    }\n\n    .list-icon-text .unread {\n        text-align: right;\n    }\n\n    .list-icon-text .unread span {\n        display: inline-block;\n        background: #03a9f4;\n        color: #fff;\n        padding: 4px 8px;\n        border-radius: 10px;\n        font-size: 12px;\n    }\n\n    .list-icon-text .unread-dot {\n        width: 10px;\n        vertical-align: middle;\n        height: 10px;\n        background: #ff0000;\n        border-radius: 10px;\n    }\n</style>\n<div class="list-icon-text tg">\n    <div class="icon blue {{icon}}"></div>\n\n    <div class="text">\n        <div class="main-text">{{name}}</div>\n        <div class="alter-text">{{desc}}</div>\n    </div>\n\n    <div class="go icon-hcm-arrow-right"></div>\n</div>\n'},XhYy:function(e,t,n){"use strict";var i=n("mnMc"),o=n.n(i),a=n("guyh"),l=n.n(a),r=n("ZbhI"),c=n.n(r),s=n("FLGM"),d=n.n(s);window.app.service("crudSettingService",["$q","$http","$filter","dataService","BaseCRUDService",function(e,t,n,i,a){return angular.extend(angular.copy(a.getBaseService)("common.query.setting"),{getAvailablePlan:function(e,t,n,o,a){return i.callHcmOpenApi("common.query.setting.my.list",{filter_str:e,filter_dict:t,page_index:n,page_size:o,extra_property:a},"GET")},getDefaultSetting:function(e){return i.callHcmOpenApi("common.query.setting.list",{filter_dict:e,page_index:1,page_size:1e4})},mergeSetting:function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1),t=t||[];var i=d()(t).call(t,(function(e){return e.key}));d()(e).call(e,(function(e){var n=c()(i).call(i,e.key);~n&&angular.extend(e,t[n])})),l()(e).call(e,(function(e,t){return(e.sequence||1e4)-(t.sequence||1e4)}));var a=[];return n&&d()(e).call(e,(function(e){e.label&&o()(i).call(i,e.key)&&a.push(e)})),n?a:e}})}])},XyIB:function(e,t){e.exports='<div class="comm-content">\n    \x3c!-- <rec-chat-line ng-if="$ctrl.options.params" rec-chat="$ctrl.options.params"></rec-chat-line> --\x3e\n    <div class="noValue" ng-if="empty&&(dialog_content.list.length==0)">\n        <div class="icon">\n            <hc-list-no-data model="{\'data\':[]}" caption="{{\'rec_no_content\'|translate}}"></hc-list-no-data>\n        </div>\n    </div>\n    <div class="perf-chat-line articles">\n        <div>\n            <pro-job-card ng-if="id" pro-id="id"></pro-job-card>\n            <div class="chat-line-main" ng-if="!empty&&(dialog_content.list.length!==0)">\n                <div ng-repeat="_item in dialog_content.list track by $index">\n                    <perf-article-item id=\'article_item_{{_item.id}}\' item="_item" approve-record="approveRecord"\n                                  ng-if="!(recChat.applicant&&_item.public!=0)">\n                    </perf-article-item>\n                </div>\n                <list-next ng-if="dialog_content.list.length!=0" list-controller="dialog_content"></list-next>\n            </div>\n        </div>\n    </div>\n    <perf-chat-box ng-if="$ctrl.options.params" rec-chat="$ctrl.options.params"></perf-chat-box>\n    <perf-article-comment  ng-cloak></perf-article-comment>\n    \n</div>\n\n'},Y23d:function(e,t,n){e.exports="<div class=\"hcm-content-indicator operate-banner flex flex-start\"\n     ng-hide=\"(hideComponents || []).includes('hcm-content-indicator')\">\n    <div data-ng-if=\"list_model.selector_type==2&&['list','card','rec','rec_recommend_job'].indexOf(list_model.view)>=0\"\n         class=\"check-box-content\">\n        "+n("Whvs")+'\n    </div>\n    <hc-query model=\'advance_query\' ng-if="!model_meta.advance_query.close&&!use_new_query"></hc-query>\n    <hc-query-new model=\'advance_query\' ng-if="!model_meta.advance_query.close&&use_new_query"></hc-query-new>\n    <div data-ng-if="model_meta.advance_query.close" class="simple-advance-query simple-form flex-1 flexbox">\n        '+n("ZGqi")+'\n    </div>\n    <div class="change_list_view_pc">\n        '+n("KaK+")+'\n    </div>\n</div>\n<div class="category-tabs" data-ng-if="category_selected.length&&!print_view">\n    <hc-tabs value="category_id" on-value-change="changeCategory">\n        <hc-tab-pane\n            ng-repeat="category_value in tabPanes track by $index"\n            label="category_value.name"\n            name="category_value.id"\n            count="category_value.count"></hc-tab-pane>\n    </hc-tabs>\n</div>\n'},YNxq:function(e,t){e.exports='<div class="bill-third-process-page" ng-init="$ctrl.$onInit()">\n    <div class="process-block" ng-if="$ctrl.wf_inst_id != null">\n        <div class="parallel-change-box-2" ng-if="$ctrl.inst.state != \'running\' && ($ctrl.inst.inst_type == 2 || $ctrl.lastInstId)">\n            <div class="parallel-change-2">\n                <div class="parallel_str-2" ng-class="{\'parallel-2\': $ctrl.inst.parent_inst_id, \'parallel_parent-2\': !$ctrl.inst.parent_inst_id}">{{$ctrl.inst.parent_inst_id ? "子": "主"}}</div>\n                <div class="change-icon-2 icon-hcm-changeuser" hc-title="{{$ctrl.inst.parent_inst_id ? \'切换到主流转\': \'切换到子流转\'}}" ng-click="$ctrl.changeInstType()" ng-if="$ctrl.inst.state != \'running\' && ($ctrl.inst.inst_type == 2 || $ctrl.lastInstId)"></div>\n            </div>\n        </div>\n        <div class="process current-process"\n             ng-if="$ctrl.current_node != null && $ctrl.current_node.wf_def_type != \'start\'">\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="current_tag">\n                        <img class="tag_img" ng-src="{{$ctrl.imgSrc}}">\n                        <span class="current_string">当前</span>\n                    </div>\n                    <div class="node-name">\n                        <div>{{$ctrl.current_node.wf_def_name}}</div>\n                        <div class="parallel-change-box">\n                            <div class="parallel-change">\n                                <div class="parallel_str" ng-if="$ctrl.inst.state == \'running\' && ($ctrl.inst.inst_type == 2 || $ctrl.lastInstId)" ng-class="{\'parallel\': $ctrl.inst.parent_inst_id, \'parallel_parent\': !$ctrl.inst.parent_inst_id}">{{$ctrl.inst.parent_inst_id ? "子": "主"}}</div>\n                                <div class="change-icon icon-hcm-changeuser" hc-title="{{$ctrl.inst.parent_inst_id ? \'切换到主流转\': \'切换到子流转\'}}" ng-click="$ctrl.changeInstType()" ng-if="$ctrl.inst.state == \'running\' && ($ctrl.inst.inst_type == 2 || $ctrl.lastInstId)"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="process-content">\n                    <div class="info" ng-if="$ctrl.current_node.assignment.length == 1">\n                        <div class="info-header">\n                            <div class="emp">\n                                <div class="photo-box">\n                                    <img ng-src="{{ $ctrl.current_node.assignment[0].executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': $ctrl.current_node.assignment[0].assignment_pass==1,\'rejected\':$ctrl.current_node.assignment[0].assignment_pass==0}"></div>\n                                </div>\n                                <div class="name">\n                                    {{ $ctrl.current_node.assignment[0].executor.id == $ctrl.employee_id\n                                    ? (\'oneself\'|translate) : $ctrl.current_node.assignment[0].executor.name}}\n                                </div>\n                                <div class="approve-status"\n                                     ng-class="$ctrl.current_node.approve_state === null ? \'pending_approval\':\'not_pass\'">\n                                    {{$ctrl.translateLabel($ctrl.current_node, null, \'node\')}}\n                                </div>\n                            </div>\n                            <div class="job-title">\n                                {{ $ctrl.current_node.assignment[0].executor.department }} {{ $ctrl.current_node.assignment\n                                [0].executor.job_title }}\n                            </div>\n                        </div>\n                        <div class="info-content">\n                            <div class="reminders" ng-click="$ctrl.sendReminders()" ng-if="$ctrl.current_node.assignment && $ctrl.current_node.assignment[0].executor && $ctrl.current_node.assignment[0].executor.id != $ctrl.employee_id &&\n                                                         !$ctrl.current_node.assignment[0].assignment_pass && wf_inst.state != \'cancel\' && $ctrl.current_node.multi_approve_rule != 5">\n                                <div class="desc">{{\'Urge\'|translate}}</div>\n                            </div>\n                            <div class="reminders view-detail" ng-if="$ctrl.current_node.show_more || $ctrl.current_node.multi_approve_rule===5"\n                             ng-click="$ctrl.showDetail($ctrl.current_node)">{{\'view_details\'|translate}}</div>\n                        </div>\n                    </div>\n                    <div class="multi-info" ng-if="$ctrl.current_node.assignment.length > 1">\n                        <div class="emp-list">\n                            <div class="emp-box" ng-repeat="_assignment in $ctrl.current_node.assignment">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _assignment.executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': !_assignment.state && _assignment.assignment_pass==1,\'rejected\': !_assignment.state && _assignment.assignment_pass==0, \'noapprove\': _assignment.state }"></div>\n                                </div>\n\n                                <div class="name">\n                                    {{ _assignment.executor.id == $ctrl.employee_id ? (\'oneself\'|translate) : _assignment.executor.name}}\n                                </div>\n                            </div>\n                            <div class="desc">\n                                共{{ $ctrl.current_node.assignment.length }}{{\'etc_person_man\'|translate}}</div>\n                        </div>\n                    </div>\n                    <div class="more-detail">\n                        <div class="cc-emp"\n                             ng-class="\'first-item\'"\n                             ng-if="$ctrl.current_node.assignment5 && $ctrl.current_node.assignment5.length>0"\n                             title="{{$ctrl.getCcEmp($ctrl.current_node)}}">\n                            抄送人：{{$ctrl.getCcEmp($ctrl.current_node)}}</div>\n                            <div class="btn view-detail" ng-if="$ctrl.current_node.assignment.length>1&&($ctrl.current_node.show_more || (!$ctrl.lastInstId && $ctrl.current_node.multi_approve_rule===5))"\n                                ng-click="$ctrl.showDetail($ctrl.current_node)">{{\'view_details\'|translate}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="process first-process"\n             ng-class="{\'no-current\': $ctrl.current_node == null}"\n             ng-if="$ctrl.inst.creator">\n            <div class="process-status passed-node"></div>\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="node-name">{{\'start_process\'|translate}}</div>\n                    <div class="time">{{ $ctrl.inst.create_time }}</div>\n                </div>\n                <div class="process-content">\n                    <div class="info">\n                        <div class="info-header">\n                            <div class="emp">\n                                <div class="photo-box">\n                                    <img ng-src="{{ $ctrl.inst.creator.photo|hcPhoto:64}}">\n                                </div>\n                                <div\n                                    class="name">{{ $ctrl.inst.creator.id == $ctrl.employee_id ? (\'oneself\'|translate) : $ctrl.inst.creator.name}}\n                                </div>\n                                <div class="approve-status">发起审批</div>\n                            </div>\n                            <div\n                                class="job-title">{{ $ctrl.inst.creator.department }} {{ $ctrl.inst.creator.job_title }}\n                            </div>\n                        </div>\n                        <div class="info-content">\n                            <div class="opinion">{{ \'start_process\'|translate }}</div>\n                            <div class="hc-button" ng-click="$ctrl.communicateProcess();"\n                                 ng-if="$ctrl.inst.creator.id !== $ctrl.employee_id">{{\'communicate\'|translate}}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="process" ng-repeat="_item in $ctrl.process_info" ng-if="$ctrl.process_info.length > 0">\n            <div class="process-status passed-node"></div>\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="node-name">{{ _item.wf_def_name }}</div>\n                    <div class="time">{{ _item.execute_time || _item.update_time }}</div>\n                </div>\n                <div class="process-content">\n                    <div class="info" ng-if="_item.assignment.length == 1">\n                        <div class="info-header">\n                            <div class="emp">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _item.assignment[0].executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': _item.assignment[0].assignment_pass==1,\'rejected\': _item.assignment[0].assignment_pass==0}"></div>\n                                </div>\n                                <div class="name">\n                                    {{ _item.assignment[0].executor.id == $ctrl.employee_id\n                                    ? (\'oneself\'|translate) : _item.assignment[0].executor.name}}\n                                </div>\n                                <div\n                                    class="approve-status">{{$ctrl.translateLabel(_item, null, \'item\') }}</div>\n                            </div>\n                            <div class="job-title">\n                                {{ _item.assignment[0].executor.department }} {{ _item.assignment\n                                [0].executor.job_title }}\n                            </div>\n                        </div>\n                        <div class="info-content">\n                            <div class="opinion" ng-if="_item.show_comment"><span\n                                ng-if="!_item.assignment[0].assignment_comment">{{_item.assignment[0].assignment_pass == 1 ? (\'agree\'|translate) : (\'disagree\'|translate) }}</span>{{ _item.assignment[0].assignment_comment }}\n                            </div>\n                        </div>\n                    </div>\n                    <div class="multi-info" ng-if="_item.assignment.length>1">\n                        <div class="emp-list">\n                            <div class="emp-box" ng-repeat="_assignment in _item.assignment">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _assignment.executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': !_assignment.state && _assignment.assignment_pass==1,\'rejected\': !_assignment.state && _assignment.assignment_pass==0, \'noapprove\': _assignment.state }"></div>\n                                </div>\n                                <div class="name">\n                                    {{ _assignment.executor.id == $ctrl.employee_id ? (\'oneself\'|translate) : _assignment.executor.name}}\n                                </div>\n                            </div>\n                            <div class="desc">共{{ _item.assignment.length }}{{\'etc_person_man\'|translate}}</div>\n                        </div>\n                    </div>\n                    <div class="more-detail">\n                        <div class="cc-emp"\n                             ng-if="_item.assignment5 && _item.assignment5.length>0"\n                             title="{{$ctrl.getCcEmp(_item)}}">\n                            抄送人：{{$ctrl.getCcEmp(_item)}}</div>\n                        <div class="btn" ng-if="_item.show_more || _item.multi_approve_rule===5"\n                             ng-click="$ctrl.showDetail(_item)">{{\'view_details\'|translate}}</div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class="process last-process"\n             ng-if="$ctrl.current_node != null && $ctrl.current_node.wf_def_type != \'start\'">\n            <div class="process-status current-node"></div>\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="node-name">{{ $ctrl.current_node.wf_def_name }}</div>\n                    <div class="time">{{ $ctrl.current_node.update_time || $ctrl.current_node.create_time }}</div>\n                </div>\n                <div class="process-content">\n                    <div class="info" ng-if="$ctrl.current_node.assignment.length == 1">\n                        <div class="info-header">\n                            <div class="emp">\n                                <div class="photo-box">\n                                    <img ng-src="{{ $ctrl.current_node.assignment[0].executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': $ctrl.current_node.assignment[0].approve_state==1,\'rejected\':$ctrl.current_node.assignment[0].approve_state==0}"></div>\n                                </div>\n                                <div class="name">\n                                    {{ $ctrl.current_node.assignment[0].executor.id == $ctrl.employee_id\n                                    ? (\'oneself\'|translate) : $ctrl.current_node.assignment[0].executor.name}}\n                                </div>\n                                <div class="approve-status"\n                                     ng-class="$ctrl.current_node.approve_state === null ? \'pending_approval\' : \'not_pass\'">\n                                     {{$ctrl.translateLabel($ctrl.current_node, null, \'node\')}}\n                                </div>\n                            </div>\n                            <div class="job-title">\n                                {{ $ctrl.current_node.assignment[0].executor.department }} {{ $ctrl.current_node.assignment[0].executor.job_title }}\n                            </div>\n                        </div>\n                        <div class="info-content">\n                            <div class="opinion">{{ $ctrl.current_node.assignment[0].assignment_pass == 1 ?\n                                (\'agree\'|translate) : ($ctrl.current_node.assignment[0].assignment_pass === null ? \'\' : (\'disagree\'|translate)) }}\n                            </div>\n                            <div class="reminders" ng-click="$ctrl.sendReminders()" ng-if="$ctrl.current_node.assignment && $ctrl.current_node.assignment[0].executor && $ctrl.current_node.assignment[0].executor.id != $ctrl.employee_id &&\n                                                             !$ctrl.current_node.assignment[0].assignment_pass && $ctrl.inst.state != \'cancel\' && $ctrl.current_node.multi_approve_rule != 5">\n                                <div class="desc">{{\'Urge\'|translate}}</div>\n                            </div>\n                            <div class="reminders view-detail" ng-if="$ctrl.current_node.show_more || $ctrl.current_node.multi_approve_rule===5"\n                             ng-click="$ctrl.showDetail($ctrl.current_node)">{{\'view_details\'|translate}}</div>\n                            </div>\n                            </div>\n                            <div class="multi-info" ng-if="$ctrl.current_node.assignment.length>1">\n                                <div class="emp-list">\n                            <div class="emp-box" ng-repeat="_assignment in $ctrl.current_node.assignment">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _assignment.executor.photo|hcPhoto:64}}">\n                                    <div class="approve-status-radio" ng-class="{\'passed\': !_assignment.state && _assignment.assignment_pass==1,\'rejected\': !_assignment.state && _assignment.assignment_pass==0, \'noapprove\': _assignment.state}"></div>\n                                </div>\n                                <div class="name">\n                                    {{ _assignment.executor.id == $ctrl.employee_id ? (\'oneself\'|translate) : _assignment.executor.name}}\n                                </div>\n                            </div>\n                            <div class="desc">\n                                共{{ $ctrl.current_node.assignment.length }}{{\'etc_person_man\'|translate}}</div>\n                        </div>\n                    </div>\n                    <div class="more-detail">\n                        <div class="cc-emp"\n                             ng-if="$ctrl.current_node.assignment5 && $ctrl.current_node.assignment5.length>0"\n                             title="{{$ctrl.getCcEmp($ctrl.current_node)}}">\n                            抄送人：{{$ctrl.getCcEmp($ctrl.current_node)}}</div>\n                        <div class="btn view-detail" ng-if="$ctrl.current_node.assignment.length>1&&($ctrl.current_node.show_more || (!$ctrl.lastInstId && $ctrl.current_node.multi_approve_rule===5))"\n                             ng-click="$ctrl.showDetail($ctrl.current_node)">{{\'view_details\'|translate}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="process last-process"\n             ng-if="!$ctrl.current_node && ([\'finish\', \'p_pass\', \'reject\'].indexOf($ctrl.inst.state) >= 0)">\n            <div class="process-status"\n                 ng-class="$ctrl.inst.state == \'finish\' && \'pass\' || $ctrl.inst.state == \'p_pass\' && \'pass\' || $ctrl.inst.state == \'reject\' && \'no-pass\'"></div>\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="node-name">{{\'end_process\'|translate}}</div>\n                </div>\n                <div class="process-content">\n                    <div class="info">\n                        <div class="info-finish"\n                             ng-class="$ctrl.inst.state == \'finish\' && \'pass\' || $ctrl.inst.state == \'p_pass\' && \'pass\' || $ctrl.inst.state == \'reject\' && \'no-pass\'">\n                            {{ $ctrl.translateLabel($ctrl.inst, null, \'inst\') }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="show-more-bar" ng-if="$ctrl.unreached_data.length > 0"\n             ng-click="$ctrl.showUnreachedProcess()">\n            <div class="content">\n                {{ $ctrl.show_unreached ? (\'pack_up\'|translate) : (\'display_future\'|translate) + $ctrl.unreached_data.length + (\'display_node\'|translate) }}\n            </div>\n            <div class="icon" ng-class="$ctrl.show_unreached ? \'icon-hcm-arrow-up\':\'icon-hcm-arrow-down\'"></div>\n        </div>\n        <div class="process" ng-repeat="_item in $ctrl.unreached_data"\n             ng-if="$ctrl.unreached_data.length > 0 && $ctrl.show_unreached"\n             ng-class="{\'last-process\':$last,\'first-process\':$first, \'only-one\':$ctrl.unreached_data.length === 1}">\n            <div class="process-status "></div>\n            <div class="process-info">\n                <div class="process-header">\n                    <div class="node-name">{{ _item.name }}</div>\n                </div>\n                <div class="process-content">\n                    <div class="info" ng-if="_item.assignment.length == 1">\n                        <div class="info-header">\n                            <div class="emp">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _item.assignment[0].photo|hcPhoto:64}}">\n                                    \x3c!-- <div class="approve-status-radio" ng-class="\'unreached\'"></div> --\x3e\n                                </div>\n                                <div class="name">\n                                    {{ _item.assignment[0].id == $ctrl.employee_id ? (\'oneself\'|translate) : _item.assignment[0].name }}\n                                </div>\n                                <div class="approve-status">{{$ctrl.translateLabel(_item, \'not_approval\', \'node\') }}</div>\n                            </div>\n                            <div class="job-title">\n                                {{ _item.assignment[0].department }} {{ _item.assignment[0].job_title }}\n                            </div>\n                        </div>\n                        <div class="info-content">\n                            <div class="opinion">{{$ctrl.translateLabel(_item, \'not_approval\', \'node\')}}</div>\n                        </div>\n                    </div>\n                    <div class="multi-info" ng-if="_item.assignment.length>1">\n                        <div class="emp-list">\n                            <div class="emp-box" ng-repeat="_assignment in _item.assignment">\n                                <div class="photo-box">\n                                    <img ng-src="{{ _assignment.photo|hcPhoto:64}}">\n                                    \x3c!-- <div class="approve-status-radio" ng-class="\'unreached\'"></div> --\x3e\n                                </div>\n                                <div class="name">\n                                    {{ _assignment.id == $ctrl.employee_id ? (\'oneself\'|translate) : _assignment.name}}\n                                </div>\n                            </div>\n                            <div class="desc">\n                                <span>共{{ _item.assignment.length }}{{\'etc_person_man\'|translate}}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div ng-if="_item.show_more" class="btn"\n                         ng-click="$ctrl.showDetail(_item,\'unreached\')">{{\'view_details\'|translate}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},YSSH:function(e,t){e.exports='<div class="select-pane-container" ng-init="init()">\n    <div class="selector-pane"\n         ng-class="{\'selected\': isSelected(_d), \'disabled\': isDisabled(_d), \'overflow\': is_overflow, \'expanded\':expanded}"\n         ng-repeat="_d in data_list track by $index"\n         ng-click="onClick(_d)">\n        <div class="label"\n             ng-bind-html="((params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label) | toTrusted"\n        ></div>\n    </div>\n</div>\n<div class="pane-expand" ng-if="is_overflow" ng-click="expandClick()" ng-class="{\'expanded\':expanded}">\n    {{expanded ? \'收起\' : \'展开\'}}\n    <span class="expand-icon" ng-class="{\'icon-hcm-arrow-up\': expanded, \'icon-hcm-arrow-down\': !expanded}"></span>\n</div>'},YUeV:function(e,t){e.exports='<div class="hc-activity-info">\n    <div class="info">\n        <div class="info-top icon-hcm-calendar">\n            <span>{{\'perf_assess_cycle\'|translate}}: </span>\n            <span>{{$ctrl.model.assess_cycle}}</span>\n        </div>\n        <div class="info-bottom icon-hcm-form-preview">\n            <span>{{\'perf_assess_scheme\'|translate}}: </span>\n            <span>{{$ctrl.model.scheme}}</span>\n        </div>\n    </div>\n</div>\n'},Yhui:function(e,t,n){"use strict";n.r(t);n("sMBO");var i=n("FLGM"),o=n.n(i);n("CoJ3").a.controller("jobInfoBatchSelectorCtrl",["contextService","$scope","$rootScope","$hcDataGrid","dataService","$hcDialog","$state","$hcForm","hcDialogSelector","orgSetService",function(e,t,n,i,a,l,r,c,s,d){t.init=function(){t.$dialog.title("选择人员"),t.$dialog.operates([{label:"取消",func:t.close},{label:"确定",func:t.submit,default:!0}]),t.tree_filter={mapping:!0,mini_type:100,role:t.params.role||"cm-org-emp!emp_base!view"},t.biz_id=t.params.biz_id,t.initList()},t.initList=function(){a.callHcmCloudApi("/template/load_template?key=job_info_batch_selector_list_define.json",{},"GET").then((function(e){t.list_define=e,t.show_search_bar=e.show_search_bar,t.initListParams(),t.initListMeta()}))},t.initListParams=function(){var e;t.list_selector=o()(e=t.list_define.fields).call(e,(function(e){return e.key})),t.list_filter=[],t.list_order=[]},t.initListMeta=function(){var e;t.list_options={fixedLeft:t.list_define.fixedLeft,cell_mode:"static",type:"view",allowSelect:!0,showIndexColumn:!0,showSelectColumn:!0,onRowClick:t.onRowClick},t.list_columns=[],o()(e=t.list_define.fields).call(e,(function(e){!e.hide&&t.list_columns.push(e)})),t.list=i.createDataGrid("list").$setOptions(t.list_options).$setMeta(t.list_columns)},t.getJobInfo=function(){var e={fields:t.list_selector,filters:t.list_filter,role:t.params.role||"cm-org-emp!emp_base!view",business_id:t.params.business_id,_from:0,page_size:100};a.callHcmOpenApi("emp.person.filter.query.result.by.business",e,null,!0).then((function(e){e.list.length>0?t.list.$fillRowData(e.list[0]):n.show_warning("没有找到该职员的任职信息，请检查","warning"),n.hide_waiting()}))},t.$on("tree-node-selected",(function(e,i){100==i.org_type&&(t.isEmpRepeat(i.id)?n.show_warning(i.name+" 已经被选择","warning"):(t.list_filter=[{key:"empbasicinfo#id",op:"=",value:i.id}],t.getJobInfo()))})),t.isEmpRepeat=function(e){for(var n=!1,i=0;i<t.list.data.length;i++)if(t.list.data[i]["empbasicinfo#id"]==e){n=!0;break}return n},t.close=function(){t.$dialog.dialog_close()},t.submit=function(){var e=t.list.$getData();t.$dialog.resolve_data(e),t.$dialog.dialog_close()},t.onRowClick=function(){},t.delRow=function(){t.list.$delRow()}}])},YvK2:function(e,t,n){"use strict";n("07d7"),n("5s+n"),n("p532");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("RXMP"),d=n.n(s),u=n("fHi0"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("OWCx"),h=n.n(f),g=n("+oHS"),v=n.n(g),b=n("a0dU"),y=n.n(b),w=(n("ls82"),n("SPx3")),x=n.n(w),k=n("04Ix"),$=n.n(k),O=n("TEMH"),D=n.n(O),C=n("zl2E");function M(e,t){var n=v()(e);if(h.a){var i=h()(e);t&&(i=m()(i).call(i,(function(t){return _()(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)d()(n=M(Object(i),!0)).call(n,(function(t){$()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;d()(a=M(Object(i))).call(a,(function(t){o()(e,t,_()(i,t))}))}}return e}window.app.controller("BaseComplexSingleCtrl",["$scope","dataService","contextService","$hcDialog","$hcForm","$filter","$rootScope","$controller","CRUDService","InfoDialog","$state","$hcView",function(e,t,n,i,o,a,l,r,c,s,d,u){r(C.a,{$scope:e,CRUDService:c,InfoDialog:s}),e.title=d.params.caption,e.refresh_nav_attachment=!1,e.getInfoAlterParam=function(){return{model:d.params.c_model}},e.getFilterDict=function(){var t,n,i,o,l,r={},c=null===(t=e.$parent.model_meta)||void 0===t?void 0:D()(n=t.childs).call(n,(function(e){return e.key===d.params.key}));return r[d.params.parent_field||(null===(i=e.$parent.model_meta)||void 0===i||null===(o=i.childs[c])||void 0===o?void 0:o.parent_id)||"origin_id"]=a("tryInteger")(d.params.id),S(S({},r),null===(l=e.getExtraFilterDict)||void 0===l?void 0:l.call(e,e.getEnvironmentParams()))},e.editItem=function(){i.getDialog(s).show({mode:e.view_model.data?"edit":"new",data:e.view_model.data||e.getFilterDict(),alter:e.getInfoAlterParam()}).then((function(t){e.refresh_nav_attachment&&e.refreshNavAttach(),e.fetchData(),e.afterEdit()}))},e.fetchData=function(){l.show_waiting(),c.getItemInfo(e.getFilterDict(),e.getForm(),e.getExtraProperty()).then(function(){var t=x()(y.a.mark((function t(n){var i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(i=e.loadDataAfterAsync)||void 0===i?void 0:i.call(e,e.getEnvironmentParams(),n);case 2:return e.view_model=u.createView().$setActionFunc(e.actionProcess).setViewMeta(e.model_meta).$setData(n),t.next=5,null===(o=e.setDataAfterAsync)||void 0===o?void 0:o.call(e,e.getEnvironmentParams());case 5:e.fetchDataSuccess(n),e.model_meta.modi_state&&c.getBizMeta("info",e.model_meta.modi_state).then((function(t){var n;e.view_model.$setModiMeta(e.metaParse(t.fields)),(null===(n=t.form_relations)||void 0===n?void 0:n.length)&&e.view_model.$setModiRelation(t.form_relations,c)})),e.modiFieldBefore&&e.view_model.$setModiFieldBefore(e.modiFieldBefore),e.initChildDataCollector();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){l.hide_waiting()}))},e.getForm=function(){return"view"},e.afterEdit=function(){}}]),t.a="BaseComplexSingleCtrl"},"Z/3M":function(e,t){e.exports='<div class=\'dashboard-micro\' ng-init="init()" ng-click="goToDashboard()">\n    <div class="icon icon-hcm-data tg"></div>\n    <div class="content tg">{{name}}</div>\n</div>'},Z73o:function(e,t){e.exports='<div class="detail-report-relations-setting-style model-list-style" data-ng-init="init()">\n    <div class="hcm-nav-content">\n        <div class="hcm-content flex">\n\x3c!--            <div class="hcm-content-indicator operate-banner">--\x3e\n\x3c!--                <div class="flex-1">--\x3e\n\n\x3c!--                </div>--\x3e\n\x3c!--            </div>--\x3e\n            <div class="hcm-hc-list-container">\n                <hc-config-list model="dataset_config_list"></hc-config-list>\n            </div>\n        </div>\n    </div>\n</div>\n'},ZGqi:function(e,t){e.exports='<div class="flex-1">\n    <hc-form model="list_filter_model"></hc-form>\n</div>\n<div class="search">\n    <span class="icon icon-hcm-check" ng-click="searchKey.change()"></span>\n    <input ng-model="searchKey.key" class="search"\n           placeholder="{{blur_fields}}" type="search"\n           ng-keyup="searchKey.blur($event)"\n           hc-title="{{blur_fields}}"\n           options="{mode: \'tip\', showOnOverflow: true}"\n    >\n</div>\n'},ZTcu:function(e,t){e.exports='<div class="hc-input-label-multi" ng-model=\'model\'>\n    <div class="lbl-words">\n        <a class="lbl-add" ng-click="add($event)" ng-hide="isAdd" ng-if="!options.readOnly">{{options.label ? options.label : \'添加标签\'}} <span class="icon-hcm-add icon"></span></a>\n        <a class="lbl" ng-repeat="v in model track by $index">{{v}}<span ng-click="remove($index)" class="icon-hcm-delete" ng-if="!options.readOnly"></span></a>\n        <input class="lbl-input" ng-model="options.newValue" ng-click="inputLable($event)" focus-me="isAdd" ng-keydown="inputKeyDown($event)" ng-if="isAdd" ng-blur=\'customBlur()\'/>\n    </div>\n</div>\n'},ZU4R:function(e,t){e.exports='<div class="hcm-btn-list" id="hcm-btn"\n     ng-if="model && mobile_btn_should_show(\'header\')"\n     ng-init="init()">\n    {{mobile_btn_should_show(\'bottom\')}}\n    <div class="mobile-btn-item">\n        \x3c!--移动端按钮需点击图标展示--\x3e\n        <button class="btn-mobile-out view"\n                ng-if="(model.simple_actions(true).length === 1) && position && position.indexOf(\'view\') !== -1"\n                ng-click="item_func(model.simple_actions(true)[0])">{{model.simple_actions(true)[0].label}}\n        </button>\n        <button class="btn-mobile secondary icon-hcm-more-point"\n                ng-click="headerShowMore($event)"\n                ng-hide="!model.filterActions(model.actions_group.un_select_actions).length && !model.alwaysShowSelect && !model.actions_group.select_actions.length"\n                ng-if="(model.simple_actions(true).length >= 1) && !((model.simple_actions(true).length === 1) && position && position.indexOf(\'view\') !== -1)">\n        </button>\n        \x3c!--不用选择可以操作的按钮--\x3e\n\x3c!--        <div class="mask" ng-show="itemIsMoreShow()" ng-click="quit($event)">--\x3e\n\x3c!--            <div class="mobile-drop-down-content">--\x3e\n\x3c!--                <div class="drop-down-list un-select-list">--\x3e\n\x3c!--                    <div class="tip" ng-if="model.actions_group.un_select_actions.length > 8">共&ensp;--\x3e\n\x3c!--                        <div class="high-light">--\x3e\n\x3c!--                            {{model.actions_group.un_select_actions.length}}--\x3e\n\x3c!--                        </div>&ensp;个操作项--\x3e\n\x3c!--                    </div>--\x3e\n\x3c!--                    <div class="scroll-field">--\x3e\n\x3c!--                        <div ng-repeat="_action in model.actions_group.un_select_actions track by $index"--\x3e\n\x3c!--                             class="mobile-button"--\x3e\n\x3c!--                             ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,--\x3e\n\x3c!--                             \'sys-color\':_action.is_important}"--\x3e\n\x3c!--                             ng-show="!(_action.hide|valueToFunc)()"--\x3e\n\x3c!--                             ng-click="item_func(_action)">--\x3e\n\x3c!--                            {{(_action.label|valueToFunc)()}}--\x3e\n\x3c!--                        </div>--\x3e\n\x3c!--                    </div>--\x3e\n\x3c!--                    <div class="mobile-button close-button" ng-click="select($event)"--\x3e\n\x3c!--                         ng-if="model.alwaysShowSelect || model.actions_group.select_actions.length">选择--\x3e\n\x3c!--                    </div>--\x3e\n\x3c!--                    <div class="mobile-button close-button">取消</div>--\x3e\n\x3c!--                </div>--\x3e\n\x3c!--            </div>--\x3e\n\x3c!--        </div>--\x3e\n        \x3c!--选择后才可以操作的按钮--\x3e\n        <div class="select-actions-list" ng-show="model.select_status">\n            <div\n                ng-repeat="_action in model.filterActions(model.actions_group.select_actions).slice(0, model.outer_btn_count)"\n                ng-click="item_func(_action)"\n                class="select-action"\n                ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,\n                             \'default\':_action.is_important|| model.actions_group.select_actions.length == 1}">\n                <div ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n            </div>\n            <div class="select-action more"\n                 ng-click="changeMoreSelectActions($event,true)"\n                 ng-if="model.filterActions(model.actions_group.select_actions).length > (model.outer_btn_count)">\n                <div class="icon-hcm-more-point more-icon"></div>\n                <div class="more-text">更多</div>\n            </div>\n        </div>\n        \x3c!--选择后可以操作的额外按钮--\x3e\n        <div class="mask" ng-show="show_alter_select_actions" ng-click="changeMoreSelectActions($event,false)">\n            <div class="mobile-drop-down-content">\n                <div class="drop-down-list">\n                    <div class="tip" ng-if="model.filterActions(model.actions_group.select_actions.slice(model.outer_btn_count)).length > 8">\n                        共&ensp;\n                        <div class="high-light">\n                            {{model.filterActions(model.actions_group.un_select_actions).length}}\n                        </div>&ensp;个操作项\n                    </div>\n                    <div class="scroll-field">\n                        <div\n                            ng-repeat="_action in model.filterActions(model.actions_group.select_actions).slice(model.outer_btn_count) track by $index"\n                            class="mobile-button"\n                            ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,\n                             \'sys-color\':_action.is_important}"\n                            ng-show="!(_action.hide|valueToFunc)()"\n                            ng-click="item_func(_action)">\n                            {{(_action.label|valueToFunc)()}}\n                        </div>\n                    </div>\n                    <div class="mobile-button close-button" ng-click="changeMoreSelectActions($event,false)">取消</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},ZVgi:function(e,t){e.exports='<div class="hc-select-dialog-dialog">\n    <div class="search-input">\n        <input type="text" ng-model="search[field_label]" ng-model-options="{debounce: 600}" placeholder="输入关键词进行过滤">\n    </div>\n    <div>\n        <div class="select-item" ng-repeat="_item in item_list | filter:search" ng-click="select(_item)">\n            <div class="select-icon icon-hcm-training"></div>\n            <div class="select-name">\n                {{_item[field_label]}}\n            </div>\n            <span class="select-desc">{{_item.desc}}</span>\n            <div class="select-check">\n                <div class="icon-hcm-info-succeed"\n                     ng-show="selected.includes(_item[field_key].toString())"></div>\n            </div>\n        </div>\n    </div>\n</div>'},Zlwg:function(e,t){e.exports='<div class=\'hc-dialog-sub-category-mask\' ng-click="model.mask_click()" ng-init="init()" ng-mouseover="dealMouseOver()">\n    <svg id="hc-dialog-sub-category-mask-svg" style="height: 100%; width: 100%">\n        <defs>\n            <mask id="hc-dialog-sub-category-mask:focus">\n                <rect x="0" y="0" width="100%" height="100%" fill="white"></rect>\n            </mask>\n        </defs>\n        <rect x="0" y="0" width="100%" height="100%" fill="transparent" mask="url(#hc-dialog-sub-category-mask:focus)"></rect>\n    </svg>\n</div>\n<div class="hc-dialog-window sub-category-dialog" ng-style="model.options.styles">\n    <div class="tree-menu-sub-category">\n        <div class="category-item" ng-repeat="item in $parent.$dialog.options.params.data">\n            <div class="sec-category">\n                <div class="sec-category-item"\n                     ng-click="resolveItem(item, $event)"\n                     hc-title="{{item.name}}"\n                     options="{\n                            mode: \'tip\',\n                            showOnOverflow: true,\n                            tipStyle:{background:\'#fff\', color:\'#000\'},\n                            hideArrow: true}">{{item.name}}</div>\n            </div>\n            <div class="third-category">\n                <div class="third-category-item"\n                     ng-repeat="third in item.children"\n                     ng-click="resolveItem(third, $event)"\n                     hc-title="{{third.name}}"\n                     options="{\n                            mode: \'tip\',\n                            showOnOverflow: true,\n                            tipStyle:{background:\'#fff\', color:\'#000\'},\n                            hideArrow: true}">\n                    {{third.name}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},ZxGa:function(e,t){e.exports="\x3c!-- <input class='component-input-inner' placeholder='{{options.placeholder}}' type='number' ng-model='model' ng-click='options.customClick()' ng-blur='options.customBlur()' ng-disabled='options.readOnly' maxlength='{{options.maxlength}}'> --\x3e\n<div class=\"icon-hcm-arrow-right tag\"></div>\n<div class=\"ui-select\" ng-class=\"{'is-readonly':options.readOnly}\">\n    <span>{{model==0 ? model : model||\"--请选择--\"}}\n    <select class=\"component-input-clear\"\n            ng-model=\"model\"\n            ng-options=\"m.value as m.label for m in options.list\"\n            ng-disabled=\"options.readOnly\">\n        <option value=\"\">--请选择--</option>\n    </select>\n  </span>\n</div>\n"},a9Ck:function(e,t){e.exports='<div class="component-container" data-ng-if="client===\'pc\'">\n    <hc-text-area options="options" placeholder="{{placeholder}}" ng-model="text" ng-if="displayDirective===\'hc-text-area\'">\n\n    </hc-text-area>\n    <hc-input options="options" placeholder="{{placeholder}}" ng-model="text" ng-if="displayDirective===\'hc-input\'">\n\n    </hc-input>\n</div>\n'},a9iL:function(e,t,n){"use strict";n("sMBO"),n("x83w");var i=n("/FZm"),o=n.n(i),a=n("RXMP"),l=n.n(a),r=n("lHQ6"),c=n.n(r),s=n("+oHS"),d=n.n(s),u=n("WxoT"),_=n.n(u),p=n("o+MX"),m=n.n(p),f=n("5PDf"),h=n.n(f),g=n("FLGM"),v=n.n(g),b=n("mnMc"),y=n.n(b),w=(n("eOWZ"),n("zFIQ")),x=n.n(w),k=n("uG5i"),O=n("mrSG"),D=n("CoJ3"),C=function(){function e(e,t){var n=this;this.$hcDialog=e,this.$hcSortableTree=t,this.column_defs_list=[];var i=this;this.fieldFunc={edit:function(e){return Object(O.c)(n,void 0,void 0,(function(){var t,n,o;return Object(O.e)(this,(function(a){var l;switch(a.label){case 0:return t=e,[4,i.$hcDialog.simpleInput("请输入要修改的名称","当前名称为  "+e.label)];case 1:return t.label=a.sent(),(null==(n=null===(o=h()(l=i.column_defs_list).call(l,(function(t){return t.key===e.key})))||void 0===o?void 0:o[0])?void 0:n.label)&&(n.label=e.label),[2]}}))}))},remove:function(e,t){var o,a,l;n.column_defs=n.getTree(m()(o=n.column_defs_list).call(o,n.able_fields_list),$(".column-defs-tree .hc-sortable-tree >.tree-node-child")),n.column_defs_list=n.getColumnDefsList(angular.copy(n.column_defs)),null===(l=null===(a=$(t.target).parents(".node"))||void 0===a?void 0:a.eq(0))||void 0===l||l.remove(),i.refreshSortTree()}},this.addGroup=function(e){i.$hcDialog.simpleForm("添加分组",[{key:"type",label:"分组类型",component:"hc-input-radio",options:{readOnly:"init_node"===e.key,width:"col-12",items_inline:!0,singleLine:!0,required:!0,default:"peer",list:[{name:"同级",value:"peer"},{name:"下级",value:"self"}]}},{key:"key",label:"key值",component:"hc-input",options:{singleLine:!0,width:"col-12",required:!0}},{key:"label",label:"名称",component:"hc-input",options:{singleLine:!0,width:"col-12",required:!0}}],{}).then((function(t){var n,o={key:t.key,label:t.label,type:"group",children:[]};n="init_node"===e.key?i.sortTree.data:i.findNode(i.sortTree.data,e.key,t.type),i.column_defs_list.push(o),null==n||n.push(o)}))},this.sortTreeIconList=[{icon:"icon-hcm-add",disabled:function(e){return"field"===e.type},func:i.addGroup,description:"添加"},{icon:"icon-hcm-edit",func:i.fieldFunc.edit,description:"编辑"},{icon:"icon-hcm-trash",func:i.fieldFunc.remove,description:"删除"}],this.ableFieldsIconList=[{icon:"icon-hcm-edit",func:i.fieldFunc.edit,description:"编辑"},{icon:"icon-hcm-trash",func:i.fieldFunc.remove,description:"删除"}]}return e.prototype.findNode=function(e,t,n){var i,o;try{for(var a=Object(O.i)(e),l=a.next();!l.done;l=a.next()){var r=l.value;if(r.key===t)switch(n){case"peer":return e;case"sub":return r.children;case"self":return[r]}else if(r.children){var c=this.findNode(r.children,t,n);if(c)return c}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},e.prototype.refreshSortTree=function(){var e;this.column_defs=this.getTree(m()(e=this.column_defs_list).call(e,this.able_fields_list),$(".column-defs-tree .hc-sortable-tree >.tree-node-child")),this.column_defs_list=this.getColumnDefsList(angular.copy(this.column_defs))},e.prototype.pushColumnDefsList=function(e,t){t.type=t.type||"field",e.push(t)},e.nodeIcon=function(e){return"field"===e.type?"icon-list-pending":e.expand?"icon-hcm-file-solid-open":"icon-hcm-file-solid-closed"},e.prototype.getColumnDefsList=function(e,t){var n=this;void 0===t&&(t=0),t++;var i=[];return v()(e).call(e,(function(e){e.children&&(i=m()(i).call(i,n.getColumnDefsList(e.children,t)),delete e.children),e.layer=t,n.pushColumnDefsList(i,e)})),i},e.prototype.initColumnDefs=function(t,n){var i=this,o=this;this.column_defs_list=this.getColumnDefsList(angular.copy(t)),this.able_fields=v()(n).call(n,(function(e){var t;return e.children=null===(t=e.fields)||void 0===t?void 0:h()(t).call(t,(function(e){var t,n;return!y()(t=v()(n=i.column_defs_list).call(n,(function(e){return e.key}))).call(t,e.key)})),e})),this.able_fields_list=this.getColumnDefsList(angular.copy(this.able_fields)),this.sortTree=this.$hcSortableTree.createSortableTree({name:"sort",nodeCondition:function(e){return"field"===e.type},nodeIcon:e.nodeIcon,iconList:this.sortTreeIconList,treeList:this.column_defs_list,class:"hide-check-box",sortableOptions:{group:{name:"field",pull:!0,put:!0},animation:150,sort:!0,onAdd:function(){o.refreshSortTree(),o.sortTree.added_callback&&o.sortTree.added_callback(o.column_defs)}}}),this.sortTree.addGroup=this.addGroup,this.sortTree.$setData(t),this.ableFieldsTree=this.$hcSortableTree.createSortableTree({selectedList:this.column_defs_list,iconList:this.ableFieldsIconList,class:" hide-operate",sortableOptions:{group:{name:"field",pull:!0,put:!1},filter:".check-box",dragClass:"hide-check-box",animation:150,sort:!1},nodeCondition:function(e){return!e.children},nodeIcon:function(e){return e.children?e.expand?"icon-hcm-file-solid-open":"icon-hcm-file-solid-closed":"icon-list-pending"},data:this.able_fields})},e.prototype.getAppointAttr=function(e,t){var n,i=angular.copy(e);return v()(n=d()(i)).call(n,(function(e){y()(t).call(t,e)||delete i[e]})),i},e.prototype.getTree=function(e,t){var n,i=this,a=[];return null===(n=o()(t).call(t," >.node"))||void 0===n||v()(n).call(n,(function(t,n){var l,r=$(n).attr("key"),c=null===(l=h()(e).call(e,(function(e){return e.key===r})))||void 0===l?void 0:l[0];if(c){var s=i.getAppointAttr(c,["key","label","type","fixed"]);if(a.push(s),"field"===s.type);else if("group"===s.type){var d;a[t].children=i.getTree(e,o()(d=$(n)).call(d,">.tree-node >.tree-node-child"))}}})),a},e.$inject=["$hcDialog","$hcSortableTree"],e}();D.a.service("columnDefsService",C),app.controller("metaSettingCtrl",["$scope","$filter","$timeout","$hcForm","$hcDialog","columnDefsService",function(e,t,n,i,a,r){var s,u,p,f;e.tabPanes=[{id:"fields",name:"字段"}];var g=null!==(s=null===(u=e.params.meta)||void 0===u?void 0:u.fields)&&void 0!==s?s:e.params.list_meta;e.column_defs=null===(p=e.params.meta)||void 0===p||null===(f=p.column_defs)||void 0===f?void 0:f.children,e.type="fields",e.init=function(){var t,n;(e.transMeta(),e.has_group=y()(t=["info","view"]).call(t,e.params.biz_type)&&e.params.groups.length,e.has_group&&e.initForm(),e.dialogOperate(),e.column_defs)&&(e.tabPanes.push({id:"column_defs",name:"多表头"}),e.able_fields=v()(n=e.params.query_fields).call(n,(function(e){return e.fields=e.list_fields,e})),r.initColumnDefs(e.column_defs,e.able_fields),e.sortTree=r.sortTree,e.ableFieldsTree=r.ableFieldsTree)},e.changeType=function(t){e.type=t},e.transMeta=function(){e.list_meta=[],e.grid_meta_object=t("toObj")(e.meta[e.params.biz_type]),e.initSelectAll(),"info"===e.params.biz_type&&(g=h()(g).call(g,(function(e){return e.options}))),v()(g).call(g,(function(t,n){var i;e.list_meta[n]={key:t.key},v()(i=e.meta[e.params.biz_type]).call(i,(function(i){e.setSelectAll(i,t),i.options?(e.list_meta[n].options||(e.list_meta[n].options={}),e.list_meta[n].options[i.key]=t.options[i.key]):e.list_meta[n][i.key]=t[i.key]}))}))},e.initSelectAll=function(){var t;v()(t=e.meta[e.params.biz_type]).call(t,(function(t){"boolean"===t.type&&(e.grid_meta_object[t.key].select_all=!0)}))},e.setSelectAll=function(t,n){var i=t.options?n.options[t.key]:n[t.key];"hide"===t.key?!0===i&&(e.grid_meta_object[t.key].select_all=!1):!1===i&&(e.grid_meta_object[t.key].select_all=!1)},e.initForm=function(){var n,o=[];v()(n=e.params.groups).call(n,(function(e){e.id=e.key,e.name=e.label,e.field_meta_list=[],o=m()(o).call(o,e.field_list)}));var a=angular.copy(e.list_meta);v()(a).call(a,(function(t){var n;v()(n=e.params.groups).call(n,(function(e){var n;y()(n=e.field_list||[]).call(n,t.key)&&(e.field_meta_list.push(t),t.is_added=!0)}))}));var l=h()(a).call(a,(function(e){return!e.is_added}));if(l.length>0){var r,c=h()(r=e.params.groups).call(r,(function(e){return 0===(e.field_list||[]).length}));c.length>0?c[0].field_meta_list=l:e.params.groups.push({key:"ungroup",id:"ungroup",name:"未分组",field_meta_list:l,field_list:v()(l).call(l,(function(e){return e.key}))})}e.groups_object=t("toObj")(e.params.groups),e.info_meta=[{label:"分组",component:"hc-super-selector",key:"group",options:{no_delete:!0,width:"col-6",singleLine:!0,default:e.params.groups[0].id,list:e.params.groups,change:function(t,n){var i;e.list_meta=e.groups_object[n].field_meta_list,e.initSelectAll(),v()(i=e.list_meta).call(i,(function(t){var n;v()(n=e.meta[e.params.biz_type]).call(n,(function(n){e.setSelectAll(n,t)}))}))}}}],e.base_form=i.createForm().$setMeta(e.info_meta)},e.setSortIndex=function(e){v()(e).call(e,(function(e,t){e.sequence=10*(t+1)}))},e.isSelected=function(e,t){var n=e.options?t.options&&t.options[e.key]:t[e.key];return"hide"===e.key?!n:n},e.select_all=function(t){var n;e.grid_meta_object[t.key].select_all=!e.grid_meta_object[t.key].select_all,v()(n=e.list_meta).call(n,(function(n){var i;y()(i=[!0,!1,void 0]).call(i,t.options?n.options[t.key]:n[t.key])&&(t.options?n.options[t.key]="hide"===t.key?!e.grid_meta_object[t.key].select_all:e.grid_meta_object[t.key].select_all:n[t.key]="hide"===t.key?!e.grid_meta_object[t.key].select_all:e.grid_meta_object[t.key].select_all)}))},e.show_item=function(t,n){var i;n.options?t.options[n.key]=!t.options[n.key]:t[n.key]=!t[n.key];var o=h()(i=e.list_meta).call(i,(function(e){var t=n.options?e.options:e;return"hide"===n.key?!t[n.key]:t[n.key]}));e.grid_meta_object[n.key].select_all=e.list_meta.length===o.length},e.changeValue=function(t){var n;v()(n=e.list_meta).call(n,(function(n,i){if("{}"!==_()(n.is_input)&&n.is_input){var o=d()(n.is_input)[0],a=e.getField(o,i);t.value&&(a[d()(n.is_input)[0]]="width"===d()(n.is_input)[0]&&"list"===e.params.biz_type?c()(t.value):t.value)}n.is_input={}}))},e.getField=function(t,n){return e.grid_meta_object[t].options?e.list_meta[n].options:e.list_meta[n]},e.setInputValue=function(){var t=$(".meta_input")[0];t&&e.changeValue(t)};var b=e.$on("win_body_click_event",(function(){e.setInputValue()}));e.show_input=function(t,i,o){var a;t&&t.stopPropagation(),"input"===o.type&&(e.setInputValue(),v()(a=e.list_meta).call(a,(function(e){e.is_input={}})),i.is_input[o.key]=!0,n((function(){var e=$(".meta_input");e[0]&&(e.focus(),e[0].value=o.options?i.options[o.key]:i[o.key]||"未定义")}),200))},e.showFunc=function(t,n,i){var o,l,r={};r[n.key]=i;null===(o=(l=e.params).metaParse)||void 0===o||o.call(l,r);a.getDialog(k.a).show({label:t.label,attr_key:n.key,value:i}).then((function(e){n.options?t.options[n.key]=e:t[n.key]=e}))},e.operateCondition={fix:function(t,n){var i;t.stopPropagation(),v()(i=e.list_meta).call(i,(function(e,t){var i;t<=n?e.fixed=!0:y()(i=[!0,!1]).call(i,e.fixed)&&(e.fixed=!1)}))}},e.sortable_config={animation:150,onSort:function(t){"list"===e.params.biz_type&&(t.model.fixed=(t.models[t.newIndex+1]||{}).fixed)}},e.meta={list:[{key:"key",label:"key值",width:100},{key:"label",label:"字段",width:140,type:"input"},{key:"hide",label:"显示",width:140,type:"boolean"},{key:"width",label:"宽度",width:140,type:"input"},{key:"fixed",label:"固定",width:100,type:"operate"}],view:[{key:"label",label:"字段",width:140,type:"input"},{key:"hide",label:"显示",width:140,type:"boolean"}],info:[{key:"label",label:"字段",width:140,type:"input"},{key:"hide",label:"显示",width:140,type:"boolean",options:!0},{key:"required",label:"必填",width:140,type:"boolean",options:!0},{key:"readOnly",label:"只读",width:140,type:"boolean",options:!0},{key:"width",label:"宽度",width:140,type:"hc-input",options:!0}]},e.info_width_config={no_null:!0,list:[{label:"col-6",value:"col-6"},{label:"col-12",value:"col-12"}]},e.dialogOperate=function(){e.$dialog.title("可视化配置");var t=[{label:"返回",left:!0,func:e.$dialog.dialog_close},{label:"确定",func:e.submit,default:!0}];e.$dialog.operates(m()(t).call(t,e.custom_operates()))},e.custom_operates=function(){return[]},e.filterMeta=function(e,n){return t("deepRemoveDop")(e,n)},e.submit=function(){var t,n,i,a;(e.setSortIndex(e.list_meta),e.setInputValue(),e.has_group)&&(e.list_meta=[],v()(i=e.params.groups).call(i,(function(t){var n;e.setSortIndex(t.field_meta_list),l()(n=t.field_meta_list).call(n,(function(t){var n;o()(n=e.list_meta).call(n,(function(e){return t.key===e.key}))||e.list_meta.push(t)}))})));(b(),v()(t=e.list_meta).call(t,(function(e){delete e.is_input,delete e.is_added})),null===(n=e.column_defs)||void 0===n?void 0:n.length)&&(r.refreshSortTree(),v()(a=r.column_defs_list).call(a,(function(t){var n,i;if(!y()(n=v()(i=e.list_meta).call(i,(function(e){return e.key}))).call(n,t.key)&&"field"===(null==t?void 0:t.type)){var o,a,l=angular.copy(null===(o=h()(a=r.able_fields_list).call(a,(function(e){return e.key===t.key})))||void 0===o?void 0:o[0]),c=r.getAppointAttr(l,["key","label","field","width"]);e.list_meta.push(c)}})));var c={fields:e.list_meta};"list"===e.params.biz_type&&e.column_defs&&(c.column_defs={children:r.column_defs}),e.$dialog.resolve_data(c),e.$dialog.dialog_close()}}]);t.a={controller:"metaSettingCtrl",template:x.a}},aEX6:function(e,t){e.exports='<div class=\'hc-dialog-mask\' ng-class="{\'trans-mask\':!$ctrl.model.options.mask}"></div>\n<div class=\'hc-dialog-window\' ng-style="$ctrl.model.options.styles">\n    <div class="close" ng-click=""></div>\n    <header>\n        <div class="main">{{ $ctrl.model.options.title }}</div>\n        <div class="close-btn icon-hcm-delete" ng-if="$ctrl.model.options.size.indexOf(\'-dialog-\') > -1" ng-click="$ctrl.model.dialog_close()"></div>\n    </header><div class="hc-dialog-content"\n         ng-transclude></div>\n         <div ng-if="!($ctrl.model.options.operates.length>0)" class="footer-none"></div>\n    <footer ng-if="$ctrl.model.options.operates.length>0">\n        <hc-mobile-bottom-btn model="$ctrl.model.list_btn_model"></hc-mobile-bottom-btn>\n    </footer>\n    <div class="dialog-close">\n        <div class="icon icon-hcm-delete-circle" ng-click="$ctrl.model.mask_click()"></div>\n    </div>\n</div>\n'},aMRI:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).data,o=e.index,a=e.customRowClass,l=e.offsetHeight,r=e.height,c=e.leftOrRight,s=e.row_space,d=e.getRowBackgroundColor,u=e.rowStruct,_=e.needBgClolr,p=i.$each,m=e.fix_cols,f=(e.col,e.col_index,e.customCellClass),h=e.dirty,g=e.id_key,v=e.rowHeightMap,b=e.mergeColumns,y=e.is_selected,w=e.indexStyle,x=e.current_page,k=e.page_size,$=e.lineClamp,O=e.setTitle,D=e.diffDirty;return t+='<div class="table-row ',t+=i.getRowClass(n,o,a),t+='"\n     row-index=',t+=o,t+='\n     style="top:',t+=l,t+="px;\n             width:100%;\n             height:",t+=r,t+="px;\n             ",t+=c,t+=":0;\n            ",t+=i.getRowStyle(n,o,s,d,u,_),t+='">\n    ',p(m,(function(e,a){t+='\n    <div class="table-cell ',t+=i.getCellClass(n,e,f,h,g),t+='"\n         col-index=',t+=a,t+="\n         col-key=",t+=e.key,t+='\n         style="',t+=c,t+=":",t+=e[c],t+="px;\n                 ",t+=i.getFixColsCellScale(u,e,o,v,b),t+="\n                 ",t+=i.getCellStyle(n,e),t+='"\n    >\n        ',e.is_selector?(t+="\n        ",t+=y<0?"\n        <span class='tag-to-select icon-hcm-click-rectangle-radius-solid sys-color'></span>\n        ":"\n        <span class='tag-to-select icon-hcm-none-rectangle-radius'></span>\n        ",t+="\n        "):e.is_index?(t+="\n        <span style='",t+=i.getIndexStyle(o,w),t+="'>",t+=i.getRealIndex(o,x,k),t+="</span>  \n        "):(t+="\n        <div class='cell-content' style='",t+=i.getContentStyle(o,r,$),t+="' title='",t+=i.getTitle(n,e,h,O),t+="'>\n            ",t+=i.getCellText(n,e,h,D,g),t+="\n        </div>\n        "),t+="\n    </div>\n    "})),t+='\n    <div class="row-resize"></div>\n</div>\n'}},"aVq/":function(e,t){e.exports='<div class="hcm-btn-list btn-groups" id="hcm-btn">\n    <div class="btn-item">\n        <button class="btn-mobile secondary icon-hcm-more-point" ng-click="showMore($event)">\n        </button>\n        <div class="drop-down-list" ng-show="itemIsMoreShow()">\n            <button ng-repeat="_action in model.simple_actions() track by $index"\n                    ng-disabled="(_action.disabled|valueToFunc)()"\n                    ng-hide="(_action.hide|valueToFunc)()"\n                    ng-click="item_func(_action)">\n                {{(_action.label|valueToFunc)()}}\n            </button>\n        </div>\n    </div>\n</div>\n'},at3h:function(e,t){e.exports='<div ng-init="init()" class="tabs-container">\n    <div class="tabs-all-title">类型筛选</div>\n    <hc-tabs class="all-tabs" value="$ctrl.value"\n             disable-scroll-into-view="true"\n             on-value-change="$ctrl.onTabsValueChange">\n        <hc-tab-pane\n            ng-repeat="tab in $ctrl.panes track by $index"\n            label="tab.label"\n            name="tab.name"\n            count="tab.count"\n            hide-count="tab.hideCount"\n        ></hc-tab-pane>\n    </hc-tabs>\n</div>\n'},bQgN:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("07d7"),n("5s+n"),n("rB9j"),n("UxlC");var i=n("UF4K"),o=n.n(i),a=n("OBge"),l=n.n(a);function r(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}var c=function(){function e(){}return e.loadComponent=function(e,t){var n=this;return void 0===t&&(t=!1),e=t?r(e):e,new l.a((function(t,i){n._businessComponentMap.get(e)().then((function(e){angular.element(document.body).injector().get("$ocLazyLoad").load([{name:"hcm.common"},{name:"myApp"}]).then((function(){t(e)}))}))}))},e.isLazyComponent=function(e){return this._businessComponentMap.has(r(e))},e._businessComponentMap=new o.a([["hcTreeListCardSelector",function(){return Promise.all([n.e(0),n.e(58)]).then(n.bind(null,"u0XT")).then((function(e){return e.default}))}],["hcInputAutoComplete",function(){return Promise.all([n.e(0),n.e(50)]).then(n.bind(null,"RGhB")).then((function(e){return e.default}))}],["hcImgCrop",function(){return Promise.all([n.e(0),n.e(49)]).then(n.bind(null,"hQho")).then((function(e){return e.default}))}],["hcTag",function(){return Promise.all([n.e(0),n.e(56)]).then(n.bind(null,"dvsm")).then((function(e){return e.default}))}],["hcSimpleChart",function(){return Promise.all([n.e(0),n.e(55)]).then(n.bind(null,"3CXJ")).then((function(e){return e.default}))}],["hcSelectCycle",function(){return Promise.all([n.e(0),n.e(54)]).then(n.bind(null,"6xRZ")).then((function(e){return e.default}))}],["hcInputLinkageSelector",function(){return Promise.all([n.e(0),n.e(51)]).then(n.bind(null,"6IwI")).then((function(e){return e.default}))}],["hcDatetimePickerRange",function(){return Promise.all([n.e(0),n.e(48)]).then(n.bind(null,"YWsn")).then((function(e){return e.default}))}],["hcSearchList",function(){return Promise.all([n.e(0),n.e(45)]).then(n.bind(null,"MlPO")).then((function(e){return e.default}))}],["hcTreeChart",function(){return Promise.all([n.e(0),n.e(57)]).then(n.bind(null,"WGEU")).then((function(e){return e.default}))}],["superSearchQueryPanel",function(){return Promise.all([n.e(0),n.e(71)]).then(n.bind(null,"1z+Z")).then((function(e){return e.default}))}],["superSearchRangePanel",function(){return Promise.all([n.e(0),n.e(72)]).then(n.bind(null,"CzYt")).then((function(e){return e.default}))}],["commonModelViewBaseComponent",function(){return Promise.all([n.e(0),n.e(33)]).then(n.bind(null,"xJvr")).then((function(e){return e.default}))}],["commonModelViewMultiComponent",function(){return n.e(34).then(n.bind(null,"XFAv")).then((function(e){return e.default}))}],["commonModelViewSingleComponent",function(){return Promise.all([n.e(0),n.e(35)]).then(n.bind(null,"moby")).then((function(e){return e.default}))}],["commonModelViewWaterfallComponent",function(){return Promise.all([n.e(0),n.e(36)]).then(n.bind(null,"pVFB")).then((function(e){return e.default}))}],["naireOnlyBatchScore",function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,"F6uX")).then((function(e){return e.default}))}],["colResizable",function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,"yc9a")).then((function(e){return e.default}))}],["naireBatchScoreMobile",function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,"iOMI")).then((function(e){return e.default}))}],["naireBatchScorePc",function(){return Promise.all([n.e(0),n.e(52)]).then(n.bind(null,"0Emz")).then((function(e){return e.default}))}],["decisionTree",function(){return Promise.all([n.e(0),n.e(37)]).then(n.bind(null,"oj/a")).then((function(e){return e.default}))}],["sessionBase",function(){return Promise.all([n.e(0),n.e(69)]).then(n.bind(null,"HDhu")).then((function(e){return e.default}))}],["sessionPackageList",function(){return Promise.all([n.e(0),n.e(69)]).then(n.bind(null,"3xU1")).then((function(e){return e.default}))}],["sessionList",function(){return Promise.all([n.e(0),n.e(69)]).then(n.bind(null,"MGma")).then((function(e){return e.default}))}],["recruitInternalCode",function(){return Promise.all([n.e(0),n.e(65)]).then(n.bind(null,"6vJN")).then((function(e){return e.default}))}],["hcRecruitJobView",function(){return Promise.all([n.e(0),n.e(65)]).then(n.bind(null,"KTnp")).then((function(e){return e.default}))}],["trainCode",function(){return Promise.all([n.e(0),n.e(75)]).then(n.bind(null,"SGuH")).then((function(e){return e.default}))}],["hcQrcode",function(){return Promise.all([n.e(0),n.e(53)]).then(n.bind(null,"Rzqn")).then((function(e){return e.default}))}],["recruitJobLabel",function(){return Promise.all([n.e(0),n.e(65)]).then(n.bind(null,"N2O1")).then((function(e){return e.default}))}],["recruitFormulaSetting",function(){return Promise.all([n.e(0),n.e(65)]).then(n.bind(null,"qAEF")).then((function(e){return e.default}))}],["perfTargetDetail",function(){return Promise.all([n.e(0),n.e(62)]).then(n.bind(null,"c5G9")).then((function(e){return e.default}))}],["perfTargetDetailTitle",function(){return Promise.all([n.e(0),n.e(62)]).then(n.bind(null,"c5G9")).then((function(e){return e.default}))}],["perfTest",function(){return Promise.all([n.e(0),n.e(62)]).then(n.bind(null,"7mJU")).then((function(e){return e.default}))}],["examSingleChoice",function(){return Promise.all([n.e(0),n.e(41)]).then(n.bind(null,"zlTg")).then((function(e){return e.default}))}],["examCompletion",function(){return Promise.all([n.e(0),n.e(38)]).then(n.bind(null,"Ls71")).then((function(e){return e.default}))}],["examInputCheckbox",function(){return Promise.all([n.e(0),n.e(39)]).then(n.bind(null,"8Ne7")).then((function(e){return e.default}))}],["examInputRadio",function(){return Promise.all([n.e(0),n.e(40)]).then(n.bind(null,"pebH")).then((function(e){return e.default}))}],["examTextArea",function(){return Promise.all([n.e(0),n.e(42)]).then(n.bind(null,"z/vO")).then((function(e){return e.default}))}],["trainFillBlanks",function(){return Promise.all([n.e(0),n.e(43)]).then(n.bind(null,"ufhw")).then((function(e){return e.default}))}],["trainQuestion",function(){return Promise.all([n.e(0),n.e(44)]).then(n.bind(null,"lZjc")).then((function(e){return e.default}))}],["trainNaireDesigner",function(){return Promise.all([n.e(0),n.e(76)]).then(n.bind(null,"hXl3")).then((function(e){return e.default}))}],["batchScoreList",function(){return Promise.all([n.e(0),n.e(30)]).then(n.bind(null,"QcrT")).then((function(e){return e.default}))}],["batchDimensionScoreList",function(){return Promise.all([n.e(0),n.e(30)]).then(n.bind(null,"QcrT")).then((function(e){return e.default}))}],["batchDimensionWeightList",function(){return Promise.all([n.e(0),n.e(30)]).then(n.bind(null,"QcrT")).then((function(e){return e.default}))}],["batchScoreTeam",function(){return Promise.all([n.e(0),n.e(31)]).then(n.bind(null,"V0Rn")).then((function(e){return e.default}))}],["perfBatchEditItemList",function(){return Promise.all([n.e(0),n.e(61)]).then(n.bind(null,"DC4S")).then((function(e){return e.default}))}],["perfBatchEditList",function(){return Promise.all([n.e(0),n.e(61)]).then(n.bind(null,"DC4S")).then((function(e){return e.default}))}],["hcRecruitResumeDetail",function(){return Promise.all([n.e(0),n.e(68)]).then(n.bind(null,"kOnF")).then((function(e){return e.default}))}],["recruitAddressSetting",function(){return Promise.all([n.e(0),n.e(63)]).then(n.bind(null,"Ront")).then((function(e){return e.default}))}],["recruitOrderCalendar",function(){return Promise.all([n.e(0),n.e(67)]).then(n.bind(null,"Apdp")).then((function(e){return e.default}))}],["recruitCode",function(){return Promise.all([n.e(0),n.e(64)]).then(n.bind(null,"qtU+")).then((function(e){return e.default}))}],["recBaseInfo",function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"4IRw")).then((function(e){return e.default}))}],["recSingleInfo",function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"4IRw")).then((function(e){return e.default}))}],["recMultiInfo",function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"4IRw")).then((function(e){return e.default}))}],["recAttachmentInfo",function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"4IRw")).then((function(e){return e.default}))}],["titleEvalApplyDimension",function(){return Promise.all([n.e(0),n.e(73)]).then(n.bind(null,"oo/s")).then((function(e){return e.default}))}],["recruitJobAutoFilter",function(){return n.e(66).then(n.bind(null,"MHO3")).then((function(e){return e.default}))}],["hcTimeLineHorizontal",function(){return Promise.all([n.e(0),n.e(46)]).then(n.bind(null,"g0BH")).then((function(e){return e.default}))}],["hcWorkflowEmployeeSimpleSelector",function(){return n.e(66).then(n.bind(null,"62vB")).then((function(e){return e.default}))}],["statReportComponent",function(){return Promise.all([n.e(0),n.e(70)]).then(n.bind(null,"XtSY")).then((function(e){return e.default}))}],["listReportComponent",function(){return Promise.all([n.e(0),n.e(59)]).then(n.bind(null,"TSI/")).then((function(e){return e.default}))}],["trainBankList",function(){return n.e(74).then(n.bind(null,"C1Fw")).then((function(e){return e.default}))}],["naireInputSliderForm",function(){return Promise.all([n.e(0),n.e(60)]).then(n.bind(null,"GbRU")).then((function(e){return e.default}))}],["hcSpeechInput",function(){return Promise.all([n.e(0),n.e(47)]).then(n.bind(null,"O57r")).then((function(e){return e.default}))}],["hcIframe",function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"i+p1")).then((function(e){return e.default}))}]]),e}()},bQov:function(e,t,n){"use strict";var i=n("uuav"),o=n("1hbj"),a=n("yZ58"),l=n.n(a),r=n("tq+l"),c=n.n(r);n("srGB"),n("IlDA"),n("S0P9");window.app.controller("CommonListDialogCtrl",["$scope","$controller","$rootScope","$q","BaseCRUDService",function(e,t,n,a,l){var r=l.getModelService(e.$dialog.options.model_name);t(i.a,{$scope:e,CRUDService:r,InfoDialog:Object(o.a)(e.$dialog.options.model_name,e.$dialog.options.meta_state)}),e.meta_state=e.$dialog.options.meta_state,e.getQueryStr=function(){return e.params.query_str},e.getInitData=function(){return e.params.init_data},e.getFilterDict=function(){return angular.copy(e.params.filter_dict||{})}}]),t.a=function(e,t,n){return{controller:"CommonListDialogCtrl",template:n?c.a:l.a,model_name:e,meta_state:t}}},bWlJ:function(e,t,n){var i=function(){return new Promise((function(e){Promise.all([n.e(0),n.e(181)]).then(function(){n("TQlG"),n("3fyT"),e({"./layout_one/template.html":n("vLFY"),"./layout_two/template.html":n("VvxA")})}.bind(null,n)).catch(n.oe)}))},o=function(e){return function(){return new Promise((function(t){return i().then((function(n){t(n[e])}))}))}},a={moduleLoader:["$ocLazyLoad",function(e){return new Promise((function(t){return i().then((function(n){e.load({name:"myApp"}),t()}))}))}]};e.exports=function(e){e.state("layout_one",{name:"layout_one",url:"/ued/layout_one?_menu_id&nav_model&nav_meta_state",parent:"main",controller:"UedLayoutCtrl",role:"emp",templateProvider:o("./layout_one/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("layout_two",{name:"layout_two",url:"/ued/layout_two?_menu_id&nav_model&nav_meta_state",parent:"main",controller:"UedLayoutTwoCtrl",role:"emp",templateProvider:o("./layout_two/template.html"),resolve:a,controllerAs:"$ctrl"})}},bt7P:function(e,t){e.exports='<div class="bottom-menu">\n    <div ng-repeat="_menu in menu" ng-click="_menu.func()" ng-style="_menu.style"\n         ng-hide="_menu.enabled==false" class=\'menu {{_menu.class||"hcmui-button-normal-fullline"}}\'>\n        <div ng-bind-html="_menu.caption|toTrusted"></div>\n    </div>\n</div>'},c87V:function(e,t,n){"use strict";n.r(t),n("CoJ3").a.factory("hcCommonImport",["$hcDialog",function(e){return{commonImport:function(t){var i={title:t.title,category:t.category,category_name:t.category_name,params:t.params};return e.getDialog({controller:"hcCommonImportCtrl",template:n("fJ+s")}).params(i).size("small").title(t.title).show()},customImport:function(t){var i={title:t.title,operate:t.operate,styles:t.styles};return e.getDialog({controller:function(){},template:n("JWVR")}).params(i).size("small").styles(i.styles).title(t.title).show()}}}])},c8qL:function(e,t){e.exports='<div class="upload_file_progress_bar" ng-init="init()">\n    <div class="progress_title">已完成上传{{progress.value}}%</div>\n    <div class="progress_bar">\n        <progress max="100" value="0" id="progress"></progress>\n        <div class="icon icon-hcm-delete-circle" ng-if="progress.value!==100" ng-click="cancel()"></div>\n        <div class="success" ng-if="progress.value==100">上传成功</div>\n    </div>\n</div>'},cXcY:function(e,t){e.exports='<div class="hcm-nav-content flex model_list_dialog assist-batch-dialog-style" ng-init="init()">\n    \x3c!--    后期选择是否开启平台组件过滤--\x3e\n    \x3c!--    <div class="basic simple-form" ng-if="showFilters">--\x3e\n    \x3c!--        <hc-form model="filter" class="query-form ng-isolate-scope"></hc-form>--\x3e\n    \x3c!--    </div>--\x3e\n    <div id="assist"></div>\n</div>\n'},ci9f:function(e,t){e.exports='<div ng-sortable="sortable_config" ng-init="init()">\n    <div class="hc-tree-node" ng-class="{\'positioned\':_node==options.positioned,\'searched\':_node==options.searched}"\n         ng-repeat="_node in list track by $index">\n        <div ng-if="(_node.is_leaf === false||_node.is_leaf === 0 || _node.children.length)&&options.sortable!==false"\n             class="hc-tree-node-more"\n             ng-class="_node.expanded?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"\n             ng-click="toggle_expand($event,_node)"></div>\n        <div class="hc-tree-node-template" ng-if="!options.multi"\n             ng-class="{\'selected\': (_node.id==options.selected.id)||(_node.id==options.positioned.id),\'searched\':_node.tree_id==options.searched.tree_id,\'expanded\':_node.expanded,\'not-allow-cancel\':_node.allow_cancel===false,\'prevent\':_node.is_au===\'0\'}"\n             ng-click="node_select($event,_node,list);">\n            <hc-compile ng-if="template" data-template="template"></hc-compile>\n            <span ng-if="!template">\n                <span class="hc-tree-node-icon"\n                      ng-class="_node.expanded?\'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></span>\n                <span>{{_node.name}}</span>\n            </span>\n        </div>\n        <div class="hc-tree-node-template" ng-if="options.multi"\n             ng-class="{\'selected\': _node==options.search_parent,\'searched\':_node.tree_id==options.searched.tree_id,\'expanded\':_node.expanded,\'not-allow-cancel\':_node.allow_cancel===false}"\n             ng-click="node_name_select($event,_node)">\n            <span ng-if="_node.useable!==false"\n                  class="hc-tree-node-multi {{multi_checked_css(_node,options)}}"\n                  ng-click="node_select($event,_node,list);">\n            </span>\n            <hc-compile ng-if="template" data-template="template"></hc-compile>\n            <span ng-if="!template">\n                <span class="hc-tree-node-icon"\n                      ng-class="_node.expanded?\'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></span>\n                <span>{{_node.name}}</span>\n            </span>\n        </div>\n        <hc-tree ng-if="_node.children.length" ng-show="(_node.expanded||options.expand_all)"\n                 data-template="template" data-load="load" data-options="options"\n                 data-list="_node.children"></hc-tree>\n    </div>\n</div>'},ciwT:function(e,t){e.exports='<div class="hc-step">\n    <div class="hc-step-container">\n        <div class="hc-step-tail"></div>\n        <div class="hc-step-icon" ng-if="!$ctrl.progressDot">\n            <span ng-show="!$ctrl.icon"\n                ng-class="{\'icon-hcm-tick\': $ctrl.status === \'finish\'}">\n                <span ng-hide="$ctrl.status === \'finish\'">{{$ctrl.index + 1}}</span>\n            </span>\n            <span class="{{$ctrl.icon}}"></span>\n        </div>\n        <div class="hc-step-content" hc-title="{{$ctrl.vertical ? \'\' : $ctrl.description}}" options="{mode: \'tip\', showOnOverflow: true}">\n            <div class="hc-step-title" ng-class="{\'dot-type\': $ctrl.progressDot}">\n                <span>{{$ctrl.title}}<div class="dot" ng-if="$ctrl.progressDot"></div></span>\n                <div class="hc-step-sub-title" ng-show="$ctrl.subTitle">\n                    {{$ctrl.subTitle}}\n                </div>\n                <div class="hc-step-attachment" ng-show="$ctrl.stepAttachment">\n                    {{$ctrl.stepAttachment}}\n                </div>\n            </div>\n            <div class="content" ng-bind-html="$ctrl.description"></div>\n        </div>\n    </div>\n</div>\n'},cngd:function(e){e.exports=JSON.parse('{"tip":null,"groups":[{"key":"base","label":"基本信息","field_list":["key","name"]},{"key":"source","label":"数据模型","field_list":["source_type","source_model","source_state","source_analyze","source_meta"]},{"key":"data","label":"取数定义","field_list":["data_type","data_dim","data_aggr","data_total_include","data_field","data_sort"]},{"key":"filter","label":"过滤设置","field_list":["page_count","filter_dict"]}],"fields":[{"key":"key","label":"标识","component":"hc-input","options":{"width":"col-6","required":true,"singleLine":true,"placeholder":"请输入数据块标识"}},{"key":"name","label":"名称","component":"hc-input","options":{"singleLine":true,"width":"col-6","placeholder":"请输入数据块名称","required":true}},{"key":"source_type","label":"模型类型","mode":"base","component":"hc-input-radio","dataPath":["source","type"],"options":{"singleLine":true,"width":"col-12","required":true,"items_inline":true,"list":[{"value":"analyze","name":"分析模型"},{"value":"model","name":"模型场景"},{"value":"meta","name":"自定义"}]}},{"key":"source_model","label":"模型","mode":"base","component":"hc-super-selector","dataPath":["source","model"],"options":{"singleLine":true,"selectorObject":"hcm.db.object","width":"col-6","placeholder":"请输入模型","required":"=function(){return $ctrl.form_model?.data?.source?.type == \'model\'}","returnFormat":"name"}},{"key":"source_state","label":"场景","mode":"base","component":"hc-super-selector","dataPath":["source","state"],"options":{"singleLine":true,"width":"col-6","placeholder":"请输入场景","required":false,"returnFormat":"name"}},{"key":"source_analyze","label":"分析模型","mode":"base","component":"hc-super-selector","dataPath":["source","analyze"],"options":{"selectorModel":"AnalyzeModel","returnFormat":"name","required":"=function(){return $ctrl.form_model?.data?.source?.type == \'analyze\'}","extra_property":{"state":"datasource"},"selectorFilter":{"model":{"neq":null}},"singleLine":true,"width":"col-12","placeholder":"请选择分析模型"}},{"key":"source_meta","label":"自定义模型","mode":"base","dataPath":["source","meta"],"component":"hc-input-mask","options":{"singleLine":true,"width":"col-12","placeholder":"请输入模型","required":"=function(){return $ctrl.form_model?.data?.source?.type == \'meta\'}"}},{"key":"data_type","label":"取数类型","component":"hc-input-radio","dataPath":["data","type"],"options":{"singleLine":true,"width":"col-6","placeholder":"请调整字段","required":true,"items_inline":true,"list":[{"value":"list","name":"列表"},{"value":"aggr","name":"统计"}]}},{"key":"data_total_include","label":"分组小计","component":"hc-input-switch","dataPath":["total_include"],"options":{"singleLine":true,"width":"col-6","default":false,"required":false,"items_inline":true,"tip":"按照维度顺序每次都进行一次小计"}},{"key":"data_dim","label":"统计维度","dataPath":["data","dim"],"component":"hc-input-tag","options":{"singleLine":false,"width":"col-12","placeholder":"请输入维度","required":false}},{"key":"data_aggr","label":"统计值","dataPath":["data","aggr"],"component":"hc-input-tag","options":{"singleLine":false,"width":"col-12","placeholder":"请输入统计","required":false}},{"key":"data_field","label":"字段列表","dataPath":["data","field"],"component":"hc-input-tag","options":{"singleLine":false,"width":"col-12","placeholder":"新增字段","required":false}},{"key":"data_sort","label":"排序字段","dataPath":["sorts"],"component":"hc-input-tag","options":{"singleLine":false,"width":"col-12","placeholder":"新增排序","required":false}},{"key":"page_count","label":"用于分页","component":"hc-input-radio","options":{"singleLine":true,"width":"col-6","required":true,"items_inline":true,"list":[{"value":true,"name":"是"},{"value":false,"name":"否"}]}},{"key":"filter_dict","label":"过滤条件","mode":"base","component":"hc-input-compute","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false,"need_check":false,"returnFormat":"content"}},{"key":"query_str","label":"高级查询","mode":"base","component":"hc-input-query-string","options":{"singleLine":true,"width":"col-12","placeholder":"高级查询","required":false,"beforeClick":"=$ctrl.clickQuery.bind($ctrl)"}}]}')},coWP:function(e,t){e.exports='<div class="tree-select-panel">\n\x3c!--    <input placeholder="请输入关键字进行搜索..." type="search" autocapitalize="off"--\x3e\n\x3c!--           autocorrect="off"--\x3e\n\x3c!--           autocomplete="off"--\x3e\n\x3c!--           spellcheck="false"--\x3e\n\x3c!--           ng-model="search_key.key"--\x3e\n\x3c!--           ng-change="search_key.blur()"--\x3e\n\x3c!--           ng-model-options="{\'debounce\':500}">--\x3e\n    <div class="selector-search">\n        <span class="icon icon-hcm-check" ng-if="client===\'mobile\'"></span>\n        <input class="input" placeholder="开始搜索..." autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               spellcheck="false"\n               ng-model="search_key.key"\n               ng-change="search_key.blur()"\n               ng-model-options="{\'debounce\':500}">\n        <span class="icon icon-hcm-delete-circle-solid right"\n              ng-if="search_key.key"\n              ng-click="search_key.clear()"></span>\n    </div>\n    <div class="hc-simple-tree" ng-if="!params.multi">\n        <div class="hc-tree-node" ng-repeat="item in item_list" ng-include="\'tree_code_node.html\'"></div>\n    </div>\n    <div class="hc-simple-tree" ng-if="params.multi">\n        <div class="hc-tree-node" ng-repeat="item in item_list" ng-include="\'tree_code_node_multi_select.html\'"></div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="tree_code_node.html">\n    <div class="tree-node-container">\n        <div class="tree-node" ng-class="{selected:selectedId.indexOf(item.id)>=0}" ng-click="clickNode($event,\n        item)">\n            <div class="node-expand-icon" ng-click="foldNode($event,item)"\n                 ng-class="{\'icon-hcm-arrow-down-solid\':item.expand,\'icon-hcm-arrow-right-solid\':!item.expand,\'transparent\':!item.children}"></div>\n            <div class="node-icon icon-hcm-file-solid-closed"></div>\n            <div class="node-text" title={{item.name}}>{{item.name}}</div>\n        </div>\n        <div class="tree-node-child" ng-if="item.expand">\n            <div ng-repeat="item in item.children" ng-include="\'tree_code_node.html\'"></div>\n        </div>\n    </div>\n<\/script>\n\n\n<script type="text/ng-template" id="tree_code_node_multi_select.html">\n    <div class="tree-node-container">\n        <div class="tree-node" ng-class="{selected:selectedId.indexOf(item.id)>=0}"\n             ng-click="clickNode($event,item,false)">\n            <div class="node-expand-icon"\n                 ng-click="clickNode($event,item,false)"\n                 ng-class="{\'icon-hcm-arrow-down-solid\':item.expand,\'icon-hcm-arrow-right-solid\':!item.expand,\'transparent\':!item.children}"></div>\n            <div class="hc-tree-node-multi"\n                 ng-class="{true:\'icon-hcm-none-rectangle-radius\',false:\'icon-hcm-click-rectangle-radius\'}[selectedId.indexOf(item.id)<0]"\n                 ng-click="clickNode($event,item,true)"></div>\n            <div class="node-icon icon-hcm-file-solid-closed"></div>\n            <div class="node-text" title={{item.name}}>{{item.name}}</div>\n        </div>\n        <div class="tree-node-child" ng-if="item.expand">\n            <div ng-repeat="item in item.children" ng-include="\'tree_code_node_multi_select.html\'"></div>\n        </div>\n    </div>\n<\/script>\n\n\n\n\n\n\n'},crmf:function(e,t){e.exports='<div class="notify-block {{ $ctrl.model.scope.params.level }}">\n    <div class="icon-close icon-hcm-delete" ng-click="$ctrl.model.scope.close()"></div>\n    <div class="icon {{ $ctrl.model.scope.icon_name }}"></div>\n    <div class="content">{{ $ctrl.model.scope.content }}</div>\n</div>\n'},crtA:function(e,t){e.exports='<div ng-class="{\'hc-input-radio-items-inline\':options.items_inline}">\n    <li class="hc-input-check hc-input-radio"\n        ng-class="{\n        \'hc-input-check-item-single\':options.items_inline,\n        \'is-selected\': model==_item.value,\n        \'is-readonly\': model==_item.value && (options.readOnly|valueToFunc)()\n    }"\n        ng-repeat="_item in list" ng-model="model">\n    <span ng-click="valueChange(_item.value)">\n          <input type="radio" name="" ng-value="_item.value" ng-checked="model==_item.value"\n                 ng-disabled="(options.readOnly|valueToFunc)()" id="{{id+_item.value}}" class="hc-input-radio">\n          <label for="{{_item.value}}" ng-click="preventEvent($event)"\n                 class="icon {{model==_item.value?\'active icon-hcm-radio-circle\':\'icon-hcm-none-circle\'}}"\n                 ng-class="{\'disabled\': (options.readOnly|valueToFunc)()}"\n          >\n\n          </label>\n         <span ng-if="!options.mark_down" class="item-name">{{_item.name}}</span>\n         <hc-mark-down ng-if="options.mark_down" class="item-name-md" ng-model="_item.name" data-options="{mode:\'view\'}"></hc-mark-down>\n          <div class="item-image" ng-show="options.show_image">\n              <img ng-src="{{_item.image_index}}">\n              <br/>\n          </div>\n    </span>\n    </li>\n</div>\n'},ctOA:function(e,t,n){n("rB9j"),n("Rm1S"),n("hByQ");var i=n("ZbhI"),o=n("lHQ6");$.fn.localResizeIMG=function(e){this.on("change",(function(){var t=this.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(a){var l=this.result,r=n("UAiH");r.getData(t,(function(){!function(t,o,a,l){var r=new Image;r.onload=function(){var c=this.width,s=this.height,d=c/s;s=(c=e.width&&e.width<c?e.width:c)/d,o=o||1;var u=document.createElement("canvas"),_=u.getContext("2d");$(u).attr({width:c,height:s}),o<=4?($(u).attr({width:c,height:s}),3!=o&&4!=o||(_.translate(c,s),_.rotate(180*Math.PI/180))):($(u).attr({width:s,height:c}),5==o||6==o?(_.translate(s,0),_.rotate(90*Math.PI/180)):7!=o&&8!=o||(_.translate(0,c),_.rotate(270*Math.PI/180))),_.drawImage(this,0,0,c,s);var p=t.search("image/png"),m=u.toDataURL(p<0?"image/jpeg":"image/png",e.quality||.8),f=n("+29R");navigator.userAgent.match(/iphone/i)&&(new f(r).render(u,{maxWidth:c,maxHeight:s,quality:e.quality||.8,orientation:o}),m=u.toDataURL(p<0?"image/jpeg":"image/png",e.quality||.8));navigator.userAgent.match(/Android/i)&&(m=(new JPEGEncoder).encode(_.getImageData(0,0,c,s),100*e.quality||80));var h={base64:m,clearBase64:m.substr(i(m).call(m,",")+1),size:a};e.success(h,l)},r.src=t}(l,o(r.getTag(this,"Orientation")),t.size,t)}))},this.value=""}))}},"d+iT":function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("rB9j"),n("UxlC");var i=n("UtpJ"),o=n.n(i),a=n("WxoT"),l=n.n(a),r=n("LYCE"),c=n.n(r),s=n("5PDf"),d=n.n(s),u=n("mrSG"),_=n("y/Cr");window.app.controller("BaseCategoryTreeListController",["$controller","templateService","BaseCRUDService","$rootScope","$scope","$hcDialog","CRUDService","InfoDialog","$hcListBtn","$hcPaging","$state","$q","$timeout","$filter","dataService","$hcSimpleTree","listGlobalConfigService",function(e,t,n,i,a,r,s,p,m,f,h,g,v,b,y,w,x){e(_.a,{$scope:a,CRUDService:s,InfoDialog:p}),a.tree_loader=null,a.is_include_child=!0,a.tree_flag=!0,a.params=a.params||{},a.getTreeId=function(){return a.params.tree_id||h.params.tree_id},a.getRequireFunc=function(){var e=[a.initList(),a.getCategoryMeta()];return a.base_model&&e.push(a.getTreeDefine()),e},a.getTreeDefine=function(){var e=g.defer();return a.current_model&&a.base_model!==a.current_model?y.callHcmOpenApi("hcm.model.meta",{biz_type:"list",model:a.base_model,state:a.getMetaState()}).then((function(t){a.TreeDefine=t.tree,e.resolve()})):e.resolve(),e.promise},a.getTreeAndFetchData=function(){return Object(u.c)(void 0,void 0,void 0,(function(){var e,t,n,i,o,l,r,c;return Object(u.e)(this,(function(s){var _;switch(s.label){case 0:return a.model_meta||a.tree_loader?a.tree_loader?[3,2]:[4,a.getTreeLoader(a.funcParse(a.TreeDefine||a.model_meta.tree))]:(a.fetchData(),a.initAfter(),[2]);case 1:s.sent(),s.label=2;case 2:return a.refresh_tree||a.tree_loader&&!a.tree_model?(e=a.metaParse(null===(i=a.model_meta)||void 0===i?void 0:i.tree)||{}).getNodeIconCustom?[3,4]:[4,x.getListGlobalConfig()]:[3,5];case 3:t=s.sent(),e.getNodeIconCustom=null===(o=null==t?void 0:t.tree)||void 0===o?void 0:o.getNodeIconCustom,e=a.metaParse(e)||{},s.label=4;case 4:return e.params||(e.params={}),n=Object(u.a)({filter_dict:e.params.filter_dict,extra_property:e.params.extra_property,tree_type:e.tree_type||"org"},e),a.tree_model=w.createTree(a.tree_loader,angular.extend(a.tree_options||{},n)),a.tree_model.$setTreeParamsCallback&&a.tree_model.$setTreeParamsCallback((function(e){e.effect_date&&(a.effect_date=e.effect_date),a.fetchData()})),a.tree_model.$initTree(a.getTreeId(),e.is_calculate||null,angular.extend((null===(c=null===(r=null===(l=d()(_=a.advance_plan_list).call(_,(function(e){return e.default})))||void 0===l?void 0:l[0])||void 0===r?void 0:r.config)||void 0===c?void 0:c.tree_config)||{},{effect_date:a.getEffectDate()})).then((function(){var e,t;a.mobile_tree_id=angular.copy(null===(t=null===(e=a.tree_model)||void 0===e?void 0:e.selectedNode)||void 0===t?void 0:t.id),a.effect_date=a.tree_model.effect_date,"mobile"===a.client&&(a.mobile_tree_config=a.getMobileTreeConfig()),a.getPlanAndFetchData()})),[3,6];case 5:a.getPlanAndFetchData(),s.label=6;case 6:return[2]}}))}))},a.getEffectDate=function(){return h.params.effect_date},a.getAllFilterDict=function(e){var t,n,i,o=a.advance_query_enabled&&(null===(t=a.advance_query)||void 0===t?void 0:t.$getFilterDict)?Object(u.a)({},a.advance_query.$getFilterDict()):Object(u.a)({},null===(n=a.list_filter_model)||void 0===n?void 0:n.$getFilters());return b("isValidValue")(a.category_id)&&(o[(null===(i=a.category_meta)||void 0===i?void 0:i.key)||a.category_field]=a.category_id),e&&a.category_field in o?delete o[a.category_field]:-99999===o[a.category_field]&&(o[a.category_field]=null),a.transFilterDict(angular.copy(Object(u.a)(Object(u.a)(Object(u.a)({},a.getTreeFilterDict()),a.getFilterDict()),o)))},a.getTreeFilterDict=function(){var e={};return function(){var t,n,i,o,l,r,s,d,u,_,p;if(null===(n=null===(t=a.model_meta)||void 0===t?void 0:t.tree)||void 0===n?void 0:n.tree_key){var m=-1===a.tree_model.selectedNode.id?void 0:a.tree_model.selectedNode.id;(null===(i=a.tree_model)||void 0===i?void 0:i.filter_mode)&&(a.is_include_child=!1);var f={};c()(f,null===(l=null===(o=a.tree_model)||void 0===o?void 0:o.getFilterMode())||void 0===l?void 0:l.value,{value:m,enumerable:!0,configurable:!0,writable:!0}),40===a.tree_model.selectedNode.org_type?e[a.getTreeKey()]=m:e[a.getTreeKey()]=a.is_include_child?{child_include:m}:(null===(r=a.tree_model)||void 0===r?void 0:r.filter_mode)&&"self"!==(null===(s=a.tree_model)||void 0===s?void 0:s.filter_mode)?f:m,null!==a.tree_model.effect_date&&(e.date_=a.tree_model.effect_date)}(null===(u=null===(d=a.model_meta)||void 0===d?void 0:d.tree)||void 0===u?void 0:u.revoke_key)&&null!==a.tree_model.is_show_revoke&&(e[null===(p=null===(_=a.model_meta)||void 0===_?void 0:_.tree)||void 0===p?void 0:p.revoke_key]=a.tree_model.is_show_revoke)}(),h.params.filter_dict?Object(u.a)(Object(u.a)({},JSON.parse(h.params.filter_dict)),e):e},a.getMobileTreeConfig=function(){var e,t=a.metaParse((null===(e=a.model_meta)||void 0===e?void 0:e.tree)||{}),n={mode:"new",filter_dict:{},extra_property:{},child_include:!0};if(t.params&&n&&angular.extend(n,t.params),a.params&&"{}"!==l()(a.params)){switch(a.params.orgType||a.params.org_type){case"org":n.filter_dict.org_type=[10,20];break;case"position":n.filter_dict.org_type=[10,20,40]}a.params.role&&(n.extra_property.role=a.params.role),a.params.extra_property&&angular.extend(n.extra_property,a.params.extra_property)}return n.no_delete=!0,n.selectorParse=function(e){return a.mobile_tree_id=angular.copy(e.id),e.id},n.selectorModel=t.model,{key:a.getTreeKey(),label:t.description||"组织范围",component:"common"===t.tree_type?"hc-tree-selector":"hc-selector-depart",options:n}},a.$watch("tree_model.selectedNode",(function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e&&(t&&"{}"!==l()(t)&&e.id!==t.id||e.is_virtual_root_node)&&"{}"!==l()(e)&&(a.paging._current_page=1,a.fetchData({fields:a.merged_fields},!1,!0))})),a.checkFetch=function(){return!!(a.tree_model||{}).selectedNode},a.showUndoOrgSwitch=function(){a.show_org_deleted=!a.show_org_deleted,a.tree_model.$initTree(a.getTreeId())},a.getTreeKey=function(){var e,t,n,i;if(null===(t=null===(e=a.model_meta)||void 0===e?void 0:e.tree)||void 0===t?void 0:t.model)n="Department"===a.model_meta.tree.model?a.model_meta.tree.tree_key?40===a.tree_model.selectedNode.org_type?a.model_meta.tree.tree_key.position:a.model_meta.tree.tree_key.org:40===a.tree_model.selectedNode.org_type?"position.origin_id":"department.origin_id":a.model_meta.tree.tree_key?a.model_meta.tree.tree_key.tree_node_key:o()(i=a.model_meta.tree.model.replace(/([A-Z])/g,"_$1").toLowerCase()).call(i,1)+"_id";else if(a.params.tree_model){var l;n=o()(l=a.params.tree_model.replace(/([A-Z])/g,"_$1").toLowerCase()).call(l,1)+"_id"}else a.params.org_type&&(n="department.origin_id");return n},a.refreshListAsync=function(e){return Object(u.c)(void 0,void 0,void 0,(function(){var t,n,i;return Object(u.e)(this,(function(o){return e&&a.tree_model.$initTree(a.getTreeId(),(a.model_meta||{}).tree.is_calculate||null,angular.extend((null===(i=null===(n=null===(t=a.advance_query)||void 0===t?void 0:t.current_plan)||void 0===n?void 0:n.config)||void 0===i?void 0:i.tree_config)||{},{effect_date:a.getEffectDate()})).then((function(){var e,t;a.mobile_tree_id=angular.copy(null===(t=null===(e=a.tree_model)||void 0===e?void 0:e.selectedNode)||void 0===t?void 0:t.id)})),[2]}))}))},a.getAlterStateParams=function(){return{category_field:a.category_field,category_id:a.category_id}}}]),t.a="BaseCategoryTreeListController"},"d/Un":function(e,t){e.exports='<hc-canvas\n    config="$ctrl.config"\n    operation="$ctrl.operation"\n    ng-click="$event.stopPropagation()"\n></hc-canvas>\n'},d1AN:function(e,t){e.exports="<div class=\"component-container\" ng-click=\"$ctrl.onClick($event)\">\n    <div class='component-input-inner'\n         ng-class='{placeholder:!$ctrl.model}'\n         ng-disabled='($ctrl.options.readOnly|valueToFunc)()'\n    >\n        {{$ctrl.model ? $ctrl.model : $ctrl.options.placeholder}}\n    </div>\n</div>\n"},"d4O/":function(e,t){e.exports='<div class="model_list_tip" ng-style="list_config.tip_config.style.tip_content" ng-if="list_config && list_config.tip && list_config.tip_config.mobile && list_config.tip_config.mobile !== \'tile\'">\n    <hc-content-tip content="list_config.tip" options="list_config.tip_config" tip-status="tip_status"></hc-content-tip>\n</div>\n<div class=\'hc-query-mask\' ng-show="show_query" ng-click="showQuery()"></div>\n<hc-query model=\'advance_query\' ng-if="!model_meta.advance_query.close && !model_meta.advance_query.mobile_outside_query"></hc-query>\n<div class="simple-query" ng-class="{\'show\': show_query}" ng-if="model_meta.advance_query.close">\n    <hc-form model="simple_query.simple_form"></hc-form>\n    <div class="query-footer">\n        <div class="btn" ng-repeat="_a in simple_query.action_meta" ng-click="_a.func()"\n             ng-class="{\'important\':_a.is_important}">\n            {{_a.label}}\n        </div>\n    </div>\n</div>\n'},dbhL:function(e,t){e.exports='<div class="grid-setting-content" ng-init="init()">\n    <div ng-repeat="_item in grid_setting_item">\n        <div class="grid-setting-title">{{_item.label}}</div>\n        <div class="grid-setting-detail">\n            <div class="item" ng-repeat="v in _item.list" ng-click="changeRowType(_item.key,v)"\n                 ng-class="{\'sys-color\':v.value==params[_item.key]}">\n                    <span ng-class="{\'icon-hcm-radio-circle sys-color\':v.value==params[_item.key],\n                        \'icon-hcm-none-circle\':v.value!=params[_item.key]}"\n                          class="item-icon"></span>{{v.label}}\n            </div>\n        </div>\n    </div>\n</div>\n'},dj1t:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return y}));n("oVuX"),n("07d7"),n("JfAA"),n("rZ3M");var i,o,a=n("04Ix"),l=n.n(a),r=n("ZbhI"),c=n.n(r),s=n("NFKh"),d=n.n(s),u=(n("3y9D"),n("cv67"),function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function t(t,n){var i=c()(e).call(e,t.charAt(n));if(-1===i)throw"Cannot decode base64";return i}function n(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}return{encode:function(t){if(1!==arguments.length)throw"SyntaxError: Not enough arguments";var i,o,a=[],l=(t=""+t).length-t.length%3;if(0===t.length)return t;for(i=0;i<l;i+=3)o=n(t,i)<<16|n(t,i+1)<<8|n(t,i+2),a.push(e.charAt(o>>18)),a.push(e.charAt(o>>12&63)),a.push(e.charAt(o>>6&63)),a.push(e.charAt(63&o));switch(t.length-l){case 1:o=n(t,i)<<16,a.push(e.charAt(o>>18)+e.charAt(o>>12&63)+"==");break;case 2:o=n(t,i)<<16|n(t,i+1)<<8,a.push(e.charAt(o>>18)+e.charAt(o>>12&63)+e.charAt(o>>6&63)+"=")}return a.join("")},decode:function(e){var n,i,o,a=(e=""+e).length;if(0===a)return e;if(a%4!=0)throw"Cannot decode base64";n=0,"="===e.charAt(a-1)&&(n=1,"="===e.charAt(a-2)&&(n=2),a-=4);var l=[];for(i=0;i<a;i+=4)o=t(e,i)<<18|t(e,i+1)<<12|t(e,i+2)<<6|t(e,i+3),l.push(String.fromCharCode(o>>16,o>>8&255,255&o));switch(n){case 1:o=t(e,i)<<18|t(e,i+1)<<12|t(e,i+2)<<6,l.push(String.fromCharCode(o>>16,o>>8&255));break;case 2:o=t(e,i)<<18|t(e,i+1)<<12,l.push(String.fromCharCode(o>>16))}return l.join("")}}}()),_=["A","E","S"].join(""),p=(i="2e35f242a46d67eeb74aabc37d5e5d06",{HCM_ENCRYPT_KEY:function(){return"hcm_transfer_strategy"},HCM_ENCRYPT_VALUE_KEY:function(){return"hcm_param"},sha1:function(e){return d.a.SHA1(e).toString()},md5:function(e){return d.a.MD5(e).toString()},DES:function(e,t){var n=d.a.enc.Utf8.parse(e);return d.a.DES.encrypt(t,n,{mode:d.a.mode.ECB,padding:d.a.pad.Pkcs7}).toString()},HB_MIXIN:function(e){return e?"hb"+e:"base64"},HA_MIXIN:function(e){return void 0!==e?"ha"+e:"aes"},HA_KEY:function(){return"2e35f242a46d1qazb74aabc37d5e5d06"},HA_Decrypt:function(e,t){var n=d.a.enc.Utf8.parse(t||i),o=d.a.enc.Utf8.parse("fedcba0987654321");return d.a[_].decrypt(e,n,{iv:o,mode:d.a.mode.CBC,padding:d.a.pad.Pkcs7}).toString(d.a.enc.Utf8)},HA_Encrypt:function(e){return this.HA(e)},HA:function(e,t){var n=d.a.enc.Utf8.parse(t||i),o=d.a.enc.Utf8.parse("fedcba0987654321"),a=d.a.enc.Utf8.parse(e);return d.a[_].encrypt(a,n,{iv:o,mode:d.a.mode.CBC,padding:d.a.pad.Pkcs7}).toString()}}),m={name:p.HB_MIXIN(4),encode:function(e){return encodeURIComponent(u.encode(e))},decode:function(e){return u.decode(decodeURIComponent(e))}},f={name:p.HB_MIXIN(5).toUpperCase(),encode:function(e){return encodeURIComponent(u.encode(e).replaceAll("a","!").replaceAll("5","a"))},decode:function(e){return u.decode(decodeURIComponent(e).replaceAll("a","5").replaceAll("!","a"))}},h={name:p.HA_MIXIN().toUpperCase(),encode:function(e){return encodeURIComponent(p.HA_Encrypt(e))},decode:function(e){return p.HA_Decrypt(decodeURIComponent(e))}},g={name:p.HA_MIXIN(4).toUpperCase(),encode:function(e){return encodeURIComponent(p.HA_Encrypt(e))},decode:function(e){return p.HA_Decrypt(decodeURIComponent(e))}},v={name:p.HA_MIXIN("").toUpperCase(),encode:function(e){return encodeURIComponent(p.HA_Encrypt(e))},decode:function(e){return p.HA_Decrypt(decodeURIComponent(e))}},b={name:p.HA_MIXIN(5).toUpperCase(),encode:function(e){return encodeURIComponent(p.HA_Encrypt(e).replaceAll("a","!").replaceAll("5","a"))},decode:function(e){return p.HA_Decrypt(decodeURIComponent(e).replaceAll("a","5").replaceAll("!","a"))}},y=(o={},l()(o,p.HB_MIXIN(4).toUpperCase(),m),l()(o,p.HB_MIXIN(5).toUpperCase(),f),l()(o,p.HA_MIXIN().toUpperCase(),h),l()(o,p.HA_MIXIN("").toUpperCase(),v),l()(o,p.HA_MIXIN(4).toUpperCase(),g),l()(o,p.HA_MIXIN(5).toUpperCase(),b),o)},dz9j:function(e,t){e.exports='<div class="update" style="color: red">{{updateInfo}}</div>\n<div class="mark-down" ng-init="init()">\n    <div ng-show="options.mode===\'edit\'" class="edit">\n        <div class="toolbar">\n            <div class="mark-down-button">\n                <span ng-click="editFunc()" ng-class="{\'sys-color\':edit}">编辑</span>\n                <span ng-click="previewFunc()" ng-class="{\'sys-color\':!edit}">预览</span>\n            </div>\n            <div class="operates">\n                <div ng-repeat="v in operates"\n                     class="operates-icon"\n                     ng-class="v.icon"\n                     ng-click="v.func()"\n                     hc-title="{{v.label}}"\n                     options="{mode: \'tip\'}"></div>\n            </div>\n        </div>\n        <div class="preview" id="markdown_edit_preview" ng-show="!edit"></div>\n        <hc-text-area options="options" ng-show="edit" id="myInput" class="myInput"\n                      placeholder=\'请输入预览MD信息......\' ng-model="model">\n        </hc-text-area>\n        <div class="head-title" ng-if="show_head">\n            <div ng-repeat="h in head_params" ng-click="headFunc(h)">{{h}}</div>\n        </div>\n    </div>\n    <div class="preview" id="markdown_view_preview" ng-show="options.mode===\'view\'"></div>\n</div>\n'},eR9L:function(e,t){e.exports='<div ng-init="init()" class="model-view-base">\n    <div class="hcm-content-body">\n        <hc-view model="view_model"></hc-view>\n    </div>\n</div>\n\n'},ewae:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("07d7"),n("5s+n"),n("rB9j"),n("UxlC");var i=n("UF4K"),o=n.n(i),a=n("OBge"),l=n.n(a);function r(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))}var c=function(){function e(){}return e.loadComponent=function(e,t){var n=this;return void 0===t&&(t=!1),e=t?r(e):e,new l.a((function(t,i){n._commComponentMap.get(e)().then((function(e){angular.element(document.body).injector().get("$ocLazyLoad").load([{name:"hcm.common"},{name:"myApp"}]).then((function(){t(e)}))}))}))},e.isLazyComponent=function(e){return this._commComponentMap.has(r(e))},e._commComponentMap=new o.a([["hcChatComponent",function(){return Promise.all([n.e(0),n.e(22)]).then(n.bind(null,"VDNG")).then((function(e){return e.default}))}],["hcCommText",function(){return Promise.all([n.e(0),n.e(29)]).then(n.bind(null,"+dnG")).then((function(e){return e.default}))}],["hcCommOptions",function(){return Promise.all([n.e(0),n.e(27)]).then(n.bind(null,"h/HI")).then((function(e){return e.default}))}],["hcCommOrder",function(){return Promise.all([n.e(0),n.e(28)]).then(n.bind(null,"Dby0")).then((function(e){return e.default}))}],["hcCommMarkdown",function(){return Promise.all([n.e(0),n.e(26)]).then(n.bind(null,"XwWv")).then((function(e){return e.default}))}],["hcCommImage",function(){return Promise.all([n.e(0),n.e(24)]).then(n.bind(null,"BzKv")).then((function(e){return e.default}))}],["hcCommFile",function(){return Promise.all([n.e(0),n.e(23)]).then(n.bind(null,"Bqf8")).then((function(e){return e.default}))}],["hcCommLink",function(){return Promise.all([n.e(0),n.e(25)]).then(n.bind(null,"hJPa")).then((function(e){return e.default}))}]]),e}()},fE7L:function(e,t){e.exports='<div ng-if="!($ctrl.item.hide|valueToFunc)()\n        &&![undefined,null,\'\'].includes($ctrl.row|hcListCellData:$ctrl.columnsMetas[$ctrl.item.key])"\n     class="card-content"\n     ng-style="$ctrl.item.style"\n     ng-class="$ctrl.item.class"\n     ng-click="$ctrl.onItemClick($event, $ctrl.row, $ctrl.columnsMetas[$ctrl.item.key])"\n>\n    <span class="label"\n          ng-if="$ctrl.columnsMetas[$ctrl.item.key].label&&!$ctrl.hideLabel">\n        {{$ctrl.columnsMetas[$ctrl.item.key].label}}:\n    </span>\n    <span class="field"\n          ng-if="!$ctrl.item.text"\n          ng-bind-html="$ctrl.row|hcListCellData:$ctrl.columnsMetas[$ctrl.item.key]|infoDefault|toTrusted">\n    </span>\n    <span class="field"\n          ng-if="$ctrl.item.text"\n    >\n        {{$ctrl.item.text}}\n    </span>\n</div>\n\n<div ng-if="$ctrl.item.children"\n     class="card-children"\n     ng-style="$ctrl.item.style"\n     ng-class="$ctrl.item.class"\n>\n    <hc-flex-card\n        ng-repeat="item in $ctrl.item.children"\n        item="item"\n        row="$ctrl.row"\n        columns-metas="$ctrl.columnsMetas"\n        on-item-click="$ctrl.onItemClick"\n        hide-label="$ctrl.hideLabel"\n        ng-style="item.card_style"\n        ng-class="item.card_class"\n    ></hc-flex-card>\n</div>\n'},fGto:function(e,t){e.exports='<style>\n    hc-dialog .hc-dialog-window .hc-dialog-content {\n        left: 3%;\n        right: 3%;\n    }\n</style>\n<div class="emp-filter emp-query-filter" ng-init="init()">\n    <div class="solution-block">\n        <div class="select-box">\n            <hc-form-component\n                    key="{{ solution_meta.key }}"\n                    options=\'solution_meta.options\'\n                    ng-model=\'solution_id\'\n                    component="{{ solution_meta.component }}"\n                    label="{{ solution_meta.label }}"\n                    placeholder="{{ solution_meta.options.placeholder }}"\n                    ng-disabled="solution_meta.options.disabled"\n            ></hc-form-component>\n        </div>\n        <div class="btn-box">\n            <div class="btn" ng-click="save()" ng-if="solution_id">保存方案</div>\n            <div class="btn" ng-click="copy()" ng-if="solution_id || condition_list.length > 0">方案另存为</div>\n            <div class="btn" ng-click="del()" ng-if="solution_id">删除</div>\n        </div>\n    </div>\n\n    <div class="tree-panel">\n        <div class="header">查询字段</div>\n        <div class="content-block">\n            <div class="category" ng-repeat="_category in meta_list track by $index">\n                <div class="node-category" ng-click="_category.expand=!_category.expand">\n                    <div class="arrow-icon"\n                         ng-class="_category.expand ? \'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"></div>\n                    <div class="node-icon"\n                         ng-class="_category.expand ? \'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></div>\n                    <div class="name">{{ _category.name }}</div>\n                </div>\n                <div class="node-field" ng-repeat="_field in _category.fields track by $index"\n                     ng-if="_category.expand"\n                     ng-click="addCondition(_field)">\n                    <div class="name" title="{{ _field.alias }}">{{ _field.alias }}</div>\n                    <div class="arrow-icon icon-hcm-arrow-right-circle"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="content-panel">\n        <div class="header">查询条件</div>\n        <div class="content-block" ng-class="show_formula ? \'show-formula\':\'hide-formula\'">\n            <div class="condition-row" ng-repeat="_condition in condition_list track by _condition.key">\n                <div class="index-box">{{ $index + 1 }}</div>\n                <div class="name-box">\n                    <div class="name" title="{{ _condition.field.alias }}">\n                        {{ _condition.field.alias }}\n                    </div>\n                </div>\n                <div class="compare-box">\n                    <hc-form-component\n                            key="{{ _condition.compare_meta.key }}"\n                            options=\'_condition.compare_meta.options\'\n                            ng-model=\'_condition.compare\'\n                            component="{{ _condition.compare_meta.component }}"\n                            label="{{ _condition.compare_meta.label }}"\n                            placeholder="{{ _condition.compare_meta.options.placeholder }}"\n                            ng-disabled="_condition.compare_meta.options.disabled"\n                    ></hc-form-component>\n                </div>\n                <div class="value-box">\n                    <hc-form-component\n                            key="{{ _condition.value_meta.key }}"\n                            options=\'_condition.value_meta.options\'\n                            ng-model=\'_condition.value\'\n                            component="{{ _condition.value_meta.component }}"\n                            label="{{ _condition.value_meta.label }}"\n                            placeholder="{{ _condition.value_meta.options.placeholder }}"\n                            ng-disabled="_condition.value_meta.options.disabled"\n                    ></hc-form-component>\n                </div>\n                <div class="formula-box">\n                    <hc-select ng-if="_condition.formula_meta.options"\n                               key="_condition.formula_meta.key"\n                               ng-model="_condition.formula"\n                               options="_condition.formula_meta.options"></hc-select>\n                </div>\n                <div class="btn-box icon-hcm-delete-circle-solid"\n                     ng-click="delCondition($index)"></div>\n            </div>\n        </div>\n        <div class="formula-block" ng-if="show_formula">\n            <div class="formula-box">\n                <hc-form-component\n                        key="{{ formula_meta.key }}"\n                        options=\'formula_meta.options\'\n                        ng-model=\'formula.content\'\n                        component="{{ formula_meta.component }}"\n                        label="{{ formula_meta.label }}"\n                        placeholder="{{ formula_meta.options.placeholder }}"\n                        ng-disabled="formula_meta.options.disabled"\n                ></hc-form-component>\n            </div>\n        </div>\n        <div class="select-block">\n            <div class="desc" ng-if="!show_formula">条件组合不符合需求？\n                <span class="btn" ng-click="toggleFormula()">马上调整</span>\n            </div>\n            <div class="btn" ng-click="toggleFormula()" ng-if="show_formula">取消调整</div>\n            <div class="help">如何调整条件组合<span class="icon icon-hcm-info-normal"></span></div>\n        </div>\n    </div>\n</div>\n\n'},"fJ+s":function(e,t){e.exports='<div id="hc-common-import" ng-init="init()">\n    <div class="import-emp-info">\n        <div class="item" ng-click="download_template()">\n            <div>\n                <div class="category-icon icon-list-pending"></div>\n                <div class="category-name">导入模板下载</div>\n            </div>\n        </div>\n\n        <div class="item import-file" ng-click="operation(false)">\n            <div>\n                <div class="category-icon icon-leadin"></div>\n                <div class="category-name">数据导入</div>\n            </div>\n        </div>\n\n        <div class="item import-file" ng-click="download()">\n            <div>\n                <div class="category-icon icon-leadin"></div>\n                <div class="category-name">下载详细导入报告</div>\n            </div>\n        </div>\n    </div>\n</div>\n'},fJFi:function(e,t){e.exports='<div class="selected-panel">\n    <div ng-repeat="v in params.list track by $index" class="list-item"><span>{{v.name}}</span><span\n        class="icon-hcm-delete-circle-solid delete" ng-click="deleteItem(v)"></span></div>\n</div>\n'},fSWE:function(e,t){e.exports='\x3c!-- pc端 翻页 --\x3e\n<div class="hc-paging" ng-if="paging && client==\'pc\' && !paging.onPagingChangeMore" ng-class="{\'no-paging-desc\': paging.hide_count}">\n    <div class="paging-desc" ng-if="!paging.hide_count">\n        <div ng-if="!paging.template">{{\'pageTotalCount\'|translate}}<span class="number"> \n            <span ng-show="!paging.is_waitting_show">{{paging.total_count || 0}}</span>\n            <span class="icon icon-hcm-more-point" ng-show="paging.is_waitting_show"></span>\n        </span>{{\'pageCountUnit\'|translate}}</div>\n        <hc-compile ng-if="paging.template" data-template=\'paging.template\'></hc-compile>\n    </div>\n\n    <div class="paging-box">\n        <div class="icon-box" ng-class="{\'disable\':paging.current_page == 1}"\n             ng-click="onPagingClick(\'first\')">\n            <div class="icon icon-hcm-arrow-left-end"></div>\n        </div>\n        <div class="icon-box" ng-class="{\'disable\':paging.current_page == 1}"\n             ng-click="onPagingClick(\'previous\')">\n            <div class="icon icon-hcm-arrow-left"></div>\n        </div>\n        <span>{{\'currentPage\'|translate}}</span>\n        <input type="number" ng-model="paging.current_page"\n               ng-model-options="{debounce:{default:500,blur:0}}"/>\n        <span>{{\'pageUnit\'|translate}}</span>\n        <div class="icon-box" ng-class="{\'disable\':paging.current_page >= paging.page_count}"\n             ng-click="onPagingClick(\'next\')">\n            <div class="icon icon-hcm-arrow-right"></div>\n        </div>\n        <div class="icon-box" ng-class="{\'disable\':paging.current_page >= paging.page_count}"\n             ng-click="onPagingClick(\'last\')">\n            <div class="icon icon-hcm-arrow-right-end"></div>\n        </div>\n        <div class="menu"\n             tabindex="0"\n             ng-blur="hideList()"\n             ng-click="clickPageSizeButton($event)"\n        >\n            <button ng-class="{\'rotate-arrow\': showPageSizeList}">\n                {{paging.page_size}} {{\'/page\'|translate}}\n                <span class="icon-hcm-arrow-down-solid"></span>\n            </button>\n            <ul ng-class="{\'hide\': !showPageSizeList}">\n                <li ng-repeat="m in paging.page_size_list"\n                    ng-click="paging.page_size = m.value">\n                    {{m.label}}\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n\x3c!-- mobile端 翻页 --\x3e\n<div class="hc-paging-mobile" ng-if="paging && client==\'mobile\' && !paging.onPagingChangeMore">\n    <div ng-if="!paging.template">共<span class="high-light"> {{paging.total_count || 0}} </span>条</div>\n    <hc-compile ng-if="paging.template" data-template=\'paging.template\'></hc-compile>\n    <div class="icon-box" ng-class="{\'disable\':paging.current_page == 1}" ng-click="onPagingClick(\'previous\')">\n        <div class="icon icon-hcm-arrow-left"></div>\n    </div>\n    <div class="select-box">\n        <span ng-if="paging.page_count>0">第{{paging.current_page}}页/</span>共{{paging.page_count}}页\n    </div>\n    <div class="icon-box" ng-class="{\'disable\':paging.current_page >= paging.page_count}"\n         ng-click="onPagingClick(\'next\')">\n        <div class="icon icon-hcm-arrow-right"></div>\n    </div>\n</div>\n\x3c!-- 点击加载更多 --\x3e\n<div class="hc-paging-mobile-more"\n     ng-if="paging && paging.onPagingChangeMore && paging.current_page < paging.page_count ">\n    <div ng-click="onPagingClick(\'mobile_more\')">\n        {{paging._is_fetching ? \'正在读取数据...\' : \'点击读取更多...\'}}\n    </div>\n</div>\n'},fUbB:function(e,t){e.exports='<div class="hc-tag-new" ng-init="init()">\n    <div class="tag-body">\n        <div class="tag-items">\n            <div ng-repeat="label in tags track by $index"\n                 class="tag-item"\n                 ng-click="itemClick(label)"\n                 ng-class="{\'selected\': isSelected(label), \'overflow\': is_overflow, \'expanded\': expanded}">\n                <div class="label">{{label}}</div>\n            </div>\n            <div class="tag-component"\n                 ng-click="addTag($event)"\n                 ng-class="{\'expanded\': expanded}">\n                +\n            </div>\n        </div>\n    </div>\n    <div class="tag-expand" ng-if="is_overflow" ng-click="expandClick()" ng-class="{\'expanded\': expanded}">\n        {{expanded ? \'收起\' : \'展开\'}}\n        <span class="expand-icon" ng-class="{\'icon-hcm-arrow-up\': expanded, \'icon-hcm-arrow-down\': !expanded}"></span>\n    </div>\n</div>\n'},fapB:function(e,t){e.exports='<div class="component-container">\n    <input class="component-input-inner" name="{{options.name}}"\n        placeholder="{{(options.readOnly|valueToFunc)()?\'\':(options.placeholder || placeholder)}}"\n        minlength="{{options.minlength}}" \n        ng-model="model" \n        ng-class="{\'readonly\': (options.readOnly|valueToFunc)(),\n               \'bordered\': $ctrl.client===\'mobile\'&&options.bordered\n               }" \n        ng-mousedown="$ctrl.onMouseDown($event)"\n        ng-disabled="(options.readOnly|valueToFunc)()" \n        ng-blur="$ctrl.onBlur($event)"\n        ng-keyup="$ctrl.onKeyup($event)"\n        maxlength="{{options.maxlength}}"\n        ng-model-options="{debounce: options.debounce || 800}"\n        >\n    <div ng-show="false" class="component-input-inner">\n        {{model}}\n    </div>\n</div>\n'},ff9T:function(e,t){e.exports='<div class="workflow-emp-selector-panel-box" ng-init="$ctrl.$onInit()">\n    <div class="grid-btn">\n        <div class="hc-search-toolbar">\n            <input class="input-style" type="search" ng-model="$ctrl.scope.searchKey.key" placeholder="{{\'workflow_emp_selector_panel_search_placeholder\'|translate}}"\n                ng-keypress="$ctrl.enterKeyPress($event, $ctrl.scope.searchKey.key)" ng-class="{\'mobile-search\': $ctrl.client===\'mobile\'}"> \x3c!--输入姓名或其他关键词...--\x3e\n            <span class="search-icon icon-hcm-check" ng-class="$ctrl.client===\'pc\'?\'pc-span\':\'mobile-span\'"></span>\n        </div>\n    </div>\n    <div class="selected-history"\n        ng-show="$ctrl.cacheCount && (!$ctrl.scope.searchKey.key || !$ctrl.scope.searchKey.key.length)">\n        <span>\n            {{\'workflow_emp_selector_panel_search_selected_history_label\'|translate}} \x3c!--常用联系人--\x3e\n        </span>\n        <span class="clear-icon icon-hcm-delete" title="{{\'workflow_emp_selector_panel_search_selected_history_icon\'|translate}}" ng-click="$ctrl.clearEmpCache()"></span> \x3c!--清空常用联系人--\x3e\n    </div>\n    <div class="show-emp" id="show_select_emp_mobile" ng-if="client== \'mobile\' && $ctrl.chooseEmployees.length">\n        <div class="count-desc">\n             {{\'workflow_emp_selector_panel_show_emp_count_desc_front\'|translate}} {{$ctrl.chooseEmployees.length}} {{\'workflow_emp_selector_panel_show_emp_count_desc_back\'|translate}} \x3c!--已选中，共计 人--\x3e\n        </div>\n        <div class="emp-list">\n            <div ng-repeat="_item in $ctrl.chooseEmployees track by $index" class="info"\n                ng-mouseover="$ctrl.setCurrentNode($index)" ng-mouseleave="$ctrl.setCurrentNode(-1)"\n                ng-class="{\'current\': $index == $ctrl.currentEmployee._index}">\n                <div class="content">\n                    <div class="del-icon icon-hcm-delete-circle" ng-if="$index == $ctrl.currentEmployee._index"\n                        ng-click="$ctrl.delNode($index)"></div>\n                    <span>{{_item.name}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="total-count" ng-if="$ctrl.showCount">{{\'workflow_emp_selector_panel_total_count_front\'|translate}} <span class="count">{{$ctrl.searchResultCount}}</span> {{\'workflow_emp_selector_panel_total_count_back\'|translate}}</div> \x3c!--搜索到 条数据--\x3e\n    <div class="search-mini" ng-style="my_mini">\n        <div class="search-null" ng-show="$ctrl.searchResultCount<1">\n            <span ng-show="$ctrl.isSearchIng">{{\'workflow_emp_selector_panel_total_searching\'|translate}}</span> \x3c!--正在玩命搜索...--\x3e\n            <span ng-hide="$ctrl.isSearchIng">{{\'workflow_emp_selector_panel_total_search_result_front\'|translate}}<br>{{\'workflow_emp_selector_panel_total_search_result_back\'|translate}}</span>\n        </div> \x3c!--没搜到任何结果哦！--\x3e \x3c!--换个关键词试试？--\x3e\n        <div ng-show="$ctrl.searchResultCount>0" class="search-block">\n            <div class="search-item">\n                <div class="employee-list-item tg" style="display: flex;align-items: center"\n                    ng-repeat="_item in $ctrl.searchModel" ng-class="{\'selected\': model.indexOf(_item.id) > -1}"\n                    ng-click="$ctrl.choose(_item)">\n                    <div class="emp-photo">\n                        <img ng-src="{{_item.photo|hcPhoto:46}}">\n                    </div>\n                    <div class="content" style="width: 100%">\n                        <div>\n                            <span class="name f16">{{_item.name}}</span>\n                        </div>\n                        <div class="desc" ng-if="!unit_position_mode">\n                            {{_item.department.name}}\n                            <span ng-if="!!_item.department.name&&!!_item.position.name">-</span>\n                            {{_item.position.name}}\n                        </div>\n                    </div>\n                    <span\n                        ng-class="$ctrl.isSelected(_item) ? \'icon-submit sumit_icon_select\' : \'icon-submit sumit_icon_unselect\'"></span>\n                </div>\n                <div class="show_more" ng-if="$ctrl.searchResultCount>$ctrl.searchModel.length" ng-click="$ctrl.showMore()">\n                    {{\'common_list_show_more\'|translate}} \x3c!--点击加载更多--\x3e\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="show-emp" ng-if="$ctrl.client== \'pc\' && $ctrl.chooseEmployees.length">\n        <div class="count-desc">\n            {{\'workflow_emp_selector_panel_show_emp_count_desc_front\'|translate}} {{$ctrl.chooseEmployees.length}} {{\'workflow_emp_selector_panel_show_emp_count_desc_back\'|translate}} \x3c!--已选中，共计 人--\x3e\n        </div>\n        <div class="emp-list">\n            <div ng-repeat="_item in $ctrl.chooseEmployees track by $index" class="info"\n                ng-mouseover="$ctrl.setCurrentNode($index)" ng-mouseleave="$ctrl.setCurrentNode(-1)"\n                ng-class="{\'current\': $index == $ctrl.currentEmployee._index}">\n                <div class="content">\n                    <div class="del-icon icon-hcm-delete-circle" ng-if="$index == $ctrl.currentEmployee._index"\n                        ng-click="$ctrl.delNode($index)"></div>\n                    <span>{{_item.name}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},fnWO:function(e,t){e.exports='<div class="dialog-simple-list report-data-block-preview" data-ng-init="$ctrl.$onInit()">\n    <div class="hcm-hc-query" ng-if="$ctrl.options.multi">\n        <hc-form model="$ctrl.options.list_filter_model" class="form-style"></hc-form>\n    </div>\n    <div class="hcm-hc-list-container">\n        <hc-list-new model="$ctrl.list_model"></hc-list-new>\n        <hc-list-no-data model="$ctrl.list_model" caption="没有设置任何数据源的过滤"></hc-list-no-data>\n    </div>\n    <div class="hcm-paging-container">\n        <hc-paging paging="$ctrl.paging"></hc-paging>\n    </div>\n</div>\n'},fpQX:function(e,t){e.exports='<div class="article-resume-card" data-ng-init="init()">\n    <div class="article-object">\n        <div class="basic">\n            <div class="article-photo">\n                <img ng-src="{{item.owner.photo|hcPhoto:36}}"\n                     ng-click="item.owner.obj_type==0?go_emp(item.owner.id):\'\'">\n            </div>\n            <div class="name" ng-click="item.owner.obj_type==0?go_emp(item.owner.id):\'\'">{{item.owner.name}}</div>\n            <div class="inner-lock" ng-if="item.public==1">\n                <span class="special-icon icon-hcm-lock"></span>\n                <span>私密</span>\n            </div>\n            <div class="date">\n                {{item.date|timeStampToDate|beforeCurrentTime}}\n            </div>\n        </div>\n\n        <div class="content con-text" ng-show="item.content">\n            <span>{{item.content}}</span>\n        </div>\n        <div class="send_and_receive_msg">\n            <div class="content-text" ng-show="item.other_comment.list"\n                 ng-repeat="msg in item.other_comment.list">\n                <div>\n                    <span class="name">{{msg.logger.name}}</span>\n                    <span ng-if="msg.receive_msg_name"> 回复\n                        <span class="name">{{msg.receive_msg_name}}</span>\n                    </span>：{{msg.comment}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="attachment" ng-show="item.attachments.length>0">\n        <dynamic-article-attachment item="_att.attachment_class" object-id="_att.attachment_id"\n                                    object-data="_att.attachment_data"\n                                    ng-repeat="_att in item.attachments"></dynamic-article-attachment>\n    </div>\n</div>\n'},fqcw:function(e,t,n){"use strict";var i=n("uuav"),o=n("yZ58"),a=n.n(o);n("srGB");window.app.service("ModelReportService",["BaseCRUDService","dataService",function(e,t){angular.extend(this,e.getBaseService("model.report")),this.calcModelReport=function(e,n,i){return t.callHcmOpenApi("model.report.calc.report",{report_id:e,obj_id:n,params:i})}}]);var l=n("1hbj"),r=(n("07d7"),n("5s+n"),n("p532"),n("FLGM")),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("JMAH"),_=n.n(u),p=(n("3KUC"),n("JcNw"));window.app.controller("ModelReportPreviewDialogCtrl",["$scope","$controller","$rootScope","ModelReportService","$hcDialog","hcUploadFile",function(e,t,n,i,o,a){e.loadPreview=function(){i.getItemInfo(e.params.report_id).then((function(t){e.report_info=t,i.calcModelReport(e.params.report_id,e.params.obj_id,e.params.params).then((function(n){var i;e.file_index=n.index,p.embed(window.hcm_wengen+d()(i="/document/get_pdf/".concat(e.file_index,".")).call(i,t.template_type)+window.hcm_env_pre,".print-view-container",{width:"100%",height:"100%"})}))}))},e.$dialog.close=function(){e.is_data_changed&&e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.uploadTemplate=function(){var t={url:"/api/model_report/template/save",type:"file",file_type:["docx","xlsx"],size:30,is_silent:!0,params:{report_id:e.report_info.id}};a.upload(t).then((function(t){o.closeTarget("hcUploadFile"),e.loadPreview()})).finally((function(){n.hide_waiting()}))},e.downloadFile=function(t,n){var i,o,a=d()(i=d()(o="/api/model_report/file/download?index=".concat(t,"&ext=")).call(o,e.report_info.template_type,"&name=")).call(i,n),l=$("<a style='display: none'></a>").attr("href",a).appendTo("body");l[0].click(),l.remove()},e.operate_list=[{label:"下载",default:!0,func:function(){e.downloadFile(e.file_index,"预览")}},{label:"模板上传",left:!0,func:e.uploadTemplate},{label:"模板下载",left:!0,func:function(){e.downloadFile(e.report_info.template_index,"模板")}},{label:"刷新",left:!0,func:e.loadPreview}];var l=e.params.params.actions||[];c()(l).call(l,(function(t){t.label&&t.func&&t.left&&e.operate_list.push(t)})),e.$dialog.operates(e.operate_list),e.loadPreview()}]);var m={controller:"ModelReportPreviewDialogCtrl",template:_.a,title:"打印"};window.app.controller("ModelPrintListDialogCtrl",["$scope","$controller","$rootScope","$q","ModelReportService","$hcDialog",function(e,t,n,o,a,r){t(i.a,{$scope:e,CRUDService:a,InfoDialog:Object(l.a)("ModelReport","normal")}),e.getFilterDict=function(){return e.params.state?{model:e.params.model,state:e.params.state}:{model:e.params.model}},e.getInitData=function(){return{model:e.params.model}},e.defaultAction=function(t){r.getDialog(m).size("full").show({report_id:t.id,obj_id:e.params.obj_id,params:e.params.params})}}]);t.a={controller:"ModelPrintListDialogCtrl",template:a.a,title:"打印模板"}},fuHy:function(e,t){e.exports='<div class=\'hc-compute-editor-style\' data-ng-init=\'init()\'>\n    <div class="left-all">\n        <div class="left-all-child">\n            <div class="setting-panel">\n                <div class="setting-tabs">\n                    <div class="setting-tabs-padding">\n                        <div class="setting-tab"\n                         data-ng-repeat="tab in setting_tabs track by $index"\n                         data-ng-class="current_tab.key===tab.key&&\'selected-tab\'"\n                         data-ng-click="selectTab(tab)">\n                        {{tab["label"]}}\n                    </div>\n                    </div>\n                </div>\n        \n                <div class="panel-area">\n                    <div class="panel-tree">\n                        <div class="tree-area">\n                            <hc-report-dataset model="current_tab.model"></hc-report-dataset>\n                        </div>\n                        <div class="field-desc">\n                            <div class="field-title" data-ng-class="temp_function&&\'field-pad\'">{{temp_function.value}}</div>\n                            <div class="field-content"\n                                 data-ng-class="temp_function&&\'field-pad\'">{{temp_function.doc}}</div>\n                        </div>\n                    </div>\n                    <div class="panel-form">\n                        <hc-form model="value_form" ng-show="current_tab.key!==\'function_list\'"></hc-form>\n                        <div class="panel-add"\n                             data-ng-class="(!selected_field&&!value_form&&!selected_function)&&\'disabled\'"\n                             data-ng-click="insert(value_form.data[selected_field.key])">\n                            插入>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <hc-resizer\n                class="resizer"\n                move-callback="onResize"\n            ></hc-resizer>\n        </div>\n    </div>\n    \n\n    <div class="setting-area">\n        <div class="from-area">\n            <hc-form model="compute_form"></hc-form>\n        </div>\n\n        <div class="operate_loc">\n            <div class="operate-label" data-ng-show="params.extra_desc">\n                <pre class="extra_desc">{{params.extra_desc}}</pre>\n            </div>\n    \n            <div class="operate-label" data-ng-show="!params.hide_operate">操作</div>\n            <div class="operate-panel" data-ng-if="operate_list.length" data-ng-show="!params.hide_operate">\n                <div data-ng-repeat="operate in operate_list track by $index"\n                        class="operate-desc icon {{operate.icon}}"\n                        hc-title="{{operate.label}}"\n                        options="{}"\n                        data-ng-click="insert(operate.key)"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'},fwYG:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).stat_list,o=i.$each,a=(e.col,e.$index,e.cols);return n&&(t+="\n",o(n,(function(e,n){t+='\n<div class="table-footer-cell ',t+=i.getStatClass(e,a),t+='"\n     style="',t+=i.getStatStyle(e,a),t+='" col-key=',t+=e.key,t+=">\n    ",null!==e.value&&(t+="\n              <span>",t+=e.value,t+="</span>\n    "),t+="\n</div>\n"})),t+="\n"),t+="\n"}},g1Qd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l}));var i=n("mrSG"),o=function(){},a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.args=[],t}return Object(i.d)(t,e),t}(o)),l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t}(o));(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)})(o),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.d)(t,e)}(o)},g3xB:function(e,t){e.exports='<div class="hc-circle-btn">\n    <div class="btn-item"\n         ng-class="{left: _action.left}">\n        <button\n            class="circle-btn"\n            ng-repeat="_action in model.visible_actions().splice(0,(model.visible_actions().length > model.max? model.max - 1 : model.max)) track by $index"\n            ng-disabled="(_action.disabled|valueToFunc)()"\n            >\n            <div ng-click="_action.actions? showMore($event, _action):item_func(_action)" class="icon {{_action.icon || \'icon-hcm-more\'}}" ng-hide="(_action.hide|valueToFunc)()"></div>\n            <div ng-click="_action.actions? showMore($event, _action):item_func(_action)" class="label" ng-hide="(_action.hide|valueToFunc)()"\n                  ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n                  \x3c!-- 多余的代码   只是一个箭头 --\x3e\n            \x3c!-- <span ng-if="_action.actions">&nbsp;<i class="icon-hcm-arrow-down-solid"></i></span> --\x3e\n        </button>\n        <button class="circle-btn"\n                ng-if="model.visible_actions().length > model.max"\n                >\n            <div ng-click="showMore($event, {\'key\':\'>__more_actions__\'})" class="icon icon-hcm-more"></div>\n            <div ng-click="showMore($event, {\'key\':\'>__more_actions__\'})" class="label">{{is_more_portal ? \'Stow more\' : \'Show more\' | translate}}</div>\n        </button>\n        <button\n            class="circle-btn"\n            ng-repeat="_action in model.visible_actions().splice(model.max - 1) track by $index"\n            ng-show="itemIsMoreShow(\'>__more_actions__\')"\n\n            ng-disabled="(_action.disabled|valueToFunc)()">\n            <div ng-click="item_func(_action)" class="icon {{_action.icon || \'icon-hcm-more\'}}" ng-hide="(_action.hide|valueToFunc)()"></div>\n            <div ng-click="item_func(_action)" class="label" ng-hide="(_action.hide|valueToFunc)()"\n                  ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n                  \x3c!-- 多余的代码   只是一个箭头 --\x3e\n            \x3c!-- <span ng-if="_action.actions">&nbsp;<i class="icon-hcm-arrow-down-solid"></i></span> --\x3e\n        </button>\n    </div>\n</div>\n'},gFnd:function(e,t,n){var i=n("/FZm"),o=n("mnMc");n("TyIJ"),n("Opio"),window.app.directive("hcReportTable",(function(){return{restrict:"E",scope:{ngModel:"="},template:n("FhAy"),controller:["$scope","$element",function(e,t){e.cellClick=function(t){var n;o(n=["FONT","TD"]).call(n,t.target.tagName)&&e.ngModel.cell_click&&e.ngModel.cell_click(t.target)},/kkPlus/gi.test(navigator.userAgent)&&(console.log("长沙轨道集成app特殊处理"),i(t).call(t,".report-table").css({"min-height":"calc(100% + 1px)","min-width":"calc(100% + 1px)"}))}]}}))},gG57:function(e,t){e.exports='<div class="hc-emp-selector" ng-init="init()">\n    <div class="btn-box" ng-if="! model">\n        <div class="icon icon-hcm-add-circle" ng-click="selectEmp()"></div>\n        <div class="desc" ng-click="selectEmp()">请选择职员</div>\n    </div>\n    <div class="emp-box" ng-if="emp">\n        <div class="photo-box">\n            <img ng-src="{{ emp.photo|hcPhoto:64}}">\n            <div class="btn-mask" ng-if="! options.readOnly" ng-click="selectEmp()">重新选择</div>\n        </div>\n        <div class="name">{{ emp.name }}</div>\n        <div class="desc">{{ emp.department }} {{ emp.job_title }}</div>\n    </div>\n</div>\n\n\n'},gKGf:function(e,t,n){"use strict";n("oVuX"),n("rB9j"),n("EnZy");var i=n("UtpJ"),o=n.n(i),a=n("mnMc"),l=n.n(a),r=n("mrSG"),c=n("CoJ3"),s=function(){function e(e,t,n){this.dataService=e,this.$hcDialog=t,this.BaseCRUDService=n}return e.prototype.parseMetaKey=function(e){var t,n,i,a,c,s,d,u,_=["list","info","view","base","dataset","ote","action","impexp","panel"];l()(t=e.split(".")).call(t,"meta")?(n="company",i=(u=e.split(".meta."))[0],s=o()(d=u[1].split(".")).call(d,0,-1)):(n="program",i=(u=e.split("."))[0],s=o()(u).call(u,1,-1));if(0===s.length)a="model",c=null;else{if(!l()(_).call(_,s[0]))return{meta_key:e,meta_type:n,model_name:i=Object(r.h)([i],s).join("."),biz_type:a="model",state:c=null};if(1===s.length)a=s[0],c=null;else{if(2!==s.length)throw new Error("wrong meta_key: "+e);a=s[0],c=s[1]}}return{meta_key:e,meta_type:n,model_name:i,biz_type:a,state:c}},e.$inject=["dataService","$hcDialog","BaseCRUDService"],e}();c.a.service("metaService",s)},gdJK:function(e,t){e.exports='<div class="advance-query" ng-init="init()">\n    <hc-form model=\'base_form\' class="query-form"></hc-form>\n    <div class="query-more" ng-click="showMore($event)" ng-show="!params.remove_info_meta">更多<span\n        class="icon icon-hcm-arrow-right"></span>\n    </div>\n</div>\n\n'},gdWe:function(e,t){e.exports='<div class="model-master-detail-dialog" ng-init="init()">\n    <div class="nav-tabs">\n        <hc-tabs\n                value="currentTab"\n                on-value-change="goChild">\n            <hc-tab-pane\n                    ng-repeat="_item in nav_items |orderBy: \'sequence\' track by $index"\n                    ng-hide="(isRoleNavItem && !isRoleNavItem(_item)) || (_item.hide|valueToFunc)() || !isValidNavItem(_item)"\n                    label="_item.label"\n                    hide-count="!_item.attachment.label"\n                    count="_item.count"\n                    name="_item.key"\n                    children="_item.list"\n                    is-selected-new-style=true\n                    is-multi-level-single-line=true\n                    visual-parent-tab=true\n            ></hc-tab-pane>\n        </hc-tabs>\n    </div>\n    <div class="nav-item-content">\n        <div class="render"></div>\n    </div>\n</div>\n'},"gh/P":function(e,t,n){"use strict";var i=n("Kwsy"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("lq6P"),c=n("U4OW"),s=n.n(c);n("7+HB");window.app.controller("CommonViewInfoCtrl",["BaseCRUDService","$controller","$rootScope","$scope","$compile",function(e,t,n,i,a){var c=e.getModelService(i.$dialog.options.model_name);t(r.a,{$scope:i,CRUDService:c}),i.meta_state=i.$dialog.options.meta_state,i.initBefore=function(){},i.initAfter=function(){var e,t,n,o,a,r;i.viewClass=i.params.alter.view_class||"",i.view_components=i.params.alter.view_components,i.obj_info=i.data.info_score&&i.data.info_score.obj_info,i.view_components_pc=null===(n=i.params.alter.view_components)||void 0===n?void 0:n.pc,i.view_components_mobile=null===(o=i.params.alter.view_components)||void 0===o?void 0:o.mobile,i.mobile_tab_labels=i.params.alter.mobile_tab_labels,i.is_show_board=i.base_form.data.is_show_board,i.right_components_pc=null===(a=i.params.alter.right_components)||void 0===a?void 0:l()(e=a.pc).call(e,(function(e){var t,n;return{component:e.component,options:{params:e.params(i.params),title:null===(t=e.options)||void 0===t?void 0:t.title,width:(null===(n=e.options)||void 0===n?void 0:n.width)||"col-12"}}})),i.right_components_mobile=null===(r=i.params.alter.right_components)||void 0===r?void 0:l()(t=r.mobile).call(t,(function(e){var t,n;return{component:e.component,options:{params:e.params(i.params),title:null===(t=e.options)||void 0===t?void 0:t.title,width:(null===(n=e.options)||void 0===n?void 0:n.width)||"col-12"}}})),$(".card-scroll").scroll((function(){if($(".card-scroll").scrollTop()>75){var e=$(".card-left-center").width()+32;i.$broadcast("transform_y_1",e)}else i.$broadcast("transform_y_0")}))},i.$on("board-change",(function(){o()((function(){var e=$(".card-left-center").width()+32;i.$broadcast("collapse-menu"),i.$broadcast("show-board-change",e)}),300)})),i.isShowBoard=function(){i.is_show_board=!i.is_show_board},i.is_right=!1,i.is_left=!0,i.isRight=function(){i.is_right=!0,i.is_left=!1},i.isLeft=function(){i.is_right=!1,i.is_left=!0}}]),t.a=function(e,t,n){return{controller:"CommonViewInfoCtrl",template:s.a,model_name:e,object_str:n,meta_state:t,setObjectString:function(e){return this.object_str=e,this},setModelName:function(e){return this.model_name=e,this},setMetaState:function(e){return this.meta_state=e,this}}}},gu9h:function(e,t,n){"use strict";n.d(t,"a",(function(){return fe}));n("oVuX"),n("sMBO"),n("07d7"),n("rB9j"),n("JfAA"),n("EnZy");var i=n("iYz8"),o=n.n(i),a=n("Dcj1"),l=n.n(a),r=n("O0yt"),c=n.n(r),s=n("0lTi"),d=n.n(s),u=n("WxoT"),_=n.n(u),p=n("526F"),m=n.n(p),f=n("x1GB"),h=n.n(f),g=n("xS4f"),v=n.n(g),b=n("+oHS"),y=n.n(b),w=n("6UaR"),x=n.n(w),k=n("nhkr"),$=n.n(k),O=n("RXMP"),D=n.n(O),C=n("3xDC"),M=n.n(C),S=n("5PDf"),E=n.n(S),P=n("D3kx"),j=n.n(P),T=n("zLi2"),A=n.n(T),I=n("UtpJ"),L=n.n(I),F=n("pPxq"),R=n.n(F),B=n("mnMc"),U=n.n(B),q=n("o+MX"),W=n.n(q),z=n("FLGM"),N=n.n(z),K=n("ijCd"),H=n.n(K),V=n("JZM8"),Y=n.n(V),G=n("xweI"),J=n.n(G),X=n("7tbW"),Q=n.n(X),Z=n("0YDr"),ee=n.n(Z),te=n("q92V"),ne=n.n(te),ie=n("AE40"),oe=n.n(ie),ae=n("Amfx"),le=n.n(ae),re=n("O9nY"),ce=n.n(re),se=n("tpxX"),de=n.n(se),ue=n("yM22"),_e=n("dj1t");function pe(e){if(void 0===c.a||null==l()(e)){if(x()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return me(e,t);var i=L()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return d()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return me(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,r=!0,s=!1;return{s:function(){i=o()(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw a}}}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fe=function(e,t){if(t){var n;t=N()(n=t.split(";")).call(n,(function(e){return e.split(":")}));e=E()(e).call(e,(function(e){var n,i,o=pe(t);try{for(o.s();!(n=o.n()).done;){var a,l=A()(n.value,2),r=l[0],c=l[1],s=(i=c,R()(i).call(i,">=")||R()(i).call(i,"<=")||R()(i).call(i,"!=")?[L()(i).call(i,0,2),L()(i).call(i,2)]:R()(i).call(i,">")||R()(i).call(i,"<")||R()(i).call(i,"=")?[L()(i).call(i,0,1),L()(i).call(i,1)]:[null,i]),d=A()(s,2),u=d[0],_=d[1],p=Object(ue.a)(r,e);if("!="===u)return _+""!=p+"";if("="===u)return _+""==p+"";if(">"===u)return j()(p)>j()(_);if(">="===u)return j()(p)>=j()(_);if("<"===u)return j()(p)<j()(_);if("<="===u)return j()(p)<=j()(_);if(Object(ue.c)(r,e)&&!U()(a=c.split("+")).call(a,""+Object(ue.a)(r,e)))return!1}}catch(e){o.e(e)}finally{o.f()}return!0}))}return e},he=function(e,t,n){var i;console.log("LIST_GET input",e,t,n);var o=null===(i=e=fe(e,n))||void 0===i?void 0:N()(i).call(i,(function(e){return Object(ue.a)(t,e)}));return console.log("LIST_GET output",o),o},ge=function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,a=o||{};return"object"!==$()(t)?t:(x()(t)?D()(t).call(t,(function(t,n){if("object"===$()(t))return e(t,i?i+"!["+n+"]":"["+n+"]",a);a[i?i+"!["+n+"]":"["+n+"]"]=t})):D()(n=y()(t)).call(n,(function(n){var o=t[n];if("object"===$()(o))return e(o,i?i+"!"+n:n,a);a[i?i+"!"+n:n]=o})),a)},ve=function(e,t){console.log("ISINCLUDED input",e,t);var n,i=ge(e);return n=v()(t).call(t,(function(e){var t,n=ge(e);return y()(n).length===y()(i).length&&h()(t=y()(i)).call(t,(function(e){return n[e]===i[e]}))})),console.log("ISINCLUDED res:"+n),n};t.b={AND:function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(console.log("AND input",t,i),0===i.length)return t;var a=t&&e.apply(void 0,i);return console.log("AND res:"+a),a},OR:function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(console.log("OR input",t,i),0===i.length)return t;var a=t||e.apply(void 0,i);return console.log("OR res:"+a),a},IF:function(e,t,n){return console.log("IF input",e,t,n),e?(console.log("IF output: ",t),t):(console.log("ELSE output: ",n),n)},EQ:function(e,t){console.log("EQ input",e,t);var n=e===t;return console.log("EQ res:"+n),n},NEQ:function(e,t){console.log("NEQ input",e,t);var n=e!==t;return console.log("NEQ res:"+n),n},GT:function(e,t){console.log("GT input",e,t);var n=e>t;return console.log("GT res:"+n),n},GTE:function(e,t){console.log("GTE input",e,t);var n=e>=t;return console.log("GTE res:"+n),n},LT:function(e,t){console.log("LT input",e,t);var n=e<t;return console.log("LT res:"+n),n},LTE:function(e,t){console.log("LTE input",e,t);var n=e<=t;return console.log("LTE res:"+n),n},ISINCLUDED:ve,ISNOTINCLUDED:function(e,t){console.log("ISNOTINCLUDED input",e,t);var n;return n=!ve(e,t),console.log("ISNOTINCLUDED res:"+n),n},BOOL:function(e){console.log("BOOL input",e);var t=Boolean(e);return console.log("BOOL res:"+t),t},NOT:function(e){console.log("BOOL input",e);var t=!Boolean(e);return console.log("BOOL res:"+t),t},MIN:function(e,t){console.log("MIN input",e,t);var n=oe()(e,t);return console.log("MIN res:"+n),n},MAX:function(e,t){console.log("MAX input",e,t);var n=ne()(e,t);return console.log("MAX res:"+n),n},ROUND:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;console.log("ROUND input",e,t);var n=de()(e,t);return console.log("ROUND res:"+n),n},ROUNDDOWN:function(e){console.log("ROUNDDOWN input",e);var t=ce()(e);return console.log("ROUNDDOWN res:"+t),t},ROUNDUP:function(e){console.log("ROUNDUP input",e);var t=le()(e);return console.log("ROUNDUP res:"+t),t},ISBLANK:function(e){var t;console.log("ISBLANK input",e);var n=U()(t=[void 0,null,""]).call(t,e);return console.log("ISBLANK res:"+n),n},ISNULL:function(e){console.log("ISNULL input",e);var t=null===e;return console.log("ISNULL res:"+t),t},MOMENT:moment,NOW:function(e){console.log("NOW input",e);var t=moment().format(e||"YYYY-MM-DD");return console.log("NOW res:"+t),t},DATE_STR:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;switch(console.log("DATE input:",t),t.length){case 1:i="YYYY";break;case 2:i="YYYY-MM";break;default:i="YYYY-MM-DD"}var o=moment(t).format(i);return console.log("DATE output:",o),o},DATETIME_STR:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;switch(console.log("DATETIME input:",t),t.length){case 1:i="YYYY";break;case 2:i="YYYY-MM";break;case 3:i="YYYY-MM-DD";break;case 5:i="YYYY-MM-DD hh:mm";break;default:i="YYYY-MM-DD hh:mm:ss"}var o=moment(t).format(i);return console.log("DATETIME output:",o),o},ADDMONTHS:function(e,t){console.log("ADDMONTHS input:",e,t);var n=moment(e).add(t||0,"months"),i=n.format(n._f||"YYYY-MM-DD");return console.log("ADDMONTHS output:",i),i},ADDDAYS:function(e,t){console.log("ADDDAYS input:",e,t);var n=moment(e).add(t||0,"days"),i=n.format(n._f||"YYYY-MM-DD");return console.log("ADDDAYS output:",i),i},YEAR:function(e){console.log("YEAR input",e);var t=moment(e).year();return console.log("YEAR res:"+t),t},MONTH:function(e){console.log("MONTH input",e);var t=moment(e).month();return console.log("MONTH res:"+t),t},DAY:function(e){console.log("DATE input",e);var t=moment(e).date();return console.log("DATE res:"+t),t},HOUR:function(e){console.log("HOUR input",e);var t=moment(e).hour();return console.log("HOUR res:"+t),t},MINUTE:function(e){console.log("MINUTE input",e);var t=moment(e).minute();return console.log("MINUTE res:"+t),t},SECOND:function(e){console.log("SECOND input",e);var t=moment(e).second();return console.log("SECOND res:"+t),t},LIST_VALUES:function(e,t,n,i){var o;console.log("LIST_VALUES input",e,t,n,i),e=fe(e,n);var a=Object(ue.c)(t,null===(o=e)||void 0===o?void 0:o[0])?e:i;return console.log("LIST_VALUES output",a),a},LIST_FILTER:fe,LIST_MAP:function(e,t,n){var i;console.log("LIST_MAP input",e,t,n),e=fe(e,n);var o=t.split(";"),a=null===(i=e)||void 0===i?void 0:N()(i).call(i,(function(e){return function(e){var t,n={},i=pe(o);try{for(i.s();!(t=i.n()).done;){var a=t.value.split(":"),l=A()(a,2),r=l[0],c=l[1];Object(ue.d)(r,n,Object(ue.a)(c,e))}}catch(e){i.e(e)}finally{i.f()}return n}(e)}));return console.log("LIST_MAP output",a),a},LIST_GET:he,LIST_COUNT:function(e,t,n){console.log("LIST_COUNT input",e,t,n),e=he(e,t,n);var i=ee()(e);return console.log("LIST_COUNT output",i),i},DE_DU:function(e,t){console.log("DE_DU input",e,t);var n=Q()(e,t);return console.log("DE_DU output",n),n},list_sorted:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.log("list_sorted input",e,t,n),t instanceof Array||(t=[t]),e=J()(e,t),n&&M()(e).call(e),console.log("list_sorted output",e),e},LIST_COMBINE:function(e,t){console.log("LIST_COMBINE input",e,t),t=t.split("|");var n=[];D()(e).call(e,(function(e){n.push(N()(t).call(t,(function(t){return Object(ue.a)(t,e)})))}));var i=N()(n).call(n,(function(e){return e.join("\t")})).join("\r\n");return console.log("LIST_COMBINE output",i),i},LIST_CONCAT:function(e,t){console.log("LIST_CONCAT input",e,t),t=t||",";var n=e.join(t);return console.log("LIST_CONCAT output",n),n},LIST_INCLUDE:function(e,t){var n;console.log("LIST_INCLUDE input",e,t);var i=U()(n=e||[]).call(n,t);return console.log("LIST_INCLUDE output",i),i},GET:function(e,t){console.log("GET input:",e,t);var n=Object(ue.a)(t,e);return console.log("GET output:",n),n},TOARRAY:function(){for(var e,t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=console).log.apply(e,W()(t=["TOARRAY input:"]).call(t,i)),console.log("TOARRAY output:",i),i},FINDBYINDEX:function(e,t){console.log("FINDBYINDEX input:",e,t);var n=e[t];return console.log("FINDBYINDEX output:",n),n},MAPBYKEY:function(e,t){console.log("MAPBYKEY input:",e,t);var n=N()(e).call(e,(function(e){return e[t]}));return console.log("MAPBYKEY output:",n),n},TO_STRING:function(e){var t,n;return null!==(t=null==e||null===(n=e.toString)||void 0===n?void 0:n.call(e))&&void 0!==t?t:e},STR_SLICE:function(e,t,n){console.log("STR_SLICE input",e,t,n);var i=L()(e).call(e,t,n);return console.log("STR_SLICE output",i),i},STR_SPLIT:function(e,t){console.log("STR_SPLIT input",e,t);var n=e.split(t);return console.log("STR_SPLIT output",n),n},STR_INCLUDES:function(e,t){console.log("STR_INCLUDES input",e,t);var n=H()(e,t);return console.log("STR_INCLUDES output",n),n},OBJ_MERGE:function(e,t){console.log("OBJ_MERGE input",e,t);var n={};return m()(n,e,t),console.log("OBJ_MERGE output",n),n},OBJ_PICK:function(e,t){console.log("OBJ_PICK input",e,t);var n=Y()(e,t);return console.log("OBJ_PICK output",n),n},JSON_STRINGIFY:function(e){console.log("JSON_STRINGIFY",e);var t=_()(e);return console.log("JSON_STRINGIFY output",t),t},JSON_PARSE:function(e){console.log("JSON_PARSE",e);var t="[object Object]"===Object.prototype.toString.call(e)?e:JSON.parse(e);return console.log("JSON_PARSE output",t),t},setFieldByPath:ue.d,TRANSLATE:function(e){return e?angular.element(document.body).injector().get("$translate").instant(e):(console.log(e+"该字段未设置对应翻译字段"),e)},MD5:function(e){return _e.b.md5(e)},SHA1:function(e){return _e.b.sha1(e)}}},gxpU:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("526F"),o=n.n(i),a=function(e){e&&o()(this,e)}},h0OH:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v}));var i=n("+oHS"),o=n.n(i),a=n("6UaR"),l=n.n(a),r=n("zQQR"),c=n.n(r),s=n("JW37"),d=n.n(s),u=n("LYCE"),_=n.n(u),p=Object.prototype.hasOwnProperty;function m(e,t){return p.call(e,t)}function f(e,t){return e===t?0===e&&1/e!=1/t:e==e||t==t}function h(e,t,n,i){_()(e,t,{enumerable:!0,configurable:!0,get:function(){var o=null==i?void 0:i.getter;return o?o.call(e,t,null==i?void 0:i.context):n},set:function(o){var a=null==i?void 0:i.getter,l=null==i?void 0:i.setter;f(a?a.call(e,t,null==i?void 0:i.context):n,o)&&(l?l.call(e,t,o,null==i?void 0:i.context):n=o)}})}var g=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"__ob__")&&e.__ob__ instanceof v},v=function(){function e(t,n){if(l()(t)){for(var i=[],a=0,r=t.length;a<r;a++)i.push(new e(t[a],n).getProxy());this._proxy=i}else{if(t&&Object.prototype.hasOwnProperty.call(t,"__ob__")&&t.__ob__ instanceof e)return t.__ob__;var s=o()(t);if(null==n?void 0:n.useProxy)this._proxy=function(e,t){var n=new Proxy(e,{set:function(e,i,o){var a=null==t?void 0:t.getter,l=null==t?void 0:t.setter;return!f(a?a.call(e,i,null==t?void 0:t.context):d()(e,i),o)||(l?l.call(e,i,o,null==t?void 0:t.context,n):c()(e,i,o))},get:function(e,n){var i=null==t?void 0:t.getter;return i?i.call(e,n,null==t?void 0:t.context):d()(e,n)}});return n}(t,n);else for(a=0;a<s.length;a++)h(t,s[a],t[s[a]],n);u=t,p="__ob__",m=this,_()(u,p,{value:m,enumerable:!!g,writable:!0,configurable:!0})}var u,p,m,g}return e.prototype.getProxy=function(){return this._proxy},e}()},h0oS:function(e,t){e.exports='<div ng-init="init()" class="model-view-dialog">\n    <hc-view model="view_model"></hc-view>\n</div>\n'},h0sE:function(e,t){e.exports='<div class="rec-chat-line" data-ng-init="init()">\n    <div class="noValue" ng-if="empty&&(dialog_content.list.length==0)">\n        <div class="icon">\n            <hc-list-no-data model="{\'data\':[]}" caption="{{\'rec_no_content\'|translate}}"></hc-list-no-data>\n        </div>\n    </div>\n    <div class="chat-line articles">\n        <div>\n            <pro-job-card ng-if="id" pro-id="id"></pro-job-card>\n            <div class="chat-line-main" ng-if="!empty&&(dialog_content.list.length!==0)">\n                <div ng-repeat="_item in dialog_content.list track by $index">\n                    <article-item id=\'article_item_{{_item.id}}\' item="_item" approve-record="approveRecord"\n                                  ng-if="!(recChat.applicant&&_item.public!=0)">\n                    </article-item>\n                </div>\n                <list-next ng-if="dialog_content.list.length!=0" list-controller="dialog_content"></list-next>\n            </div>\n        </div>\n    </div>\n    <rec-chat-box ng-if="recChat" rec-chat="recChat"></rec-chat-box>\n</div>\n'},h9Hr:function(e,t){e.exports='<div class="hc-list-view-card-container" style="{{$ctrl.cardMeta.meta.container_style}}">\n</div>'},hVAX:function(e,t){e.exports='<hc-form-component ng-repeat=\'field in model.groups[0].fields\'\n                   ng-if="field.enabled!=false"\n                   ng-hide="(field.options.hide|typeof)==\'function\'?field.options.hide():field.options.hide"\n                   key="{{ field.key }}"\n                   options=\'field.options\'\n                   ng-form-data="model.data"\n                   component="{{ field.component }}"\n                   label="{{ field.label }}"\n                   placeholder="{{ field.options.placeholder }}"\n                   ng-disabled="field.options.disabled"\n                   style-type="{{ field.options.styleType }}"\n                   show-title="{{field.options.showTitle}}"\n                   attrs=\'field.attrs\'\n                   class="filter-item"\n                   ng-class="field.options.disabled || field.options.readOnly ? \'read-only\':\'\'"\n></hc-form-component>\n'},heSz:function(e,t){e.exports='<div class="address-selector" ng-init="init()">\n    <div class="address">\n        <div class="tag">请输入地址:</div>\n        <div class="district">\n            <div class="input" ng-click="show_selector()">\n                {{data.city?(data.province+\'-\'+data.city):\'省 / 市\'}}\n            </div>\n            <div class="selector" ng-show="selector_show">\n                <div class="province-area">\n                    <div class=\'province tg\' ng-repeat="_p in province_list" ng-click="set_province(_p)"\n                         ng-class="{selected:_p==data.province}">\n                        {{_p}}\n                    </div>\n                </div>\n                <div class="city-area" ng-show="city_list">\n                    <div class=\'city tg\' ng-repeat="_c in city_list" ng-click="set_city(_c)"\n                         ng-class="{selected:_c==data.city}">\n                        {{_c}}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="detail">\n            <input ng-model="data.address" placeholder="请输入地址..." ng-keyup="address_keyup($event)"\n                   ng-disabled="!data.city">\n            <div class="btn" ng-click="geo_address()" role="button">\n                搜索\n            </div>\n            <div class="simple-address-list" ng-if="!has_map&&show_address_list">\n                <span class="address-item" ng-repeat="_a in address_list"\n                      ng-click="setAddressImg(_a,true)">{{_a.name}}</span></div>\n        </div>\n    </div>\n    <div class="geo">经纬度：{{data.geo}}</div>\n    <div class="map" id="address_selector_map"></div>\n</div>\n'},"hjf+":function(e,t){e.exports="<div class=\"component-container\" ng-init=\"init()\" ng-click=\"onClick($event)\">\n    <div class='component-input-inner' ng-class='{placeholder:!model}' ng-disabled='(options.readOnly|valueToFunc)()'>{{model||options.placeholder}}</div>\n</div>"},"i/6X":function(e,t){e.exports='<div class="company-selector" ng-init="init()" i-scroll="company_selector">\n    <div>\n        <div class=\'item tg\' ng-repeat="_item in list" ng-click="select(_item)">\n            <div class="name">{{_item.name}}</div>\n            <div class="alter-data" ng-if="_item.alter_data">{{_item.alter_data}}</div>\n            <div class="go">\n                <div class="icon-hcm-arrow-right"></div>\n            </div>\n        </div>\n    </div>\n</div>'},iJ79:function(e,t){e.exports='<div class="progress-content" ng-if="$ctrl.client === \'pc\'">\n    <div class="icon-close icon-hcm-delete" ng-hide="$dialog.options.hideClose" ng-click="$dialog.dialog_close()"></div>\n    <div class="progress-line">\n        <div class="progress-container">\n            <div class="progress"\n                 ng-style="{width:$dialog.options.params.progress.value+\'%\'}"\n                 ng-class="{\'complete\': $dialog.options.params.progress.value >= 100}"\n            >\n                <div class="process-animation" ng-if="$dialog.options.params.progress.value < 100"></div>\n            </div>\n        </div>\n        <span class="text" ng-if="$dialog.options.params.progress.value < 100">{{$dialog.options.params.progress.value}}%</span>\n        <span class="icon icon-hcm-tick-circle-solid" ng-if="$dialog.options.params.progress.value >= 100"></span>\n    </div>\n    <div class="message">{{$dialog.options.params.progress.message}}</div>\n</div>\n\n<div class="progress-content" ng-if="$ctrl.client === \'mobile\'">\n    <svg>\n        <circle class="progress" cx="85" cy="75" r="60" transform="rotate(-90 80 80)"></circle>\n        <path class="progress-check" d="M3 15.1429L21.2836 33L52 3" ng-if="$dialog.options.params.progress.value >= 100"/>\n        <text x="76" y="82" text-anchor="middle" ng-if="$dialog.options.params.progress.value < 100">\n            <tspan class="progress-text">0</tspan><tspan class="percent">%</tspan>\n        </text>\n    </svg>\n    <div class="message">{{$dialog.options.params.progress.message}}</div>\n</div>'},iJxR:function(e,t){e.exports='<div class="hcm-content-indicator progress" ng-if="show_progress">\n    <div class="progress" ng-style="{width:progress.value+\'%\'}"></div>\n    <div class="message">{{progress.message}}</div>\n</div>'},iOfC:function(e,t){e.exports='<input class="component-input-inner"\n       hc-input-number-parse\n       type=\'number\'\n       placeholder=\'{{options.placeholder}}\'\n       ng-model=\'model\'\n       ng-model-options=\'{debounce:options.change?(options.debounce||300):0}\'\n       ng-focus="onFocus()"\n       ng-blur="onBlur()"\n       ng-disabled=\'(options.readOnly|valueToFunc)()\'\n       msd-wheel="mouse_wheel($event, delta, deltax, deltay)">\n<div class="number-operate minus" ng-class="{\'disabled\':(min!=null && model<=min)||(options.readOnly|valueToFunc)()}" ng-mousedown="minus_down()"\n     ng-mouseup="minus_up()">\n    -\n</div>\n<div class="number-operate add" ng-class="{\'disabled\':(max!=null&& model>=max)||(options.readOnly|valueToFunc)()}" ng-mousedown="add_down()"\n     ng-mouseup="add_up()">+\n</div>\n'},iYR4:function(e,t){e.exports='<div class="employee-selector-dialog">\n    <div class="selector-search-box">\n        <input placeholder="搜索{{current_org.name}}：首字母、全字母、姓名" type="search" autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               spellcheck="false"\n               ng-model="search_key.key"\n               ng-model-options="{\'debounce\':500}"\n        >\n    </div>\n    <div class="selector-content">\n        <div class="search-home"\n             ng-hide="is_org_show||search_key.key!=\'\'">\n            <div class="list-plugin">\n                <div class="list-plugin-item tg" ng-click="show_depart(top_org.id)">\n                    <div class="icon">\n                        <div class="icon-organizational"></div>\n                    </div>\n                    <div class="content">\n                        <div class="name">{{top_org.name}}</div>\n                        <div class="desc">组织架构</div>\n                    </div>\n                    <div class="icon-hcm-arrow-right tag"></div>\n                </div>\n            </div>\n            <div class="list-banner">常用联系人</div>\n            <div class="list-person">\n                <div class="list-person-item tg" ng-repeat="_e in search_history track by $index"\n                     ng-click="select(_e)">\n                    <div class="icon">\n                        <img ng-src="{{_e.photo|hcPhoto:46}}">\n                    </div>\n                    <div class="content">\n                        <div class="name">{{_e.name}}</div>\n                        <div class="desc">{{_e.department}}-{{_e.job_title}}</div>\n                    </div>\n                    <div class="select-oper"\n                         ng-class="{\'blue icon-check-circle-2\':selected_id.indexOf(_e.id)>-1,\'gray icon-check-circle-2\':pre_selected_id.indexOf(_e.id)>-1}"></div>\n                </div>\n            </div>\n\n        </div>\n        <div class="search-org" ng-show="is_org_show&& search_key.key==\'\'">\n            <div class="org-bread">\n                <div>\n                    <span class="org-bread-item tg" ng-click="show_home()">最近</span>\n                    <span ng-repeat="_t in org_bread"\n                          ng-click="show_depart(_t.id)">\n                            <span class="org-bread-tag icon-hcm-arrow-right"></span>\n                            <span class="org-bread-item tg">{{_t.name}}</span>\n                        </span>\n                </div>\n            </div>\n            <div ng-show="is_org_loading && !current_org.id" class="next">加载中...</div>\n            <div ng-hide="is_org_loading">\n                <div class="list-banner" ng-show="current_org.employee_list.length>0">\n                    直属员工\n                    <div class="select-all" ng-hide=$scope.is_multi_select||true ng-click="select_all()">全选</div>\n                </div>\n                <div class="org-person-list list-person">\n                    <div class="list-person-item tg" ng-repeat="_e in current_org.employee_list"\n                         ng-click="select(_e)">\n                        <div class="icon">\n                            <img ng-src="{{_e.photo|hcPhoto:46}}">\n                        </div>\n                        <div class="content">\n                            <div class="name">{{_e.name}}</div>\n                            <div class="desc">{{_e.department}}-{{_e.job_title}}</div>\n                        </div>\n                        <div class="select-oper"\n                             ng-class="{\'blue icon-check-circle-2\':selected_id.indexOf(_e.id)>-1,\'gray icon-check-circle-2\':pre_selected_id.indexOf(_e.id)>-1}"></div>\n                    </div>\n                </div>\n                <div class="list-banner" ng-show="current_org.child_list.length>0">下级部门</div>\n                <div class="list-org">\n                    <div class="list-org-item tg" ng-repeat="_p in current_org.child_list"\n                         ng-click="show_depart(_p.id)">\n                        <div class="content">{{_p.name}}</div>\n                        <div class="icon-hcm-arrow-right tag"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="search-result list-person" ng-show="search_key.key!=\'\'">\n            <div>\n                <div ng-hide="is_group_select">\n                    <div class="list-person-item tg" ng-repeat="_e in search_result.list"\n                         ng-click="select(_e)">\n                        <div class="icon">\n                            <img ng-src="{{_e.photo|hcPhoto:64}}">\n                        </div>\n\n                        <div class="content">\n                            <div class="name">{{_e.name}}</div>\n                            <div class="position">{{_e.department}}-{{_e.job_title}}</div>\n                        </div>\n                        <div class="select-oper"\n                             ng-class="{\'blue icon-check-circle-2\':selected_id.indexOf(_e.id)>-1,\'gray icon-check-circle-2\':pre_selected_id.indexOf(_e.id)>-1}"></div>\n                    </div>\n                    <list-next list-controller="search_result"></list-next>\n                </div>\n                <div ng-show="is_group_select">\n                    <div ng-repeat="_c in group_search_data.list" class="group-selector-item tg"\n                         ng-click="group_select(_c)">\n                        <div class="group-photo">\n                            <img ng-repeat="_p in _c.members_photo track by $index" ng-src="{{_p|hcPhoto:46}}">\n                        </div>\n                        <div class="content">\n                            {{_c.name}}\n                            <span class="desc"></span>\n                        </div>\n                        <div class="select-oper blue icon-check-circle-2"\n                             ng-show="selected_group.id==_c.id"></div>\n                    </div>\n                    <list-next list-controller="group_search_data"></list-next>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="selected-area" ng-show="selected.length>0&&!single_select">\n        <div ng-repeat="_selected in selected" ng-click="un_select(_selected)">\n            <img ng-src="{{_selected.photo|hcPhoto:40}}">\n        </div>\n    </div>\n</div>'},iioW:function(e,t){e.exports='<input class="component-input-inner" style="text-align: center !important;"\n    hc-input-number-parse\n    type=\'number\'\n    placeholder=\'{{(options.readOnly|valueToFunc)()?"":((options.placeholder|valueToFunc)() || placeholder)}}\'\n    ng-model=\'model\'\n    ng-model-options=\'{debounce: options.debounce || (options.change ? 300 : 0 )}\'\n    ng-focus="onFocus($event)"\n    ng-blur="onBlur()"\n    ng-disabled=\'(options.readOnly|valueToFunc)()\'\n    ng-keyup="keyup($event)"\n    ng-keydown="keydown($event)"\n    msd-wheel=\'mouse_wheel($event)\'\n    ng-style="borderStyle">\n\n\n<div class="number-operate minus" ng-hide="(options.readOnly|valueToFunc)()" ng-class="{\'disabled\': !candown}" ng-mousedown="minus_down()"\n    ng-mouseup="minus_up()">\n    -\n</div>\n<div class="number-operate add" ng-hide="(options.readOnly|valueToFunc)()" ng-class="{\'disabled\': !canup}" ng-mousedown="add_down()"\n    ng-mouseup="add_up()">+\n</div>\n'},iok0:function(e,t,n){var i=function(){return new Promise((function(e){Promise.all([n.e(0),n.e(5)]).then(function(){n("Tntj"),n("05iN"),n("Ox9h"),n("Tntj"),n("JKeq"),n("rPov"),n("M2Po"),n("unQz"),n("M4TD"),n("ayTx"),n("MJAE"),n("0jYZ"),n("dl01"),n("dl01"),n("BHv9"),n("Tntj"),n("H2rB"),n("MgdC"),n("Ddb1"),n("m61M"),n("+g8y"),n("0q6J"),n("f6t2"),n("UJSp"),n("3JcS"),n("JpsE"),n("Ddb1"),n("m61M"),n("ZxEw"),n("3JcS"),n("zT1q"),n("118W"),n("b5Gb"),n("Q53Y"),n("62Ne"),n("Q53Y"),n("62Ne"),n("rHDc"),n("rHDc"),n("K6BF"),n("ATYp"),n("quJj"),n("Vpcy"),n("DQVN"),n("DQVN"),n("T7vg"),n("e7io"),n("7R/D"),e({"./model_list/template.html":n("UAnq"),"./model_info/template.html":n("xCdw"),"./model_info_anonymous/template.html":n("S2XL"),"./model_list/template.html":n("UAnq"),"./model-dataset/model-dataset.template.html":n("OPfY"),"./model_list/template.html":n("UAnq"),"./model_stat/template.html":n("OZau"),"./model_list_report/template.html":n("VxB3"),"./model_list/template.html":n("UAnq"),"./model_list/template.html":n("UAnq"),"./model_list/template.html":n("UAnq"),"./model_list/template.html":n("UAnq"),"./model_search_list/template.html":n("fVuE"),"./model_search_list/template.html":n("fVuE"),"./model_list/template.html":n("UAnq"),"./model_list/template.html":n("UAnq"),"./model_view/template.html":n("Qbqs"),"./model_list/template.html":n("UAnq"),"./model_view/single/template.html":n("2ega"),"./model_info/template.html":n("xCdw"),"./model_view/template.html":n("Qbqs"),"./model_list/template.html":n("UAnq"),"./model_info/template.html":n("xCdw"),"./model_view/template.html":n("Qbqs"),"./model_view/base/template.html":n("6ixm"),"./model_view/multi/template.html":n("Fwbl"),"./model_view/single/template.html":n("2ega"),"./model_info/template.html":n("xCdw"),"../../service/base/report/board-report/board-report.template.html":n("GC9z"),"./model_view/base/template.html":n("6ixm"),"./model_single_view/template.html":n("uyD9"),"./base/multi_view_nav/template.html":n("/jWc"),"./model_waterfall_view/template.html":n("1Wqb"),"./base/multi_view_nav/template.html":n("/jWc"),"./model_waterfall_view/template.html":n("1Wqb"),"./base/multi_view_nav/template.html":n("/jWc"),"./model_waterfall_view/template.html":n("1Wqb"),"./model_view_anonymous/template.html":n("MPcv"),"./model_view_anonymous/template.html":n("MPcv"),"./base/hcm_import/template.html":n("55Hk"),"./model_submit/template.html":n("9URQ"),"./model_submit/success_submit/template.html":n("HSUd"),"../../service/base/multi_view/template.pc.html":n("dNwM"),"./base-board/template.html":n("M0n3"),"./base-board/template.html":n("M0n3"),"./super_search/template.html":n("C4AZ"),"./error_message/template.html":n("fLlG"),"./login_component_register/template.html":n("IUXe")})}.bind(null,n)).catch(n.oe)}))},o=function(e){return function(){return new Promise((function(t){return i().then((function(n){t(n[e])}))}))}},a={moduleLoader:["$ocLazyLoad",function(e){return new Promise((function(t){return i().then((function(n){e.load({name:"myApp"}),t()}))}))}]};e.exports=function(e){e.state("common_model_list",{name:"common_model_list",url:"/common_model_list?model&filter_str&filter_dict&page_index&page_size&template&meta_state&advance_filter_dict&show_fields_key&auto_add&biz_type&custom_params&meta_params&query_str&base_object_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelListController",role:"user",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_info",{name:"common_model_info",url:"/common_model_info?model&meta_state&mode&id&base_object_str&init_data&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelInfoController",role:"user",templateProvider:o("./model_info/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_info_anonymous",{name:"common_model_info_anonymous",url:"/common_model_info_anonymous?model&meta_state&mode&id&base_object_str&init_data&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelInfoAnonymousController",role:"hcmcompany",templateProvider:o("./model_info_anonymous/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("model_list",{name:"model_list",url:"/model_list/:model?filter_str&filter_dict&page_index&page_size&template&meta_state&advance_filter_dict&show_fields_key&auto_add&biz_type&custom_params&meta_params&query_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelListController",role:"user",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_dataset",{name:"common_model_dataset",url:"/common_model_dataset?model&filter_str&page_index&page_size&meta_state&advance_filter_dict&advance_plan_id&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelDatasetCtrl",role:"user",templateProvider:o("./model-dataset/model-dataset.template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_aggr",{name:"common_model_aggr",url:"/common_model_aggr?model&filter_str&page_index&page_size&meta_state&advance_filter_dict&advance_plan_id&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelAggrCtrl",role:"user",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_stat",{name:"common_model_stat",url:"/common_model_stat?model&filter_str&filter_dict&page_index&page_size&meta_state&advance_filter_dict&show_fields_key&biz_type&custom_params&meta_params&query_str&base_object_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelStatCtrl",role:"user",templateProvider:o("./model_stat/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_list_report",{name:"common_model_list_report",url:"/common_model_list_report?model&filter_str&filter_dict&page_index&page_size&meta_state&advance_filter_dict&show_fields_key&biz_type&custom_params&meta_params&query_str&base_object_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelListReportCtrl",role:"user",templateProvider:o("./model_list_report/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_list",{name:"common_model_view_list",url:"/common_model_view_list?model&filter_str&filter_dict&page_index&page_size&template&meta_state&advance_filter_dict&show_fields_key&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelViewListController",role:"emp",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_tree_list",{name:"common_model_tree_list",url:"/common_model_tree_list?model&filter_str&filter_dict&page_index&page_size&template&meta_state&tree&tree_id&tree_filter_mode&advance_filter_dict&show_fields_key&custom_params&meta_params&query_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelTreeListController",role:"emp",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_category_list",{name:"common_model_category_list",url:"/common_model_category_list?model&filter_str&filter_dict&page_index&page_size&template&meta_state&category_field&category_id&advance_filter_dict&custom_params&meta_params&query_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelCategoryListController",role:"emp",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_category_tree_list",{name:"common_model_category_tree_list",url:"/common_model_category_tree_list?model&filter_str&filter_dict&page_index&page_size&template&meta_state&category_field&category_id&advance_filter_dict&custom_params&meta_params&tree&tree_id&tree_filter_mode&show_fields_key&query_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelCategoryTreeListController",role:"emp",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_search_list",{name:"common_model_search_list",url:"/common_model_search_list?model&filter_str&filter_dict&page_index&page_size&meta_state&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelSearchListController",role:"emp",templateProvider:o("./model_search_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_search_list_anonymous",{name:"common_model_search_list_anonymous",url:"/common_model_search_list_anonymous?model&filter_str&filter_dict&page_index&page_size&meta_state&custom_params",parent:"main_no_header",controller:"CommonModelSearchListController",role:"hcmcompany",templateProvider:o("./model_search_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_category_list_anonymous",{name:"common_model_category_list_anonymous",url:"/common_model_category_list_anonymous?model&filter_str&filter_dict&page_index&page_size&template&meta_state&category_field&category_id&advance_filter_dict&custom_params&meta_params&query_str",parent:"main_no_header",controller:"CommonModelCategoryListAnonymousController",role:"hcmcompany",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_list_anonymous",{name:"common_model_list_anonymous",url:"/common_model_list_anonymous?model&filter_str&filter_dict&page_index&page_size&template&meta_state&advance_filter_dict&show_fields_key&auto_add&biz_type&custom_params&meta_params&query_str&base_object_str",parent:"main_no_header",controller:"CommonModelListController",role:"hcmcompany",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav",{name:"common_model_nav",url:"/common_model_nav?model&id&nav_state&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelNavController",role:"emp",templateProvider:o("./model_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_multi",{name:"common_model_nav_multi",url:"/multi?c_model&caption&meta_state&advance_filter_dict&parent_field&c_custom_params&meta_params&key&query_str&show_mobile_menu",parent:"common_model_nav",controller:"CommonModelNavMultiController",role:"emp",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_single",{name:"common_model_nav_single",url:"/single?c_model&parent_field&caption&meta_state&state&biz_type&base_object_str&key&c_custom_params",parent:"common_model_nav",controller:"CommonModelViewSingleController",role:"emp",templateProvider:o("./model_view/single/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_info",{name:"common_model_nav_info",url:"/info?c_model&form_data&caption&meta_state&advance_filter_dict&parent_field&c_custom_params&base_object_str&key",parent:"common_model_nav",controller:"CommonModelNavInfoController",role:"emp",templateProvider:o("./model_info/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_anonymous",{name:"common_model_nav_anonymous",url:"/common_model_nav_anonymous?model&id&nav_state&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelNavAnonymousController",role:"hcmcompany",templateProvider:o("./model_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_multi_anonymous",{name:"common_model_nav_multi_anonymous",url:"/multi?c_model&caption&meta_state&advance_filter_dict&parent_field&c_custom_params&meta_params&key&query_str",parent:"common_model_nav_anonymous",controller:"CommonModelNavMultiAnonymousController",role:"hcmcompany",templateProvider:o("./model_list/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_nav_info_anonymous",{name:"common_model_nav_info_anonymous",url:"/info?c_model&form_data&caption&meta_state&advance_filter_dict&parent_field&c_custom_params&base_object_str&key",parent:"common_model_nav_anonymous",controller:"CommonModelNavInfoAnonymousController",role:"hcmcompany",templateProvider:o("./model_info/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view",{name:"common_model_view",url:"/common_model_view?model&id&appoint_id&nav_state&custom_params&meta_params&main_object_str&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelViewController",role:"emp",templateProvider:o("./model_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_base",{name:"common_model_view_base",url:"/base?meta_state&biz_type&key&c_custom_params&base_object_str",parent:"common_model_view",controller:"CommonModelViewBaseController",role:"emp",templateProvider:o("./model_view/base/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_multi",{name:"common_model_view_multi",url:"/multi?c_model&parent_field&appoint&caption&biz_type&meta_state&advance_filter_dict&base_object_str&key&c_custom_params&query_str",parent:"common_model_view",controller:"CommonModelViewMultiController",role:"emp",templateProvider:o("./model_view/multi/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_single",{name:"common_model_view_single",url:"/single?c_model&parent_field&caption&meta_state&state&biz_type&base_object_str&key&c_custom_params",parent:"common_model_view",controller:"CommonModelViewSingleController",role:"emp",templateProvider:o("./model_view/single/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_info",{name:"common_model_view_info",url:"/info?c_model&c_id&caption&meta_state&advance_filter_dict&parent_field&c_custom_params&base_object_str&key",parent:"common_model_view",controller:"CommonModelNavInfoController",role:"emp",templateProvider:o("./model_info/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_view_board_report",{name:"common_model_view_board_report",url:"/board-report?number&filter&advance_filter_dict&custom_api&custom_api_params&params&multi_view_key&multi_view_ids&multi_view_options&domain&key",parent:"common_model_view",controller:"HCMBoardReportController",role:"emp",templateProvider:o("../../service/base/report/board-report/board-report.template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("model_view",{name:"model_view",url:"/model_view?model&id&base_object_str&advance_filter_dict&meta_state&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelViewBaseController",role:"emp",templateProvider:o("./model_view/base/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_single_view",{name:"common_model_single_view",url:"/common_model_single_view?model&meta_state&id&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelSingleViewController",role:"emp",templateProvider:o("./model_single_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_multi_nav",{name:"common_model_waterfall_multi_nav",parent:"main",controller:"WaterfallMultiNavCtrl",role:"emp",templateProvider:o("./base/multi_view_nav/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_view",{name:"common_model_waterfall_view",url:"/common_model_waterfall_view?model&id&appoint_id&nav_state&advance_filter_dict&custom_params&meta_params&main_object_str&meta_state&multi_view_key&parent_field",parent:"common_model_waterfall_multi_nav",controller:"CommonModelWaterfallViewController",role:"emp",templateProvider:o("./model_waterfall_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_multi_nav_anonymous_no_header",{name:"common_model_waterfall_multi_nav_anonymous_no_header",parent:"main_no_header",controller:"WaterfallMultiNavAnonymousCtrl",role:"hcmcompany",templateProvider:o("./base/multi_view_nav/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_view_anonymous_no_header",{name:"common_model_waterfall_view_anonymous_no_header",url:"/common_model_waterfall_view_anonymous_no_header?model&id&appoint_id&nav_state&advance_filter_dict&custom_params&meta_params&main_object_str&meta_state&multi_view_key&multi_view_ids&parent_field",parent:"common_model_waterfall_multi_nav_anonymous_no_header",controller:"CommonModelWaterfallViewAnonymousController",role:"hcmcompany",templateProvider:o("./model_waterfall_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_multi_nav_anonymous",{name:"common_model_waterfall_multi_nav_anonymous",parent:"main",controller:"WaterfallMultiNavAnonymousCtrl",role:"hcmcompany",templateProvider:o("./base/multi_view_nav/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_waterfall_view_anonymous",{name:"common_model_waterfall_view_anonymous",url:"/common_model_waterfall_view_anonymous?model&id&appoint_id&nav_state&advance_filter_dict&custom_params&meta_params&main_object_str&meta_state&multi_view_key&multi_view_ids&parent_field",parent:"common_model_waterfall_multi_nav_anonymous",controller:"CommonModelWaterfallViewAnonymousController",role:"hcmcompany",templateProvider:o("./model_waterfall_view/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_single_view_anonymous",{name:"common_model_single_view_anonymous",url:"/common_model_single_view_anonymous?model&id&base_object_str&advance_filter_dict&meta_state",parent:"main_no_header",controller:"CommonModelViewBaseAnonymousController",role:"hcmcompany",templateProvider:o("./model_view_anonymous/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("model_view_anonymous",{name:"model_view_anonymous",url:"/model_view_anonymous?model&id&base_object_str&advance_filter_dict&meta_state&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelViewBaseAnonymousController",role:"hcmcompany",templateProvider:o("./model_view_anonymous/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("hcm_import",{name:"hcm_import",url:"/hcm_import?category&state&time_stamp&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"HCMImportCtrl",role:"emp",templateProvider:o("./base/hcm_import/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_no_login_submit",{name:"common_model_no_login_submit",url:"/common_model_no_login_submit?model&meta_state",controller:"CommonModelSubmitCtrl",role:"company",templateProvider:o("./model_submit/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("success_submit",{name:"success_submit",url:"/success_submit",controller:"SuccessSubmitCtrl",role:"company",templateProvider:o("./model_submit/success_submit/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_model_multi_view_list",{name:"common_model_multi_view_list",url:"/common_model_multi_view_list?model&id&meta_state&lowerEmpList&multi_view_key&viewList&custom_params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonModelMultiViewController",role:"emp",templateProvider:o("../../service/base/multi_view/template.pc.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_board_view",{name:"common_board_view",url:"/common_board_view?board_category&params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"commonBaseBoardController",role:"emp",templateProvider:o("./base-board/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_board_view_anonymous",{name:"common_board_view_anonymous",url:"/common_board_view_anonymous?board_category&params&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"commonBaseBoardController",role:"hcmcompany",templateProvider:o("./base-board/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("common_super_search",{name:"common_super_search",url:"/common_super_search?keywords&position_status_ids&on_job&page_index&page_size&meta_state&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"CommonSuperSearchController",role:"emp",templateProvider:o("./super_search/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("error_message",{name:"error_message",url:"/error_message?error_code&_menu_id&nav_model&nav_meta_state",parent:"main",controller:"ErrorMessageController",role:"emp",templateProvider:o("./error_message/template.html"),resolve:a,controllerAs:"$ctrl"}),e.state("login_component_register",{name:"login_component_register",url:"/login_component_register?app_type&next&extra_property",parent:"main_no_header",controller:"LoginComponentRegister",role:"hcmcompany",templateProvider:o("./login_component_register/template.html"),resolve:a,controllerAs:"$ctrl"})}},irzn:function(e){e.exports=JSON.parse('{"fields":[{"key":"key","label":"标识","component":"hc-input","options":{"width":"col-6","required":true,"singleLine":true,"placeholder":"请输入数据块标识"}},{"key":"name","label":"名称","component":"hc-input","options":{"singleLine":true,"width":"col-6","placeholder":"请输入数据块名称","required":true}},{"key":"type","label":"取数模式","component":"hc-input-radio","options":{"singleLine":true,"default":"multi","width":"col-6","items_inline":true,"required":true,"list":[{"value":"single","name":"单行"},{"value":"multi","name":"多行"}]}},{"key":"relations","label":"关联关系定义","component":"hc-input-mask","mode":"block","options":{"singleLine":true,"width":"col-12","placeholder":"请输入关联关系"}},{"key":"filter_dict","label":"过滤设置","component":"hc-input-json","mode":"block","options":{"singleLine":true,"width":"col-12","placeholder":"请输入过滤条件"}},{"key":"sorts","label":"排序字段","component":"hc-input-tag","options":{"singleLine":false,"width":"col-12","placeholder":"新增排序","required":false}}]}')},j2Oo:function(e,t){e.exports='<div class="hc-dataset" ng-if="model.data" ng-init="init()">\n    <div class="search-area">\n        <input type="search"\n               data-ng-model="model.keyword"\n               placeholder="{{\'common_filter_panel_setting_dialog_placeholder\'|translate}}"\n               data-ng-keypress="search_key_press($event)">  \x3c!--输入关键字搜索--\x3e\n        <span data-ng-click="search_click()" class="search-icon icon-hcm-check"></span>\n    </div>\n    <div class="category"\n         ng-repeat="_category in model.data track by $index">\n        <div class="node-category" ng-click="model.$expandNode(_category)">\n            <div class="arrow-icon"\n                 ng-class="_category.expand ? \'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"></div>\n            <div class="" ng-if="model.mode!=\'drag\'"\n                 ng-class="_category.selectAll\n                     ?\'sys-color icon-hcm-click-rectangle-radius-solid\'\n                     :\'icon-hcm-none-rectangle-radius\'"\n                 ng-click="operateFieldBatch($event,_category)"></div>\n            <div class="sys-color icon"\n                 ng-class="_category.expand ? \'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></div>\n            <div class="name">{{ _category.name }}</div>\n        </div>\n        <div data-ng-sortable="dataset_config">\n            <div class="node-field" data-ng-repeat="_field in _category[\'fields\'] track by $index"\n                 ng-if="_category.expand"\n                 data-ng-class="model.$isSelected(_field)?\'selected\':\'to-select\'"\n                 ng-click="operateField(_field,_category)">\n                <div class="" ng-if="model.mode!=\'drag\'"\n                     ng-class="isNodeSelected(_field)\n                         ?\'sys-color icon-hcm-click-rectangle-radius-solid\'\n                         :\'icon-hcm-none-rectangle-radius\'">\n                </div>\n                <div class="{{field_type[_field[\'data_type\']||_field[\'options\'][\'data_type\']][\'icon\']||\'icon-list-pending\'}} sys-color icon"></div>\n                <div class="name" hc-title="{{_field.label}}" options="{mode: \'tip\', showOnOverflow: true}">{{ _field.label }}</div>\n                <div ng-if="model.operate_icon" class="operate-icon-container">\n                    <div class="operate-icon {{model.operate_icon}}"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},j5MU:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));n("rB9j"),n("Rm1S"),n("EnZy");var i=n("ZbhI"),o=n.n(i),a=n("mrSG");function l(){var e,t,n=document.createElement("div");try{for(var i=Object(a.i)(["","-webkit-","-ms-","-moz-","-o-"]),o=i.next();!o.done;o=i.next()){var l=o.value;if(n.style.position=l+"sticky",""!==n.style.position)return!0}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!1}function r(){var e=window.navigator.userAgent,t=function(t){return o()(e).call(e,t)>=0},n="ActiveXObject"in window;return t("MSIE")||n?"IE":t("Firefox")&&!n?"Firefox":t("Chrome")&&!n?"Chrome":t("Opera")&&!n?"Opera":t("Safari")&&!n?"Safari":void 0}function c(){var e=window.navigator.userAgent.toLowerCase();return window.ActiveXObject||"ActiveXObject"in window?o()(e).call(e,"msie")>=0?{type:"IE",version:e.match(/msie ([\d.]+)/)[1].split(".")[0]}:{type:"IE",version:"11"}:o()(e).call(e,"firefox")>=0?{type:"Firefox",version:e.match(/firefox\/([\d.]+)/)[1].split(".")[0]}:o()(e).call(e,"chrome")>=0?{type:"Chrome",version:e.match(/chrome\/([\d.]+)/)[1].split(".")[0]}:o()(e).call(e,"opera")>=0?{type:"Opera",version:e.match(/opera.([\d.]+)/)[1].split(".")[0]}:o()(e).call(e,"safari")>=0?{type:"Safari",version:e.match(/version\/([\d.]+)/)[1].split(".")[0]}:o()(e).call(e,"app/tencent_wemeet")>=0?{type:"TencentMeeting",version:e.match(/app_version\/([\d.]+)/)[1].split(".")[0]}:void 0}},j6Mp:function(e,t){e.exports='<div>\n    <li class="hc-input-check" ng-repeat="_item in list"\n        ng-class="{\n            \'hc-input-check-item-single\':options.items_inline,\n            \'is-selected\': isChecked(_item.value),\n            \'is-readonly\':isChecked(_item.value) && (options.readOnly|valueToFunc)()\n        }" ng-model="model">\n        <span ng-click="updateSelection($event,_item.value)">\n          <input type="checkbox" ng-checked="isChecked(_item.value)" ng-disabled="(options.readOnly|valueToFunc)()"\n                 id="{{_item.value}}" class="hc-input-checkbox"/>\n          <label for="{{_item.value}}" ng-click="preventEvent($event)" ng-class="{\'disabled\': (options.readOnly|valueToFunc)()}"\n                 class="icon {{isChecked(_item.value)?\'active icon-hcm-click-rectangle-radius-solid\':\'icon-hcm-none-rectangle-radius\'}}">\n          </label>\n            <span ng-if="!options.mark_down" class="item-name" ng-style="isChecked(_item.value)? (options.styles|valueToFunc)(model):null">{{_item.name}}</span>\n            <hc-mark-down ng-if="options.mark_down" class="item-name-md" ng-model="_item.name" data-options="{mode:\'view\'}"></hc-mark-down>\n         </span>\n    </li>\n</div>\n'},jGHe:function(e,t){e.exports='<div ng-init="init()" class="calendar">\n    <div class="content-title">\n        <div ng-click="go_prev()" class="tg icon-hcm-arrow-left"></div>\n        <div class="title-content">\n            {{config.date|dateFormat:"yyyy年-MM月"}}\n        </div>\n        <div ng-click="go_next()" class="tg icon-hcm-arrow-right"></div>\n    </div>\n    <table cellspacing="0">\n        <thead>\n        <tr>\n            <td>日</td>\n            <td>一</td>\n            <td>二</td>\n            <td>三</td>\n            <td>四</td>\n            <td>五</td>\n            <td>六</td>\n        </tr>\n        </thead>\n        <tbody class="calendar-body">\n        <tr ng-repeat="_index in [0,1,2,3,4,5].slice(0,dates.length/7) track by $index">\n            <td ng-repeat="_date in dates.slice(7*_index,7*(_index+1)) track by $index">\n                <div ng-show="_date.select && _date.curr_month" class="appoint-num">{{_date.appoint_num.num}}</div>\n                <div ng-show="_date.select && _date.curr_month" class="appoint-modify icon icon-hcm-set" ng-click="date_edit(_date)"></div>\n                <div ng-click="cell_select(_date)" class="calendar-day" ng-class="{\'disabled\':!_date.curr_month, \'selected\':(_date.select && _date.curr_month)}">\n                    {{_date.date|dateFormat:"d"}}\n                </div>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n'},jQuF:function(e,t){e.exports='<div class="component-container hc-input-upload" ng-init="init()" ng-mouseover="showPreview()"\n     ng-mouseleave="hidePreview()">\n    <div class="frame">\n        <span ng-if="options.type==\'file\'&&file.classtype" class="file-icon"\n              ng-class="{\'excel\':\'icon-hcm-attachment-excel excel\',\'word\':\'icon-hcm-attachment-word word\',\'ppt\':\'icon-hcm-attachment-ppt ppt\',\'pdf\':\'icon-hcm-attachment-pdf pdf\'}[file.classtype]"></span>\n        <input class="component-input-inner" ng-class="{\'haveData\':file.source_name}" type="text" disabled="disabled"\n               placeholder="当前未上传"\n               ng-model="file.source_name"/>\n    </div>\n    <div class="operate-btn">\n        <div ng-repeat="item in initBtn" class="icon" ng-class="item.icon" ng-show="item.show"\n             ng-click="operatefuc[item.key]()"\n        ></div>\n    </div>\n    <div class="preview-box" ng-show="show_preview">\n        <canvas class="previewCanvas"></canvas>\n    </div>\n</div>'},jfXt:function(e,t){e.exports='<div class="hc-form hc-view">\n    <span\n        class="shadow-switch"\n        ng-if="$ctrl.model.viewMeta.view_config.enableShadow"\n        ng-click="$ctrl.toggleShadow()"\n        ng-class="{\n            \'icon-hcm-view\': $ctrl.shadowState === true,\n            \'icon-hcm-view-slash\': $ctrl.shadowState === false\n        }"\n    ></span>\n    <div class="view-card" ng-if="$ctrl.model.viewMeta.view_config.tipsCard.target.includes($root.client)">\n        <div class="view-success">\n            <div class="locate-success-icon {{$ctrl.model.viewMeta.view_config.tipsCard.icon}}"\n                 ng-style="$ctrl.model.viewMeta.view_config.tipsCard.iconStyle"\n            ></div>\n            <div class="success-tip"\n                 ng-style="$ctrl.model.viewMeta.view_config.tipsCard.contentStyle"\n            >{{$ctrl.model.viewMeta.view_config.tipsCard.content}}</div>\n        </div>\n    </div>\n    <div ng-if="$ctrl.model.viewMeta.view_config.group_tab" class="tabs-container">\n        <hc-tabs\n            value="$ctrl.model.currentTab"\n            on-value-change="$ctrl.onTabsValueChange">\n            <hc-tab-pane\n                ng-repeat="_group in $ctrl.model.viewMeta.groups track by $index"\n                ng-if="!$ctrl.allFieldHide(_group)"\n                label="_group.label || \'未分组\'"\n                name="_group.key || \'未分组\'"\n                hide-count="true"\n                is-selected-new-style=true\n            ></hc-tab-pane>\n        </hc-tabs>\n    </div>\n\n    <div ng-repeat="_group in $ctrl.model.viewMeta.groups track by $index"\n         ng-if="!$ctrl.allFieldHide(_group) && !($ctrl.model.viewMeta.view_config.view === \'flex\')"\n         ng-hide="$ctrl.model.viewMeta.view_config.group_tab && (_group.key ? ($ctrl.model.currentTab ? $ctrl.model.currentTab !== _group.key: ($index===0)) : $ctrl.model.currentTab !== \'未分组\' )"\n         class="hc-form-group"\n         key="{{_group.key}}"\n    >\n        <div class="title"\n             ng-if="$ctrl.client === \'pc\' && !$ctrl.model.viewMeta.view_config.group_tab && _group.label && !(_group[\'hide\']|valueToFunc)()"><span\n            class="arrow"\n            ng-init="_group.fold=_group.default_fold"\n            ng-class="{\n                        \'icon-hcm-arrow-down-solid\': !_group.fold,\n                        \'icon-hcm-arrow-right-solid\': _group.fold\n                     }"\n            ng-click="_group.fold = !_group.fold"\n            ng-if="!$ctrl.model.viewMeta.view_config.tableView"></span>\n            <li class="label">{{ _group.label }}</li>\n        </div>\n        <div class="title"\n             ng-if="$ctrl.client === \'mobile\' && !$ctrl.model.viewMeta.view_config.group_tab && _group.label && !(_group[\'hide\']|valueToFunc)()"\n             ng-click="_group.fold = !_group.fold">\n            <li class="label">{{ _group.label }}</li>\n            <span class="mobile-arrow"\n                  ng-init="_group.fold=_group.default_fold"\n                  ng-class="{\n                       \'icon-hcm-arrow-down\': !_group.fold,\n                       \'icon-hcm-arrow-up\': _group.fold\n                  }"\n                  ng-if="!$ctrl.model.viewMeta.view_config.tableView"></span>\n        </div>\n        <div class="content hc-row "\n             ng-style="{\'display\':_group.fold?\'none\': $root.client===\'mobile\'? \'block\' : \'flex\'}">\n            <div ng-repeat=\'field in _group.fields\'\n                 key="{{ field.key }}"\n                 class="hc-form-field {{field.width||\'col-6\'}}"\n                 ng-class="{\'single-line\': $root.client===\'mobile\'\n                                              ?[true,undefined].includes(field.options.singleLine)\n                                              :field.options.singleLine&&!$ctrl.model.viewMeta.view_config.alwaysShowLabel,\n                             \'icon\': field.icon,\'split\':$root.client===\'mobile\'&&(field.options||{}).split,\n                             \'show-label\': $ctrl.model.viewMeta.view_config.alwaysShowLabel,\n                            \'table-view\': $ctrl.model.viewMeta.view_config.tableView,\n                            \'first\': $ctrl.model.viewMeta.view_config.tableView && $index===0,\n                            \'is-dirty\':$ctrl.isDirty(field,$ctrl.model.dirty),\n                            \'dirty-diff\': $ctrl.model.viewMeta.view_config.diffDirty,\n                            \'no-label\': !field.label,\n                            \'modi\': $ctrl.model.modiMeta.length && field.modi && ($ctrl.client === \'pc\' || ($ctrl.client === \'mobile\' && $ctrl.model.state === \'modify\')),\n                            \'modi-disable\': $ctrl.model.modiMeta.length && !field.modi && ($ctrl.client === \'pc\' || ($ctrl.client === \'mobile\' && $ctrl.model.state === \'modify\')),\n                            \'form-field-notify\': $ctrl.model.valid_error_key === field.key\n                            }"\n                 ng-style="{\'background\':field.options.background}"\n                 ng-if="!(field[\'meta_disabled\']||((field[\'hide\']||field.options[\'hide\'])|valueToFunc)())">\n\n                <div\n                    ng-if="[\'markdown\',\'field-list\', \'internal-code\',\'train-learn\',\'recruit-job\',\'code-train\', \'recruit-job-label\', \'perf-target-detail-title\', \'slider\', \'mce\'].indexOf(field.type)<0"\n                    class="hc-form-label gray {{$ctrl.model.viewMeta.view_config.label_class}}">\n                    <span ng-class="field.icon" ng-if="field.icon"></span>\n                    <span ng-if="!field.icon||$ctrl.model.viewMeta.view_config.alwaysShowLabel" ng-bind-html="field.label|toTrusted"></span>\n                    <span ng-if="(field.options||{}).tip" class="tip icon icon-hcm-question" hc-title="{{field.options.tip}}" options="{\'mode\': \'tip\',\'seconds\': 0, \'direction\': \'column\', \'mobile\': true}"></span>\n                </div>\n\n                \x3c!--普通模式--\x3e\n                <div\n                    ng-if="[\'file\',\'markdown\',\'textarea\',\'photo\',\'pdf-preview\',\'primary-photo\',\'field-list\',\'tag\', \'internal-code\', \'custom-action\',\'simple-chart\',\'train-learn\', \'hc-qrcode\', \'recruit-job\',\'code-train\', \'recruit-job-label\', \'perf-target-detail-title\', \'slider\', \'mce\'].indexOf(field.type)<0&&(!field.component)"\n                    class="hc-form-control"\n                    ng-dblclick="$ctrl.client === \'pc\' && $ctrl.setFieldModify(field,$event)"\n                    ng-click="$ctrl.fieldClick($ctrl.model.data,field,$event)"\n                    ng-style="{color:\'#\'+(field.options||{}).color}">\n                    <span class="text" ng-if="$ctrl.model.viewMeta.view_config.diffDirty" diff left-obj="$ctrl.model.data|hcListCellData:field|infoDefault" right-obj="$ctrl.getFieldContent(field)" options="$ctrl.model.viewMeta.view_config.diffOptions"></span>\n                    <span class="text" ng-if="!$ctrl.model.viewMeta.view_config.diffDirty"\n                          ng-bind-html="$ctrl.getFieldContent(field)|toTrusted"></span>\n                </div>\n\n                \x3c!--todo temp，通过类型判断，后续将去除, 改成hcform模式--\x3e\n                <div class="component-field" ng-if="field.type===\'file\'">\n                    <hc-input-upload-multiple options="field.options"\n                                              ng-model="field.current" ng-model-options="{ getterSetter: true }"></hc-input-upload-multiple>\n                </div>\n                <div class="component-field" ng-if="field.type===\'markdown\'">\n                    <hc-mark-down options="field.options"\n                                  ng-model="$ctrl.model.data[field.key]"></hc-mark-down>\n                </div>\n                <div class="component-field" ng-if="field.type===\'textarea\'">\n                    <hc-text-area options="field.options"\n                                  ng-model="$ctrl.model.data[field.key]"></hc-text-area>\n                </div>\n                <div class="component-field" ng-if="field.type===\'pdf-preview\'">\n                    <hc-pdf-preview options="field.options"\n                                    ng-model="$ctrl.model.data[field.key]"></hc-pdf-preview>\n                </div>\n                <div class="component-field" ng-if="field.type===\'mce\'">\n                    <hc-input-mce options="field.options"\n                                    ng-model="field.current" ng-model-options="{ getterSetter: true }"></hc-input-mce>\n                </div>\n                <div class="component-field" ng-if="field.type===\'primary-photo\'">\n                    <hc-primary-photo options="field.options"\n                                      ng-model="field.current" ng-model-options="{ getterSetter: true }"></hc-primary-photo>\n                </div>\n                <div class="component-field" ng-if="field.type===\'photo\'">\n                    <hc-photo-field options="field.options" label="field.label"\n                                    ng-model="$ctrl.model.data[field.key]"></hc-photo-field>\n                </div>\n                <div class="component-field" ng-if="field.type===\'field-list\'">\n                    <hc-field-list options="field.options" label="field.label"\n                                   ng-model="$ctrl.model.data[field.key]"></hc-field-list>\n                </div>\n                <div class="component-field" ng-if="field.type===\'tag\' && !field.lazyLoadingComponent">\n                    <hc-tag options="field.options" form-model="$ctrl.model" field="field"\n                            ng-model="$ctrl.model.data[field.key]"></hc-tag>\n                </div>\n                <div class="component-field" ng-if="field.type===\'internal-code\' && !field.lazyLoadingComponent">\n                    <recruit-internal-code options="field.options"\n                                           ng-model="$ctrl.model.data[field.key]"></recruit-internal-code>\n                </div>\n                <div ng-if="field.type===\'hc-qrcode\' && !field.lazyLoadingComponent">\n                    <hc-qrcode options="field.options"\n                                           ng-model="$ctrl.model.data[field.key]"></hc-qrcode>\n                </div>\n                <div class="component-field" ng-if="field.type===\'train-learn\' && !field.lazyLoadingComponent"  class="train-learn">\n                    <session-base options="field.options"\n                                           ng-model="$ctrl.model.data[field.key]"></session-base>\n                </div>\n                <div class="component-field" ng-if="field.type===\'code-train\' && !field.lazyLoadingComponent">\n                    <train-code options="field.options"\n                                  ng-model="$ctrl.model.data[field.key]"></train-code>\n                </div>\n                <div class="component-field" ng-if="field.type===\'recruit-job\' && !field.lazyLoadingComponent">\n                    <hc-recruit-job-view options="field.options"\n                                         ng-model="$ctrl.model.data[field.key]"></hc-recruit-job-view>\n                </div>\n                <div class="component-field" ng-if="field.type===\'recruit-job-label\' && !field.lazyLoadingComponent">\n                    <recruit-job-label options="field.options"\n                                         ng-model="$ctrl.model.data[field.key]"></recruit-job-label>\n                </div>\n                <div class="component-field" ng-if="field.type===\'perf-target-detail-title\' && !field.lazyLoadingComponent">\n                    <perf-target-detail-title options="field.options"\n                                       ng-model="$ctrl.model.data[field.key]"></perf-target-detail-title>\n                </div>\n                <div class="component-field" ng-if="field.type===\'simple-chart\' && !field.lazyLoadingComponent">\n                    <hc-simple-chart ng-model="$ctrl.model.data[field.key]" options="field.options"></hc-simple-chart>\n                </div>\n                <div class="component-field" ng-if="field.type===\'custom-action\'" class="hc-view-field hc-form-control">\n                    <hc-view-custom-field\n                        class="custom-field"\n                        options="field.options"\n                        field="field"\n                        form-data="$ctrl.model.data"\n                        ng-model="$ctrl.model.data[field.key]"\n                    ></hc-view-custom-field>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="hc-from-flex-content" ng-if="$ctrl.model.viewMeta.view_config.view === \'flex\'">\n        <hc-smart-card\n            meta="$ctrl.model.viewMeta.view_config.content"\n            data="$ctrl.model.data"\n            columns-metas="$ctrl.model.field_metas"\n            on-item-click="$ctrl.smartCardClick"\n            ng-if="!$ctrl.model.viewMeta.view_config.mobile_content || ($ctrl.client === \'pc\' && $ctrl.model.viewMeta.view_config.mobile_content)"\n        ></hc-smart-card>\n        <hc-smart-card\n                meta="$ctrl.model.viewMeta.view_config.mobile_content"\n                data="$ctrl.model.data"\n                columns-metas="$ctrl.model.field_metas"\n                on-item-click="$ctrl.smartCardClick"\n                ng-if="$ctrl.client === \'mobile\' && $ctrl.model.viewMeta.view_config.mobile_content"\n        ></hc-smart-card>\n    </div>\n</div>\n\n'},jl73:function(e,t){e.exports='<div class="category-tabs"\n     ng-if="category_field && category_type===\'tabs\'"\n     ng-hide="(hideComponents || []).includes(\'category-tabs\')">\n    <div id="categoryEdit"\n         class="btn-icon {{list_config.category.icon ? list_config.category.icon : \'icon-hcm-menu\'}}"\n         ng-if="showCategoryEdit"\n         ng-click="categoryEdit()"></div>\n    <hc-tabs value="category_id"\n             ng-hide="tabPanes && !tabPanes.length"\n             on-value-change="onTabsValueChange"\n             disable-show-more="list_config.category.disableShowMore"\n             disable-scroll-into-view="list_config.category.disableScrollIntoView"\n             step-change="list_config.category.stepChange"\n    >\n        <hc-tab-pane\n            ng-repeat="tab in tabPanes track by tab.id"\n            label="tab.name"\n            name="tab.id"\n            icon="tab.icon"\n            count="tab.count"\n            children="tab.children"\n            is-selected-new-style="list_config.category.isSelectedNewStyle"\n            is-selected-animate-style="list_config.category.isSelectedAnimateStyle"\n            is-multi-level="list_config.category.isMultiLevel"\n            hide-count="list_config.hide_count"\n        ></hc-tab-pane>\n    </hc-tabs>\n</div>\n'},k2n1:function(e,t,n){"use strict";var i=n("+oHS"),o=n.n(i),a=n("WxoT"),l=n.n(a),r=n("mrSG"),c=n("XMR8"),s=n("HV3j"),d=n("ustT"),u=function(){function e(e,t,n,i,o,a){this.dataService=e,this.$rootScope=t,this.$hcDialog=n,this.BaseCRUDService=i,this.metaService=o,this.base64=a}return e.prototype.edit_merged_and_get_diff_meta=function(e,t){return void 0===t&&(t="string"),Object(r.c)(this,void 0,void 0,(function(){var n,i,o,a=this;return Object(r.e)(this,(function(c){switch(c.label){case 0:return n=this.metaService.parseMetaKey(e),[4,this.$hcDialog.getDialog(s.a).show({meta_key:e,load:function(){return Object(r.c)(a,void 0,void 0,(function(){var e;return Object(r.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.model.meta",{model:n.model_name,biz_type:n.biz_type,state:n.state,retain_disable_meta:!0,retain_origin_meta:!0})];case 1:return e=t.sent(),[2,l()(e,null,4)]}}))}))}})];case 1:return i=c.sent(),[4,this.generate_diff_meta(e,i)];case 2:return o=c.sent(),"string"===t?[2,l()(o,null,4)]:"object"===t?[2,o]:[2]}}))}))},e.prototype.foreign_language_setting_meta=function(e,t){var n=this.metaService.parseMetaKey(e);return this.$hcDialog.getDialog(d.a).show({model:n.model_name,biz_type:n.biz_type,language:t})},e.prototype.generate_diff_meta=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.company.meta.get.different.meta?category="+encodeURIComponent(e),{meta_key:e,info_:this.base64.encode(unescape(encodeURIComponent(t))),is_encode:!0})];case 1:return[2,n.sent()]}}))}))},e.prototype.validate_and_fix_meta=function(e,t,n){return Object(r.c)(this,void 0,void 0,(function(){var i,a,s,d,u,_,p,m,f,h,g,v;return Object(r.e)(this,(function(b){switch(b.label){case 0:if(""===t)return[2,null];if(i=JSON.parse(t),/\$watch/.test(t))throw u="存在非法字符$watch,请再次确认！",this.$rootScope.show_warning(u),new Error(u);if(i.actions)try{for(a=Object(r.i)(i.actions),s=a.next();!s.done;s=a.next())if("setup"===(d=s.value).key||"元数据配置"===d.label||"SETUP"===d.action)throw u="不能在个性化中修改 元数据配置 按钮，请删除后重试",this.$rootScope.show_warning(u),new Error(u)}catch(e){g={error:e}}finally{try{s&&!s.done&&(v=a.return)&&v.call(a)}finally{if(g)throw g.error}}return[4,this.dataService.callHcmOpenApi("hcm.company.meta.validate.meta.with.fix?category="+encodeURIComponent(n),{biz_type:e,meta:this.base64.encode(unescape(encodeURIComponent(t))),meta_key:n,is_encode:!0})];case 1:return _=b.sent(),p=_.validate,m=_.changes,f=_.meta,o()(p).length?[4,this.$hcDialog.getDialog(c.a).show({biz_type:e,validate:p,changes:m,fixedMeta:f})]:[3,3];case 2:return(h=b.sent())?[2,l()(h,null,4)]:[3,4];case 3:return o()(m).length?(this.$rootScope.show_warning("已执行自动修复","warning"),[2,l()(f,null,4)]):[2,null];case 4:return[2]}}))}))},e.prototype.validate_meta=function(e,t){return Object(r.c)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.company.meta.validate.meta",{biz_type:e,meta:t})];case 1:return[2,n.sent()]}}))}))},e.$inject=["dataService","$rootScope","$hcDialog","BaseCRUDService","metaService","$base64"],e}();window.app.service("MetaEditorService",u)},k85I:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("pNMO"),n("4Brf"),n("oVuX"),n("sMBO"),n("qePV"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JfAA"),n("EnZy");var i=n("UtpJ"),o=n.n(i),a=n("D3kx"),l=n.n(a),r=n("i5y0"),c=n.n(r),s=n("526F"),d=n.n(s),u=n("HU8g"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("FLGM"),h=n.n(f),g=n("mrSG"),v=n("CoJ3"),b=n("4eRX"),y=n("hi0z"),w=(n("fnD0"),"d8a3a89911723f78214181eb82eb972d"),x="cd4505d2cc4b75c2d758d7436b4a922a",k=function(){function e(e,t,n,i,o,a,l,r,c,s){var d=this;this.$q=e,this.$rootScope=t,this.$timeout=n,this.$sce=i,this.$http=o,this.$filter=a,this.$hcDialog=l,this.dataService=r,this.contextService=c,this.locationService=s,this.auth=c.getContext("auth"),this.map_server_enabled=!1,this.server_disable_map=window.server_disable_map,window._AMapSecurityConfig||(window._AMapSecurityConfig={securityJsCode:"f4118c9ead6368e60e0eaef6604a32e5"}),y.load({key:x,version:"2.0",plugins:["AMap.Geolocation"]}).then((function(){d.map_server_enabled=!0})).catch((function(e){console.log("加载高德地图服务失败"),console.log(e),d.map_server_enabled=!1}));this._getLocation=function(){t.show_waiting(!0);var n=e.defer(),i=function(e,i){"gcj02"===i?(t.hide_waiting(!0),window.storage.setItem("local","hcm_last_geo_position",e),n.resolve(e)):d.convertCoordType(e.longitude,e.latitude,i).then((function(i){t.hide_waiting(!0),window.storage.setItem("local","hcm_last_geo_position",Object(g.a)(Object(g.a)({},e),i)),n.resolve(Object(g.a)(Object(g.a)({},e),i))}))};return s.getLocationByWx().then((function(e){i({longitude:e.lng,latitude:e.lat,accuracy:e.accuracy,source:"app"},"gps")}),(function(o){d.map_server_enabled?(console.log(o.message+",使用高德地图服务定位"),function(){var t=e.defer();return new AMap.Geolocation({enableHighAccuracy:!0,timeout:5e3,convert:!0,showButton:!1,showMarker:!1,showCircle:!1,panToLocation:!1,useNative:!0}).getCurrentPosition((function(e,n){"complete"===e?(console.log("高德定位成功"),console.log(n),t.resolve({longitude:n.position.lng,latitude:n.position.lat,accuracy:n.accuracy,source:n.location_type})):(console.log("高德定位失败"),console.log(n),t.reject(n.message))})),t.promise}().then((function(e){i(e,"gcj02")}),(function(e){t.hide_waiting(!0),n.reject(e)}))):(console.log(o.message+",使用浏览器定位"),function(){var t=e.defer();return window.isApp?window.WebViewJavascriptBridge.callHandler("getLocation",{},(function(e){var n=JSON.parse(e);t.resolve({latitude:n.latitude,longitude:n.longitude,accuracy:n.accuracy})})):navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t.resolve({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy})}),(function(e){var n;switch(e.code){case e.PERMISSION_DENIED:n="用户禁止了定位操作";break;case e.POSITION_UNAVAILABLE:n="用户地理信息不可用";break;case e.TIMEOUT:n="定位超时";break;default:n="未知错误"}t.reject(n)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):t.reject("浏览器不支持定位功能"),t.promise}().then((function(e){i(Object(g.a)(Object(g.a)({},e),{source:"browser"}),"gps")}),(function(e){t.hide_waiting(!0),n.reject(e)})))})),n.promise},this._convertCoord=function(n,i,o){t.show_waiting(!0);var a=e.defer();return function(t,n,i){var o=e.defer();return d.server_disable_map?d.callWebserviceApi("get","https://restapi.amap.com/v3/assistant/coordinate/convert",{key:w,coordsys:i,locations:t+","+n},"application").then((function(e){if("1"!==e.status)o.reject(e.info);else{var t=Object(g.f)(e.locations.split(","),2),n=t[0],i=t[1];o.resolve({longitude:n,latitude:i})}}),(function(e){console.log(e),o.reject("高德坐标转换服务请求失败")})):(console.log("使用服务端api转换坐标"),r.callHcmOpenApi("location.convert.coordsys",{longitude:t,latitude:n,coordsys:i,except:[20001,300010]},"application",!1).then((function(e){o.resolve(e)})).catch((function(e){console.log("服务端转换坐标失败"),console.log(e),o.reject(null==e?void 0:e.description)}))),o.promise}(n,i,o).then((function(e){t.hide_waiting(!0),a.resolve(e)}),(function(e){return Object(g.c)(d,void 0,void 0,(function(){return Object(g.e)(this,(function(n){return t.hide_waiting(!0),a.reject(e),[2]}))}))})),a.promise},this._getLocationInfo=function(n,i,o){void 0===o&&(o=!1),t.show_waiting(!0);var a=e.defer();return function(t,n,i){var o=e.defer();return d.server_disable_map?d.callWebserviceApi("get","https://restapi.amap.com/v3/geocode/regeo",{key:w,location:t+","+n,language:"zh",extensions:i?"all":"base"},"application").then((function(e){if("1"!==e.status)o.reject(e.info);else{var t,n=e.regeocode.addressComponent,a={country:n.country,province:n.province,city:n.city,district:n.district,address:e.regeocode.formatted_address};if(i)a.pois=h()(t=e.regeocode.pois).call(t,(function(e){var t=Object(g.f)(e.location.split(","),2),n=t[0],i=t[1];return e.longitude=n,e.latitude=i,e}));o.resolve(a)}}),(function(e){var t;console.log("高德地址位置逆解析失败"),console.log(e),o.reject(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"地理坐标解析失败，请尝试刷新")})):(console.log("使用服务端api获取坐标信息"),d.dataService.callHcmOpenApi("location.info.get",{longitude:t,latitude:n,extensions:i,except:[20001,300010]},"application",!1).then((function(e){o.resolve(e)}),(function(e){console.log("服务端获取坐标信息失败"),console.log(e),o.reject(null==e?void 0:e.description)}))),o.promise}(n,i,o).then((function(e){t.hide_waiting(!0),a.resolve(e)}),(function(e){t.hide_waiting(!0),a.reject(e)})),a.promise},this._getLocationList=function(n,i,o,a,l,r,c){void 0===o&&(o=20),void 0===a&&(a=1),void 0===l&&(l=null),void 0===r&&(r=null),void 0===c&&(c=!1),t.show_waiting(!0);var s=e.defer();return function(n,i,o,a,l,r,c){void 0===o&&(o=20),void 0===a&&(a=1),void 0===l&&(l=null),void 0===r&&(r=null),void 0===c&&(c=!1);var s=e.defer();if(d.server_disable_map){var u="https://restapi.amap.com/"+(c?"v3":"v5")+"/place/text",_={keywords:n,language:"zh",region:i,city_limit:!1,page_size:o,page_num:a,output:"json"};c&&(_.city=i),l&&r&&(u="https://restapi.amap.com/"+(c?"v3":"v5")+"/place/around",_.location=l+","+r,_.radius=7e3),_.key=w,d.callWebserviceApi("get",u,_,"application").then((function(e){var t,n;"1"!==e.status?(console.log(e.info),s.reject(e.info)):s.resolve({list:null===(t=e.pois)||void 0===t?void 0:h()(n=m()(t).call(t,(function(e){return e.location}))).call(n,(function(e){var t,n,i=Object(g.f)(e.location.split(","),2),o=i[0],a=i[1];return Object(g.a)(Object(g.a)({},e),{district:e.adname,longitude:o,latitude:a,region_desc:m()(t=h()(n=["pname","cityname","adname"]).call(n,(function(t){return null==e?void 0:e[t]}))).call(t,(function(e){return e})).join(" ")})})),count:e.count})}),(function(e){console.log(e),s.reject("高德地址搜索服务请求失败")}))}else console.log("使用服务端api检索地址"),d.dataService.callHcmOpenApi("location.search.place",{filter_str:n,filter_dict:{region:i,longitude:l,latitude:r,is_abroad:c},page_index:a,page_size:o,except:[20001,300010]},"application",!1).then((function(e){s.resolve(e)}),(function(e){t.hide_waiting(!0),s.reject(e)}));return s.promise}(n,i,o,a,l,r,c).then((function(e){var n;n=e,t.hide_waiting(!0),s.resolve(n)}),(function(e){return Object(g.c)(d,void 0,void 0,(function(){return Object(g.e)(this,(function(n){return t.hide_waiting(!0),s.reject(e),[2]}))}))})),s.promise},this.callWebserviceApi=function(n,i,l,r){var c,s,u,p,m;t.show_waiting(!0);var f,h=e.defer();if(r){var g=Object(b.a)({cache_company_id:d.auth?null===(s=null===(c=d.auth)||void 0===c?void 0:c.company)||void 0===s?void 0:s.id:null,cache_user_id:d.auth?null===(p=null===(u=d.auth)||void 0===u?void 0:u.user)||void 0===p?void 0:p.id:null,cache_type:n,service_url:i,params:l}),v=r.split(","),y=void 0;if("application"===v[0]?y=angular.copy(null===(m=null===window||void 0===window?void 0:window.dataServiceCache)||void 0===m?void 0:m[g]):/^(session|local)$/.test(v[0])&&(y=window.storage.getItem(v[0],g,v[1])),a("isValidValue")(y))return h.resolve(y),t.hide_waiting(!0),h.promise;f=function(e){"application"===v[0]?(window.dataServiceCache=window.dataServiceCache||{},window.dataServiceCache[g]=angular.copy(e)):/^(session|local)$/.test(v[0])&&window.storage.setItem(v[0],g,e),h.resolve(e)}}else f=function(e){h.resolve(e)};return o[n](i+"?"+new _.a(l).toString()).then((function(e){e&&e.data&&"error"!==e.statusText?f(e.data):h.reject(e)}),(function(e){h.reject(e)})).finally((function(){t.hide_waiting(!0)})),h.promise},this.callJsonpWebserviceApi=function(e,t,n){return d.callWebserviceApi("jsonp",e,t,n)}}return e.prototype.getLocationByGeo=function(){return this._getLocation()},e.prototype.convertCoordType=function(e,t,n){return this._convertCoord(e,t,n)},e.prototype.getLocationInfo=function(e,t,n){return void 0===n&&(n=!1),this._getLocationInfo(e,t,n)},e.prototype.getMapImgUrl=function(e,t,n,i,o,a,l){var r,s;void 0===o&&(o=null),void 0===a&&(a=1),void 0===l&&(l="amap");var u=e+","+t,_={};(e&&t&&(_.location=u,_.markers="mid,0x03a9f4,:"+u),o?_.paths="2,0x1791FC,1,0x1791FC,0.2:"+h()(o).call(o,(function(e){return e.longitude+","+e.latitude})).join(";"):_.zoom=15,d()(_,{size:n+"*"+i,scale:a,key:w}),s="https://restapi.amap.com/v3/staticmap?"+h()(r=c()(_)).call(r,(function(e){var t=Object(g.f)(e,2);return t[0]+"="+t[1]})).join("&"),this.server_disable_map)||(s=location.protocol+"//"+(location.host+window.hcm_wengen)+"/api/location_map?url="+encodeURIComponent(s)+window.hcm_env_post);return s},e.prototype.getLocationList=function(e,t,n,i,o,a,l){return void 0===n&&(n=20),void 0===i&&(i=1),void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=!1),this._getLocationList(e,t,n,i,o,a,l)},e.prototype.getPolygonBounds=function(e){if(this.map_server_enabled){var t=new AMap.Polygon;t.setOptions({path:h()(e).call(e,(function(e){return new AMap.LngLat(Number(e.longitude),Number(e.latitude))}))});var n=t.getBounds(),i=n.getCenter();return{center:{longitude:i.lng,latitude:i.lat},bounds:{south_west:{longitude:n.southWest.lng,latitude:n.southWest.lat},north_east:{longitude:n.northEast.lng,latitude:n.northEast.lat}}}}var a,r,c,s,d;r=s=l()(e[0].longitude),c=d=l()(e[0].latitude),h()(a=o()(e).call(e,1)).call(a,(function(e){var t=l()(e.longitude),n=l()(e.latitude);t<r?r=t:t>s&&(s=t),n<c?c=n:n>d&&(d=n)}));var u={},_={};return r<0&&s>0&&r- -180+(180-s)<0-r+s?(u.south_west={longitude:s,latitude:c},u.north_east={longitude:r,latitude:d},_.longitude=Math.round(1e6*(s+(180-s+(r- -180))/2))/1e6,_.longitude>180&&(_.longitude=_.longitude-180-180),_.latitude=Math.round((c+d)/2*1e6)/1e6):(u.south_west={longitude:r,latitude:c},u.north_east={longitude:s,latitude:d},_.longitude=Math.round((s+r)/2*1e6)/1e6,_.latitude=Math.round((c+d)/2*1e6)/1e6),{center:_,bounds:u}},e.prototype.getCircleBounds=function(e,t,n){e=l()(e),t=l()(t);var i=(n=l()(n))/6378137*(180/Math.PI),o=t+i,a=t-i,r=e+n/6378137*(180/Math.PI)/Math.cos(o*Math.PI/180);r>180&&(r=r-180-180);var c=e+-n/6378137*(180/Math.PI)/Math.cos(a*Math.PI/180);return c<-180&&(c=180-(-180-c)),{south_west:{longitude:Math.round(1e6*c)/1e6,latitude:Math.round(1e6*a)/1e6},north_east:{longitude:Math.round(1e6*r)/1e6,latitude:Math.round(1e6*o)/1e6}}},e.prototype.isBoundsContains=function(e,t){var n=l()(e.south_west.longitude),i=l()(e.north_east.longitude),o=l()(e.south_west.latitude),a=l()(e.north_east.latitude),r=l()(t.longitude),c=l()(t.latitude);if(this.map_server_enabled)return new AMap.Bounds(new AMap.LngLat(n,o),new AMap.LngLat(i,a)).contains(new AMap.LngLat(r,c));return(n>0&&i<0?r>n&&r<=180||r>=-180&&r<i:r>n&&r<i)&&(c>o&&c<a)},e.prototype.isInsidePolygon=function(e,t,n){return this.dataService.callHcmOpenApi("location.inside.polygon",{longitude:e,latitude:t,polygon:h()(n).call(n,(function(e){return[e.longitude,e.latitude]}))})},e.prototype.getCircleBoundsServer=function(e,t,n){return this.dataService.callHcmOpenApi("location.get.circle.bounds",{longitude:e,latitude:t,radius:n})},e.$inject=["$q","$rootScope","$timeout","$sce","$http","$filter","$hcDialog","dataService","contextService","locationService"],e}();v.a.service("InputLocationService",k)},kAdk:function(e,t){e.exports='<div ng-init="init()" class="item_detail_complete_micro">\n    <div class="complete_situation">\n        <div class="complete_direction">\n            <div class="perf_completion_value"\n                 ng-if="complete_value && complete_value !==\'None\'">{{\'perf_completion_value\'|translate}}\n                ：<span>{{complete_value}}</span></div>\n            <br>\n            <div class="perf_completion" ng-if="description && description !==\'None\'">{{\'perf_completion\'|translate}}\n                ：<span>{{description}}</span></div>\n        </div>\n        <div class="complete_percent">\n            <div class="percent_circle">\n                {{complete_percent}}%\n            </div>\n        </div>\n        <div ng-if="file_id !==\'\' && file_id != \'None\'">\n            <hc-input-upload-multiple options="{\'readOnly\':true,\'hide_name\':true}"\n                                      ng-model="file_id"></hc-input-upload-multiple>\n        </div>\n    </div>\n</div>\n'},kXIO:function(e,t,n){"use strict";n.d(t,"b",(function(){return x}));n("rB9j"),n("EnZy"),n("x83w");var i=n("UtpJ"),o=n.n(i),a=n("o+MX"),l=n.n(a),r=n("OBge"),c=n.n(r),s=n("eLKs"),d=n.n(s),u=n("M5Mt"),_=n.n(u),p=n("mrSG"),m=n("ous5"),f=n("55+V"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flushAllFields=function(){var e;_()(e=t.data).call(e,0,t.data.length),t.list_model.$refreshData()},t}return Object(p.d)(t,e),t.prototype.getAlterOperates=function(){var e,t;return[{label:"新增",func:d()(e=this.editItem).call(e,this),left:!0},{label:"清空字段",func:d()(t=this.flushAllFields).call(t,this)}]},t.prototype.getInfoDialog=function(){return m.a},t.prototype.getItemByNode=function(e){return Object(p.c)(this,void 0,c.a,(function(){return Object(p.e)(this,(function(t){return[2,this.metaVisService.getVisItemByNode(e,"field")]}))}))},t}(f.c),g=function(e){function t(){var t,n,i,o,a=null!==e&&e.apply(this,arguments)||this;return a.meta_type="field",a.item_operate=[{icon:"icon-hcm-refresh",title:"转换为名称",func:d()(t=a.itemToName).call(t,a),is_fix:function(e){return e.fixed},hide:function(e){return!e.canbeConvert}},{icon:"icon-hcm-pin",title:"固定字段",func:d()(n=a.itemFixed).call(n,a),is_fix:function(e){return e.fixed}},{icon:"icon-hcm-edit",title:"编辑字段",func:d()(i=a.itemEdit).call(i,a)},{icon:"icon-hcm-trash",title:"清除字段",func:d()(o=a.itemRemove).call(o,a)}],a}return Object(p.d)(t,e),t.prototype.getInfoDialog=function(){return m.a},t.prototype.itemFixed=function(e){return Object(p.c)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(t){switch(t.label){case 0:return e.fixed?delete e.fixed:e.fixed=!0,[4,this.parent.parent.refreshMeta()];case 1:return t.sent(),[2]}}))}))},t.prototype.itemToName=function(e){return Object(p.c)(this,void 0,void 0,(function(){return Object(p.e)(this,(function(t){switch(t.label){case 0:var n,i,a;if(e.object)e.field=l()(n=o()(i=e.field).call(i,0,-1)).call(n,o()(a=e.field[e.field.length-1]).call(a,0,-3),"name");return delete e.canbeConvert,[4,this.parent.parent.refreshData()];case 1:return t.sent(),[2]}}))}))},t.prototype.getItemByNode=function(e){var t=this.metaVisService.getVisItemByNode(e,this.meta_type);if(t.object){var n,i,a=t.origin_key.split(".");t.field=l()(n=o()(i=t.field).call(i,0,-2)).call(n,a[a.length-1]),t.canbeConvert=!0}return t},t}(f.b),v=n("rLmf"),b=n.n(v),y=n("L1YK"),w=n.n(y),x=(n("9Q+z"),{controller:g,template:w.a});t.a={controller:h,template:b.a}},l3uN:function(e,t){e.exports='<div class="report-template-selector" ng-init="init()">\n    <div class="group" i-scroll="report_template_group_list">\n        <div>\n            <div ng-repeat="_g in group_list" ng-click="change_group(_g)" ng-class="{selected:_g.id==curr_group.id}"\n                 class="group-item">\n                {{_g.name}}\n            </div>\n        </div>\n    </div>\n    <div class="template" i-scroll="report_template_list">\n        <div>\n            <div ng-repeat="_t in template_list" ng-click="select(_t)" class="template-item">\n                {{_t.name}}\n            </div>\n        </div>\n    </div>\n</div>\n'},lfmw:function(e,t,n){e.exports='<div id="file-selector-page" data-ng-init="init()" ng-if="is_selecting">\n    <div>\n        <div class="title">请选择文件</div>\n        <div class="current-folder blue">{{folder_name}}</div>\n\n        <div class="files-block" ng-if="files.length > 0">\n            <div class="file-item-box" ng-repeat="_file in files">\n                <div class="file-item">\n                    <div class="file-type-logo" ng-click="fileItemClick(_file)">\n                        <img ng-src="{{_file.type|staticImageIconList}}"\n                             ng-if="file_type.indexOf(_file.type) >= 0">\n                        <img src="'+n("rnWY")+'" ng-if="file_type.indexOf(_file.type) < 0">\n                    </div>\n\n                    <div class="file-content" ng-click="fileItemClick(_file)">\n                        <div class="file-name">{{_file.name}}{{[\'unknow\',\'folder\'].indexOf(_file.type)>=0 ? \'\' : \'.\' +\n                            _file.type}}\n                        </div>\n                        <div class="file-desc">\n                            <div class="file-date">{{_file.create_date}}</div>\n                            <div class="file-size" ng-if="_file.is_folder == 0">{{_file.size | fileSize }}</div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <div class="menu-bar">\n            <div class="menu-item" ng-class="folder_id == 0 ? \'gray\' : \'blue\'" ng-click="BackToParentFolder()">\n                返回上一级\n            </div>\n            \x3c!--<div class="menu-item" ng-click="selectFile()"--\x3e\n            \x3c!--ng-class="file_selected.id ? \'blue\':\'gray\'">--\x3e\n            \x3c!--确定--\x3e\n            \x3c!--</div>--\x3e\n            <div class="menu-item blue" ng-click="cancelSelect()">\n                取消\n            </div>\n        </div>\n    </div>\n</div>'},lhIL:function(e){e.exports=JSON.parse('{"tip":"维护字段排序属性","fields":[{"key":"key","label":"字段标识","component":"hc-input","options":{"singleLine":false,"width":"col-12","required":true,"readOnly":true}},{"key":"label","label":"字段名","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入标识","required":true}},{"key":"type","label":"类型","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"list":[{"name":"升序","value":"asc"},{"name":"降序","value":"desc"}]}}]}')},lq6P:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("4mDm"),n("sMBO"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("PKPk"),n("Rm1S"),n("UxlC"),n("3bBZ");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("fHi0"),d=n.n(s),u=n("OWCx"),_=n.n(u),p=n("nhkr"),m=n.n(p),f=n("lHQ6"),h=n.n(f),g=n("ZbhI"),v=n.n(g),b=n("/FZm"),y=n.n(b),w=n("KYsz"),x=n.n(w),k=n("5PDf"),O=n.n(k),D=n("526F"),C=n.n(D),M=n("OBge"),S=n.n(M),E=n("04Ix"),P=n.n(E),j=n("zLi2"),T=n.n(j),A=n("+oHS"),I=n.n(A),L=n("6UaR"),F=n.n(L),R=n("RXMP"),B=n.n(R),U=n("FLGM"),q=n.n(U),W=n("mnMc"),z=n.n(W),N=n("WxoT"),K=n.n(N),H=n("M5Mt"),V=n.n(H),Y=n("o+MX"),G=n.n(Y),J=n("TEMH"),X=n.n(J),Q=n("Vi3r"),Z=n.n(Q),ee=n("a0dU"),te=n.n(ee),ne=(n("ls82"),n("SPx3")),ie=n.n(ne),oe=n("/eFo"),ae=n.n(oe),le=n("xweI"),re=n.n(le),ce=n("8Auy"),se=n("R91f"),de=n("wd/R"),ue=n.n(de),_e=n("xAfy"),pe=n("bQov"),me=n("K6BF"),fe=n("1hbj"),he=n("1GJp");function ge(e,t){var n=I()(e);if(_.a){var i=_()(e);t&&(i=O()(i).call(i,(function(t){return d()(e,t).enumerable}))),n.push.apply(n,i)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)B()(n=ge(Object(i),!0)).call(n,(function(t){P()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;B()(a=ge(Object(i))).call(a,(function(t){o()(e,t,d()(i,t))}))}}return e}app.controller("BaseCRUDInfoCtrl",["templateService","$rootScope","$scope","CRUDService","$hcForm","$hcDialog","hcDialogSelector","$q","$http","dataService","selectorService","$state","commonSelectorService","$hcSubList","$filter","$timeout","contextService","$hcListBtn","workflowOnlineService","wfCreateService","HCMCRUDImpExpService","documentPreviewService","hcmDraftsService","hcUploadFile","$commonAction",function(e,t,n,i,o,a,l,r,c,s,d,u,_,p,f,g,b,w,k,D,M,E,P,j,A){n.form_data_in_param=!0;var L=A.createCommonAction(n);n.init=ie()(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.initBefore(),n.setDialogOperates(),n.mode=n.params.mode,n.auth=b.getContext("auth"),e.t0=n.initBeforeAsync,!e.t0){e.next=8;break}return e.next=8,n.initBeforeAsync();case 8:n.initForm();case 9:case"end":return e.stop()}}),e)}))),n.initForm=function(){n.base_form=o.createForm().$setOptions({form_mode:n.mode,CRUDService:i,state:n.getMetaState(),alter_info:n.getFormAlterInfo()}),n.info_meta?(n.setOperates(n.default_operate),n.setFormData()):n.loadModelMeta(!0),n.sub_model=p.create(),g((function(){n.base_form.$setOptions({form_container:n.getFormContainer()})}),1e3)},n.setFormData=function(){n.params.data&&n.params.data.id&&i.getItemInfo&&!n.params.form_data_in_param?n.loadData():(n.data=angular.extend({},n.form_data_in_param?n.params.data:n.data||{}),n.base_form.$setMeta(n.info_meta,n.group_meta).$setData(n.data),n.model_meta&&n.initSubList(n.childrens),n.base_form.$getDefault().then((function(){n.base_form.$dealFormDataChange(n.base_form.data,{},"new"===n.mode?"init":"first"),n.startWatch()})),n.initAfter(n.data))},n.loadData=function(){i.getItemInfo.apply(i,Z()(n.getLoadDataParams())).then(function(){var e=ie()(te.a.mark((function e(t){var i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"update"===n.mode&&(t.source_id=t.id),n.data=n.getFormData(t),e.next=4,null===(i=n.loadDataAfterAsync)||void 0===i?void 0:i.call(n,n.getEnvironmentParams(),n.data);case 4:n.base_form.$setMeta(n.info_meta,n.group_meta).$setData(n.data),n.model_meta&&n.initSubList(n.childrens),n.base_form.$dealFormDataChange(n.base_form.data,{},"first"),n.startWatch(),n.initAfter(n.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},n.startWatch=function(){n.form_data_watch&&n.form_data_watch(),n.form_data_watch=n.$watch("base_form.data",(function(e,t){n.base_form.$dealFormDataChange(e,t)}),!0)},n.getModelMetaExtendParams=function(){return!!n.$dialog&&n.params.meta_params||{}},n.loadModelMeta=function(e){var t,o=function(e,t){return X()(e).call(e,(function(e){return e.key===t}))},a=function(e){var t;e=re()(e,["sequence"]);var n=o(e,"submit");return-1!==n&&null==e[n].sequence&&(e=G()(e).call(e,V()(e).call(e,n,1))),-1!==(n=o(e,"back"))&&null==e[n].sequence&&(e=G()(t=V()(e).call(e,n,1)).call(t,e)),e};i.getBizMeta.apply(i,G()(t=Z()(n.getLoadModelMetaParams())).call(t,[e,n.getModelMetaExtendParams()])).then(function(){var e=ie()(te.a.mark((function e(t){var i,o,l,r,c,s,d,u,_,p,m,h,g,v,b,y;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.individualParse(t),l=function e(t){var n=t.match(/SCOPE.sub_model.model_list_object.(\S*?).list_model.data/);return n&&n.length?e(t=t.replace(n[0],"FORM().data."+n[1])):t},t=JSON.parse(l(K()(t))),n.model_meta=t,null===(i=n.parseMetaBefore)||void 0===i||i.call(n),r=n.metaParse({title:t.description||n.model_meta.model,fields:t.fields,groups:t.groups,actions:t.actions,childrens:t.childrens,hooks:t.hooks,tip:t.tip,info_config:t.info_config}),c=r.title,s=r.fields,d=r.groups,u=r.actions,_=r.childrens,p=r.hooks,m=r.tip,h=r.info_config,n.title=c,n.childrens=_,n.info_config=h,n.$dialog?n.$dialog.title(f("valueToFunc")(c)()):n.setTitle(f("valueToFunc")(c)()),n.initMetaHooks(p),n.info_meta=s,n.setMetaBefore(),n.group_meta=d,n.actions=u,n.operates=a(f("arrayMerge")(n.default_operate,n.actions,"key",(function(e,t,n){var i,o;"func"===n?z()(i=[void 0]).call(i,t[n])||(e[n]=t[n]):z()(o=[void 0,null]).call(o,t[n])||(e[n]=t[n])}))),n.actions.length>0?(n.operates=n.roleParse(q()(g=n.operates).call(g,(function(e,t){var i;return e.actions&&(e.actions=q()(i=e.actions).call(i,(function(e){return{dynamic:!0,label:e.label,hide:e.hide,key:e.key,roles:e.roles,sequence:e.sequence||10*(t+1),options:e.options,disabled:e.disabled,func:function(){return n.parseAction(e)},after_func:e.after_func,default:e.is_important,target:e.target,left:void 0===e.left||e.left}}))),{dynamic:!0,label:e.label,hide:e.hide,key:e.key,roles:e.roles,sequence:e.sequence||10*(t+1),options:e.options,actions:e.actions,disabled:e.disabled,func:function(){return n.parseAction(e)},after_func:e.after_func,default:e.is_important,target:e.target,left:void 0===e.left||e.left}}))),n.setOperates(n.operates,n.parseAction,{max:null===(v=n.info_config)||void 0===v?void 0:v.max_btn_length,outer_btn_count:null!==(b=null===(y=n.info_config)||void 0===y?void 0:y.mobile_outer_btn_count)&&void 0!==b?b:2})):n.setOperates(n.default_operate,n.parseAction),n.transChildren(),n.setFieldList(),n.base_form.$setFormRelations(t.form_relations).$setTip(f("valueToFunc")(m)()).$setOptions(n.info_config||{}),n.setFormData(),n.metaLoaded(n.model_meta),e.next=24,null===(o=n.metaLoadedAsync)||void 0===o?void 0:o.call(n,n.getEnvironmentParams());case 24:return e.next=26,n.initCustomPackage();case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},n.roleParse=function(e){var t=e,i=function(e){!e.disabled&&e.roles&&(e.disabled=f("actionPermission")(e.roles,{DATA:function(){return n.base_form.data},AUTH:function(){return n.auth},SCOPE:function(){return n},STATE:function(){return u}}))};return B()(t).call(t,(function(e){var t;i(e),F()(e.actions)&&B()(t=e.actions).call(t,(function(e){return i(e)}))})),t},n.transChildren=function(){var e;(n.info_meta_object=f("toObj")(n.info_meta),n.model_meta.childrens.length)&&q()(e=n.model_meta.childrens).call(e,(function(e){if(n.info_meta_object[e.key]&&e.is_form){var t;n.info_meta_object[e.key].options=angular.extend(e,n.info_meta_object[e.key].options);var i=n.info_meta_object[e.key].options;i.base_form=n.base_form,i.mode=n.params.mode||n.mode,i.state||(n.info_meta_object[e.key].options.state=n.getMetaState()),i.base_alter=n.params.alter,n.params.data&&"new"!==n.params.mode&&(i.master_id=n.params.data.id),i.SubDialogCRUDService=n.SubDialogCRUDService,i.load_model_meta_params=n.load_model_meta_params,i.sub_list_func=n.sub_list_func,i.operate_row=null===(t=n.operateRow)||void 0===t?void 0:t[i.model],n.children_list_meta&&"{}"!==K()(n.children_list_meta)&&(i.list_meta=n.children_list_meta[e.key].fields,i.list_btn_meta=n.children_list_meta[e.key].actions)}}))},n.setFieldList=function(){var e;B()(e=n.info_meta).call(e,(function(e){var t,i;if("hc-field-list"===e.component&&(null===(t=e.options)||void 0===t?void 0:t.model)&&(null===(i=e.options)||void 0===i?void 0:i.field_mode)){var o,a,l,r=e.options;r.base_form=n.base_form,r.mode=n.params.mode||n.mode,r.state||(n.info_meta_object[e.key].options.state=n.getMetaState()),r.base_alter=null===(o=n.params.alter)||void 0===o?void 0:o.base_alter,r.sub_list_func=n.sub_list_func;var c=null!==(a=e.options.subExtendOptions)&&void 0!==a?a:{};B()(l=I()(c)).call(l,(function(e){return r[e]=c[e]}))}}))},n.individualParse=function(e){return e},n.triggerAction=function(){var e=ie()(te.a.mark((function e(t){var i,o,a,l=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.length>1&&void 0!==l[1]?l[1]:{},!(a=n.$dialog?n.$dialog.list_btn_model.getAction(t):null===(i=n.list_btn_model)||void 0===i?void 0:i.getAction(t))){e.next=6;break}return e.next=5,n.parseAction(a,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.parseAction=function(){var e=ie()(te.a.mark((function e(t){var i,o,l,r,c,d,u,_,p,m,h,g,v,b,y,w,x,k,$,O,D,M,E,A,R,B,U,q,W,z,N,K,H,V,Y,G,J,X,Q,Z,ee,ne,oe,ae,le,re=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=re.length>1&&void 0!==re[1]?re[1]:{},e.next=3,L.canEnterAction(t,h,n.getExprContext());case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,L.validateAction(t,h,n.getExprContext());case 7:if(g=function(){var e=ie()(te.a.mark((function e(t,n){var i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f("valueToFunc")(t.confirm)()){e.next=34;break}if("pc"!==window.client){e.next=17;break}if(e.t0=a,!t.confirm_tip){e.next=9;break}return e.next=6,f("valueToFunc")(t.confirm_tip)();case 6:e.t1=e.sent,e.next=10;break;case 9:e.t1=n||"确认执行"+f("valueToFunc")(t.label)()+"操作？";case 10:return e.t2=e.t1,e.t3=[{caption:t.confirm_label||f("translate")("confirm")}],e.t4=t.confirm_style,e.next=15,e.t0.confirm.call(e.t0,e.t2,e.t3,e.t4);case 15:e.next=34;break;case 17:if("mobile"!==window.client){e.next=34;break}if(i=[{label:"取消",key:"close"},{label:t.confirm_label||"确认",key:"confirm"}],e.t5=a,!t.confirm_tip){e.next=26;break}return e.next=23,f("valueToFunc")(t.confirm_tip)();case 23:e.t6=e.sent,e.next=27;break;case 26:e.t6=n||"确认执行"+f("valueToFunc")(t.label)()+"操作？";case 27:return e.t7=e.t6,e.t8={theme:"light-theme",operates:i},e.t9=t.confirm_style,e.next=32,e.t5.prompt.call(e.t5,e.t7,e.t8,e.t9);case 32:e.next=34;break;case 34:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=null,!t.confirm_api_params||!t.confirm_api){e.next=15;break}return b="function"==typeof t.confirm_api_params?f("valueToFunc")(t.confirm_api_params)(n.getEnvironmentParams()):t.confirm_api_params,e.next=13,s.callHcmOpenApi(t.confirm_api,b).catch((function(){}));case 13:y=e.sent,v=t.parse_message_func?t.parse_message_func(y):y.message;case 15:return e.next=17,g(t,v);case 17:if(!t.func||!t.func_first){e.next=19;break}return e.abrupt("return",t.func(I()(h).length?h:void 0,I()(h).length?h:void 0));case 19:if(!F()(t.action)){e.next=24;break}return t.key&&(h["".concat(t.key,"_action")]=t),e.next=23,L.actionChain(t.action,h,{},(function(e,t,i){return n.parseAction(e,i)}));case 23:return e.abrupt("return",e.sent);case 24:if(!L.isCommonAction(t)){e.next=26;break}return e.abrupt("return",L.execCommonAction(t,h,n.getExprContext()));case 26:e.t0=t.action,e.next="SETUP"===e.t0?29:"C_ACTION"===e.t0?31:"WORKFLOW_SUBMIT"===e.t0?51:"MODEL_LIST_DIALOG"===e.t0?53:"MODEL_INFO_DIALOG"===e.t0?60:"HYPER_LINK"===e.t0?66:"CUSTOM_ACTION"===e.t0?68:"VALIDATOR"===e.t0?82:"CHECK_CONFIRM_ACTION"===e.t0?87:"SHOW_SELECTOR_DIALOG"===e.t0?108:"COMMON_IMPORT"===e.t0?128:"COMMON_EXPORT"===e.t0?132:"CODE_EDITOR"===e.t0?136:"SET_FORM"===e.t0?140:"UPLOAD_FILE"===e.t0?145:"OPEN_DRAFTS"===e.t0?153:"SAVE_DRAFT"===e.t0?157:"APPLY_DRAFT"===e.t0?161:"REFRESH"===e.t0?163:166;break;case 29:return n.metaSetup(t.data),e.abrupt("break",167);case 31:if(!t.confirm){e.next=45;break}return e.next=34,Object(_e.c)(a.confirm(t.confirm_tip));case 34:if(w=e.sent,x=T()(w,2),x[0],k=x[1],"string"!=typeof t.command){e.next=42;break}return e.abrupt("return",t.func?t.func():n[t.command]());case 42:k&&t.command();case 43:e.next=50;break;case 45:if("string"!=typeof t.command){e.next=49;break}return e.abrupt("return",t.func?t.func():n[t.command]());case 49:t.command();case 50:return e.abrupt("break",167);case 51:return n.workflowSubmit(t.params),e.abrupt("break",167);case 53:return e.next=55,a.getDialog(Object(pe.a)(t.params.model,t.params.state,t.params.include_filter)).show(f("valueToFunc")(t.params.params)(n.data));case 55:return($=e.sent)&&"function"==typeof t.params.after_submit&&t.params.after_submit($),t.refresh&&n.loadData(),t.params.close_info_dialog&&n.afterSubmit(),e.abrupt("break",167);case 60:return O={model:f("valueToFunc")(t.params.model)(n.data),state:t.params.state,mode:t.params.mode,size:t.size,data:f("valueToFunc")(t.params.data)(n.data),alter:f("valueToFunc")(t.params.alter)(n.data)},e.next=63,L.getCommonAction("COMMON_INFO_DIALOG")(ve(ve({},t),{},{options:O}),{});case 63:return t.params.refresh&&n.loadData(),t.params.close_info_dialog&&n.afterSubmit(),e.abrupt("break",167);case 66:return n.windowOpen(t.params),e.abrupt("break",167);case 68:if(!0!==(null===(i=t.options)||void 0===i?void 0:i.valid)){e.next=73;break}return e.next=71,n.validData();case 71:if(e.sent){e.next=73;break}return e.abrupt("return");case 73:return D="function"==typeof t.params?t.params(n.base_form.data,n.params.alter):t.params,e.next=76,s.callHcmOpenApi(t.api,D);case 76:return M=e.sent,(null===(o=t.options)||void 0===o?void 0:o.result_tip)&&M&&a.notify(M.message?M.message:t.label+f("translate")("successfully_executed")),n.$dialog&&(null===(l=t.options)||void 0===l?void 0:l.close_on_success)&&n.afterSubmit(M),n.$dialog&&(null===(r=t.options)||void 0===r?void 0:r.on_success)&&n.$dialog.resolve_data(M),(null===(c=t.options)||void 0===c?void 0:c.refresh)&&n.loadData(),e.abrupt("break",167);case 82:return E=null===(d=t.options)||void 0===d?void 0:d.rejectOnInvalid,e.next=85,n.validData();case 85:return A=e.sent,e.abrupt("return",E&&!1===A?S.a.reject(A):S.a.resolve(A));case 87:return R=t.options,B="function"==typeof R.check_api_params?f("valueToFunc")(R.check_api_params)(n.base_form.data,n.getEnvironmentParams()):R.check_api_params,e.prev=89,e.next=92,s.callHcmOpenApi(R.check_api,B);case 92:U=e.sent,e.next=98;break;case 95:return e.prev=95,e.t1=e.catch(89),e.abrupt("return");case 98:return q=R.parse_message_func?R.parse_message_func(U):U,e.next=101,a.confirm(null==q?void 0:q.message);case 101:return W="function"==typeof R.process_result_params?R.process_result_params(n.base_form.data,n.getEnvironmentParams(),U):R.process_result_params,e.next=104,s.callHcmOpenApi(R.process_result_api,W);case 104:return z=e.sent,R.result_tip&&z&&a.notify(z.message?z.message:t.label+f("translate")("successfully_executed")),n.afterSubmit(),e.abrupt("break",167);case 108:if(N=null,!(K=t.options).init_data_api){e.next=115;break}return H="function"==typeof K.init_data_params?f("valueToFunc")(K.init_data_params)(n.base_form.data,n.getEnvironmentParams()):K.init_data_params,e.next=114,s.callHcmOpenApi(K.init_data_api,H);case 114:N=e.sent;case 115:return V=K.component_alter_param&&f("valueToFunc")(K.component_alter_param)(n.base_form.data,n.getEnvironmentParams(),N),e.next=118,n.openSelectorDialog(t,V||{});case 118:if(Y=e.sent,!K.process_result_api){e.next=125;break}return G=("function"==typeof K.process_result_params?K.process_result_params(n.base_form.data,n.getEnvironmentParams(),F()(Y)?Y:[Y]):params.process_result_params)||{},e.next=123,s.callHcmOpenApi(K.process_result_api,G);case 123:J=e.sent,K.result_tip&&J&&a.notify(J.message?J.message:t.label+f("translate")("successfully_executed"));case 125:return n.$dialog&&(null===(u=t.options)||void 0===u?void 0:u.close_on_success)&&n.afterSubmit(_res__resultult),n.fetchData&&n.fetchData(),e.abrupt("break",167);case 128:return e.next=130,L.exprParse(t.data,h,n.getExprContext());case 130:return X=e.sent,e.abrupt("return",n.common_import(X));case 132:return e.next=134,L.exprParse(t.data,h,n.getExprContext());case 134:return Q=e.sent,e.abrupt("return",n.common_export(Q));case 136:return e.next=138,L.exprParse(t.options,h,n.getExprContext());case 138:return Z=e.sent,e.abrupt("return",n.openCodeEditor(Z));case 140:return e.next=142,L.exprParse(t.options,h,n.getExprContext());case 142:return(null==(ee=e.sent)?void 0:ee.params)&&C()(n.base_form.data,(null==ee?void 0:ee.params)||{}),e.abrupt("return",n.base_form.$getData());case 145:return e.next=147,L.exprParse(t.options,h,n.getExprContext());case 147:return ne=e.sent,e.next=150,j.upload(ne);case 150:return oe=e.sent,a.closeTarget("hcUploadFile"),e.abrupt("return",oe);case 153:return e.next=155,P.openDrafts(angular.extend(n.getEnvironmentParams()||{},{model_meta:n.model_meta}),ve({createInfo:n.createItem,editInfo:n.editItem},(null===(_=t.options)||void 0===_?void 0:_.draftAction)||{}),t.options);case 155:return ae=e.sent,e.abrupt("return",ae);case 157:return e.next=159,L.exprParse(t.options||{},h,n.getExprContext());case 159:return le=e.sent,e.abrupt("return",P.saveDraft(angular.extend({is_field_list_info:n.is_field_list_info},n.getEnvironmentParams()||{},{model_meta:n.model_meta},(null===(p=n.$dialog)||void 0===p?void 0:p.options)||{}),n.base_form.data,null===(m=t.options)||void 0===m?void 0:m.slient).then((function(){var e,t,i;if(null==le?void 0:le.status){if("resolve"===(null==le?void 0:le.status))null===(i=n.$dialog)||void 0===i||i.resolve_data(n.base_form.data||{});else if("reject"===(null==le?void 0:le.status)){var o;null===(o=n.$dialog)||void 0===o||o.reject_data(n.base_form.data||{})}else if("close"===(null==le?void 0:le.status)){var a;null===(a=n.$dialog)||void 0===a||a.dialog_close()}}else n.is_field_list_info?null===(e=n.$dialog)||void 0===e||e.reject_data(n.base_form.data||{}):null===(t=n.$dialog)||void 0===t||t.resolve_data(n.base_form.data||{})})).catch((function(e){var t;null===(t=n.$dialog)||void 0===t||t.reject_data(e)})).finally((function(){var e;null===(e=n.$dialog)||void 0===e||e.dialog_close()})));case 161:return n.draft&&(n.data=n.draft,n.base_form.$setData(n.data),n.draft=void 0,n.base_form.$setTip(f("valueToFunc")(n.metaParse(n.model_meta.tip))())),e.abrupt("break",167);case 163:return e.next=165,n.loadData();case 165:return e.abrupt("return",e.sent);case 166:return e.abrupt("return",t.func&&t.func(I()(h).length?h:void 0,I()(h).length?h:void 0));case 167:case"end":return e.stop()}}),e,null,[[89,95]])})));return function(t){return e.apply(this,arguments)}}(),n.openCodeEditor=function(){var e=ie()(te.a.mark((function e(t){var i,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,"function"==typeof(null==t?void 0:t.data)?f("valueToFunc")(null==t?void 0:t.data)(n.getEnvironmentParams()):null==t?void 0:t.data;case 2:return i=e.sent,e.next=5,a.getDialog(he.a).title("function"==typeof(null==t?void 0:t.title)?f("valueToFunc")(null==t?void 0:t.title)(n.getEnvironmentParams()):(null==t?void 0:t.title)||"脚本编辑").show(angular.extend(i||{},{modifier:null==t?void 0:t.modifier}));case 5:return o=e.sent,e.abrupt("return",{data:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openListDialog=function(){var e=ie()(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.getCommonAction("COMMON_LIST_DIALOG")({options:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getExprContext=function(){return ve({FORM_DATA:function(e){var t,i;return null===(t=n.base_form)||void 0===t||null===(i=t.data)||void 0===i?void 0:i[e]},FORM:function(){return n.base_form},FORMINFO:function(){return n.parseChildren(n.base_form.data)},ENV:function(){return n.getEnvironmentParams()},AUTH:function(){return n.auth}},n.getAlterExprContext())},n.getAlterExprContext=function(){return{}},n.workflowCreateAndStart=function(){var e=ie()(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.createAndStartWorkflow(ve(ve({},n),{},{form_data:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.common_import=function(e){var t=e||{},i=null!==t.empty_selector&&void 0!==t.empty_selector&&t.empty_selector;return a.getDialog(me.default).params({category:t.category||n.model_meta.model,category_name:t.title||n.model_meta.description,params:{file_name:t.file_name||n.model_meta.description+".xlsx",is_from_config:t.is_from_config||!1,import_class:t.import_class,role:t.role,use_column_defs:t.use_column_defs||!1,data_row:t.data_row||2,impMethod:null===t.imp_method||void 0===t.imp_method?2:t.imp_method,imp_tips:t.imp_tips,empty_mode:null===t.empty_mode||void 0===t.empty_mode?i?1:0:t.empty_mode,empty_selector:i,empty_des_list:null===t.empty_des_list||void 0===t.empty_des_list?[]:t.empty_des_list,choose_method:t.choose_method,show_business_key:t.show_business_key,show_keys:t.show_keys,extend_property:angular.extend({id:n.base_form.data.id,relate_field:n.params.alter.parent_field,filter_dict:n.params.alter.filter_dict||{id:n.base_form.data.id},extra_property:n.params.alter.extra_property||{}},f("valueToFunc")(t.extend_property)()||{})},callback:n.fetchData}).size("middle").title(f("translate")("common_hcm_import_dialog_title")).show()},n.common_export=function(e){var t=e||{};return M.list_export({category:t.category||n.model_meta.model,file_name:t.file_name||n.model_meta.description,is_from_config:t.is_from_config||!1,celery_mode:t.celery_mode||!1,message:t.message||"send",export_class:t.export_class,is_column_defs:t.is_column_defs||!1,extend_property:angular.extend(t.extend_property||{},{filter_dict:angular.extend(n.params.alter.filter_dict||{id:n.base_form.data.id},(t.extend_property||{}).filter_dict||{}),filter_str:(t.extend_property||{}).filter_str,extra_property:angular.extend(n.params.alter.extend_property||{},(t.extend_property||{}).extra_property||{})})})},n.getEnvironmentParams=function(){return angular.extend({},u.params,n.params||{},n.customEnvironmentParams||{})},n.customEnvironmentParams={},n.metaSetup=function(e){a.getDialog(se.a).show({meta_key:e,biz_type:"info",model:n.model_meta.model,state:n.getMetaState(),metaParse:n.metaParse}).then((function(){n.loadModelMeta(!0)}))},n.workflowSubmit=function(){var e=ie()(te.a.mark((function e(i){var o,a,l,r,c,s,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.parseData(n.data),q()(o=n.base_form.fields).call(o,(function(e){"hc-field-list"===e.component&&(l.childrens=l.childrens||{},l.childrens[e.options.key]=n.base_form.data[e.key])})),!(r=O()(a=n.base_form.fields).call(a,(function(e){return"hc-field-list"===e.component}))).length){e.next=7;break}return e.next=6,n.validChildrenData(r,l);case 6:c=e.sent;case 7:if(i.field_map&&(l=x()(s=I()(l)).call(s,(function(e,t){return e[i.field_map[t]||t]=l[t],e}),{})),d=function(){var e={bill_obj:"@bill_obj_name=form_data_detail@bill_obj_type=table@",business_number:i.business_number};l=n.getWfInitData(l),k.createAndStartWorkflowInstanceV3({wf_data:e,form_data:l}).then((function(e){e.success?(t.show_warning("流程创建成功"),n.close(),n.fetchData(),t.hide_waiting()):(t.show_warning("流程创建失败，请联系管理员"),t.hide_waiting())}),(function(){t.show_warning("流程创建失败，请联系管理员"),t.hide_waiting()}))},!c){e.next=13;break}t.show_warning(c),e.next=15;break;case 13:return e.next=15,d();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getSerialOrder=function(e){return s.callHcmOpenApi("get.next.serial.order",e)},n.validFormData=function(){var e=ie()(te.a.mark((function e(t){var i,o,l,r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===(i=n.base_form.$validData())){e.next=7;break}return c=null===(o=O()(r=n.base_form.tab_groups).call(r,(function(e){var t;return y()(t=e.field_list).call(t,(function(e){return e===n.base_form.valid_error_key}))})))||void 0===o||null===(l=o[0])||void 0===l?void 0:l.key,n.base_form.$setCurrentTab(c),a.notify(i,"warning"),g((function(){var e=angular.element(".form-notify")[0].offsetTop;angular.element(".hc-dialog-content").last().animate({scrollTop:e},"fast")}),100),e.abrupt("return",!1);case 7:return e.next=9,n.preSubmit(t);case 9:if(e.sent){e.next=11;break}return e.abrupt("return",!1);case 11:if(!1!==t){e.next=13;break}return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.submit=ie()(te.a.mark((function e(){var o,a,l,r,c,s,d,u,_,p;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=function(){var e=ie()(te.a.mark((function e(){var o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.validFormData(c);case 2:if(e.t1=e.sent,e.t0=!1===e.t1,e.t0){e.next=6;break}e.t0=n.submitting;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return");case 8:n.submitting=!0,e.t2=n.mode,e.next="new"===e.t2?12:"update"===e.t2?14:16;break;case 12:return o=i.createItem(c),e.abrupt("break",17);case 14:return o=i.updateItem(c.id,c),e.abrupt("break",17);case 16:o=i.editItem(c.id,c);case 17:o.then((function(e){n.afterSubmit(e)}),(function(){n.submitting=!1})).finally((function(){t.hide_waiting()}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(e){return new S.a((function(t){return g((function(){return t()}),e)}))},!I()(n.base_form.asyncTask).length){e.next=12;break}return e.next=5,r(800);case 5:if(!I()(n.base_form.asyncTask).length){e.next=12;break}return e.next=8,r(400);case 8:if(!I()(n.base_form.asyncTask).length){e.next=12;break}return t.show_warning("字段关联未执行完毕, 请再次点击提交"),console.error("form_relation未执行完毕"),e.abrupt("return");case 12:if(c=n.parseData(n.data),c=n.parseChildren(c),!n.model_meta||!O()(o=n.model_meta.childrens).call(o,(function(e){return!e.is_form})).length){e.next=22;break}if(d=!0,u=null,c.childrens={},q()(s=n.sub_model.model_list||[]).call(s,(function(e){c.childrens[e.key]=e.list_model.data,e.required&&!e.list_model.data.length&&(d=!1,u=e.name)})),d){e.next=22;break}return t.show_warning(u+"不能为空"),e.abrupt("return");case 22:if(!(_=O()(a=n.base_form.fields).call(a,(function(e){return"hc-field-list"===e.component}))).length){e.next=27;break}return e.next=26,n.validChildrenData(_,c);case 26:p=e.sent;case 27:if(!p){e.next=31;break}t.show_warning(p),e.next=33;break;case 31:return e.next=33,l();case 33:case"end":return e.stop()}}),e)}))),n.openSelectorDialog=function(){var e=ie()(te.a.mark((function e(t,n){var i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.getCommonAction("COMMON_LIST_DIALOG")(ve(ve({},t),{},{options:ve(ve(ve({},t.options),(null===(i=t.options)||void 0===i?void 0:i.component_options)||{}),n||{})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.validData=ie()(te.a.mark((function e(){var i,o,a,l,r,c,s,d;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.parseData(n.data),a=n.parseChildren(a),!n.model_meta||!O()(i=n.model_meta.childrens).call(i,(function(e){return!e.is_form})).length){e.next=10;break}if(r=!0,c=null,a.childrens={},q()(l=n.sub_model.model_list||[]).call(l,(function(e){a.childrens[e.key]=e.list_model.data,e.required&&!e.list_model.data.length&&(r=!1,c=e.name)})),r){e.next=10;break}return t.show_warning(c+"不能为空"),e.abrupt("return");case 10:if(!(s=O()(o=n.base_form.fields).call(o,(function(e){return"hc-field-list"===e.component}))).length){e.next=15;break}return e.next=14,n.validChildrenData(s,a);case 14:d=e.sent;case 15:if(!d){e.next=20;break}return t.show_warning(d),e.abrupt("return",!1);case 20:return e.next=22,n.validFormData(a);case 22:return e.t0=e.sent,e.abrupt("return",!(!1===e.t0));case 24:case"end":return e.stop()}}),e)}))),n.parseChildren=function(e){var t,i,o,a=null===(t=n.model_meta)||void 0===t||null===(i=t.childrens)||void 0===i?void 0:q()(i).call(i,(function(e){return e.key}));return q()(o=n.base_form.fields).call(o,(function(t){"hc-field-list"===t.component&&v()(a).call(a,t.key)>-1&&(e.childrens=e.childrens||{},e.childrens[t.options.key]=n.base_form.data[t.key])})),e},n.windowOpen=function(e){window.open(f("valueToFunc")(e.url)(n.data))},n.validChildrenData=function(e,t){var i=r.defer(),o=[];return q()(e).call(e,(function(e){var n,i,a,l;(null===(n=t[e.key])||void 0===n?void 0:n.length)&&!(null===(i=e.options.list_meta)||void 0===i?void 0:i.length)&&e.options.service&&o.push(S.a.all([e.options.service.getBizMeta("info",null===(a=e.options)||void 0===a?void 0:a.state),e.options.service.getBizMeta("list",null===(l=e.options)||void 0===l?void 0:l.state)]).then((function(t){var n=T()(t,2),i=n[0],o=n[1];return{key:e.key,info_meta:i,list_meta:o}})))})),r.all(o).then((function(o){var a=null,l={};q()(o).call(o,(function(i){var o=ce.a.jsonEval(i.info_meta.fields,{FORM_DATA:function(e){var t;return null===(t=l)||void 0===t?void 0:t[e]},BASE_FORM:function(){return n.base_form},BASE_ALTER:function(){return n.params.alter},SCOPE:n});if(t[i.key])for(var r in t[i.key])if(t[i.key].hasOwnProperty(r)){var c=t[i.key][r];l=c;var s=f("validData")(o,c,i.list_meta.fields);if(s){var d,u=h()(r)+1;a=(null==e||null===(d=O()(e).call(e,(function(e){return e.key===i.key}))[0])||void 0===d?void 0:d.label)+"第"+u+"行数据"+s.msg;break}}})),i.resolve(a)})),i.promise},n.close=function(){var e;null===(e=n.$dialog)||void 0===e||e.check_close()},n.metaParse=function(e){var t={angular:angular,SCOPE:n,$q:r,$http:c,location:window.location,document:document,$filter:f,STATE:u,$hcDialog:a,CRUDService:i,dataService:s,hcDialogSelector:l,selectorService:d,commonSelectorService:_,MOMENT:ue.a,documentPreviewService:E,CommonInfoDialog:fe.a,WINDOW:window,FORM_DATA:function(e){var t,i;return null===(t=n.base_form)||void 0===t||null===(i=t.data)||void 0===i?void 0:i[e]},FORM:function(){return n.base_form},TODAY:function(){return ue()().format("YYYY-MM-DD")}};return angular.extend(t,n.getAlterEvalContext()),ce.a.jsonEval(e,t)},n.dynamicAction=function(e,t){return i.dynamicAction(n.model_meta.model,n.getMetaState(),"info",e,t)},n.initSubList=function(e){O()(e).call(e,(function(e){return!e.is_form})).length&&n.sub_model.$setOptions({sub_list_func:n.sub_list_func,operateRow:n.operateRow,parent_data:n.base_form.data,model_list:e,state:n.getMetaState(),mode:n.params.mode,id:(n.params.data||{}).id,SubDialogCRUDService:n.SubDialogCRUDService,load_model_meta_params:n.load_model_meta_params,list_meta:n.children_list_meta})},n.actionFunc=function(){var e=ie()(te.a.mark((function e(t){var i,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=y()(i=n.actions).call(i,(function(e){return e.key===t})),e.abrupt("return",o?n.parseAction(o):console.log("table_action_not_found".concat(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.initMetaHooks=function(e){var t,i;e&&(n.hooks_meta=e,B()(i=I()(n.hooks_meta)).call(i,(function(e){var t;"function"==typeof n.hooks_meta[e]?n[e]=n.hooks_meta[e]:"object"===m()(n.hooks_meta[e])&&(null===(t=n.hooks_meta[e])||void 0===t?void 0:t.action)&&null!==n.hooks_meta[e]&&(n[e]=ie()(te.a.mark((function t(){var i;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.actionFunc(null===(i=n.hooks_meta[e])||void 0===i?void 0:i.action);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))})));B()(t=["metaLoadedAsync","loadDataAfterAsync"]).call(t,(function(e){n[e]||(n[e]=function(){var e=ie()(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},n.initCustomPackage=ie()(te.a.mark((function t(){var i,o;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=(null===(i=n.hooks_meta)||void 0===i?void 0:i.custom_pkg_list)||[])&&o.length&&B()(o).call(o,function(){var t=ie()(te.a.mark((function t(n){var i,o;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTemplate(n.index);case 2:i=t.sent,o=i.template_config,ce.a.windowEval(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)}))),n.checkDraft=function(){var e;return P.checkDraft(angular.extend(n.getEnvironmentParams()||{},(null===(e=n.$dialog)||void 0===e?void 0:e.options)||{})).then((function(e){e&&(n.draft=e.draft,n.params.alter?n.params.alter.draft_id=e.draft_id:n.params.alter={draft_id:e.draft_id},n.base_form.$setTip("检测到当前表单存在草稿, 可点击应用草稿按钮加载此草稿"))}))},n.getAllDirty=function(){var e=ie()(te.a.mark((function e(t,i){var o,a,l,r,c,s,d,u,_,p,m;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],l=[],B()(o=I()(n.base_form.field_metas)).call(o,(function(e){var t,i,o,l;(null===(t=n.base_form.field_metas[e])||void 0===t||null===(i=t.options)||void 0===i?void 0:i.collector)&&a.push(null===(o=n.base_form.field_metas[e])||void 0===o||null===(l=o.options)||void 0===l?void 0:l.collector)})),r=!0,c=!1,e.prev=5,d=ae()(a);case 7:return e.next=9,d.next();case 9:return u=e.sent,r=u.done,e.next=13,u.value;case 13:if(_=e.sent,r){e.next=30;break}return p=_,e.prev=16,e.next=19,p.getDirty(t,i);case 19:m=e.sent,l.push({model:p.getModel(),state:p.getMetaState(),dirty:m}),e.next=27;break;case 23:if(e.prev=23,e.t0=e.catch(16),t){e.next=27;break}throw new Error("校验不通过");case 27:r=!0,e.next=7;break;case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(5),c=!0,s=e.t1;case 36:if(e.prev=36,e.prev=37,r||null==d.return){e.next=41;break}return e.next=41,d.return();case 41:if(e.prev=41,!c){e.next=44;break}throw s;case 44:return e.finish(41);case 45:return e.finish(36);case 46:return e.abrupt("return",O()(l).call(l,(function(e){return I()(e.dirty).length})));case 47:case"end":return e.stop()}}),e,null,[[5,32,36,46],[16,23],[37,,41,45]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getFormAlterInfo=function(){return n.params.alter},n.setDialogOperates=function(){n.default_operate=n.default_operate||[{label:"取消",func:n.close,key:"back",left:!1},{label:"确定",func:n.submit,key:"submit",default:!0,is_important:!0,left:!1}]},n.afterSubmit=function(e){var t,i;P.removeDraft(n.getEnvironmentParams()||{}),null===(t=n.$dialog)||void 0===t||t.resolve_data(e),null===(i=n.$dialog)||void 0===i||i.dialog_close()},n.getLoadModelMetaParams=function(){return["info",n.getMetaState()]},n.getLoadDataParams=function(){return[n.params.data.id,null,ve({},n.getLoadDataExtraProperty(n.getEnvironmentParams()))]},n.getLoadDataExtraProperty=function(e){return{}},n.info_meta=null,n.group_meta=null,n.children_list_meta=null,n.ChildInfoMetaFunc=function(){},n.initBefore=function(){},n.initAfter=function(e){},n.parseData=function(e){return angular.extend({},e)},n.preSubmit=function(){return!0},n.meta_state=null,n.getMetaState=function(){return n.meta_state||u.params.meta_state},n.setOperates=function(e,t,i){var o;null===(o=n.$dialog)||void 0===o||o.operates(e,t,i)},n.getFormContainer=function(){return $(".hcm-content-body")},n.getAlterEvalContext=function(){return{}},n.metaLoaded=function(e){},n.getFormData=function(e){return e},n.setMetaBefore=function(){},n.show_warning=function(e,n,i){t.show_warning(e,n,i)},n.getWfInitData=function(e){return e},n.setTitle=function(e){document.title=e},n.getIdentityName=function(){var e;return n.getMetaState()?G()(e="".concat(n.getModel(),"-")).call(e,n.getMetaState()):n.getModel()},n.getModel=function(){var e;return null===(e=n.model_meta)||void 0===e?void 0:e.model},n.$on("$destroy",(function(){try{var e;null===(e=n.afterDestory)||void 0===e||e.call(n)}catch(e){console.log(e)}}))}]),t.a="BaseCRUDInfoCtrl"},luRN:function(e,t){e.exports='<div class="hcm-content-body" ng-model=\'model\' ng-if="model" ng-init="init()">\n    <div id="hc-cmd" class=""></div>\n</div>'},lv7E:function(e,t){e.exports='<style>\n    .select-date-month {\n        display: inline-block;\n        width: 130px;\n        padding: 1px;\n        height: 26px;\n        line-height: 18px;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        background-color: #fff;\n    }\n\n    .select-date-month .select-date-input {\n        margin-left: 10px;\n        width: 90px;\n        height: 22px;\n        border: 0px;\n        outline: none;\n        font-size: 12px;\n        display: inline-block;\n        padding: 0;\n    }\n\n    .select-date-month .select-date-input-button {\n        float: right;\n        margin: 2px 7px 0px 0px;\n        cursor: pointer;\n    }\n\n    .select-date-month .select_panel {\n        position: absolute;\n        top: 50px;\n        background-color: #fff;\n        border-radius: 2px;\n        box-shadow: 0 0 17px rgba(0,0,0,.07);\n        z-index: 1201;\n    }\n\n    .select-date-month .table-striped thead {\n        border-bottom: 1px solid #ccc;\n    }\n</style>\n<div class="select-date-month" ng-init="init()">\n    <input class="select-date-input" type="text" ng-model="date_month" placeholder="{{object.placeholder}}" />\n\n    <div class="icon icon-hcm-calendar select-date-input-button" ng-click="show_select_panel($event)"></div>\n    <div ng-if="is_show_select_panel" class="select_panel">\n        <datetimepicker data-ng-model="value" data-datetimepicker-config="{ startView:\'month\', minView:\'month\'}" data-on-set-time="set_date(newDate, oldDate)"></datetimepicker>\n    </div>\n</div>\n'},lyrW:function(e,t){e.exports='<div class=\'hc-dialog-window\' ng-style="$ctrl.model.options.styles" ng-class="{\'anchor\': $ctrl.model.is_anchor}">\n    <div class="hc-dialog-content">\n        <ul class="hc-dialog-sub-dropdown" ng-if="params.list">\n            <li ng-repeat="item in params.list" key="{{item.key}}"\n                ng-class="{\'selected\': item.id  && item.id === params.current.id, \'divider\': item.divider, \'disabled\': (item.disabled|valueToFunc)() }"\n                ng-style="params.itemStyles" ng-click="$ctrl.resolveItem(item, $event)"\n                ng-mouseover="$ctrl.dealMouseOver($event, item)" ng-mouseleave="$ctrl.dealMouseLeave($event, item)">\n                <span class="label" hc-title="{{item.name || (item.label|valueToFunc)()}}"\n                    options="{mode: \'tip\', showOnOverflow: true}">\n                    <span>{{item.name||(item.label|valueToFunc)()}}\n                        <span ng-if=" item.list&&item.list.length" class="label icon-hcm-arrow-right-solid"></span>\n                    </span>\n                    <span class="count high-light">{{item.count}}</span>\n            </li>\n        </ul>\n    </div>\n</div>'},"m+YK":function(e,t){e.exports='<ul class="hc-dialog-dropdown" ng-if="params.list" ng-class="{\'is-multi\': $ctrl.isMulti}">\n    <li ng-repeat="item in params.list" key="{{item.key}}" ng-class="{\'divider\': item.divider,\'has-children\': item.children && item.children.length>0,\n        \'disabled\': (item.disabled|valueToFunc)() }" ng-style="params.itemStyles"\n        ng-click="$ctrl.resolveItem(item, $event)">\n        <span class="label" hc-title="{{item.name || (item.label|valueToFunc)()}}"\n            ng-class="{\'selected\': item.id  && item.id === params.current.id, \'disabled\': (item.disabled|valueToFunc)()}"\n            options="{mode: \'tip\', showOnOverflow: true}" ng-mouseenter="$ctrl.dealMouseOver($event, item)"\n            ng-mouseleave="$ctrl.dealMouseLeave($event, item)">\n            <span ng-bind-html="item.name||(item.label|valueToFunc)()|toTrusted">\n            </span>\n            <span ng-if="item.list&&item.list.length" class="label icon-hcm-arrow-right-solid"></span>\n            <span class="count high-light">{{item.count}}</span>\n        </span>\n\n        <ul class="children-list" ng-if="item.children && item.children.length>0">\n            <li ng-repeat="child in item.children"\n                ng-class="{\'selected\': child.id  && child.id === params.current.id, \'divider\': child.divider, \'disabled\': (child.disabled|valueToFunc)() }"\n                ng-style="params.itemStyles" ng-click="$ctrl.resolveItem(child, $event)">\n                <span class="label" hc-title="{{child.name || (child.label|valueToFunc)()}}"\n                    options="{mode: \'tip\', showOnOverflow: true}" ng-mouseenter="$ctrl.dealMouseOver($event, child)"\n                    ng-mouseleave="$ctrl.dealMouseLeave($event, child)">\n                    <span>{{child.name||(child.label|valueToFunc)()}}\n                    </span>\n                    <span class="count high-light">{{child.count}}</span>\n            </li>\n        </ul>\n    </li>\n</ul>'},mBLv:function(e,t,n){e.exports='<div id="file-selector-pc-page" data-ng-init="init()" ng-if="is_selecting">\n    <div class="file-selector-block">\n        <div class="header-title">\n            请选择图片文件\n        </div>\n\n        <div class="path-block">\n            <div class="path-item">\n                <div class="path-logo path-logo-cloud icon-hcm-cloud"></div>\n            </div>\n            <div class="path-item" ng-repeat="_path in folder_name_his">\n                <div class="path-arrow icon-hcm-arrow-down-solid" ng-if="$index > 0"></div>\n                <div class="path-logo icon-hcm-file-normal" ng-if="$index > 0"></div>\n                <div class="path-name" ng-click="BackToParentFolder($index)">{{_path}}</div>\n            </div>\n            <div class="path-item">\n                <div class="path-arrow icon-hcm-arrow-down-solid" ng-if="folder_name_his.length > 0"></div>\n                <div class="path-logo icon-hcm-file-normal" ng-if="folder_name_his.length > 0"></div>\n                <div class="path-name">{{folder_name}}</div>\n            </div>\n        </div>\n\n        <div class="files-block" ng-click="clickBlank()">\n            <div class="file-item-box" ng-repeat="_file in files">\n                <div id="file-item-{{_file.id}}" class="file-item"\n                     ng-class="(_file.id == select_item.id)?\'file-selected\':\'\' ">\n                    <div class="file-type-logo" ng-click="fileItemClick(_file,$event)">\n                        <img ng-src="{{_file.type|staticImageIconList}}"\n                             ng-if="file_type.indexOf(_file.type) >= 0">\n                        <img src="'+n("rnWY")+'"\n                             ng-if="file_type.indexOf(_file.type) < 0">\n                    </div>\n                    <div class="file-name" ng-show="_file.id != select_item.id || !re_name">{{_file.name}}</div>\n                </div>\n            </div>\n            <div class="no-files-block" ng-if="files.length == 0 && !pre_add_folder.type">\n                <div class="text">哎哟~ 文件夹是空的~</div>\n            </div>\n        </div>\n\n        <div class="menu-bar">\n            <div class="menu-item blue"\n                 ng-class="folder_id == 0 ? \'gray\' : \'blue\'" ng-click="BackToParentFolder()">\n                返回上一级\n            </div>\n            <div class="menu-item blue" ng-click="cancel()">\n                取消\n            </div>\n        </div>\n    </div>\n</div>'},mJ0u:function(e,t,n){"use strict";n("srGB");var i=n("nR2m"),o=n("h0oS"),a=n.n(o),l=n("1hbj");window.app.controller("CommonModelViewDialogCtrl",["BaseCRUDService","$controller","$rootScope","$scope",function(e,t,n,o){var a=e.getModelService(o.$dialog.options.model_name);t(i.a,{$scope:o,CRUDService:a,InfoDialog:Object(l.a)(o.$dialog.options.model_name)}),o.meta_state=o.$dialog.options.meta_state}]),t.a=function(e,t){return{controller:"CommonModelViewDialogCtrl",template:a.a,model_name:e,meta_state:t}}},meT6:function(e,t){e.exports='<div class="hcmBtnListDir" ng-if="btnData" ng-init="initHcmBtn()">\n    <div class="old_hcm-btn-list btn-groups" >\n        <div class="btn-item" ng-transclude></div>\n        <div class="btn-item" ng-repeat="item in btn track by $index">\n            <button ng-disabled={{item.disabled}} ng-click="btnClickFuc($event,item)"\n                    class="btn-pc" ng-class="{\'primary\':$first&&!item.disabled,\'secondary\':!$first&&!item.disabled}">\n                {{item.name}}\n                <i ng-if="item.list" class="icon-hcm-arrow-down-solid"></i>\n            </button>\n            <div class="drop-down-list" ng-if="item.list" ng-show="item.showMulti" ng-click="$event.stopPropagation();">\n                <button ng-repeat="listItem in item.list"\n                        ng-disabled={{item.disabled}} ng-click="btnClickFuc($event,listItem,item);">\n                    {{listItem.name}}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>'},mhNF:function(e,t){e.exports='<div class="info_score">\n    <div class="info">\n        <hc-info-card ng-model="$ctrl.obj_info" options="$ctrl.obj_detail_list" detail="$ctrl.obj_detail"></hc-info-card>\n    </div>\n    <div class="card-left-info" ng-class="$ctrl.is_show_board?\'card-left-pc\':\'card-left-board\'">\n        <div class="message-image">\n            <img class="print-head" ng-if="$ctrl.obj_info.photo && $ctrl.obj_info.type===1"\n                ng-src="{{($ctrl.obj_info.photo||\'\') | hcPhoto:\'40\'}}">\n            <span ng-if="!$ctrl.obj_info.photo && $ctrl.obj_info.type===1" class="print-head"\n                ng-class="{1:\'boy\',2:\'girl\',3:\'boy\'}[$ctrl.obj_info.gender]">\n                {{$ctrl.obj_info.name.substring(0, 1)}}\n            </span>\n            <span ng-if="$ctrl.obj_info.type===2" class="company" ng-class="{1:\'boy\',2:\'girl\',3:\'boy\'}[$ctrl.obj_info.gender]">\n                {{\'perf_org\'|translate}}\n            </span>\n        </div>\n        <div class="message-detail" ng-if="$ctrl.obj_info.type===1">\n            <span>{{$ctrl.obj_info.name}}</span>\n        </div>\n        <div class="message-detail" ng-if="$ctrl.obj_info.type===2">\n            <span class="company-title">{{$ctrl.obj_info.name}}</span>\n        </div>\n        <div class="perf-level"\n             ng-show="$ctrl.is_show_assess && $ctrl.is_generate_perf_level && $ctrl.perf_level != null">\n            <span>{{\'perf_level\'|translate}}</span>\n            <span>{{$ctrl.perf_level}}</span>\n        </div>\n        <div class="assess-score" ng-show="$ctrl.is_show_assess && $ctrl.assess_score != null">\n            <span>{{\'perf_assess_score\'|translate}}</span>\n            <span>{{$ctrl.assess_score}}</span>\n        </div>\n        <div class="current-score" ng-show="$ctrl.is_show_current && $ctrl.current_score != null && $ctrl.assess_score == null">\n            <span>{{\'perf_current_score\'|translate}}</span>\n            <span>{{$ctrl.model.current_score}}</span>\n        </div>\n    </div>\n</div>\n'},mpRo:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).data,o=e.col,a=e.customCellClass,l=e.dirty,r=e.id_key,c=e.index,s=e.height,d=e.lineClamp,u=e.setTitle,_=e.diffDirty;return t+=' <div class="table-cell ',t+=i.getCellClass(n,o,a,l,r),t+='"  col-index=',t+=o.index,t+=" col-key=",t+=o.key,t+='\n         style="left:',t+=o.left,t+="px;width:",t+=o.width||80,t+="px;height:100%; ",t+=i.getCellStyle(n,o),t+="\">\n        <div class='cell-content' style='",t+=i.getContentStyle(c,s,d),t+="' title='",t+=i.getTitle(n,o,l,u),t+="'>",t+=i.getCellText(n,o,l,_,r),t+="</div>\n </div>\n"}},mqRb:function(e,t,n){"use strict";var i=n("ZbhI"),o=n.n(i),a=n("o+MX"),l=n.n(a),r=n("/FZm"),c=n.n(r),s=n("5PDf"),d=n.n(s),u=n("FLGM"),_=n.n(u),p=n("k8Y/"),m=n.n(p);n("CoJ3").a.service("commonPanelService",["$filter",function(e){return{getDialogOperates:function(e){return[{label:"返回",left:!0,func:function(){var t;(null===(t=e.$dialog)||void 0===t?void 0:t.close)&&"function"==typeof e.$dialog.close?e.$dialog.close():e.$dialog.dialog_close()},key:"back"},{label:"确定",key:"submit",func:function(){var t,n,i,o=angular.copy(2===e.list_model.selector_type?e.list_model.selected_items:e.list_model.selected_item);i="system"===e.params.type?{selected_info:o,extra_property:{effect_date:e.tree_model&&e.tree_model.effect_date}}:"simple_list"===(null===(t=e.list_model)||void 0===t?void 0:t.view)?e.list_model.data:0===(null===(n=e.list_model)||void 0===n?void 0:n.selector_type)?null:o,e.$dialog.resolve_data(i),e.$dialog.dialog_close()},disabled:function(){var t,n,i,o;return"simple_list"!==(null===(t=e.list_model)||void 0===t?void 0:t.view)&&0!==(null===(n=e.list_model)||void 0===n?void 0:n.selector_type)&&(2===(null===(i=e.list_model)||void 0===i?void 0:i.selector_type)?0===e.list_model.selected_items.length:!(null===(o=e.list_model)||void 0===o?void 0:o.selected_item))},default:!0}]},getEnabledActions:function(e){var t,n,i,a,r,s=["setup"],u=_()(t=d()(n=e.$dialog.options.operates).call(n,(function(e){return!e.dynamic}))).call(t,(function(t){var n;return t=angular.extend(t,c()(n=e.list_btn_model.actions).call(n,(function(e){return e.key===t.key})))}));return m()(l()(i=_()(a=d()(r=e.list_btn_model.actions).call(r,(function(e){return o()(s).call(s,e.key)>-1||"selector"===e.type}))).call(a,(function(t,n){var i;return t.actions&&(t.actions=_()(i=t.actions).call(i,(function(t){return{dynamic:!0,label:t.label,hide:t.hide,key:t.key,roles:t.roles,sequence:t.sequence||10*(n+1),options:t.options,disabled:t.disabled,func:function(){return e.parseAction(t)},after_func:t.after_func,default:t.is_important,target:t.target,left:void 0===t.left||t.left}}))),{key:t.key,dynamic:!0,label:t.label,func:function(){return e.parseAction(t)},after_func:t.after_func,disabled:t.disabled||function(){return"MULTI_ITEM"===t.condition?!e.list_model.selected_items||0===e.list_model.selected_items.length:"ITEM"===t.condition&&(!e.list_model.selected_items||1!==e.list_model.selected_items.length)},condition:t.condition,sequence:t.sequence,actions:t.actions,default:t.is_important,left:t.left||!1,hide:t.hide,target:t.target,options:t.options}}))).call(i,u),["sequence"])}}}])},mshF:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));n("07d7"),n("5s+n");var i=n("UF4K"),o=n.n(i),a=n("OBge"),l=n.n(a),r=(n("sMBO"),n("a0dU")),c=n.n(r),s=(n("ls82"),n("SPx3")),d=n.n(s),u=n("EQVl"),_=n.n(u);n("qCNw");window.app.controller("HcChartDialogCtrl",["$scope","$rootScope","$controller","dataService","$state",function(e,t,n,i,o){var a=[{label:"返回",func:function(){e.$dialog.resolve_data(),e.$dialog.dialog_close()},default:!1}],l=e.params.data.name?e.params.data.name:JSON.parse(o.params.custom_params).captionn;e.$dialog.title(l).operates(a),e.init=d()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBoard();case 2:case"end":return t.stop()}}),t)}))),e.getBoard=d()(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.callHcmOpenApi("perf.activity.get.activity.analysis",{activity_id:e.params.data.activity_id},null,!0).then((function(t){e.columnar_chart_option=t.columnar_chart_option,e.pie_chart_option=t.pie_chart_option}));case 2:case"end":return t.stop()}}),t)})))}]);var p={controller:"HcChartDialogCtrl",template:_.a},m=n("1GJp"),f=(n("oVuX"),n("TWNs"),n("rB9j"),n("JfAA"),n("3xDC")),h=n.n(f),g=n("lHQ6"),v=n.n(g),b=n("eLKs"),y=n.n(b),w=n("FLGM"),x=n.n(w),k=n("WxoT"),$=n.n(k),O=n("RXMP"),D=n.n(O),C=n("zrGd"),M=n.n(C);n("mUzH");window.app.controller("BudgetDetailMonthDataImportCtrl",["$q","$filter","$rootScope","$controller","$scope","dataService","contextService","$hcListNew","$hcDialog","cryptoService",function(e,t,i,o,a,l,r,s,u,_){a.edit_data=a.params.data,a.init=function(){a.$dialog.title("月度分解数据设置").operates([{label:"确定",func:a.saveData,default:!0}]),a.initSheet()},a.initSheet=d()(c.a.mark((function e(){var t,i,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.HA_Decrypt("3S5KUgj8SCJZCfJsoR6GOeOeVUrWyCM0VJR8uvMJW0wMxUcWoTwET9ajWZ1Uh16ONPUMiu121GXphhl3zymQNCCSmLRVY+4tQp1DUuC2v0K4iMFBacs9cyNJlbXz/xmvzUO09ZQB6HaFyR0jIBok51z0qRAyj2V25mclxqSk5l4+ImaEy3KySeR+SsVwYhzgXrj4iz0ADZxKHg/SoSi8PfJQ1ryvJd4WfqUcl3eVxuLYXKL4rBjra9qTJAsoXvfS05IESFw/7GuqFmLZQid5yJ+clJJy83T5H/iowxJPOJt64JlkhDCqhZ0NbzDw8dZXFmJfHFCui556LM7XN/wRz9IlR/nY634DbSTfVFb53A5K9Xyyg7OFWZRNzl+b0V+fkqUmV94csTvNFZ/js7VkRjkZ5sgOTPN5yn3GyrWgaMBAjq1TycVCcSHhP260an64MdCi03lV0WTwn5YIssBvx73NXheyzM9itklm9v0SuhpNLmNCDIWDmz8M/PKYDoXuWzyIUfyYGXDxRLiPGg9WCYnAja0XtSXIDYfQtQNwQFGLNVZf1QHxrAceuKXmMcGT8ZgXiJrl97mvQC5EsJx0M4/XVnnKuMfn76/Nltmu2FPSS/hbXrPz3L8X1L1aKf7+jc/SKjnRPe0ceXp9cbk98yaetmHJdaVVRcv05ztm2i5sN9MEyC1t9k3fFiAf3fI5cl4HjFHK6T8EWX/dK28si9JHM2wpWazu9A5xHcTNggbz/3906eBr1IWF09aTZ2t8XMOLnkIqjDokC3dBnIHAuSOURV2bVuCVm2D/YXQvX5GyvfPg+XYgAdDGfYC3BxruxlZHcIXR60bWm2Qn9sqS+cWhWixC3gmedTKqyuAgdEBX8Rv0xED4UzfvNKZ7xt222wQSI7xYa8oskOdRybT9i8IUiFonbdg/2zrPsCH9KvD+tQCpPPOKNaOivOg48LNQg2mOVYmngJNoNlDrFswgb1V0xUmsqmEnDB5bkcMqHNue975r6XVNASFztbfrP/4q"),e.prev=1,e.next=4,l.callHcmOpenApi("hcm.template.load.template",{_key:"spread_license_key.json",is_system:!1});case 4:i=e.sent,JSON.parse(i||"{}").key&&(t=JSON.parse(i).key),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.next=13,Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"SNuF"));case 13:a.GC=e.sent.getGC(t),a.spread=new a.GC.Spread.Sheets.Workbook(document.getElementById("import"),{sheetCount:1}),o=a.spread.contextMenu.menuData,r=[],D()(o).call(o,(function(e){if(e){if("gc.spread.insertComment"===e.name||"gc.spread.sort"===e.name||"gc.spread.pasteOptions"===e.name||"gc.spread.hideRows"===e.name||"gc.spread.unhideRows"===e.name||"gc.spread.hideColumns"===e.name||"gc.spread.unhideColumns"===e.name||"gc.spread.insertRows"===e.name||"gc.spread.insertColumns"===e.name||"gc.spread.deleteRows"===e.name||"gc.spread.deleteColumns"===e.name||"gc.spread.pasteAll"===e.name||"gc.spread.pasteFormula"===e.name||"gc.spread.pasteValues"===e.name||"gc.spread.pasteFormatting"===e.name||"gc.spread.pasteFormatting"===e.name)return;r.push(e)}})),a.spread.contextMenu.menuData=r,a.spread.options.newTabVisible=!1,a.spread.options.allowSheetReorder=!1,a.spread.options.grayAreaBackColor="white",a.spread.options.tabStripVisible=!1,a.sheet=a.spread.getSheet(0),a.spreadNS=a.GC.Spread.Sheets,a.sheet.options.protectionOptions={allowSelectLockedCells:!0,allowSelectUnlockedCells:!0,allowFilter:!0,allowSort:!1,allowResizeRows:!1,allowResizeColumns:!0,allowEditObjects:!0,allowDragInsertRows:!0,allowDragInsertColumns:!0,allowInsertRows:!1,allowInsertColumns:!1,allowDeleteRows:!0,allowDeleteColumns:!1},a.sheet.options.isProtected=!0,a.sheet.defaults.rowHeight=30,a.sheet.defaults.colWidth=120,a.sheet.options.frozenlineColor="Transparent",a.style=new a.GC.Spread.Sheets.Style,a.style.locked=!1,a.style1=new a.GC.Spread.Sheets.Style,a.style1.locked=!0,a.GC.Spread.Common.CultureManager.culture("zh-cn"),a.setSheet();case 36:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.setSheet=function(){l.callHcmOpenApi("budget.detail.get.month.data.list",{budget_program_id:a.params.data.budget_program_id,plan_id:a.params.data.plan_id,ids:a.params.data.ids}).then((function(e){var t;a.sourceData=JSON.parse($()(e.list)),a.frozen_count=e.frozen_count,a.key_dict=e.key_dict,a.sheet.frozenColumnCount(a.frozen_count),a.row_count=e.list.length,a.row_count>0&&(a.sheet.setDataSource(e.list),a.sheet.setColumnVisible(0,!1)),a.sheet_fields=e.fields,x()(t=e.unlock_list).call(t,(function(e){return a.sheet.setStyle(-1,e,a.style)})),a.range=new a.GC.Spread.Sheets.Range(0,0,a.row_count,a.sheet_fields.length),a.rowFilter=new a.GC.Spread.Sheets.Filter.HideRowFilter(a.range),a.sheet.rowFilter(a.rowFilter),a.rowFilter.filterDialogVisibleInfo({sortByValue:!1,sortByColor:!1,filterByColor:!1,filterByValue:!0,listFilterArea:!0}),a.initAlign(),a.initSheetValidation(e.validate_list),a.initCombo(e.index_dict),a.initRatioToValue(e.index_dict)}))},a.initRatioToValue=function(e){var t;y()(t=a.spread).call(t,a.GC.Spread.Sheets.Events.CellChanged,(function(t,n){var o=a.sheet.getValue(n.row,e.budget_type),l=a.sheet.getValue(n.row,e.control_type);n.col===e.budget_type||n.col===e.control_type||null!==o&&null!==l?n.col===e.budget_type?1===n.newValue?(a.sheet.setValue(n.row,e.month_ratio,null),a.sheet.setValue(n.row,e.month_budget,null)):0===n.newValue&&(a.sheet.setValue(n.row,e.cumulative_ratio,null),a.sheet.setValue(n.row,e.cumulative_budget,null)):0===o&&n.col===e.month_ratio&&"value"===n.propertyName&&null!==n.newValue?a.sheet.setValue(n.row,e.month_budget,Math.round(.01*n.newValue*a.sheet.getValue(n.row,e.total_budget)*1e4)/1e4):0!==o||n.col!==e.cumulative_ratio&&n.col!==e.cumulative_budget||null===n.newValue?1===o&&n.col===e.cumulative_ratio&&"value"===n.propertyName&&null!==n.newValue?a.sheet.setValue(n.row,e.cumulative_budget,Math.round(.01*n.newValue*a.sheet.getValue(n.row,e.total_budget)*1e4)/1e4):1!==o||n.col!==e.month_ratio&&n.col!==e.month_budget||null===n.newValue||(i.show_warning("滚动预算请维护累计预算比例"),a.sheet.setValue(n.row,n.col,null)):(i.show_warning("按月预算请维护月度预算比例"),a.sheet.setValue(n.row,n.col,null)):(i.show_warning("请先选择预算策略和控制方式"),a.sheet.setValue(n.row,n.col,null))}))},a.initCombo=function(e){a.combo1=new a.GC.Spread.Sheets.CellTypes.ComboBox,a.combo2=new a.GC.Spread.Sheets.CellTypes.ComboBox,a.combo1.editable(!1).items([{text:"不控制",value:1},{text:"提醒",value:2},{text:"严格控制",value:3}]).editorValueType(a.GC.Spread.Sheets.CellTypes.EditorValueType.value),a.combo2.editable(!1).items([{text:"按月预算",value:0},{text:"滚动预算",value:1}]).editorValueType(a.GC.Spread.Sheets.CellTypes.EditorValueType.value);for(var t=0;t<a.row_count;t++)a.sheet.setCellType(t,e.control_type,a.combo1,a.GC.Spread.Sheets.SheetArea.viewport),a.sheet.setCellType(t,e.budget_type,a.combo2,a.GC.Spread.Sheets.SheetArea.viewport)},a.initAlign=function(){a.sheet.getCell(a.row_count,2).hAlign(1),a.sheet.getRange(-1,0,-1,a.sheet_fields.length,3).hAlign(1),a.sheet.getRange(-1,0,-1,a.sheet_fields.length,3).vAlign(1)},a.initSheetValidation=function(e){var t;function n(){this.name="REGEX",this.maxArgs=2,this.minArgs=2,this.typeName="RegExFunction"}n.prototype=new a.GC.Spread.CalcEngine.Functions.Function,n.prototype.isContextSensitive=function(){return!0},n.prototype.evaluate=function(){var e=arguments[0],t=e.source.getValue(e.row,e.column),n=new RegExp(arguments[1]);return n.test(t.toString())},a.sheet.addCustomFunction(new n);var o=new a.spreadNS.DataValidation.createFormulaValidator('REGEX("^(-?[1-9]\\d{0,15}|0)(\\.\\d{1,4})?$")');o.ignoreBlank(!0),o.errorStyle(a.spreadNS.DataValidation.ErrorStyle.stop),x()(e).call(e,(function(e){return a.sheet.setDataValidator(0,e,a.row_count,1,o)})),y()(t=a.sheet).call(t,a.spreadNS.Events.ValidationError,(function(e,t){i.show_warning("请输入数字且最多四位小数"),t.validationResult=a.spreadNS.DataValidation.DataValidationResult.discard}))},a.initTotalEmpCount=function(e){a.sheet.clearCustomNames(),a.sheet.addRows(a.row_count,1),a.sheet.addCustomName("empCount","=$B$1:$B$"+a.row_count,0,0,"comment"),a.sheet.setFormula(a.row_count,1,"=SUBTOTAL(103,empCount)"),x()(e).call(e,(function(e){var t=a.numToString(e+1);a.sheet.addCustomName("field"+t,"=$"+t+"$1:$"+t+"$"+a.row_count,0,0,"comment");var n="=SUBTOTAL(109,field"+t+")";a.sheet.setFormula(a.row_count,e,n)})),a.sheet.setStyle(a.row_count,-1,a.style1),a.sheet.setValue(a.row_count,0,"合计",2)},a.numToString=function(e){var t=[];t.length=0;return function e(n){var i=n-1,o=v()(i/26),a=i%26;t.push(String.fromCharCode(64+v()(a+1))),o>0&&e(o)}(e),h()(t).call(t).join("")},a.saveData=function(){var e,t=x()(e=a.sheet.getDirtyRows()).call(e,(function(e){return e.item}));l.callHcmOpenApi("budget.detail.save.dirty.month.data",{data:t,key_dict:a.key_dict}).then((function(e){e&&(i.show_warning("保存成功"),a.$dialog.resolve_data(),a.$dialog.dialog_close())}))},a.$dialog.close=function(){var e,t=x()(e=a.sheet.getDirtyRows()).call(e,(function(e){return e.item}));t.length>0?u.confirm("是否保存更改?",[{caption:"不保存",func:function(){a.$dialog.resolve_data(),a.$dialog.dialog_close()}},{caption:"保存",func:function(){l.callHcmOpenApi("budget.detail.save.dirty.month.data",{data:t,key_dict:a.key_dict}).then((function(e){e&&(i.show_warning("保存成功"),a.$dialog.resolve_data(),a.$dialog.dialog_close())}))}}]):(a.$dialog.resolve_data(),a.$dialog.dialog_close())}}]);var S={controller:"BudgetDetailMonthDataImportCtrl",template:M.a},E=n("pu+a"),P=function(){function e(){}return e.getCustomDialogCtrl=function(e){var t=this;return new l.a((function(n,i){t._customDialogMap.get(e)().then((function(e){angular.element(document.body).injector().get("$ocLazyLoad").load([{name:"hcm.common"},{name:"myApp"}]).then((function(){n(e)}))}))}))},e._customDialogMap=new o.a([["wfMeatSettingController",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"U7Dv")).then((function(e){return e.default}))}],["WorkflowDetailInfoDialogCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"m3R+")).then((function(e){return e.default}))}],["WorkflowDetailInfoCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"m3R+")).then((function(e){return e.default}))}],["WorkflowDetailNewInfoDialogCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"Y4b5")).then((function(e){return e.default}))}],["WorkflowDetailNewInfoCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"Y4b5")).then((function(e){return e.default}))}],["wfTestDialogCtr",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"HoBq")).then((function(e){return e.default}))}],["WorkFlowDefineFlexCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"IDzB")).then((function(e){return e.default}))}],["billDialog",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"D0aJ")).then((function(e){return e.default}))}],["billProcessCtrlDialog",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"b3DQ")).then((function(e){return e.default}))}],["billThirdProcessCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"TATb")).then((function(e){return e.default}))}],["v3wfContrastCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"pn3v")).then((function(e){return e.default}))}],["billBaseCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"J2Pj")).then((function(e){return e.default}))}],["billCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"D0aJ")).then((function(e){return e.default}))}],["workflowOpinionCtrl",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"8sdf")).then((function(e){return e.default}))}],["hcWorkflowEmployeeSimpleSelectorPanel",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"1nnc")).then((function(e){return e.default}))}],["timeScheduleSelectDates",function(){return Promise.all([n.e(0),n.e(21)]).then(n.bind(null,"iC6G")).then((function(e){return e.default}))}],["NoticeTemplateDialog",function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"RcUj")).then((function(e){return e.default}))}],["AIInterviewTestInfo",function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"8c4J")).then((function(e){return e.default}))}],["RecruitSettingEvaluation",function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"B8ci")).then((function(e){return e.default}))}],["changeRecordsStateDialog",function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"42D+")).then((function(e){return e.default}))}],["previewRecruitJobDialog",function(){return Promise.all([n.e(0),n.e(18)]).then(n.bind(null,"Gdzf")).then((function(e){return e.default}))}],["trainViewFileCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"eTpL")).then((function(e){return e.default}))}],["trainAddQuestionDialogCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"P7t1")).then((function(e){return e.default}))}],["trainPreviewQuestionDialogCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"Kda3")).then((function(e){return e.default}))}],["codeToSignUpCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"bDZL")).then((function(e){return e.default}))}],["trainSettingDialogCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"MW1G")).then((function(e){return e.default}))}],["mediaViewCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"7B0n")).then((function(e){return e.default}))}],["progressBarCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"wJBw")).then((function(e){return e.default}))}],["PrintBillTemplateSelectorCtrl",function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,"ZPkB")).then((function(e){return e.default}))}],["HCMChatTaskDialog",function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"Qhh7")).then((function(e){return e.default}))}],["HCMChatDialog",function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"1rXg")).then((function(e){return e.default}))}],["HCMChatStreamDialog",function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"6ApT")).then((function(e){return e.default}))}],["HCMAIDialog",function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"TYOo")).then((function(e){return e.default}))}],["showMessageController",function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,"vl5y")).then((function(e){return e.default}))}],["pluginSettingCtr",function(){return Promise.all([n.e(0),n.e(16)]).then(n.bind(null,"97oh")).then((function(e){return e.default}))}],["HCMBoardReportDialog",function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"ZxEw")).then((function(e){return e.default}))}],["ringChannelDialogCtrl",function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"O8Q7")).then((function(e){return e.default}))}],["NineMapDialogCtrl",function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"n53G")).then((function(e){return e.default}))}],["NineMapSettingDialogCtrl",function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"lgxm")).then((function(e){return e.default}))}],["QRCodeCtrl",function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,"suqs")).then((function(e){return e.default}))}],["CustomDialogCtrl",function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"e2F8")).then((function(e){return e.default}))}],["CustomDialogNewCtrl",function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"RZs8")).then((function(e){return e.default}))}],["DecisionTreeDialogCtrl",function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"uev0")).then((function(e){return e.default}))}],["HcChartDialogCtrl",function(){return new l.a((function(e){return e(p)}))}],["HCMCodeEditorCtrl",function(){return new l.a((function(e){return e(m.a)}))}],["BudgetDetailMonthDataImportCtrl",function(){return new l.a((function(e){return e(S)}))}],["SalaryAssistEntryBatchInputCtrl",function(){return new l.a((function(e){return e(E.a)}))}],["HCMScriptEditorDialog",function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"yTSj")).then((function(e){return e.default}))}],["HCMIframeDialog",function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"i+p1")).then((function(e){return e.default}))}],["HCMSectionUploadDialog",function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"D+G+")).then((function(e){return e.default}))}]]),e}()},mu9B:function(e,t){e.exports='<div ng-init="init()" class="tree-selector-panel">\n    <hc-simple-tree model="tree_model"></hc-simple-tree>\n</div>\n'},mwol:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("sMBO"),n("07d7"),n("5s+n"),n("p532");var i=n("ZbhI"),o=n.n(i),a=n("KYsz"),l=n.n(a),r=n("6UaR"),c=n.n(r),s=n("mnMc"),d=n.n(s),u=n("o+MX"),_=n.n(u),p=n("WxoT"),m=n.n(p),f=n("3bjL");window.app.service("HCMCRUDImpExpService",["dataService","hcUploadFile","$hcDialog","$q","$rootScope","weChatService","contextService",function(e,t,n,i,a,r,s){var u={getImpInfo:function(t){return e.callHcmOpenWebSocket("imp.get.info",{category:t},t)},statusCheck:function(e){return"true"===e||!0===e},getShowTip:function(e,t,i){return n.getDialog(f.a).params({title:e||"导出",category:t,file_name:i}).size("middle").show()},getSubShowTip:function(e,t,o,a,l){var r=i.defer();return n.getDialog(f.a).params({title:e||"导出",category:t,file_name:o,is_sub_list:a}).size("middle").show().then((function(e){u.getSubListResult(t,l).then((function(e){r.resolve(e.data)}))})),r.promise},show_sub_import:function(e,t,n,o){var a=i.defer(),l=n+(u.statusCheck(e)?"校验":"导入");return u.getSubShowTip(l,t,n,!0,o).then((function(e){a.resolve(e)})),a.promise},show_import:function(e,t,n){var i=n+(u.statusCheck(e)?"校验":"导入");return u.getShowTip(i,t)},info_upload:function(e,i,o,a){var l=a&&a.extend_property.extra_property&&a.extend_property.extra_property.state?i+"_"+a.extend_property.extra_property.state:i,r={url:"/document/imp/dynamic_common_upload",params:{category:i,check:!!e,params:m()(a)},size:15,file_type:["zip","xlsx","xls"],success_tips:"请下载导入报告查看数据导入结果!"};t.upload(r).then((function(){n.closeTarget("hcUploadFile"),u.show_import(e,l,o)}))},dynamic_file_upload:function(e,i,o){var a={url:"/document/imp/dynamic_file_upload",params:{category:i,params:m()(o)},size:15,file_type:["zip","xlsx","xls","lrmx","doc"]};return u.getCheckStatus(o.category).then((function(i){return i.running?u.show_import(e,o.category,"文件上传"):t.upload(a).then((function(){return n.closeTarget("hcUploadFile"),u.show_import(e,o.category,"文件上传")}))}))},sub_list_info_upload_mediately:function(e,o,l,r,c,s){var d=i.defer(),_={url:c||"/document/imp/dynamic_common_upload",params:{category:o,check:!!e,params:m()(r)},size:15,file_type:["zip","xlsx","xls"],success_tips:"请下载导入报告查看数据导入结果!"};return t.upload(_).then((function(t){n.closeTarget("hcUploadFile"),t.success||a.show_warning("导入失败，请联系管理员！"),u.show_sub_import(e,o,l,s).then((function(e){d.resolve(e)}))})),d.promise},sub_list_info_upload:function(e,o,a,l,r){var c=i.defer(),s={url:r||"/document/imp/dynamic_common_upload",params:{category:o,check:!!e,params:m()(l)},size:15,file_type:["zip","xlsx","xls"],success_tips:"请下载导入报告查看数据导入结果!"};return t.upload(s).then((function(e){n.closeTarget("hcUploadFile"),c.resolve(e.data)})),c.promise},getCheckStatus:function(t){var n=i.defer();return e.callHcmOpenApi("imp.check.status?category="+t,{category:t},null,!0).then((function(e){n.resolve(e)})),n.promise},getSubListResult:function(t,n){var o=i.defer();return e.callHcmOpenApi("imp.get.sub.result",{category:t,timestamp:n},null,!0).then((function(e){o.resolve(e)})),o.promise},download_report:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a.report_name=n,u.getCheckStatus(e).then((function(n){if(n.running)t("数据生成中...");else if(n.download){var i=a.report_name?a.report_name+".zip":"";window.open(window.hcm_wengen+"/document/imp/download?category="+encodeURIComponent(e)+"&name="+i+window.hcm_env_post)}else t("请导入数据...")}))},getTemplateStatus:function(t){var n=i.defer();return e.callHcmOpenApi("deploy.template.list.category",{categorys:t},null,!0).then((function(e){n.resolve(e)})),n.promise},dynamic_download_template:function(e,t,n,i,o){u.getTemplateStatus([e]).then((function(t){t.success&&t.data[e]?window.open(window.hcm_wengen+"/document/loadsourcedocument/"+t.data[e]+window.hcm_env_pre):window.open(window.hcm_wengen+"/document/imp/dynamic_download_template?category="+encodeURIComponent(e)+"&is_from_config="+n+"&extra_property="+m()(i)+"&file_name="+o+window.hcm_env_post)}))},operation:function(e,t,n,i){var o=i.extend_property.extra_property&&i.extend_property.extra_property.state?t+"_"+i.extend_property.extra_property.state:t;u.getCheckStatus(o).then((function(a){a.running?u.show_import(e,o,n):u.info_upload(e,t,n,i)}))},subListMediateOperation:function(e,t,n,o){var a=i.defer(),l=o.extend_property.extra_property&&o.extend_property.extra_property.state?t+"_"+o.extend_property.extra_property.state:t,r=(new Date).getTime();return o.timestamp=r,u.getCheckStatus(l).then((function(i){i.running?u.show_import(e,l,n):u.sub_list_info_upload_mediately(e,t,n,o,"/document/imp/dynamic_table_upload_mediate"+window.hcm_env_pre,r).then((function(e){a.resolve(e)}))})),a.promise},subListOperation:function(e,t,n,o){var a=i.defer(),l=o.extend_property.extra_property&&o.extend_property.extra_property.state?t+"_"+o.extend_property.extra_property.state:t;return u.getCheckStatus(l).then((function(i){i.running?u.show_import(e,l,n):u.sub_list_info_upload(e,t,n,o,"/document/imp/dynamic_table_upload"+window.hcm_env_pre).then((function(e){a.resolve(e)}))})),a.promise},downLoad:function(e,t){try{var n=t?"&category="+t:"";if(r.isWeChat()||r.isDing()||r.is_Em_cloud()||r.is_lark()){var i,o,a,l;console.log("in download2");var c=s.getContext("auth"),d=window.hcm_wengen+_()(i=_()(o="/document/exp/common_excel?file_name=".concat(e,"&downloader=")).call(o,null==c||null===(a=c.employee)||void 0===a?void 0:a.id,"&comp_id=")).call(i,null==c||null===(l=c.company)||void 0===l?void 0:l.id)+n+window.hcm_env_post;return console.log("is we chat download begin: ".concat(d)),r.downloadShortUrl(d)}console.log("in download3");var u=window.hcm_wengen+"/document/exp/common_excel?file_name=".concat(e)+n+window.hcm_env_post;window.open(u)}catch(e){console.log(e),alert(e)}},zipdownLoad:function(e){var t=window.hcm_wengen+"/document/exp/dynamic_zip_file?file_name=".concat(e)+window.hcm_env_post;r.isWeChat()||r.isDing()||r.is_Em_cloud()?r.openNewPage(t,e).then((function(e){e&&window.open(e,"_blank")})):window.open(document.location.origin+t)},list_export:function(t){var n=i.defer(),o={value:0,message:"准备开始导出..."};a.show_waiting(),t.celery_mode||a.show_warning(o.message);var l=t.extend_property.extra_property&&t.extend_property.extra_property.state?t.category+"_"+t.extend_property.extra_property.state:t.category;return u.getCheckStatus(l).then((function(i){if(i.running)t.celery_mode?u.getShowTip(t.file_name,l):a.show_warning(o.message),a.hide_waiting();else{var r,c=(null==t?void 0:d()(r=t.category).call(r,"#"))?"export":null==t?void 0:t.category,s="dynamic.common.list.export",_={category:t.category,extend_property:t.extend_property,file_name:t.file_name,is_from_config:t.is_from_config,export_class:t.export_class,celery_mode:t.celery_mode,column_defs:t.column_defs,is_column_defs:t.is_column_defs||!1,message:t.message||"send"};"MULTI_EXPORT"===t.exp_type?(s="dynamic.multi.list.export",_={category:t.category,extend_property:t.extend_property,file_name:t.file_name,celery_mode:t.celery_mode,export_class:t.export_class,exp_type:t.exp_type,is_from_config:t.is_from_config||!1,selected_data:t.selected_data||[],childs:t.childs||[],is_column_defs:t.is_column_defs||!1,message:t.message||"send",targets:t.targets||{}}):"MULTI_EXPORT_FILES"===t.exp_type&&(s="multi.exp.model.files",_={params:angular.copy(t)}),e.callHcmOpenWebSocket(s,_,c).then((function(e){"Error"!=e&&(t.celery_mode?u.getShowTip(t.file_name,l,e):u.downLoad(e,l)),n.resolve(!0)}),(function(e){a.show_warning(e),t.export_result_false=!0,n.resolve(!1)}),(function(e){o={value:e.progress,message:e.info}})).finally((function(e){t.export_result_false||t.celery_mode||a.show_warning("导出完成..."),a.hide_waiting()}))}})),n.promise},customer_export:function(t){var n=i.defer(),o={value:0,message:"准备开始导出..."};a.show_waiting(),t.celery_mode||a.show_warning(o.message);var l=t.extra_property&&t.extra_property.state?t.category+"_"+t.extra_property.state:t.category;return u.getCheckStatus(l+"_customer").then((function(i){i.running?(t.celery_mode?u.getShowTip(t.file_name,l):a.show_warning(o.message),a.hide_waiting()):e.callHcmOpenWebSocket("dynamic.customer.export",{params:t}).then((function(e){t.celery_mode?u.getShowTip(t.file_name,l+"_customer",e):u.downLoad(e),n.resolve(!0)}),(function(){n.resolve(!1)}),(function(e){o={value:e.progress,message:e.info}})).finally((function(){t.celery_mode||a.show_warning("导出完成..."),a.hide_waiting()}))})),n.promise},zip_file_export:function(t){var n=i.defer(),o={value:0,message:"准备开始导出..."};a.show_waiting(),t.celery_mode||a.show_warning(o.message);var l=t.category+"zip_export";return u.getCheckStatus(l).then((function(i){i.running?(t.celery_mode?u.getShowTip(t.file_name,l):a.show_warning(o.message),a.hide_waiting()):e.callHcmOpenWebSocket("dynamic.export.zip.file",{category:t.category,params:t}).then((function(e){t.celery_mode?u.getShowTip(t.file_name,l,e):u.zipdownLoad(e),n.resolve(!0)}),(function(){n.resolve(!1)}),(function(e){o={value:e.progress,message:e.info}})).finally((function(){t.celery_mode||a.show_warning("导出完成..."),a.hide_waiting()}))})),n.promise},flex_field_import:function(){var e=i.defer();return t.upload({url:"/document/flex/meta_import",size:30,file_type:["zip","biz","bmp"],params:{}}).then((function(){n.closeTarget("hcUploadFile"),a.show_warning("导入成功"),e.resolve(!0)})),e.promise},flex_field_export:function(e){var t=e;t?n.confirm("确定导出模型 "+t.name+" ?",[{caption:"确认",func:function(){var e=i.defer(),n=window.hcm_wengen+"/document/flex/meta_export?model_name="+t.name+window.hcm_env_post;return window.open(document.location.origin+n),e.resolve(!0),e.promise}}]):a.show_warning("请选择一个模型")},customer_template_export:function(){n.confirm("确定导出模版  ?",[{caption:"确认",func:function(){var e=i.defer();return window.open(document.location.origin+"/api/open_api/customer_template_export"),e.resolve(!0),e.promise}}])},multi_language_import:function(){var e=i.defer();return t.upload({url:"/document/multi_language_import",size:10,file_type:["xlsx","xls"],params:{}}).then((function(t){e.resolve(!0)})),e.promise},multi_language_export:function(t,i){var o=t;o?n.confirm("确定导出当前模型模板 "+o.name+" ?",[{caption:"确认",func:function(){e.callHcmOpenApi("document/multi_language_export",{model_info:o.name,export_nature:i}).then((function(e){e.success&&a.show_warning("正在生成个性化语言文件, 请稍后在个人消息中查看")}))}}]):n.confirm("确定导出全部模型模板  ?",[{caption:"确认",func:function(){e.callHcmOpenApi("document/multi_language_export",{export_nature:i}).then((function(e){e.success&&a.show_warning("正在生成个性化语言文件, 请稍后在个人消息中查看")}))}}])},dynamic_func_import:function(){var e=i.defer();return t.upload({url:"/document/dynamic_script/file_import",size:30,file_type:["zip","biz","bmp"],params:{}}).then((function(){n.closeTarget("hcUploadFile"),a.show_warning("导入成功"),e.resolve(!0)})),e.promise},dynamic_func_export:function(e){var t=c()(e)?l()(e).call(e,(function(e,t){var n;return _()(n="".concat(e,",")).call(n,t.category)}),""):e.category;e?n.confirm("确定导出云函数?",[{caption:"确认",func:function(){var e=i.defer(),n=window.hcm_wengen+"/document/dynamic_script/file_export?scripts="+t+window.hcm_env_post;return window.open(document.location.origin+n),e.resolve(!0),e.promise}}]):a.show_warning("请至少选择一个云函数")},common_multi_language_export:function(t){var i={i18n:"en"},o=(null==t?void 0:t.url)||"document/common_multi_language_export";angular.extend(i,t),n.confirm("确定导出多语言数据 ?",[{caption:"确认",func:function(){var t=window.hcm_wengen+o+window.hcm_env_pre;e.callHcmOpenApi(t,i).then((function(e){e.success&&a.show_warning("正在生成个性化语言文件, 请稍后在个人消息中查看")}))}}])},common_multi_language_import:function(e){var n=i.defer(),o={url:(null==e?void 0:e.url)||"/document/common_multi_language_import",size:10,file_type:["xlsx","xls"],params:{}};return t.upload(o).then((function(e){n.resolve(!0)})),n.promise},sample_customer_import:function(e){var l,r=i.defer(),c={size:30,file_type:["zip","biz","bmp","docx","xlsx"]};(angular.extend(c,e),null!=c.url&&angular.isString(c.url)&&c.url.length>0)&&(c.url=window.hcm_wengen+c.url,c.url=-1!==o()(l=c.url).call(l,"?")?c.url+window.hcm_env_post:c.url+window.hcm_env_pre);return t.upload(c).then((function(e){n.closeTarget("hcUploadFile"),e.success?r.resolve(e):(a.show_warning(e.data.description,"error"),r.reject(e))}),(function(e){r.reject(e)})),r.promise}};return u}])},nJdR:function(e,t){e.exports='<div ng-class="{\'query_panel\':params.query}" class="selector-panel"\n     ng-init="init()">\n    <div class="selector-search" ng-if="client===\'pc\' || showMobileSearch" ng-hide="params.hideSearch === true">\n        <span class="icon icon-hcm-check"></span>\n        <input class="input" placeholder="{{\'Start searching\'|translate}}..." type="search" autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               spellcheck="false"\n               ng-model="search_key.key"\n               ng-model-options="{\'debounce\':500}">\n        <span class="icon icon-hcm-delete-circle-solid right"\n              ng-if="search_key.key"\n              ng-click="search_key.clear()"></span>\n    </div>\n    <div class="selector-list">\n        <div class="selector-item" ng-if="is_append_show"\n             ng-click="itemAppend($event)">\n            <span class="append">\n                <span>添加&nbsp</span>\n                <span class="key">{{search_key.key}}</span>\n                <span>&nbsp项目...</span>\n            </span>\n        </div>\n        <div class="selector-item" ng-repeat="_d in data_list track by $index"\n             ng-click="itemSelect(_d,$event)" ng-class="{\'sub_selected\': isSubSelected(_d), \'is_disabled\': isDisabled(_d)}">\n            <span ng-class="isSelected(_d)?\'selected\':\'\'" hc-title options="tipOptions"\n                ng-bind-html="((params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label) | toTrusted"\n                >\n                \x3c!--此处取值规则若更改需通知框架负责导入的老师 --\x3e\n                \x3c!-- {{(params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label }} --\x3e\n            </span>\n            <div class="icon-hcm-right selected" ng-if="isSelected(_d)"></div>\n            <div class="icon-hcm-arrow-right" ng-if="_d.list.length"></div>\n        </div>\n    </div>\n\n    <div class="wait" ng-if="refresh">{{\'Loading\'|translate}}...</div>\n</div>\n\n\x3c!--目前只支持两层级 --\x3e\n<div ng-class="{\'query_panel\':params.query}" class="selector-panel" id="child-list" ng-show="isSubShow">\n    <div class="selector-search" ng-if="client===\'pc\'||showMobileSearch">\n        <span class="icon icon-hcm-check"></span>\n        <input class="input" placeholder="{{\'Start searching\'|translate}}..." type="search" autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               spellcheck="false"\n               ng-model="search_sub_key.key"\n               ng-model-options="{\'debounce\':500}">\n        <span class="icon icon-hcm-delete-circle-solid right"\n              ng-if="search_sub_key.key"\n              ng-click="search_sub_key.clear()"></span>\n    </div>\n    <div class="selector-list">\n        <div class="selector-item" ng-repeat="_d in sub_list"\n             ng-click="itemSelect(_d)">\n            <span ng-class="isSelected(_d)?\'selected\':\'\'" hc-title options="tipOptions"\n                ng-bind-html="((params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label) | toTrusted">\n                \x3c!-- {{(params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label }} --\x3e\n            </span>\n            <div class="icon-hcm-right selected" ng-if="isSelected(_d)"></div>\n        </div>\n    </div>\n</div>\n\n\n\n'},nR2m:function(e,t,n){"use strict";var i=n("5PDf"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("o+MX"),c=n.n(r),s=n("zl2E");window.app.controller("BaseCRUDViewDialogCtrl",["$scope","$controller","$rootScope","CRUDService","InfoDialog",function(e,t,n,i,a){t(s.a,{$scope:e,CRUDService:i,InfoDialog:a}),e.initAfter=function(){},e.$watch("view_btn_model.actions",(function(){var t,n,i;e.view_btn_model.actions.length&&e.$dialog.operates(e.roleParse(c()(t=l()(n=e.view_btn_model.actions).call(n,(function(t){return{dynamic:!0,label:t.label,func:function(){return e.parseAction(t)},options:t.options,after_func:t.after_func,default:t.is_important,hide:t.hide,left:t.left||!1,roles:t.roles}}))).call(t,o()(i=e.$dialog.options.operates).call(i,(function(e){return!e.dynamic})))))})),e.getItemID=function(){return e.params.id},e.metaLoaded=function(e){},e.$dialog.close=function(){e.is_data_changed&&e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.view_btn_meta=[{label:"返回",key:"back",cancel:!0,func:e.$dialog.close}]}]),t.a="BaseCRUDViewDialogCtrl"},nSVW:function(e,t){e.exports='<div class="dialog-simple-list" data-ng-init="$ctrl.$onInit()">\n    <div class="hcm-hc-list-container">\n        <hc-list-new model="$ctrl.list_model"></hc-list-new>\n        <hc-list-no-data model="$ctrl.list_model" caption="没有设置任何数据源的过滤"></hc-list-no-data>\n    </div>\n</div>\n'},"nc/B":function(e,t,n){"use strict";var i=n("OBge"),o=n.n(i),a=n("mrSG"),l=n("XQQm"),r=n("2Ql6"),c=function(e){function t(t,n,i,o,a,l){var r=e.call(this,t,n,i,o,l)||this;return r.scope=t,r.rootScope=n,r.hcDialog=i,r.hcForm=o,r.metaVisService=a,r.$filter=l,r}return Object(a.d)(t,e),t.prototype.$onInit=function(){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=r,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t.prototype.getMeta=function(){return Object(a.c)(this,void 0,o.a,(function(){var t;return Object(a.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.getMeta.call(this)];case 1:return(t=n.sent()).getKey("aggr.ag").options.list=this.metaVisService.AGGR_MODE_LIST,[2,t]}}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","metaVisService","$filter"],t}(l.a),s=n("z/LF"),d=n.n(s);t.a={title:"统计设置",controller:c,template:d.a,size:"small",name:"aggrInfoSetting"}},ntX9:function(e,t,n){"use strict";var i=n("nSVW"),o=n.n(i),a=(n("sMBO"),n("ZbhI")),l=n.n(a),r=n("526F"),c=n.n(r),s=n("qVLo"),d=n.n(s),u=n("eLKs"),_=n.n(u),p=n("5PDf"),m=n.n(p),f=n("FLGM"),h=n.n(f),g=n("WxoT"),v=n.n(g),b=n("OBge"),y=n.n(b),w=n("mrSG"),x=n("r/mB"),k=n("M5Mt"),$=n.n(k),O=n("z/LF"),D=n.n(O),C=n("PFeH"),M=n("Jrze"),S=function(e){function t(t,n,i,o,a,l,r,c){var s=e.call(this,t,n,i,o,a,r,c,l)||this;return s.scope=t,s.rootScope=n,s.hcDialog=i,s.hcForm=o,s.dataService=a,s.$filter=l,s.dataBlockService=r,s.metaVisService=c,s.data_class="formula",s.info_meta=M,s}return Object(w.d)(t,e),t.prototype.getMeta=function(){return Object(w.c)(this,void 0,y.a,(function(){var t,n;return Object(w.e)(this,(function(i){switch(i.label){case 0:return[4,e.prototype.getMeta.call(this)];case 1:return t=i.sent(),n=this,t.getKey("source").options.computeService.getFieldList=function(){var e,t,i,o,a,r=[];(null===(e=n.options)||void 0===e?void 0:e.context)&&r.push({key:"context_params",name:"上下文参数",list_fields:h()(a=n.options.context).call(a,(function(e){return{name:e.label,category:"上下文参数",key:e.key,type:"var"}}))});if(null===(t=n.options)||void 0===t?void 0:t.total_block){var c=angular.copy(n.options.total_block)||[],s=h()(c).call(c,(function(e){return e.key}));(null===(o=null===(i=n.scope.params)||void 0===i?void 0:i.data)||void 0===o?void 0:o.key)&&l()(s).call(s,n.scope.params.data.key)>-1&&(c=$()(c).call(c,0,l()(s).call(s,n.scope.params.data.key))),r.push({key:"block_list",name:"数据块",list_fields:h()(c).call(c,(function(e){return{name:e.name,category:"数据块",key:e.key,type:"var"}}))})}return r},[2,t]}}))}))},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","$filter","dataBlockService","metaVisService"],t}(C.a),E={title:"源数据设置",name:"flex-report-data-info",template:D.a,controller:S},P=n("GRNY"),j=function(e){function t(t,n,i,o,a,l,r,c){var s=e.call(this,t,n,i,o,a,r,c,l)||this;return s.scope=t,s.rootScope=n,s.hcDialog=i,s.hcForm=o,s.dataService=a,s.$filter=l,s.dataBlockService=r,s.metaVisService=c,s.data_class="api",s.info_meta=P,s}return Object(w.d)(t,e),t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","$filter","dataBlockService","metaVisService"],t}(C.a),T={title:"源数据设置",name:"flex-report-data-info",template:D.a,controller:j},A=n("qYgS"),I=n("CoJ3"),L=function(){function e(e,t){this.$q=e,this.dataService=t}return e.prototype.getListMeta=function(e){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.data.block.list.meta",{block_info:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.getAvailFields=function(e){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.data.block.avail.fields",{block_info:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.getData=function(e,t,n,i,o){return void 0===o&&(o=!1),Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(a){switch(a.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.data.block.data",{block_info:e,filter_dict:t,page_index:n,page_size:i,force_refresh:o})];case 1:return[2,a.sent()]}}))}))},e.prototype.previewData=function(e,t,n,i){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.data.block.data",{block_info:e,filter_dict:t,page_index:n,page_size:i,state:"preview"})];case 1:return[2,o.sent()]}}))}))},e.prototype.previewAllData=function(e,t){return Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenWebSocket("flex.data.block.data.all",{block_list:e,filter_dict:t,block_cache:!0})];case 1:return[2,n.sent()]}}))}))},e.prototype.getAllData=function(e,t,n,i){return void 0===n&&(n=[]),void 0===i&&(i=!1),Object(w.c)(this,void 0,void 0,(function(){return Object(w.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.data.block.data.all",{block_list:e,filter_dict:t,context_key:n,force_refresh:i})];case 1:return[2,o.sent()]}}))}))},e.prototype.exportData=function(e,t,n){return this.dataService.callHcmOpenWebSocket("flex.data.block.export",{report_id:e,block_info:t,filter_dict:n})},e.prototype.printData=function(e,t){return this.dataService.callHcmOpenWebSocket("flex.data.block.print",{block_info:e,filter_dict:t})},e.$inject=["$q","dataService"],e}();I.a.service("dataBlockService",L);var F=n("8Auy"),R=n("EUDf"),B=function(e){function t(t,n,i,o,a){var l=e.call(this,t,n,i,o)||this;return l.scope=t,l.rootScope=n,l.hcDialog=i,l.hcList=o,l.dataBlockService=a,l.dataObjMeta=[{key:null,name:"公式",info:E},{key:"formula",name:"公式",info:E},{key:"list",name:"列表",info:A.a},{key:"api",name:"OpenAPI",info:T}],l}return Object(w.d)(t,e),t.prototype.getData=function(){return Object(w.c)(this,void 0,y.a,(function(){return Object(w.e)(this,(function(e){return[2,angular.copy(this.scope.params.data)]}))}))},t.prototype.initDialog=function(){return Object(w.c)(this,void 0,y.a,(function(){var t;return Object(w.e)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initDialog.call(this)];case 1:return n.sent(),t=this,this.scope.$dialog.setClose((function(){v()(t.scope.params.data)!==v()(t.list_model.data)?t.hcDialog.confirm("数据已修改，确认不保存关闭吗?").then((function(){t.scope.$dialog.dialog_close()})):t.scope.$dialog.dialog_close()})),[2]}}))}))},t.prototype.initOptions=function(){return Object(w.c)(this,void 0,y.a,(function(){return Object(w.e)(this,(function(e){return this.options.context=this.scope.params.context,this.options.submit=this.scope.params.submit,this.options.hide_preview=this.scope.params.hide_preview,[2]}))}))},t.prototype.getMeta=function(){return Object(w.c)(this,void 0,y.a,(function(){return Object(w.e)(this,(function(e){return[2,[{key:"key",label:"标识",field:["key"]},{key:"name",label:"名称",field:["name"]},{key:"class",label:"类型",field:["class"],mask:this.dataObjMeta.toObject((function(e){return e.key}),(function(e){return e.name}))}]]}))}))},t.prototype.getAlterOperator=function(){return Object(w.c)(this,void 0,y.a,(function(){var e;return Object(w.e)(this,(function(t){var n,i,o,a;return e=this,[2,[{label:"新增数据块",left:!0,direction:"up",actions:h()(n=m()(i=this.dataObjMeta).call(i,(function(e){return e.key}))).call(n,(function(t){return{label:t.name+"取数定义",func:function(){e.newItem(t.key)}}}))},{label:"转换:模型->列表",left:!0,func:_()(o=this.modelConvert).call(o,this)},{label:"数据源预览",hide:this.scope.params.hide_previewAll,func:_()(a=this.previewAll).call(a,this)}]]}))}))},t.prototype.previewAll=function(){var e;return Object(w.c)(this,void 0,void 0,(function(){var t,n,i,o;return Object(w.e)(this,(function(a){var l;switch(a.label){case 0:return t={},(null===(e=this.options.context)||void 0===e?void 0:e.length)>0&&m()(l=this.options.context).call(l,(function(e){return e.component})).length>0?(n=F.a.jsonEval(angular.copy(this.options.context),{$FILTER:this.$filter}),[4,this.hcDialog.simpleForm("请输入参数",n,{})]):[3,2];case 1:t=a.sent(),a.label=2;case 2:return this.rootScope.show_warning("开始计算数据源"),this.rootScope.show_waiting(),i=this.list_model.data,[4,this.dataBlockService.previewAllData(i,t)];case 3:return o=a.sent(),this.rootScope.hide_waiting(),this.rootScope.show_warning("数据源计算成功！"),[4,this.hcDialog.getDialog(R.a).params({block_list:i,redis_key:o,multi:!0}).show()];case 4:return[2,a.sent()]}}))}))},t.prototype.modelConvert=function(){var e,t,n,i;return Object(w.c)(this,void 0,void 0,(function(){var o,a,l,r,c,s,u,_,p;return Object(w.e)(this,(function(f){switch(f.label){case 0:return[4,this.hcDialog.confirm("将把模型类型数据块自动升级为列表，继续吗？")];case 1:f.sent();try{for(a=Object(w.i)(d()(h=this.list_model.data).call(h)),l=a.next();!l.done;l=a.next()){var h;if(r=Object(w.f)(l.value,2),c=r[0],"model"===(s=r[1]).class){var g,v;if(u={class:"list",key:s.key,name:s.name,page_count:s.page_count,filter_dict:s.filter_dict},s.is_manual?(u.source={type:"meta",meta:{model:null===(e=s.meta)||void 0===e?void 0:e.model,relations:null===(t=s.meta)||void 0===t?void 0:t.relations,conditions:null===(n=s.meta)||void 0===n?void 0:n.conditions,static_filters:null===(i=s.meta)||void 0===i?void 0:i.static_filters}},o=s.meta):(u.source={type:"model",model:s.model,state:s.state},o=this.dataBlockService.getListMeta(s)),"list"===s.data_type)u.data={type:"list",field:o.fields};else u.data={type:"aggr",dim:m()(g=o.aggr).call(g,(function(e){return"dim"in e})),aggr:m()(v=o.aggr).call(v,(function(e){return"aggr"in e}))};this.list_model.data[c]=u}}}catch(e){_={error:e}}finally{try{l&&!l.done&&(p=a.return)&&p.call(a)}finally{if(_)throw _.error}}return this.list_model.$refreshData(),[2]}}))}))},t.prototype.getRowOperator=function(){return Object(w.c)(this,void 0,y.a,(function(){return Object(w.e)(this,(function(e){var t,n,i,o;return[2,[{key:"up",icon:"icon-hcm-arrow-cross-up-solid",desc:"上移",func:_()(t=this.upItem).call(t,this)},{key:"down",icon:"icon-hcm-arrow-cross-down-solid",desc:"下移",func:_()(n=this.downItem).call(n,this)},{key:"remove",icon:"icon-hcm-delete-circle-solid",desc:"移除",func:_()(i=this.removeItem).call(i,this)},{key:"clone",icon:"icon-hcm-copy",desc:"复制",func:_()(o=this.cloneItem).call(o,this)}]]}))}))},t.prototype.getInfoOptions=function(){var e;return{context:this.options.context,index_block:m()(e=this.list_model.data).call(e,(function(e){return e.page_count}))[0],hide_preview:this.options.hide_preview,total_block:this.list_model.data}},t.prototype.editItem=function(e){var t=this;this.getInfoDialog=function(){return t.dataObjMeta.getKey(e.class||null).info};var n=this.getInfoDialog();n&&this.hcDialog.getDialog(n).show({data:e,options:this.getInfoOptions()}).then((function(n){e?e=c()(e,n):(t.list_model.data=t.list_model.data||[],t.list_model.data.push(n)),t.list_model.$refreshData()}))},t.prototype.newItem=function(e){var t=this,n=this.dataObjMeta.getKey(e||null).info;n&&this.hcDialog.getDialog(n).show({data:{class:e},options:this.getInfoOptions()}).then((function(e){t.list_model.data=t.list_model.data||[],t.list_model.data.push(e),t.list_model.$refreshData()}))},t.prototype.parseData=function(){return Object(w.c)(this,void 0,y.a,(function(){return Object(w.e)(this,(function(e){return[2,angular.copy(this.list_model.data)]}))}))},t.prototype.upItem=function(e){var t,n,i=l()(t=this.list_model.data).call(t,e);i>0&&(n=Object(w.f)([this.list_model.data[i-1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i-1]=n[1],this.list_model.$refreshData())},t.prototype.downItem=function(e){var t,n,i=l()(t=this.list_model.data).call(t,e);i<this.list_model.data.length-1&&(n=Object(w.f)([this.list_model.data[i+1],this.list_model.data[i]],2),this.list_model.data[i]=n[0],this.list_model.data[i+1]=n[1],this.list_model.$refreshData())},t.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","dataBlockService"],t}(x.a);t.a={title:"数据块列表",template:o.a,controller:B}},o9cu:function(e,t){e.exports='<div class="portal-plugin-item-set count-set">\n    <div class="setting">\n        <hc-form model="base_form"></hc-form>\n    </div>\n    <div class="preview">\n        <hc-count options="count_config.params"></hc-count>\n    </div>\n</div>'},ous5:function(e,t,n){"use strict";var i=n("OBge"),o=n.n(i),a=n("mrSG"),l=n("XQQm"),r=n("CVbs"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.d)(t,e),t.prototype.$onInit=function(){return Object(a.c)(this,void 0,o.a,(function(){return Object(a.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=r,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t}(l.a),s=n("z/LF"),d=n.n(s);t.a={title:"字段设置",controller:c,template:d.a,size:"small",name:"fieldInfoSetting"}},pBBD:function(e,t){e.exports='<div class="component-container" ng-init="init()" ng-click="onClick($event)">\n    <div class=\'component-input-inner\' ng-bind=\'selector_label||options.placeholder\' ng-class=\'{placeholder:!model}\'\n         ng-disabled=\'options.readOnly\'></div>\n    <div ng-show="!options.readOnly" class="input-icon icon-hcm-screening"></div>\n    <div class="icon-hcm-delete delete" ng-click="del($event)"\n         ng-if="(model || selector_label) && !options.readOnly&&!options.no_delete"></div>\n</div>\n'},pJvw:function(e,t,n){var i=n("NVNq");e.exports=function(e){"use strict";var t="",n=(e=e||{}).data,o=e.index,a=e.customRowClass,l=e.offsetHeight,r=e.height,c=e.row_space,s=e.getRowBackgroundColor,d=e.rowStruct,u=e.needBgClolr,_=i.$each,p=e.operate_row;e.operate,e.$index;return t+='<div class="table-row ',t+=i.getRowClass(n,o,a),t+='" row-index=',t+=o,t+='\n     style="top:',t+=l,t+="px;width:100%;height:",t+=r,t+="px;left:0; ",t+=i.getRowStyle(n,o,c,s,d,u),t+="\">\n     <div class='operate-cell'>\n         ",_(p,(function(e,o){t+="\n         <div class='operate ",t+=i.getOperateRowClass(n,e),t+="' operate-key=",t+=e.key,t+=" operate-label=",t+=e.label,t+=">\n            ",t+=e.label||"",t+="\n         </div>\n             "})),t+='\n     </div>\n     <div class="row-resize"></div>\n</div>\n'}},pgDz:function(e,t){e.exports='<div id="hc-tab-pane" class="hc-tab-pane" ng-class="{\'selected\': $ctrl.selected && ($ctrl.client === \'mobile\'||(!$ctrl.isSelectedNewStyle && !$ctrl.isSelectedAnimateStyle && !$ctrl.isMultiLevel)),\n        \'line-style\': $ctrl.selected && $ctrl.isSelectedNewStyle,\n        \'line-style-unselected\': !$ctrl.selected && $ctrl.isSelectedNewStyle,\n        \'line-animate-style\': $ctrl.selected && $ctrl.isSelectedAnimateStyle,\n        \'multi-level-style-seleted\': $ctrl.selected && $ctrl.isMultiLevel,\n        \'multi-level-style\': $ctrl.isMultiLevel,\n        \'multi-level-single-line\': $ctrl.isMultiLevelSingleLine\n        }" ng-click="$ctrl.onClick($event)"\n        hc-title="{{$ctrl.subTabPane ? $ctrl.label + \'-\' + ($ctrl.subTabPane.name || $ctrl.subTabPane.label) : $ctrl.label}}"\n        options="{mode: \'tip\'}"\n    ng-mouseover="$ctrl.hover=true" ng-mouseleave="$ctrl.hover=false">\n    <label ng-class="$ctrl.icon">\n        {{ $ctrl.label }}\n    </label>\n    <span class="count" ng-if="!$ctrl.hideCount" ng-hide="$ctrl.isMultiLevel">{{ $ctrl.countNum }}</span>\n    <div class="separate" ng-if="$ctrl.subTabPane && $ctrl.isMultiLevelSingleLine">-</div>\n    <div class="sub-tab-pane" ng-if="$ctrl.subTabPane && $ctrl.isMultiLevelSingleLine">\n        <label>{{$ctrl.subTabPane.name || $ctrl.subTabPane.label}}</label>\n        <span class="count" ng-if="$ctrl.subTabPane.count">{{ $ctrl.subTabPane.count }}</span>\n    </div>\n    <span class="dropdown icon-hcm-arrow-down"\n          ng-if="$ctrl.children&&$ctrl.children.length>2\n          || ($ctrl.visualParentTab && $ctrl.children&&$ctrl.children.length>0)">\n    </span>\n</div>\n<div class="sub-tab-pane" ng-if="$ctrl.subTabPane&&$ctrl.isMultiLevel" ng-class="{\'child-selected\': $ctrl.selected}">\n    <label>{{$ctrl.subTabPane.name || $ctrl.subTabPane.label}}</label>\n    <span class="count">{{ $ctrl.subTabPane.count }}</span>\n</div>\n<div class="sub-tab-pane" ng-if="!$ctrl.subTabPane && $ctrl.isMultiLevel">\n    <span class="count" ng-if="!$ctrl.hideCount">{{ $ctrl.countNum }}</span>\n</div> '},pkm6:function(e,t){e.exports='<div class="hc-pdf-preview" ng-init="init()" ng-if="model">\n    <div ng-repeat="i in preview_list"><img ng-click="preview(i)" class="preview-img" ng-src={{i}} alt=""/>\n        <div class="page-count" ng-if="preview_list[$index]">{{$index+1}}/{{preview_list.length}}</div>\n    </div>\n</div>\n'},"pu+a":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("TeQF"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("oVuX"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("sMBO"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("qePV"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("toAj"),core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_number_to_fixed__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07d7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5s+n"),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("TWNs"),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("rB9j"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("JfAA"),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("UxlC"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("mnMc"),_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("BF1V"),_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("0lTi"),_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("Vi3r"),_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("5PDf"),_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__),_babel_runtime_corejs3_core_js_stable_instance_reverse__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3xDC"),_babel_runtime_corejs3_core_js_stable_instance_reverse__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reverse__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("lHQ6"),_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("eLKs"),_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("WxoT"),_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_20__),_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("a0dU"),_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_21__),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("RXMP"),_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_22__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("ls82"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_23__),_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("SPx3"),_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_24__),_template_html__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("cXcY"),_template_html__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_template_html__WEBPACK_IMPORTED_MODULE_25__),_style_scss__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("VKd1"),_style_scss__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_26__),moment__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("wd/R"),moment__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_27__),_common_framework_base_base_crud_service__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("srGB"),_components_formComponent_hc_tree_list_selector_org_panel_controller__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("Hu0P"),_components_formComponent_hc_tree_list_selector_category_list_panel_controller__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("2eYA"),_service_salary_enroll_info_controller__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("5N9m"),_service_salary_result_enroll_replace_controller__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("tceY");window.app.controller("SalaryAssistEntryBatchInputCtrl",["BaseCRUDService","$q","$filter","$rootScope","$controller","$scope","dataService","contextService","$hcListNew","$hcDialog","cryptoService","$hcForm",function(BaseCRUDService,$q,$filter,$rootScope,$controller,$scope,dataService,contextService,$hcListNew,$hcDialog,cryptoService,$hcForm){$scope.default_width=contextService.getContext("auth").company_setting.salary_enroll_default_width||120,$scope.edit_data=$scope.params.data.data,$scope.config_value=$scope.params.data.config_value||[],$scope.month=$scope.params.data.month,$scope.assit_name=$scope.params.data.assist_name,$scope.assist_id=$scope.params.data.assist_id,$scope.assign_id=$scope.params.data.assign_id,$scope.inst_id=$scope.params.data.inst_id,$scope.meta=$scope.params.data.meta,$scope.fields=$scope.params.data.fields,$scope.config_value=$scope.params.data.config_value||[],$scope.enroll_id=$scope.params.data.enroll_id,$scope.program_id=$scope.params.data.program_id,$scope.month=$scope.params.data.month,$scope.pay_program_id=$scope.params.data.pay_program_id||null,$scope.params.mode=$scope.params.data.mode,$scope.params.filter_dict=$scope.params.data.filter_dict,$scope.params.filter_str=$scope.params.data.filter_str,$scope.params.employee_id=$scope.params.data.employee_id,$scope.params.program_item_id=$scope.params.data.program_item_id,$scope.meta_state=$scope.params.data.meta_state,$scope.employee_ids=null,$scope.params.select_items=$scope.params.data.select_items,$scope.params.type=$scope.params.data.type,$scope.init=function(){"salary_calculate_select"==$scope.meta_state?($scope.$dialog.title($scope.month+"附加数据录入").operates([{label:"录入人员",func:$scope.chooseEmp,default:!1,left:!0},{label:"薪酬项目",func:$scope.chooseProgramItem,default:!1,left:!0},{label:"基本信息",func:$scope.editItem,default:!1,left:!0},{label:"筛选",func:$scope.chooseFilter,default:!1,left:!0},{label:"替换",func:$scope.replace,default:!1,left:!0},{label:"保存",func:$scope.temporarySave,default:!1,left:!0},{label:"确定",func:$scope.saveEnroll,default:!0}]),dataService.callHcmOpenApi("salary.enroll.get.config.program.item",{config_value:$scope.config_value,program_id:$scope.program_id,pay_program_id:$scope.pay_program_id}).then((function(e){$scope.config_program_item=e,"new"==$scope.params.mode?dataService.callHcmOpenApi("salary.enroll.get.employee",{type:$scope.params.type,filter_dict:$scope.params.filter_dict,filter_str:$scope.params.filter_str,select_items:$scope.params.select_items}).then((function(e){$scope.employee_ids=e||[],$scope.program_item_id=[],$scope.save_emp=$scope.employee_ids,$scope.save_program_item=$scope.program_item_id,$scope.initSheet()})):($scope.employee_ids=$scope.params.employee_id||[],$scope.program_item_id=$scope.params.program_item_id||[],$scope.save_emp=$scope.employee_ids,$scope.save_program_item=$scope.program_item_id,$scope.initSheet())}))):($scope.$dialog.title($scope.month+$scope.assit_name+"编辑").operates([{label:"确定",func:$scope.saveData,default:!0}]),$scope.initSheet())},$scope.initSheet=_babel_runtime_corejs3_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_24___default()(_babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_21___default.a.mark((function e(){var t,n,i,o,a;return _babel_runtime_corejs3_regenerator__WEBPACK_IMPORTED_MODULE_21___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=cryptoService.HA_Decrypt("3S5KUgj8SCJZCfJsoR6GOeOeVUrWyCM0VJR8uvMJW0wMxUcWoTwET9ajWZ1Uh16ONPUMiu121GXphhl3zymQNCCSmLRVY+4tQp1DUuC2v0K4iMFBacs9cyNJlbXz/xmvzUO09ZQB6HaFyR0jIBok51z0qRAyj2V25mclxqSk5l4+ImaEy3KySeR+SsVwYhzgXrj4iz0ADZxKHg/SoSi8PfJQ1ryvJd4WfqUcl3eVxuLYXKL4rBjra9qTJAsoXvfS05IESFw/7GuqFmLZQid5yJ+clJJy83T5H/iowxJPOJt64JlkhDCqhZ0NbzDw8dZXFmJfHFCui556LM7XN/wRz9IlR/nY634DbSTfVFb53A5K9Xyyg7OFWZRNzl+b0V+fkqUmV94csTvNFZ/js7VkRjkZ5sgOTPN5yn3GyrWgaMBAjq1TycVCcSHhP260an64MdCi03lV0WTwn5YIssBvx73NXheyzM9itklm9v0SuhpNLmNCDIWDmz8M/PKYDoXuWzyIUfyYGXDxRLiPGg9WCYnAja0XtSXIDYfQtQNwQFGLNVZf1QHxrAceuKXmMcGT8ZgXiJrl97mvQC5EsJx0M4/XVnnKuMfn76/Nltmu2FPSS/hbXrPz3L8X1L1aKf7+jc/SKjnRPe0ceXp9cbk98yaetmHJdaVVRcv05ztm2i5sN9MEyC1t9k3fFiAf3fI5cl4HjFHK6T8EWX/dK28si9JHM2wpWazu9A5xHcTNggbz/3906eBr1IWF09aTZ2t8XMOLnkIqjDokC3dBnIHAuSOURV2bVuCVm2D/YXQvX5GyvfPg+XYgAdDGfYC3BxruxlZHcIXR60bWm2Qn9sqS+cWhWixC3gmedTKqyuAgdEBX8Rv0xED4UzfvNKZ7xt222wQSI7xYa8oskOdRybT9i8IUiFonbdg/2zrPsCH9KvD+tQCpPPOKNaOivOg48LNQg2mOVYmngJNoNlDrFswgb1V0xUmsqmEnDB5bkcMqHNue975r6XVNASFztbfrP/4q"),e.prev=1,e.next=4,dataService.callHcmOpenApi("hcm.template.load.template",{_key:"spread_license_key.json",is_system:!1});case 4:n=e.sent,JSON.parse(n||"{}").key&&(t=JSON.parse(n).key),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.next=13,Promise.all([__webpack_require__.e(0),__webpack_require__.e(7)]).then(__webpack_require__.bind(null,"SNuF"));case 13:$scope.GC=e.sent.getGC(t),$scope.spread=new $scope.GC.Spread.Sheets.Workbook(document.getElementById("assist"),{sheetCount:1}),i=$scope.spread.contextMenu.menuData,o=[],_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_22___default()(i).call(i,(function(e){if(e){if("gc.spread.insertComment"===e.name||"gc.spread.sort"===e.name||"gc.spread.pasteOptions"===e.name||"gc.spread.hideRows"===e.name||"gc.spread.unhideRows"===e.name||"gc.spread.hideColumns"===e.name||"gc.spread.unhideColumns"===e.name||"gc.spread.insertRows"===e.name||"gc.spread.insertColumns"===e.name||"gc.spread.deleteRows"===e.name||"gc.spread.deleteColumns"===e.name||"gc.spread.pasteAll"===e.name||"gc.spread.pasteFormula"===e.name||"gc.spread.pasteValues"===e.name||"gc.spread.pasteFormatting"===e.name||"gc.spread.pasteFormatting"===e.name)return;o.push(e)}})),$scope.spread.contextMenu.menuData=o,$scope.spread.options.newTabVisible=!1,$scope.spread.options.allowSheetReorder=!1,$scope.spread.options.grayAreaBackColor="white",$scope.spread.options.tabStripVisible=!1,$scope.sheet=$scope.spread.getSheet(0),$scope.spreadNS=$scope.GC.Spread.Sheets,a={allowSelectLockedCells:!0,allowSelectUnlockedCells:!0,allowFilter:!0,allowSort:!1,allowResizeRows:!1,allowResizeColumns:!0,allowEditObjects:!0,allowDragInsertRows:!0,allowDragInsertColumns:!0,allowInsertRows:!1,allowInsertColumns:!1,allowDeleteRows:!0,allowDeleteColumns:!1},$scope.sheet.options.protectionOptions=a,$scope.sheet.options.isProtected=!0,$scope.sheet.defaults.rowHeight=30,$scope.sheet.defaults.colWidth=$scope.default_width,$scope.sheet.options.frozenlineColor="Transparent",$scope.style=new $scope.GC.Spread.Sheets.Style,$scope.style.locked=!1,$scope.style1=new $scope.GC.Spread.Sheets.Style,$scope.style1.locked=!0,$scope.GC.Spread.Common.CultureManager.culture("zh-cn"),$scope.setSheet();case 37:case"end":return e.stop()}}),e,null,[[1,8]])}))),$scope.setSheet=function(e){"salary_calculate_select"==$scope.meta_state?("emp"===e&&$scope.sheet.deleteRows($scope.row_count,1),$scope.employee_ids.length>0&&dataService.callHcmOpenApi("salary.enroll.get.enroll.list",{enroll_id:$scope.enroll_id,employee_ids:$scope.employee_ids,program_item_ids:$scope.program_item_id,config_value:$scope.config_value}).then((function(e){$scope.sourceData=JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_20___default()(e.list)),e.filters.length>0?$scope.showFilters=!0:$scope.showFilters=!1,$scope.showFilters&&$scope.setFilter(e.filters),item_form_meta[0].options.list=e.filter_list,$scope.program_item_id=e.current_items,$scope.frozen_count=e.frozen_count,$scope.lock_count=e.lock_count,$scope.order=e.order,$scope.sheet.frozenColumnCount($scope.frozen_count),$scope.sheet.frozenTrailingRowCount(1),$scope.row_count=e.list.length,$scope.row_count>0&&$scope.sheet.setDataSource(e.list),$scope.sheet_fields=e.fields;for(var t=$scope.lock_count;t<$scope.sheet_fields.length;t++)$scope.sheet.setStyle(-1,t,$scope.style);$scope.range=new $scope.GC.Spread.Sheets.Range(0,0,$scope.row_count,$scope.sheet_fields.length),$scope.rowFilter=new $scope.GC.Spread.Sheets.Filter.HideRowFilter($scope.range),$scope.sheet.rowFilter($scope.rowFilter),$scope.rowFilter.filterDialogVisibleInfo({sortByValue:!1,sortByColor:!1,filterByColor:!1,filterByValue:!0,listFilterArea:!0}),$scope.initTotalEmpCount(),$scope.initAlign(),$scope.initSheetValidation()}))):dataService.callHcmOpenApi("salary.assist.inst.get.init.data.list",{data:$scope.edit_data,info:{inst_id:$scope.inst_id,month:$scope.month,assist_id:$scope.assist_id,assign_id:$scope.assign_id},config_value:$scope.config_value,meta:$scope.meta,fields:$scope.fields}).then((function(e){var t;$scope.sourceData=JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_20___default()(e.list)),$scope.frozen_count=e.frozen_count,$scope.item_dict=e.item_dict,$scope.sheet.frozenColumnCount($scope.frozen_count),$scope.sheet.frozenTrailingRowCount(1),$scope.row_count=e.list.length,$scope.row_count>0&&($scope.sheet.setDataSource(e.list),$scope.sheet.setColumnVisible(0,!1)),$scope.sheet_fields=e.fields,_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(t=e.unlock_list).call(t,(function(e){return $scope.sheet.setStyle(-1,e,$scope.style)})),$scope.range=new $scope.GC.Spread.Sheets.Range(0,0,$scope.row_count,$scope.sheet_fields.length),$scope.rowFilter=new $scope.GC.Spread.Sheets.Filter.HideRowFilter($scope.range),$scope.sheet.rowFilter($scope.rowFilter),$scope.rowFilter.filterDialogVisibleInfo({sortByValue:!1,sortByColor:!1,filterByColor:!1,filterByValue:!0,listFilterArea:!0}),$scope.initTotalEmpCount(e.unlock_list),$scope.initAlign(),$scope.initSheetValidation(e.unlock_list)}))},$scope.initAlign=function(){"salary_calculate_select"==$scope.meta_state?($scope.sheet.getCell($scope.row_count,1).hAlign(1),$scope.sheet.getRange(-1,$scope.lock_count,-1,$scope.sheet_fields.length,3).hAlign(1),$scope.sheet.getRange(-1,0,-1,$scope.sheet_fields.length,3).vAlign(1)):($scope.sheet.getCell($scope.row_count,2).hAlign(1),$scope.sheet.getRange(-1,0,-1,$scope.sheet_fields.length,3).hAlign(1),$scope.sheet.getRange(-1,0,-1,$scope.sheet_fields.length,3).vAlign(1))},$scope.initSheetValidation=function(e){if("salary_calculate_select"==$scope.meta_state){var t,n=new $scope.spreadNS.DataValidation.createNumberValidator($scope.spreadNS.ConditionalFormatting.ComparisonOperators.between,"=ISNUMBER","=ISNUMBER",!0);n.ignoreBlank(!0),n.errorStyle($scope.spreadNS.DataValidation.ErrorStyle.stop),$scope.sheet.setDataValidator(0,4,$scope.row_count,$scope.sheet_fields.length,n),_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_18___default()(t=$scope.sheet).call(t,$scope.spreadNS.Events.ValidationError,(function(e,t){$rootScope.show_warning("请输入数字"),t.validationResult=$scope.spreadNS.DataValidation.DataValidationResult.discard}))}else{var i,o=function(){this.name="REGEX",this.maxArgs=2,this.minArgs=2,this.typeName="RegExFunction"};(o.prototype=new $scope.GC.Spread.CalcEngine.Functions.Function).isContextSensitive=function(){return!0},o.prototype.evaluate=function(){var e=arguments[0],t=e.source.getValue(e.row,e.column),n=new RegExp(arguments[1]);return n.test(t.toString())},$scope.sheet.addCustomFunction(new o);var a=new $scope.spreadNS.DataValidation.createFormulaValidator('REGEX("^(-?[1-9]\\d{0,15}|0)(\\.\\d{1,4})?$")');a.ignoreBlank(!0),a.errorStyle($scope.spreadNS.DataValidation.ErrorStyle.stop),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return $scope.sheet.setDataValidator(0,e,$scope.row_count,1,a)})),_babel_runtime_corejs3_core_js_stable_instance_bind__WEBPACK_IMPORTED_MODULE_18___default()(i=$scope.sheet).call(i,$scope.spreadNS.Events.ValidationError,(function(e,t){$rootScope.show_warning("请输入数字且最多四位小数"),t.validationResult=$scope.spreadNS.DataValidation.DataValidationResult.discard}))}},$scope.initTotalEmpCount=function(e){if("salary_calculate_select"==$scope.meta_state){$scope.sheet.clearCustomNames(),$scope.sheet.addRows($scope.row_count,1),$scope.sheet.setValue($scope.row_count,0,"合计:"),$scope.sheet.addCustomName("empCount","=$B$1:$B$"+$scope.row_count,0,0,"comment"),$scope.sheet.setFormula($scope.row_count,1,"=SUBTOTAL(103,empCount)");for(var t=$scope.lock_count+1;t<=$scope.sheet_fields.length;t++){var n=$scope.numToString(t);$scope.sheet.addCustomName("field"+n,"=$"+n+"$1:$"+n+"$"+$scope.row_count,0,0,"comment");var i="=SUBTOTAL(109,field"+n+")";$scope.sheet.setFormula($scope.row_count,t-1,i)}$scope.sheet.setStyle($scope.row_count,-1,$scope.style1),$scope.sheet.setValue($scope.row_count,0,"",2)}else $scope.sheet.clearCustomNames(),$scope.sheet.addRows($scope.row_count,1),$scope.sheet.addCustomName("empCount","=$B$1:$B$"+$scope.row_count,0,0,"comment"),$scope.sheet.setFormula($scope.row_count,1,"=SUBTOTAL(103,empCount)"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){var t=$scope.numToString(e+1);$scope.sheet.addCustomName("field"+t,"=$"+t+"$1:$"+t+"$"+$scope.row_count,0,0,"comment");var n="=ROUND(SUBTOTAL(109,field"+t+"),4)";$scope.sheet.setFormula($scope.row_count,e,n)})),$scope.sheet.setStyle($scope.row_count,-1,$scope.style1),$scope.sheet.setValue($scope.row_count,0,"合计",2)},$scope.numToString=function(e){var t=[];t.length=0;return function e(n){var i=n-1,o=_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_17___default()(i/26),a=i%26;t.push(String.fromCharCode(64+_babel_runtime_corejs3_core_js_stable_parse_int__WEBPACK_IMPORTED_MODULE_17___default()(a+1))),o>0&&e(o)}(e),_babel_runtime_corejs3_core_js_stable_instance_reverse__WEBPACK_IMPORTED_MODULE_16___default()(t).call(t).join("")},$scope.saveData=function(){var e,t,n=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(t=$scope.sheet.getDirtyRows()).call(t,(function(e){return e.row!==$scope.row_count}))).call(e,(function(e){return e.item}));dataService.callHcmOpenApi("salary.assist.inst.save.dirty.entry.data",{datas:n,inst_id:$scope.inst_id,assist_id:$scope.assist_id,item_dict:$scope.item_dict}).then((function(e){e&&($rootScope.show_warning("保存成功"),$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close())}))},$scope.$dialog.close=function(){if("salary_calculate_select"==$scope.meta_state)$hcDialog.confirm("确认退出?未保存的数据将不会保存!").then((function(){$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close()}));else{var e,t=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e=$scope.sheet.getDirtyRows()).call(e,(function(e){return e.item}));t.length>0?$hcDialog.confirm("是否保存对【"+$scope.month+$scope.assit_name+"】的更改?",[{caption:"不保存",func:function(){$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close()}},{caption:"保存",func:function(){dataService.callHcmOpenApi("salary.assist.inst.save.dirty.entry.data",{datas:t,inst_id:$scope.inst_id,assist_id:$scope.assist_id,item_dict:$scope.item_dict}).then((function(e){e&&($rootScope.show_warning("保存成功"),$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close())}))}}]):($scope.$dialog.resolve_data(),$scope.$dialog.dialog_close())}},$scope.temporarySave=function(){if("salary_calculate_select"==$scope.meta_state)dataService.callHcmOpenApi("hcm.model.edit",{model:"SalaryEnroll",id_:$scope.enroll_id,info:{employee_id:$scope.save_emp,program_item_id:$scope.save_program_item}}).then((function(e){var t,n,i=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(t=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(n=$scope.sheet.getDirtyRows()).call(n,(function(e){return e.row!==$scope.row_count}))).call(t,(function(e){return e.item}));dataService.callHcmOpenApi("salary.enroll.save.dirty.data",{datas:i,enroll_id:$scope.enroll_id,program_item_ids:$scope.program_item_id}).then((function(e){e&&($scope.sheet.clearPendingChanges(),$rootScope.show_warning("保存成功"))}))}));else{var e,t=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e=$scope.sheet.getDirtyRows()).call(e,(function(e){return e.item}));dataService.callHcmOpenApi("salary.assist.inst.save.dirty.entry.data",{datas:t,inst_id:$scope.inst_id,assist_id:$scope.assist_id,item_dict:$scope.item_dict}).then((function(e){e&&($scope.sheet.clearPendingChanges(),$rootScope.show_warning("保存成功"))}))}},$scope.saveEnroll=function(){dataService.callHcmOpenApi("hcm.model.edit",{model:"SalaryEnroll",id_:$scope.enroll_id,info:{employee_id:$scope.save_emp,program_item_id:$scope.save_program_item}}).then((function(){if("edit"===$scope.params.mode){var e,t,n=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(t=$scope.sheet.getDirtyRows()).call(t,(function(e){return e.row!==$scope.row_count}))).call(e,(function(e){return e.item}));dataService.callHcmOpenApi("salary.enroll.save.dirty.data",{datas:n,enroll_id:$scope.enroll_id,program_item_ids:$scope.program_item_id}).then((function(e){e&&($rootScope.show_warning("保存成功"),$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close())}))}else{var i,o,a=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(i=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(o=$scope.sheet.getDirtyRows()).call(o,(function(e){return e.row!==$scope.row_count}))).call(i,(function(e){return e.item}));dataService.callHcmOpenApi("salary.enroll.save.dirty.data",{datas:a,enroll_id:$scope.enroll_id,program_item_ids:$scope.program_item_id}).then((function(e){e&&($rootScope.show_warning("保存成功"),$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close())}))}}))},$scope.chooseEmp=function(){$hcDialog.getDialog(_components_formComponent_hc_tree_list_selector_org_panel_controller__WEBPACK_IMPORTED_MODULE_29__.a).params({model:"SalaryProfile",orgType:"org",selectorType:2,state:"normal_treeListSelector",filter_dict:{employee_id:{notin:$scope.employee_ids},program_id:$scope.program_id,month:$scope.month}}).size("large").show().then((function(e){var t;(t=$scope.employee_ids).push.apply(t,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default()(angular.extend(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return e.employee_id})),{}))),$scope.employee_ids=_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13___default()(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12___default.a($scope.employee_ids)),$scope.save_emp=$scope.employee_ids,$scope.setSheet("emp")}))},$scope.setFilter=function(e){function t(e,t){this.key=e,this.label=e,this.component="hc-super-selector",this.options={multi:!0,singleLine:!1,placeholder:e+"过滤",returnFormat:"id",change:function(n,i){for(var o=[],a=0;a<(null==i?void 0:i.length);a++){var l=i[a];o.push(t[l].name)}$scope.setCustomFilter(e,o)},selector:function(e){var n=$q.defer(),i=e||"",o=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(t).call(t,(function(e){var t;return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11___default()(t=e.name).call(t,i)}));return n.resolve({list:o,count:o.length}),n.promise},selectorMapper:function(e){for(var n=$q.defer(),i=[],o=0;o<e.length;o++){var a=e[o];i.push(t[a])}return n.resolve({list:i}),n.promise}}}for(var n=[],i=function(i){for(var o,a,l=e[i],r=_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13___default()(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12___default.a(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(o=_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(a=$scope.sourceData).call(a,(function(e){return null!=e[l]}))).call(o,(function(e){return e[l]})))),c=[],s=0;s<r.length;s++)c.push({id:s,name:r[s]});var d;d=new t(l,c),n.push(d)},o=0;o<e.length;o++)i(o);n.length>0?($scope.showFilters=!0,$scope.filter=$hcForm.createForm("filter_panel").$setMeta(n)):$scope.showFilters=!1},$scope.setCustomFilter=function(e,t){var n,i=$scope.order[e];$scope.rowFilter.removeFilterItems(i);for(var o=0;o<t.length;o++){var a=t[o],l=$scope.GC.Spread.Sheets.ConditionalFormatting.TextCompareType.equalsTo,r=new $scope.GC.Spread.Sheets.ConditionalFormatting.Condition($scope.GC.Spread.Sheets.ConditionalFormatting.ConditionType.textCondition,{compareType:l,expected:a});$scope.rowFilter.addFilterItem(i,r)}_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(n=$scope.rowFilter).call(n,i)},$scope.chooseFilter=function(){$hcDialog.simpleForm("选择筛选字段",item_form_meta,{}).then((function(e){var t=e.filters;$scope.setFilter(t)}))};var item_form_meta=[{key:"filters",component:"hc-input-checkbox",options:{items_inline:!1,required:!1,list:[],singleLine:!0,readOnly:!1}}];$scope.chooseProgramItem=function(){var e={program_id:$scope.program_id};e.id={in:$scope.config_program_item};var t="enroll_categoryListSelector";if($scope.pay_program_id&&(e["pay_program_item.parent_id"]=$scope.pay_program_id,t="enroll_categoryListSelector_multi"),e["salary_formula.id"]=null,e.data_type=4,!$scope.program_items&&$scope.program_item_id.length>0)dataService.callHcmOpenApi("hcm.model.list",{model:"SalaryProgramItem",filter_dict:{id:$scope.program_item_id},page_size:9999,extra_property:{state:"enroll_categoryListSelector"}}).then((function(n){$scope.program_items=n.list;var i=angular.copy($scope.program_items);$hcDialog.getDialog(_components_formComponent_hc_tree_list_selector_category_list_panel_controller__WEBPACK_IMPORTED_MODULE_30__.a).params({selectorModel:"SalaryProgramItem",selectorType:2,state:t,page_size:20,originObject:i,filter_dict:e}).size("large").show().then((function(e){var t;$scope.program_items=e,$scope.program_item_id=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return e.id})),(t=$scope.save_program_item).push.apply(t,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default()(angular.extend(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return e.id})),{}))),$scope.save_program_item=_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13___default()(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12___default.a($scope.save_program_item)),$scope.setSheet()}))}));else{var n=angular.copy($scope.program_items);$hcDialog.getDialog(_components_formComponent_hc_tree_list_selector_category_list_panel_controller__WEBPACK_IMPORTED_MODULE_30__.a).params({selectorModel:"SalaryProgramItem",selectorType:2,state:t,page_size:20,originObject:n||[],filter_dict:e}).size("large").show().then((function(e){var t;$scope.program_items=e,$scope.program_item_id=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return e.id})),(t=$scope.save_program_item).push.apply(t,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default()(angular.extend(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_19___default()(e).call(e,(function(e){return e.id})),{}))),$scope.save_program_item=_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_13___default()(new _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_12___default.a($scope.save_program_item)),$scope.setSheet()}))}},$scope.editItem=function(){if(null==$scope.params.data.data&&void 0!==$scope.params.data.enroll_id)dataService.callHcmOpenApi("hcm.model.get",{model:"SalaryEnroll",id_:$scope.params.data.enroll_id}).then((function(e){$scope.params.data.data=e,$hcDialog.getDialog(_service_salary_enroll_info_controller__WEBPACK_IMPORTED_MODULE_31__.a).title("编辑附加数据").params({title:"编辑附加数据",mode:"edit",data:e}).size("large").show().then((function(e){$scope.params.data=e}))}));else{var e=$scope.params.data;void 0!==$scope.params.data.data&&(e=$scope.params.data.data),$hcDialog.getDialog(_service_salary_enroll_info_controller__WEBPACK_IMPORTED_MODULE_31__.a).title("编辑附加数据").params({title:"编辑附加数据",mode:"edit",data:e}).size("large").show().then((function(e){$scope.params.data=e}))}},$scope.replace=function(){$hcDialog.getDialog(_service_salary_result_enroll_replace_controller__WEBPACK_IMPORTED_MODULE_32__.a).params({program_item_id:$scope.program_item_id}).size("large").show().then((function(data){for(var sheet_data=$scope.sheet.getDataSource(),row_count=$scope.row_count,order=$scope.order[data.item],i=0;i<row_count;i++)if(!$scope.rowFilter.isRowFilteredOut(i)){var item=sheet_data[i],_value=Number(eval(data.formula).toFixed(2));$scope.sheet.setValue(i,order,_value)}}))}}]),__webpack_exports__.a={controller:"SalaryAssistEntryBatchInputCtrl",template:_template_html__WEBPACK_IMPORTED_MODULE_25___default.a}},pyRK:function(e,t){e.exports='<div class="hcm-content-indicator info" ng-if="dirtyModify.status">\n    <span>{{dirtyModify.caption}}</span>\n    <span\n        class="operate-item"\n        ng-repeat="_action in dirtyModify.actions"\n        ng-disabled="(_action.disabled|valueToFunc)()"\n        ng-hide="(_action.hide|valueToFunc)()"\n        ng-click="dirtyModify.actionParse(_action)"\n        ng-bind="(_action.label|valueToFunc)()">\n    </span>\n</div>\n'},q4Ec:function(e,t){e.exports='<div class="hcm-btn-list" id="hcm-btn" ng-if="model && mobile_btn_should_show(\'header\')" ng-init="init()">\n    {{mobile_btn_should_show(\'bottom\')}}\n    <div class="mobile-btn-item">\n        \x3c!--移动端按钮需点击图标展示--\x3e\n        <button class="btn-mobile-out view"\n                ng-if="(model.simple_actions(true).length === 1) && position && position.indexOf(\'view\') !== -1"\n                ng-click="item_func(model.simple_actions(true)[0])">{{model.simple_actions(true)[0].label}}\n        </button>\n        <button class="btn-mobile secondary icon-hcm-more-point"\n                ng-click="showMore($event)"\n                ng-if="(model.simple_actions(true).length >= 1) && !((model.simple_actions(true).length === 1) && position && position.indexOf(\'view\') !== -1)">\n        </button>\n        \x3c!--不用选择可以操作的按钮--\x3e\n        <div class="mask" ng-show="itemIsMoreShow()" ng-click="quit($event)">\n            <div class="mobile-drop-down-content">\n                <div class="drop-down-list un-select-list">\n                    <div class="tip" ng-if="model.filterActions(model.actions_group.un_select_actions).length > 8">共&ensp;\n                        <div class="high-light">\n                            {{model.filterActions(model.actions_group.un_select_actions).length}}\n                        </div>&ensp;个操作项\n                    </div>\n                    <div class="scroll-field">\n                        <div ng-repeat="_action in model.actions_group.un_select_actions track by $index"\n                             class="mobile-button"\n                             ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,\n                             \'sys-color\':_action.is_important}"\n                             ng-show="!(_action.hide|valueToFunc)()"\n                             ng-click="item_func(_action)">\n                            {{(_action.label|valueToFunc)()}}\n                        </div>\n                    </div>\n                    <div class="mobile-button close-button" ng-click="select($event)"\n                         ng-if="model.alwaysShowSelect || model.actions_group.select_actions.length">选择\n                    </div>\n                    <div class="mobile-button close-button">取消</div>\n                </div>\n            </div>\n        </div>\n        \x3c!--选择后才可以操作的按钮--\x3e\n        <div class="select-actions-list" ng-show="model.select_status">\n            <div\n                ng-repeat="_action in model.filterActions(model.actions_group.select_actions).slice(0, model.outer_btn_count)"\n                ng-click="item_func(_action)"\n                class="select-action"\n                ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,\n                             \'default\':_action.is_important|| model.actions_group.select_actions.length == 1}">\n                <div ng-bind-html="(_action.label|valueToFunc)()|toTrusted"></div>\n            </div>\n            <div class="select-action more"\n                 ng-click="changeMoreSelectActions($event,true)"\n                 ng-if="model.filterActions(model.actions_group.select_actions).length > (model.outer_btn_count)">\n                <div class="icon-hcm-more-point more-icon"></div>\n                <div class="more-text">更多</div>\n            </div>\n        </div>\n        \x3c!--选择后可以操作的额外按钮--\x3e\n        <div class="mask" ng-show="show_alter_select_actions" ng-click="changeMoreSelectActions($event,false)">\n            <div class="mobile-drop-down-content">\n                <div class="drop-down-list">\n                    <div class="tip" ng-if="model.filterActions(model.actions_group.select_actions).slice(model.outer_btn_count).length > 8">\n                        共&ensp;\n                        <div class="high-light">\n                            {{model.filterActions(model.actions_group.un_select_actions).length}}\n                        </div>&ensp;个操作项\n                    </div>\n                    <div class="scroll-field">\n                        <div\n                            ng-repeat="_action in model.filterActions(model.actions_group.select_actions).slice(model.outer_btn_count) track by $index"\n                            class="mobile-button"\n                            ng-class="{\'disabled\':(_action.disabled|typeof)===\'function\'?_action.disabled():_action.disabled,\n                             \'sys-color\':_action.is_important}"\n                            ng-show="!(_action.hide|valueToFunc)()"\n                            ng-click="item_func(_action)">\n                            {{(_action.label|valueToFunc)()}}\n                        </div>\n                    </div>\n                    <div class="mobile-button close-button" ng-click="changeMoreSelectActions($event,false)">取消</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},"q8I/":function(e,t){e.exports='<div ng-class="{\'query_panel\':params.query}" class="selector-panel" ng-init="init()">\n    <div class="selector-list">\n        <div class="category" ng-repeat="_c in category_data_list">\n            <div class="category-name">{{_c.name}}</div>\n            <div class="selector-item" ng-repeat="_d in _c.list track by $index" ng-click="itemSelect(_d,$event)"\n                ng-class="{\'sub_selected\': isSubSelected(_d), \'is_disabled\': isDisabled(_d)}">\n                <span ng-class="isSelected(_d)?\'selected\':\'\'" hc-title options="tipOptions"\n                    ng-bind-html="((params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label) | toTrusted">\n                    \x3c!--此处取值规则若更改需通知框架负责导入的老师 --\x3e\n                    \x3c!-- {{(params.individual_name|getJSON:_d) || _d.name_alias || _d.name || _d.label }} --\x3e\n                </span>\n                <div class="icon-hcm-right selected" ng-if="isSelected(_d)"></div>\n                <div class="icon-hcm-arrow-right" ng-if="_d.list.length"></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="wait" ng-if="refresh">{{\'Loading\'|translate}}...</div>\n</div>'},qD00:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));n("oVuX"),n("sMBO"),n("07d7"),n("5s+n"),n("rB9j"),n("JfAA"),n("EnZy");var i,o=n("o+MX"),a=n.n(o),l=n("nhkr"),r=n.n(l),c=n("UtpJ"),s=n.n(c),d=n("0lTi"),u=n.n(d),_=n("526F"),p=n.n(_),m=n("lHQ6"),f=n.n(m),h=n("Kwsy"),g=n.n(h),v=n("6UaR"),b=n.n(v),y=n("OBge"),w=n.n(y),x=n("M5Mt"),k=n.n(x),O=n("RXMP"),D=n.n(O),C=n("mnMc"),M=n.n(C),S=n("ZbhI"),E=n.n(S),P=n("/FZm"),j=n.n(P),T=n("5PDf"),A=n.n(T),I=n("FLGM"),L=n.n(I),F=n("BF1V"),R=n.n(F),B=n("mrSG"),U=n("UF4K"),q=n.n(U),W=function(){function e(e){this.nodeId2OriginObject=new q.a,this.originObject=e||[],this.originObjectSet=new R.a(this.originObject),this.initNodeId2OriginObject()}return e.prototype.initNodeId2OriginObject=function(){var e,t,n,i,o,a=new q.a(L()(e=this.originObject).call(e,(function(e){var t;return[L()(t=e.t_id.split("!")).call(t,(function(e){return f()(e,10)})),e]})));try{for(var l=Object(B.i)(a),r=l.next();!r.done;r=l.next()){var c=Object(B.f)(r.value,2),s=c[0],d=c[1];try{for(var u=(i=void 0,Object(B.i)(s)),_=u.next();!_.done;_=u.next()){var p=_.value;this.nodeId2OriginObject.has(p)||this.nodeId2OriginObject.set(p,[]),this.nodeId2OriginObject.get(p).push(d)}}catch(e){i={error:e}}finally{try{_&&!_.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}},e.prototype.expiredNodeInOriginObject=function(e){var t,n,i=this,o=this.nodeId2OriginObject.get(null==e?void 0:e.id)||[];o.push.apply(o,Object(B.h)(this.getParentNodes(e)));var a=function(e){var t;D()(t=l.originObjectSet).call(t,(function(t){t.id===e.id&&i.originObjectSet.delete(t)}))},l=this;try{for(var r=Object(B.i)(o),c=r.next();!c.done;c=r.next()){a(c.value)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.deleteNode=function(e){var t,n=this;D()(t=this.originObjectSet).call(t,(function(t){t.id===e.id&&n.originObjectSet.delete(t)}))},e.prototype.getParentNodes=function(e){var t=[];return(null==e?void 0:e.parent_id)&&(null==e?void 0:e.treeParent)&&(t.push(e.treeParent),t.push.apply(t,Object(B.h)(this.getParentNodes(e.treeParent)))),t},e.prototype.getUpdatedOriginObject=function(){return Object(B.h)(this.originObjectSet)},e}(),z=function(){function e(e){this.tree_type="org",this.mode="self",this.custom_key="name",this.canSelectedCondition=function(){return!0},this.usePlan=!1,this.useSearch=null,this.treeSearchPlaceholder="",this.searchInSelectedNode=!1,this.searchSelected=!0,this.addRootAll=null,this.rootNodeName="全部",this.selectChildrenBtn=!1,this.selectChildrenOptions=new N,this.disableEditEffectDate=!1,this.expand_to_current_node=!0,this.is_calculate_zero=!1,this.hide_node_with_zero=!1,e&&(e.selectorModel=e.selectorModel||e.model,p()(this,e),this.selectChildrenOptions=new N(e.selectChildrenOptions),this.parseSelectorModel(),this.inferSelectorType(),this.updateTreeOriginObject(),this.validate())}return e.prototype.validate=function(){var e;M()(e=["self","sync","new"]).call(e,this.mode)||console.error('mode should be "self" or "sync", now is '+this.mode)},e.prototype.parseSelectorModel=function(){var e,t,n;M()(e=["OrgPosition","OrgDepartment","OrgUnit","Department","DepartmentHistory"]).call(e,this.selectorModel)?(this.tree_type="org",this.useSearch=null===(t=this.useSearch)||void 0===t||t):(this.tree_type="common",this.useSearch=null!==(n=this.useSearch)&&void 0!==n&&n)},e.prototype.inferSelectorType=function(){var e;"OrgUnit"===this.selectorModel?this.selector_type=this.selector_type||[10]:"OrgDepartment"===this.selectorModel?this.selector_type=this.selector_type||[10,20]:"OrgPosition"===this.selectorModel?this.selector_type=this.selector_type||[40]:M()(e=["Department","DepartmentHistory"]).call(e,this.selectorModel)&&(this.selector_type=this.selector_type||[10,20,40])},e.prototype.updateTreeOriginObject=function(){"sync"===this.mode&&(this.treeOriginObject=new W(this.originObject))},e.icon_leaf="icon-hcm-file-solid-closed",e.icon_close="icon-hcm-file-solid-closed",e.icon_expand="icon-hcm-file-solid-open",e.icon_unit="icon-hcm-building-typeone",e.icon_dept="icon-hcm-building-typetwo",e.icon_pos="icon-certificate-manegeme",e}(),N=function(e){this.showBtnFilter=[10,20,40],this.checkLabel="选中下级",this.uncheckLabel="取消下级",this.checkLabelOnly="仅选中下级",p()(this,e||{})},K=n("wd/R");!function(e){e[e.unChecked=-1]="unChecked",e[e.halfChecked=0]="halfChecked",e[e.checked=1]="checked"}(i||(i={}));var H=function(){function e(e){this.selected_status=i.unChecked,p()(this,e||{})}return e.prototype.refreshSelectState=function(e){var t,n,i=0;switch(null===(t=this.child)||void 0===t||L()(t).call(t,(function(e){switch(e.selected_status){case 0:i+=.5;break;case 1:i++}return e})),e){case 1:break;case 3:this.selected_status=0;break;default:0===i?this.selected_status=-1:i===this.child.length?this.selected_status=1:this.selected_status=0}null===(n=this.treeParent)||void 0===n||n.refreshSelectState(e)},e}(),V=n("yM22"),Y=function(){function e(e,t,n,i,o,a,l,r,c,s){var d=this;this.$q=e,this.treeLoaderService=t,this.dataService=n,this.contextService=i,this.$rootScope=o,this.$timeout=a,this.$sce=l,this.$filter=r,this.loader=c,this.selected_list=[],this.selectedIdList={half:new R.a,all:new R.a},this.tree_config={},this.is_calculate=!1,this.syncModeListTemp=[],this.scrollToSearchedNode=function(e){d.searchedNode=e,d.$scrollToNode(".searched")},this.options=new z(s),this.contextAuth=this.contextService.getContext("auth")}return e.prototype.$setDblClick=function(e){this.dblClick=e},e.prototype.$search_key_press=function(e){13===(window.event?e.keyCode:e.which)&&this.$search_click(e)},e.prototype.$search_click=function(e){null==e||e.stopPropagation(),this.keyword?(this.get_search_style(),this.keyword!==this.last_key_word?this.$search():this.keyword===this.last_key_word&&this.search_data.length>0&&"pc"===window.client?this.show_search=!0:this.$search()):this.$rootScope.show_warning("请输入关键词检索")},e.prototype.$delete=function(e){e&&(this.show_search=!1)},e.prototype.$search=function(){var e,t,n,i,o,a,l=this,r=(null===(e=this.options.filter_dict)||void 0===e?void 0:e.org_type)||[10,20,40],c=Math.max.apply(Math,Object(B.h)(r)),s="pc"===window.client?this.selectedNode:this.history_org_list[(null===(t=this.history_org_list)||void 0===t?void 0:t.length)-1].origin_node,d=this.options.searchInSelectedNode?null==s?void 0:s.id:void 0,u=this.options.searchInSelectedNode&&(null==s?void 0:s.name)||"全部";a="org"===this.options.tree_type?this.dataService.callHcmOpenApi("org.position.search",{key:this.keyword,org_id:d,filter_org_type:c,role:(null===(n=this.$filter("valueToFunc")(this.options.extra_property)())||void 0===n?void 0:n.role)||"manager",is_show_revoke:this.is_show_revoke||this.options.show_revoke,date_:null!==(i=this.effect_date)&&void 0!==i?i:void 0,state:null===(o=this.$filter("valueToFunc")(this.options.extra_property)())||void 0===o?void 0:o.state}):this.dataService.callHcmOpenApi("hcm.model.list",{model:this.options.selectorModel,filter_str:this.keyword}).then((function(e){return e.list}));a.then((function(e){if(e.length){l.search_domain=u,l.last_key_word=l.keyword,l.show_search=!0;var t=l.keyword;try{if("org"===l.options.tree_type){l.$timeout((function(){l.search_data=L()(e).call(e,(function(e){return e.parent&&(e.full_name=l.$sce.trustAsHtml((e.parent.org_full_name||e.parent.full_name||e.parent.name).split(t).join('<span class="sys-color">'+t+"</span>")+"/"+e.full_name)),e}))}),0)}else{var n;(i=A()(n=L()(e).call(e,(function(e){return e.parent_id||e.tree_id.split("!")[e.tree_id.split("!").length-2]}))).call(n,(function(e){return e})),l.dataService.callHcmOpenApi("hcm.model.list",{model:l.options.selectorModel,filter_dict:{id:i}}).then((function(e){return e.list}))).then((function(n){l.search_data=L()(e).call(e,(function(e){var i=j()(n).call(n,(function(t){return t.id==(e.parent_id||e.tree_id.split("!")[e.tree_id.split("!").length-2])}));return e.full_name=l.$sce.trustAsHtml((i?(i.org_full_name||i.full_name||i.name).split(t).join('<span class="sys-color">'+t+"</span>")+"/":"")+e.full_name),e}))}))}}catch(e){}l.search_data=L()(e).call(e,(function(e){return e.full_name=l.$sce.trustAsHtml((e.org_full_name||e.full_name||e.name).split(t).join('<span class="sys-color">'+t+"</span>")),e}))}else l.$rootScope.show_warning((null==s?void 0:s.name)?"在 "+s.name+" 下未检索出对应结果":"未检索出对应结果");var i}))},e.prototype.isSelected=function(e){var t,n;return E()(t=L()(n=this.selected_list).call(n,(function(e){return e.id}))).call(t,e.id)},e.prototype.isSelectedCheckAll=function(e){var t,n;return"self"===this.options.mode?-1!==E()(t=L()(n=this.selected_list).call(n,(function(e){return e.id}))).call(t,e.id):this.selectedIdList.all.has(e.id)},e.prototype.getNodeIcon=function(e){if(e.icon)return e.icon;if(this.options.getNodeIconCustom){var t=this.options.getNodeIconCustom(e);if(t)return t}switch(e.org_type||e.is_leaf){case 10:return z.icon_unit;case 20:return z.icon_dept;case 40:return z.icon_pos;case!0:return e.icon||z.icon_leaf;default:return e.expand?z.icon_expand:z.icon_close}},e.prototype.$setFilterMode=function(e){this.filter_mode=e,this.tree_config.filter_mode=e},e.prototype.getFilterMode=function(){var e,t=this;return(null===(e=this.options.filter_mode_params)||void 0===e?void 0:j()(e).call(e,(function(e){return e.value===t.filter_mode})))||{value:this.filter_mode}},e.prototype.showSelectChildren=function(e){var t;if(this.options.selectChildrenBtn&&(M()(t=this.options.selectChildrenOptions.showBtnFilter).call(t,e.org_type)&&e.expand&&this.options.multi))return!0;return!1},e.prototype.showSelectChildrenOnly=function(e){var t;if(this.options.selectChildrenBtnOnly&&(M()(t=this.options.selectChildrenOptions.showBtnFilter).call(t,e.org_type)&&e.expand&&this.options.multi))return!0;return!1},e.prototype.$selectChildren=function(e,t){var n,o,a=this;t&&this.options.treeOriginObject.deleteNode(e);var l=null===(n=this.options.selectChildrenOptions)||void 0===n?void 0:n.orgTypeFilter;e.selected_child=!t&&!e.selected_child,null===(o=e.child)||void 0===o||D()(o).call(o,(function(n){if(a.isSelectable(n)){if(l&&!M()(l).call(l,n.org_type))return;if("self"===a.options.mode){var o,r,c=L()(o=a.selected_list).call(o,(function(e){return e.id})),s=E()(c).call(c,n.id);if(!e.selected_child&&s>-1)k()(r=a.selected_list).call(r,s,1);else e.selected_child&&-1===s&&a.isSelectable(n)&&a.selected_list.push(n)}t?function(e){a.selectedIdList.all.add(e.id),e.selected_status=i.checked}(n):function(t){e.selected_child?(a.selectedIdList.all.add(t.id),t.selected_status=i.checked):(a.selectedIdList.all.delete(t.id),t.selected_status=i.unChecked)}(n)}})),e.refreshSelectState(t)},e.prototype.$scrollToNode=function(e){this.$timeout((function(){var t,n,i=j()(t=angular.element("hc-simple-tree")).call(t,e),o=j()(n=angular.element("hc-simple-tree")).call(n,".tree-content");if(i.length){var a=i.last()[0].offsetTop-o.last()[0].offsetTop;o.last().animate({scrollTop:a},"fast")}}),200)},e.prototype.$expandNode=function(e){var t=this;if(e)return e.expand||"virtual"===e.parent_id?("pc"===window.client&&(e.expand=!0),e.children&&(e.child=e.children),w.a.resolve(e.child)):("pc"===window.client&&(e.expand=!0),this.loader(e,this.is_calculate,this.tree_config).then((function(n){var o,a;(e.t_id&&(o=e.t_id+"!"),t.is_calculate&&b()(n.data))?(D()(a=n.data).call(a,(function(i){i.layer=e.layer+1,i.t_id=o+i.id,n.emp_count&&(i.emp_count=n.emp_count[i.id]||(t.options.is_calculate_zero?null:0))})),n.emp_count&&(e.emp_count=n.emp_count[e.id]||(t.options.is_calculate_zero?null:0)),e.child=n.data):e.child=L()(n).call(n,(function(n){return n.layer=e.layer+1,o&&(n.t_id=o+n.id),t.options.multi&&"sync"===t.options.mode&&(n.treeParent=e,t.selectedIdList.all.has(n.id)?n.selected_status=i.checked:t.selectedIdList.half.has(n.id)?n.selected_status=i.halfChecked:e.selected_status!==i.halfChecked&&(n.selected_status=e.selected_status)),new H(n)}));return t.current_org={origin_node:e,child:e.child},t.history_org_list.push({origin_node:e,child:e.child}),"mobile"===window.client&&g()((function(){j()($).call($,".hc-simple-tree .pick")[0].scrollIntoViewIfNeeded({inline:"start",behavior:"smooth"})})),e.child})))},e.prototype.$collapseNode=function(e){return e.expand&&(e.expand=!1),this},e.prototype.$selectNodeByTreeID=function(e,t,n){var i,o,a=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.options.addRootAll&&!M()(i=e.toString()).call(i,"-1")&&(e="-1!"+e),this.show_search=!1;var l,r=L()(o=e.toString().split("!")).call(o,(function(e){return f()(e,10)})),c=this.$q.when(this.data);this.history_org_list=[{origin_node:null,child:this.data}];for(var s=this,d=function(e){c=c.then((function(i){if(i){var o;if(i.data)l=j()(o=i.data).call(o,(function(t){return t.id===r[e]}));else l=j()(i).call(i,(function(t){return(t.id||f()(t.t_id))===r[e]}));return l||e!==r.length?e===r.length-1?n?(a.options.multi||a.$selectNode(l),a.$expandNode(l)):l&&(t&&s.isSelectedCheckAll(l)||!s.options.searchSelected)?s.scrollToSearchedNode(l):a.$q.when(a.$selectNode(l,!0,t)):l?a.$expandNode(l):i:a.$q.when(null)}return a.$q.when(null)}))},u=0;u<r.length;u++)d(u);return c},e.prototype.scrollToSelectedNode=function(){this.$timeout((function(){var e,t,n=j()(e=angular.element("hc-simple-tree")).call(e,".tag-selected"),i=j()(t=angular.element("hc-simple-tree")).call(t,".tree-content");if(n.length){var o=n.last()[0].offsetTop-i.last()[0].offsetTop;i.last().animate({scrollTop:o},"fast")}}),200)},e.prototype.expendAndScroll=function(e,t){var n=this,i=this.$q.when(this.data);return L()(e).call(e,(function(o,a){for(var l,r=null,c=L()(l=o.toString().split("!")).call(l,(function(e){return f()(e,10)})),s=function(o){i=i.then((function(i){if(i){var l;if(i.data)r=j()(l=i.data).call(l,(function(e){return e.id===c[o]}));else r=j()(i).call(i,(function(e){return(e.id||f()(e.t_id))===c[o]}));return o===c.length-1?(a===e.length-1&&t.resolve(n.scrollToSelectedNode()),n.data):r?n.$expandNode(r):n.data}return n.$q.when(null)}))},d=0;d<c.length;d++)s(d)})),i},e.prototype.$setOptions=function(e){return this.options=p()(this.options,e),this},e.prototype.$setLoader=function(e){return this.loader=e,this},e.prototype.$setTreeParamsCallback=function(e){this.tree_params_callback=e},e.prototype.$initRootNodesStatus=function(e){var t=this;this.options.multi&&this.options.originObject&&b()(this.options.originObject)&&("self"===this.options.mode?this.selected_list=this.options.originObject:(this.selectedIdList=this.getSelectedIdList(this.options.originObject),this.syncModeListTemp=u()(new R.a(this.selectedIdList.all)))),this.data=null==e?void 0:L()(e).call(e,(function(e){return(e=new H(e)).id?e.t_id=""+e.id:e.is_virtual_root_node&&(e.t_id="-1"),t.options.multi&&"sync"===t.options.mode&&(t.selectedIdList.all.has(e.id)?e.selected_status=i.checked:t.selectedIdList.half.has(e.id)&&(e.selected_status=i.halfChecked)),e}))},e.prototype.getSelectedIdList=function(e){var t,n,i,o;void 0===e&&(e=this.getSelectedNodes());var a={all:new R.a(L()(e).call(e,(function(e){return e.id}))),half:new R.a};a.all=new R.a(L()(e).call(e,(function(e){return e.id})));try{for(var l=Object(B.i)(e),r=l.next();!r.done;r=l.next()){var c=r.value.t_id.split("!");try{for(var d=(i=void 0,Object(B.i)(L()(_=s()(c).call(c,0,c.length-1)).call(_,(function(e){return f()(e,10)})))),u=d.next();!u.done;u=d.next()){var _,p=u.value;a.half.add(p)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},e.prototype.$initTree=function(e,t,n){var i=this;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===n&&(n={});var o=this.$q.defer();return n.effect_date||(n.effect_date=this.options.future_business?K().format("YYYY-MM-DD"):null),n.filter_mode||(n.filter_mode=this.options.filter_mode),this.options.updateTreeOriginObject(),this.effect_date=n.effect_date,this.filter_mode=n.filter_mode,this.tree_config=n,this.is_calculate=t,this.last_key_word=null,this.loader(null,this.is_calculate,n).then((function(t){var n,a;D()(t).call(t,(function(e){return e.layer=0})),i.options.addRootAll&&(a=[new H({layer:0,enabled:!0,id:i.options.rootAllSelected?-1:void 0,name:i.options.rootNodeName,is_leaf:!1,is_virtual_root_node:!0})]);var l=(null==t?void 0:t.length)>1&&a?a:t;if(i.$initRootNodesStatus(l),i.current_org={origin_node:null,child:i.data},i.history_org_list=[{origin_node:null,child:i.data}],i.options.originObject&&!0!==i.options.multi&&!1===i.options.expand_to_current_node){var c,s=e||(null===(n=i.options.originObject)||void 0===n?void 0:n.t_id);return i.options.addRootAll&&!M()(c=s.toString()).call(c,"-1")&&(s="-1!"+s),i.selectedNode=new H(p()({},i.options.originObject,{t_id:s})),void o.resolve(i.selectedNode)}i.options.expand_to_current_node&&e?"object"===r()(e)?i.expendAndScroll(e,o):i.$selectNodeByTreeID(e).then((function(e){e?o.resolve(e):o.resolve(i.$selectNode())})):o.resolve(i.$selectNode())})),o.promise},e.prototype.isSelectable=function(e){return!!(null==e?void 0:e.is_virtual_root_node)||("org"===this.options.tree_type?M()(t=this.options.selector_type).call(t,null==e?void 0:e.org_type)&&this.options.canSelectedCondition(e):this.options.canSelectedCondition(e));var t},e.prototype.$selectNode=function(e,t,n){var i=this;if(void 0===e&&(e=null),void 0===t&&(t=!1),void 0===n&&(n=!1),!this.options.multi||"pc"!==window.client){var o=function(e){i.selectedNode=e,t?i.$scrollToNode(".selected"):i.last_key_word=null};return e?this.isSelectable(e)?o(e):n&&this.scrollToSearchedNode(e):this.data&&this.isSelectable(this.data[0])&&o(this.data[0]),this.selectedNode}e&&this.$selectNodeMulti(e,null,t)},e.prototype.$selectNodeMulti=function(e,t,n){var o,a=this;if(void 0===n&&(n=!1),"self"===this.options.mode){var l,r,c=L()(l=this.selected_list).call(l,(function(e){return e.id}));if((p=E()(c).call(c,e.id))>-1)k()(r=this.selected_list).call(r,p,1);else this.isSelectable(e)&&this.selected_list.push(e)}else{e.selected_status=e.selected_status===i.checked?i.unChecked:i.checked,e.child&&function e(t){var n;null===(n=null==t?void 0:t.child)||void 0===n||L()(n).call(n,(function(n){return n.selected_status=t.selected_status,n.child&&e(n),n}))}(e),this.options.treeOriginObject.expiredNodeInOriginObject(e),null===(o=e.treeParent)||void 0===o||o.refreshSelectState();var s=u()(new R.a(this.selectedIdList.all));this.selectedIdList=this.getSelectedIdList();var d=u()(new R.a(this.selectedIdList.all));if(s.length>d.length){var _,p,m;if((p=E()(_=this.syncModeListTemp).call(_,e.id))>-1)k()(m=this.syncModeListTemp).call(m,p,1);L()(s).call(s,(function(e){if(!M()(d).call(d,e)){var t,n,i=E()(t=a.syncModeListTemp).call(t,e);if(i>-1)k()(n=a.syncModeListTemp).call(n,i,1)}}))}else if(s.length<d.length){var f;M()(f=this.syncModeListTemp).call(f,e.id)||this.syncModeListTemp.push(e.id)}}n&&this.scrollToSearchedNode(e)},e.prototype.recursiveGetSelectedNodes=function(e){var t=this,n=Array();return!0===this.options.multi&&"sync"===this.options.mode&&!0===e[0].is_virtual_root_node&&(e=e[0].child),L()(e).call(e,(function(e){var o,l,r;if(M()(o=["Department","OrgDepartment"]).call(o,t.options.selectorModel))e.selected_status===i.checked?M()(r=[10,20]).call(r,e.org_type)&&n.push(e):e.selected_status===i.halfChecked&&e.child&&(n=a()(n).call(n,t.recursiveGetSelectedNodes(e.child)));else if(M()(l=["OrgPosition"]).call(l,t.options.selectorModel)){var c;if(e.selected_status===i.checked)M()(c=[40]).call(c,e.org_type)&&n.push(e),e.child&&(n=a()(n).call(n,t.recursiveGetSelectedNodes(e.child)));else e.selected_status===i.halfChecked&&e.child&&(n=a()(n).call(n,t.recursiveGetSelectedNodes(e.child)))}else e.selected_status===i.checked?n.push(e):e.selected_status===i.halfChecked&&e.child&&(n=a()(n).call(n,t.recursiveGetSelectedNodes(e.child)))})),n},e.prototype.getSelectedNodes=function(e){void 0===e&&(e=this.data);var t=this.recursiveGetSelectedNodes(e),n=this.options.treeOriginObject.getUpdatedOriginObject();return Object(V.b)(n,t,"id")},e.$inject=["$q","treeLoaderService","dataService","contextService","$rootScope","$timeout","$sce","$filter","loader","options"],e}(),G=n("CoJ3"),J=(n("/zKR"),n("guyh")),X=n.n(J),Q=n("LYCE"),Z=n.n(Q),ee=function(e){function t(t,n,i,o){void 0===o&&(o=!0);var a=t.options,l=a.plan_key,r=a.selectorModel,c=a.state;return e.call(this,{key:l,model:r,state:c,biz_type:"list",current_plan:t.planModel,plan_list:n,config:i,closeAfterSelected:o})||this}return Object(B.d)(t,e),t.prototype.updateConfig=function(e){this.config=e},t}(n("MskY").b),te=function(){function e(e,t){this.selected_id_list=[],e?p()(this,e):t&&(this.selected_id_list=null==t?void 0:L()(t).call(t,(function(e){return e.id})))}return Z()(e.prototype,"SelectedString",{get:function(){var e;return null===(e=this.selected_id_list)||void 0===e?void 0:X()(e).call(e).toString()},enumerable:!0,configurable:!0}),e.prototype.equalTreeNodes=function(e){var t;return this.SelectedString===X()(t=L()(e).call(e,(function(e){return e.id}))).call(t).toString()},e.prototype.calculateCurrentPlan=function(t){var n,i,o=this.SelectedString;if(!o)return j()(t).call(t,(function(e){return e.default}));try{for(var a=Object(B.i)(t),l=a.next();!l.done;l=a.next()){var r=l.value;if(new e(r.config).SelectedString===o)return r}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.isEmpty=function(){return 0===this.selected_id_list.length},e}(),ne=function(){function e(e,t,n,i){this.$injector=e,this.crudSettingService=t,this.$hcDialog=n,this.planPanelService=i}return e.prototype.createTree=function(e,t){return this.$injector.instantiate(Y,{loader:e,options:t})},e.prototype.getPlanList=function(e,t,n){if("string"==typeof e)return this.crudSettingService.getAvailablePlan(null,{key:e,model:t,state:n,biz_type:"list"},1,50).then((function(e){return e.list}));var i=e;return this.crudSettingService.getAvailablePlan(null,{key:i.plan_key,model:i.selectorModel,state:i.state,biz_type:"list"},1,50).then((function(e){return e.list}))},e.prototype.syncTreeForPlan=function(e,t){return Object(B.c)(this,void 0,void 0,(function(){var n,i;return Object(B.e)(this,(function(o){switch(o.label){case 0:return t?(n=void 0,n="clear"===t?[]:t.config.selected_id_list,i=e.options,[4,e.loader(null,null,{},{origin_id:n})]):[3,3];case 1:return i.originObject=o.sent(),[4,e.$initTree()];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},e.prototype.preResolveSelectedNodesForPlan=function(e){return Object(B.c)(this,void 0,w.a,(function(){var t,n,i,o=this;return Object(B.e)(this,(function(a){switch(a.label){case 0:return t=null,n=e.getSelectedNodes(),i=new te(null,n),e.planModel?[3,3]:i.isEmpty()?[3,2]:[4,this.$hcDialog.confirm("是否要保存为方案",[{caption:"保存为方案",func:function(){return e.planModelParams.updateConfig(i),o.planPanelService.newPlan(e.planModelParams)}},{caption:"继续",func:function(){}}])];case 1:a.sent(),a.label=2;case 2:return t=n,[3,6];case 3:return e.planModel.config=new te(e.planModel.config),e.planModel.config.equalTreeNodes(n)?(t=n,[3,6]):[3,4];case 4:return[4,this.$hcDialog.confirm("当前查询方案已改变，是否继续查询",[{caption:"保存当前方案",func:function(){return o.planPanelService.editPlan(e.planModel,i)}},{caption:"另存为新方案",func:function(){return e.planModelParams.updateConfig(i),o.planPanelService.newPlan(e.planModelParams)}},{caption:"继续",func:function(){}}])];case 5:a.sent(),t=n,a.label=6;case 6:return[2,w.a.resolve(t)]}}))}))},e.$inject=["$injector","crudSettingService","$hcDialog","planPanelService"],e}();function ie(e){return{getOrgLoader:function(t,n){return function(i){return i?e.getSubOrg(i.id):e.getMyDepartmentByRole(t,n)}}}}G.a.service("$hcSimpleTree",ne),G.a.factory("$hcSimpleTreeLoader",ie),ie.$inject=["treeLoaderService"];n("GKVU");var oe=n("xlHU"),ae=n.n(oe),le=(n("Ptjo"),n("TpP2"),n("SNqt")),re=n.n(le),ce=n("TRUa"),se=n.n(ce);n("HIfa");window.app.controller("TreeSettingDialogCtrl",["$controller","$rootScope","$scope","$hcForm",function(e,t,n,i){var o,a,l;n.init=function(){n.base_form=i.createForm().$setMeta(n.info_meta),n.$dialog.operates([{key:"back",label:"取消",func:n.close},{key:"submit",default:!0,label:"确定",func:n.submit}]),n.params.data&&n.base_form.$setData(n.params.data)},n.config_params_list=[],L()(o=[{name:"显示撤销组织",value:"revoke"},{name:"显示单位",value:"is_display_unit"}]).call(o,(function(e){var t,i,o;M()(t=L()(i=A()(o=n.params.options.config_params||[]).call(o,(function(e){return!e.hide}))).call(i,(function(e){return e.key}))).call(t,e.value)&&n.config_params_list.push(e)})),n.info_meta=[{key:"effect_date",component:"hc-input-datetime",label:"当前日期",change:function(){},options:{default:!0,readOnly:n.params.options.disableEditEffectDate,placeholder:"当前日期",query:!0,hide:function(){return!n.params.options.future_business}}},{key:"config_params",component:"hc-input-checkbox",change:function(){},options:{list:n.config_params_list,default:!0,hide:function(){return!n.config_params_list.length}}},{key:"filter_mode",component:"hc-input-radio",label:"过滤模式设置",change:function(){},options:{list:n.params.options.filter_mode_params||[],default:null===(l=null===(a=n.params)||void 0===a?void 0:a.data)||void 0===l?void 0:l.filter_mode,hide:function(){var e;return!(null===(e=n.params.options.filter_mode_params)||void 0===e?void 0:e.length)}}}],n.submit=function(){n.$dialog.resolve_data(n.base_form.data),n.$dialog.dialog_close()},n.close=function(){n.$dialog.dialog_close()}}]);var de,ue={width:150,mask:!1,maskClose:!0,name:"tree-setting",controller:"TreeSettingDialogCtrl",template:se.a},_e=n("tcdP"),pe=[re.a],me=n("TebA");function fe(e,t,n,i){return{restrict:"EA",template:function(){return pe.join(" ")},scope:{model:"="},link:function(e,t){e.expandNode=function(t){return e.model.$expandNode(t)},e.$watch("model.data",(function(t){!function t(n){n&&1===n.length&&!n[0].is_leaf&&e.expandNode(n[0]).then((function(e){t(e)}))}(t)}))},controller:["$scope","$element",function(n,o){var a=this;n.client=window.client,n.init=function(){var e;n.tree_node=(null!==(e=n.model.options.custom_template)&&void 0!==e?e:"default_view")+".html","OrgPosition"===n.model.options.selectorModel&&(n.model.options.selector_type=[40]),n.model.options.usePlan&&n.initPlan(),n.selectChildrenOptions=new N(n.model.options.selectChildrenOptions);var t=function(){j()(o).call(o,".search-content")[0].style.width=o.width()+"px"};n.$watch("model.get_search_style",(function(e){n.model&&!n.model.get_search_style&&(n.model.get_search_style=t)})),n.$on("win_body_click_event",(function(){n.model.show_search=!1}))},n.initPlan=function(){return Object(B.c)(a,void 0,void 0,(function(){var t,o;return Object(B.e)(this,(function(a){switch(a.label){case 0:return t=new te(null,n.model.options.originObject),[4,i.getPlanList(n.model.options)];case 1:return o=a.sent(),n.model.planModelParams=new ee(n.model,o,t),n.model.planModel=t.calculateCurrentPlan(o),n.model.planSelectorOption={dictParams:!0,placeholder:"请选择方案",selector:function(t){return Object(B.c)(this,void 0,void 0,(function(){var o,a,l,r,c=this;return Object(B.e)(this,(function(s){switch(s.label){case 0:return o=new te(null,n.model.getSelectedNodes()),[4,i.getPlanList(n.model.options)];case 1:return a=s.sent(),l=function(e){return Object(B.c)(c,void 0,void 0,(function(){return Object(B.e)(this,(function(t){switch(t.label){case 0:return n.model.planModel="clear"!==e?e:null,[4,i.syncTreeForPlan(n.model,e)];case 1:return t.sent(),[2]}}))}))},n.model.planModelParams=new ee(n.model,a,o),r=t.event,t.scope,[2,e.getDialog(_e.a).anchor($(r.target).closest("hc-selector")).size("small").show(n.model.planModelParams).then(l,null,l)]}}))}))}},[4,i.syncTreeForPlan(n.model,n.model.planModel)];case 2:return a.sent(),[2]}}))}))},n.show_setting=function(i){e.getDialog(ue).anchor(angular.element(i.target).closest(".tree-setting")).show({data:n.model.tree_config,options:n.model.options}).then((function(e){var i;e&&(n.model.effect_date=e.effect_date,n.model.filter_mode=e.filter_mode,n.model.is_show_revoke=null===(i=e.config_params)||void 0===i?void 0:M()(i).call(i,"revoke"),n.model.$initTree(t.params.tree_id,n.model.is_calculate,e).then((function(){n.model.tree_params_callback(e)})))}))},n.change_to_struct=function(){n.$emit("org_topo_details_params",{})},n.showCheckbox=function(e){if(n.model.options.multi&&"self"===n.model.options.mode||"mobile"===window.client)return n.model.isSelectable(e)},n.getTreeNodeColor=function(e,t){var i,o;if(!1===e.enabled)return"color-gray";var a=null===(o=null===(i=n.model)||void 0===i?void 0:i.options)||void 0===o?void 0:o.node_color_func;return a?a(e,t):""},n.pickHistoryNode=function(e){var t;n.model.current_org=n.model.history_org_list[e-1],n.model.history_org_list=s()(t=n.model.history_org_list).call(t,0,e)}}]}}L()(de=ae()(me).call(me)).call(de,(function(e){pe.push('<script type="text/ng-template" id="'+s()(e).call(e,2,e.length)+'">'+me(e)+"<\/script>")})),G.a.directive("hcSimpleTree",fe),fe.$inject=["$hcDialog","$state","$rootScope","$hcSimpleTree","planPanelService"]},qF75:function(e,t,n){"use strict";var i=n("WxoT"),o=n.n(i),a=n("TEMH"),l=n.n(a),r=n("RXMP"),c=n.n(r),s=n("Vi3r"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("a0dU"),m=n.n(p),f=n("5PDf"),h=n.n(f),g=(n("ls82"),n("SPx3")),v=n.n(g),b=n("o+MX"),y=n.n(b),w=n("rYan"),x=(n("srGB"),n("PX3v")),k=(n("mqRb"),n("1hbj"));window.app.controller("HCTreeListSelectorPanelCtrl",["$controller","BaseCRUDService","$scope","commonPanelService","$hcSimpleTree","$q","$hcDialog","commonTreeLoaderService","$filter",function(e,t,n,i,a,r,s,u,p){n.model=n.params.model||n.params.selectorModel;var f=n.model?t.getModelService(n.model):t.getBaseService(n.params.selectorObject);n.selector_flag=!0,n.favorite_list_show=!1,n.tree_options={addRootAll:n.params.addRootAll},n.client=window.client,e(w.a,{$scope:n,CRUDService:f,InfoDialog:Object(k.a)(n.model)}),n._updateList=function(e,t,i){var o,a;t?n.list_model.$setData(y()(o=n.list_model.data).call(o,e),!0):((null===(a=n.params)||void 0===a?void 0:a.show_favorite)&&(n.list_model.show_favorite=!0,e=n.favoriteProcessBeforeSetData(e)),n.list_model.$setData(e,n.selector_flag||i),n.isLoading=!1,n.list_model.current_page=n.paging.current_page,n.list_model.page_size=n.paging.page_size)},n.setTitle=function(){},n.close=function(){var e;(null===(e=n.params)||void 0===e?void 0:e.rejectOnClose)&&n.$dialog.reject_data({status:"close"}),n.$dialog.dialog_close()},n.initAfter=function(){n.list_filter_model.data.mobile_tree_id=(n.tree_model.selectedNode||{}).id,n.list_model.$setFavoriteListCallback(n.favoriteListCallback),n.params.selectorType&&n.list_model.$setRowSelector(n.params.selectorType),n.list_model.selector_flag=!0,n.params.originObject=n.params.originObject||n.params.selected_items,n.params.originObject&&(2===n.params.selectorType?n.list_model.selected_items=n.params.originObject:n.list_model.selected_item=n.params.originObject)},n.initAdvanceQueryAfter=function(){var e;n.advance_query.$setOptions({favorite_list_callback:n.favoriteListCallback,show_favorite:null===(e=n.params)||void 0===e?void 0:e.show_favorite})},n.$watch("list_filter_model.data.mobile_tree_id",(function(e,t){e&&t&&(n.tree_model.selectedNode.id=e,n.fetchData())}),!0),n.defaultAction=function(){var e=v()(m.a.mark((function e(t){var i,o,a,l,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h()(i=n.list_btn_model.actions).call(i,(function(e){return e.default})),!("mobile"===n.client&&!n.list_model.select_status&&o.length>0||o.length>0&&"selector"===o[0].type)){e.next=8;break}return e.next=4,n.parseAction(o[0],t);case 4:r=e.sent,(null===(a=o[0])||void 0===a?void 0:a.after_func)&&(null===(l=o[0])||void 0===l||l.after_func(r)),e.next=9;break;case 8:n.list_model.selectItem(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setRowSelector=function(){},n.getTreeLoader=v()(m.a.mark((function e(){var t,i,o,a,l,r,c,s,d,f,h,g,v=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=v.length>0&&void 0!==v[0]?v[0]:{},r={filter_dict:{},extra_property:{}},e.t0=n.params.orgType||n.params.org_type,e.next="org"===e.t0?5:"position"===e.t0?7:8;break;case 5:return r.filter_dict.org_type=[10,20],e.abrupt("break",8);case 7:r.filter_dict.org_type=[10,20,40];case 8:if(e.t1=n.params.tree_filter_dict,!e.t1){e.next=16;break}return e.t2=angular,e.t3=r.filter_dict,e.next=14,p("valueToFunc")(n.params.tree_filter_dict)();case 14:e.t4=e.sent,e.t2.extend.call(e.t2,e.t3,e.t4);case 16:if((c=(null===(t=n.params)||void 0===t||null===(i=t.selectorOptions)||void 0===i||null===(o=i[1])||void 0===o?void 0:o.role)||n.params.role)&&(r.extra_property.role=c),n.params.mode){e.next=29;break}g=null===(d=n.params)||void 0===d||null===(f=d.selectorOptions)||void 0===f||null===(h=f[1])||void 0===h?void 0:h.mini_type,e.t5=g,e.next="10"===e.t5||10===e.t5?23:"20"===e.t5||20===e.t5?25:"40"===e.t5||40===e.t5?27:29;break;case 23:return s=[10],e.abrupt("break",29);case 25:return s=[10,20],e.abrupt("break",29);case 27:return s=[10,20,40],e.abrupt("break",29);case 29:s&&(r.filter_dict.org_type=s),l.params&&(l.params.filter_dict=p("valueToFunc")(l.params.filter_dict)()),n.tree_params=p("deepMerge")(l.params||{},r),_()(a=["Department","OrgDepartment"]).call(a,l.model||n.params.selectorModel||n.params.model)?n.tree_loader=u.getNewOrgTreeLoader(n.tree_params).org_tree_loader:n.tree_loader=u.getNewCommonTreeLoader(l.model||n.params.tree_model,null,n.tree_params).common_tree_loader;case 33:case"end":return e.stop()}}),e)}))),n.getMetaState=function(){return n.meta_state||n.params.state||"treeListSelector"},n.$dialog.operates(i.getDialogOperates(n)).setClose(n.close),n.$watch("list_btn_model.actions",(function(){n.list_btn_model&&n.list_btn_model.actions.length&&n.$dialog.operates(i.getEnabledActions(n))})),n.getTreeFilterMode=function(){return n.params.filter_mode},n.SelectedInfo=function(){s.getDialog(x.a).show({mode:"edit",data:n.list_model.selected_items,alter:n.getInfoAlterParam()}).then((function(e){n.list_model.selected_items=angular.copy(e),n.list_model.$refreshData()}))},n.getModelMetaExtendParams=function(){var e,t,i;return d()(null!==(e=null===(t=n.params)||void 0===t||null===(i=t.alter)||void 0===i?void 0:i.modelMetaExtendParams)&&void 0!==e?e:[])},n.getInfoAlterParam=function(){return{meta:n.list_model.columns,model:n.model,state:n.params.selector_state}},n.getAllSelected=function(){n.$dialog.resolve_data({select_mode:"all",filter_dict:n.getAllFilterDict(),filter_str:n.getFilterStr()}),n.$dialog.dialog_close()},n.favoriteProcessBeforeSetData=function(e){var t,i=JSON.parse(window.sessionStorage.getItem("favorite"+n.getModel()+n.getMetaState()+(null===(t=n.params)||void 0===t?void 0:t.individual_key)))||[];return c()(e).call(e,(function(e){l()(i).call(i,(function(t){return t===e.id}))>=0&&(e.is_favorite=!0)})),n.favorite_list_show&&(n.$broadcast("favorite_list_show",!1),n.favoriteListCallback().closeFavoriteList()),e},n.favoriteListCallback=function(){var e,t=function(){var e;return JSON.parse(window.sessionStorage.getItem("favorite"+n.getModel()+n.getMetaState()+(null===(e=n.params)||void 0===e?void 0:e.individual_key)))||[]},i=function(e){var t;window.sessionStorage.setItem("favorite"+n.getModel()+n.getMetaState()+(null===(t=n.params)||void 0===t?void 0:t.individual_key),o()(e))};return{showFavoriteList:(e=v()(m.a.mark((function e(){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.favorite_list_show=!0,e.next=3,n.getDataEngine().apply(void 0,[n.getFilterStr(),angular.extend({},n.getTreeModeFilterDict(),n.getAllFilterDict(),{id:t()}),1,999999,angular.extend(n.getExtraProperty(),{only_list:n.separate_list_count},n.alter_extra_property),n.getBizType()]).then((function(e){return e.list}));case 3:i=e.sent,c()(i).call(i,(function(e){e.is_favorite=!0})),n.list_model.$setData(i).$setShowIndex(!1),n.hideComponents=["hcm-foot"];case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),closeFavoriteList:function(){n.favorite_list_show=!1,n.list_model.$setShowIndex(!0),n.hideComponents=n.list_config.hideComponents},setFavorite:function(e){var o,a=t();a.push(e.id),i(a),c()(o=n.list_model.data).call(o,(function(t){t.id===e.id&&(t.is_favorite=!0)})),n.list_model.$setData(n.list_model.data)},removeFavorite:function(e){var o,a,l=t();(i(h()(l).call(l,(function(t){return t!==e.id}))),c()(o=n.list_model.data).call(o,(function(t){t.id===e.id&&(t.is_favorite=!1)})),n.favorite_list_show)?n.list_model.$setData(h()(a=n.list_model.data).call(a,(function(t){return t.id!==e.id}))):n.list_model.$setData(n.list_model.data)}}}}]),t.a="HCTreeListSelectorPanelCtrl"},qOlg:function(e,t){e.exports="<style>\n    .multi-page-object {\n        text-align: center;\n        color: #666;\n        line-height: 48px;\n        height: 204px;\n    }\n</style>\n<div ng-click=\"exec_func()\" class=\"multi-page-object\" ng-show=\"object\">\n    {{object.is_refreshing?'正在读取数据...':((object.data.next_index||object.next_index)?'点击读取更多...':'没有更多数据了')}}\n</div>"},qYgS:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));n("oVuX"),n("sMBO");var i=n("5PDf"),o=n.n(i),a=n("BF1V"),l=n.n(a),r=n("o+MX"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("M5Mt"),_=n.n(u),p=n("ZbhI"),m=n.n(p),f=n("RXMP"),h=n.n(f),g=n("eLKs"),v=n.n(g),b=n("OBge"),y=n.n(b),w=n("BkRI"),x=n.n(w),k=n("mrSG"),$=n("z/LF"),O=n.n($),D=n("cngd"),C=n("AjA1"),M=n("PFeH"),S=n("ous5"),E=n("/EOG"),P=n("nc/B"),j=n("DuDV"),T=n("J23k"),A=n("LB+2"),I=n("1Puc"),L=function(e){function t(t,n,i,o,a,l,r,c,s,d,u){var _=e.call(this,t,n,i,o,a,s,d,c)||this;return _.scope=t,_.rootScope=n,_.hcDialog=i,_.hcForm=o,_.dataService=a,_.baseCRUDService=l,_.$q=r,_.$filter=c,_.dataBlockService=s,_.metaVisService=d,_.contextService=u,_.visItemMeta=[{key:"field",condition:"list",info:S.a},{key:"dim",condition:"aggr",info:E.a},{key:"aggr",condition:"aggr",info:P.a},{key:"sort",condition:"list",info:j.a},{key:"total_include",condition:"aggr"}],_.data_class="list",_.info_meta=D,_.scope.auth=u.getContext("auth"),_}return Object(k.d)(t,e),t.prototype.clickQuery=function(e){return Object(k.c)(this,void 0,void 0,(function(){var t;return Object(k.e)(this,(function(n){switch(n.label){case 0:return"model"!==this.form_model.data.source.type?[3,1]:(e.selectorModel=this.form_model.data.source.model,e.state=this.form_model.data.source.state,e.meta_info=null,[3,4]);case 1:return"meta"!==this.form_model.data.source.type?[3,2]:(e.selectorModel=null,e.meta_info=this.form_model.data.source.meta,[3,4]);case 2:return"analyze"!==this.form_model.data.source.type?[3,4]:(t=e,[4,this.dataService.callHcmOpenApi("analyze.model.fetch.script",{analyze:this.form_model.data.source.analyze})]);case 3:t.meta_info=n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.getMeta=function(){return Object(k.c)(this,void 0,y.a,(function(){var t,n,i=this;return Object(k.e)(this,(function(o){var a;switch(o.label){case 0:return[4,e.prototype.getMeta.call(this)];case 1:var l,r,c;if(t=o.sent(),"analyze_model"!=(n=this).scope.auth.company_setting.ds_control_strategy||n.scope.auth.roles.hasOwnProperty("onlyoneowner")||n.scope.auth.roles.hasOwnProperty("hcm-sys-manager")||(t.getKey("source_type").options.list=[{value:"analyze",name:"分析模型"}],t.getKey("source_type").options.default="analyze"),t.getKey("source_model")&&(t.getKey("source_model").options.hide=function(){var e,t;return"model"!==(null===(t=null===(e=i.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)}),t.getKey("source_state")&&(t.getKey("source_state").options.hide=function(){var e,t;return"model"!==(null===(t=null===(e=i.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)},t.getKey("source_state").options.selector=function(e){return Object(k.c)(i,void 0,void 0,(function(){var t,n;return Object(k.e)(this,(function(i){switch(i.label){case 0:return[4,this.getModelStateList(null===(n=null===(t=this.form_model.data)||void 0===t?void 0:t.source)||void 0===n?void 0:n.model,e)];case 1:return[2,i.sent()]}}))}))},t.getKey("source_state").options.selectorMapper=function(e){return Object(k.c)(i,void 0,void 0,(function(){return Object(k.e)(this,(function(t){return[2,{id:e,name:e}]}))}))}),t.getKey("source_analyze")&&(t.getKey("source_analyze").options.hide=function(){var e,t;return"analyze"!==(null===(t=null===(e=i.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)}),t.getKey("source_meta"))t.getKey("source_meta").options.hide=function(){var e,t;return"meta"!==(null===(t=null===(e=i.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)},t.getKey("source_meta").options.mask=v()(l=this.manualMetaMask).call(l,this),t.getKey("source_meta").options.onClick=v()(r=this.manualMetaVis).call(r,this);if(t.getKey("query_str"))t.getKey("query_str").options.selector=v()(c=this.queryStrSelector).call(c,this);return h()(a=this.visItemMeta).call(a,(function(e){t.getKey("data_"+e.key)&&(t.getKey("data_"+e.key).options.hide=function(){var t,i;return(null===(i=null===(t=n.form_model.data)||void 0===t?void 0:t.data)||void 0===i?void 0:i.type)!==e.condition},t.getKey("data_"+e.key).options.itemMask=function(e){return e.label},t.getKey("data_"+e.key).options.newSelector=function(){return Object(k.c)(i,void 0,void 0,(function(){var t,i,o;return Object(k.e)(this,(function(a){var l;switch(a.label){case 0:return m()(l=["aggr","field","dim"]).call(l,e.key)>-1?(t=[{caption:"标准字段",value:0},{caption:"公式字段",value:1}],"dim"!==e.key&&_()(t).call(t,2,0,{caption:"后加工字段",value:2}),[4,this.hcDialog.confirm("字段类型",t)]):[3,5];case 1:return 1!==(i=a.sent()).value?[3,3]:[4,n.visComputeFieldAdd(e.key)];case 2:return[2,a.sent()];case 3:return 2!==i.value?[3,5]:[4,n.visFormulaFieldAdd(e.key)];case 4:return(o=a.sent()).field=[o.key],[2,o];case 5:return[4,n.visItemAdd(e.key)];case 6:return[2,a.sent()]}}))}))},t.getKey("data_"+e.key).options.editSelector=function(t){return Object(k.c)(i,void 0,void 0,(function(){var i,o;return Object(k.e)(this,(function(a){var l;switch(a.label){case 0:return"list"===(null===(o=null===(i=n.form_model.data)||void 0===i?void 0:i.data)||void 0===o?void 0:o.type)||m()(l=["aggr","dim"]).call(l,e.key)>-1?t.compute_field?[4,n.visComputeFieldEdit(e.key,t)]:[3,2]:[3,4];case 1:return[2,a.sent()];case 2:return t.expression?[4,n.visFormulaFieldEdit(e.key,t)]:[3,4];case 3:return[2,a.sent()];case 4:return[4,n.hcDialog.getDialog(e.info).show({data:t})];case 5:return[2,a.sent()]}}))}))})})),[2,t]}}))}))},t.prototype.visItemAdd=function(e){return Object(k.c)(this,void 0,void 0,(function(){var t,n,i,o,a=this;return Object(k.e)(this,(function(l){switch(l.label){case 0:return i=(n=this.metaVisService).meta2VisMeta,[4,this.dataBlockService.getListMeta(this.form_model.data)];case 1:return[4,i.apply(n,[l.sent()])];case 2:return t=l.sent(),[4,this.hcDialog.getDialog(T.a).size("middle").show({treeLoader:function(e){return Object(k.c)(a,void 0,void 0,(function(){return Object(k.e)(this,(function(n){switch(n.label){case 0:return[4,this.metaVisService.getTreeLoaderByModelRelation(e,t.model_relation)];case 1:return[2,n.sent()]}}))}))},multi:!0})];case 3:return o=l.sent(),[2,d()(o).call(o,(function(t){return a.metaVisService.getVisItemByNode(t,e)}))]}}))}))},t.prototype.computeFieldSetDialog=function(e,t){var n;return Object(k.c)(this,void 0,void 0,(function(){var i,o,a;return Object(k.e)(this,(function(l){switch(l.label){case 0:var r,c;if(i=x()(this.form_model.data),o="aggr"===e?"aggr":"field","aggr"===e)h()(r=i.data.aggr).call(r,(function(e){!e.expression&&(e.key=e.aggr.field)}));else h()(c=i.data[e]).call(c,(function(e){!e.expression&&(e.key=e.field.join("."))}));return a={model:null,relations:null},"analyze"!==i.source.type?[3,2]:[4,this.dataService.callHcmOpenApi("analyze.model.fetch.script",{analyze:i.source.analyze})];case 1:return a=l.sent(),[3,3];case 2:"meta"===i.source.type&&(a=i.source.meta),l.label=3;case 3:return[4,this.hcDialog.getDialog(A.a).params({function_type:"standard",dataset_meta:{loader:this.baseCRUDService.getModelService("model"===i.source.type?i.source.model:a.model).getQueryFields,append_relations:"model"===i.source.type?null:a.relations},selected_fields:"aggr"!==e?i.data[o]:null,compute_type:{},need_check:"aggr"!==o,compute_field:null,filter_dict:{},meta_type:e,context_fields:null===(n=this.options.context)||void 0===n?void 0:d()(n).call(n,(function(e){return{name:e.label,category:"上下文参数",key:e.key,type:"var"}})),relations:"model"===i.source.type?null:a.relations,service:this.baseCRUDService.getModelService("model"===i.source.type?i.source.model:a.model),data:t}).show()];case 4:return[2,l.sent()]}}))}))},t.prototype.visComputeFieldAdd=function(e){return Object(k.c)(this,void 0,void 0,(function(){return Object(k.e)(this,(function(t){switch(t.label){case 0:return[4,this.computeFieldSetDialog(e,null)];case 1:return[2,t.sent()]}}))}))},t.prototype.visFormulaFieldAdd=function(e){return Object(k.c)(this,void 0,void 0,(function(){return Object(k.e)(this,(function(t){switch(t.label){case 0:return[4,this.formulaFieldSetDialog(e,null)];case 1:return[2,t.sent()]}}))}))},t.prototype.formulaFieldSetDialog=function(e,t){return Object(k.c)(this,void 0,void 0,(function(){var n,i,o;return Object(k.e)(this,(function(a){return n="aggr"===e?"aggr":"field",i=x()(this.form_model.data),(o=angular.copy(I)).getKey("expression").options.computeService={domain:"base.report",getFieldList:function(){return[{key:"selected_fields",name:"列表已选字段",fields:i.data[n]||[]}]}},[2,this.hcDialog.simpleForm("公式字段编辑器",o,t,{size:"large"})]}))}))},t.prototype.queryStrSelector=function(){var e,t,n,i,a,r,s,u,_,p,m,f,g,v,b,y,w,x;return Object(k.c)(this,void 0,void 0,(function(){var $,O,D;return Object(k.e)(this,(function(C){var M,S,E;switch(C.label){case 0:return"meta"!==(null===(t=null===(e=this.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)?[3,2]:($=[null===(i=null===(n=this.form_model.data.source)||void 0===n?void 0:n.meta)||void 0===i?void 0:i.model],$=c()($).call($,null===(r=null===(a=this.form_model.data.source)||void 0===a?void 0:a.meta)||void 0===r?void 0:d()(M=r.relations).call(M,(function(e){return e.model}))),[4,this.dataService.callHcmOpenApi("hcm.paas.object.field.info.fields",{model:Object(k.h)(new l.a(o()($).call($,(function(e){return e}))))})]);case 1:return O=C.sent(),D=c()(S=[{key:"master",name:"主模型",model:null===(u=null===(s=this.form_model.data.source)||void 0===s?void 0:s.meta)||void 0===u?void 0:u.model,info_fields:void 0}]).call(S,null===(p=null===(_=this.form_model.data.source)||void 0===_?void 0:_.meta)||void 0===p?void 0:d()(E=p.relations).call(E,(function(e){return{key:e.key,name:e.name,model:e.model}}))),h()(D).call(D,(function(e){var t;e.info_fields=angular.copy(d()(t=O[e.model]).call(t,(function(t){return t.key="master"===e.key?t.key:e.key+"."+t.key,t})))})),[2,D];case 2:return"model"===(null===(f=null===(m=this.form_model.data)||void 0===m?void 0:m.source)||void 0===f?void 0:f.type)?[2,this.dataService.callHcmOpenApi("hcm.model.query.fields",{state:null===(g=this.form_model.data.source)||void 0===g?void 0:g.state,model:null===(v=this.form_model.data.source)||void 0===v?void 0:v.model,biz_type:"list",append_relations:[]}).then((function(e){return d()(e).call(e,(function(e){return{info_fields:e.info_fields,name:e.name,key:e.key}}))}))]:"analyze"===(null===(y=null===(b=this.form_model.data)||void 0===b?void 0:b.source)||void 0===y?void 0:y.type)?[2,this.dataService.callHcmOpenApi("hcm.paas.object.field.analyze.info.fields",{analyze:null===(x=null===(w=this.form_model.data)||void 0===w?void 0:w.source)||void 0===x?void 0:x.analyze})]:[2,[]];case 3:return[2]}}))}))},t.prototype.visComputeFieldEdit=function(e,t){return Object(k.c)(this,void 0,void 0,(function(){return Object(k.e)(this,(function(n){switch(n.label){case 0:return[4,this.computeFieldSetDialog(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.visFormulaFieldEdit=function(e,t){return Object(k.c)(this,void 0,void 0,(function(){var n;return Object(k.e)(this,(function(i){switch(i.label){case 0:return[4,this.formulaFieldSetDialog(e,t)];case 1:return(n=i.sent()).field=[n.key],[2,n]}}))}))},t.prototype.getAlterOperator=function(){return Object(k.c)(this,void 0,y.a,(function(){var t,n;return Object(k.e)(this,(function(i){var o;switch(i.label){case 0:return[4,e.prototype.getAlterOperator.call(this)];case 1:return t=i.sent(),n=this,[2,t=c()(t).call(t,[{label:"转换为自定义",func:v()(o=this.convertToMeta).call(o,this),hide:function(){var e,t,i,o,a,l,r,c;return!n.form_model||!("analyze"===(null===(t=null===(e=n.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.type)&&(null===(o=null===(i=n.form_model.data)||void 0===i?void 0:i.source)||void 0===o?void 0:o.analyze)||"model"===(null===(l=null===(a=n.form_model.data)||void 0===a?void 0:a.source)||void 0===l?void 0:l.type)&&(null===(c=null===(r=n.form_model.data)||void 0===r?void 0:r.source)||void 0===c?void 0:c.model))},left:!0}])]}}))}))},t.prototype.convertToMeta=function(){return Object(k.c)(this,void 0,y.a,(function(){var e,t;return Object(k.e)(this,(function(n){switch(n.label){case 0:return"analyze"!==this.form_model.data.source.type?[3,2]:[4,this.dataService.callHcmOpenApi("hcm.model.action.params",{model:"AnalyzeModel",action:"get_info_by_name",params:{name:this.form_model.data.source.analyze}})];case 1:return t=n.sent(),e=t.script,[3,4];case 2:return[4,this.dataService.callHcmOpenApi("hcm.model.meta",{model:this.form_model.data.source.model,state:this.form_model.data.source.state,biz_type:"list"})];case 3:t=n.sent(),e={model:t.model,relations:t.relations,conditions:t.conditions,static_filters:t.static_filters},n.label=4;case 4:return this.form_model.data.source={type:"meta",meta:e},[2]}}))}))},t.prototype.manualMetaVis=function(){var e,t,n=this;this.hcDialog.getDialog(C.a).show({data:(null===(t=null===(e=this.form_model.data)||void 0===e?void 0:e.source)||void 0===t?void 0:t.meta)||{}}).then((function(e){n.form_model.data.source.meta=e}))},t.prototype.manualMetaMask=function(e){var t,n;return(null==e?void 0:e.model)?""+c()(t=[e.model]).call(t,d()(n=e.relations||[]).call(n,(function(e){return(e.name||e.key)+"-"+e.model}))).join(";"):"主模型为空，请点击进行定义..."},t.$inject=["$scope","$rootScope","$hcDialog","$hcForm","dataService","BaseCRUDService","$q","$filter","dataBlockService","metaVisService","contextService"],t}(M.a),F={title:"源数据设置",name:"flex-report-data-info",template:O.a,controller:L}},qfGi:function(e,t){e.exports='<div class="hc-select-person" ng-model="model">\n    <div ng-repeat="_item in options.list track by $index">\n        <div ng-if="type==\'emp\'" class="person-list-item" ng-class="{\'selected-yes\':color_yes || show_yes,\'selected-no\':color_no || show_no,\'disabled\':options.readOnly}">\n            <div class="item-icon" ng-click="viewEmpInfo($event,_item.id)">\n                <img ng-src="{{_item.photo|hcPhoto:\'46,46\'}}">\n            </div>\n            <div class="item-info">\n                <div class="item-name">{{_item.name}}</div>\n                <div class="item-help">{{_item.dept_name}}-{{_item.job_title}}</div>\n            </div>\n            <div class="item-btn" ng-class="{\'item-select-btn\':color_yes || show_yes || color_no || show_no}">\n                <div class="item-yes" ng-click="selectItem($index,\'yes\')" ng-mouseover="changeColor($index,\'yes\')" ng-mouseleave="clearColor()"\n                 ng-class="{\'btn-yes\':color_yes || show_yes}">\n                    同意\n                </div>\n                <div class="item-no" ng-click="selectItem($index,\'no\')" ng-mouseover="changeColor($index,\'no\')" ng-mouseleave="clearColor()"\n                 ng-class="{\'btn-no\':color_no || show_no}">\n                    不同意\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},"r/mB":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("sMBO"),n("07d7"),n("5s+n"),n("p532");var i=n("M5Mt"),o=n.n(i),a=n("ZbhI"),l=n.n(a),r=n("526F"),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("OBge"),_=n.n(u),p=n("eLKs"),m=n.n(p),f=n("BkRI"),h=n.n(f),g=n("mrSG"),v=function(){function e(e,t,n,i,o){this.scope=e,this.rootScope=t,this.hcDialog=n,this.hcList=i,this.$filter=o,this.options={}}return e.prototype.$onInit=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){switch(e.label){case 0:return[4,this.initDialog()];case 1:return e.sent(),[4,this.initOptions()];case 2:return e.sent(),[4,this.initList()];case 3:return e.sent(),[2]}}))}))},e.prototype.initOptions=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){return this.options=this.scope.params.options||{},[2]}))}))},e.prototype.getData=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){return[2,angular.copy(this.scope.params.data)]}))}))},e.prototype.getMeta=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){return[2,this.scope.params.meta]}))}))},e.prototype.getOperateDefault=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){var t;return[2,m()(t=this.editItem).call(t,this)]}))}))},e.prototype.getRowOperator=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){return[2,[]]}))}))},e.prototype.initList=function(){return Object(g.c)(this,void 0,void 0,(function(){var e,t,n,i,o,a,l;return Object(g.e)(this,(function(r){switch(r.label){case 0:return e=this,n=(t=this.hcList.createList()).$setColumns,[4,this.getMeta()];case 1:return e.list_model=n.apply(t,[r.sent()]).$setRowSelector(0),[4,this.getRowOperator()];case 2:return(i=r.sent())&&this.list_model.$setOperateRow(i,200),[4,this.getOperateDefault()];case 3:return(o=r.sent())&&this.list_model.$setOperateDefault(o),l=(a=this.list_model).$setData,[4,this.getData()];case 4:return l.apply(a,[r.sent()]),[2]}}))}))},e.prototype.getAlterOperator=function(){return Object(g.c)(this,void 0,_.a,(function(){return Object(g.e)(this,(function(e){return[2,[]]}))}))},e.prototype.initDialog=function(){return Object(g.c)(this,void 0,void 0,(function(){var e;return Object(g.e)(this,(function(t){var n;switch(t.label){case 0:return[4,this.getAlterOperator()];case 1:return e=t.sent(),this.scope.$dialog.operates(d()(e).call(e,[{label:"确认",func:m()(n=this.submit).call(n,this),default:!0}])),[2]}}))}))},e.prototype.getInfoDialog=function(){return null},e.prototype.getInfoOptions=function(){return{}},e.prototype.editItem=function(e){var t=this,n=this.getInfoDialog();n&&this.hcDialog.getDialog(n).show({data:e,options:this.getInfoOptions()}).then((function(n){e?e=c()(e,n):(t.list_model.data=t.list_model.data||[],t.list_model.data.push(n)),t.list_model.$refreshData()}))},e.prototype.removeItem=function(e){var t=this;this.hcDialog.confirm("确认要删除"+(e.name||e.label)+"吗？").then((function(){var n,i,a=l()(n=t.list_model.data).call(n,e);a>-1&&(o()(i=t.list_model.data).call(i,a,1),t.list_model.$refreshData())}))},e.prototype.cloneItem=function(e){var t=this;this.hcDialog.confirm("复制操作常用于同比分析, 确认要复制数据源"+(e.name||e.label)+"吗？").then((function(){var n,i=l()(n=t.list_model.data).call(n,e);if(i>-1){var o=h()(t.list_model.data[i]);o.key="copy_"+o.key,t.list_model.data.push(o),t.list_model.$refreshData()}}))},e.prototype.parseData=function(){return Object(g.c)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(e){return[2,angular.copy(this.list_model.data)]}))}))},e.prototype.submit=function(){return Object(g.c)(this,void 0,void 0,(function(){var e=this;return Object(g.e)(this,(function(t){return this.parseData().then((function(t){e.options.submit?(e.rootScope.show_waiting(),e.options.submit(t).then((function(t){e.scope.$dialog.resolve_data(t),e.scope.$dialog.dialog_close()})).finally((function(){e.rootScope.hide_waiting()}))):(e.scope.$dialog.resolve_data(t),e.scope.$dialog.dialog_close())}),(function(t){e.rootScope.show_warning(t)})),[2]}))}))},e.$inject=["$scope","$rootScope","$hcDialog","$hcListNew","$filter"],e}()},r2xJ:function(e,t,n){"use strict";var i=n("WxoT"),o=n.n(i),a=n("mrSG"),l=n("CGID"),r=n.n(l);window.app.controller("fixCodeDialogCtrl",["$controller","$rootScope","$scope","$hcForm",function(e,t,n,i){var l=this,r=[{key:"validate",label:"错误信息",component:"hc-text-area",options:{width:"col-12",readOnly:!0,singleLine:!1}},{key:"edit",label:"在此处修改",component:"hc-code",options:{mode:"python",width:"col-12",readOnly:!1,singleLine:!1}}];n.init=function(){n.base_form=i.createForm().$setMeta(r),n.base_form.data.validate=o()(n.params.validate,null,4),n.base_form.data.edit=n.params.fixedCode,n.$dialog.title(n.params.title||"代码校验").operates([{label:"返回",func:n.close,key:"back",left:!0},{label:"重新校验",func:n.valid,key:"valid",left:!0},{label:"覆盖原有代码",func:n.submit,key:"submit",default:!0,is_important:!0,left:!1}])},n.close=function(){n.$dialog.check_close()},n.getCode=function(){return n.base_form.field_metas.edit.options.getValue()},n.valid=function(){return Object(a.c)(l,void 0,void 0,(function(){var e,t,i,o;return Object(a.e)(this,(function(a){switch(a.label){case 0:return e=n.getCode(),t=n.base_form.data,o=(i=JSON).stringify,[4,n.params.checkValidCallback(e)];case 1:return t.validate=o.apply(i,[a.sent(),null,4]),[2]}}))}))},n.submit=function(){var e=n.getCode();n.$dialog.resolve_data(e),n.$dialog.dialog_close()}}]),t.a={controller:"fixCodeDialogCtrl",template:r.a,size:"super-max"}},rLiH:function(e,t){e.exports='<div class="widget-emp-mini" ng-init="init()">\n    <div class="photo-box">\n        <img ng-src="{{ emp.photo|hcPhoto:64}}">\n    </div>\n    <div class="name-box" ng-click="goToEmp(emp.id,$event)">{{ emp.name }}</div>\n</div>\n\n'},rLmf:function(e,t){e.exports='<div class="hcm-nav-content hcm-meta-vis-tree-list" ng-init="$ctrl.$onInit()">\n    <div class="hcm-nav full-height">\n        <div class="hcm-nav-fixed">\n            <div class="search-area">\n                <input type="search"\n                       data-ng-model="$ctrl.tree_model.keyword"\n                       placeholder="输入关键字搜索"\n                       data-ng-keypress="$ctrl.search_key_press($event)">\n                <span data-ng-click="$ctrl.search_click()" class="search-icon icon-hcm-check"></span>\n            </div>\n            <div class="tree-container">\n                <hc-simple-tree model="$ctrl.tree_model"></hc-simple-tree>\n            </div>\n        </div>\n    </div>\n    <div class="hcm-content flex">\n        <div class="hcm-hc-list-container">\n            <hc-list-new model="$ctrl.list_model"></hc-list-new>\n            <hc-list-no-data model="$ctrl.list_model" caption="没有设置任何元素"></hc-list-no-data>\n        </div>\n    </div>\n</div>\n'},rPaf:function(e,t,n){"use strict";n("sMBO"),n("wmx0");n("OfWP");var i=n("KHwQ"),o=n("HuMO");n("+UHN"),n("wd/R").locale("zh-cn"),n("Qt3s"),n("UY7m"),n("nGnk");var a=i.module("hcm.common",[o,"ui.bootstrap.datetimepicker","angularFileUpload","angularMoment","ngSanitize"]).constant("moment",n("wd/R"));n("X+LG"),t.a=a.name},rWvg:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JfAA"),n("EnZy"),n("rZ3M");var i=n("M5Mt"),o=n.n(i),a=n("MAKL"),l=n.n(a),r=n("nhkr"),c=n.n(r),s=n("lHQ6"),d=n.n(s),u=n("o+MX"),_=n.n(u),p=n("UtpJ"),m=n.n(p),f=n("04Ix"),h=n.n(f),g=n("ZbhI"),v=n.n(g),b=n("pPxq"),y=n.n(b),w=n("WxoT"),x=n.n(w),k=n("RXMP"),O=n.n(k),D=n("guyh"),C=n.n(D),M=n("CoJ3"),S=n("xAfy");M.a.factory("dataService",["$rootScope","$http","$q","$timeout","$location","$state","$cacheFactory","contextService","$filter","$hcDialog","$base64","cryptoService",function(e,t,n,i,o,a,l,r,s,u,p,f){function g(e){return window.md5(x()(function e(t){var n,i=[];for(n in t)t.hasOwnProperty(n)&&i.push(n);C()(i).call(i);var o={};return O()(angular).call(angular,i,(function(n){"[object object]"==Object.prototype.toString.call(t[n]).toLowerCase()?o[n]=e(t[n]):o[n]=t[n]})),o}(e)))}function b(e){var t=g(e);return window.storage.getItem("session",t)}function w(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.getContext("auth");return n.cache_company_id=i?null==i||null===(e=i.company)||void 0===e?void 0:e.id:null,n.cache_user_id=i?null==i||null===(t=i.user)||void 0===t?void 0:t.id:null,g(n)}function k(e,t){var n,i,o=t.split(","),a=w(e);return"application"===o[0]?angular.copy(null===(n=window)||void 0===n||null===(i=n.dataServiceCache)||void 0===i?void 0:i[a]):/^(session|local)$/.test(o[0])?window.storage.getItem(o[0],a,o[1]):null}function D(e,t,n){var i=n.split(","),o=w(e);return"application"===i[0]?(window.dataServiceCache=window.dataServiceCache||{},window.dataServiceCache[o]=angular.copy(t)):/^(session|local)$/.test(i[0])&&window.storage.setItem(i[0],o,t),t}function M(e,t,n){var i=null;if("hcm.paas.object.get"==t)i=null==n?void 0:n.id_;else if(y()(t).call(t,"hcm.paas.object")){var o,a;if(null==n||null===(o=n.filter_dict)||void 0===o?void 0:o.model)i=null===(a=n.filter_dict)||void 0===a?void 0:a.model;else(null==n?void 0:n.model)&&(i=n.model)}else(null==n?void 0:n.model)&&(i=n.model);return i&&(e=e+(v()(e).call(e,"?")>0?"&":"?")+"model="+i),e}function E(e){var t,n,i,o,a;return(null===(t=r.getContext("auth"))||void 0===t?void 0:t.operation_mode)?e:window[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN()||window[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN(4)?(n={},h()(n,f.HCM_ENCRYPT_KEY(),window[f.HCM_ENCRYPT_KEY()]),h()(n,f.HCM_ENCRYPT_VALUE_KEY(),Object(S.m)(3)+p.encode(unescape(encodeURIComponent(x()(e))))),n):window[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN().toUpperCase()||window[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN("")||window[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN(4)?(i={},h()(i,f.HCM_ENCRYPT_KEY(),window[f.HCM_ENCRYPT_KEY()]),h()(i,f.HCM_ENCRYPT_VALUE_KEY(),f.HA(p.encode(unescape(encodeURIComponent(x()(e)))))),i):window[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN(5)?(o={},h()(o,f.HCM_ENCRYPT_KEY(),window[f.HCM_ENCRYPT_KEY()]),h()(o,f.HCM_ENCRYPT_VALUE_KEY(),Object(S.m)(3)+p.encode(unescape(encodeURIComponent(x()(e)))).replaceAll("a","!").replaceAll("5","a")),o):window[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN(5)?(a={},h()(a,f.HCM_ENCRYPT_KEY(),window[f.HCM_ENCRYPT_KEY()]),h()(a,f.HCM_ENCRYPT_VALUE_KEY(),Object(S.m)(3)+f.HA(p.encode(unescape(encodeURIComponent(x()(e)))),f.HA_KEY()).replaceAll("a","!").replaceAll("5","a")),a):e}function P(e){var t,n,i;return e[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN()||e[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN(4)?JSON.parse(decodeURIComponent(escape(p.decode(m()(t=e[f.HCM_ENCRYPT_VALUE_KEY()]).call(t,3))))):e[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN().toUpperCase()||e[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN("")||e[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN(4)?JSON.parse(decodeURIComponent(escape(f.HA_Decrypt(p.decode(e[f.HCM_ENCRYPT_VALUE_KEY()]))))):e[f.HCM_ENCRYPT_KEY()]===f.HB_MIXIN(5)?JSON.parse(decodeURIComponent(escape(p.decode(m()(n=e[f.HCM_ENCRYPT_VALUE_KEY()]).call(n,3).replaceAll("a","5").replaceAll("!","a"))))):e[f.HCM_ENCRYPT_KEY()]===f.HA_MIXIN(5)?JSON.parse(decodeURIComponent(escape(f.HA_Decrypt(p.decode(m()(i=e[f.HCM_ENCRYPT_VALUE_KEY()]).call(i,3).replaceAll("a","5").replaceAll("!","a")),f.HA_KEY())))):e}function j(){var e,t="00000000".concat(Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8),n="00000000".concat(Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8);return _()(e="".concat(t)).call(e,n)}function T(e){var t;return _()(t="".concat(e,":")).call(t,e,":0:1")}return{callHcmOpenWebSocket:function(e,t,i){var o=n.defer(),a=o.promise;a.is_loading=!0;var l=window.wss_host||"";""===l&&(l=("http:"===window.location.protocol?"ws://":"wss://")+window.location.host+window.hcm_wengen);var c=r.getContext("auth"),s=i?"&category="+i:"",d=new WebSocket(l+"/ws/"+e+"?token="+(c.token||"")+s+window.hcm_env_post);return d.onopen=function(){d.send(x()(t))},d.onmessage=function(e){var t=JSON.parse(e.data);"notify"===t.status&&("pong"===t.data?console.log("ws keep in connect"):o.notify(t.data)),"success"===t.status&&(a.is_loading=!1,o.resolve(t.data||"success")),"error"===t.status&&(a.is_loading=!1,o.reject(t.data))},d.onerror=function(e){a.is_loading=!1,o.reject(e)},a.cancel=function(){o.reject({status:"abort"}),a.is_loading=!1},a},callHcmOpenApi:function(o,l,_,p){var m,g,b=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],y=n.defer(),w=location.protocol+"//"+location.host+window.hcm_wengen+"/api/"+o+(v()(o).call(o,"?")>0?window.hcm_env_post:window.hcm_env_pre),O=void 0===l.except?[]:l.except;delete l.except;var C=r.getContext("auth"),A=S.i.get(C);if(C&&C.user&&A&&(new Date).getTime()-A>=1e3*d()(window.context_expire_seconds||86400)){if(!window.disabled_logout)return this.callHcmCloudApi("/auth/logout",{},"POST").then((function(e){r.setContext("auth",e)})),u.confirm("由于您长时间未操作, 出于安全考虑, 系统可能已经取消了您的登录, 是否刷新界面重新登录？",[{caption:"确认",func:function(){S.i.remove(C),window.location.reload()&&console.log("user logout!"),y.reject()}}]),y.promise;window.wx_debug&&alert((new Date).getTime()+":"+A+":"+window.context_expire_seconds)}var I,L=$.extend({api_name:o},l);if(_){var F=k(L,_);if(s("isValidValue")(F)){if(!p)return G(F),y.promise;i((function(){y.notify(F)}),0)}}if((null==C||null===(m=C.tracing)||void 0===m?void 0:m.trace_all)&&(null==C||null===(g=C.tracing)||void 0===g?void 0:g.trace_id_header)){var R,B,U,q,W,z,N,K,H=j(),V=h()({},C.tracing.trace_id_header,"b3"===(null===(R=C.tracing)||void 0===R?void 0:R.propagation)?H:T(H));if("b3"===(null===(B=C.tracing)||void 0===B?void 0:B.propagation))(null===(U=C.tracing)||void 0===U?void 0:U.sampled_header)&&(null===(q=C.tracing)||void 0===q?void 0:q.sampled_value)&&(V[null===(W=C.tracing)||void 0===W?void 0:W.sampled_header]=null===(z=C.tracing)||void 0===z?void 0:z.sampled_value),(null===(N=C.tracing)||void 0===N?void 0:N.span_id_header)&&(V[null===(K=C.tracing)||void 0===K?void 0:K.span_id_header]=H);I={headers:V}}w=M(w,o,l);var Y=y.promise;function G(e){y.resolve(e)}function J(t,n,i,l){if(v()(O).call(O,"all")<0){var r=t?t.errcode:null;if(r){if(!(O&&v()(O).call(O,r)>-1))switch(r){case 51001:case 51002:case 51003:case 51005:e.show_warning(t.errmsg,"warning");break;case 51006:case 10001:"pc"===window.client||isApp?(e.show_warning("由于您长时间未操作,出于安全考虑,系统已经取消了您的登录,请重新进入!","warning"),a.go(isApp?"app_input_pwd":"auto_login",{},{location:"replace"})):"hcmcloud"===window.app_type?e.show_warning("由于您长时间未操作,出于安全考虑,系统已经取消了您的登录,请重新进入!","warning",0):e.show_warning("由于您长时间未操作,出于安全考虑,系统已经取消了您的登录,请重新进入!","warning");break;default:e.report_fatal({code:r,content:t?t.errmsg:null,description:t?t.description:null})}}else e.report_fatal({code:n,content:"系统服务暂时不可用:"+o})}y.reject(t)}return Y.is_loading=!0,l=E(l),b&&e.show_waiting(!0),t.post(w,l,I).then((function(e){var t,n;e&&e.data||uploadError("00045",x()({error:e,url:w,param:l,cause:"success"})),"object"===c()(e.data)&&(null===(t=e.data)||void 0===t?void 0:t[f.HCM_ENCRYPT_KEY()])&&(e.data=P(e.data)),S.i.save(C,null===(n=e.data)||void 0===n?void 0:n.srv_end),e=e.data.result,_&&(e=D(L,e,_)),G(e)}),(function(e){var t;"abort"!==(null===(t=e)||void 0===t?void 0:t.status)?(e&&e.data||uploadError("00045",x()({error:e,url:w,param:l,cause:"error"})),J(e=e.data)):y.reject(e)})).finally((function(){Y.is_loading=!1,b&&e.hide_waiting(!0)})),Y.cancel=function(){y.reject({status:"abort"}),Y.is_loading=!1,b&&e.hide_waiting(!0)},Y},callHcmCloudApi:function(i,o,a){var l=i;i=location.protocol+"//"+location.host+window.hcm_wengen+"/api"+i+(v()(i).call(i,"?")>0?window.hcm_env_post:window.hcm_env_pre);var r=o.except;delete o.except;var c=o.cache;delete o.cache;var s={url:i,params:o,type:a},d=n.defer();function u(e){var t,n;null===c?d.resolve(e):c&&(t=e,n=b(s),x()(n)===x()(t))?d.resolve({cache_ok:!0}):(d.resolve(e),function(e,t){var n=g(e);window.storage.setItem("session",n,t)}(s,e))}function _(t,n,a,l,c,s){var u=t?t.errcode:null;if(u)uploadError("00044",x()({error:t,url:i,param:o,cause:t,statusText:c,config:l,xhrStatus:s})),r&&v()(r).call(r,u)>-1||e.report_fatal({code:"",content:i,data:t});else{var _=(new Date).getTime().toString();e.report_fatal({code:_,content:i,data:t}),uploadError("00044",x()({error:t,url:i,param:o,cause:t,statusText:c,config:l,xhrStatus:s}))}d.reject(t)}c?null===b(s)?d.resolve({}):d.resolve(b(s)):"POST"===a?(i=M(i,l,o),t.post(i,o).then((function(e){e&&e.data||uploadError("00045",x()({error:e,url:i,param:o,cause:"succ"})),u(e=e.data)}),(function(e,t,n,a,l,r){e&&e.data||uploadError("00045",x()({error:e,url:i,param:o,cause:"error",statusText:l,xhrStatus:r})),_(e=e.data)}))):t.get(i).then((function(e){u(e=e.data)}),(function(e){_(e=e.data)}));return d.promise},callHcmCacheOpenApi:function(e,t,i,o){var a,l,r=n.defer(),c=this,s=r.promise.then;return r.promise.then=function(e,t,n){return a=this,l=e,s.apply(this,arguments)},t.cache=!0,this.callHcmOpenApi(e,t,i,o).then((function(n){n.cache?(t.cache=!1,c.callHcmOpenApi(e,t,i,o).then((function(e){r.resolve(e)})),l.call(a,n)):r.resolve(n)}),(function(){!1!==t.cache&&(t.cache=!1,c.callHcmOpenApi(e,t,i,o).then((function(e){r.resolve(e)})))})),r.promise}}}]),M.a.factory("multiPageService",[function(){return function(e,t,n,i){return t.page_size=t.page_size||10,{next_index:null,list:[],is_refreshing:!1,start:function(){var o=this;o.is_refreshing||(o.is_refreshing=!0,e(t).then((function(e){o.next_index=e.list.length<t.page_size?null:e.last?e.last:2,o.list=e.list,o.is_refreshing=!1,n(o.list)}),(function(e){i(e)})))},next:function(){var o=this;o.next_index&&(o.is_refreshing||(o.is_refreshing=!0,t.page_index=o.next_index,t._from=o.next_index,e(t).then((function(e){var i;o.next_index=e.list.length<t.page_size?null:e.last?e.last:t.page_index+1,o.list=_()(i=o.list).call(i,e.list),o.is_refreshing=!1,n(o.list)}),(function(e){(i||function(){})(e)}))))}}}}]),M.a.factory("listCacheService",["$q","contextService","dataService",function(e,t,n){return function(i,o,a,r){var c=t.getContext("auth"),s=window.md5(x()({user:c.employee.id,public_account:null==c.public_account?null:c.public_account.id,key:i})),d=function(e){s&&window.storage.setItem("session",s,e)},u=function(){return window.storage.getItem("session",s)},_=function(e,t){var n={};O()(e).call(e,(function(e){n["i_"+e.id]=e})),O()(t).call(t,(function(e){n["i_"+e.id]=e}));var i=[];for(var o in n)i.push(n[o]);return i};return{key:s,has_next:!0,save:function(e){var t=u();t.list=e,d(t)},load:function(){var t=this,i=e.defer(),o=u();if(null==o){var c=l()();n.callHcmOpenApi(a,$.extend(r,{first_ts:c}),null,!0).then((function(e){o={list:e.data.list,last_ts:c,first_ts:e.data.first_ts},d(o),t.has_next=null!=o.first_ts,i.resolve(o)}))}else t.has_next=null!=o.first_ts,i.resolve(o);return i.promise},fetch:function(){var t=e.defer(),i=u();return n.callHcmOpenApi(o,$.extend(r,{last_ts:i.last_ts}),null,!0).then((function(e){i.last_ts=e.data.last_ts,i.list=_(i.list,e.data.list),d(i),t.resolve(i)})),t.promise},next:a&&function(){var t=this,i=e.defer(),o=u();return n.callHcmOpenApi(a,$.extend(r,{first_ts:o.first_ts}),null,!0).then((function(e){o.first_ts=e.data.first_ts,o.list=_(o.list,e.data.list),t.has_next=null!=o.first_ts,d(o),i.resolve(o)})),i.promise},get_item:function(e){var t=u(),n=$.grep(t.list,(function(t,n){return t.id==e}));return n.length>0?n[0]:null},set_item:function(e){var t=u();$.grep(t.list,(function(n,i){n.id==e.id&&(t.list[i]=e,d(t))}))}}}}]),M.a.factory("listCacheService2",["$q","contextService","dataService",function(e,t,n){return function(i,a,l){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=t.getContext("auth"),s=i?window.md5(x()({user:c&&c.employee&&c.employee.id?c.employee.id:"",key:i})):null,d=function(e){s&&window.storage.setItem("session",s,e)},u=function(){return window.storage.getItem("session",s)};return{list:[],origin:null,next_ts:null,is_refreshing:!1,_start:null,_end:null,save:function(){d({list:this.list,next_ts:this.next_ts})},update:function(e,t){var n,i=this;O()(n=i.list).call(n,(function(n,o){n.id==e&&(i.list[o]=t,i.save())}))},remove:function(e,t){var n,i=this;O()(n=i.list).call(n,(function(n,a){var l;n[e]==t&&(o()(l=i.list).call(l,a,1),i.save())}))},load:function(t,n){this._start=t,this._end=n,this._start&&this._start();var i=e.defer(),o=u();return o?(this.list=o.list,this.next_ts=o.next_ts,this._end&&this._end(),i.resolve(this.list)):(this.list=[],this._end&&this._end(),i.resolve(this.list)),i.promise},next:function(t,i){t=t||!1;var o=this;if(o.next_ts||t){var c=e.defer();if(o.is_refreshing=!0,o._start&&o._start(t),r)var s=$.extend(l,{_from:t?"":o.next_ts});else s=l;return n.callHcmOpenApi(a,s,null,!0).then((function(e){var n,a;o.origin=e,o.next_ts=e.next,o.list=t?e.list:i?_()(n=e.list).call(n,o.list):_()(a=o.list).call(a,e.list),o.save(),o._end&&o._end(t),o.is_refreshing=!1,c.resolve(o.list)})),c.promise}}}}}])},rYan:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("rB9j"),n("UxlC");var i=n("HnXd"),o=n.n(i),a=n("qjzJ"),l=n.n(a),r=n("RXMP"),c=n.n(r),s=n("fHi0"),d=n.n(s),u=n("OWCx"),_=n.n(u),p=n("+oHS"),m=n.n(p),f=n("UtpJ"),h=n.n(f),g=n("WxoT"),v=n.n(g),b=n("LYCE"),y=n.n(b),w=n("a0dU"),x=n.n(w),k=n("5PDf"),$=n.n(k),O=n("04Ix"),D=n.n(O),C=(n("ls82"),n("SPx3")),M=n.n(C),S=n("+hqv");function E(e,t){var n=m()(e);if(_.a){var i=_()(e);t&&(i=$()(i).call(i,(function(t){return d()(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)c()(n=E(Object(i),!0)).call(n,(function(t){D()(e,t,i[t])}));else if(l.a)o()(e,l()(i));else{var a;c()(a=E(Object(i))).call(a,(function(t){y()(e,t,d()(i,t))}))}}return e}window.app.controller("BaseTreeListController",["$controller","templateService","$rootScope","$scope","$hcDialog","CRUDService","InfoDialog","$hcListBtn","$hcPaging","$state","$hcSimpleTree","$q","dataService","$filter","listGlobalConfigService",function(e,t,n,i,o,a,l,r,c,s,d,u,_,p,m){e(S.a,{$scope:i,CRUDService:a,InfoDialog:l}),i.tree_loader=null,i.is_include_child=!0,i.tree_flag=!0,i.params=i.params||{},i.getTreeId=function(){return i.params.tree_id||s.params.tree_id},i.getRequireFunc=function(){var e=[i.initList()];return i.base_model&&!i.changePageRefreshTree&&e.push(i.getTreeDefine()),e},i.getTreeDefine=function(){var e=u.defer();return i.current_model&&i.base_model!==i.current_model?_.callHcmOpenApi("hcm.model.meta",{biz_type:"list",model:i.base_model,state:i.getMetaState()}).then((function(t){i.TreeDefine=t.tree,e.resolve()})):e.resolve(),e.promise},i.getTreeAndFetchData=M()(x.a.mark((function e(){var t,n,o,a,l,r,c,s,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.model_meta||i.tree_loader){e.next=4;break}return i.fetchData(),i.initAfter(),e.abrupt("return");case 4:if(e.t0=i.tree_loader&&!i.changePageRefreshTree,e.t0){e.next=8;break}return e.next=8,i.getTreeLoader(i.funcParse(i.TreeDefine||i.model_meta.tree));case 8:if(!(i.refresh_tree||i.tree_loader&&!i.tree_model||i.changePageRefreshTree)){e.next=22;break}if((r=i.metaParse(null===(t=i.model_meta)||void 0===t?void 0:t.tree)||{}).getNodeIconCustom){e.next=15;break}return e.next=13,m.getListGlobalConfig();case 13:s=e.sent,r.getNodeIconCustom=i.metaParse(null==s||null===(c=s.tree)||void 0===c?void 0:c.getNodeIconCustom);case 15:r.params||(r.params={}),u=P({filter_dict:r.params.filter_dict,extra_property:r.params.extra_property,tree_type:r.tree_type||"org"},r),i.tree_model=d.createTree(i.tree_loader,angular.extend(i.tree_options||{},u)),i.tree_model.$setTreeParamsCallback&&i.tree_model.$setTreeParamsCallback((function(e){e.effect_date&&(i.effect_date=e.effect_date),e.filter_mode&&(i.tree_filter_mode=e.filter_mode),i.fetchData()})),i.tree_model.$initTree(i.getTreeId(),r.is_calculate||null,angular.extend((null===(n=i.advance_plan_list)||void 0===n||null===(o=$()(n).call(n,(function(e){return e.default})))||void 0===o||null===(a=o[0])||void 0===a||null===(l=a.config)||void 0===l?void 0:l.tree_config)||{},{effect_date:i.getEffectDate(),filter_mode:i.getTreeFilterMode()})).then((function(){var e,t;i.mobile_tree_id=angular.copy(null===(e=i.tree_model)||void 0===e||null===(t=e.selectedNode)||void 0===t?void 0:t.id),i.effect_date=i.tree_model.effect_date,i.tree_filter_mode=i.tree_model.filter_mode,"mobile"===i.client&&(i.mobile_tree_config=i.getMobileTreeConfig()),i.getPlanAndFetchData()})),e.next=23;break;case 22:i.getPlanAndFetchData();case 23:case"end":return e.stop()}}),e)}))),i.getEffectDate=function(){return s.params.effect_date},i.getTreeFilterMode=function(){return s.params.tree_filter_mode},i.getAllFilterDict=function(){var e,t,n,o=i.advance_query_enabled&&(null===(e=i.advance_query)||void 0===e?void 0:e.$getFilterDict)?P({},i.advance_query.$getFilterDict()):P({},null===(t=i.list_filter_model)||void 0===t?void 0:t.$getFilters());return P(P({},i.transFilterDict(angular.copy(P(P(P({},i.getTreeFilterDict()),i.getFilterDict()),o)))),null===(n=i.getExtraFilterDict)||void 0===n?void 0:n.call(i,i.getEnvironmentParams(),o))},i.getTreeFilterDict=function(){var e={};return function(){var t,n,o,a,l,r;if(null===(t=i.model_meta)||void 0===t||null===(n=t.tree)||void 0===n?void 0:n.tree_key){var c,s,d,u,_,p,m,f,h,g,v;(null===(c=i.tree_model)||void 0===c?void 0:c.filter_mode)&&(i.is_include_child=!1);var b=-1===i.tree_model.selectedNode.id?void 0:i.tree_model.selectedNode.id,w={};y()(w,null===(s=i.tree_model)||void 0===s||null===(d=s.getFilterMode())||void 0===d?void 0:d.value,{value:b,enumerable:!0,configurable:!0,writable:!0}),"child_include"===(null===(u=i.tree_model)||void 0===u||null===(_=u.getFilterMode())||void 0===_?void 0:_.value)&&(w.ignore_root_filter=null===(p=i.tree_model)||void 0===p||null===(m=p.options)||void 0===m?void 0:m.ignore_root_filter),40===i.tree_model.selectedNode.org_type?e[i.getTreeKey()]=b:e[i.getTreeKey()]=i.is_include_child?{child_include:b,ignore_root_filter:null===(f=i.tree_model)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.ignore_root_filter}:(null===(g=i.tree_model)||void 0===g?void 0:g.filter_mode)&&"self"!==(null===(v=i.tree_model)||void 0===v?void 0:v.filter_mode)?w:b,null!==i.tree_model.effect_date&&(e.date_=i.tree_model.effect_date)}(null===(o=i.model_meta)||void 0===o||null===(a=o.tree)||void 0===a?void 0:a.revoke_key)&&(null!==i.tree_model.is_show_revoke&&(e[null===(l=i.model_meta)||void 0===l||null===(r=l.tree)||void 0===r?void 0:r.revoke_key]=i.tree_model.is_show_revoke))}(),e},i.getMobileTreeConfig=function(){var e,t=i.metaParse((null===(e=i.model_meta)||void 0===e?void 0:e.tree)||{}),n={mode:"self",filter_dict:{},extra_property:{},child_include:!0};if(t.params&&n&&angular.extend(n,t,t.params),n.addRootAll&&(n.rootAllSelected=!0),t.mobile_tree_options&&n&&angular.extend(n,t.mobile_tree_options),i.params&&"{}"!==v()(i.params)){switch(i.params.orgType||i.params.org_type){case"org":n.filter_dict.org_type=[10,20];break;case"position":n.filter_dict.org_type=[10,20,40]}i.params.tree_filter_dict&&angular.extend(n.filter_dict,p("valueToFunc")(i.params.tree_filter_dict)()),i.params.role&&(n.extra_property.role=i.params.role),i.params.extra_property&&angular.extend(n.extra_property,i.params.extra_property)}return n.no_delete=!0,n.selectorParse=function(e){return i.mobile_tree_id=angular.copy(e.id),e.id},n.selectorModel=t.model,{key:i.getTreeKey(),label:t.description||"组织范围",component:"hc-standard-tree-selector",options:n}},i.$watch("tree_model.selectedNode",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(t&&"{}"!==v()(t)&&e.id!==t.id||e.is_virtual_root_node)&&"{}"!==v()(e)&&(i.paging._current_page=1,i.fetchData({fields:i.merged_fields},!1,!0))})),i.getSortMeta=function(){return i.model_meta.tree.ignore_root_sort&&0===i.tree_model.selectedNode.layer?[]:i.sort_meta},i.checkFetch=function(){return!!(i.tree_model||{}).selectedNode},i.showUndoOrgSwitch=function(){i.show_org_deleted=!i.show_org_deleted,i.tree_model.$initTree(i.getTreeId())},i.getTreeKey=function(){var e,t,n,o;if(null===(e=i.model_meta)||void 0===e||null===(t=e.tree)||void 0===t?void 0:t.model)n="Department"===i.model_meta.tree.model?i.model_meta.tree.tree_key?40===i.tree_model.selectedNode.org_type?i.model_meta.tree.tree_key.position:i.model_meta.tree.tree_key.org:40===i.tree_model.selectedNode.org_type?"position.origin_id":"department.origin_id":i.model_meta.tree.tree_key?i.model_meta.tree.tree_key.tree_node_key:h()(o=i.model_meta.tree.model.replace(/([A-Z])/g,"_$1").toLowerCase()).call(o,1)+"_id";else if(i.params.tree_model){var a;n=h()(a=i.params.tree_model.replace(/([A-Z])/g,"_$1").toLowerCase()).call(a,1)+"_id"}else i.params.org_type&&(n="department.origin_id");return n},i.refreshListAsync=function(){var e=M()(x.a.mark((function e(t){var n,o,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&i.tree_model.$initTree(i.getTreeId(),(i.model_meta||{}).tree.is_calculate||null,angular.extend((null===(n=i.advance_query)||void 0===n||null===(o=n.current_plan)||void 0===o||null===(a=o.config)||void 0===a?void 0:a.tree_config)||{},{effect_date:i.getEffectDate(),filter_mode:i.getTreeFilterMode()})).then((function(){var e,t;i.mobile_tree_id=angular.copy(null===(e=i.tree_model)||void 0===e||null===(t=e.selectedNode)||void 0===t?void 0:t.id)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),t.a="BaseTreeListController"},rgqz:function(e,t){e.exports='<div class="wf-card-page">\n    <ng-include\n            src="\'/api/template/load_template?key=\' + template + window.hcm_env_post"></ng-include>\n</div>\n'},rica:function(e,t){e.exports='<div class="emp-filter emp-display-filter" ng-init="init()">\n    <div class="solution-block">\n        <div class="modify hc-flex">\n            <div class="solution-menu">\n                我的方案\n                <div class="select-box">\n                    <select ng-change=\'changeProject()\' class=\'hc-select component-input-inner\' ng-model=\'solution.id\'\n                            ng-options=\'m.id as m.name for m in solution_meta_list\'>\n                        <option value=\'\'>--请选择--</option>\n                    </select>\n                </div>\n            </div>\n            <div class="btn-box hc-flex-item-fill">\n                <div class="btn" ng-click="newSetting()" ng-if="solution.name===\'初始方案\'">\n                    新建方案\n                </div>\n                <div class="btn" ng-class="{\'gray\':solution.default}" ng-click="setDefault()"\n                     ng-if="solution.id&&solution.name!=\'初始方案\'">\n                    设为默认\n                </div>\n                <div class="btn" ng-click="saveSetting()" ng-if="solution.id&&solution.name!=\'初始方案\'">\n                    保存方案\n                </div>\n                <div class="btn" ng-click="addSetting()" ng-if="solution.id">\n                    方案另存为\n                </div>\n                <div class="btn" ng-click="delSetting()" ng-if="solution.id&&solution.name!=\'初始方案\'">删除</div>\n            </div>\n            <div class="btn-box">\n                <div class="btn" ng-click="changeProject()">清空设置</div>\n            </div>\n        </div>\n    </div>\n    <div class="tree-panel">\n        <div class="header">查询字段</div>\n        <div class="content-block">\n            <div class="category"\n                 ng-repeat="category in solution.config track by $index">\n                <div class="node-category" ng-click="chooseCategory($event,category)">\n                    <div class="expand-icon"\n                         ng-class="category.expand ? \'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"></div>\n                    <div class="name" ng-class="{choose:category.expand}">\n                        <span class="node-icon"\n                              ng-class="category.expand ? \'icon-hcm-file-solid-open\':\'icon-hcm-file-solid-closed\'"></span>\n                        <span>{{ category.name }}</span>\n                    </div>\n                </div>\n                <div class="fields" ng-if="category.expand">\n                    <div class="empty">无隐藏字段</div>\n                    <div class="node-field" ng-show="field.hide"\n                         ng-class="{\'prevent\':!field.permit}"\n                         ng-repeat="field in category.fields track by $index"\n                         ng-click="addCondition(category,$index)">\n                        <div class="name" title="{{ field.name }}">{{ field.name }}</div>\n                        <div class="arrow-icon icon-hcm-arrow-right-circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="content-panel">\n        <div class="hc-grid">\n            <div class="hc-grid-header">\n                <div class="hc-grid-cell-60">\n                    顺序\n                </div>\n                <div class="hc-grid-cell-140 hc-flex-item-fill">\n                    子集信息\n                </div>\n                <div class="hc-grid-cell-200">\n                    操作\n                </div>\n            </div>\n            <div class="hc-grid-content" ng-sortable="sortable_config" ng-show="currentCategory">\n                <div class="hc-grid-row" ng-class="{\'prevent\':!item.permit}"\n                     ng-show="!field.hide&&currentCategory.expand"\n                     ng-repeat="field in currentCategory.fields track by $index">\n                    <div class="hc-grid-cell-60">{{$index+1}}</div>\n                    <div class="hc-grid-cell-140 hc-flex-item-fill">\n                        {{field.name}}\n                    </div>\n                    <div class="hc-grid-cell-200">\n                        <div class="operate">\n                            <span ng-class="{fix:field.fix}"\n                                  ng-click="operateCondition.fix($event,currentCategory,$index)"\n                                  class="icon icon-hcm-pin"></span>\n                            <span ng-click="operateCondition.move_up($event,currentCategory,$index)"\n                                  class="icon icon-hcm-arrow-cross-up-solid"></span>\n                            <span ng-click="operateCondition.move_down($event,currentCategory,$index)"\n                                  class="icon icon-hcm-arrow-cross-down-solid"></span>\n                            <span ng-click="operateCondition.delete($event,currentCategory,$index)"\n                                  class="icon icon-hcm-delete-circle-solid"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'},ruka:function(e,t,n){"use strict";n.r(t),n("CoJ3").a.controller("commonImportTipController",["$scope","$rootScope","hcImportCommonService",function(e,t,n){e.init=function(){e.category=e.params.category,e.task_waitting=!0,e.task_tip="任务处理中...",e.title=e.params.title||"数据"+e.tip,e.data=[],e.get_data(),e.$dialog.title(e.title).operates([{label:"关闭",func:e.close,default:!1}])},e.get_data=function(){n.getImpInfo(e.category).then((function(t){e.task_waitting=!0,e.task_tip="任务完成"}),(function(t){e.task_waitting=!0,e.task_tip="任务失败"}),(function(t){e.task_waitting=!1,e.data.push(t),console.log(t)}))},e.close=function(){e.$dialog.resolve_data("close"),e.$dialog.dialog_close()}}])},ry0J:function(e,t,n){"use strict";n("sMBO"),n("rB9j"),n("EnZy");var i=n("7Gle"),o=n.n(i),a=n("RXMP"),l=n.n(a),r=n("lHQ6"),c=n.n(r),s=n("o+MX"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("WxoT"),m=n.n(p),f=n("ZbhI"),h=n.n(f),g=n("FLGM"),v=n.n(g),b=n("5PDf"),y=n.n(b),w=n("CoJ3");y()(w.a).call(w.a,"treeIdFill",(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent_id",n=function e(n,i){var o=v()(i).call(i,(function(e){return e.id})),a=y()(n).call(n,(function(e){var n=h()(o).call(o,e[t]);return!!~n&&(e.tree_id=i[n].tree_id+"!"+e.id,e.level=e.tree_id.split("!").length,!0)}));if(!(a.length>0))return n;e(n,a)},i=y()(e).call(e,(function(e){return!e[t]&&(e.tree_id=m()(e.id))&&(e.level=1)}));return i.length>0&&n(e,i),y()(e).call(e,(function(e){return e.tree_id}))}})),y()(w.a).call(w.a,"TreeSearch",["$filter",function(e){return function(t,n){if(t){if(n){var i,o,a=[],r=[];y()(i=v()(o=y()(t).call(t,(function(e){var t;return null===(t=e.name)||void 0===t?void 0:_()(t).call(t,n)}))).call(o,(function(e){return e.tree_id}))).call(i,(function(e){var t;a=v()(t=d()(a).call(a,e.split("!"))).call(t,(function(e){return c()(e)})),r.push(e)})),t=y()(t).call(t,(function(e){if(~h()(a).call(a,e.id))return!0;var t=!1;return l()(r).call(r,(function(n){var i;_()(i=e.tree_id).call(i,n)&&(t=!0)})),t}))}return e("TreeFill")(angular.copy(t))}}}]),y()(w.a).call(w.a,"TreeFill",["$filter",function(e){return function(t){var n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent_id",r={},c=t;l()(c).call(c,(function(e){r[e.id]=e})),l()(c).call(c,(function(e){if(e[a]&&r[e[a]]){var t=r[e[a]].children||[];t.push(e),r[e[a]].children=t}}));var s=y()(n=v()(i=o()(r)).call(i,(function(e){return r[e]}))).call(n,(function(e){return!e[a]})),d=function e(t){return 1===t.length&&(t[0].expand=!0,t[0].children&&e(t[0].children)),t};return d(s=e("orderBy")(s,"order_num")),s}}])},ryYh:function(e,t){e.exports='<div class=\'employee-micro\' ng-init="init()" ng-click="go_item()">\n    <div class="employee-photo">\n        <img ng-src="{{item.photo|hcPhoto:64}}">\n    </div>\n    <div class="employee-content">\n        <div class="micro-name">{{item.name}}</div>\n        <div class="micro-desc"></div>\n    </div>\n</div>'},sAGr:function(e,t){e.exports='<div class="no-data-block"\n     ng-if="!($ctrl.model.tree_list.length || $ctrl.model.data.length) && ($ctrl.uuid !== $ctrl.$rootScope.tergetUuid  || !$ctrl.$rootScope.is_waitting_show) && !$ctrl.model.noDataShow">\n    \x3c!--<div class="icon icon-hcm-nocontent"></div>--\x3e\n    <hc-svg options="{icon:\'hcm-no-content\'}" class="no-data-svg"></hc-svg>\n    <div class="desc"\n         ng-click="$ctrl.model.no_content_click()"\n         ng-style="{\'cursor\':$ctrl.model.no_content_click?\'pointer\':\'auto\'}"\n         ng-class="{\'sys-color\':$ctrl.model.no_content_click}">\n        {{$ctrl.caption || \'无数据\'}}\n    </div>\n</div>\n'},sLJd:function(e,t,n){e.exports='<hc-tabs class="content-category"\n         ng-if="category_field && category_type===\'tabs\' && !category_tabs_style && mobile_content_category"\n         value="category_id"\n         ng-hide="tabPanes && !tabPanes.length"\n         on-value-change="onTabsValueChange">\n    <hc-tab-pane\n            ng-repeat="tab in tabPanes track by $index"\n            label="tab.name"\n            name="tab.id"\n            count="tab.count"\n            children="tab.children"\n            hide-count="list_config.hide_count"\n    ></hc-tab-pane>\n</hc-tabs>\n<div class="content for-calc-scroll" ng-class="{\'has-mobile-show-filter\': !selector_flag&&list_btn_model.common_used_actions.length, \'mobile-query-outside\': model_meta.advance_query.mobile_outside_query === true}">\n    '+n("IX8O")+'\n    <div class="model_list_tip" ng-style="list_config.tip_config.style.tip_content" ng-if="list_config && list_config.tip && list_config.tip_config.mobile === \'tile\'">\n        <hc-content-tip content="list_config.tip" options="list_config.tip_config" tip-status="tip_status"></hc-content-tip>\n    </div>\n    <hc-list-new model="list_model"></hc-list-new>\n    <hc-list-no-data model="list_model"\n                     uuid="isolatedUuid"\n                     caption="{{model_meta.list_config.no_content_caption||\'没有找到相应的数据\'}}"></hc-list-no-data>\n    <hc-paging paging="paging" ng-if="list_model.data.length && paging.page_count>0 && !(model_meta.list_config && model_meta.list_config.auto_featch_data)"></hc-paging>\n</div>\n\x3c!--<hc-mobile-btn model="list_btn_model" position="\'bottom\'"></hc-mobile-btn>--\x3e\n'},sWfg:function(e,t){e.exports='<div class="component-container" ng-click="select()">\n    <div class="component-input-inner">{{model|hcListValueParse:item_list:field_key:field_label}}&nbsp;\n        <div ng-show="!options.readOnly" class="input-icon icon-hcm-arrow-down"></div>\n    </div>\n</div>'},sYAY:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("07d7"),n("5s+n");var i=n("mrSG");function o(){return Object(i.c)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(e){return window.ace?[2,window.ace]:[2,n.e(3).then(n.t.bind(null,"olaL",7))]}))}))}},sYR6:function(e,t){e.exports='<div class="component-container" ng-click="$ctrl.onClick($event)">\n    <div class="component-input-inner"\n         ng-class="{placeholder:!$ctrl.model}"\n         ng-bind-html="$ctrl.model?$ctrl.valueMask($ctrl.model):(($ctrl.options.readOnly|valueToFunc)()?\'\':$ctrl.options.placeholder)"\n         ng-disabled="($ctrl.options.readOnly|valueToFunc)()"\n    >\n    </div>\n</div>\n'},sfjC:function(e,t){e.exports='<div class="hcm-menu" ng-init="init()">\n    <div ng-repeat="_item in nav_items track by $index"\n         ng-if="!_item.hide && nav_items && isValidNavItem(_item)">\n        <div class="hcm-nav-item" ng-click="goChild($event,_item)"\n             ng-class="{\'selected\':isCurrent(_item)}">\n            <div><span ng-if="_item.icon" class="icon" ng-class="_item.icon">\n            </span>\n                {{_item.label}}\n            </div>\n            <span class="selected-icon icon-hcm-tick" ng-if="bottom_switch && isCurrent(_item)"></span>\n        </div>\n        <div ng-repeat="_v in _item.list track by $index" class="hcm-nav-item child-item"\n             ng-click="goFunc(_v)"\n             ng-class="{\'selected\':isCurrent(_v)}" \n             ng-if="!(_v.hide|valueToFunc)()">\n            <div>\n                <span ng-if="_item.icon" class="icon" ng-class="_v.icon"></span>\n                {{_v.label}}\n            </div>\n        </div>\n    </div>\n    <div ng-repeat="_category in category_list track by $index" ng-if="category_list"\n         ng-click="changeCategory(_category)"\n         class="hcm-nav-item"\n         ng-class="{\'selected\':_category.id==category_id}">\n        <span class="category-name">{{_category.name}}</span>\n        <span class="count" ng-if="_category.count">{{_category.count}}</span>\n    </div>\n</div>\n'},sjnf:function(e,t){e.exports='<div class=\'hc-dialog-mask\' ng-click="$ctrl.model.scope.close()"></div>\n<div class=\'hc-dialog-window-prompt\' ng-style="{width:$ctrl.model.scope.params.options&&$ctrl.model.scope.params.options.client==\'pc\'?\'25%\':\'70%\'}">\n    <header ng-if="$ctrl.model.options.title">\n        <div class="icon icon-hcm-delete zsb-dialog-delete"\n             ng-click="$ctrl.model.close?$ctrl.model.close():$ctrl.model.check_close()"></div>\n        <div class="main">\n            {{$ctrl.model.options.title}}\n            <span class="tip icon icon-hcm-question"\n                  ng-if="$ctrl.model.options.tip"\n                  hc-title="{{$ctrl.model.options.tip}}"\n                  options="$ctrl.model.options">\n            </span>\n        </div>\n    </header>\n    <div class=\'hc-dialog-content-prompt\'>\n        <div class="content-display {{$ctrl.model.scope.params.options.style}}">\n            <div class="content" ng-bind-html="$ctrl.model.scope.params.content"></div>\n            <div class="content" ng-if="$ctrl.model.scope.params.options.data && $ctrl.model.scope.params.options.data.length"\n                 ng-repeat="data_ in $ctrl.model.scope.params.options.data">\n                <span ng-class="data_.result?\'icon-hcm-tick-circle-solid color-green\':\'icon-hcm-delete-circle-solid color-red\'"></span>\n                <span>{{data_.name}}</span>\n            </div>\n        </div>\n        <div class="operates-container" ng-class="($ctrl.model.scope.params.options.operates.length>2)? \'flex-column\':\'flex-row\'">\n            <div class="hc-dialog-operates"\n                ng-if="$ctrl.model.scope.params.options.operates && $ctrl.model.scope.params.options.operates.length"\n                ng-repeat="item_ in $ctrl.model.scope.params.options.operates">\n                <div ng-click="item_.func()">{{item_.label}}</div>\n            </div>\n        </div>\n    </div>\n</div>\n'},srGB:function(e,t,n){"use strict";var i,o=n("LYCE"),a=n.n(o),l=n("HnXd"),r=n.n(l),c=n("qjzJ"),s=n.n(c),d=n("RXMP"),u=n.n(d),_=n("fHi0"),p=n.n(_),m=n("OWCx"),f=n.n(m),h=n("ZbhI"),g=n.n(h),v=n("mnMc"),b=n.n(v),y=n("6UaR"),w=n.n(y),x=n("+oHS"),k=n.n(x),$=n("5PDf"),O=n.n($),D=n("04Ix"),C=n.n(D),M=n("nhkr"),S=n.n(M);function E(e,t){var n=k()(e);if(f.a){var i=f()(e);t&&(i=O()(i).call(i,(function(t){return p()(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)u()(n=E(Object(i),!0)).call(n,(function(t){C()(e,t,i[t])}));else if(s.a)r()(e,s()(i));else{var o;u()(o=E(Object(i))).call(o,(function(t){a()(e,t,p()(i,t))}))}}return e}window.app.service("BaseCRUDService",["$q","$http","dataService","contextService","$filter",function(e,t,n,i,o){var a=function(e,t,a){var l;null!=e&&(t="hcm.model");var r=null===(l=i.getContext("auth"))||void 0===l?void 0:l.developer_mode;return{identity:"crud_"+(e?"model_"+e:t),getItemList:function(i,o,l,r,c,s,d){return n.callHcmOpenApi(t+".list",{model:e,filter_str:i,filter_dict:o,page_index:l,page_size:r,extra_property:c,biz_type:s,except:d},void 0,void 0,null==a?void 0:a.waiting)},getItemCount:function(i,o,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:None,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:None,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:None,s=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,_=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,f=!(arguments.length>12&&void 0!==arguments[12])||arguments[12],h=arguments.length>13?arguments[13]:void 0;return n.callHcmOpenApi(t+".count",{count_by:i,sum_by:o,group_by:a,avg_by:l,min_by:r,max_by:c,model:e,filter_str:s,filter_dict:d,page_index:u,page_size:_,extra_property:p,biz_type:h,except:m},null,null,f)},getItemAggr:function(i,o,a,l,r,c,s,d,u,_){return n.callHcmOpenApi(t+".aggr",{model:e,dim_fields:i,ag_fields:o,total_include:a,filter_str:l,filter_dict:r,page_index:c,page_size:s,extra_property:d,biz_type:u,except:_})},getItemInfo:function(i,o,l){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4?arguments[4]:void 0;return"object"===S()(i)?n.callHcmOpenApi(t+".list",{model:e,filter_str:null,filter_dict:angular.isArray(i)?{id:i}:i,page_index:1,page_size:1,extra_property:l},void 0,void 0,null==a?void 0:a.waiting).then((function(i){var a=i.list.length>0?i.list[0]:null;return a?n.callHcmOpenApi(t+".get",P(P({},l),{},{model:e,id_:a.id?a.id:null,from_:o,fields:r})):null}),c,void 0,null==a?void 0:a.waiting):n.callHcmOpenApi(t+".get",P(P({},l),{},{model:e,id_:i,from_:o,fields:r}),c,void 0,null==a?void 0:a.waiting)},createItem:function(i){return n.callHcmOpenApi(t+".create",{model:e,info:i})},createByOte:function(i,o,a){return n.callHcmOpenApi(t+".ote",{model:e,state:i,source_id:o,is_preview:a})},editItem:function(i,o){return n.callHcmOpenApi(t+".edit",{model:e,id_:i,info:o})},editItemBatch:function(i){return n.callHcmOpenApi(t+".edit.batch",{model:e,info_list:i})},updateItem:function(i,o){return n.callHcmOpenApi(t+".update",{model:e,id_:i,info:o})},reverseItem:function(i,o){return n.callHcmOpenApi(t+".reverse",{model:e,id_:i,date_:o})},removeItem:function(i){return n.callHcmOpenApi(t+".remove",{model:e,id_:i})},removeItemBatch:function(i){return n.callHcmOpenApi(t+".remove.batch",{model:e,ids:i})},getInfoDefault:function(i,o){return n.callHcmOpenApi(t+".get.create.info",{model:e,state:i,context_param:o})},getInfoChange:function(i,o,a,l,r){return n.callHcmOpenApi(t+".value.onchange",{model:e,biz_type:"info",field:i,info:o,state:a,context_param:l,form_relations:r},void 0,void 0,!1)},getBizMeta:function(i,a){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.callHcmOpenApi(t+".meta",P({biz_type:i,model:e,state:a},c),"application",r||l).then((function(e){return o("metaOperate")(e,i),e}))},getQueryFields:function(i,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3?arguments[3]:void 0;return n.callHcmOpenApi(t+".query.fields",{model:e,state:i,biz_type:o,append_relations:a},"application",r||l)},getDataset:function(i){return n.callHcmOpenApi(t+".get.dataset",{model:e,state:i})},getPageList:function(e,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.callHcmOpenApi(t+".meta",P({biz_type:e,model:i,state:o},a))},modelAction:function(i,o){return n.callHcmOpenApi(t+".action.params",{model:e,action:i,params:o})},modelActionItem:function(i,o){return n.callHcmOpenApi(t+".action",{model:e,action:o,id_:i})},modelActionParam:function(i,o){return n.callHcmOpenApi(t+".action.p",{model:e,action:o,params:i})},modelActionWs:function(i,o){return n.callHcmOpenWebSocket(t+".action.ws",{model:e,action:i,params:o})},actionItem:function(i,o){return n.callHcmOpenApi(t+"."+o,{model:e,id_:i})},dynamicAction:function(e,i,o,a,l){return n.callHcmOpenApi(t+".dynamic.action",{action:a,biz_type:o,state:i,model:e,params:l})},duplicateDetection:function(e,t){return n.callHcmOpenApi("hcm.company.meta.meta.duplicate.detection?category="+encodeURIComponent(e),{meta_key:e,info_:t})},differentMeta:function(e,t){return n.callHcmOpenApi("hcm.company.meta.get.different.meta?category="+encodeURIComponent(e),{meta_key:e,info_:t})},generate_diff_meta:function(e,t){return n.callHcmOpenApi("hcm.company.meta.get.different.meta?model="+encodeURIComponent(e),{meta_key:e,info_:t})},templateDeploy:function(i,o,a){return n.callHcmOpenApi(t+".tpl.deploy",{model:e,tpl_index:i,add_info:o,extend_type:a})},templateExport:function(i,o){return n.callHcmOpenApi(t+".tpl.export",angular.extend({model:e,id_:i},o))},convertQueryStrToObj:function(t,i,o){return function(a){return n.callHcmOpenApi("hcm.paas.object.convert.query.str.to.obj",{model:e,extra_property:{state:t},biz_type:i,value_list:a,meta_info:o})}}}};this.getBaseService=function(e,t){return a(null,e,t)},this.getModelService=function(e,t){return a(e,null,t)}}]),O()(i=window.app).call(i,"metaOperate",["$filter","contextService",function(e,t){return function(n,i){var o,a=k()(t.getContext("auth").roles),l=function(t){return O()(t).call(t,(function(t){var n;w()(t.actions)&&(t.actions=O()(n=t.actions).call(n,(function(t){return t.roles?angular.isArray(t.roles)?e("getArrEqual")(a,t.roles).length:b()(a).call(a,t.roles):t})));return t.roles?angular.isArray(t.roles)?"object"===S()(t.roles[0])?t:e("getArrEqual")(a,t.roles).length:b()(a).call(a,t.roles):t}))};~g()(o=["list","info","view"]).call(o,i)?n.actions=l(n.actions):"base"===i&&(n.childs=l(n.childs))}}]),t.a="BaseCRUDService"},stJW:function(e,t){e.exports='<div class="hc-search-panel" ng-init=\'init()\'>\n    <div class="hc-search-toolbar">\n        <input type="text" ng-model="keyword"\n               placeholder="输入关键字进行查找" ng-keypress="search_key_press($event)">\n        <span ng-click="search_click()" class="search-icon icon-hcm-check"></span>\n    </div>\n    <div class="hc-tree-panel">\n        <hc-compile data-content=\'{{tag}}\'></hc-compile>\n    </div>\n    <div ng-if="config.options.multi&&config.options.selected" class="hc-tree-select-list">\n        <div class="hc-tree-select-item" ng-repeat="_node in config.options.selected">\n            <div class="remove-icon icon-hcm-delete-circle-solid"\n                 ng-click="remove_selected(_node)" ng-if="_node.allow_cancel!==false"></div>\n            <div ng-class="_node.allow_cancel===false?\'not-allow-cancel\':\'\'">\n                <hc-compile ng-if="config.template" data-template="config.template.caption"></hc-compile>\n                <span ng-if="!config.template">{{_node.name}}</span>\n            </div>\n        </div>\n    </div>\n</div>'},t3ho:function(e,t,n){n.p=window.cdn_domain+"/static/"+window.app_type+"/"+window.client+"/"},t4GA:function(e,t){e.exports='<div\n    ng-init="init()"\n    ng-click="onItemClick($event, data, ((meta.func || meta.action) ? meta : columnsMetas[meta.field]))"\n    ng-hide="(meta.hide|valueToFunc)(data,columnsMetas[meta.field])"\n    ng-class="classFunc(data,meta)"\n    style="{{meta.style}}">\n    <span class="text"\n          style="{{meta.style_inner}}"\n          ng-if="meta.text"\n          ng-bind-html="meta.text|toTrusted">\n    </span>\n\n    <span ng-class="meta.icon || columnsMetas[meta.field].icon"\n          ng-if="meta.icon || columnsMetas[meta.field].icon"></span>\n\n    <a class="link"\n       style="{{meta.style_inner}}"\n       href="{{meta.link}}"\n       ng-if="meta.link">{{meta.label}}</a>\n\n    <span class="label"\n          style="{{meta.style_inner}}"\n          ng-if="meta.label">\n        {{columnsMetas[meta.label].label}}\n    </span>\n\n    <span class="field"\n          style="{{meta.style_inner}}"\n          ng-if="meta.field && meta.options.html"\n          ng-bind-html="(data|hcListCellData:columnsMetas[meta.field]|infoDefault:meta.options.default||\'\')|toTrusted">\n    </span>\n    <div class="field"\n         style="{{meta.style_inner}}"\n         ng-if="meta.field && !meta.options.html && !meta.options.form && !meta.options.loop">\n        {{(data|hcListCellData:columnsMetas[meta.field])|infoDefault:meta.options.default||\'\'}}\n    </div>\n\n    <div class="field"\n         style="{{meta.style_inner}}"\n         ng-if="meta.field && meta.options.loop">\n         <hc-smart-card ng-repeat="_m in data[meta.field]" meta="meta.options.content" data="_m" columns-metas="meta.options.columnsMetas" on-item-click="onItemClick">\n        </hc-smart-card>\n    </div>\n\n    <div class="form"\n        style="{{meta.style_inner}}"\n        ng-if="meta.field && meta.options.form">\n        <hc-form-component\n            class="hc-form-field"\n            ng-show="!(columnsMetas[meta.field].modi.options.hide|valueToFunc)(data, columnsMetas[meta.field])"\n            key="{{columnsMetas[meta.field].key}}"\n            component="{{columnsMetas[meta.field].modi.component}}"\n            options="options"\n            ng-form-data="data"\n            ng-form-data-path="columnsMetas[meta.field].modi.dataPath"\n            label="{{columnsMetas[meta.field].label}}"\n            ng-disabled="columnsMetas[meta.field].modi.options.disabled"\n            attrs=\'columnsMetas[meta.field].modi.attrs\'\n            ng-class="{\'read-only\':columnsMetas[meta.field].modi.options.disabled || (columnsMetas[meta.field].modi.options.readOnly|valueToFunc)(data)}"\n        >\n        </hc-form-component>\n\n        <hc-form-component ng-if="columnsMetas[meta.field].modi.extra_meta && !(_field.modi.options.hide|valueToFunc)(data, _field.modi)"\n                           ng-repeat="_field in columnsMetas[meta.field].modi.extra_meta track by _field.key"\n                           key="{{ _field.key }}"\n                           class="hc-form-field"\n                           options="_field.modi.options"\n                           ng-form-data="data"\n                           ng-form-data-path="_field.modi.dataPath"\n                           component="{{ _field.modi.component}}"\n                           label="{{ _field.label }}"\n                           placeholder="{{ _field.modi.options.placeholder }}"\n                           ng-disabled="_field.modi.options.disabled"\n                           attrs="_field.modi.attrs"\n                           ng-class="{\'read-only\':columnsMetas[meta.field].modi.options.disabled || (columnsMetas[meta.field].modi.options.readOnly|valueToFunc)(data)}"\n                           >\n        </hc-form-component>\n    </div>\n    <div class="field"\n         style="{{meta.style_inner}}"\n         ng-if="meta.key_list">\n        <span ng-repeat="field in meta.key_list">\n                <span\n                    ng-bind-html="data|hcListCellData:columnsMetas[field]|infoDefault:meta.empty_default"></span>\n                <span class="connector" ng-hide="$last">{{meta.connector}}</span>\n        </span>\n    </div>\n\n    <img class="image"\n         style="{{meta.style_inner}}"\n         ng-if="meta.image"\n         ng-src="{{data|hcListCellData:columnsMetas[meta.image]|commonImage:[(meta.options&&meta.options.type)||\'hcPhoto\', (meta.options&&meta.options.size)||\'32\']}}"\n    >\n    <hc-input-upload-multiple class="multi-image"\n                              style="{{meta.style_inner}}"\n                              ng-if="meta.multi_image && multi_image_data.data"\n                              options="multi_image_data.options"\n                              ng-model="multi_image_data.data"\n    ></hc-input-upload-multiple>\n    <hc-mark-down class="markdown"\n                  style="{{meta.style_inner}}"\n                  ng-if="meta.markdown && markdown_data"\n                  ng-model="markdown_data"\n                  options="{mode:\'view\'}"\n    ></hc-mark-down>\n\n    <hc-pdf-preview class="pdf-preview"\n                    style="{{meta.style_inner}}"\n                    ng-if="meta.pdf_preview && pdf_preview_data"\n                    ng-model="pdf_preview_data"\n    ></hc-pdf-preview>\n\n    <hc-slider class="slider"\n                style="{{meta.style_inner}}"\n                ng-if="meta.slider && slider_data.data"\n                options="slider_data.options"\n                ng-model="slider_data.data"\n    ></hc-slider>\n\n\n\n\n    <hc-smart-card ng-repeat="_m in meta.childs" meta="_m" data="data" columns-metas="columnsMetas" on-item-click="onItemClick">\n    </hc-smart-card>\n</div>\n\n'},tCJr:function(e,t){e.exports='<div class="emp-filter-name" ng-init="init()">\n    <hc-form model="form"></hc-form>\n</div>\n\n'},tDRi:function(e,t){e.exports='<div class=\'inner-recruit-micro\' ng-init="init()" ng-click="go_inner_job()">\n    <div class="title_tip">内聘</div>\n    <div class="inner-recruit-micro-content">\n        <div class="inner-recruit-micro-name">{{fieldwork_item.name}}</div>\n        <div class="inner-recruit-micro-desc">{{fieldwork_item.person}}</div>\n    </div>\n</div>\n'},tcdP:function(e,t,n){"use strict";n("sMBO");var i=n("M5Mt"),o=n.n(i),a=n("ZbhI"),l=n.n(a),r=n("FLGM"),c=n.n(r),s=n("526F"),d=n.n(s),u=n("Kwsy"),_=n.n(u),p=n("mnMc"),m=n.n(p),f=n("0lTi"),h=n.n(f),g=n("BkRI"),v=n.n(g),b=(n("dwik"),n("CoJ3")),y=n("5PDf"),w=n.n(y),x=n("mrSG");n("h7OG");window.app.controller("crudSettingInfoCtrl",["contextService","$scope","$rootScope","$hcDataGrid","dataService","$hcDialog","$state","$hcForm",function(e,t,n,i,o,a,l,r){t.init=function(){t.onlyoneowner=!!e.getContext("auth").roles.onlyoneowner,t.form=r.createForm("name").$setMeta([{key:"is_shared",label:"是否共享",component:"hc-input-radio",options:{list:[{name:"是",value:"shared"},{name:"否",value:"private"}],default:"private",hide:!t.onlyoneowner,items_inline:!0,singleLine:!0,required:!0,width:"col-12"}},{key:"name",label:"方案名称",component:"hc-input",options:{placeholder:"请输入方案名称",singleLine:!0,required:!0,width:"col-12"}}]),"edit"===t.params.mode&&(t.form.data.name=t.params.submit_params.name,t.form.data.is_shared=t.params.submit_params.is_shared),t.setDialogOperates()},t.setDialogOperates=function(){t.$dialog.operates([{label:"取消",func:t.$dialog.dialog_close},{label:"确定",func:t.submit,default:!0}])},t.submit=function(){if(t.form.data.name){var e,i=angular.copy(t.params.submit_params);"edit"===t.params.mode?e={name:t.form.data.name,id:i.id,is_shared:t.form.data.is_shared,config:i.config}:(i.name=t.form.data.name,i.is_shared=t.form.data.is_shared),("edit"===t.params.mode?t.params.submit(i.id,e):t.params.submit(i)).then((function(e){n.show_warning("保存成功"),t.$dialog.resolve_data(e),t.$dialog.dialog_close()}))}else n.show_warning("请输入方案名称")}}]);var k={controller:"crudSettingInfoCtrl",title:"新建",template:'<div class="setting-info" ng-init="init()">\n        <hc-form model="form"/>\n        <div class="desc">将 <span>过滤条件</span>、<span>显示设置</span> 保存为方案</div>\n    </div>'},$=function(){function e(e,t){this.$hcDialog=e,this.crudSettingService=t,this.setPlanExclude=function(e){var t,n,i,o=w()(t=e.config.filter_fields).call(t,(function(e){return e.plan_exclude}));if(o.length>0)try{for(var a=Object(x.i)(o),l=a.next();!l.done;l=a.next()){var r=l.value;e.config.filter_dict[r.key]&&delete e.config.filter_dict[r.key]}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}}return e.prototype.newPlan=function(e){var t=e.key,n=e.model,i=e.state,o=e.biz_type,a=e.config;return this.$hcDialog.getDialog(k).params({submit:this.crudSettingService.createItem,submit_params:{key:t,model:n,state:i,biz_type:o,config:a}}).size("small").show().then((function(e){return e.config=JSON.parse(e.config),e}))},e.prototype.editPlan=function(e,t){var n=e.id,i=e.name,o=e.model,a=e.is_shared;return this.$hcDialog.getDialog(k).params({mode:"edit",submit:this.crudSettingService.editItem,submit_params:{id:n,name:i,model:o,is_shared:a,config:t}}).size("small").show().then((function(e){return e.config=JSON.parse(e.config),e}))},e.$inject=["$hcDialog","crudSettingService"],e}();b.a.service("planPanelService",$);var O=n("MskY");b.a.controller("PlanPanelController",["contextService","$scope","$state","$rootScope","$hcDialog","crudSettingService","planPanelService","$filter",function(e,t,n,i,a,r,s,u){var p=!1;t.showPlan=!1,t.togglePlanList=function(e){p||(!function(){var e;console.log("refreshPlanListPosition");var n=document.querySelector(".plan-panel"),i=document.getElementById("plan-list-popup"),o=n.offsetWidth,a=n.offsetHeight,l=n.getBoundingClientRect().top,r=n.getBoundingClientRect().left,c=n.getBoundingClientRect().right;i.style.width=o+"px",i.style.height=a+"px",i.style.top=l+"px","right"===(null===(e=t.params)||void 0===e?void 0:e.position)?i.style.left=c+3+"px":i.style.left=r-o-3+"px"}(),p=!0);for(var n=!1,i=document.getElementById("plan-list-popup"),o=h()(document.querySelectorAll(".plan-action-item")),a=e.target,l=!1;a!==e.currentTarget;){if(a===i){n=!0;break}if(m()(o).call(o,a)){if(a.classList.contains("firstRow")){n=!0;break}l=!0,n=!1;break}n=!1,a=a.parentNode}n?t.showPlan=n:_()((function(){return t.showPlan=!1}),l?0:3e3)};var f=function(e){t.params.closeAfterSelected?(t.$dialog.resolve_data(v()(e)),t.$dialog.dialog_close()):(t.$dialog.notify_data(v()(e)),t.$dialog.dialog_close())};t.init=function(){var n,i;t.onlyoneowner=!!e.getContext("auth").roles.onlyoneowner,t.planService=null!==(i=null===(n=t.params)||void 0===n?void 0:n.planPanelService)&&void 0!==i?i:d()(s,r),t.action_list=[{label:"方案：",title:t.currentPlan&&t.currentPlan.name?t.currentPlan.name:t.params&&t.params.current_plan&&t.params.current_plan.name?t.params.current_plan.name:"未选择"},{label:u("translate")("common_query_plan_panel_save_current"),func:t.edit,hide:function(){return!t.plan_list.length}},{label:u("translate")("common_query_plan_panel_save_as_new_plan"),func:t.new},{label:u("translate")("common_query_plan_panel_set_default"),func:t.setDefault,hide:function(){return!t.plan_list.length}},{label:u("translate")("common_query_plan_panel_clear_default"),func:t.clearDefault},{label:u("translate")("common_query_plan_panel_reset"),func:t.clear,hide:function(){return!t.plan_list.length}}],t.plan_list=t.params.plan_list||[],t.currentPlan=t.params.current_plan||{}},t.actionClick=function(e){var t;null===(t=e.func)||void 0===t||t.call(e)},t.isSelected=function(e){return(t.currentPlan||{}).id===e.id},t.new=function(){var e,n;null===(n=(e=t.planService).setPlanExclude)||void 0===n||n.call(e,t.params),t.planService.newPlan(t.params).then((function(e){t.$dialog.resolve_data(e),t.$dialog.dialog_close()}))},t.edit=function(){var e,n;t.currentPlan.id?"shared"!==t.currentPlan.is_shared||t.onlyoneowner?(null===(n=(e=t.planService).setPlanExclude)||void 0===n||n.call(e,t.params),t.planService.editPlan(t.currentPlan,t.params.config).then((function(e){var n;t.currentPlan=e,c()(n=t.plan_list).call(n,(function(n,i){n.id===e.id&&(t.plan_list[i]=e)})),t.$dialog.notify_data(e)}))):i.show_warning("您无权编辑共享方案！"):i.show_warning("请先选择方案")},t.clearDefault=function(){var e,n=null;if(c()(e=t.plan_list).call(e,(function(e){e.default&&(n=e.id)})),n){var o={id:n,default:0,model:t.currentPlan.model,key:t.params.key,state:t.params.state};t.planService.editItem(n,o).then((function(e){e&&i.show_warning("已清除默认方案")}))}else i.show_warning("无默认方案，无法清除")},t.setDefault=function(){if(t.currentPlan.id){var e={id:t.currentPlan.id,default:1,model:t.currentPlan.model,key:t.params.key,state:t.params.state};t.planService.editItem(t.currentPlan.id,e).then((function(e){e&&i.show_warning("已设为默认方案")}))}else i.show_warning("请先选择一个方案！")},t.clear=function(){t.currentPlan=new O.a,f("clear")},t.delete=function(e,n){e.stopPropagation(),a.confirm("确认删除该方案？").then((function(){t.planService.removeItem(n.id).then((function(e){var a,r,c=l()(a=t.plan_list).call(a,n);o()(r=t.plan_list).call(r,c,1),e&&i.show_warning("删除成功"),n.id===t.currentPlan.id&&(t.currentPlan=t.plan_list[0]),t.$dialog.notify_data(t.currentPlan)}))}))},t.itemSelect=function(e){var o=v()(n.params);if(o.custom_params)o.custom_params=JSON.parse(o.custom_params),o.custom_params.planId=e.id;else{var a={};a.planId=e.id,o.custom_params=a}i.super_go(n.current.name,o,{location:"replace",notify:!1}),t.currentPlan=e,f(t.currentPlan)},t.hidePlanList=function(){t.showPlan=!1}}]);t.a={controller:"PlanPanelController",template:n("86b4"),mask:!1,width:200,maskClose:!0,name:"query_plan"}},tmxC:function(e,t){e.exports='<style>\n    #upload-imp .upload-imp-content{\n        margin-top: 40px;\n        text-align: left;\n    }\n\n    #upload-imp .upload-imp-content .upload-imp-tip{\n        margin: 10px;\n    }\n\n    #upload-imp .upload-imp-content .upload-imp-tip >div{\n        display: inline-block;\n    }\n\n    #upload-imp .upload-imp-content .upload-imp-tip .item-name{\n        width: 70%;\n    }\n\n    #upload-imp .upload-imp-content .upload-imp-tip .item-status{\n        width: 25%;\n    }\n\n    #upload-imp .item-success{\n        color: #03a9f4;\n    }\n\n    #upload-imp .item-error{\n        color: #e62c2c;\n    }\n\n    #upload-imp .upload-imp-consl{\n        margin-top: 30px;\n        margin-left: 10px;\n        text-align: center;\n    }\n</style>\n<div id="upload-imp" ng-init="init()">\n    <div ng-show="!task_waitting">\n        <div class="upload-imp-content">\n            <div ng-repeat="item in data track by $index" class="upload-imp-tip">\n                <div class="item-name">{{item}}</div>\n                <div class="item-status" ng-show="!$last"><span class="item-success icon-hcm-info-succeed"></span>&nbsp;&nbsp;处理完成</div>\n                <div class="item-status" ng-show="$last">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{tip}}处理中...</div>\n            </div>\n        </div>\n    </div>\n    <div ng-show="task_waitting" class="upload-imp-consl" style="margin-top: 120px;">\n        <div>\n            <span class="icon-hcm-clock-solid item-success" style="font-size: 26px;vertical-align: middle;"></span>\n            <span style="font-size: 15px;">{{task_tip}}</span>\n        </div>\n    </div>\n</div>\n'},tphj:function(e,t,n){"use strict";var i=n("526F"),o=n.n(i),a=n("OBge"),l=n.n(a),r=n("mrSG"),c=n("XQQm"),s=n("0j7C"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.$onInit=function(){return Object(r.c)(this,void 0,l.a,(function(){return Object(r.e)(this,(function(t){switch(t.label){case 0:return this.setting_form_meta=s,[4,e.prototype.$onInit.call(this)];case 1:return t.sent(),[2]}}))}))},t}(c.a),u=n("z/LF"),_={title:"对象设置",controller:d,template:n.n(u).a,size:"small"},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.getInfoDialog=function(){return _},t.prototype.getListMeta=function(){return[{key:"label",label:"显示",field:["label"]},{key:"field",label:"字段",field:["key"]}]},t.prototype.getItemByNode=function(e){return Object(r.c)(this,void 0,l.a,(function(){return Object(r.e)(this,(function(t){return[2,o()({},e.meta,{key:"master"===e.model_key?e.key:e.model_key+"."+e.key})]}))}))},t}(n("55+V").c),m=n("rLmf"),f=n.n(m);n("9Q+z"),t.a={controller:p,template:f.a}},"tq+l":function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog model-list-style" ng-init="init()">\n    <div class="hcm-content flex" ng-if="client === \'pc\'">\n        '+n("Y23d")+"\n        "+n("IGAs")+'\n    </div>\n    <div ng-if="client === \'mobile\'" class="model-mobile-container" ng-include="\'model_list_dialog_mobile.html\'"></div>\n</div>\n\n<script type="text/ng-template" id="model_list_dialog_mobile.html">\n    <div class="model-mobile-page" ng-class="{\'state\':mode == \'state\'}">\n        <div class="model-mobile-body">\n            '+n("d4O/")+"\n            "+n("+JCO")+"\n            "+n("sLJd")+"\n        </div>\n    </div>\n<\/script>\n"},tsk0:function(e,t){e.exports='<div class="hcm-meta-vis-container" ng-init="$ctrl.$onInit()">\n    <div class="tab-container">\n        <div class="tab-item"\n             ng-repeat="_domain in $ctrl.domain_list track by $index"\n             ng-class="{selected:_domain.key===$ctrl.current_domain.key}"\n             ng-click="$ctrl.selectDomain(_domain)">\n            {{_domain.name}}\n        </div>\n    </div>\n    <div class="panel-container"></div>\n</div>\n'},u4K0:function(e,t){e.exports='<div ng-init="init()" class="goal_complete_micro">\n    <div class="complete_situation">\n        <div class="complete_direction">\n            <div class="perf_completion_value"  ng-if="complete_value && complete_value !==\'None\'" >{{\'perf_completion_value\'|translate}}：<span>{{complete_value}}</span></div><br>\n            <div class="perf_completion" ng-if="comment && comment !==\'None\'">{{\'perf_completion\'|translate}}：<span>{{comment}}</span></div>\n        </div>\n        <div class="complete_percent">\n            <div class="percent_circle">\n                {{objectId}}%\n            </div>\n        </div>\n        <div ng-if="file_id !==\'\'">\n            <hc-input-upload-multiple options="{\'readOnly\':true,\'hide_name\':true}"\n                                      ng-model="file_id"></hc-input-upload-multiple>\n            </div>\n    </div>\n</div>\n'},u7Fk:function(e,t,n){"use strict";n("TeQF");var i=n("5PDf"),o=n.n(i),a=n("526F"),l=n.n(a),r=n("mrSG"),c=function(e){this.disable_html=!1,this.enableFullScreenWatermark=!1,this.enableWatermark=!1,this.scrollStyle="hover",this.paging={page_size_list:[20,50,200],page_size:20},l()(this,e)},s=function(){function e(e,t,n){var i=this;this.dataService=e,this.filter=t,this.$q=n,this.fetching=!1,this.stack=[],this.getConfig=function(){return"mobile"===window.client?o()(i).call(i,"deepMerge")(i.list_global_config,i.list_global_config.mobile_list_global_config||{}):o()(i).call(i,"deepMerge")(i.list_global_config,i.list_global_config.pc_list_global_config||{})}}return e.prototype.getListGlobalConfig=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n=this;return Object(r.e)(this,(function(i){if(e=this.$q.defer(),this.stack.push(e),this.list_global_config){for(t=this.getConfig();this.stack.length;)this.stack.shift().resolve(t);return[2,e.promise]}return this.fetching||(this.fetching=!0,this.dataService.callHcmOpenApi("get_template",{key:"list_global_config.json"},"session,1",!1).then((function(e){n.list_global_config=new c(e.template_config);for(var t=n.getConfig();n.stack.length;)n.stack.shift().resolve(t)}))),[2,e.promise]}))}))},e.$inject=["dataService","$filter","$q"],e}();window.app.service("listGlobalConfigService",s)},uD60:function(e,t){e.exports='<div class="chat-frame" ng-if="recChat" data-ng-init="init()">\n    <div class="slide-mask" ng-show="slide"></div>\n    <div class="main" ng-show="slide">\n        <div class="chat-box clear">\n            <div class="chat-box-title">\n                <div class="icon icon-hcm-delete zsb-dialog-delete"\n                     ng-click="$parent.slide=false"></div>\n                <div class="box-title">\n                    内部交流\n                </div>\n            </div>\n            <div class="operate">\n                <div class="operate-panel">\n                    <div class="operate-item">\n                        <span class="image-button icon-hcm-img" img-resize-upload="" l-width="600" l-quality="1" ng-model="pic"\n                              callback="add_image"></span>\n                    </div>\n                    <div class="operate-item" ng-click="start_at_employee_select()">\n                    <span class="icon icon-hcm-at"></span>\n                    </div>\n                </div>\n            </div>\n            <textarea name="name" maxlength="150" ng-model="$parent.dialog_content" rows="5" cols="40"\n                      placeholder="说点什么..."></textarea>\n            <div class="content-length" ng-class="{\'overflow\':content_length_overflow}">\n                {{$parent.dialog_content.length ? $parent.dialog_content.length : 0}}/150\n            </div>\n            <div class="at-employees" ng-show="transmit.length>0">\n                <div ng-repeat="_emp in transmit"\n                     ng-click="un_at_employee($index)" class="tg">\n                    {{_emp.name}}\n                </div>\n            </div>\n        </div>\n        \x3c!--        <div ng-if="recChat.at&&transmit.length>0" class="atSb">--\x3e\n        \x3c!--            <div class="atSb-frame" ng-repeat="item in transmit track by $index" ng-click="delete_at()">--\x3e\n        \x3c!--                <span class="icon icon-hcm-delete-circle-solid"></span>--\x3e\n        \x3c!--                <img ng-if="item.photo" ng-src="{{item.photo|hcPhoto}}" alt=""/>--\x3e\n        \x3c!--            </div>--\x3e\n        \x3c!--        </div>--\x3e\n        <div class="imgs" ng-show="images.length>0">\n            <div class="img tg" ng-repeat="_img in images" ng-switch on="_img.status"\n                 ng-hide="_img.deleted"\n                 ng-click="show_img($index)">\n                <div ng-switch-when="uploading" class="img-waiting">上传中...\n                </div>\n                <div ng-switch-default>\n                    <div class="img-loading" ng-show="_img.status==\'loading\'"><br><br>上传成功<br>加载中\n                    </div>\n                    <img ng-src="{{_img.index|hcImage:\'80,80\'}}" ng-click=""\n                         sb-load="img_loaded($index)">\n                </div>\n                <div class="delete" ng-click="delete_img($index,$event)" ng-show="_img.status==\'loaded\'">\n                    <div class="icon-hcm-delete"></div>\n                </div>\n            </div>\n            <div class="img">\n                <div class="img-add icon-hcm-camera" img-resize-upload l-width="600" l-quality="1"\n                     ng-model="pic"\n                     callback="add_image">\n                </div>\n            </div>\n        </div>\n        <div class="chat-btn clear">\n\x3c!--            <span class="at-btn" ng-if="recChat.at">--\x3e\n\x3c!--                <span>@转发:</span>--\x3e\n\x3c!--                <span> <hc-tree-list-selector options="employee_selector_options" ng-model="transmit"></hc-tree-list-selector></span>--\x3e\n\x3c!--            </span>--\x3e\n\x3c!--            <span class="image-button icon-hcm-camera" img-resize-upload="" l-width="600" l-quality="1" ng-model="pic"--\x3e\n\x3c!--                  callback="add_image"></span>--\x3e\n            <span ng-click="$parent.slide=false" class="close-btn">取消</span>\n            <span ng-click="send()" class="send-btn">发送</span>\n        </div>\n    </div>\n    <footer class="footer-btn flexbox">\n        <div class="btn-box flex-1" ng-repeat="_btn in recChat.footerBtn" ng-click="btn_fuc(_btn.type)">\n            <div class="item-btn">{{_btn.label}}</div>\n        </div>\n    </footer>\n\n    <employee-selector></employee-selector>\n</div>\n'},uG5i:function(e,t,n){"use strict";n("rB9j"),n("UxlC");var i=n("UtpJ"),o=n.n(i),a=(n("1GJp"),n("WT49")),l=n.n(a);app.controller("HCMMetaFuncEditorCtrl",["$q","$scope","$rootScope","$controller","$hcDialog","$timeout",function(e,t,n,i,a,l){i("HCMCodeEditorCtrl",{$scope:t});var r=t.params.label+":"+t.params.attr_key+"属性";t.$dialog.title(r),t.getMode=function(){return"js"},t.getAlterOperator=function(){return[{key:"clear_value",label:"清空字段配置",func:function(){a.confirm("确认清空"+r+"配置？").then((function(){t.$dialog.resolve_data(!1),t.$dialog.dialog_close()}))}}]},t.loadData=function(){var e;t.editor.setValue(o()(e=t.params.value).call(e,1),-1),t.format()},t.submitExec=function(){var e=t.editor.getValue();e=e.replace(/[\r\n]/g,""),t.$dialog.resolve_data("="+e),t.$dialog.dialog_close()}}]),t.a={controller:"HCMMetaFuncEditorCtrl",title:"元数据编辑",template:l.a,tip:'"清空字段配置"按钮会将字段值设置为false'}},uPlf:function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog" ng-init="init()">\n    <div class="hcm-content flex">\n        '+n("Y23d")+"\n        "+n("IGAs")+"\n    </div>\n</div>\n"},"ufR/":function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="go_url(fieldwork_item.url)">\n    <div ng_if="fieldwork_item.msg!==undefined">{{fieldwork_item.msg}}<span class="icon-hcm-arrow-right"></span></div>\n    <div ng_if="fieldwork_item.msg===undefined">点击补充简历信息<span class="icon-hcm-arrow-right"></span></div>\n</div>\n'},upCD:function(e,t){e.exports='<div class="advance-query" ng-if="model&&client===\'pc\'" ng-init="init()">\n    <div class="simple">\n        <div class="basic simple-form">\n            <hc-form model=\'model.query_model\' class="query-form"></hc-form>\n            <div class="right-content" ng-if="!model.right_hide">\n                <div class="operates" ng-if="!model.close">\n                    <span class="icon-hcm-refresh search-icon sys-color"\n                          ng-click="refreshPage($event)"\n                          ng-if="true" ng-class=""\n                          hc-title="{{\'common_advance_query_hc_title_refresh\'|translate}}"\n                          options="tipOptions"></span> \x3c!--刷新--\x3e\n                    <span class="search-icon sys-color"\n                          ng-if="model.show_favorite"\n                          ng-class="{\n                                      \'icon-hcm-evaluation-solid\': favorite_list_show,\n                                      \'icon-hcm-evaluation\': !favorite_list_show\n                                      }"\n                          ng-click="showFavoriteList()"></span> \x3c!--刷新--\x3e\n                    <span class="search-icon sys-color"\n                          ng-click="togglePanel($event)"\n                          ng-if="need_flex"\n                          ng-class="contract?\'icon-hcm-arrow-down-circle\':\'icon-hcm-arrow-up-circle\'"\n                          hc-title="{{contract_info}}"\n                          options="tipOptions"></span>\n                    <span class="icon-hcm-set search-icon sys-color"\n                          ng-click="showFilterPanel($event)"\n                          ng-if="model.need_set||model.type!==\'simple\'"\n                          ng-show="!model.advance_query_config.remove_info_meta" hc-title="{{more_tips}}"\n                          options="tipOptions"></span>\n                    <span class="search-icon icon-hcm-check-list sys-color" ng-click="openAdvanceDialog(model.query_str)"\n                          ng-if="!model.advance_query_config.disabled_query_str"\n                          ng-show="!model.advance_query_config.remove_info_meta"\n                          hc-title="{{\'common_advance_query_hc_title_edit\'|translate}}"\n                          options="tipOptions"></span> \x3c!--编辑高级查询条件--\x3e\n                    \x3c!-- <span class="search-icon sys-color icon-hcm-changeuser" ng-click="changeType()"\n                          ng-if="!model.selector_flag&&model.type!==\'simple\'" hc-title="切换至高级模式"\n                          options="tipOptions"></span> --\x3e\n                    <span ng-class="model.current_plan && model.current_plan.id ? \'icon-hcm-lamp-solid\' : \'icon-hcm-lamp\'" \n                        ng-click="planList($event)"\n                        class="search-icon sys-color plan"\n                        ng-if="model.type!==\'simple\'"\n                        hc-title="{{\'common_advance_query_hc_title_query_plan\'|translate}}"\n                        options="tipOptions"\n                    ></span> \x3c!--查询方案选择--\x3e\n                </div>\n                <div class="blur" ng-if="model.type!==\'simple\'">\n                    <div class="search">\n                        <input ng-model="model.filter_str" class="search"\n                               placeholder="{{model.blur_fields}}"\n                               ng-keyup="searchKey.blur($event)"\n                               hc-title="{{model.blur_fields}}"\n                               options="{mode: \'tip\', showOnOverflow: true}"\n                               ng-click="onSearchClick()"\n                        >\n                        <span class="icon icon-hcm-check" ng-click="model.$search()"></span>\n                        <span class="left-icon icon-hcm-delete" ng-click="clearAndSearch()" ng-show="shouldShowLeftIcon()"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="query-string" ng-if="show_query_input || model.query_str">\n            <hc-input-query-string  class="hc-query-string" ng-model="model.query_str" options="advanceDialogOptions"></hc-input-query-string>\n        </div>\n    </div>\n    <div class="complete" ng-show="false">\n        <label>\n            <hc-input-query-string ng-if="advance_query_dialog" ng-model="model.query_str" options="advanceDialogOptions"></hc-input-query-string>\n            <input class="jql_content" ng-model="model.query_str" ng-trim="false" ng-if="!advance_query_dialog"\n                   placeholder="高级查询 格式参考： a > 2 and b < 3 and (d =\'张三\' or d = 3)" type="search"\n                   ng-keyup="queryKey.blur($event)">\n            <span class="icon icon-hcm-check" ng-if="!advance_query_dialog" ng-click="model.$search()"></span>\n        </label>\n        <div class="operates">\n            \x3c!--<span class="change-type" ng-click="changeType()">--\x3e\n            \x3c!--<span class="change-type-text"--\x3e\n            \x3c!--&gt;简单</span><span--\x3e\n            \x3c!--class="tip" ng-if="model.isAdvancePlan">简单模式无法解析复杂的查询条件</span></span>--\x3e\n            <span class="search-icon icon-hcm-edit sys-color" ng-click="openAdvanceDialog(model.query_str)"\n                  ng-if="advance_query_dialog&&!model.selector_flag&&model.type!==\'simple\'" hc-title="编辑高级查询条件"\n                  options="tipOptions"></span>\n            <span class="search-icon icon-hcm-changeuser sys-color" ng-click="changeType()"\n                  ng-if="!model.selector_flag&&model.type!==\'simple\'" hc-title="切换至简单模式"\n                  options="tipOptions"></span>\n            <span class="icon-hcm-lamp search-icon sys-color plan" ng-click="planList($event)"\n                  ng-if="model.type!==\'simple\'"\n                  hc-title="{{model.current_plan.name?\'当前方案:\'+model.current_plan.name:\'查询方案选择\'}}"\n                  options="tipOptions"\n            ></span>\n            \x3c!-- <span class="show-keyword sys-color"\n                  ng-click="showKeyword($event)">{{show_keyword ? \'关闭字段参考\' : \'打开字段参考\'}}</span> --\x3e\n        </div>\n        <div class="keyword-list" ng-if="show_keyword" ng-click="keyWordContentClick($event)">\n            <div class="keyword-search">\n                <input ng-model="wordSearchKey.str"\n                       placeholder="搜索关键词" type="search"\n                       ng-keyup="wordSearchKey.blur($event)">\n                <span class="icon icon-hcm-check" ng-click="wordSearchKey.blur($event)"></span>\n            </div>\n            <div class="keyword-content">\n                <div class="model" ng-repeat="m in complete_fields||model.complete_fields">\n                    <div class="model-name" ng-if="m[\'list_fields\']">{{m.name}}</div>\n                    <div ng-repeat="v in m[\'list_fields\']" class="keyword" ng-click="addKeyWord($event,v)">\n                        <span>{{v.label}} - {{v.key}}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="advance-query" ng-if="model&&client===\'mobile\'" ng-init="init()">\n    <hc-form model=\'model.query_model\' class="query-form"></hc-form>\n</div>\n'},uuav:function(e,t,n){"use strict";n("pNMO"),n("4Brf");var i=n("5PDf"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("o+MX"),c=n.n(r),s=n("+hqv");window.app.controller("BaseCRUDListDialogCtrl",["$scope","$controller","$rootScope","CRUDService","InfoDialog","$filter",function(e,t,n,i,a,r){t(s.a,{$scope:e,CRUDService:i,InfoDialog:a}),e.selector_flag=!0,e.initAfter=function(){},e.metaLoaded=function(t){e.$dialog.title(r("valueToFunc")(e.metaParse(t.description))()||t.model)},e.$watch("list_btn_model.actions",(function(){var t,n,i,a,r;(null===(t=e.list_btn_model)||void 0===t||null===(n=t.actions)||void 0===n?void 0:n.length)&&e.$dialog.operates(c()(i=l()(a=e.list_btn_model.actions).call(a,(function(t){return{dynamic:!0,label:t.label,func:function(){return e.parseAction(t)},after_func:t.after_func,disabled:t.disabled||function(){return"MULTI_ITEM"===t.condition?!e.list_model.selected_items||0===e.list_model.selected_items.length:"ITEM"===t.condition&&(!e.list_model.selected_items||1!==e.list_model.selected_items.length)},condition:t.condition,default:t.is_important,left:t.left||!1,hide:t.hide,confirm:t.confirm,is_important:t.is_important,confirm_tip:t.confirm_tip,target:t.target,key:t.key,options:t.options}}))).call(i,o()(r=e.$dialog.options.operates).call(r,(function(e){return!e.dynamic}))))})),e.getInitData=function(){},e.$dialog.close=function(){e.is_data_changed&&e.$dialog.resolve_data(),e.$dialog.dialog_close()}}]),t.a="BaseCRUDListDialogCtrl"},uxxI:function(e,t){e.exports='<div class="hc-char-type" data-ng-init="init()">\n    <div class="chart-item"\n         ng-click="click($index)"\n         ng-class="{active:item.key===model}"\n         data-ng-repeat="item in list track by $index">\n        <div class="v-align-center">\n            <hc-svg options="item"></hc-svg>\n            <div class="chart-name">{{item.name}}</div>\n        </div>\n    </div>\n</div>\n'},v31b:function(e,t,n){n("NVNq");e.exports=function(e){"use strict";var t="";return t+='<div class="table-header-cell head-label" style=" width: 100%; height: ',t+=(e=e||{}).header_height,t+='px">\n    <span>',t+=e.Operates,t+="</span>\n</div>\n\n\n"}},v5fN:function(e,t,n){"use strict";n("sMBO");var i=n("mnMc"),o=n.n(i),a=n("o+MX"),l=n.n(a),r=n("MAKL"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("5PDf"),_=n.n(u),p=n("DaBN"),m=n.n(p),f=n("ZbhI"),h=n.n(f),g=n("M5Mt"),v=n.n(g),b=(n("QO5T"),n("xRFr")),y=n.n(b);window.app.directive("hcDashboardAxis",[function(){return{restrict:"EA",template:y.a,scope:{options:"=",model:"=ngModel"},controller:["$scope","$hcDialog","$timeout",function(e,t,n){e.operate_field=function(t,n,i,o){if(e.model=e.model||[],"delete"===n){var a;v()(a=e.model).call(a,o,1),e.change()}else{var l,r=angular.copy(e.options),c=r.axis_key;"y"===c&&(r.list=_()(l=r.list).call(l,(function(e){var t;return~h()(t=["integer","number","float","numeric"]).call(t,null==e?void 0:e.data_type)}))),e.options.selector(t,r,e.model[o],c).then((function(t){if(t){var i,a={chart_type:t.chart_type,key:t.field.key,name:t.field.label||t.field.name,statistical_type:t.statistical_type,date_format:t.date_format};if("add"===n)e.model.push(a);else v()(i=e.model).call(i,o,1,a);e.change()}}))}},e.$watch("options.length",(function(t){var n;t&&e.model&&v()(n=e.model).call(n,t)}),!0),e.change=function(){n((function(){var t;(null==e||null===(t=e.options)||void 0===t?void 0:t.change)&&e.options.change(e,e.model)}),10)}}]}}]),window.app.controller("dashboardXAxisCtrl",["$scope","$hcForm",function(e,t){e.init=function(){e.set_form(),e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"确定",func:function(){!0===e.axisForm.$validData()?(e.$dialog.resolve_data(e.axisForm.data),e.$dialog.dialog_close()):e.show_warning(e.axisForm.$validData())},default:!0}])},e.set_form=function(){e.axisForm=t.createForm().$setMeta([{component:"hc-super-selector",key:"field",label:"字段",options:{returnFormat:"object",required:!0,get list(){return e.params.list},change:function(t,n){var i,o=~h()(i=["date","datetime"]).call(i,n.data_type),a=e.axisForm.field_metas.date_format;a&&(a.options.readOnly=!o,a.options.hide=!o),e.axisForm.data.statistical_type=null}}}])}}]),window.app.controller("dashboardYAxisCtrl",["$scope","$hcForm",function(e,t){e.init=function(){e.set_form(),e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"确定",func:function(){if(!0===e.axisForm.$validData()){var t=angular.copy(e.axisForm.data);t.field=t.field||{};t.field.label={count:"统计值",sum:"合计值",owner:"字段值"}[t.statistical_type]+(t.field.name?"-"+t.field.name:""),t.key=t.field.key,t.name=t.field.label,t.statistical_name=t.name,e.$dialog.resolve_data(t),e.$dialog.dialog_close()}else e.show_warning(e.axisForm.$validData())},default:!0}])},e.set_form=function(){e.axisForm=t.createForm().$setMeta([{component:"hc-select",label:"统计类型",key:"statistical_type",options:{required:!0,list:[{value:"count",label:"统计值"},{value:"sum",label:"合计值"},{value:"owner",label:"字段值"}],tip:"统计值：字段统计数量作为数据； 合计值：字段计算总和作为数据； 字段值：字段值本身作为数据",change:function(){e.axisForm.data.field=null}}},{component:"hc-super-selector",key:"field",label:"字段",options:{returnFormat:"object",get list(){return e.params.list},readOnly:function(){var t;return~h()(t=["owner","count"]).call(t,e.axisForm.data&&e.axisForm.data.statistical_type)||0===e.params.list.length},required:function(){var t;return!!e.axisForm.data&&~h()(t=["sum"]).call(t,e.axisForm.data.statistical_type)}}}])}}]);var w=n("a0dU"),x=n.n(w),k=(n("ls82"),n("SPx3")),$=n.n(k),O=n("LYCE"),D=n.n(O),C=n("uxxI"),M=n.n(C);n("AwZ1");window.app.directive("hcChartType",[function(){return{restrict:"EA",template:M.a,scope:{options:"=",model:"=ngModel"},controller:["$scope",function(e){e.init=function(){var t;e.list=d()(t=e.options.list||[{icon:"hcm-chart-pie",name:"饼状图",key:"pie"},{icon:"hcm-chart-line",name:"折线图",key:"line"},{icon:"hcm-chart-bar-x",name:"纵向\n柱状图",key:"bar_x"},{icon:"hcm-chart-bar-y",name:"横向\n柱状图",key:"bar_y"},{icon:"hcm-chart-stack-x",name:"纵向\n堆叠图",key:"bar_stack_x"},{icon:"hcm-chart-stack-y",name:"横向\n堆叠图",key:"bar_stack_y"},{icon:"hcm-radar",name:"经典\n雷达图",key:"radar"},{icon:"hcm-funnel",name:"经典\n漏斗图",key:"funnel"},{icon:"hcm-mixed-graph",name:"经典\n混合图",key:"mixedGraph"},{icon:"hcm-chart-map",name:"地图",key:"map"}]).call(t,(function(t){return D()(t,"color",{get:function(){return e.model!==t.key||"#fff"},configurable:!0}),t})),e.changeValidate=function(e,t){return!0},e.changeValidate=e.options.changeValidate||e.changeValidate},e.click=function(){var t=$()(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeValidate(e,e.list[n].key);case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:e.model=e.list[n].key,e.options.change&&e.options.change(e,e.model);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]}}]);n("VyHM"),n("p/zc");window.app.controller("portalDashboardSetCtrl",["$scope","dataService","dataToolService","$hcForm","$q","hcmAxisSelector",function(e,t,n,i,a,r){e.initScheme=function(){e.scheme_category=null,e.plugin=e.params,e.initData().then((function(){n.getScheme().then((function(t){e.scheme_category_list=t,e.set_scheme_operate(),e.set_scheme_form()}))}))},e.initData=function(){var t=a.defer();return e.params.axis&&(e.data=angular.extend(e.params,{scheme_category:e.params.scheme,yAxis:e.params.axis.y,xAxis:e.params.axis.x})),e.params.category?e.scheme_category=e.params.category:e.params.model&&(e.scheme_category={model:e.params.model,state:e.params.state}),e.scheme_category?e.get_field_info(e.scheme_category).then(t.resolve):t.resolve(),t.promise},e.set_scheme_operate=function(){e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"确定",func:e.scheme_confirm,default:!0}])},e.get_field_info=function(n){var i=a.defer();return t.callHcmOpenApi("hcm.model.get.real.field",{biz_type:n.biz_type?n.biz_type:"list",model:n.model,state:n.state}).then((function(t){var n,o;e.list=_()(n=d()(o=t.fields).call(o,(function(e){return e.name=e.label||e.name,e}))).call(n,(function(e){return e.name})),i.resolve()})),i.promise},e.refresh_chard=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.scheme_form.$validNotify(t),!0===e.scheme_form.$validData()?e.add_plugin_config={version:c()(),key:e.plugin.children?e.plugin.children[0].key:"dashboard_child",category:e.plugin||{plugin:"home-widget-dashboard"},filter:_()(e.params),params:angular.extend(e.scheme_form.data,{model:e.scheme_category.model,state:e.scheme_category.state,biz_type:e.scheme_category.biz_type,label:e.scheme_form.data.label,scheme:e.scheme_form.data.scheme_category,chart:e.scheme_form.data.chart,axis:angular.copy({x:e.scheme_form.data.xAxis,y:e.scheme_form.data.yAxis})})}:(t&&e.show_warning(e.scheme_form.$validData()),e.add_plugin_config=null)},e.scheme_confirm=function(){!0===e.scheme_form.$validData()?(e.$dialog.resolve_data(e.add_plugin_config),e.$dialog.dialog_close()):e.show_warning(e.scheme_form.$validData())},e.set_scheme_form=function(){var t;e.shceme=null;var n=[];e.params.category||n.push({component:"hc-super-selector",label:"功能查询方案",key:"scheme_category",options:{data_type:"string",required:!0,list:e.scheme_category_list,returnFormat:"id",tip:"如无可选项，请先在功能设置查询方案",change:function(t,n){var i,o;(null===(i=e.scheme_category)||void 0===i||null===(o=i.model)||void 0===o?void 0:o.id)!==n&&(e.scheme_form.data={},n?(e.scheme_category=t.options.originObject,e.scheme_form.data={scheme_category:n,label:e.scheme_category.state_name},e.get_field_info(e.scheme_category)):e.field_list=null)}}}),n=d()(t=l()(n).call(n,[{component:"hc-input",label:"卡片标题",key:"label",options:{data_type:"string",required:!0}},{component:"hc-chart-type",label:"图表类型",key:"chart",options:{required:!0}},{component:"hc-dashboard-axis",label:"X轴",key:"xAxis",options:{axis_key:"x",required:!0,get length(){var t;return o()(t=["pie","funnel"]).call(t,e.scheme_form.data.chart)?1:2},get list(){return e.list},get readOnly(){return!e.list},selector:r.chartAxisSelector}},{component:"hc-dashboard-axis",label:"Y轴",key:"yAxis",options:{axis_key:"y",required:!0,length:1,get list(){return e.list},get readOnly(){return!e.list},selector:r.chartAxisSelector}},{component:"hc-input-checkbox",label:"数值类型",key:"value_type",options:{list:[{value:"name",name:"名称"},{value:"value",name:"原始值"},{value:"percent",name:"百分比"}]}},{component:"hc-input-number",label:"最小值百分比显示",key:"show_range",options:{min:0,max:100}},{component:"hc-input-radio",label:"排序",key:"sort",options:{hide:function(){var t;return o()(t=["map"]).call(t,e.scheme_form.data.chart)||e.scheme_form.data&&e.scheme_form.data.xAxis&&e.scheme_form.data.xAxis.length>1},default:"descend",list:[{value:"normal",name:"默认"},{value:"descend",name:"降序"},{value:"ascend",name:"升序"}]}},{component:"hc-input-radio",label:"图表类目展现方式",key:"zoom",options:{default:!0,list:[{value:!0,name:"滚动"},{value:!1,name:"平铺"}],items_inline:!0}}])).call(t,(function(e){return e.width="col-12",e})),e.scheme_form=i.createForm("portalDashboardSet").$setData(e.data||{}).$setMeta(n),e.refresh_chard(!1),e.$watch("scheme_form.data",(function(){e.refresh_chard(!1)}),!0)}}]);t.a={controller:"portalDashboardSetCtrl",template:m.a,title:"新增插件"}},vAHh:function(e,t){e.exports='<div class="fieldwork-rec-invite distinct" ng-init="init()" ng-click="showAiResult(fieldwork_item.apply_id,fieldwork_item.instance_id)">\n    <div ng_if="isShowAiResult" class="ai-interview-result">\n        <div class="item-label">AI面试结果</div>\n        <div class="item-value">{{fieldwork_item.content}}</div>\n    </div>\n    <div class="ai-interview-result-content">\n        <div class="item-label"><span class="icon-hcm-clock"></span>面试耗时</div>\n        <div class="item-value" ng_if="fieldwork_item.begin_time !== undefined">开始时间：{{fieldwork_item.begin_time}}</div>\n        <div class="item-value" ng_if="fieldwork_item.end_time !== undefined">结束时间：{{fieldwork_item.end_time}}</div>\n        <div class="item-value" ng_if="fieldwork_item.during !== undefined">总耗时：{{fieldwork_item.during}}</div>\n    </div>\n</div>\n'},vLjf:function(e,t,n){e.exports='<div class="model-list-style model-view-multi-style" ng-class="{\'view\':view}" ng-init="init()" name="{{getIdentityName()}}">\n    <div ng-if="client === \'pc\'" ng-include="\'model_view_multi_pc.html\'"></div>\n    <div ng-if="client === \'mobile\'" class="model-mobile-container" ng-include="\'model_view_multi_mobile.html\'"></div>\n    <ui-view ng-if="!$dialog"></ui-view>\n</div>\n\n\x3c!--pc--\x3e\n<script type="text/ng-template" id="model_view_multi_pc.html">\n    <div class="hcm-nav-content">\n        <div ng-if="tree_flag" class="hcm-left-content">\n            '+n("BBF0")+'\n        </div>\n        <div ng-if="category_field && category_type===\'nav\'" class="hcm-left-content">\n            '+n("1pOw")+'\n        </div>\n        <div class="hcm-content flex">\n            '+n("IGAs")+'\n        </div>\n    </div>\n<\/script>\n\n\x3c!--mobile--\x3e\n<script type="text/ng-template" id="model_view_multi_mobile.html">\n    <div class="model-mobile-page" ng-class="{\'state\':mode == \'state\'}">\n        <div class="model-mobile-body">\n            '+n("sLJd")+"\n        </div>\n    </div>\n<\/script>\n\n"},"vT+i":function(e,t,n){"use strict";function i(e){return angular.element(document.body).injector().get(e)}n.d(t,"a",(function(){return i}))},wTxN:function(e){e.exports=JSON.parse('{"tip":"","fields":[{"key":"base_template","label":"模版选择","component":"hc-chart-type","options":{"tip":"覆盖原图形定义, 默认指定\'main\'为数据源","required":true,"default":"custom","list":[{"icon":"hcm-chart-pie","name":"饼状图","key":"pie"},{"icon":"hcm-chart-pie-radius","name":"环形图","key":"pie_radius"},{"icon":"hcm-chart-line","name":"折线图","key":"line"},{"icon":"hcm-chart-line-2d","name":"分组折线图","key":"line_2d"},{"icon":"hcm-chart-line-stark-2d","name":"堆叠面积图","key":"line_stark_2d"},{"icon":"hcm-chart-bar-x","name":"柱状图","key":"bar"},{"icon":"hcm-chart-bar-2d","name":"分组柱状图","key":"bar_2d"},{"icon":"hcm-chart-stack-x","name":"柱状图堆叠","key":"bar_stark_2d"},{"icon":"hcm-bar-updown-opacity","name":"双向柱状图","key":"bar_up_down_2d"},{"icon":"hcm-mixed-graph","name":"折柱混合","key":"bar_line_mix_2d"},{"icon":"hcm-funnel","name":"漏斗图","key":"funnel"},{"icon":"hcm-radar","name":"雷达图","key":"radar"},{"icon":"hcm-basic-scatter-opacity","name":"散点图","key":"scatter"},{"icon":"hcm-column-progress-opacity","name":"柱状进度条","key":"bar_progress"},{"icon":"hcm-semi-circle-progress-opacity","name":"半圆进度条","key":"semi_circle_progress"},{"icon":"hcm-chart-map","name":"中国行政地图","key":"china_map"},{"key":"pie_3d","name":"3d饼状图","icon":"hcm-chart-pie-3d"},{"icon":"hcm-chart-custom","name":"自定义","key":"custom"}]}},{"key":"data","label":"数据定义","component":"hc-input-mask","options":{"tip":"在此处定义图形需要使用的数据源","singleLine":false,"width":"col-12","placeholder":"请输入标识","required":false}},{"key":"chart","label":"模版定义","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}},{"key":"chart_pc","label":"模版定义(pc)","component":"hc-input-script","options":{"tip":"pc端生效的模板配置，会合并到总的模板定义中","singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}},{"key":"chart_mobile","label":"模版定义(mobile)","component":"hc-input-script","options":{"tip":"移动端生效的模板配置，会合并到总的模板定义中","singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}},{"key":"drill","label":"穿透定义","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}},{"key":"custom_click","label":"自定义点击事件","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请配置点击事件","required":false}},{"key":"require","label":"刷新依赖","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}},{"key":"stat_list","label":"是否生成表格","component":"hc-input-radio","options":{"tip":"仅支持预置的饼图、柱状图、折线图以及其组合的图\\n支持包含二维及以下的echarts图配置自动生成对应表格","singleLine":false,"default":false,"list":[{"name":"是","value":true},{"name":"否","value":false}],"items_inline":true}},{"key":"stat_list_config","label":"表格配置","component":"hc-input-json","options":{"tip":"列表控件配置参数可以参考列表list_config。\\n1.柱状图可配置reverse_table: true控制横纵坐标的反转。\\n2.PC端可配置direction: vertical, 让图表纵向排列展示。\\n3.categoryFieldWidth、customFieldWidth分别可设置首列固定列宽度和其他列宽度。","singleLine":true,"data_type":"JSON","placeholder":"请输入list_config配置","items_inline":true}}],"groups":[{"key":"core","label":"基础配置","field_list":["base_template","data","dim_fields","ag_fields","chart","chart_pc","chart_mobile","drill","require","stat_list","stat_list_config"]}]}')},"wW/t":function(e,t){e.exports='<div ng-sortable="sortable_config">\n    <div class="hc-tree-grid-row"\n         ng-class="level?\'hc-tree-level-\'+level:\'hc-tree-level-0\'"\n         ng-repeat="_node in list track by _node.id">\n        <div ng-if="(_node.is_leaf === false||_node.is_leaf === 0 || _node.children)&&options.sortable!==false"\n             class="hc-tree-grid-row-more"\n             ng-class="_node.expanded?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\'"\n             ng-click="toggle_expand($event,_node)"></div>\n        <div class="hc-tree-grid-row-template"\n             ng-class="{\'selected\':_node==options.selected,\'expanded\':_node.expanded}"\n             ng-click="node_select($event,_node,list);">\n            <hc-compile data-template="template"></hc-compile>\n        </div>\n        <hc-tree-grid ng-if="_node.children&&(_node.expanded||options.expand_all)"\n                      data-template="template"\n                      data-load="load"\n                      data-options="options" data-level="(level||0)+1"\n                      data-list="_node.children"></hc-tree-grid>\n    </div>\n</div>'},wWDB:function(e,t){e.exports='<div class="hc-grid-row"\n     ng-class="_node==options.selected||options.selected.indexOf(_node)>=0?\'hc-grid-row-selected\':\'\'"\n     ng-if="(!options.search.number || _node.number.indexOf(options.search.number) == 0)\n     && (!options.search.name || _node.name.indexOf(options.search.name)>=0)\n     && (!options.search.enable || _node.enable == (options.search.enable == \'1\'))">\n    <div class="hc-grid-cell-40">\n        <div ng-if="!options.category.is_tree_item">{{$index+1}}</div>\n        <div ng-if="options.category.is_tree_item&&!level">{{$index+1}}</div>\n    </div>\n    <div class="hc-grid-cell-140">\n        {{_node.number}}\n    </div>\n    <div class="hc-grid-cell-120 hc-flex-item-fill ">\n        <span class="hc-tree-grid-row-caption">{{_node.name}}</span>\n    </div>\n    <div class="hc-grid-cell-100" ng-if="options.category.is_compare_item">\n        {{_node.value}}\n    </div>\n    <div class="hc-grid-cell-80"\n         ng-if="(options.category&&options.category.name===\'用工类型\')">\n        {{_node[\'emp_state\']}}\n    </div>\n    <div class="hc-grid-cell-80" ng-if="options.category&&options.category.name===\'岗位状态\'">\n        {{_node[\'on_guard\']}}\n    </div>\n    <div class="hc-grid-cell-80" ng-if="options.category&&options.category.name===\'岗位状态\'">\n        {{_node[\'on_job\']}}\n    </div>\n    <div class="hc-grid-cell-80">\n        <span ng-if="_node.enable">启用</span>\n        <span ng-if="!_node.enable" class="warning">停用</span>\n    </div>\n    <div class="hc-grid-cell-120">\n        <div class="basic-item" ng-if="options.auth_permissions && !_node.is_readonly">\n            <span ng-if="_node.enable" ng-click="options.disable($event,_node)" class="hc-link basic-item-show">\n                停用\n            </span>\n            <span ng-if="!_node.enable" ng-click="options.enable($event,_node)" class="hc-link basic-item-show">\n                启用\n            </span>\n            \x3c!--<span ng-click="options.move_up($event, $index, list)" class="hc-link basic-item-operate">--\x3e\n            \x3c!--上移--\x3e\n            \x3c!--</span>--\x3e\n            \x3c!--<span ng-click="options.move_down($event, $index, list)" class="hc-link basic-item-operate">--\x3e\n            \x3c!--下移--\x3e\n            \x3c!--</span>--\x3e\n        </div>\n        <div class="basic-item" ng-if="!options.auth_permissions">\n            <span>\n\n            </span>\n        </div>\n    </div>\n</div>'},wiQb:function(e,t,n){"use strict";n.r(t),n("CoJ3").a.factory("searchBoxService",["dataService",function(e){return{getFieldSelector:function(t){return e.callHcmOpenApi("dictionary.get.field.selector",{field:t})}}}])},"wis+":function(e){e.exports=JSON.parse('{"tip":"为数据源设置关联关系","fields":[{"key":"key","label":"字段选择","component":"hc-tree-selector","options":{"required":true,"singleLine":false,"placeholder":"请选择字段"}},{"key":"op","label":"操作符","component":"hc-super-selector","options":{"singleLine":false,"width":"col-12","placeholder":"请选择操作符","required":true}},{"key":"value_type","label":"比较值","component":"hc-input-radio","options":{"singleLine":false,"width":"col-12","items_inline":true,"required":true}},{"key":"value_field","label":null,"component":"hc-tree-selector","options":{"singleLine":false,"width":"col-12","placeholder":"请选择字段","hide":"=function(){return SCOPE.form.data.value_type!==\'field\'}"}},{"key":"value_formula","label":null,"component":"hc-input-script","options":{"singleLine":false,"width":"col-12","placeholder":"请选择过滤","hide":"=function(){return SCOPE.form.data.value_type!==\'formula\'}"}},{"key":"value_const","label":null,"component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"请输入固定值","hide":"=function(){return SCOPE.form.data.value_type!==\'const\'}"}}]}')},wsP6:function(e,t){e.exports='<div class="hc-login" ng-init="init()">\n    <div class="hc-login-window">\n        <div class="login-title">用户登录</div>\n        <form class="login-form">\n            <input class="login-username"\n                   type="text"\n                   placeholder="请输入手机号码/邮箱"\n                   ng-model="username"\n                   oninput="setCustomValidity(\'\')"\n            />\n            <div class="login-password">\n                <input type="{{show_password ? \'text\': \'password\'}}"\n                       ng-show="mode===\'password\'"\n                       placeholder="请输入密码"\n                       ng-model="password"\n                       autocomplete="off"\n                />\n                <span class="icon"\n                      ng-if="password"\n                      ng-class="{\'icon-hcm-view-slash\':show_password, \'icon-hcm-view\': !show_password}"\n                      ng-click="changePasswordVisibility()">\n                </span>\n            </div>\n            <div class="login-img-code" ng-show="mode===\'get_code\' || display_img_code">\n                <input type="text"\n                       placeholder="请输入图片验证码"\n                       ng-model="img_code"\n                       autocomplete="off"\n                />\n                <img class="code-img" alt="图片验证码" ng-click="getCodeImg()"\n                     ng-if="mode===\'get_code\' || display_img_code" src={{imageIndex}}>\n            </div>\n            <div class="login-code" ng-show="mode===\'code\'">\n                <input type="text"\n                       placeholder="请输入验证码"\n                       ng-model="valid_code"\n                       autocomplete="off"\n                />\n                <span class="count-down" ng-if="count_down && count_down >= 0">{{count_down}}</span>\n            </div>\n            <div class="message" ng-if="message" ng-bind-html="message|toTrusted"></div>\n            <input class="submit-btn" type="submit" ng-if="mode===\'password\'" value="登录" ng-click="passwordLogin()">\n            <input class="submit-btn" type="submit" ng-if="mode===\'code\'" value="登录" ng-click="codeLogin()">\n            <input class="submit-btn" type="submit" ng-if="mode===\'get_code\'" value="获取验证码" ng-click="getCode()">\n        </form>\n        <div class="extra-operates">\n            <div class="operate register" ng-if="mode===\'password\'" ng-click="onRegisterBtnClick()">新用户注册</div>\n            <div class="operate password-forgotten" ng-if="mode===\'password\'" ng-click="onForgetPasswordBtnClick()">忘记密码？</div>\n            <div class="operate password" ng-if="mode!==\'password\'" ng-click="onRememberPasswordBtnClick()">我知道我的密码，使用密码登录</div>\n        </div>\n        <div class="user-protocol" ng-if="private_protocol">\n            <input type="checkbox" id="protocol_agreement" value="agree" />\n            <label for="protocol_agreement">我已详细阅读并同意</label>\n            <span class="protocol-text" ng-click="openProtocolDialog()">《用户隐私协议》</span>\n        </div>\n    </div>\n</div>'},wzoq:function(e){e.exports=JSON.parse('{"tip":"report_filter_info_tip","fields":[{"key":"key","label":"report_filter_ID","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"report_filter_please_enter_id","required":true}},{"key":"label","label":"report_filter_the_name","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"report_filter_please_enter_a_display_name","required":true}},{"key":"component","label":"report_filter_component","component":"hc-input","options":{"singleLine":false,"width":"col-12","placeholder":"report_filter_please_enter_the_display_component","required":true}},{"key":"options","label":"report_filter_features","component":"hc-input-json","options":{"singleLine":false,"width":"col-12","placeholder":"report_filter_please_enter_features","required":true}}]}')},x2r2:function(e,t){e.exports='<div id="hcUEditorContainer">\n    <div></div>\n</div>\n'},x3YV:function(e,t){e.exports='<div class="hc-sortable-tree" name="{{model.name}}">\n    <div class="add-group sys-color" ng-if="!model.data.length" ng-click="model.addGroup({key:\'init_node\'})">点击新建分组～</div>\n    <div class="tree-node-child {{model.class}}" ng-init="init()" ng-if="model.data">\n        <div ng-repeat="item in model.data track by $index" ng-include="\'column_node.html\'"\n             key="{{item.key}}" class="node"></div>\n    </div>\n</div>\n\n<script type="text/ng-template" id="column_node.html">\n    <div class="tree-node" ng-class="{\'placeholder\':item.type===\'placeholder\'}">\n        <div class="node-field">\n            <div class="node-expand-icon"\n                 ng-class="model.nodeCondition(item)?\'\':(item.expand?\'icon-hcm-arrow-down-solid\':\'icon-hcm-arrow-right-solid\')"\n                 ng-click="model.nodeCondition(item)||(item.expand?model.$collapseNode(item):model.$expandNode(item))"></div>\n            <div class="check-box" ng-if="model.showCheckBox"\n                 ng-class="isNodeSelected(item)?\'sys-color icon-hcm-click-rectangle-radius\':\'icon-hcm-none-rectangle-radius\'">\n            </div>\n            <div class="icon sys-color {{model.nodeIcon(item)}}"\n                 ng-click="item.is_leaf?selectNode(item):(item.expand?model.$collapseNode(item):model.expandNode(item))"></div>\n            <div class="node-text" title={{item.name}} ng-click="model.$selectNode(item)" ng-if="!model.is_calculate">\n                {{item.label||item.name}}\n            </div>\n            <div class="sys-color operates" ng-class="{\'select-sub-visible\':item.expand}">\n                <span class="operate-icon" ng-repeat="v in model.iconList" ng-class="v.icon" hc-title="{{v.description}}"\n                      ng-hide="v.disabled(item)" ng-click="v.func(item,$event)"></span>\n            </div>\n        </div>\n        <div class="tree-node-child" ng-show="item.expand" layer="{{model.treeList[item.key].layer}}">\n            <div ng-repeat="item in item.children track by $index" ng-include="\'column_node.html\'"\n                 data-ng-class="isNodeSelected(item)?\'selected\':\'to-select\'"\n                 key="{{item.key}}" class="node"></div>\n        </div>\n    </div>\n<\/script>\n'},xAfy:function(e,t,n){"use strict";n.d(t,"c",(function(){return Q})),n.d(t,"f",(function(){return Z})),n.d(t,"i",(function(){return ee})),n.d(t,"g",(function(){return te})),n.d(t,"m",(function(){return ne})),n.d(t,"a",(function(){return oe})),n.d(t,"b",(function(){return ae})),n.d(t,"l",(function(){return le})),n.d(t,"p",(function(){return re})),n.d(t,"n",(function(){return ce})),n.d(t,"d",(function(){return se})),n.d(t,"q",(function(){return de})),n.d(t,"j",(function(){return ue})),n.d(t,"h",(function(){return _e})),n.d(t,"k",(function(){return pe})),n.d(t,"o",(function(){return fe})),n.d(t,"e",(function(){return be}));n("oVuX"),n("qePV"),n("toAj"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("Rm1S"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("FLGM");var i,o,a,l,r,c,s,d,u,_,p=n("mnMc"),m=n.n(p),f=n("RKTd"),h=n.n(f),g=n("nhkr"),v=n.n(g),b=n("GFMm"),y=n.n(b),w=n("Kwsy"),x=n.n(w),k=n("OBge"),O=n.n(k),D=n("WxoT"),C=n.n(D),M=n("D3kx"),S=n.n(M),E=n("MAKL"),P=n.n(E),j=n("/FZm"),T=n.n(j),A=n("RXMP"),I=n.n(A),L=n("lHQ6"),F=n.n(L),R=n("o+MX"),B=n.n(R),U=n("M5Mt"),q=n.n(U),W=n("LYCE"),z=n.n(W),N=n("UtpJ"),K=n.n(N),H=n("pPxq"),V=n.n(H),Y=n("ZbhI"),G=n.n(Y);if(window.isApp=G()(i=navigator.userAgent.toLowerCase()).call(i,"hcmcloudapp")>=0,-1!==G()(o=navigator.userAgent).call(o,"iPhone")&&(document.getElementsByTagName("html")[0].className+=" device-iphone"),document.getElementsByTagName("html")[0].className+=" "+window.client,"mobile"===window.client&&(window.PointerEvent=void 0),document.addEventListener("touchend",(function(){}),!0),document.addEventListener("touchmove",(function(){}),!0),"function"!=typeof V()(String.prototype)&&(String.prototype.startsWith=function(e){var t;return K()(t=this).call(t,0,e.length)===e}),(G()(a=location.search).call(a,"debug=")>-1||"1"==(u=new RegExp("(^| )"+"debug"+"=([^;]*)(;|$)"),(d=document.cookie.match(u))?unescape(d[2]):null))&&(window.wx_debug=!0),G()(l=navigator.userAgent.toLowerCase()).call(l,"htime")>=0){var J=document.getElementsByTagName("head")[0];(X=document.createElement("script")).type="text/javascript",X.charset="utf-8",X.timeout=12e4,X.src=window.cdn_domain+window.hcm_wengen+"/static/resources/lib/htime.js",J.appendChild(X)}if(G()(r=window.navigator.userAgent).call(r,"weaverClient")>-1||G()(c=window.navigator.userAgent).call(c,"E-Mobile")>-1&&G()(s=window.navigator.userAgent).call(s,"Electron")<0){var X;J=document.getElementsByTagName("head")[0];(X=document.createElement("script")).type="text/javascript",X.charset="utf-8",X.timeout=12e4,X.src=window.cdn_domain+window.hcm_wengen+"/static/resources/lib/jem.js",J.appendChild(X)}window.md5=n("aCH8"),z()(Array.prototype,"delete",{value:function(e){for(var t=this.length-1;t>=0;t--){var n;e(this[t])&&q()(n=this).call(n,t,1)}},enumerable:!1}),String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",n=1;n<4;n+=1){var i;t+=B()(i=K()(e).call(e,n,n+1)).call(i,K()(e).call(e,n,n+1))}e=t}for(var o=[],a=1;a<7;a+=2)o.push(F()("0x"+K()(e).call(e,a,a+2)));return"RGB("+o.join(",")+")"}return e},Array.prototype.toObject=function(e,t){var n,i={};return I()(n=this).call(n,(function(n,o){i[e(n,o)]=t(n,o)})),i},Array.prototype.buildSequence=function(e,t){var n,i,o;return e=null!==(n=e)&&void 0!==n?n:"sequence",t=null!==(i=t)&&void 0!==i?i:0,I()(o=this).call(o,(function(n,i){n[e]=10*(i+1)+t})),this},Array.prototype.getKey=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return T()(t=this).call(t,(function(t){return t[n]===e}))},String.prototype.hashCode=function(){for(var e=0,t=0;t<this.length;t++){e=(e<<5)-e+this.charCodeAt(t),e&=e}return e},z()(String.prototype,"format",{value:function(){var e=arguments;return this.replace(/\{(\d+)\}/g,(function(t,n){return e[n]}))},enumerable:!1}),function(e){e.fn.cellPos=function(t){var n=this.first(),i=n.data("cellPos");i&&!t||function(t){var n=[];t.children("tr").each((function(t,i){e(i).children("td, th").each((function(i,o){var a,l,r=e(o),c=0|r.attr("colspan"),s=0|r.attr("rowspan");for(c=c||1,s=s||1;n[t]&&n[t][i];++i);for(a=i;a<i+c;++a)for(l=t;l<t+s;++l)n[l]||(n[l]=[]),n[l][a]=!0;var d={top:t,left:i};r.data("cellPos",d)}))}))}(n.closest("table, thead, tbody, tfoot"));return i=n.data("cellPos")}}(jQuery),window.storage=(_=window,{getItem:function(e,t,n){var i=JSON.parse(_[e+"Storage"].getItem(t));return null===i?null:angular.isObject(i)&&i.timestamp?n&&P()()>(i.timestamp||0)+36e5*S()(n)?(this.removeItem(e,t),null):i.data:(this.removeItem(e,t),null)},setItem:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"number"!=typeof i&&(i=0);try{_[e+"Storage"].setItem(t,C()({timestamp:P()(),data:n}))}catch(o){if(i++>2)return this;this.clear(e),this.setItem(e,t,n,i)}return this},removeItem:function(e,t){return _[e+"Storage"].removeItem(t),this},clear:function(e){return _[e+"Storage"].clear(),this}});var Q=function(e){return e&&e.then?e.then((function(){var e;return B()(e=[null]).call(e,K()(Array.prototype).call(arguments))})).catch((function(e){return[e,null]})):new O.a((function(e,t){t(new Error("requires promises as the param"))})).catch((function(e){return[e,null]}))};function Z(e,t){var n;return function(){var i=this,o=arguments;n&&clearTimeout(n);var a=!n;n=x()((function(){n=null}),t),a&&e.apply(i,o)}}var ee={hash_key:function(e){var t,n;return window.md5(C()({cache_company_id:null==e||null===(t=e.company)||void 0===t?void 0:t.id,cache_user_id:null==e||null===(n=e.user)||void 0===n?void 0:n.id,key:"lastCall"}))},save:function(e,t){return window.storage.setItem("local",ee.hash_key(e),t)},get:function(e){return window.storage.getItem("local",ee.hash_key(e))},remove:function(e){return window.storage.removeItem("local",ee.hash_key(e))}},te=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},ne=function(e){var t,n;return e=null!==(t=e)&&void 0!==t?t:4,K()(n=Math.random().toString(36)).call(n,0-e)},ie=null;function oe(e,t){var n,i,o;if(ie||(ie={}),void 0!==ie[B()(n="accMul_".concat(e,"_")).call(n,t)])return ie[B()(o="accMul_".concat(e,"_")).call(o,t)];var a=0,l=e.toString(),r=t.toString();try{a+=l.split(".")[1].length}catch(e){}try{a+=r.split(".")[1].length}catch(e){}var c=Number(l.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,a);return ie[B()(i="accMul_".concat(e,"_")).call(i,t)]=c,c}function ae(e,t){var n,i,o,a,l,r;if(ie||(ie={}),void 0!==ie[B()(n="accSub_".concat(e,"_")).call(n,t)])return ie[B()(o="accSub_".concat(e,"_")).call(o,t)];if(y()(e)&&y()(t))return e-t;try{l=e.toString().split(".")[1].length}catch(e){l=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}a=Math.pow(10,Math.max(l,r));var c=(F()(e*a)-F()(t*a))/a;return ie[B()(i="accSub_".concat(e,"_")).call(i,t)]=c,c}function le(e,t,n){var i,o=1;e=e?e.toString():"0",n=n?n.toString():"0";var a=e.split(".")[1]&&e.split(".")[1].length||0,l=n.split(".")[1]&&n.split(".")[1].length||0;i=a>l?a:l;for(var r=0;r<i;r++)o*=10;switch(e=+e*o,n=+n*o,t){case"-":return(e-n)/o;case"+":return(e+n)/o;case"*":return e*n/o/o;case"/":if(n)return e/n;throw Error("输入有误，0不能作为除数");default:throw Error("运算符错误 请输入+-*/")}}function re(e){var t=$('<a style="display: none"></a>').attr("href",e).appendTo("body");t[0].click(),t.remove()}var ce=function e(t,n){for(var i in t){var o,a;if("object"===v()(t[i]))t[i]=e(t[i],n);else if(V()(o=h()(a=t[i].toString()).call(a)).call(o,"=")){var l,r=h()(l=t[i].replace("=","")).call(l);t[i]=n[r]}else for(var c in n)t[i]==c&&(t[i]=n[c])}return t},se={100:"ff",99:"fc",98:"fa",97:"f7",96:"f5",95:"f2",94:"f0",93:"ed",92:"eb",91:"e8",90:"e6",89:"e3",88:"e0",87:"de",86:"db",85:"d9",84:"d6",83:"d4",82:"d1",81:"cf",80:"cc",79:"c9",78:"c7",77:"c4",76:"c2",75:"bf",74:"bd",73:"ba",72:"b8",71:"b5",70:"b3",69:"b0",68:"ad",67:"ab",66:"a8",65:"a6",64:"a3",63:"a1",62:"9e",61:"9c",60:"99",59:"96",58:"94",57:"91",56:"8f",55:"8c",54:"8a",53:"87",52:"85",51:"82",50:"80",49:"7d",48:"7a",47:"78",46:"75",45:"73",44:"70",43:"6e",42:"6b",41:"69",40:"66",39:"63",38:"61",37:"5e",36:"5c",35:"59",34:"57",33:"54",32:"52",31:"4f",30:"4d",29:"4a",28:"47",27:"45",26:"42",25:"40",24:"3d",23:"3b",22:"38",21:"36",20:"33",19:"30",18:"2e",17:"2b",16:"29",15:"26",14:"24",13:"21",12:"1f",11:"1c",10:"1a",9:"17",8:"14",7:"12",6:"0f",5:"0d",4:"0a",3:"08",2:"05",1:"03",0:"00"};function de(e){var t=e;if(/^(rgba|RGBA)/.test(t)){for(var n=t.replace(/(?:\(|\)|rgba|RGBA)*/g,"").split(","),i=n.pop(),o=isNaN(i)?"":se[F()(100*Number(i))],a="#",l=0;l<n.length;l++){var r=Number(n[l]).toString(16);r.length<2&&(r="0"+r),a+=r}return 9!==(a+=o).length&&(a=t),a}if(/^(rgb|RGB)/.test(t)){for(var c=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),s="#",d=0;d<c.length;d++){var u=Number(c[d]).toString(16);u.length<2&&(u="0"+u),s+=u}return s}return t}var ue=function(e){return new O.a((function(t,n){var i=document.createElement("script");i.src=e;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o),i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||t()}}))};function _e(e){var t=e.toString();return"[object AsyncFunction]"===Object.prototype.toString.call(e)||m()(t).call(t,"return _regenerator.default.async(function")}var pe=function(e,t){var n,i=K()(n=e.colorRgb()).call(n,4,-1).split(","),o=+i[0],a=+i[1],l=+i[2],r=(o+(255-o)*t).toFixed(0),c=(a+(255-a)*t).toFixed(0),s=(l+(255-l)*t).toFixed(0),d="#",u=function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t};return d+=u(r),d+=u(c),d+=u(s)},me=function(){},fe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame?function(e,t,n){var i=(new Date).getTime(),o=requestAnimationFrame((function o(){if((new Date).getTime()-i>=t)return e(),void n(me);var a=requestAnimationFrame(o);n((function(){return cancelAnimationFrame(a)}))}));n((function(){return cancelAnimationFrame(o)}))}:function(e,t,n){var i=x()(e,t);n((function(){return clearTimeout(i)}))},he=function(e,t,n){return"#"+ge(e)+ge(t)+ge(n)},ge=function(e){var t=Math.round(e).toString(16);return 1==t.length?"0"+t:t},ve=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{$red:F()(t[1],16),$green:F()(t[2],16),$blue:F()(t[3],16)}:null},be=function(e,t){var n=ve(e),i=n.$red,o=n.$green,a=n.$blue;return he(i+(255-i)*t,o+(255-o)*t,a+(255-a)*t)}},xMnI:function(e,t){e.exports='<div ng-init="init()" style="height: 100%">\n    <hc-search-list options="searchOptions" ng-if="isLoaded" org="params.org_id"></hc-search-list>\n</div>'},xRFr:function(e,t){e.exports='<div class="hc-dashboard-axis">\n    <div class="axis-item-box" ng-sortable="sortable_config">\n        <div class="axis-item" ng-repeat="item in model track by $index">\n            <span class="edit" ng-click="operate_field($event,\'edit\',item,$index)">{{item.label||item.name}}</span>\n            <span class="delete icon icon-hcm-delete"\n                  ng-click="operate_field($event,\'delete\',item,$index)"></span>\n        </div>\n    </div>\n    <div class="add" ng-if="!model||(model.length<options.length)" ng-click="operate_field($event,\'add\')">\n        增加<span class="icon icon-hcm-add"></span></div>\n</div>\n'},xWhK:function(e,t){e.exports='<div class="hc-form-input-label">{{hcLabel}}</div>\n<div class="hc-form-input-content" ng-class="{\'focus\':isFocus}">\n</div>\n'},xm0b:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("TeQF"),n("GKVU");var i=n("526F"),o=n.n(i),a=n("5PDf"),l=n.n(a),r=n("mrSG"),c=function(){function e(e,t,n,i,o,a,l){this.client=window.client,this.panelFlag=!1,this.dialogParams={},this.resolve=!1,this.scope=e,this.element=t,this.filter=n,this.hcDialog=i,this.componentDefaultService=o,this.options=a,this.panel=l}return e.prototype.$onInit=function(){},e.prototype.init=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t=this;return Object(r.e)(this,(function(n){switch(n.label){case 0:return[4,this.initValue(e)];case 1:return n.sent(),this.initPanelDialog(),this.scope.$watch("model",(function(e,n){var i,o;e!==n&&t.check_valid(e)&&(null===(o=null===(i=t.options)||void 0===i?void 0:i.change)||void 0===o||o.call(i,e,n))})),[2]}}))}))},e.prototype.check_valid=function(e){return!0},e.prototype.initValue=function(e){return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(n){var i;switch(n.label){case 0:return[4,this.componentDefaultService.setComponentDefault(this.scope.model,e,this.options)];case 1:return t=n.sent(),l()(i=this).call(i,"isValidValue")(t)&&(this.scope.model=t),[2]}}))}))},e.prototype.initDialogParams=function(){},e.prototype.initPanelDialog=function(){this.initDialogParams(),this.panelInstance=this.hcDialog.getDialog(o()(this.panel,this.options.dialogOptions||{})).anchor(this.element).params(this.dialogParams),"mobile"===this.client&&this.panelInstance.slideInConfig({from:"",fade:""})},e.prototype.modifyPanelWidth=function(){var e=this.element.outerWidth(),t=this.scope.options.styles||{},n=Object(r.a)({width:e},t);this.panelInstance.styles(n)},e.prototype.onMouseDown=function(e){null==e||e.stopPropagation(),this.options.inputLock&&(null==e||e.preventDefault()),this.openPanel()},e.prototype.beforeOpenPanel=function(){},e.prototype.openPanel=function(){var e,t=this;this.options&&l()(e=this).call(e,"valueToFunc")(this.options.readOnly)()||(this.modifyPanelWidth(),this.panelFlag=!0,this.beforeOpenPanel(),this.panelInstance.show(this.dialogParams).then((function(e){t.scope.model=t.selectorMapper(e),t.panelFlag=!1,t.resolve=!0}),(function(){t.panelFlag=!1,t.resolve=!1})))},e.prototype.selectorMapper=function(e){return e},e.prototype.onBlur=function(e){},e.prototype.onKeyup=function(e){},e}()},xnFK:function(e,t){e.exports='<div class="toast-container">\n    <div class="toast-icon {{ $ctrl.scope.icon_name }}" ng-show="$ctrl.scope.icon_name"></div>\n    <div class="toast-content">\n        <span>{{ $ctrl.scope.content }}</span>\n    </div>\n</div>\n'},"xqd/":function(e,t){e.exports='<div class="hc-view-custom-field">\n    <div class="field-container" ng-if="$ctrl.options.action.type === \'img\'">\n        <img class="text logo background" ng-if="$ctrl.options&&$ctrl.options.params&&$ctrl.options.params.url" alt="未获取到图片数据" ng-src="{{$ctrl.model|hcImage:\'136,76\':\'\':\'\':\'\':$ctrl.options.params.url}}" />\n        <img class="text logo background"ng-if="!$ctrl.options.params&&!$ctrl.options.params.url" alt="未获取到图片数据" ng-src="{{$ctrl.model|hcImage:\'136,76\'}}" />\n        <span class="tip" ng-if="($ctrl.options||{}).tip">\n            <span class="tip-detail">{{$ctrl.options.tip}}</span>\n        </span>\n        <span class="operates">\n            <span class="operate" ng-if="($ctrl.options.action.show_del | valueToFunc)($ctrl.formData)" ng-click="$ctrl.options.action.del($ctrl.formData, $ctrl.field)">\n                删除\n            </span>\n            <span class="operate" img-resize-upload l-width="$ctrl.options.action.lWidth"\n                l-quality="$ctrl.options.action.lQuality" callback="$ctrl.uploadCallBack" ng-model="pic">\n                {{$ctrl.options.action.label}}\n            </span>\n        </span>\n    </div>\n\n    <div class="field-container" ng-if="$ctrl.options.action.type !== \'img\'">\n        <span class="text" id="forWrap" ng-click="$ctrl.field.func($ctrl.formData, $ctrl.field, $event)"\n            ng-bind-html="$ctrl.getFieldContent($ctrl.field)|securityFilter|toTrusted"></span>\n        <span class="tip" ng-if="($ctrl.options||{}).tip">\n            <span class="tip-detail">{{$ctrl.options.tip}}</span>\n        </span>\n        <span class="operates">\n            <span class="operate" ng-click="$ctrl.options.action.func($ctrl.formData, $ctrl.field)">\n                {{$ctrl.options.action.label}}\n            </span>\n        </span>\n    </div>\n</div>\n'},xscb:function(e,t){e.exports='<div class="date-picker-widget" ng-init="$ctrl.init()">\n    <datetimepicker data-ng-model="model"\n                    data-datetimepicker-config="$ctrl.pickerConfig"\n                    data-on-set-time="$ctrl.setDate(newDate, oldDate)"></datetimepicker>\n</div>'},xwIL:function(e,t){e.exports='<div class="hc-list-tag {{model.style}}" ng-init="init()">\n    <div class="tree-search-toolbar">\n        <input type="search" ng-model="search.keyword" ng-keypress="$search_key_press($event)" class="tree-search"\n            ng-change="$delete(keyword)">\n        <span ng-click="$search_click($event)" class="search-icon icon-hcm-check"></span>\n        <div class="search-content" ng-show="show_search">\n            <div class="search-details">\n                <div ng-repeat="v in search_data" class="search-text" ng-bind-html="v.full_name" ng-click="scrollTo(v)">\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="list-content" ng-if="data && data.length">\n        <div ng-repeat="row_ in data"  ng-if="tagRowShow(row_)">\n            <div class="classify">\n                <div class="classify-text"></span>{{row_.name}}</div>\n            </div>\n            <div class="tag_list">\n                <div class="tag_content border-gray" ng-if="row_.list" ng-repeat="tag in row_.list"\n                    ng-class="selectedItems.indexOf(tag.id)>-1? \'seleted\': \'\'" ng-on-click="selectTag(tag)">\n                    <div class="tag_name">{{tag.name}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!data">\n        <hc-list-no-data caption="没有设置任何附加数据源"></hc-list-no-data>\n    </div>\n</div>'},"y+IN":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("oVuX"),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("sMBO"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("FLGM"),_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2__),_app__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("CoJ3"),_utils_super_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8Auy");_app__WEBPACK_IMPORTED_MODULE_3__.a.directive("hcInputSelector",(function(){return{restrict:"EA",template:'<div class="component-container" ng-click="select()"><div class="component-input-inner">{{modelText||"&nbsp;"}}<div ng-show="!options.readOnly" class="input-icon icon-hcm-check"></div></div></div>',scope:{options:"=",model:"=ngModel"},compile:function compile(element){return function postLink(scope){scope.modelText=scope.model,(scope.options||{}).readOnly||(scope.select=function(){scope.$root.$broadcast("employee-select-event",{single_select:scope.options.single_select,show_group:scope.options.show_group,pre_selected:[scope.model],callback:function callback(data){var _context;(scope.options.callback&&angular.isString(scope.options.callback)&&(scope.options.callback=eval(scope.options.callback)),scope.options.callback&&scope.options.callback(data.data,scope.model),scope.model=data.data,data.data instanceof Array)?scope.modelText=_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_2___default()(_context=data.data).call(_context,(function(e){return e.name})).join(","):data.data&&(scope.modelText=data.data.name)}})})}}}}))},"y/Cr":function(e,t,n){"use strict";n("sMBO"),n("TWNs"),n("rB9j"),n("JfAA"),n("Rm1S"),n("hByQ");var i=n("TEMH"),o=n.n(i),a=n("/FZm"),l=n.n(a),r=n("FLGM"),c=n.n(r),s=n("STz3"),d=n.n(s),u=n("KYsz"),_=n.n(u),p=n("+oHS"),m=n.n(p),f=n("mnMc"),h=n.n(f),g=n("RXMP"),v=n.n(g),b=n("5PDf"),y=n.n(b),w=n("526F"),x=n.n(w),k=n("lHQ6"),$=n.n(k),O=n("mrSG"),D=n("+hqv"),C=n("bQov"),M=n("TWJ7"),S=n("gxpU");window.app.controller("BaseCategoryListController",["$controller","templateService","BaseCRUDService","$rootScope","$scope","$hcDialog","CRUDService","InfoDialog","$hcListBtn","$hcPaging","$state","$q","$timeout","$filter","dataService",function(e,t,n,i,a,r,s,u,p,f,g,b,w,k,E){var P=this;a.params=a.params||{},a.client=window.client,a.category_id=a.$dialog?k("isValidValue")(a.params.category_id)?a.params.category_id:null:k("isValidValue")(g.params.category_id)?$()(g.params.category_id,10):null,a.category_field=a.$dialog?a.params.category_field:g.params.category_field||a.params.category_field,e(D.a,{$scope:a,CRUDService:s,InfoDialog:u}),a.refreshCategoryList=!1,a.categoryAfterEdit=!1,a.delete_category_field=!0,a.search={navKeyword:""},a.setDefault=function(){},a.fetchCategoryBefore=function(){return Object(O.c)(P,void 0,void 0,(function(){var e,t,n,i,o,l,r;return Object(O.e)(this,(function(c){switch(c.label){case 0:return a.model_meta?(a.category_field=null!==(n=a.category_field)&&void 0!==n?n:null===(i=a.model_meta.list_config)||void 0===i?void 0:i.category_field,a.category_field?(a.setDefault(),[4,a.getCategoryMeta()]):[2]):[2];case 1:return c.sent(),e=new S.a(null===(o=a.list_config)||void 0===o?void 0:o.category),a.params=x()(a.params,e),a.showCategorySearch=!a.params.disableSearch,a.fetched_category_meta?[3,3]:((null==(t=null===(r=null===(l=a.model_category_meta)||void 0===l?void 0:l.fields)||void 0===r?void 0:y()(r).call(r,(function(e){return e.key===a.category_field})))?void 0:t.length)>0&&(a.category_meta=t[0]),[4,a.fetchCategory()]);case 2:c.sent(),c.label=3;case 3:return[4,a.setCurrentCategory()];case 4:return c.sent(),a.refreshCategoryList||(a.fetched_category_meta=!0),[2]}}))}))},a.getCategoryMeta=function(){return Object(O.c)(P,void 0,void 0,(function(){var e;return Object(O.e)(this,(function(t){switch(t.label){case 0:return e=a,[4,s.getBizMeta("model")];case 1:return e.model_category_meta=t.sent(),[2]}}))}))},a.getRequireFunc=function(){return[a.initList()]},a.getCategoryCount=function(){return s.getItemCount("id",null,[a.category_field],null,null,null,a.getFilterStr(),a.getAllFilterDict(a.delete_category_field),null,999,angular.extend(a.getExtraProperty(),{only_list:!0})).then((function(e){a.parseCategoryCount(e)}))},a.parseCategoryCount=function(e){var t,n,i,o,l=k("toObj")(e.list,a.category_field);(v()(t=a.category_list).call(t,(function(e){var t;e.count=(null===(t=l[e.id])||void 0===t?void 0:t.id)||0;try{var n;if(e.children)v()(n=e.children).call(n,(function(t){var n,i,o;t.children&&v()(o=t.children).call(o,(function(n){var i,o,a;n.count=(null===(a=null===(o=null===(i=l[e.id])||void 0===i?void 0:i.children[t.id])||void 0===o?void 0:o.children[n.id])||void 0===a?void 0:a.id)||0}));t.count=(null===(i=null===(n=l[e.id])||void 0===n?void 0:n.children[t.id])||void 0===i?void 0:i.id)||0}))}catch(e){console.log(e)}})),h()(n=m()(l)).call(n,"null"))&&(y()(o=a.category_list).call(o,(function(e){return-99999===e.id})).length?a.category_list[a.category_list.length-1].count=l.null.id:a.category_list.push({id:-99999,name:(null===(i=a.params)||void 0===i?void 0:i.unclassified_label)||"未知",count:l.null.id}))},a.getCategoryCountFilterDict=function(){},a.setCurrentCategory=function(){return Object(O.c)(P,void 0,void 0,(function(){var e,t,n,i,o,r;return Object(O.e)(this,(function(s){var u,p,f,h,g;switch(s.label){case 0:return a.category_field?a.params.disableCount?[3,2]:[4,a.getCategoryCount()]:[2];case 1:s.sent(),s.label=2;case 2:var v,b,w,x;if(a.all_count=_()(u=d()(y()(p=a.category_list).call(p,(function(e){return null!==e.id})))).call(u,(function(e,t){return e+$()(t.count,10)||0}),0),c()(f=a.category_list).call(f,(function(e,t){a.category_list[t].count=a.category_list[t].count||0,null===e.id&&0===t&&(a.category_list[t].count=a.all_count)})),e={id:null,name:k("translate")("categoryAll")||"全部",count:a.all_count},a.tabPanes&&!a.refreshCategoryList&&!a.categoryAfterEdit&&l()(h=a.category_list).call(h,(function(e){return null===e.id}))||(a.categoryAfterEdit&&(a.categoryAfterEdit=!1),a.category_list=a.params.disableTotal?a.category_list:null!==(null===(i=a.category_list[0])||void 0===i?void 0:i.id)?Object(O.h)([e],a.category_list):Object(O.h)(a.category_list)),a.tabPanes=a.category_list,a.params.hide)a.tabPanes=y()(v=a.category_list).call(v,(function(e){return!k("valueToFunc")(a.params.hide)(e)})),a.all_count=_()(b=d()(y()(w=a.tabPanes).call(w,(function(e){return null!==e.id})))).call(b,(function(e,t){return e+$()(t.count,10)||0}),0),c()(x=a.tabPanes).call(x,(function(e,t){null===e.id&&0===t&&(a.tabPanes[t].count=a.all_count)}));return(t={tabs:function(){a.onTabsValueChange=function(e){a.changeCategory(e)}},nav:function(){}})[a.category_type]?(t[a.category_type](),a.category_id=null!==(o=a.category_id)&&void 0!==o?o:null===(r=("tabs"===a.category_type?a.tabPanes:a.category_list)[0])||void 0===r?void 0:r.id):a.show_warning("元数据错误：list_config.category_type 的值应为 "+m()(t)+" 中之一, 当前为"+a.category_type,null,1e4),a.tabPanes.length>3&&(a.multi_level=!0),n=y()(g=a.tabPanes).call(g,(function(e){var t;return(null===(t=e.children)||void 0===t?void 0:l()(t).call(t,(function(e){var t;return(null===(t=e.children)||void 0===t?void 0:l()(t).call(t,(function(e){return e.id===a.category_id})))||e.id===a.category_id})))||e.id===a.category_id})),a.tabPanes.length>0&&n.length<1&&a.changeCategory(void 0),[2]}}))}))},a.fetchCategory=function(){return Object(O.c)(P,void 0,void 0,(function(){var e,t,i,o,l,s,d,u,_,p;return Object(O.e)(this,(function(m){var f;switch(m.label){case 0:return e=a.category_list,a.showCategoryEdit=a.getCategoryEdit(),a.params.categorySelector?[4,a.params.categorySelector()]:[3,2];case 1:return i=m.sent(),e=i.list,[3,9];case 2:return(null===(o=a.params)||void 0===o?void 0:o.category_selector_api)?(t=((null===(l=a.params)||void 0===l?void 0:l.category_selector_params)?k("valueToFunc")(a.params.category_selector_params)(g.params):null===(s=a.params)||void 0===s?void 0:s.category_selector_params)||{},[4,E.callHcmOpenApi(a.params.category_selector_api,t)]):[3,4];case 3:return i=m.sent(),e=angular.isArray(i)?i:i.list||i.result.list,[3,9];case 4:return(null===(d=a.category_meta)||void 0===d?void 0:d.object)?[4,n.getModelService(a.category_meta.object).getItemList(null,Object(O.a)({enabled:!0},k("valueToFunc")(a.params.category_filter_dict)()||{}),null,1e3,{state:(a.params.category_state||a.getMetaState()||"")+"_category",sorts:a.params.category_sorts||[]})]:[3,6];case 5:return i=m.sent(),e=i.list,[3,9];case 6:return(null===(u=a.category_meta)||void 0===u?void 0:u.refer)?[4,n.getModelService(a.category_meta.refer).getItemList(null,k("valueToFunc")(a.params.category_filter_dict)()||{},null,1e3,{state:(a.params.category_state||a.getMetaState()||"")+"_category",sorts:a.params.category_sorts||[]})]:[3,8];case 7:return i=m.sent(),e=c()(f=i.list).call(f,(function(e){return{id:e.name,name:e.name}})),[3,9];case 8:var h;if(null===(_=a.category_meta)||void 0===_?void 0:_.mask)e=c()(h=a.category_meta.mask).call(h,(function(e){return{id:e.key,name:e.name}}));else(null===(p=a.list_config)||void 0===p?void 0:p.category_list)?e=a.list_config.category_list:a.category_field&&r.notify("Category Field不具备展开条件","warning");m.label=9;case 9:return a.category_list=e,[2,a.category_list]}}))}))},a.categoryEdit=function(){return Object(O.c)(P,void 0,void 0,(function(){var e;return Object(O.e)(this,(function(t){switch(t.label){case 0:return[4,r.getDialog(Object(C.a)((null===(e=null==a?void 0:a.category_meta)||void 0===e?void 0:e.object)||a.category_meta.refer,a.params.category_edit_state,a.params.template_include_filter)).params({filter_dict:k("valueToFunc")(a.params.category_edit_filter)()}).show()];case 1:return t.sent(),a.categoryAfterEdit=!0,[4,a.fetchCategory()];case 2:return t.sent(),[4,a.setCurrentCategory()];case 3:return t.sent(),[2]}}))}))},a.changeCategory=function(e){return Object(O.c)(P,void 0,void 0,(function(){var t,n;return Object(O.e)(this,(function(i){var l;switch(i.label){case 0:return e===a.category_id?[3,3]:(a.filter_str="",a.category_id=e,a.paging.current_page=1,"mobile"!==a.client?[3,2]:[4,a.fetchData()]);case 1:i.sent(),i.label=2;case 2:t=o()(l=a.tabPanes).call(l,(function(t){return t.id===e})),null==(n=angular.element(".hcm-nav-item")[t])||n.scrollIntoView({behavior:"smooth",block:"center"}),i.label=3;case 3:return[2]}}))}))},a.getAllFilterDict=function(e){var t,n,i,o=a.advance_query_enabled&&(a.advance_query||{}).$getFilterDict?angular.extend(a.getFilterDict()||{},(angular.copy(a.advance_query)||{}).$getFilterDict()||{}):angular.extend(a.getFilterDict()||{},null===(t=a.list_filter_model)||void 0===t?void 0:t.$getFilters());return k("isValidValue")(a.category_id)&&(o[(null===(n=a.category_meta)||void 0===n?void 0:n.key)||a.category_field]=a.category_id),e&&a.category_field in o?delete o[a.category_field]:-99999===o[a.category_field]&&(o[a.category_field]=null),Object(O.a)(Object(O.a)({},a.transFilterDict(angular.copy(o))),null===(i=a.getExtraFilterDict)||void 0===i?void 0:i.call(a,a.getEnvironmentParams(),o))},a.getInitData=function(){var e={};return a.category_id&&-99999!==a.category_id&&(e[a.category_meta.key]=a.category_id),e},a.showMenu=function(){r.getDialog(M.a).params({category_list:a.tabPanes,category_id:a.category_id}).size("full").show().then((function(e){e&&(a.category_id=e.id,a.filter_str="",a.paging.current_page=1,a.fetchData())}))},a.navSearch=function(e,t){var n,i,o;e=e||a.category_list,t=t||a.search.navKeyword;var l=new RegExp(t,"g"),r=[];try{for(var c=Object(O.i)(e),s=c.next();!s.done;s=c.next()){var d=s.value;(null===(o=d.name)||void 0===o?void 0:o.match(l))&&null!==d.id&&r.push(d)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return r},a.$watch("search.navKeyword",(function(e){""===e&&(a.tabPanes=a.category_list),e&&(a.tabPanes=a.navSearch(a.category_list,e))})),a.getCategoryEdit=function(){var e,t;return!a.params.disableEdit&&((null===(e=a.category_meta)||void 0===e?void 0:e.object)||(null===(t=a.category_meta)||void 0===t?void 0:t.refer))}}]),t.a="BaseCategoryListController"},yATM:function(e,t,n){"use strict";n("oVuX"),n("qePV"),n("07d7"),n("rB9j"),n("JfAA"),n("UxlC"),n("EnZy");var i=n("WxoT"),o=n.n(i),a=n("+oHS"),l=n.n(a),r=n("5PDf"),c=n.n(r),s=n("FLGM"),d=n.n(s),u=n("mnMc"),_=n.n(u),p=n("UtpJ"),m=n.n(p),f=n("ZbhI"),h=n.n(f),g=n("RXMP"),v=n.n(g),b={load:function(e){if(e&&""!==e){var t,n={};return v()(t=e.split(";")).call(t,(function(e){var t,i=e.split(":"),o=h()(e).call(e,":");n[m()(e).call(e,0,o)]=_()(t=i[1]).call(t,"@")?Number(m()(e).call(e,o+1).replace("@","")):JSON.parse(m()(e).call(e,o+1))})),n}return{}},dump:function(e){var t,n;return e?d()(t=c()(n=l()(e)).call(n,(function(t){return null!=e[t]}))).call(t,(function(t){return t+":"+("number"==typeof e[t]?"@"+e[t].toString():o()(e[t]))})).join(";"):""}};t.a=b},yD0l:function(e,t){e.exports='<div class="common-selector-dialog">\n    <div class="selector-search-box">\n        <input placeholder="请输入关键字进行搜索..." type="search" autocapitalize="off"\n               autocorrect="off"\n               autocomplete="off"\n               spellcheck="false"\n               ng-model="search_key.key"\n               ng-model-options="{\'debounce\':500}"\n        >\n    </div>\n    <div class="selector-content">\n        <div class="search-result">\n            <div>\n                <div class="list-common-item tg" ng-repeat="_e in result track by $index"\n                     ng-click="select(_e)">\n                    {{_e.name}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},yDEG:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return I}));n("07d7"),n("rB9j"),n("JfAA"),n("EnZy");var i=n("/FZm"),o=n.n(i),a=n("Kwsy"),l=n.n(a),r=n("eLKs"),c=n.n(r),s=n("6UaR"),d=n.n(s),u=n("ZbhI"),_=n.n(u),p=n("QkVN"),m=n.n(p),f=n("mrSG"),h=(n("EHOH"),n("z/LF")),g=n.n(h),v=n("bQov"),b=(n("pNMO"),n("4Brf"),n("5PDf")),y=n.n(b),w=n("FLGM"),x=n.n(w),k=n("o+MX"),$=n.n(k),O=n("d+iT"),D=n("1hbj"),C=n("UAnq"),M=n.n(C);window.app.controller("CommonCategoryTreeListDialogCtrl",["$scope","$controller","BaseCRUDService","$filter",function(e,t,n,i){var o=n.getModelService(e.$dialog.options.model_name);t(O.a,{$scope:e,CRUDService:o,InfoDialog:Object(D.a)(e.$dialog.options.model_name,e.$dialog.options.meta_state)}),e.$dialog.close=function(){e.is_data_changed&&e.$dialog.resolve_data(),e.$dialog.dialog_close()},e.selector_flag=!0,e.metaLoaded=function(t){e.$dialog.title(i("valueToFunc")(e.metaParse(t.description))()||t.model)},e.$watch("list_btn_model.actions",(function(){var t,n,i,o,a;(null===(t=e.list_btn_model)||void 0===t||null===(n=t.actions)||void 0===n?void 0:n.length)&&e.$dialog.operates($()(i=x()(o=e.list_btn_model.actions).call(o,(function(t){return{dynamic:!0,label:t.label,func:function(){return e.parseAction(t)},after_func:t.after_func,disabled:t.disabled||function(){return"MULTI_ITEM"===t.condition?!e.list_model.selected_items||0===e.list_model.selected_items.length:"ITEM"===t.condition&&(!e.list_model.selected_items||1!==e.list_model.selected_items.length)},condition:t.condition,default:t.is_important,left:t.left||!1,hide:t.hide,confirm:t.confirm,is_important:t.is_important,confirm_tip:t.confirm_tip,target:t.target,key:t.key,options:t.options}}))).call(i,y()(a=e.$dialog.options.operates).call(a,(function(e){return!e.dynamic}))))})),e.meta_state=e.$dialog.options.meta_state,e.getQueryStr=function(){return e.params.query_str},e.getInitData=function(){return e.params.init_data},e.getFilterDict=function(){return angular.copy(e.params.filter_dict||{})},e.individualParse=function(e){return e.list_config.category_type="tabs",e}}]);var S=function(e,t){return{controller:"CommonCategoryTreeListDialogCtrl",template:M.a,model_name:e,meta_state:t}},E=n("gu9h"),P=n("8Auy"),j=n("vT+i"),T=function(){function e(e,t,n){var i=this;this.hcDialog=e,this.dataService=t,this.$rootScope=n,this.action_service=Object(j.a)("$commonAction").createCommonAction(this),this.auth=Object(j.a)("contextService").getContext("auth"),this.getExprContext=function(e){var t=i;return{ENV:function(){return angular.extend(t.getEnvironmentParams(),{})},SELECT_ITEM:function(){return e},AUTH:function(){return t.auth}}},this.funcParse=function(e){}}return e.prototype.$onInit=function(){var e;return Object(f.c)(this,void 0,void 0,(function(){return Object(f.e)(this,(function(t){return null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key,this),[2]}))}))},e.prototype.$onResize=function(){},e.prototype.$convertOptions=function(){return Object(f.c)(this,void 0,void 0,(function(){return Object(f.e)(this,(function(e){switch(e.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.template.json.convert",{json_:this.options,context:this.context})];case 1:return[2,e.sent()]}}))}))},e.prototype.$onRender=function(e){return void 0===e&&(e=!1),Object(f.c)(this,void 0,void 0,(function(){return Object(f.e)(this,(function(e){return[2]}))}))},e.prototype.checkContext=function(){return Object(f.c)(this,void 0,void 0,(function(){var e,t,n,i,o;return Object(f.e)(this,(function(a){if(this.options.require)try{for(e=Object(f.i)(this.options.require),t=e.next();!t.done;t=e.next()){var l;if(n=t.value,!this.context||!(n in this.context)||_()(l=[null,void 0]).call(l,this.context[n])>-1)return[2,!1]}}catch(e){i={error:e}}finally{try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}}return[2,!0]}))}))},e.prototype.getDrillDownParam=function(e){return angular.copy(this.context)},e.prototype.getEnvironmentParams=function(){return m()({},this.customEnvironmentParams||{})},e.prototype.parseAction=function(e,t,n,i){var o,a,l,r,s;return void 0===n&&(n={}),Object(f.c)(this,void 0,void 0,(function(){var u,_,p,m;return Object(f.e)(this,(function(h){var g;switch(h.label){case 0:return u=t||{},_=this,[4,this.action_service.canEnterAction(e,n,this.getExprContext(u))];case 1:return h.sent()?[4,this.action_service.validateAction(e,n,this.getExprContext(u))]:[2];case 2:return h.sent(),d()(e.action)?(e.key&&(n[e.key+"_action"]=e),[4,this.action_service.actionChain(e.action,n,{select_item:u},c()(g=this.parseAction).call(g,this))]):[3,4];case 3:return[2,h.sent()];case 4:return this.action_service.isCommonAction(e)?[2,this.action_service.execCommonAction(e,n,this.getExprContext(u))]:[4,_.action_service.exprParse(e.options,n,_.getExprContext.apply(_,[u]))];case 5:switch(p=h.sent(),e.action){case"model_list":return[3,6];case"go_state":return[3,7];case"custom_click":return[3,8];case"C_ACTION":return[3,9]}return[3,11];case 6:return m=e.is_tree||e.is_category?S:v.a,this.dialogInstance&&(null===(o=e.dialog_options)||void 0===o?void 0:o.reuse)&&(null===(a=this.dialogInstance)||void 0===a?void 0:a.isActive)?[2,this.dialogInstance.resetDialog(Object(f.a)(Object(f.a)({},m(e.model,e.state,!0,!0)),e.dialog_options))]:(this.dialogInstance=this.hcDialog.getDialog(Object(f.a)(Object(f.a)({},m(e.model,e.state,!0,!0)),e.dialog_options)),[2,this.dialogInstance.show({filter_dict:e.filter_dict,tree_id:e.tree_id})]);case 7:return this.$rootScope.super_go(e.state,e.params,{},e.is_new_page),[3,13];case 8:return[2,null===(l=this.funcParse(this.options.custom_click))||void 0===l?void 0:l(ev,_options)];case 9:return[4,null===(r=_[e.command])||void 0===r?void 0:r.call.apply(r,Object(f.h)([_],p.params||{}))];case 10:return[2,h.sent()];case 11:return e.func&&"string"==typeof e.func&&(e.func=P.a.jsonEval(e,{$CTRL:_,SCOPE:this})),[4,null===(s=e.func)||void 0===s?void 0:s.apply(_,[u,n,i])];case 12:return[2,h.sent()];case 13:return[2]}}))}))},e.prototype.drillImplement=function(e){return Object(f.c)(this,void 0,void 0,(function(){var t;return Object(f.e)(this,(function(n){switch(n.label){case 0:return[4,this.dataService.callHcmOpenApi("flex.template.calc",{template:this.options.drill,params:this.getDrillDownParam(e)})];case 1:return t=n.sent(),[4,this.parseAction(t,this.getDrillDownParam(e),{})];case 2:return n.sent(),[2]}}))}))},e.prototype.drillDown=function(e){var t,n;return Object(f.c)(this,void 0,void 0,(function(){var i,o;return Object(f.e)(this,(function(a){switch(a.label){case 0:return this.options.drill?(null===(t=this.options.chart)||void 0===t?void 0:t.hcmMap)?[3,2]:[4,this.drillImplement(e)]:[3,8];case 1:return[2,a.sent()];case 2:return-1!==this.options.drill.drill_level?[3,4]:[4,this.drillImplement(e)];case 3:return[2,a.sent()];case 4:return e.data?e.data.code?(i=e.data.code,o=e.data.level,this.options.filter_dict=Object(f.a)(Object(f.a)({},this.options.filter_dict||{}),{MAP_CODE:i}),o&&o===(null===(n=this.options.drill)||void 0===n?void 0:n.drill_level)?[4,this.drillImplement(e)]:[3,6]):(this.$rootScope.show_warning('该区域数据行政编码缺失（请检查"code"字段）'),[2]):(this.$rootScope.show_warning("该区域数据缺失（请检查数据源配置）"),[2]);case 5:return[2,a.sent()];case 6:return this.options.chart.hcmMap.id=i,this.$onRender(!0),[2];case 7:return[3,9];case 8:console.log(e),a.label=9;case 9:return[2]}}))}))},e.$inject=["$hcDialog","dataService","$rootScope"],e}();function A(e,t){return{title:"组件设置",controller:e,template:t||g.a,size:"middle"}}function I(e,t){return{bindings:{key:"<",options:"=",context:"=",convert:"=",contextKey:"=?"},require:{boardCtrl:"?^hcmBoard",portalCtrl:"?^hcPortalBoard"},controller:e,template:t}}var L=function(){function e(e,t,n,i,o,a,l,r){this.scope=e,this.element=t,this.compile=n,this.$filter=i,this.$rootScope=o,this.dataService=a,this.hcDialog=l,this.contextService=r,this.common_action_service=Object(j.a)("$commonAction").createCommonAction(this),this.contextKey=[]}return e.prototype.$onInit=function(){var e=this;this.client=window.client,this.auth=this.contextService.getContext("auth"),this.model.operates&&(this.operates=this.funcParse(this.model.operates)),this.initCompile(),this.scope.$watch("$ctrl.model",(function(t,n){t!==n&&e.initCompile()})),this.scope.$on("board_change",(function(t,n){return Object(f.c)(e,void 0,void 0,(function(){var e,i,o;return Object(f.e)(this,(function(a){return null==t||t.stopPropagation,e=n.key,i=n.context,null===(o=this.boardCtrl)||void 0===o||o.model.dealBoardRelations(e,i),[2]}))}))}))},e.prototype.funcParse=function(e){var t={SCOPE:this.scope,RootScope:this.$rootScope,location:window.location,history:window.history,document:document,dataService:this.dataService,$hcDialog:this.hcDialog,CONTEXT:this.context,ELEMENT:this.element,BOARD_MODEL:this.boardCtrl.model,MODEL:this.model,AUTH:this.auth,angular:angular};return P.a.jsonEval(e,t,{})},e.prototype.exprParse=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),Object(f.c)(this,void 0,void 0,(function(){var i,o;return Object(f.e)(this,(function(a){switch(a.label){case 0:return"function"==typeof e?[2,e]:(i=Object(f.a)(Object(f.a)({},E.b),t),[4,P.a.expressionEval(this.$filter("exprToArr")(e),i,n)]);case 1:return o=a.sent(),[2,this.$filter("arrToOriginObject")(o,e)]}}))}))},e.prototype.parseAction=function(e,t,n){var i,o,a,l;return void 0===n&&(n={}),Object(f.c)(this,void 0,void 0,(function(){var t;return Object(f.e)(this,(function(r){var s;switch(r.label){case 0:return[4,this.common_action_service.canEnterAction(e,n,this.getExprContext())];case 1:return r.sent()?[4,this.common_action_service.validateAction(e,n,this.getExprContext())]:[2];case 2:return r.sent(),d()(e.action)?(e.key&&(n[e.key+"_action"]=e,(t=null===(l=null===(a=null===(o=(i=e.key).split)||void 0===o?void 0:o.call(i,">"))||void 0===a?void 0:a.pop)||void 0===l?void 0:l.call(a))&&(n[t+"_action"]=e)),[4,this.common_action_service.actionChain(e.action,n,this.getExprContext(),c()(s=this.parseAction).call(s,this))]):[3,4];case 3:return[2,r.sent()];case 4:return this.common_action_service.isCommonAction(e)?[2,this.common_action_service.execCommonAction(e,n,this.getExprContext())]:[3,5];case 5:return e.func?"[object AsyncFunction]"!==Object.prototype.toString.call(e.func)?[3,7]:[4,e.func(n)]:[3,8];case 6:return[2,r.sent()];case 7:return[2,e.func(n)];case 8:return[2]}}))}))},e.prototype.getExprContext=function(){var e=this;return{ENV:function(){return angular.extend({},e.context)},AUTH:function(){return e.auth},COMPONENT_OPTIONS:function(){return e.model.options}}},e.prototype.initCompile=function(){var e=this;this.scope.$broadcast("clear_interval");var t='<div class="hc-board-component-title" ng-if="$ctrl.model.title || $ctrl.operates" style="'+("hc-board-data-container"===this.model.component&&"mobile"===this.client?"border-bottom:unset":"")+'">\n                        <div class="'+this.model.icon+' title-icon" ng-if="$ctrl.model.icon" style="color: '+this.model.iconColor+'" id='+this.model.key+'-icon></div>\n                        <div class="title-content">{{$ctrl.model.title | translate }}</div>\n                            <div class="tip icon-hcm-question" hc-title="{{$ctrl.model.description | translate }}"\n                              ng-if="$ctrl.model.description" options="{mode: \'tip\', seconds: 0, mobile: true}"></div>\n                            <div class="operates" ng-if="$ctrl.operates&&$ctrl.operates.length>0">\n                                <div ng-repeat="o in $ctrl.operates" class="operate" ng-click="$ctrl.parseAction(o)" ng-hide="(o.hide|valueToFunc)()"\n                                    hc-title="{{o.label}}" options="{mode: \'tip\', showOnOverflow: true}">\n                                    <span class="icon" ng-class="o.icon" ng-if="o.icon"></span>\n                                    <span class="label" ng-if="!o.icon">{{o.label}}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="loading-anime" ng-if="$ctrl.model.isRending">\n                              '+n("HKIH")+"\n                        </div>\n                        <"+this.model.component+'\n                            class="hc-board-component '+(this.model.title&&"hc-board-data-container"===this.model.component?"new-table-style":"")+"\"\n                            key=\"$ctrl.model.key\"\n                            options='$ctrl.model.options'\n                            model='$ctrl.model.options'\n                            convert='$ctrl.model.convert'\n                            context='$ctrl.context'\n                            context-key='$ctrl.contextKey'\n                            ng-class=\"{'has-title': $ctrl.model.title, 'visibility-hidden': $ctrl.model.isRending}\"\n                        ></"+this.model.component+">";if(this.element.html(t),this.compile(this.element.contents())(this.scope),this.model.scale&&1!==this.model.scale){var i=this.model.scale,a=1/i*100;l()((function(){var t,n,r,c;switch(e.model.component){case"hc-board-data-count":var s,d;null===(t=o()(s=e.element).call(s,".hc-count-component"))||void 0===t||t.css({transform:"scale("+i+", "+i+")","transform-origin-x":0,"transform-origin-y":0,width:a+"%",height:a+"%"}),o()(d=e.element).call(d,"hc-count .hc-count-component .name").css("width","unset");break;case"hc-board-data-chart":var u,_;null===(n=o()(u=e.element).call(u,".hc-board-data-chart-container div"))||void 0===n||n.css({transform:"scale("+i+", "+i+")","transform-origin-x":0,"transform-origin-y":0,width:a+"%",height:a+"%"}),o()(_=e.element).call(_,"hc-board-data-chart").css("cssText","overflow-y: hidden !important");break;case"hc-board-data-list":var p;null===(r=o()(p=e.element).call(p,".model-list-style"))||void 0===r||r.css({transform:"scale("+i+", "+i+")","transform-origin-x":0,"transform-origin-y":0,width:a+"%",height:a+"%"});break;case"count-sec":var m;null===(c=o()(m=e.element).call(m,".countSecBox"))||void 0===c||c.css({transform:"scale("+i+", "+i+")","transform-origin-x":0,"transform-origin-y":0,width:a+"%",height:a+"%"});break;case"hc-board-data-container":l()((function(){var t,n,l;null===(l=o()(t=e.element).call(t,".home-widget"))||void 0===l||l.css({transform:"scale("+i+", "+i+")","transform-origin-x":0,"transform-origin-y":0,width:a+"%",height:a+"%"}),o()(n=e.element).call(n,".hc-board-component").css("cssText","overflow-y: hidden !important")}),2e3)}}),2e3)}},e.$inject=["$scope","$element","$compile","$filter","$rootScope","dataService","$hcDialog","contextService"],e}();window.app.component("hcBoardComponent",{bindings:{model:"=",context:"=",contextKey:"=",boardState:"<"},require:{boardCtrl:"?^hcmBoard"},controller:L,template:"<div></div>"})},yJFs:function(e,t){e.exports='<div ng-init="$ctrl.$onInit()" class="refer-container">\n    <div ng-repeat="_r in $ctrl.refer_list.list" class=\'refer-item\' ng-class="$ctrl.isSelected(_r.id) ? \'seleted\': \'\'" ng-click="$ctrl.select(_r)">\n        <div >\n            {{_r.name}}\n        </div>\n    </div>\n</div>\n'},yM22:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return b}));n("rB9j"),n("EnZy");var i=n("j6J1"),o=n.n(i),a=n("FLGM"),l=n.n(a),r=n("UF4K"),c=n.n(r),s=n("nhkr"),d=n.n(s),u=n("KYsz"),_=n.n(u),p=n("6UaR"),m=n.n(p),f=n("mrSG");function h(e,t){if(e)return e=m()(e)?e:e.split("."),_()(e).call(e,(function(e,t){return e&&"object"===d()(e)&&t in e?e[t]:null}),t)}function g(e,t){var n,i;if(!t||!e)return!1;var o=m()(e)?e:e.split("."),a=t||{};try{for(var l=Object(f.i)(o),r=l.next();!r.done;r=l.next()){var c=r.value;if(!a)return!1;if(!(c in a))return!1;a=a[c]}}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return!0}function v(e,t,n){for(var i=m()(e)?e:e.split("."),o=t=t||{},a=0;a<i.length-1;a++)i[a]in o&&null!==o[i[a]]||(o[i[a]]={}),o=o[i[a]];return o[i[i.length-1]]=n,t}function b(e,t,n){var i,a=new c.a(l()(e).call(e,(function(e){return[e[n],e]}))),r=new c.a(l()(t).call(t,(function(e){return[e[n],e]})));return Object(f.h)(o()(i=new c.a(Object(f.h)(a,r))).call(i))}},ySMr:function(e,t){e.exports='<div class="component-container hc-img" ng-init="init()" ng-if="model">\n    <div class="box-list-block">\n        <div class="file-box" ng-repeat="_item in file_list track by $index">\n            <div class="pic-box">\n                <img ng-src="/img?type=image&index={{ _item }}"\n                     ng-click="showImg(_item)">\n            </div>\n        </div>\n    </div>\n</div>'},yZ58:function(e,t,n){e.exports='<div class="hcm-nav-content model_list_dialog" ng-init="init()">\n    '+n("IGAs")+"\n</div>\n"},yjtT:function(e,t){e.exports='<style>\n    div#login_error {\n        text-align: center;\n        width: 100%;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n    }\n</style>\n<div ng-init="init()">\n    <div id="login_error" ng-if="client==\'mobile\'">\n        <h1>{{\'login_error\'|translate}}</h1>\n    </div>\n</div>\n'},ys6y:function(e,t){e.exports='<div class="article-comment-box-perf ng-hide pop-window" ng-show="is_comment" ng-init="init()" ng-cloak>\n    <div class="article-comment ng-hide" ng-show="is_comment">\n        <div class="header">\n            <div class="header-title">\n                <span ng-show="reply!=null">{{\'perf_reply\'|translate}}&nbsp;{{reply.name}}</span>\n                <span ng-hide="reply!=null">{{\'perf_comment_other\'|translate}}</span>\n            </div>\n            <div class=\'oper tg\'>{{is_commenting ? (\'perf_sending\'|translate) : \'\'}}</div>\n        </div>\n        <div class="comment-operate">\n            <div ng-click="start_to_employee_select()">\n                <span class="icon icon-hcm-at" ng-class="{disabled:group.group_type==2}"></span>\n            </div>\n        </div>\n        <div class="input">\n                <textarea class=\'comment-input\' contentEditable class=\'f15\'\n                          placeholder="{{\'common_query_panel_input_placeholder\'|translate}}..."\n                          ng-model="comment_text" ng-change="content_change()"></textarea>\n\n            <div class="content-length" ng-class="{\'overflow\':content_length_overflow}">{{content_length}}/150</div>\n        </div>\n        <div class="comment-at" ng-show="comment_at.length>0">\n            <div ng-repeat="_emp in comment_at" class="tg" ng-click="un_at_employee(_emp)">\n                {{_emp.name}}\n            </div>\n        </div>\n\n\n        <footer>\n            <hc-list-btn model="list_btn_model"></hc-list-btn>\n        </footer>\n    </div>\n    <employee-selector></employee-selector>\n</div>\n'},"z/LF":function(e,t){e.exports='<div class="dialog-simple-form" ng-init="$ctrl.$onInit()">\n    <hc-form model="$ctrl.form_model"></hc-form>\n</div>\n'},z430:function(e,t){e.exports='<div class="recruit-address-selector">\n    <div class="search">\n        <div class="status" ng-click="params.city_show=!params.city_show">\n            <div class="city">{{current_city||\'地区\'}}</div>\n            <div class="icon icon-hcm-arrow-down-solid"></div>\n        </div>\n        <div class="symbol">\n            <span class="icon icon-hcm-check"></span>\n        </div>\n        <input type=\'search\' placeholder="输入地址搜索..." autocapitalize="off" autocorrect="off" autocomplete="off"\n               spellcheck="false" ng-model-options="{\'updateOn\':\'default blur\',\'debounce\':{\'defalut\':500,\'blur\':0}}"\n               ng-model="params.search_key">\n        <div class="clear" ng-show="(params.search_key||\'\')!=\'\'" ng-click="params.search_key = \'\'">\n            <span class="special-icon icon-hcm-delete"></span>\n        </div>\n    </div>\n\n    <div class="city-list" ng-show="params.city_show">\n        <div class="city" ng-click="select_city(\'全部\')" ng-class="{selected:current_city==\'全部\'}">全部</div>\n        <div class=\'city\' ng-repeat="c in city_list" ng-click="select_city(c)" ng-class="{selected:c==current_city}">\n            {{c}}\n        </div>\n    </div>\n\n    <div class="address-list">\n        <div class=\'address\' ng-repeat="c in address_list track by $index"\n             ng-if="c.address.indexOf(params.search_key)>=0">\n            <div class="delete icon-hcm-delete" ng-click="remove_address($index)"></div>\n            <div class="modify icon-hcm-edit" ng-click="set_address(c)"></div>\n            <div class="caption clear" ng-click="select_address(c.province,c.city,c.address,c.geo)">\n                {{c.address}}\n            </div>\n        </div>\n        <div class="empty">\n            没有<span ng-if="params.search_key">"{{params.search_key}}"</span>相关地址\n        </div>\n    </div>\n</div>\n'},zAyV:function(e,t){e.exports='<div class="naire-report" ng-init="init()">\n    <div class="report-wrap">\n        <div class="report" ng-repeat="_item in data track by $index">\n            <div class="item_name">\n                <span ng-if="[\'pdf\'].indexOf(_item.type)>-1" class="icon pdf icon-hcm-attachment-pdf"></span>\n                <span ng-if="[\'xls\',\'xlsx\'].indexOf(_item.type)>-1" class="icon excel icon-hcm-attachment-excel"></span>\n                <span ng-if="[\'doc\',\'docx\'].indexOf(_item.type)>-1" class="icon word icon-hcm-attachment-word"></span>\n                <span ng-if="[\'png\',\'jpg\'].indexOf(_item.type)>-1" class="icon img icon-hcm-img-solid"></span>\n                <span class="name">{{_item.name}}</span>\n            </div>\n            <div class="item_btn">\n                <button ng-click="viewFile(_item.index,_item.type)">查看</button>\n                <button ng-click="downloadFile(_item.index)" ng-show="params.download_summary">下载</button>\n            </div>\n        </div>\n    </div>\n</div>\n'},zFIQ:function(e,t){e.exports='<div class="hcm-nav-content meta-setting company-meta" ng-init="init()">\n    <div class="hcm-content flex">\n        <div class="tabPanes">\n            <hc-tabs value="type"\n                     on-value-change="changeType">\n                <hc-tab-pane\n                    ng-repeat="tab in tabPanes track by $index"\n                    label="tab.name"\n                    name="tab.id"\n                    hide-count=true\n                ></hc-tab-pane>\n            </hc-tabs>\n        </div>\n        <div class="hcm-hc-list-container" ng-if="type===\'fields\'">\n            <div ng-if="has_group">\n                <hc-form model="base_form"></hc-form>\n            </div>\n            <div class="hcm-grid">\n                <div class="hcm-grid-header">\n                    <div ng-class="\'hcm-grid-cell-60\'">\n                        顺序\n                    </div>\n                    <div ng-class="\'hcm-grid-cell-\'+v.width" ng-repeat="v in meta[params.biz_type]">\n                        <span ng-class="{\'gray icon-hcm-none-rectangle-radius\':!grid_meta_object[v.key].select_all,\n                        \'blue icon-hcm-click-rectangle-radius\':grid_meta_object[v.key].select_all}"\n                              ng-click="select_all(v)" ng-if="v.type===\'boolean\'">\n                            </span>\n                        {{v.label}}\n                    </div>\n                </div>\n                <div class="hcm-grid-content" ng-sortable="sortable_config">\n                    <div class="hcm-grid-row" ng-repeat="field in list_meta track by $index">\n                        <div class="hcm-grid-cell-60">{{$index + 1}}</div>\n                        <div ng-class="\'hcm-grid-cell-\'+v.width" ng-repeat="v in meta[params.biz_type] track by v.key"\n                             ng-click="show_input($event,field,v)" ng-if="v.type!==\'operate\'">\n                            <span ng-class="{\'gray icon-hcm-none-rectangle-radius\':!isSelected(v,field),\n                            \'blue icon-hcm-click-rectangle-radius\':isSelected(v,field)}"\n                                  ng-click="show_item(field,v)"\n                                  ng-if="v.type===\'boolean\'&&[true,false,undefined].includes(v.options?field.options[v.key]:field[v.key])">\n                            </span>\n                            <span class="function"\n                                  ng-click="showFunc(field,v,v.options?field.options[v.key]:field[v.key])"\n                                  ng-if="v.type===\'boolean\'&&![true,false,undefined].includes(v.options?field.options[v.key]:field[v.key])"\n                                  hc-title="本配置项未被配置成true/false并且不为空时，会显示成f，点击进行编辑" options="{mode: \'tip\', seconds: 0}">f\n                            </span>\n                            <label ng-if="v.type===\'input\'&&field.is_input[v.key]">\n                                <input class="meta_input">\n                            </label>\n                            <span\n                                ng-if="![\'boolean\',\'hc-input\'].includes(v.type)&&v.key!==\'sequence\'&&!field.is_input[v.key]"\n                                hc-title\n                                options="{mode: \'tip\'}" ng-bind-html="(v.options ? field.options[v.key] : field[v.key]|toTrusted)">{{}}</span>\n                            <hc-select ng-model="field.options[v.key]" options="{\n                                no_null: true,\n                                form_mode: \'edit\',\n                                returnFormat: \'value\',\n                                list: [{label: \'col-6\', value: \'col-6\'}, {label: \'col-12\', value: \'col-12\'}]\n                            }" ng-if="v.key===\'width\'&&v.options">\n                            \x3c!-- <hc-select ng-model="field.options[v.key]" options="info_width_config"\n                                    ng-if="v.key===\'width\'&&v.options"> --\x3e\n                            </hc-select>\n                        </div>\n                        <div class="operate center hcm-grid-cell-100" ng-if="params.biz_type===\'list\'">\n                            <span ng-class="{fixed:field.fixed}"\n                                  ng-click="operateCondition.fix($event,$index)"\n                                  class="icon icon-hcm-pin"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-show="type===\'column_defs\'" class="column_defs">\n            <div class="able-fields">\n                <div class="header">可用字段</div>\n                <hc-sortable-tree model="ableFieldsTree"></hc-sortable-tree>\n            </div>\n            <div class="column-defs-tree">\n                <div class="header">多表头定义</div>\n                <hc-sortable-tree model="sortTree"></hc-sortable-tree>\n            </div>\n        </div>\n    </div>\n</div>\n'},zZ81:function(e,t){e.exports='<div class="component-container" ng-init="init()" ng-mouseover="hover=true"   ng-mouseleave="hover=false">\n    <div class=\'component-input-inner hc-selector\'\n         ng-bind="selector_label ||  options.placeholder"\n         ng-class=\'{placeholder:!model}\'\n         ng-disabled=\'options.readOnly\'\n         ng-click=\'onClick($event)\'\n         hc-title="{{selector_label}}" options="{mode: \'tip\', showOnOverflow: true}"></div>\n    <div class="input-icon"\n         ng-show="!(options.readOnly|valueToFunc)()"\n         ng-click="([null,undefined].includes(model)||options.no_delete)? onClick($event) : del($event)"\n         ng-class="(![null,undefined].includes(model)&&hover&&!options.no_delete)?\n         \'icon-hcm-delete\'\n         : options.icon ? \n               options.icon\n               :client===\'pc\'?\n                    \'icon-hcm-screening\'\n                    :\'icon-hcm-arrow-right\'"\n     ></div>\n</div>\n'},zdEE:function(e,t){e.exports="<div class=\"component-container\" ng-click=\"$ctrl.onClick()\">\n    <div class='component-input-inner'\n         ng-class='{placeholder:!$ctrl.model}'\n         ng-disabled='($ctrl.options.readOnly|valueToFunc)()'\n    >\n        {{$ctrl.model ? $ctrl.model : $ctrl.options.placeholder}}\n    </div>\n</div>\n"},zk52:function(e,t,n){"use strict";n("gKGf"),n("1a+C");var i=n("CoJ3");i.a.factory("ApplicationService",["$q","$http","dataService",function(e,t,n){var i={getSysCategoryList:function(){return n.callHcmOpenApi("hcm.application.category.list",{},null,!0)},getSysApplicationList:function(e){return n.callHcmOpenApi("hcm.sys.application.list",{category_id:e},null,!0)},applicationGet:function(e){return n.callHcmOpenApi("hcm.sys.application.get",{app_id:e},null,!0)},applicationAdd:function(e){return n.callHcmOpenApi("hcm.sys.application.add",{data:e},null,!0)},applicationModify:function(e,t){return n.callHcmOpenApi("hcm.sys.application.modify",{app_id:e,data:t},null,!0)},getComCategoryList:function(){return n.callHcmOpenApi("hcm.com.application.category.list",{},null,!0)},getComApplicationList:function(e){return n.callHcmOpenApi("hcm.com.application.list",{category_id:e},null,!0)},applicationOpen:function(e){return n.callHcmOpenApi("hcm.com.application.open",{application_id:e},null,!0)},applicationClose:function(e){return n.callHcmOpenApi("hcm.com.application.close",{application_id:e},null,!0)},getEmpCategoryList:function(e){return n.callHcmOpenApi("hcm.emp.application.category.list",{target:e},"local",!0)},getEmpApplicationList:function(e,t){return n.callHcmOpenApi("hcm.emp.application.list",{category_id:e,target:t},"local",!0)},getEmpAllApplicationList:function(e){return n.callHcmOpenApi("hcm.emp.application.all.list",{target:e},"local",!0)},getEmpAllServiceList:function(e){return n.callHcmOpenApi("ssc.service.my",{category_id:e},"local",!0)},getApplicationMetaGroup:function(){return[{label:"",layout:"col-2",field_names:["number","name","category","status","companies","role","target","state","param","icon","enabled"]},{label:"",layout:"col-1"}]},getApplicationMeta:function(){return[{key:"number",label:"应用编码(用于排序)",component:"hc-input",options:{required:!0}},{key:"name",label:"应用名称",component:"hc-input",options:{required:!0}},{key:"category",label:"类别",component:"hc-select",options:{list:[]}},{key:"status",label:"状态",component:"hc-select",options:{list:[{label:"release",value:0},{label:"beta",value:1},{label:"dev",value:2}]}},{key:"companies",label:"适用公司",component:"hc-input",options:{required:!1}},{key:"role",label:"适用角色",component:"hc-input",options:{required:!0}},{key:"target",label:"目标设备",component:"hc-input",options:{required:!0}},{key:"state",label:"执行State",component:"hc-input",options:{required:!0}},{key:"param",label:"执行参数",component:"hc-input",options:{required:!0}},{key:"icon",label:"图标",component:"hc-input",options:{required:!0}},{key:"enabled",label:"启用",component:"hc-select",options:{required:!0,list:[{label:"是",value:1},{label:"否",value:0}]}},{key:"description",component:"hc-text-area",label:"描述信息",options:{required:!0,placeholder:"请输入描述信息",width:"col-12"}}]}};return i}]),i.a.factory("basicItemService",["dataService","contextService","$q","$state",function(e,t,n,i){return{getCategoryList:function(){var t=n.defer();return e.callHcmCloudApi("/basic.item.category.get.list",{filter:[{key:"enable",op:"=",value:1}],page_index:"1",page_size:"100"},"POST").then((function(e){t.resolve(e.data)})),t.promise},getItemList:function(t){var i={filter:[{key:"enable",op:"=",value:1}],page_index:"1",page_size:"50000",category_id:t},o=n.defer();return e.callHcmOpenApi("basic.item.get.list",i,null,!0).then((function(e){o.resolve(e)})),o.promise},getLinkList:function(t){var i={page_index:"1",page_size:"1000",link_model:t},o=n.defer();return e.callHcmOpenApi("basic.link.get.list",i,null,!0).then((function(e){o.resolve(e)})),o.promise},getItemList2:function(t){var i=n.defer();return e.callHcmOpenApi("basic.item.get.list",t,null,!0).then((function(e){i.resolve(e)})),i.promise},getApiItemList:function(t){var i=t,o=n.defer();return e.callHcmOpenApi(i,{},null,!0).then((function(e){o.resolve(e.data)})),o.promise},saveCategory:function(t){var i=t,o=n.defer();return e.callHcmCloudApi("/basic.item.category.save.value",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},saveItem:function(t){var i={params:t},o=n.defer();return e.callHcmCloudApi("/basic.item.save.value",i,"POST").then((function(e){sessionStorage.clear(),o.resolve(e)})),o.promise},disableItem:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.disable",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},disableCategory:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.category.disable",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},enableItem:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.enable",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},addItem:function(t){return e.callHcmOpenApi("basic.item.add",{params:t},null,!0)},enableCategory:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.category.enable",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},delItem:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.delete.value",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},delCategory:function(t){var i={id:t},o=n.defer();return e.callHcmCloudApi("/basic.item.category.delete.value",i,"POST").then((function(e){o.resolve(e.data)})),o.promise},categoryListManage:function(){return e.callHcmOpenApi("basic.item.category.get.list",{page_index:"1",page_size:"5000"},null,!0)},itemListManage:function(t){var n={page_index:"1",page_size:"50000",category_id:t,enabled:"None"};return e.callHcmOpenApi("basic.item.get.list",n,null,!0)},getItem:function(t){var i={id:t},o=n.defer();return e.callHcmOpenApi("basic.item.category.get",i).then((function(e){o.resolve(e.data)})),o.promise},getCategory:function(t){var i={id:t},o=n.defer();return e.callHcmOpenApi("basic.item.get",i).then((function(e){o.resolve(e.data)})),o.promise},saveItemSort:function(t){var i={sort:t},o=n.defer();return e.callHcmOpenApi("basic.item.sort.save",i).then((function(e){o.resolve(e.data)})),o.promise}}}]),i.a.factory("cacheService",(function(){return{getCache:function(e){return window.storage.getItem("session",e)},setCache:function(e,t){window.storage.setItem("session",e,t)}}}));n("rWvg"),n("4mDm"),n("oVuX"),n("rOQg"),n("07d7"),n("rB9j"),n("JfAA"),n("Rm1S"),n("UxlC"),n("EnZy"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0");var o=n("Vi3r"),a=n.n(o),l=n("UtpJ"),r=n.n(l),c=n("pPxq"),s=n.n(c),d=n("o+MX"),u=n.n(d),_=n("5PDf"),p=n.n(_),m=n("ZbhI"),f=n.n(m),h=n("eLKs"),g=n.n(h),v=n("RXMP"),b=n.n(v),y=n("JkKW");i.a.factory("hcImageService",["weChatService","$q","$http",function(e,t,n){return{uploadImg:function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t.defer();if(console.log("上传图片1"),i.is_we_chat)console.log("上传微信图片1"),e.uploadImage(i.data).then((function(t){a.resolve("wx."+(e.getAppId()||"")+"."+t.serverId)}),(function(e){a.reject(e)}));else if(i.is_ccwork){console.log("上传云上协同图片"),console.log(i.data.substring(0,10));var l=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(l=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),n.post(l,{img:i.data}).then((function(e){a.resolve(e.data.index)}))}else if(i.is_emmcloud){console.log("上传云+图片"),console.log(i.data.substring(0,10));var r=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(r=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),n.post(r,{img:i.data}).then((function(e){a.resolve(e.data.index)}))}else if(i.is_htime){console.log("上传好时光图片"),console.log(i.data.substring(0,10));var c=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(c=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),n.post(c,{img:i.data}).then((function(e){a.resolve(e.data.index)}))}else if(i.is_kk){console.log("kk图片展示"),console.log(i.data.substring(0,10));var s=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(s=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),n.post(s,{img:i.data}).then((function(e){a.resolve(e.data.index)}))}else if(i.is_hope_sdk){console.log("hope_sdk图片展示"),console.log(i.data.substring(0,10));var d=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(d=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),n.post(d,{img:i.data}).then((function(e){a.resolve(e.data.index)}))}else{console.log("上传目录中图片");var u=window.hcm_wengen+"/img"+window.hcm_env_pre;o&&o.url&&(u=window.hcm_wengen+"/"+o.url+window.hcm_env_pre),console.log(u),n.post(u,{img:i.clearBase64}).then((function(e){a.resolve(e.data.index)}))}return a.promise},uploadDocument:function(i){var o=t.defer(),a=function(e){e=l(e);var t=new FormData;t.append("file",e),n({method:"POST",url:"/document/savedocuments",headers:{"Content-Type":void 0},data:t,transformRequest:angular.identity}).then((function(e){o.resolve(e.data.index_list)}))},l=function(e){for(var t,n=e.split(","),i=n[0].match(/:(.*?);/)[1],o=atob(n[1]),a=o.length,l=new Uint8Array(a);a--;)l[a]=o.charCodeAt(a);console.log(i),b()(y).call(y,(function(e){i===e.mime&&(t=e.type)})),console.log(t);var r="file"+(new Date).getTime()+"."+t;return console.log(r),new File([l],r,{type:i})};return console.log("上传图片1"),i.is_we_chat?(console.log("上传微信图片1"),e.getLocalImgData(i.data).then((function(e){console.log(e.substring(0,20)),a(e)}))):i.is_ccwork?(console.log("上传云上协同图片"),console.log(i.data.substring(0,10)),a(i.data)):i.is_emmcloud?(console.log("上传云+图片"),console.log(i.data.substring(0,10)),a(i.data)):i.is_htime?(console.log("上传好时光图片"),console.log(i.data.substring(0,10)),a(i.data)):i.is_kk?(console.log("kk图片展示"),console.log(i.data.substring(0,10)),a(i.data)):(console.log("上传目录中图片"),a(i.base64)),o.promise}}}]),n("ctOA"),i.a.directive("imgResizeUpload",["weChatService",function(e){return{restrict:"A",scope:{ngModel:"=",lWidth:"=",lQuality:"=",disabled:"=",callback:"=",useCamera:"="},link:function(t,n,i){var o,a;return t.file=null,a=function(e,t,n){var i,o,a;return i=document.createElement("CANVAS"),o=i.getContext("2d"),(a=new Image).crossOrigin="Anonymous",a.onload=function(){var e;return void 0,i.height=a.height,i.width=a.width,o.drawImage(a,0,0),e=i.toDataURL(n),t.call(this,e),i=null},a.src=e},t.file=document.createElement("input"),t.file.type="file",t.file.accept="image/*",t.useCamera&&(t.file.capture="camera",t.file.camera=!0),$(t.file).localResizeIMG({width:t.lWidth,quality:t.lQuality,success:function(e,n){return t.$apply((function(){return t.callback&&t.callback(e,n),t.ngModel=e}))}}),g()(o=n.unbind("click")).call(o,"click",(function(){var n;if(console.log("lzj1"+t.disabled),!t.disabled){console.log(e.isWeChat()),console.log(e.isWxWork()),console.log(e.isWork()),console.log(e.isHTime());var i=f()(n=navigator.userAgent.toLowerCase()).call(n,"emmcloud")>=0;if(console.log(i),console.log(e.is_ccwork()),console.log(navigator.userAgent.toLowerCase()),e.isWeChat()&&window.location.hostname.split(".")[0].length<18)return console.log("lzj-2-file0"),t.file.click();if(e.isWeChat()||e.isWwxWork()||e.isWxWork()||e.isWork()||e.isWxLocal())console.log(" 打开控件"),console.log(t.useCamera),e.selectImage(t.useCamera).then((function(e){console.log(" 有照片数据返回: "),console.log(e),t.callback&&t.callback({is_we_chat:!0,data:e[0]})}));else if(e.is_ccwork())console.log(" 打开云上协同控件"),e.selectImage(t.useCamera).then((function(e){console.log("callback"+t.callback),t.callback&&t.callback({is_ccwork:!0,data:e})}));else if(i)console.log(" 打开云家控件"),e.selectImage(t.useCamera).then((function(e){console.log("callback"+t.callback,"data:"+e),t.callback&&t.callback({is_emmcloud:!0,data:e})}));else if(e.isHTime())console.log(" 打开好时光控件"),e.selectImage(t.useCamera).then((function(e){console.log("callback"+t.callback,"data:"+e),t.callback&&t.callback({is_htime:!0,data:e})}));else if(e.isKK())console.log("打开kk01"),e.selectImage(t.useCamera).then((function(e){console.log("kk返回成功"),console.log(e.substring(0,10)),t.callback&&t.callback({is_kk:!0,data:e})}));else{if(!e.isHopeSdk())return console.log("lzj-2-file"),t.file.click();console.log("打开isHopeSdk01"),e.selectImage(t.useCamera).then((function(e){console.log("isHopeSdk返回成功"),t.callback&&t.callback({is_hope_sdk:!0,data:e.imageBase64})}))}}})),t.$watch("ngModel",(function(e){return"string"==typeof e&&a(e,(function(e){return t.$apply((function(){return t.ngModel={base64:e,clearBase64:e.substr(f()(e).call(e,",")+1)}}))}))}))},controller:["$scope","$rootScope",function(e,t){}]}}]),p()(i.a).call(i.a,"hcTagImage",(function(){return function(e,t,n,i,o,a){o||(o="");var l=t?t.join(","):"";return"{0}/{1}?employee_id={2}&tag_type_id={3}&width={4}&height={5}&index={6}&max_words={7}&ts={8}".format(window.hcm_wengen,"img/tag_cloud",e,l,n||400,i||400,o,a||30,Math.random())+window.hcm_env_post}})),p()(i.a).call(i.a,"hcWordCloudImage",(function(){return function(e,t,n,i,o,a){o||(o="");var l=t?t.join(","):"";return"{0}/{1}?employee_id={2}&tag_type_id={3}&width={4}&height={5}&index={6}&max_words={7}&ts={8}".format(window.hcm_wengen,"api/flex_template/word_cloud",e,l,n||400,i||400,o,a||30,Math.random())+window.hcm_env_post}})),p()(i.a).call(i.a,"hcImage",(function(){return function(e,t,n,i,o,a){return e||(e=""),n=n||"image",t=t||"",i=i||"",o=o||"",a=a||"img","{0}/{1}?type={2}&index={3}&size={4}&blur={5}&bright={6}".format(window.cdn_domain+window.hcm_wengen,a,n,e,t,i,o)+window.hcm_env_post}})),p()(i.a).call(i.a,"hcPhoto",(function(){return function(e,t,n,i,o){return e||(e=""),window.cdn_domain+window.hcm_wengen+"/img?type=photo"+(t?"&size="+t.toString():"")+"&index="+e+(n?"&blur="+n.toString():"")+(i?"&bright="+i.toString():"")+(o?"&contrast="+o.toString():"")+window.hcm_env_post}})),p()(i.a).call(i.a,"commonImage",(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;e=e||"";var n=function(t){var n,i,o,a,l,c,d,_,p,m,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"hcTrainImg"===t&&""===e?(t="/img?type=image&index=train-banner-400",u()(c=u()(d=u()(_=u()(p=u()(m="".concat(window.cdn_domain)).call(m,window.hcm_wengen)).call(p,t)).call(_,e)).call(d,f&&"&size="+f)).call(c,window.hcm_env_post)):s()(t).call(t,"mask:")?r()(t).call(t,5).replace("{}",e):("hcImage"===t?t="/img?type=image&index=":"hcPhoto"===t?t="/img?type=photo&index=":("hcDocumentImg"===t||"hcTrainImg"===t&&""!==e)&&(t="/document/loadsourceimage?index="),u()(n=u()(i=u()(o=u()(a=u()(l="".concat(window.cdn_domain)).call(l,window.hcm_wengen)).call(a,t)).call(o,e)).call(i,f&&"&size="+f)).call(n,window.hcm_env_post))};return n.apply(void 0,a()(t))}})),p()(i.a).call(i.a,"hcZsbImage",(function(){return function(e,t,n,i,o){return e||(e=""),n=n||"image",t=t||"",i=i||"",o=o||"","{0}/document/loaddocument?type={1}&index={2}&size={3}&blur={4}&bright={5}".format(window.cdn_domain,n,e,t,i,o)}}));n("sMBO");i.a.factory("hcImageViewerService",["$q","$http","$state","$hcDialog",function(e,t,i,o){return{showImg:function(e,t,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o.getDialog({controller:"showImgCtrl",template:n("V5EL")}).params({imgs:e,index:t,operate_list:a,view_config:l}).name(i.current.name).size("img-viewer-full").show()}}}]);var w=n("a0dU"),x=n.n(w),k=n("OBge"),O=n.n(k),D=(n("ls82"),n("SPx3")),C=n.n(D);i.a.factory("documentPreviewService",["$q","$http","$hcDialog","weChatService","$rootScope","hcImageViewerService","dataService",function(e,t,n,i,o,a,l){return{preViewDocument:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o.show_waiting("转换中"),l.callHcmOpenApi(t||"document.conert.to.png",{index:e},null,!0).then((function(t){if(o.hide_waiting(),t.page_size>0){for(var l=[],s=0;s<t.page_size;s++){var d=s+1;l[s]=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+e+"/"+d+window.hcm_env_pre}c||"pc"===window.client?a.showImg(l,0,n,r):(u={current:l[0],urls:l,operate_list:n,index:e,config:r},console.log("preViewImg:"),console.log(u),i.preViewImg(u))}var u}))},preViewDocumentAddWaterMark:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;o.show_waiting("转换中"),l.callHcmOpenApi(t||"document.conert.to.png",{index:e,water_mark:r},null,!0).then((function(t){if(o.hide_waiting(),t.page_size>0){for(var l=[],r=0;r<t.page_size;r++){var c=r+1;l[r]=location.protocol+"//"+location.host+window.hcm_wengen+"/document/loadpreviewdocument/"+e+"/"+c+window.hcm_env_pre}"pc"===window.client?a.showImg(l,0,n):(s={current:l[0],urls:l,operate_list:n},console.log("preViewImg:"),console.log(s),i.preViewImg(s))}var s}))},downloadDocument:function(e){var t,n,o=window.hcm_wengen+"/document/loadsourcedocument/"+window.hcm_env_pre,a=u()(t=u()(n="".concat(location.protocol+"//"+location.host)).call(n,o)).call(t,e)+window.hcm_env_post;i.fileDownload(a,null)},viewImg:function(e,t,n){var o;"pc"===window.client?a.showImg(e,t):(o={current:e[t],urls:e,current_index:t,config:n},i.preViewImg(o))},getFileThumbnail:(r=C()(x.a.mark((function e(t,n){var i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new O.a((function(e){l.callHcmOpenApi(n||"document.conert.to.png",{index:t},null,!0).then((function(t){t.page_size>0&&e(t.index)}))})),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})};var r}]);var M=n("mnMc"),S=n.n(M);i.a.factory("locationService",["weChatService","$rootScope","$http","$q","$timeout","$location","$state","$cacheFactory","contextService","dataService",function(e,t,n,i,o,a,l,r,c,s){return{geoDecodeClient:function(e,t){var n=i.defer(),o=new qq.maps.Geocoder;return o.setComplete((function(e){n.resolve(e.detail)})),o.setError((function(e){n.reject(e)})),o.getAddress(new qq.maps.LatLng(e,t)),n.promise},geoTranslateClient:function(e,t){var n=i.defer();try{qq.maps.convertor.translate(new qq.maps.LatLng(e,t),1,(function(e){n.resolve(e[0])}))}catch(e){n.reject({message:"位置转换失败"})}return n.promise},getNearBy:function(e){var t=i.defer();return s.callHcmOpenApi("position.nearby",e,null,!0).then((function(e){t.resolve({list:e.data})})),t.promise},getEmpPositions:function(e){return s.callHcmOpenApi("position.emp_positions",{id:e.id,date:e.date,_from:e._from,page_size:e.page_size},null,!0)},getLocationByWx:function(){console.log("getLocationByWx");var t=i.defer();return"mobile"==window.client?e.geo().then((function(e){var n,i;S()(n=[void 0,null,""]).call(n,e.lat)||S()(i=[void 0,null,""]).call(i,e.lng)?(console.log("weChatService.geo error"),console.log(e),t.reject({message:"用户位置信息不可用"})):t.resolve(e)}),(function(e){console.log("weChatService.geo error"),console.log(e),t.reject(e)})):t.reject({message:"不能使用微信定位"}),t.promise},getLocationByGeo:function(){var e=i.defer();return function(){var e=i.defer();return window.isApp?window.WebViewJavascriptBridge.callHandler("getLocation",{},(function(t){var n=JSON.parse(t);e.resolve({lat:n.latitude,lng:n.longitude,accuracy:n.accuracy})})):navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.resolve({lat:t.coords.latitude,lng:t.coords.longitude,accuracy:t.coords.accuracy})}),(function(t){var n={};switch(t.code){case t.PERMISSION_DENIED:n={message:"用户禁止了定位操作"};break;case t.POSITION_UNAVAILABLE:n={message:"用户地理信息不可用"};break;case t.TIMEOUT:n={message:"定位超时"};break;case t.UNKNOWN_ERROR:n={message:"未知错误"}}e.reject(n)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):e.reject({message:"浏览器不支持定位功能"}),e.promise}().then((function(t){var n,i;S()(n=[void 0,null,""]).call(n,t.lat)||S()(i=[void 0,null,""]).call(i,t.lng)?(console.log("geolocation error"),console.log(t),e.reject({message:"用户位置信息不可用"})):e.resolve(t)}),(function(t){e.reject({message:t.message||"浏览器定位失败，请稍候重试"})})),e.promise},getDistrictProvinces:function(){return s.callHcmOpenApi("hcm.data.district.provinces",{},null,!0)},getDistrictCities:function(e){return s.callHcmOpenApi("hcm.data.district.cities",{province:e},null,!0)}}}]);n("toAj"),n("hByQ");var E=n("3xDC"),P=n.n(E),j=n("M5Mt"),T=n.n(j),A=n("FLGM"),I=n.n(A),L=(n("QYHX"),n("WxoT")),F=n.n(L),R=n("iYR4"),B=n.n(R);i.a.factory("selectorDataService",["listCacheService2","$hcDialog","$q","$http","dataService","contextService",function(e,t,n,i,o,a){var l=function(){return self.hash_key||(self.hash_key=window.md5(F()({user:a.getContext("auth").employee.id,state:"employee-selector"}))),self.hash_key};return{loadEmpHistory:function(){var e=window.storage.getItem("local",l());return null==e?[]:e},pushEmpHistory:function(e){var t=window.storage.getItem("local",l()),n=null==t?[]:t;n=p()(n).call(n,(function(t){return t.id!==e.id})),T()(n).call(n,0,0,e),window.storage.setItem("local",l(),r()(n).call(n,0,20))},getEmpInfoBatch:function(e){return o.callHcmOpenApi("emp.info.batch",{ids:e.join(",")},null,!0)},superEmpSearch:function(t,n){return e(null,"emp.search",{key:t,department:n})},getCompanyList:function(){return o.callHcmOpenApi("company.list",{},"",!0)},getReportGroupList:function(){return o.callHcmOpenApi("report.spreadsheet.template.group.list",{},"",!0)},getReportTemplateList:function(e){return o.callHcmOpenApi("report.spreadsheet.template.list",{group_id:e},"",!0)},getDepartmentJson:function(e){return o.callHcmOpenApi("hcm.model.get",{id_:e||"",model:"Department"},"session,1",!1,!1)},getDepartmentJsonInfo:function(e,t){return o.callHcmOpenApi("depart.info",{id:e||"",include_child:!!t},"local,240",!0)},getEmployeeJsonInfo:function(e){return o.callHcmOpenApi("emp.info",{id:e||""},"session",!0)}}}]);n("VnEc");i.a.controller("EmployeeSelectorController",["contextService","$scope","$rootScope","$state","$timeout","selectorDataService",function(e,t,n,i,o,a){t.is_multi_select=t.params.is_multi_select,t.pre_selected_id=t.params.pre_selected||[],t.selected=[],t.selected_id=[],t.search_key={key:""},t.search_history=a.loadEmpHistory(),t.params.selected&&t.params.selected.length>0&&a.getEmpInfoBatch(t.params.selected).then((function(e){var n;t.selected=e,t.selected_id=I()(n=t.selected).call(n,(function(e){return e.id}))})),a.getDepartmentJsonInfo(t.params.depart_id||"").then((function(e){t.top_org=e}));var l=[{label:"返回",cancel:!0,func:function(){t.$dialog.dialog_close()}}];t.is_multi_select&&l.push({label:"确定",default:!0,func:function(){t.selected.length<1||(t.$dialog.resolve_data(t.selected),t.$dialog.dialog_close())}}),t.$dialog.operates(l),t.show_home=function(){t.is_org_show=!1,t.current_org=null,t.org_bread=null},t.show_home(),t.show_depart=function(e){t.is_org_show=!0,t.current_org||(t.is_org_loading=!0),a.getDepartmentJsonInfo(e,!0).then((function(n){t.current_org=n,window.sessionStorage.setItem("depart_info_"+e.toString(),F()(t.current_org)),t.refresh_bread(),t.is_org_loading=!1}))},t.refresh_bread=function(){!t.org_bread&&(t.org_bread=[]),t.current_org&&t.org_bread.push({name:t.current_org.name,id:t.current_org.id})},t.select=function(e){if(t.is_multi_select){var n,i;if(f()(n=t.pre_selected_id).call(n,e.id)>-1)return;var o,l,r=f()(i=t.selected_id).call(i,e.id);if(r>-1)T()(o=t.selected).call(o,r,1),T()(l=t.selected_id).call(l,r,1);else t.selected.push(e),t.selected_id.push(e.id),a.pushEmpHistory(e)}else a.pushEmpHistory(e),t.$dialog.resolve_data(e),t.$dialog.dialog_close()},t.un_select=function(e){var n,i,o,a=f()(n=t.selected_id).call(n,e.id);a>-1&&(T()(i=t.selected).call(i,a,1),T()(o=t.selected_id).call(o,a,1))},t.$watch("search_key.key",(function(e){e&&""!==e?(t.search_result=a.superEmpSearch(e,t.current_org?t.current_org.tree_id:""),t.search_result.load(null,(function(e){})).then((function(){t.search_result.next(!0)}))):(t.search_history=a.loadEmpHistory(),t.search_result=null,t.group_search_data=null)}),!0),t.submit=function(){t.selected_id.length<1||(t.$dialog.resolve_data(t.selected),t.$dialog.dialog_close())}}]);var U={controller:"EmployeeSelectorController",template:B.a},q=n("yD0l"),W=n.n(q);n("wKQw");i.a.controller("CommonSelectorController",["contextService","$scope","$rootScope","$state","$timeout","selectorDataService",function(e,t,n,i,o,a){t.search_key={key:""},t.selector=t.params.selector;var l=[{label:"返回",cancel:!0,func:function(){t.$dialog.dialog_close()}}];t.$dialog.operates(l),t.select=function(e){t.$dialog.resolve_data(e),t.$dialog.dialog_close()},t.$watch("search_key.key",(function(){t.refreshData()}),!0),t.refreshData=function(){t.selector(t.search_key.key).then((function(e){t.result=e}))},t.refreshData(),t.submit=function(){t.selected_id.length<1||(t.$dialog.resolve_data(t.selected),t.$dialog.dialog_close())}}]);var z={controller:"CommonSelectorController",template:W.a};i.a.factory("selectorService",["$hcDialog","$q","$http","dataService","$rootScope",function(e,t,i,o,a){return{commonSelect:function(t){return t=t||{},e.getDialog(z).size("middle").title("请选择").show(t)},selectCompany:function(t){return e.getDialog({template:n("i/6X"),controller:["$scope","$timeout","selectorDataService",function(e,n,i){e.$dialog.operates([{label:"返回",cancel:!0,func:function(){e.$dialog.dialog_close()}}]),e.init=function(){i.getCompanyList().then((function(n){var i;(e.list=n.list,t)&&b()(i=e.list).call(i,(function(e){t(e.id).then((function(t){e.alter_data=t}))}));e.$broadcast("company_selector_refresh")}))},e.select=function(t){e.$dialog.resolve_data(t),e.$dialog.dialog_close()}}]}).size("middle").title("请选择部门").show()},selectReportTemplate:function(t){return e.getDialog({template:n("l3uN"),controller:["$scope","$timeout","selectorDataService",function(e,t,n){e.$dialog.operates([{label:"返回",cancel:!0,func:function(){e.$dialog.dialog_close()}}]),e.init=function(){n.getReportGroupList().then((function(t){e.group_list=t,e.$broadcast("report_template_group_list_refresh"),e.group_list.length>0&&e.change_group(e.group_list[0])}))},e.change_group=function(t){e.curr_group=t,n.getReportTemplateList(e.curr_group.id).then((function(t){e.template_list=t,e.$broadcast("report_template_list_refresh")}))},e.select=function(t){e.$dialog.resolve_data(t),e.$dialog.dialog_close()}}]}).size("large").title("请选择报表模板").show()},selectDepartment:function(t){return t=t||{},e.getDialog({template:n("MZCV"),controller:["$scope","$timeout","orgService",function(e,t,n){var i;e.is_multi_select=e.params.is_multi||!1,e.pre_selected_id=e.params.disabled||[],e.alter_options=e.params.alter_options||[],e.alter_property=e.params.alter_property||[],e.current_org_id=e.params.current_org_id||null,e.role=e.params.role,e.selected_id=[],e.selected=[];var o=[];e.params.cancel_disabled||o.push({label:"返回",cancel:!0,func:function(){e.$dialog.dialog_close()}}),e.is_multi_select&&o.push({label:"确定",default:!0,func:function(){e.selected.length<1||(e.$dialog.resolve_data(e.selected),e.$dialog.dialog_close())}}),e.$dialog.operates(o),e.get_alter_property=function(t){var n;return t.alter_property=[],!!e.alter_property&&(b()(n=e.alter_property).call(n,(function(e){var n={data:null,label:e.label};t.alter_property.push(n),e.service(t.id).then((function(e){n.data=e}))})),t)},b()(i=e.alter_options).call(i,(function(t){e.get_alter_property(t)})),e.show_depart=function(t){n.getDeptInfo(t).then(e.set_curr_org,null,e.set_curr_org)},e.set_curr_org=function(t){var n;e.current_org=t,b()(n=e.current_org.child_list).call(n,(function(t){e.get_alter_property(t)})),e.refresh_bread(t),e.$broadcast("search_content_refresh",!0)},e.show_home=function(){n.getMyDepartmentByRole(e.role).then(e.set_home_org,null,e.set_home_org)},e.set_home_org=function(t){var n;e.current_org={child_list:t},b()(n=e.current_org.child_list).call(n,(function(t){e.get_alter_property(t)})),e.org_bread=[],e.$broadcast("search_content_refresh",!0)},e.refresh_bread=function(t){var n;t.full_name&&(e.org_bread=I()(n=t.full_name.split("!")).call(n,(function(e,n){return{name:e,id:t.tree_id.split("!")[n]}})))},e.single_select=function(t){e.$dialog.resolve_data(t),e.$dialog.dialog_close()},e.select=function(t){var n,i;if(!(f()(n=e.pre_selected_id).call(n,t.id)>-1))if(e.is_multi_select){var o,a,l=f()(i=e.selected_id).call(i,t.id);if(l>-1)T()(o=e.selected).call(o,l,1),T()(a=e.selected_id).call(a,l,1);else e.selected.push({id:t.id,name:t.name,number:t.number}),e.selected_id.push(t.id)}else e.single_select({id:t.id,name:t.name,number:t.number,adapter_id:t.orderno,plan_count:t.plan_count,count_emp:t.count_emp})},e.un_select=function(t){var n,i,o,a=f()(n=e.selected_id).call(n,t.id);a>-1&&(T()(i=e.selected).call(i,a,1),T()(o=e.selected_id).call(o,a,1))},e.show_home(),e.current_org_id&&e.show_depart(e.current_org_id)}]}).size("middle").title(t.title||"请选择公司").show({disabled:t.disabled,is_multi:t.is_multi,cancel_disabled:t.cancel_disabled,alter_options:t.alter_options,alter_property:t.alter_property,role:t.role,current_org_id:t.current_org_id})},selectEmployee:function(t){return t=t||{},e.getDialog(U).size("middle").title("请选择员工").show(t)},selectAddress:function(t){return t=t||{},e.getDialog({template:n("heSz"),controller:["locationService","$scope","$timeout","selectorDataService",function(e,n,i,l){var r,c,s;n.$dialog.operates([{label:"返回",cancel:!0,func:function(){n.$dialog.dialog_close()}},{label:"确定",default:!0,func:function(){var e;n.data.city?n.data.address?f()(e=["其他","海外"]).call(e,n.data.city)<=-1&&!n.data.geo?a.show_warning("请确认经纬度","warning"):(n.$dialog.resolve_data(n.data),n.$dialog.dialog_close()):a.show_warning("请输入地址","warning"):a.show_warning("请选择城市","warning")}}]);var d=52.35987755982988;n.init=function(){i((function(){n.data=t||{address:t.address,geo:t.geo},window.BMap?(n.has_map=!0,n.initMap()):(t.geo&&n.setAddressImg(t),n.initProvince())}),100)},n.setAddressImg=function(e,t){var i,o=e.location;o||(o=P()(i=e.geo.split(",")).call(i).toString());var a,l="https://restapi.amap.com/v3/staticmap?location="+o+"&zoom=16&scale=2&size=1000*400&markers=large,0x03a9f4,:"+o+"&key=d8a3a89911723f78214181eb82eb972d",r=location.protocol+"//"+location.host+"/api/location_map?url="+encodeURIComponent(l);(angular.element("#address_selector_map")[0].style.background="url("+r+") no-repeat center",t)&&(n.show_address_list=!1,n.data.geo=P()(a=o.split(",")).call(a).toString(),n.data.address=e.name||e.address)},n.initProvince=function(){e.getDistrictProvinces().then((function(e){n.province_list=I()(e).call(e,(function(e){return e.name})),n.province_list.push("其他")}))},n.initMap=function(){var e,i,o,a,l,r,u,_=(t.geo||"39.916527,116.397128").split(","),p=(e=_[0],i=_[1],o=i,a=e,l=Math.sqrt(o*o+a*a)+2e-5*Math.sin(a*d),r=Math.atan2(a,o)+3e-6*Math.cos(o*d),u=l*Math.cos(r)+.0065,{lat:l*Math.sin(r)+.006,lon:u});if(n.geocoder=new BMap.Geocoder,n.convertor=new BMap.Convertor,(s=new BMap.Map(document.getElementById("address_selector_map"),{enableMapClick:!1})).centerAndZoom(new BMap.Point(p.lon,p.lat),15),s.enableScrollWheelZoom(!0),s.addControl(new BMap.ScaleControl),s.addControl(new BMap.MapTypeControl),t.geo){s.clearOverlays();var m=new BMap.Point(p.lon,p.lat);c=new BMap.Marker(m),s.addOverlay(c),s.panTo(m)}new BMap.InfoWindow("",{width:0,height:0,title:"当前位置",enableMessage:!1,enableAutoPan:!1,enableCloseOnClick:!1,message:""}).addEventListener("open",(function(e,t,n){$(".BMap_pop>img").hide(),$(".BMap_bubble_title").hide()})),s.addEventListener("click",(function(e){n.set_geo(e.point)})),n.selector_show=!1,n.initProvince(),n.data={address:t.address,geo:t.geo},t.province&&n.set_province(t.province),t.city&&n.set_city(t.city),t.address&&!t.geo&&n.geo_address()},n.showMap=function(){if(t.geo)var i=new qq.maps.LatLng(t.geo.split(",")[0],t.geo.split(",")[1]);else i=new qq.maps.LatLng(39.916527,116.397128);r=new qq.maps.Map(document.getElementById("address_selector_map"),{center:i,zoom:15}),qq.maps.event.addListener(r,"click",(function(e){n.set_geo(e.latLng)})),c=new qq.maps.Marker({map:r,position:i}),n.selector_show=!1,e.getDistrictProvinces().then((function(e){n.province_list=I()(e).call(e,(function(e){return e.name})),n.province_list.push("其他")})),t.province&&n.set_province(t.province),t.city&&n.set_city(t.city),t.address&&!t.geo&&n.geo_address()},n.set_province=function(t){n.data.province=t,"其他"===t?n.city_list=["其他","海外"]:e.getDistrictCities(t).then((function(e){n.city_list=I()(e).call(e,(function(e){return e.name}))}))},n.set_city=function(e){n.data.city=e,n.selector_show=!1},n.set_geo=function(e){var t,i,o,a,l,r,u,_=(t=e.lat.toFixed(6),i=e.lng.toFixed(6),o=i-.0065,a=t-.006,l=Math.sqrt(o*o+a*a)-2e-5*Math.sin(a*d),r=Math.atan2(a,o)-3e-6*Math.cos(o*d),u=l*Math.cos(r),{lat:l*Math.sin(r),lon:u});n.data.geo=_.lat.toFixed(6)+","+_.lon.toFixed(6);var p=new BMap.Point(e.lng.toFixed(6),e.lat.toFixed(6));c&&c.remove(),c=new BMap.Marker(p),s.addOverlay(c),s.panTo(p)},n.address_keyup=function(e){13===(window.event?e.keyCode:e.which)&&n.geo_address()},n.show_selector=function(){n.selector_show=!n.selector_show},n.geo_address=function(){if(n.has_map){var e=new BMap.LocalSearch(s,{renderOptions:{map:s},onSearchComplete:function(t){e.getStatus()===BMAP_STATUS_SUCCESS&&n.$apply((function(){n.set_geo(t.Ar[0].point)}))}});e.search((n.data.province===n.data.city?"":n.data.province+"省")+n.data.city+"市"+n.data.address)}else o.callHcmOpenApi("position.location_poi",{keywords:n.data.address,city:n.data.city}).then((function(e){n.show_address_list=!0,n.address_list=e}))}}]}).size("large-middle auto-height").title("请选择地址").show()}}}]);n("5s+n"),n("PKPk"),n("3bBZ");var N=n("lHQ6"),K=n.n(N),H=n("BfIq"),V=n.n(H),Y=n("/FZm"),G=n.n(Y),J=n("Kwsy"),X=n.n(J),Q=n("6UaR"),Z=n.n(Q),ee=n("sEfC"),te=n.n(ee),ne=(n("bGk0"),n("/LHk"),n("pjDv"),n("R5XZ"),n("KYsz")),ie=n.n(ne),oe=n("x1GB"),ae=n.n(oe),le=n("0lTi"),re=n.n(le),ce=n("LYCE"),se=n.n(ce),de=n("526F"),ue=n.n(de);"function"!=typeof ue.a&&se()(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0}),"function"!=typeof re.a&&(Array.from=function(e){return r()([]).call(e)});var _e=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)},pe=function(){var e=function(e,t){this.el=e,this.options=ue()({},this.defaults,t),this.zoomFactor=this.options.zoomFactor?this.options.zoomFactor:1,this.lastScale=1,this.offset={x:0,y:0},this.initialOffset={x:0,y:0},this.setupMarkup(),this.bindEvents(),this.update(),this.isImageLoaded(this.el)&&(this.updateAspectRatio(),this.setupOffsets()),this.enable()},t=function(e,t){return e+t};e.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,maxZoom:4,minZoom:.5,draggableUnzoomed:!0,lockDragAxis:!1,setOffsetsOnce:!1,use2d:!0,zoomStartEventName:"pz_zoomstart",zoomUpdateEventName:"pz_zoomupdate",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragUpdateEventName:"pz_dragupdate",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap",verticalPadding:0,horizontalPadding:0,onZoomStart:null,onZoomEnd:null,onZoomUpdate:null,onDragStart:null,onDragEnd:null,onDragUpdate:null,onDoubleTap:null},handleDragStart:function(e){_e(this.el,this.options.dragStartEventName),"function"==typeof this.options.onDragStart&&this.options.onDragStart(this,e),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(e)},handleDrag:function(e){var t=this.getTouches(e)[0];this.drag(t,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=t},handleDragEnd:function(){_e(this.el,this.options.dragEndEventName),"function"==typeof this.options.onDragEnd&&this.options.onDragEnd(this,event),this.end()},handleZoomStart:function(e){_e(this.el,this.options.zoomStartEventName),"function"==typeof this.options.onZoomStart&&this.options.onZoomStart(this,e),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(e,t){var n=this.getTouchCenter(this.getTouches(e)),i=t/this.lastScale;this.lastScale=t,this.nthZoom+=1,this.nthZoom>3&&(this.scale(i,n),this.drag(n,this.lastZoomCenter)),this.lastZoomCenter=n},handleZoomEnd:function(){_e(this.el,this.options.zoomEndEventName),"function"==typeof this.options.onZoomEnd&&this.options.onZoomEnd(this,event),this.end()},handleDoubleTap:function(e){var t,n=this.getTouches(e)[0],i=this.zoomFactor>1?1:this.options.tapZoomFactor,o=this.zoomFactor,a=g()(t=function(e){this.scaleTo(o+e*(i-o),n)}).call(t,this);this.hasInteraction||(this.isDoubleTap=!0,o>i&&(n=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,a,this.swing),_e(this.el,this.options.doubleTapEventName),"function"==typeof this.options.onDoubleTap&&this.options.onDoubleTap(this,e))},computeInitialOffset:function(){this.options.initScale?this.initialOffset={x:-Math.abs(this.el.offsetWidth*this.getInitialZoomFactor()-this.container.offsetWidth)/2,y:-Math.abs(this.el.offsetHeight*this.getInitialZoomFactor()-this.container.offsetHeight)/2}:this.initialOffset={x:0,y:0}},resetOffset:function(){this.offset.x=this.initialOffset.x,this.offset.y=this.initialOffset.y},isImageLoaded:function(e){return"IMG"===e.nodeName?e.complete&&0!==e.naturalHeight:ae()(t=re()(e.querySelectorAll("img"))).call(t,this.isImageLoaded);var t},setupOffsets:function(){this.options.setOffsetsOnce&&this._isOffsetsSet||(this._isOffsetsSet=!0,this.computeInitialOffset(),this.resetOffset())},sanitizeOffset:function(e){var t=this.el.offsetWidth*this.getInitialZoomFactor()*this.zoomFactor,n=this.el.offsetHeight*this.getInitialZoomFactor()*this.zoomFactor,i=t-this.getContainerX()+this.options.horizontalPadding,o=n-this.getContainerY()+this.options.verticalPadding,a=Math.max(i,0),l=Math.max(o,0),r=Math.min(i,0)-this.options.horizontalPadding,c=Math.min(o,0)-this.options.verticalPadding;return{x:Math.min(Math.max(e.x,r),a),y:Math.min(Math.max(e.y,c),l)}},scaleTo:function(e,t){this.scale(e/this.zoomFactor,t)},scale:function(e,t){e=this.scaleZoomFactor(e),this.addOffset({x:(e-1)*(t.x+this.offset.x),y:(e-1)*(t.y+this.offset.y)}),_e(this.el,this.options.zoomUpdateEventName),"function"==typeof this.options.onZoomUpdate&&this.options.onZoomUpdate(this,event)},scaleZoomFactor:function(e){var t=this.zoomFactor;return this.zoomFactor*=e,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/t},canDrag:function(){return this.options.draggableUnzoomed||!((e=this.zoomFactor)>(t=1)-.01&&e<t+.01);var e,t},drag:function(e,t){t&&(this.options.lockDragAxis?Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?this.addOffset({x:-(e.x-t.x),y:0}):this.addOffset({y:-(e.y-t.y),x:0}):this.addOffset({y:-(e.y-t.y),x:-(e.x-t.x)}),_e(this.el,this.options.dragUpdateEventName),"function"==typeof this.options.onDragUpdate&&this.options.onDragUpdate(this,event))},getTouchCenter:function(e){return this.getVectorAvg(e)},getVectorAvg:function(e){var n,i;return{x:ie()(n=I()(e).call(e,(function(e){return e.x}))).call(n,t)/e.length,y:ie()(i=I()(e).call(e,(function(e){return e.y}))).call(i,t)/e.length}},addOffset:function(e){this.offset={x:this.offset.x+e.x,y:this.offset.y+e.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(e){var t=this.sanitizeOffset(e);return t.x!==e.x||t.y!==e.y},sanitizeOffsetAnimation:function(){var e,t=this.sanitizeOffset(this.offset),n=this.offset.x,i=this.offset.y,o=g()(e=function(e){this.offset.x=n+e*(t.x-n),this.offset.y=i+e*(t.y-i),this.update()}).call(e,this);this.animate(this.options.animationDuration,o,this.swing)},zoomOutAnimation:function(){var e;if(1!==this.zoomFactor){var t=this.zoomFactor,n=this.getCurrentZoomCenter(),i=g()(e=function(e){this.scaleTo(t+e*(1-t),n)}).call(e,this);this.animate(this.options.animationDuration,i,this.swing)}},updateAspectRatio:function(){this.unsetContainerY(),this.setContainerY(this.container.parentElement.offsetHeight)},getInitialZoomFactor:function(){if(!this.options.initScale)return 1;this.container.offsetWidth,this.el.offsetWidth,this.container.offsetHeight,this.el.offsetHeight},getAspectRatio:function(){return this.el.offsetWidth/this.el.offsetHeight},getCurrentZoomCenter:function(){var e=this.offset.x-this.initialOffset.x,t=-1*this.offset.x-e/(1/this.zoomFactor-1),n=this.offset.y-this.initialOffset.y;return{x:t,y:-1*this.offset.y-n/(1/this.zoomFactor-1)}},getTouches:function(e){var t,n=this.container.getBoundingClientRect(),i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft,a=n.top+i,l=n.left+o;return I()(t=r()(Array.prototype).call(e.touches)).call(t,(function(e){return{x:e.pageX-l,y:e.pageY-a}}))},animate:function(e,t,n,i){var o,a=(new Date).getTime(),l=g()(o=function(){if(this.inAnimation){var o=(new Date).getTime()-a,r=o/e;o>=e?(t(1),i&&i(),this.update(),this.stopAnimation(),this.update()):(n&&(r=n(r)),t(r),this.update(),requestAnimationFrame(l))}}).call(o,this);this.inAnimation=!0,requestAnimationFrame(l)},stopAnimation:function(){this.inAnimation=!1},swing:function(e){return-Math.cos(e*Math.PI)/2+.5},getContainerX:function(){return this.container.offsetWidth},getContainerY:function(){return this.container.offsetHeight},setContainerY:function(e){return this.container.style.height=e+"px"},unsetContainerY:function(){this.container.style.height=null},setupMarkup:function(){var e,t;this.container=(e='<div class="pinch-zoom-container"></div>',(t=document.implementation.createHTMLDocument("")).body.innerHTML=e,re()(t.body.children)[0]),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el),this.container.style.overflow="hidden",this.container.style.position="relative",this.el.style.webkitTransformOrigin="0% 0%",this.el.style.mozTransformOrigin="0% 0%",this.el.style.msTransformOrigin="0% 0%",this.el.style.oTransformOrigin="0% 0%",this.el.style.transformOrigin="0% 0%",this.el.style.position="absolute"},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){var e,t,i,o=this;(n(this.container,this),window.addEventListener("resize",g()(e=this.update).call(e,this)),b()(t=re()(this.el.querySelectorAll("img"))).call(t,(function(e){var t;e.addEventListener("load",g()(t=o.update).call(t,o))})),"IMG"===this.el.nodeName)&&this.el.addEventListener("load",g()(i=this.update).call(i,this))},update:function(e){var t;this.updatePlaned||(this.updatePlaned=!0,window.setTimeout(g()(t=function(){var t;this.updatePlaned=!1,e&&"resize"===e.type&&(this.updateAspectRatio(),this.setupOffsets()),e&&"load"===e.type&&(this.updateAspectRatio(),this.setupOffsets());var n=this.getInitialZoomFactor()*this.zoomFactor,i=-this.offset.x/n,o=-this.offset.y/n,a="scale3d("+n+", "+n+",1) translate3d("+i+"px,"+o+"px,0px)",l="scale("+n+", "+n+") translate("+i+"px,"+o+"px)",r=g()(t=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}).call(t,this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,r(),this.el.style.webkitTransform=a,this.el.style.mozTransform=l,this.el.style.msTransform=l,this.el.style.oTransform=l,this.el.style.transform=a):(this.is3d&&(this.clone=this.el.cloneNode(!0),this.clone.style.pointerEvents="none",this.container.appendChild(this.clone),window.setTimeout(r,200)),this.el.style.webkitTransform=l,this.el.style.mozTransform=l,this.el.style.msTransform=l,this.el.style.oTransform=l,this.el.style.transform=l,this.is3d=!1)}).call(t,this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var n=function(e,t){var n=null,i=0,o=null,a=null,l=function(e,i){if(n!==e){if(n&&!e)switch(n){case"zoom":t.handleZoomEnd(i);break;case"drag":t.handleDragEnd(i)}switch(e){case"zoom":t.handleZoomStart(i);break;case"drag":t.handleDragStart(i)}}n=e},r=function(e){2===i?l("zoom"):1===i&&t.canDrag()?l("drag",e):l(null,e)},c=function(e){var t;return I()(t=re()(e)).call(t,(function(e){return{x:e.pageX,y:e.pageY}}))},s=function(e,t){var n,i;return n=e.x-t.x,i=e.y-t.y,Math.sqrt(n*n+i*i)},d=function(e){e.stopPropagation(),e.preventDefault()},u=!0;e.addEventListener("touchstart",(function(e){t.enabled&&(u=!0,i=e.touches.length,function(e){var a=(new Date).getTime();if(i>1&&(o=null),a-o<300)switch(d(e),t.handleDoubleTap(e),n){case"zoom":t.handleZoomEnd(e);break;case"drag":t.handleDragEnd(e)}else t.isDoubleTap=!1;1===i&&(o=a)}(e))})),e.addEventListener("touchmove",(function(e){if(t.enabled&&!t.isDoubleTap){if(u)r(e),n&&d(e),a=c(e.touches);else{switch(n){case"zoom":2==a.length&&2==e.touches.length&&t.handleZoom(e,function(e,t){var n=s(e[0],e[1]);return s(t[0],t[1])/n}(a,c(e.touches)));break;case"drag":t.handleDrag(e)}n&&(d(e),t.update())}u=!1}})),e.addEventListener("touchend",(function(e){t.enabled&&(i=e.touches.length,r(e))}))};return e}();window.PinchZoom=pe;var me=pe;i.a.controller("showImgCtrl",["$scope","dataService","contextService","$hcDialog","$hcForm","$filter","$rootScope","$timeout","$state","printService","hcAutoCopyService","$q","watermark","$commonAction",function(e,t,n,i,o,a,l,c,s,d,_,p,m,f){var h=f.createCommonAction(e);e.auth=n.getContext("auth"),e.init=function(){var t,i,o,l,r,d,u,_,p,m,f,h,g,v,b,y,w,x,k;e.client=window.client,e.roles=null!==(t=null===(i=n.getContext("auth"))||void 0===i?void 0:i.roles)&&void 0!==t?t:{},e.is_admin=(null===(o=e.roles)||void 0===o?void 0:o.onlyoneowner)||(null===(l=e.roles)||void 0===l?void 0:l["sys-manager"]),e.mobile_show_mode=(null===(r=e.params)||void 0===r||null===(d=r.view_config)||void 0===d?void 0:d.view)||(null===(u=s.params)||void 0===u?void 0:u.view_config)&&(null===(_=JSON.parse(null===(p=s.params)||void 0===p?void 0:p.view_config))||void 0===_?void 0:_.view),e.double_display_setting=null!==(m=null===(f=e.params)||void 0===f||null===(h=f.view_config)||void 0===h?void 0:h.double_display)&&void 0!==m&&m,e.double_display=e.double_display_setting,e.display_setting=null!==(g=null===(v=e.params)||void 0===v||null===(b=v.view_config)||void 0===b?void 0:b.display_setting)&&void 0!==g?g:"full-content",e.btn_count=(null===(y=e.params)||void 0===y||null===(w=y.view_config)||void 0===w?void 0:w.btn_count)||3,e.show_download=null===(x=e.params)||void 0===x||null===(k=x.view_config)||void 0===k?void 0:k.download_src,"mobile"===e.client&&(e.operate_list=a("arrayMerge")([{label:"上一页",key:"pre",sequence:20,options:{mobile_sequence:20},func:e.previousPage,hide:function(){return"scroll"===e.mobile_show_mode||0===e.index}},{label:"下一页",key:"post",sequence:30,options:{mobile_sequence:30},func:e.nextPage,hide:function(){var t;return"scroll"===e.mobile_show_mode||e.index+1===(null===(t=e.imgs)||void 0===t?void 0:t.length)}},{label:"关闭",key:"close",func:e.close}],e.params.operate_list||[]),e.$dialog.operates(e.operate_list,e.parseAction),c((function(){e.$dialog.list_btn_model.outer_btn_count=e.btn_count,e.$dialog.list_btn_model.setDebounce(100)}))),e.current=0,c((function(){return e.show()})),e.listenKeyUp()},e.parseAction=function(){var t=C()(x.a.mark((function t(n){var i,o,a=arguments;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>1&&void 0!==a[1]?a[1]:{},t.next=3,h.canEnterAction(n,o,e.getExprContext());case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=8,h.validateAction(n,o,e.getExprContext());case 8:if(!Z()(n.action)){t.next=13;break}return n.key&&(o["".concat(n.key,"_action")]=n),t.next=12,h.actionChain(n.action,o,{},(function(t,n,i){return e.parseAction(t,i)}));case 12:return t.abrupt("return",t.sent);case 13:if(!h.isCommonAction(n)){t.next=15;break}return t.abrupt("return",h.execCommonAction(n,o,e.getExprContext()));case 15:t.t0=n.action,t.next="REFRESH"===t.t0?18:19;break;case 18:return t.abrupt("return",e.init());case 19:return t.abrupt("return",null===(i=n.func)||void 0===i?void 0:i.call(n,o));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getExprContext=function(){return{ENV:function(){return e.getEnvironmentParams()},AUTH:function(){return e.auth}}},e.getEnvironmentParams=function(){return angular.extend({},s.params,{imgs:e.params.imgs,index:e.params.index,operate_list:e.params.operate_list,view_config:e.params.view_config})},e.show=function(){if(e.imgs=e.params.imgs,e.double_display){e.imgs=[];for(var t=0;t<e.params.imgs.length;t+=2){var n;e.imgs.push(r()(n=e.params.imgs).call(n,t,t+2))}}e.params.index?e.index=e.params.index:e.index=0,"mobile"===e.client&&X()((function(){var t=document.getElementById("show-img-page");e.pz=new me(t,{zoomFactor:1,zoomOutFactor:.1,tapZoomFactor:10,minZoom:.1,maxZoom:10,initScale:!1})}),100),"mobile"===e.client&&"scroll"===e.mobile_show_mode?(e.index_scroll=0,X()((function(){var t;e.imgList=G()(t=angular.element(document.getElementById("show-img-page"))).call(t,".imgs-container img"),e.lazyload()}),100),e.mobile_scroll_show_picture()):e.setPicSize(e.index),e.current_page=1,e.total_page=e.imgs.length},e.sleep=function(e){return new O.a((function(t,n){e.onload=function(){t()}}))},e.lazyload=C()(x.a.mark((function t(){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.index_scroll;case 1:if(!(n<e.imgList.length)){t.next=9;break}return e.imgList[n].src=e.imgList[n].getAttribute("data-src"),e.index_scroll=n+1,t.next=6,e.sleep(e.imgList[n]);case 6:n++,t.next=1;break;case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t)}))),e.mobile_scroll_show_picture=function(){document.querySelector(".hc-dialog-content").addEventListener("scroll",te()(e.lazyload,600)),window.addEventListener("resize",te()(e.lazyload,600))},e.currentImgLoader=null,e.setPicSize=function(){var t=C()(x.a.mark((function t(n){var i,o,a,l,r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=$("#show-img-page .img-container"),e.max_width=i.width()-20,e.max_height=i.height(),e.double_display){for(o=[],a=function(t){o[t]=new O.a((function(i){var o=new Image;o.src=e.imgs[n][t],o.onload=function(){i(o)}}))},l=0;l<e.imgs[n].length;l++)a(l);O.a.all(o).then((function(t){b()(t).call(t,(function(t){e.imageOnloadCallback(t)}))}))}else r=e.imgs[n],(c=new Image).src=r,c.onload=function(){e.imageOnloadCallback(c)};e.watermarkSetting={ele_id:"with-water-mark",watermark_txt:e.auth.employee.name+" \n "+e.auth.user.cell_phone},X()((function(){m.addWatermarkWhenConfig(e.watermarkSetting)}),100);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.imageOnloadCallback=function(t){if(!e.pic_width)switch(e.display_setting){case"full-width":e.pic_width=e.double_display?e.max_width/2:e.max_width,e.pic_height=Math.round(t.height/t.width*e.pic_width);break;case"full-height":e.pic_height=e.max_height,e.pic_width=Math.round(t.width/t.height*e.pic_height);break;case"full-content":default:t.width>=t.height?t.width>e.max_width?(e.pic_width=e.max_width,e.pic_height=Math.round(t.height/t.width*e.pic_width)):(e.pic_width=t.width,e.pic_height=t.height):t.height>e.max_height?(e.pic_height=e.max_height,e.pic_width=Math.round(t.width/t.height*e.pic_height)):(e.pic_width=t.width,e.pic_height=t.height)}e.pre_pic_width=JSON.parse(F()(e.pic_width)),e.pre_pic_height=JSON.parse(F()(e.pic_height));var n={};n="pc"===window.client?{height:e.pre_pic_height+"px",margin:"10px auto"}:{width:"100%"},e.double_display?($("#img-block").css(n).attr("src",e.imgs[e.index][0]),$("#img-block-right").css(n).attr("src",e.imgs[e.index][1]||"")):$("#img-block").css(n).attr("src",e.imgs[e.index]),window.matchMedia("(orientation: portrait)").matches||"pc"===window.client||$(".img-container").css("height","auto")},e.nextPage=function(){e.index+1===e.imgs.length?l.show_warning("已经是最后一页了"):(e.index=e.index+1,e.setPicSize(e.index),e.current_page=e.index+1)},e.previousPage=function(){e.index-1<0?l.show_warning("已经是第一页了"):(e.index=e.index-1,e.setPicSize(e.index),e.current_page=e.index+1)},e.copyImgIndex=function(){var t=e.imgs[e.index];t=r()(t).call(t,V()(t).call(t,"/")+1),_.copy(t),l.show_warning("已复制图片index: "+t)},e.add=function(){if(e.pic_height>=3*e.pre_pic_height)l.show_warning("已放大到最大尺寸！！！");else{e.pic_height=e.pic_height+.2*e.pre_pic_height,e.pic_width=e.pic_width+.2*e.pre_pic_width;var t={height:e.pic_height,width:e.pic_width};$("#img-block").css(t),$("#img-block-right").css(t)}},e.minus=function(){if(e.pic_height<=.5*e.pre_pic_height)l.show_warning("已缩小到最小尺寸！！！");else{e.pic_height=e.pic_height-.2*e.pre_pic_height,e.pic_width=e.pic_width-.2*e.pre_pic_width;var t={height:e.pic_height,width:e.pic_width};$("#img-block").css(t),$("#img-block-right").css(t)}},e.rotatePic=function(){e.current=(e.current+90)%360;var t,n,i={transform:"rotate(".concat(e.current,"deg)")},o=0;90!==e.current&&270!==e.current||(e.pic_height>=e.pic_width?(o=K()(e.pic_height-e.pic_width)/2,i={transform:u()(t="translateX(".concat(o,"px) rotate(")).call(t,e.current,"deg)")}):(o=K()(e.pic_width-e.pic_height)/2,i={transform:u()(n="translateY(".concat(o,"px) rotate(")).call(n,e.current,"deg)")}));$("#img-block").css(i)},e.close=function(){console.log("dialog_close"),e.$dialog.dialog_close()};var g,v={},y=!1,w=!1;e.mousedown=function(e){e.preventDefault(),v.preX=e.clientX,v.preY=e.clientY,v.moveStart=!0,e.currentTarget.style.cursor="grabbing"},e.mousemove=function(e){if(e.preventDefault(),v.moveStart){var t=e.clientX-v.preX,n=e.clientY-v.preY;v.preX=e.clientX,v.preY=e.clientY,angular.element(".img-container")[0].scrollBy({left:-t,top:-n,behavior:"instant"})}else{if(w)return;y?(c.cancel(g),g=c((function(){angular.element(".zoom-block").css("opacity","0")}),1e3),y=!1):(y=!0,angular.element(".zoom-block").css("opacity","1"))}},e.mouseup=function(e){e.preventDefault(),v.moveStart=!1,e.currentTarget.style.cursor="grab"},e.zoomMouseover=function(){w=!0,g&&c.cancel(g),angular.element(".zoom-block").css("opacity","1")},e.zoomMouseleave=function(){w=!1,angular.element(".zoom-block").css("opacity","0")},window.addEventListener("orientationchange",(function(){window.matchMedia("(orientation: portrait)").matches?$(".img-container").css("height","auto"):$(".img-container").css("height","100%")})),e.switchDisplay=function(){e.double_display=!e.double_display,e.show()},e.download=function(){var t,n,i,o;window.open(u()(t=u()(n="".concat(location.protocol+"//"+location.host+window.hcm_wengen)).call(n,null===(i=e.params)||void 0===i||null===(o=i.view_config)||void 0===o?void 0:o.download_src)).call(t,window.hcm_env_pre))};var k=function(t){var n=window.event?t.keyCode:t.which;38===n&&e.previousPage(),40===n&&e.nextPage()};e.listenKeyUp=function(){document.addEventListener("keyup",k)},e.$on("$destroy",(function(){"pc"===window.client&&document.removeEventListener("keyup",k)}))}]);n("zryR");i.a.factory("workflowMsgService",["$q","contextService","dataService",function(e,t,n){return{sendMsg:function(e){return n.callHcmOpenApi("message.send.message",e,null,!0)}}}]),i.a.factory("CompanyManagerService",["$q","$http","dataService",function(e,t,n){var i={getCompanyInfo:function(){return n.callHcmOpenApi("company.info",{},null,!0)},setCompanyDebug:function(e){return n.callHcmOpenApi("setting.company.debug.set",{is_debug:e},null,!0)},setCompanyName:function(e){return n.callHcmOpenApi("setting.company.name.set",{name:e},null,!0)},setCompanySpecialTitle:function(e){return n.callHcmOpenApi("setting.company.special_title.set",{title:e},null,!0)},setCompanyBackground:function(e){return n.callHcmOpenApi("setting.company.background.set",{img:e},null,!0)},setOfflineUser:function(e){return n.callHcmOpenApi("setting.company.offline_user.set",{user:e},null,!0)},setAdapterUrl:function(e){return n.callHcmOpenApi("setting.company.adapter_url.set",{url:e},null,!0)},setOfflinePassword:function(e){return n.callHcmOpenApi("setting.company.offline.password.set",{comp_key:e},null,!0)},setCompanyStatus:function(e){return n.callHcmOpenApi("setting.company.status.set",{status:e},null,!0)},setSystemNotGrantSelf:function(e){return n.callHcmOpenApi("setting.company.system_not_grant_self.set",{system_not_grant_self:e},null,!0)},setCompanyColor:function(e){return n.callHcmOpenApi("setting.company.color.set",{color:e},null,!0)},setCompanySpecialStyle:function(e){return n.callHcmOpenApi("setting.company.special_style.set",{special_style:e},null,!0)},setCompanyLocation:function(e){return n.callHcmOpenApi("setting.company.location.set",{location:e},null,!0)},setCompanyDomain:function(e){return n.callHcmOpenApi("setting.company.domain.set",{domain:e},null,!0)},setCompanyLogo:function(e){return n.callHcmOpenApi("setting.company.logo.set",{logo:e},null,!0)},getAppType:function(){return n.callHcmOpenApi("setting.company.app.type",{},null,!0)},getAppMenu:function(e){return n.callHcmOpenApi("setting.company.app.menu",{app_type:e},null,!0)},getWeChatBindInfo:function(e,t,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n.callHcmOpenApi("setting.company.wechat.bind.info",{app_type:e,refresh:t&&"0"!==t?"1":"0",depart_id:i?K()(i):i,company_id:o,except:[17003]},null,!0)},getWeChatMessageType:function(e){return n.callHcmOpenApi("setting.company.wechat.message.template.type",{app_type:e},null,!0)},getWeChatMessageTemplate:function(e,t,i){return n.callHcmOpenApi("setting.company.wechat.message.template.info",{app_type:e,message_type:t,depart_id:i},null,!0)},offlineServerConnectionTest:function(){return n.callHcmOpenApi("hcmconnection.connection.owner.test",{},null,!0)},setWeChatMessageTemplate:function(e,t,i,o,a){return n.callHcmOpenApi("setting.company.wechat.message.template.set",{app_type:e,message_type:t,template_id:i,template_data:o,depart_id:a},null,!0)}};return i}]);var fe=n("mrSG"),he=n("bQov"),ge=function(){function e(e,t,n,i,o){var a=this;this.openDrafts=function(e,t,n){return a.$hcDialog.getDialog(Object(he.a)("HcmDrafts",null==n?void 0:n.state)).params({selectorType:2,filter_dict:Object(fe.a)({model:a.$filter("getFieldByPath")(["model_meta","model"],e)||a.$filter("getFieldByPath")(["c_model"],e)||a.$filter("getFieldByPath")(["model"],e),state:a.$filter("getFieldByPath")(["model_meta","state"],e)||a.$filter("getFieldByPath")(["meta_state"],e)||a.$filter("getFieldByPath")(["state"],e)||null},(null==n?void 0:n.filter_dict)||{}),draftAction:t}).title("草稿箱").show()},this.createDraft=function(e,t){return a.CRUDService.createItem({model:a.$filter("getFieldByPath")(["model_meta","model"],e)||a.$filter("getFieldByPath")(["model_name"],e)||a.$filter("getFieldByPath")(["model"],e),state:a.$filter("getFieldByPath")(["model_meta","state"],e)||a.$filter("getFieldByPath")(["meta_state"],e)||a.$filter("getFieldByPath")(["state"],e),draft:t,origin_id:a.$filter("getFieldByPath")(["id"],t),mode:a.$filter("getFieldByPath")(["is_field_list_info"],e)?"new":a.$filter("getFieldByPath")(["mode"],e)})},this.editDraft=function(e,t){return a.CRUDService.editItem(a.$filter("getFieldByPath")(["alter","draft_id"],e),{model:a.$filter("getFieldByPath")(["model_meta","model"],e)||a.$filter("getFieldByPath")(["model_name"],e)||a.$filter("getFieldByPath")(["model"],e),state:a.$filter("getFieldByPath")(["model_meta","state"],e)||a.$filter("getFieldByPath")(["meta_state"],e)||a.$filter("getFieldByPath")(["state"],e),draft:t,origin_id:a.$filter("getFieldByPath")(["id"],t),mode:a.$filter("getFieldByPath")(["is_field_list_info"],e)?"new":a.$filter("getFieldByPath")(["mode"],e)})},this.saveDraft=function(e,t,n){return Object(fe.c)(a,void 0,void 0,(function(){var i=this;return Object(fe.e)(this,(function(o){return[2,new O.a((function(o,a){return Object(fe.c)(i,void 0,void 0,(function(){return Object(fe.e)(this,(function(i){switch(i.label){case 0:return this.$filter("getFieldByPath")(["alter","draft_id"],e)?[4,this.editDraft(e,t)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this.createDraft(e,t)];case 3:i.sent(),i.label=4;case 4:return n||this.$rootScope.show_warning("已保存至草稿箱!"),!n&&this.$filter("getFieldByPath")(["alter","draft_id"],e)?a({draft_id:this.$filter("getFieldByPath")(["alter","draft_id"],e)}):o({}),[2]}}))}))}))]}))}))},this.checkDraft=function(e){return new O.a((function(t,n){a.$filter("getFieldByPath")(["alter","draft_id"],e)||!a.$filter("getFieldByPath")(["data","id"],e)?t():a.CRUDService.getItemList(null,{model:a.$filter("getFieldByPath")(["model_name"],e)||a.$filter("getFieldByPath")(["model"],e),state:a.$filter("getFieldByPath")(["meta_state"],e)||a.$filter("getFieldByPath")(["state"],e),origin_id:a.$filter("getFieldByPath")(["data","id"],e)},1,20,null,"list").then((function(e){var n;(null===(n=e.list)||void 0===n?void 0:n.length)?t({draft_id:e.list[0].id,draft:e.list[0].draft,mode:e.list[0].mode}):t(null)}))}))},this.removeDraft=function(e){var t=a.$filter("getFieldByPath")(["alter","draft_id"],e);return t&&a.CRUDService.removeItem(t)},this.CRUDService=e.getModelService("HcmDrafts"),this.$filter=t,this.$hcDialog=i,this.$rootScope=o,this.auth=n.getContext("auth")}return e.$inject=["BaseCRUDService","$filter","contextService","$hcDialog","$rootScope"],e}();i.a.service("hcmDraftsService",ge)},zl2E:function(e,t,n){"use strict";n("pNMO"),n("4Brf"),n("sMBO"),n("07d7"),n("JfAA");var i=n("LYCE"),o=n.n(i),a=n("HnXd"),l=n.n(a),r=n("qjzJ"),c=n.n(r),s=n("fHi0"),d=n.n(s),u=n("5PDf"),_=n.n(u),p=n("OWCx"),m=n.n(p),f=n("nhkr"),h=n.n(f),g=n("+oHS"),v=n.n(g),b=n("WxoT"),y=n.n(b),w=n("04Ix"),x=n.n(w),k=n("FLGM"),$=n.n(k),O=n("6UaR"),D=n.n(O),C=n("RXMP"),M=n.n(C),S=n("M5Mt"),E=n.n(S),P=n("o+MX"),j=n.n(P),T=n("TEMH"),A=n.n(T),I=n("/FZm"),L=n.n(I),F=n("a0dU"),R=n.n(F),B=(n("ls82"),n("SPx3")),U=n.n(B),q=n("xweI"),W=n.n(q),z=n("8Auy"),N=n("R91f"),K=n("gj9F"),H=n("gh/P"),V=n("1hbj"),Y=n("mshF");function G(e,t){var n=v()(e);if(m.a){var i=m()(e);t&&(i=_()(i).call(i,(function(t){return d()(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)M()(n=G(Object(i),!0)).call(n,(function(t){x()(e,t,i[t])}));else if(c.a)l()(e,c()(i));else{var a;M()(a=G(Object(i))).call(a,(function(t){o()(e,t,d()(i,t))}))}}return e}window.app.controller("BaseCRUDViewController",["templateService","$rootScope","$scope","$hcDialog","CRUDService","dataService","InfoDialog","$hcView","$hcListBtn","$hcPaging","$state","$q","$filter","commonSelectorService","contextService","documentPreviewService","workflowOnlineService","wfCreateService","$commonAction",function(e,t,n,i,o,a,l,r,c,s,d,u,_,p,m,f,g,b,w){n.client=window.client,n.auth=m.getContext("auth");var k=w.createCommonAction(n),O=d.params.id;n.init=U()(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.initBefore(),e.t0=n.initBeforeAsync,!e.t0){e.next=5;break}return e.next=5,n.initBeforeAsync();case 5:n.initView().then((function(){n.fetchData()}));case 6:case"end":return e.stop()}}),e)}))),n.initView=function(){var e=u.defer();return n.view_btn_model=c.createListBtn().$setActionParser(n.parseAction),n.view_model=r.createView().$setActionFunc(n.actionProcess),n.view_btn_meta&&n.view_btn_model.$setMeta(n.view_btn_meta),n.view_meta?e.resolve():n.loadModelMeta().then((function(){e.resolve()})),e.promise},n.getMetaProcessor=function(){return o.getBizMeta("view",n.getMetaState(),!1,n.getModelMetaExtendParams())},n.getModelMetaExtendParams=function(){var e,t,i;return(n.$dialog?null===(e=n.params)||void 0===e?void 0:e.meta_params:JSON.parse(null!==(t=null===(i=n.getEnvironmentParams())||void 0===i?void 0:i.meta_params)&&void 0!==t?t:"{}"))||{}},n.loadModelMeta=function(){var e=u.defer();return n.getMetaProcessor().then(function(){var t=U()(R.a.mark((function t(i){var a,l,r,c,s,u,p,m;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.individualParse(i),n.model_meta=i,n.setTitle(i.description),n.title=n.model_meta.description?n.metaParse(n.model_meta.description):n.model_meta.model,n.$dialog&&n.$dialog.title(_("valueToFunc")(n.title)()||n.model_meta.model),n.view_meta=n.metaParse(i.fields),n.initMetaHooks(),n.modiFieldBefore&&n.view_model.$setModiFieldBefore(n.modiFieldBefore),n.model_meta.fields=n.view_meta,n.$dialog||"1"!==(null===(a=n.auth)||void 0===a||null===(l=a.company_setting)||void 0===l?void 0:l.open_history_back_action)||(null===(u=i.actions)||void 0===u?void 0:L()(u).call(u,(function(e){return"back"===e.key})))||i.actions.unshift({key:"back",action:"BACK",label:"返回",hide:function(){var e,t;return 1===window.history.length||"no_back"===((null===(e=d.params)||void 0===e?void 0:e.no_bottom)||(null===(t=n.params)||void 0===t?void 0:t.no_bottom))}}),p=function(e,t){return A()(e).call(e,(function(e){return e.key===t}))},m=function(e){var t;e=W()(e,["sequence"]);var n=p(e,"back");return-1!==n&&null==e[n].sequence&&(e=j()(t=E()(e).call(e,n,1)).call(t,e)),e},n.view_btn_model.$setMeta(n.roleParse(m(_("arrayMerge")(n.view_btn_meta,n.actionParse(i.actions))))),n.view_groups=n.metaParse(i.groups||[]),n.model_meta.groups=n.view_groups,n.view_config=n.metaParse(i.view_config||{}),n.model_meta.view_config=n.view_config,n.refresh_nav_attachment=null!==(r=n.view_config.refresh_nav_attachment)&&void 0!==r?r:n.refresh_nav_attachment,n.transChildren(),n.view_model.setViewMeta(n.model_meta),n.view_btn_model.$setShowMax((null===(c=n.view_config)||void 0===c?void 0:c.max_btn_length)||4),!n.model_meta.modi_state){t.next=24;break}return t.next=24,o.getBizMeta("info",n.model_meta.modi_state).then((function(e){n.view_model.$setModiMeta(n.metaParse(e.fields)),n.view_model.$setModiRelation(e.form_relations||[],o)}));case 24:return n.metaLoaded(i),t.next=27,null===(s=n.metaLoadedAsync)||void 0===s?void 0:s.call(n,n.getEnvironmentParams());case 27:e.resolve();case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.promise},n.roleParse=function(e){var t=e,i=function(e){!e.disabled&&e.roles&&(e.disabled=_("actionPermission")(e.roles,{DATA:function(){return n.view_model.data},AUTH:function(){return n.auth},SCOPE:function(){return n},STATE:function(){return d}}))};return M()(t).call(t,(function(e){var t;i(e),D()(e.actions)&&M()(t=e.actions).call(t,(function(e){return i(e)}))})),t},n.transChildren=function(){var e;(n.view_meta_object=_("toObj")(n.view_meta),n.model_meta.childrens&&n.model_meta.childrens.length)&&$()(e=n.model_meta.childrens).call(e,(function(e){var t,i,o;n.view_meta_object[e.key]&&e.is_form&&(n.view_meta_object[e.key].options=angular.extend(e,n.view_meta_object[e.key].options||{}),n.view_meta_object[e.key].options.mode=null===(t=n.params)||void 0===t?void 0:t.mode,"new"!==(null===(i=n.params)||void 0===i?void 0:i.mode)&&(n.view_meta_object[e.key].options.master_id=null===(o=n.params)||void 0===o?void 0:o.id))}))},n.parseAction=function(){var e=U()(R.a.mark((function e(l){var r,c,s,d,u,p,m,f,h,g,v,b,y,w,x,$,O,C,M,S,E,P,j,T,A=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=A.length>1&&void 0!==A[1]?A[1]:{},d=n.model_meta.description,u=null===(r=n.view_model)||void 0===r?void 0:r.data,e.next=5,k.canEnterAction(l,s,n.getExprContext());case 5:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=10,k.validateAction(l,s,n.getExprContext());case 10:if(m=function(){var e=U()(R.a.mark((function e(t,n,o){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_("valueToFunc")(t.confirm)()){e.next=34;break}if("pc"!==window.client){e.next=17;break}if(e.t0=i,!t.confirm_tip){e.next=9;break}return e.next=6,_("valueToFunc")(t.confirm_tip)();case 6:e.t1=e.sent,e.next=10;break;case 9:e.t1=o||"确认执行"+(n||"")+_("valueToFunc")(t.label)()+"操作？";case 10:return e.t2=e.t1,e.t3=[{caption:t.confirm_label||_("translate")("confirm")}],e.t4=t.confirm_style,e.next=15,e.t0.confirm.call(e.t0,e.t2,e.t3,e.t4);case 15:e.next=34;break;case 17:if("mobile"!==window.client){e.next=34;break}if(a=[{label:"取消",key:"close"},{label:t.confirm_label||"确认",key:"confirm"}],e.t5=i,!t.confirm_tip){e.next=26;break}return e.next=23,_("valueToFunc")(t.confirm_tip)();case 23:e.t6=e.sent,e.next=27;break;case 26:e.t6=o||"确认执行"+(n||"")+_("valueToFunc")(t.label)()+"操作？";case 27:return e.t7=e.t6,e.t8={theme:"light-theme",operates:a},e.t9=t.confirm_style,e.next=32,e.t5.prompt.call(e.t5,e.t7,e.t8,e.t9);case 32:e.next=34;break;case 34:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),f=null,!l.confirm_api_params||!l.confirm_api){e.next=24;break}return h="function"==typeof l.confirm_api_params?_("valueToFunc")(l.confirm_api_params)(select_item,n.getEnvironmentParams()):l.confirm_api_params,e.prev=14,e.next=17,a.callHcmOpenApi(l.confirm_api,h);case 17:g=e.sent,e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(14),e.abrupt("return");case 23:f=l.parse_message_func?l.parse_message_func(g):g.message;case 24:return e.next=26,m(l,d,f);case 26:if(!l.func||!l.func_first){e.next=28;break}return e.abrupt("return",l.func(s,s));case 28:if(!D()(l.action)){e.next=33;break}return l.key&&(s["".concat(l.key,"_action")]=l),e.next=32,k.actionChain(l.action,s,{},(function(e,t,i){return n.parseAction(e,i)}));case 32:return e.abrupt("return",e.sent);case 33:if(!k.isCommonAction(l)){e.next=35;break}return e.abrupt("return",k.execCommonAction(l,s,n.getExprContext()));case 35:e.t1=l.action,e.next="EDIT"===e.t1?38:"UPDATE"===e.t1?39:"SETUP"===e.t1?41:"FLEX_FIELD"===e.t1?43:"CUSTOM_ACTION"===e.t1?45:"ACTION_PARAM_EX"===e.t1?47:"ACTION"===e.t1?49:"C_ACTION"===e.t1?51:"SHOW_SELECTOR_DIALOG"===e.t1?53:"DYNAMIC_INFO"===e.t1?72:"VIEW_INFO_DIALOG"===e.t1?75:"CUSTOM_DIALOG"===e.t1?82:"REFRESH"===e.t1?90:"SET_DIRTY"===e.t1?93:"EDIT_DIRTY"===e.t1?97:"SHOW_PROCESS"===e.t1?98:"HYPER_LINK"===e.t1?111:115;break;case 38:return e.abrupt("return",n.editItem(l.options));case 39:return n.updateItem(),e.abrupt("break",123);case 41:return n.metaSetup(l.data),e.abrupt("break",123);case 43:return n.fieldSetup(l.data),e.abrupt("break",123);case 45:return a.callHcmOpenApi(l.api,"function"==typeof l.params?l.params():l.params).then((function(){i.notify(d+l.label+_("translate")("successfully_executed")),n.fetchData()})),e.abrupt("break",123);case 47:return o.modelAction(l.command,"function"==typeof l.params?l.params(s):l.params).then((function(){i.notify(d+l.label+_("translate")("successfully_executed"))})),e.abrupt("break",123);case 49:return o.actionItem(n.getItemID(),l.command).then((function(){i.notify(d+l.label+_("translate")("successfully_executed")),n.fetchData()})),e.abrupt("break",123);case 51:return n[l.command](),e.abrupt("break",123);case 53:if(v=null,!(b=l.options).init_data_api){e.next=60;break}return y=_("valueToFunc")(b.init_data_params)(u,n.getEnvironmentParams()),e.next=59,a.callHcmOpenApi(b.init_data_api,y);case 59:v=e.sent;case 60:return w=_("valueToFunc")(b.component_alter_param)(u,n.getEnvironmentParams(),v),e.next=63,n.openSelectorDialog(l,w||{});case 63:if(x=e.sent,!b.process_result_api){e.next=70;break}return $=_("valueToFunc")(b.process_result_params)(u,n.getEnvironmentParams(),D()(x)?x:[x])||{},e.next=68,a.callHcmOpenApi(b.process_result_api,$);case 68:O=e.sent,b.result_tip&&O&&i.notify(O.message?O.message:d+l.label+_("translate")("successfully_executed"));case 70:return n.fetchData(),e.abrupt("break",123);case 72:return e.next=74,n.openDynamicDialog(u,l.params,l);case 74:return e.abrupt("return",e.sent);case 75:return C="function"==typeof l.options.model?_("valueToFunc")(l.options.model)(u,n.getEnvironmentParams()):l.options.model,p=l.options.data?l.options.data(u,n.getEnvironmentParams()):u,e.next=79,i.getDialog(Object(H.a)(C,l.options.state)).name(null===(c=l.options)||void 0===c?void 0:c.name_model).size(l.options.size||"super-max").show({data:p,alter:l.options});case 79:return e.next=81,n.fetchData();case 81:return e.abrupt("break",123);case 82:return p="function"==typeof l.options.data?_("valueToFunc")(l.options.data)(u,n.getEnvironmentParams()):l.options.data,e.next=85,Y.a.getCustomDialogCtrl("QRCodeCtrl");case 85:return M=e.sent,e.next=88,i.getDialog(M).size("large-middle").show({data:p,alter:l.options});case 88:return n.fetchData(),e.abrupt("break",123);case 90:return e.next=92,n.fetchData();case 92:return e.abrupt("return",e.sent);case 93:return e.next=95,k.exprParse(l.options,s,n.getExprContext());case 95:return S=e.sent,e.abrupt("return",n.view_model.$setDirty(S.dirty_data));case 97:return e.abrupt("return",n.view_model.$switchModiMode());case 98:return e.next=100,k.exprParse(null==l?void 0:l.options,s,n.getExprContext());case 100:if(E=e.sent,!(P=(null==E?void 0:E.wf_inst_id)||n.view_model.data.wf_inst_id)){e.next=109;break}return e.next=105,Y.a.getCustomDialogCtrl("billProcessCtrlDialog");case 105:j=e.sent,i.getDialog(j).params({wf_inst_id:P}).size("middle").show().then((function(e){})),e.next=110;break;case 109:t.show_warning("该流程不存在，请联系管理员");case 110:return e.abrupt("break",123);case 111:return e.next=113,k.exprParse(l.options,s,n.getExprContext());case 113:return T=e.sent,e.abrupt("return",n.windowOpen(T));case 115:if(!l.func){e.next=123;break}if("[object AsyncFunction]"!==Object.prototype.toString.call(l.func)){e.next=122;break}return e.next=119,l.func(s,s);case 119:return e.abrupt("return",e.sent);case 122:return e.abrupt("return",l.func(s,s));case 123:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t){return e.apply(this,arguments)}}(),n.actionProcess=function(e,t,i){var o,a,l=null===(o=n.view_btn_model)||void 0===o||null===(a=o.actions)||void 0===a?void 0:L()(a).call(a,(function(t){return t.key===e}));return l?n.parseAction(l,{click_data:t,clicked_field:i}):console.log("view_action_not_found".concat(e))},n.metaSetup=function(e){i.getDialog(N.a).show({meta_key:e,biz_type:"view",model:n.model_meta.model,state:n.getMetaState()}).then((function(){n.loadModelMeta().then((function(){n.fetchData()}))}))},n.fieldSetup=function(e){i.getDialog(K.a).title(_("translate")("Field maintenance")).show({model_name:e}).then((function(){n.loadModelMeta()}))},n.fetchData=U()(R.a.mark((function e(){var i,a,l,r,c,s,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.show_waiting(),s=n.getItemID(),!_("isValidValue")(s)){e.next=8;break}return e.next=5,o.getItemInfo(s,"view",n.getExtraProperty(),n.getFields());case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=angular.extend({},null!==(i=null===(a=d.params)||void 0===a?void 0:a.data)&&void 0!==i?i:null===(l=n.params)||void 0===l?void 0:l.data);case 9:return u=e.t0,e.next=12,null===(r=n.loadDataAfterAsync)||void 0===r?void 0:r.call(n,n.getEnvironmentParams(),u);case 12:return n.view_model.$setData(u),e.next=15,null===(c=n.setDataAfterAsync)||void 0===c?void 0:c.call(n,n.getEnvironmentParams());case 15:n.view_model.dealForceChangeRelation(),n.initChildDataCollector(),n.fetchDataSuccess(u),n.initAfter(),t.hide_waiting();case 20:case"end":return e.stop()}}),e)}))),n.getItemID=function(){return O||d.params.id||n.params&&n.params.id},n.editItem=function(e){return i.getDialog(l).size((null==e?void 0:e.size)||"").show({mode:"edit",data:n.view_model.data,alter:n.getInfoAlterParam()}).then((function(){n.fetchData()}))},n.updateItem=function(){i.getDialog(l).show({mode:"update",data:n.view_model.data,alter:n.getInfoAlterParam()}).then((function(e){n.fetchData(),n.setAfter(e)}))},n.secondCheckPassword=function(){var e=U()(R.a.mark((function e(t){var i,o,l,r,c,s,d,u=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>1&&void 0!==u[1]?u[1]:600,o=u.length>2&&void 0!==u[2]?u[2]:void 0,l=u.length>3&&void 0!==u[3]&&u[3],e.next=5,a.callHcmOpenApi(o||"common.second.password.check",{category:t,user_check:l});case 5:if(!e.sent.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.next=10,a.callHcmOpenApi("second.password.has.password",{user_check:l});case 10:return r=e.sent,c="DoubleCheckPassword",s=r?"pwd":"setting",e.next=15,n.openDynamicDialog(null,{model:c,state:s,data:null,alter:{category:t,expire:i,user_check:l},no_fetch_data:!0},{size:"small"});case 15:if(d=e.sent.success,"setting"!==s||!d){e.next=22;break}return n.show_warning("设置密码成功!"),e.next=20,n.secondCheckPassword(t,i,o,l);case 20:e.next=23;break;case 22:return e.abrupt("return",d);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.openListDialog=function(){var e=U()(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.getCommonAction("COMMON_LIST_DIALOG")({options:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getExprContext=function(){return J({FORM_DATA:function(e){var t,i,o,a,l;return null!==(t=null===(i=n.view_model)||void 0===i||null===(o=i.dirty)||void 0===o?void 0:o[e])&&void 0!==t?t:null===(a=n.view_model)||void 0===a||null===(l=a.data)||void 0===l?void 0:l[e]},ENV:function(){return n.getEnvironmentParams()},AUTH:function(){return n.auth}},n.getAlterExprContext())},n.getAlterExprContext=function(){return{}},n.metaParse=function(e){var l={SCOPE:n,RootScope:t,STATE:d,$q:u,dataService:a,CRUDService:o,CommonInfoDialog:V.a,WINDOW:window,$hcDialog:i,commonSelectorService:p,documentPreviewService:f,$filter:_,document:document,FORM_DATA:function(e){var t,i,o,a,l;return null!==(t=null===(i=n.view_model)||void 0===i||null===(o=i.dirty)||void 0===o?void 0:o[e])&&void 0!==t?t:null===(a=n.view_model)||void 0===a||null===(l=a.data)||void 0===l?void 0:l[e]}};return z.a.jsonEval(e,l)},n.actionParse=function(e){return n.metaParse(e)},n.setTitle=function(e){n.$dialog||e&&(document.title=e)},n.actionFunc=function(){var e=U()(R.a.mark((function e(t){var i,o,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null===(i=n.view_btn_model)||void 0===i||null===(o=i.actions)||void 0===o?void 0:L()(o).call(o,(function(e){return e.key===t})),e.abrupt("return",a?n.parseAction(a):console.log("table_action_not_found".concat(t)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.windowOpen=function(e){var t;return window.open(_("valueToFunc")(e.url)(null===(t=n.view_model)||void 0===t?void 0:t.data))},n.initMetaHooks=function(){var e,t,i,o;(null===(e=n.model_meta)||void 0===e?void 0:e.hooks)&&"{}"!==y()(null===(t=n.model_meta)||void 0===t?void 0:t.hooks)?(n.hooks_meta=n.metaParse(n.model_meta.hooks),M()(i=v()(n.hooks_meta)).call(i,(function(e){var t;"function"==typeof n.hooks_meta[e]?n[e]=n.hooks_meta[e]:"object"===h()(n.hooks_meta[e])&&(null===(t=n.hooks_meta[e])||void 0===t?void 0:t.action)&&null!==n.hooks_meta[e]&&(n[e]=U()(R.a.mark((function t(){var i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.actionFunc(null===(i=n.hooks_meta[e])||void 0===i?void 0:i.action);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))}))):(M()(o=["metaLoadedAsync","loadDataAfterAsync"]).call(o,(function(e){n[e]||(n[e]=function(){var e=U()(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),n.getExtraFilterDict=function(e){return{}})},n.getEnvironmentParams=function(){return angular.extend({},d.params,n.params||{},n.customEnvironmentParams||{})},n.customEnvironmentParams={},n.initChildDataCollector=function(){var e,t,i;n.dirtyModify||(n.dirtyModify={defer:null,start:(i=U()(R.a.mark((function e(t){var i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.view_model.$switchModiMode(null==t?void 0:t.mode),n.dirtyModify.defer=u.defer(),e.abrupt("return",null===(i=n.dirtyModify.defer)||void 0===i?void 0:i.promise);case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),end:(t=U()(R.a.mark((function e(t){var i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(i=n.dirtyModify.defer)||void 0===i||i.resolve(x()({},n.view_model.data.id,t));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),resolve:function(e){var t;null===(t=n.dirtyModify.defer)||void 0===t||t.resolve(e)},reset:function(){n.dirtyModify.defer=null,n.view_model.$resetModify()},getModel:function(){return n.model_meta.model},getMetaState:n.getMetaState,getBizType:function(){return"view"},getDirty:(e=U()(R.a.mark((function e(t){var i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.view_model.getDirty(t);case 2:return i=e.sent,e.abrupt("return",v()(i).length?x()({},n.view_model.data.id,i):{});case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),setDirty:function(e){return n.view_model.setDirty(e[n.view_model.data.id])}},n.$emit("init_child_collector",n.dirtyModify))},n.dynamicAction=function(e,t){return o.dynamicAction(n.model_meta.model,n.getMetaState(),"view",e,t)},n.openSelectorDialog=function(){var e=U()(R.a.mark((function e(t,n){var i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.getCommonAction("COMMON_LIST_DIALOG")(J(J({},t),{},{options:J(J(J({},t.options),(null===(i=t.options)||void 0===i?void 0:i.component_options)||{}),n||{})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.openDynamicDialog=function(){var e=U()(R.a.mark((function e(t){var i,o,a,l,r,c=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>1&&void 0!==c[1]?c[1]:{},o=c.length>2?c[2]:void 0,a=function(){var e=U()(R.a.mark((function e(t){var i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getCommonAction("COMMON_INFO_DIALOG")(J(J({},o),{},{options:t}),{});case 2:return i=e.sent,e.next=5,n.fetchData();case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!i.async){e.next=12;break}return e.next=6,i.data();case 6:return l=e.sent,e.next=9,a({model:i.model,state:i.state,mode:i.mode,size:i.size,data:l,alter:angular.extend(n.getInfoAlterParam(),_("valueToFunc")(i.alter)(t,n.getEnvironmentParams()))});case 9:return e.abrupt("return",e.sent);case 12:return r=_("valueToFunc")(i)(t,n.getEnvironmentParams()),e.next=15,a(r);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.workflowCreateAndStart=function(){var e=U()(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.createAndStartWorkflow(J(J({},n),{},{form_data:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.view_meta=null,n.view_btn_meta=[],n.getInfoAlterParam=function(){return{}},n.metaLoaded=function(e){},n.initBefore=function(){},n.initAfter=function(){},n.setAfter=function(e){},n.getExtraProperty=function(){return J({state:n.getMetaState()},n.getLoadDataExtraProperty(n.getEnvironmentParams()))},n.getLoadDataExtraProperty=function(e){return{}},n.individualParse=function(e){return e},n.meta_state=null,n.getMetaState=function(){return n.meta_state||d.params.meta_state},n.fetchDataSuccess=function(e){},n.getFields=function(){return null},n.refreshNavAttach=function(){t.$broadcast("refresh_nav_attachment",{meta_state:n.meta_state})}}]),t.a="BaseCRUDViewController"},zrGd:function(e,t){e.exports='<div class="hcm-nav-content flex model_list_dialog budget-detail-import-dialog-style" ng-init="init()">\n    \x3c!--    后期选择是否开启平台组件过滤--\x3e\n    \x3c!--    <div class="basic simple-form" ng-if="showFilters">--\x3e\n    \x3c!--        <hc-form model="filter" class="query-form ng-isolate-scope"></hc-form>--\x3e\n    \x3c!--    </div>--\x3e\n    <div id="import"></div>\n</div>\n'},zryR:function(t,n,i){"use strict";i("4mDm"),i("oVuX"),i("07d7"),i("5s+n"),i("p532"),i("rB9j"),i("JfAA"),i("PKPk"),i("Rm1S"),i("UxlC"),i("hByQ"),i("EnZy"),i("3bBZ"),i("Kz25");var o,a,l,r,c,s,d,u,_,p,m,f,h,g,v,b,y=i("LYCE"),w=i.n(y),x=i("HnXd"),k=i.n(x),O=i("qjzJ"),D=i.n(O),C=i("fHi0"),M=i.n(C),S=i("5PDf"),E=i.n(S),P=i("OWCx"),j=i.n(P),T=i("+oHS"),A=i.n(T),I=i("UtpJ"),L=i.n(I),F=i("Kwsy"),R=i.n(F),B=i("RXMP"),U=i.n(B),q=i("526F"),W=i.n(q),z=i("04Ix"),N=i.n(z),K=i("WxoT"),H=i.n(K),V=i("pPxq"),Y=i.n(V),G=i("o+MX"),J=i.n(G),X=i("mnMc"),Q=i.n(X),Z=i("ZbhI"),ee=i.n(Z),te=i("CoJ3");function ne(e,t){var n=A()(e);if(j.a){var i=j()(e);t&&(i=E()(i).call(i,(function(t){return M()(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=ne(Object(i),!0)).call(n,(function(t){N()(e,t,i[t])}));else if(D.a)k()(e,D()(i));else{var o;U()(o=ne(Object(i))).call(o,(function(t){w()(e,t,M()(i,t))}))}}return e}var oe,ae=ee()(o=window.navigator.userAgent.toLowerCase()).call(o,"lark")>=0;ae&&i.e(89).then(i.t.bind(null,"fGin",7)).then((function(e){oe=e})).catch((function(e){console.log("lark error!"),console.log(e)}));var le,re=ee()(a=window.navigator.userAgent.toLowerCase()).call(a,"nebula")>=0;re&&i.e(86).then(i.t.bind(null,"oINZ",7)).then((function(e){le=e,window.hopesdk=le,le.ready((function(){le.common.setOptionMenus([{},{icon:"",title:"关闭"}],"-1",!1);document.addEventListener("optionMenu",(function e(t){var n;console.log(t),1===(null===(n=t.data)||void 0===n?void 0:n.index)&&(le.common.exitApp(),document.removeEventListener("optionMenu",e,!1))}),!1)}))})).catch((function(e){console.log("nebula error!"),console.log(e)}));var ce,se="wxworklocal"==window.navigator.userAgent.toLowerCase().match(/wxworklocal/i),de="wxwork"==window.navigator.userAgent.toLowerCase().match(/wxwork/i)&&"work"===window.location.hostname.split(".")[0],ue="wxwork"==window.navigator.userAgent.toLowerCase().match(/wxwork/i)&&!Q()(l=["work","wwx_work"]).call(l,window.location.hostname.split(".")[0]),_e="wxwork"==window.navigator.userAgent.toLowerCase().match(/wxwork/i)&&(-1!==ee()(r=window.location.hostname.split(".")[0]).call(r,"ww-")||-1!==ee()(c=window.location.hostname.split(".")[0]).call(c,"ww_")),pe=/^wx/.test(location.host),me="micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i),fe=ee()(s=window.navigator.userAgent.toLowerCase()).call(s,"qing")>=0;if((pe||me||de||ue||_e||se)&&i.e(90).then(i.t.bind(null,"GKBh",7)).then((function(e){ce=e.default})).catch((function(e){console.log("weixin error!"),console.log(e)})),fe){console.log("yun_zhi_jia");var he=document.createElement("script");he.src="https://static.yunzhijia.com/public/js/qing/latest/qing.js",document.body.appendChild(he),he.onload=function(){}}var ge,ve=/DingTalk/i.test(navigator.userAgent);ve&&i.e(84).then(i.t.bind(null,"LBgK",7)).then((function(e){ge=e.default})).catch((function(e){console.log("ding error!"),console.log(e)}));var be,ye=ee()(d=navigator.userAgent.toLowerCase()).call(d,"emmcloud")>=0&&-1===ee()(u=window.location.hostname.split(".")[0]).call(u,"cc_");ye&&i.e(85).then(i.t.bind(null,"9BB8",7)).then((function(e){be=e.default})).catch((function(e){console.log("emmcloud error!"),console.log(e)}));var we,xe=ee()(_=navigator.userAgent.toLowerCase()).call(_,"ccwork")>=0&&(-1!==ee()(p=window.location.hostname.split(".")[0]).call(p,"cc_")||-1!==ee()(m=window.location.hostname.split(".")[0]).call(m,"hcm-release")||ee()(f=navigator.userAgent.toLowerCase()).call(f,"emmcloud")<0);xe&&i.e(82).then(i.t.bind(null,"eZni",7)).then((function(e){console.log(e),we=e.default})).catch((function(e){console.log("emmcloud error!"),console.log(e)}));var ke,$e=/kkPlus/i.test(navigator.userAgent);$e&&i.e(87).then(i.t.bind(null,"Pg5W",7)).then((function(e){console.log(e),ke=e.default})).catch((function(e){console.log("emmcloud error!"),console.log(e)}));var Oe,De=ee()(h=window.navigator.userAgent.toLowerCase()).call(h,"qyzone")>=0;De&&i.e(91).then(i.t.bind(null,"P/RU",7)).then((function(e){console.log(e),Oe=e.default})).catch((function(e){console.log("emmcloud error!"),console.log(e)}));var Ce,Me=ee()(g=navigator.userAgent.toLowerCase()).call(g,"lanxin")>=0||ee()(v=navigator.userAgent.toLowerCase()).call(v,"es360")>=0;if(Me)try{i.e(88).then(function(){Ce=i("zTsQ"),window.lx_v1=Ce}.bind(null,i)).catch(i.oe)}catch(e){console.log("lanxin error!"),console.log(e)}var Se,Ee=ee()(b=window.navigator.userAgent.toLowerCase()).call(b,"html5plus")>=0;Ee&&i.e(83).then(i.t.bind(null,"OeaP",7)).then((function(e){console.log(e),Se=e})).catch((function(e){console.log("CSCEC error!"),console.log(e)})),te.a.factory("weChatService",["$interval","$rootScope","$http","$q","$timeout","$location","$state","$cacheFactory","contextService","dataService","$filter","hcImageViewerService","$compile","$base64",function(t,n,o,a,l,r,c,s,d,u,_,p,m,f){var h,g,v,b,y,w,x,k,O,D,C,M,S,E=me&&pe,P=me&&!pe,j=ee()(h=navigator.userAgent.toLowerCase()).call(h,"htime")>=0,T=ee()(g=window.navigator.userAgent).call(g,"weaverClient")>-1||ee()(v=window.navigator.userAgent).call(v,"E-Mobile")>-1&&ee()(b=window.navigator.userAgent).call(b,"Electron")<0,A=ee()(y=navigator.userAgent.toLowerCase()).call(y,"zjtm")>=0,I=ee()(w=window.navigator.userAgent.toLowerCase()).call(w,"epoint")>=0,F=ee()(x=window.navigator.userAgent.toLowerCase()).call(x,"html5plus")>=0&&ee()(k=window.navigator.userAgent.toLowerCase()).call(k,"uni")>=0,B=!1,q=!1,z=!1,N=0,K="";if(A){var V,G,X=3.141592653589793,Z=function(e,t){var n=6378245,i=.006693421622965943,o=te(t-105,e-35),a=ne(t-105,e-35),l=e/180*X,r=Math.sin(l);r=1-i*r*r;var c=Math.sqrt(r);return{lat:o=180*o/(n*(1-i)/(r*c)*X),lon:a=180*a/(n/c*Math.cos(l)*X)}},te=function(e,t){var n=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*X)+20*Math.sin(2*e*X))/3,n+=2*(20*Math.sin(t*X)+40*Math.sin(t/3*X))/3,n+=2*(160*Math.sin(t/12*X)+320*Math.sin(t*X/30))/3},ne=function(e,t){var n=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return n+=2*(20*Math.sin(6*e*X)+20*Math.sin(2*e*X))/3,n+=2*(20*Math.sin(e*X)+40*Math.sin(e/3*X))/3,n+=2*(150*Math.sin(e/12*X)+300*Math.sin(e/30*X))/3},he=function(e){plus.geolocation.getCurrentPosition((function(t){console.log(t);var n,i,o,a=(n=t.coords.latitude,i=t.coords.longitude,o=Z(n,i),{lat:n-o.lat,lon:i-o.lon});t.coords.latitude=a.lat,t.coords.longitude=a.lon,e.success(t.coords)}),(function(t){e.err(t)}),{enableHighAccuracy:!0,provider:"baidu",coordsType:"gcj02"})};if(window.plus)console.log("in window.plus ready 1"),window.cccec_app||(window.cccec_app={}),console.log("in window.plus ready 2"),(null===(V=window)||void 0===V||null===(G=V.cccec_app)||void 0===G?void 0:G.GetCurrentPosition)||(window.cccec_app.GetCurrentPosition=he);else document.addEventListener("plusready",(function(){var e,t;console.log("in plus ready 1"),window.cccec_app||(window.cccec_app={}),console.log("in plus ready 2"),(null===(e=window)||void 0===e||null===(t=e.cccec_app)||void 0===t?void 0:t.GetCurrentPosition)||(window.cccec_app.GetCurrentPosition=he)}))}var Pe=function(){var e,t,n,i;if(console.log("in close curpage"),ee()(e=navigator.userAgent).call(e,"MSIE")>0)ee()(i=navigator.userAgent).call(i,"MSIE 6.0")>0?(console.log("in close curpage IE6"),window.opener=null,window.close()):(console.log("in close curpage IE6+"),window.open("","_top"),window.top.close());else if(ee()(t=navigator.userAgent).call(t,"Firefox")>0||ee()(n=navigator.userAgent).call(n,"Presto")>0)console.log("in close curpage Firefox"),window.location.href="about:blank",window.close();else{var o=navigator.userAgent;console.log("in close curpage other"),console.log(o),window.opener=null,window.open("","_self",""),window.close()}},je=function(){var e=a.defer();K=d.getContext("auth")&&d.getContext("auth").employee?d.getContext("auth").employee.id:"";return function t(){B?l(t,100):(B=!0,function(){var e=a.defer();if(console.log("wx_js_sign:start"),!(de||_e||E||ue||P))return e.reject("is not we chat"),e.promise;if(O)return console.log("wx_js_sign:is_wx_config_success"),e.resolve(),e.promise;if(0==O)return 319053==K&&alert("wx config fail"),console.log("wx_js_sign:is_wx_config_false"),e.reject("wx config fail"),e.promise;var t=location.protocol+"//"+location.host+window.hcm_wengen+"/api/wx_js_sign"+window.hcm_env_pre;return P&&(t=location.protocol+"//"+location.host+window.hcm_wengen+"/api/third_js_sign?sso=work_inner"+window.hcm_env_post),(de||_e||ue)&&(t=location.protocol+"//"+location.host+window.hcm_wengen+"/api/third_js_sign"+window.hcm_env_pre),o.get(t,{params:{url:location.protocol+"//"+location.host+location.pathname+location.search}}).then((function(t){t=t.data,console.log("wx_js_sign:",t);try{S=t.js_sign,ce.config(S),ce.ready((function(){O=!0,console.log("is_wx_config_success:ready:",O),e.resolve()})),ce.error((function(t){O=!1,console.log("is_wx_fail_success:error:",O),e.reject(t)}))}catch(t){O=!1,console.log("is_wx_config_error:one:"+t),e.reject(t)}}),(function(t){319053==K&&alert("js sign error"),t=t.data,console.log("is_wx_config_error:two:"+t),O=!1,e.reject(t)})),e.promise}().then((function(t){B=!1,e.resolve(t)}),(function(t){B=!1,e.reject(t)})))}(),e.promise},Te=function(){console.log("ding config");var e=a.defer();return function t(){z?(console.log("ding config1"),l(t,100)):(console.log("ding config2"),z=!0,Ie().then((function(t){console.log("ding config3"),z=!1,e.resolve(t)}),(function(t){console.log("ding config4"),z=!1,e.reject(t)})))}(),e.promise},Ae=function e(t,n){console.log("ding config6");var i=a.defer(),l=location.protocol+"//"+location.host+"/api/third_js_sign";return o.get(l,{params:{v:(new Date).getTime(),url:t}}).then((function(o){o=o.data,S=o,console.log(t),console.log(n),console.log("ding_js_sign:"),console.log(o),console.log(ge.env),console.log("ding.env");try{ge.config(o),ge.ready((function(){C=!0,console.log("is_ding_config_success:",C);var e,t=window.navigator.userAgent;/Android/i.test(t)?console.log(J()(e="Android:referrer:".concat(document.referrer," history:")).call(e,history.length)):/iPhone/i.test(t)&&ge.biz.navigation.setLeft({show:!0,control:!0,showIcon:!0,text:"返回",onSuccess:function(){var e,t,n;n=document.referrer,window.history.length<=1||Q()(n).call(n,"/login")?(console.log(J()(e="ding:back:referrer:".concat(n," history:")).call(e,history.length)),ge.biz.navigation.close({onSuccess:function(e){},onFail:function(e){}})):(console.log(J()(t="window:referrer:".concat(n," history:")).call(t,history.length)),ge.biz.navigation.goBack({onSuccess:function(e){console.log("ding:back:self:history:".concat(history.length))},onFail:function(e){var t;console.log(J()(t="ding:back:window:history:".concat(history.length,":")).call(t,e)),history.back()}}))},onFail:function(){console.log("ding_error")}});i.resolve()})),ge.error((function(a){var l;if(C=!1,console.log(o),console.log("is_ding_fail_success:",C),console.log(a),console.log(location.href),console.log(t),("3"===a.errorCode||3===a.errorCode)&&a.errorMessage&&Y()(l=a.errorMessage).call(l,"Code:52013")){var r=a.errorMessage.split(",");console.log(r);for(var c={},s=0;s<r.length;s++){var d;Y()(d=r[s]).call(d,"url:")&&(c.url=r[s].substr(0,r[s].length-1).substr(5).split(","))}console.log("in code52013"),console.log(c),console.log(c.url);var u=c.url;console.log(u[0]),u[0]&&(z=!1,console.log("ding config retry1"),console.log(n),console.log(N),N<3?(N+=1,console.log("ding config retry2"),console.log(u[0]),console.log(u[0].split("#")[0]),console.log(N),e(u[0].split("#")[0],N).then((function(){i.resolve()}),(function(e){console.log("retry error"),console.log(e),i.reject(e)}))):i.reject(a))}else i.reject(a)}))}catch(e){C=!1,console.log("in error5"),console.log(e),i.reject(e)}}),(function(e){e=e.data,console.log("in error6"),console.log(e),C=!1,i.reject(e)})),i.promise},Ie=function(){var e=a.defer();return console.log("ding config5"),ve?(console.log("is ding"),C?(console.log("is ding config"),e.resolve(),e.promise):(Ae(location.protocol+"//"+location.host+location.pathname+location.search,0).then((function(){e.resolve()}),(function(t){e.reject(t)})),e.promise)):(e.reject("is not ding"),e.promise)},Le=function(){var e=a.defer();return function t(){q?l(t,100):(q=!0,Fe().then((function(t){q=!1,e.resolve(t)}),(function(t){q=!1,e.reject(t)})))}(),e.promise},Fe=function(){var e=a.defer();if(!$e)return e.reject("is not kk"),e.promise;if(D)return e.resolve(),e.promise;try{ke.config({debug:!0,detailLog:!1}),ke.ready((function(){D=!0,console.log("is_kk_config_success:",D),e.resolve()}))}catch(t){D=!1,e.reject(t)}return e.promise},Re=function(){var e=a.defer();console.log("lark config");var t=location.protocol+"//"+location.host+"/api/third_js_sign";return o.get(t,{params:{url:window.location.href.split("#")[0]}}).then((function(t){t=t.data,console.log("lark_js_sign:"),console.log(t),console.log(oe);try{window.h5sdk.config({appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList,onSuccess:function(e){console.log("lark config success: ".concat(H()(e)))},onFail:function(t){console.log("lark config fail: ".concat(H()(t))),e.reject({message:"飞书权鉴失败"})}}).then((function(t){console.log("lark res"),console.log(t),e.resolve()}))}catch(t){console.log("lark in error5"),console.log(t),e.reject(t)}}),(function(t){console.log("lark in error"),console.log(t),e.reject({message:"飞书权鉴失败"})})),e.promise},Be=function(){var e=a.defer();console.log("is_lx_v1_sign_loading:into lx_v1");var t=window.navigator.userAgent;console.log(t);return function t(){M?l(t,100):(M=!0,Ue(location.href).then((function(t){M=!1,e.resolve(t)}),(function(t){M=!1,e.reject(t)})))}(),e.promise},Ue=function(e){console.log("lx_v1_config config1"),console.log(e);var t=a.defer(),n=location.protocol+"//"+location.host+"/api/third_js_sign?sso=lx_mobile"+window.hcm_env_pre;return o.get(n,{params:{v:(new Date).getTime(),url:f.encode(unescape(encodeURIComponent(e))),is_encode:!0}}).then((function(n){n=n.data,console.log("lx_v1_config_js_sign"),console.log(n);try{Ce.config(n),Ce.ready((function(){M=!0,console.log("is_lx_v1_sign_loading:",M),t.resolve()})),Ce.error((function(i){M=!1,console.log(n),console.log("is_lx_v1_sign_loading error4:",M),console.log(i),console.log(location.href),console.log(e),t.reject(i)}))}catch(e){M=!1,console.log("is_lx_v1_sign_loading in error5"),console.log(e),t.reject(e)}}),(function(e){e=e.data,console.log("is_lx_v1_sign_loading in error6"),console.log(e),M=!1,t.reject(e)})),t.promise};return{getAppId:function(){return S?S.appId:null},config:function(){return S},isWeChat:function(){return E},is_Em_cloud:function(){return ye},is_ccwork:function(){return xe},isWeWork:function(){return P},isWxWork:function(){return de},isWxLocal:function(){return se},isWwxWork:function(){return _e},isDing:function(){return ve},isWork:function(){return ue},isHTime:function(){return j},isKK:function(){return $e},isHopeSdk:function(){return re},isLanXin:function(){return Me},isZJTM:function(){return A},isFanWei:function(){return T},ding_config:function(){return Te()},is_lark:function(){return ae},geo:function(){var e,t=a.defer();if(console.log("user agent0905 is_c8dc"),console.log(navigator.userAgent),console.log(Ee),Ee=ee()(e=window.navigator.userAgent.toLowerCase()).call(e,"html5plus")>=0,console.log(Ee),window.isApp)console.log("geo:isApp"),window.WebViewJavascriptBridge.callHandler("getLocation",{},(function(e){var n=JSON.parse(e);t.resolve({lat:n.latitude,lng:n.longitude,accuracy:n.accuracy})}));else if(Me)console.log("geo:is_lanxin"),Be().then((function(){Ce.device.getLocation({coordinateType:"wgs84",success:function(e){console.log("geo:is_lanxin:success"),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:e.accuracy})},fail:function(e){console.log("geo:is_lanxin:error"),t.reject({message:"定位服务失败："+H()(e)})}})}),(function(e){console.log("lx_v1组件初始化失败："+H()(e)),t.reject({message:"lx_v1组件初始化失败："+H()(e)})}));else if(fe)try{console.log("yun_zhi_jia geo step"),qing.call("getLocation",{success:function(e){var n=new Date;console.log(H()(e)),console.log("yun_zhi_jia geo success:"+n.toLocaleString()),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.data.longitude,lat:e.data.latitude}).then((function(n){var i,o=new Date;console.log("yun_zhi_jia hcm api success:"+o.toLocaleString()),console.log({lat:n.latitude,lng:n.longitude,accuracy:e.data.accuracy}),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.data.accuracy)&&void 0!==i?i:0})}),(function(e){console.log(" yun_zhi_jia encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})}))}})}catch(e){console.log("yun_zhi_jia_geo_err"+e),t.reject({message:"云之家定位组件调用失败"})}else if(I)console.log("is is_qdct=true"),window.WebViewJavascriptBridge.callHandler("getlocation",{param:""},(function(e){var n=JSON.parse(e);console.log(n),t.resolve({lat:n.y,lng:n.x,accuracy:0})}));else if(j)console.log("geo:is_htime"),iCityBridge.init((function(e){e&&iCityBridge.getData({type:"location"},(function(e){var n=e.data;console.log(n),1===n.status?t.resolve({lat:n.latitude,lng:n.longitude,accuracy:0}):0===n.status?t.reject({message:"定位服务失败："+H()(n.status)}):t.reject({message:"定位服务未开启："+H()(n.status)})}))}));else if(A)console.log("geo:is_zjtm"),window.cccec_app&&window.cccec_app.GetCurrentPosition({success:function(e){console.log("is_zjtm:".concat(e)),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:0})},err:function(e){t.reject({message:"定位服务失败："+H()(e)})}});else if(T)console.log("geo:is_fan_wei"),em.getLocation({type:"GCJ-02",success:function(e){console.log("is_fan_wei:success"),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.longitude,lat:e.latitude}).then((function(n){var i;console.log("encrypt position"),console.log({lat:n.latitude,lng:n.longitude,accuracy:e.accuracy}),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.accuracy)&&void 0!==i?i:0})}),(function(e){console.log("encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})}))},fail:function(e){console.log("is_fan_wei:error"),t.reject({message:"定位服务失败："+H()(e)})}});else if(xe)console.log("geo:is_ccwork"),we.init((function(e){we.ccworkGetLocation((function(e){console.info("结果：",e),1===e.status?we.ccworkCoordinateConvert({lat:e.result.lat+"",lng:e.result.lng+"",newType:"WGS84"},(function(e){console.log("坐标转换结果",e),t.resolve({lat:e.result.lat,lng:e.result.lng,accuracy:0})})):0===e.status?t.reject({message:"定位服务失败："+H()(e.status)}):t.reject({message:"定位服务未开启："+H()(e.status)})}))}));else if(ye)console.log("geo:in emmcloud"),console.log(be.iGps),be.iGps.getInfo((function(e){console.log("emmcloud"),console.log(e),319053==K&&alert("emmcloud.getLocation success"+H()(e)),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:e.accuracy})}),{coordinateType:"WGS84"});else if($e)console.log("geo:in kk"),Le().then((function(){console.log("in kk config");try{ke.location.getLocation({},(function(e){console.log("kk_success"),console.log(e);var n=e.longitude,i=e.latitude,o=52.35987755982988,a=n-.0065,l=i-.006,r=Math.sqrt(a*a+l*l)-2e-5*Math.sin(l*o),c=Math.atan2(l,a)-3e-6*Math.cos(a*o);n=r*Math.cos(c),i=r*Math.sin(c),e.longitude=Math.round(1e6*n)/1e6,e.latitude=Math.round(1e6*i)/1e6,console.log(e),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.longitude,lat:e.latitude}).then((function(n){var i;console.log("kk gcj translate wgs success:"),console.log({lat:n.latitude,lng:n.longitude,accuracy:e.accuracy}),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.accuracy)&&void 0!==i?i:0})}),(function(e){console.log("kk encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})})).catch((function(e,n){console.log("KK获取定位失败，错误代码是"+e+"错误信息是"+n),t.reject({message:"KK获取定位失败，错误代码是"+e+"错误信息是"+n})})).finally((function(){console.log("能力执行完成")}))}),(function(e,n){console.log("kk_geo_fail"),console.log(e),console.log(n),t.reject({message:"KK获取定位失败，错误代码是"+e+"错误信息是"+n})}))}catch(e){console.log("kk geo fail"),console.log(e),t.reject({message:"KK信定位组件调用失败"})}}),(function(e){console.log("KK组件初始化失败："+H()(e)),t.reject({message:"KK组件初始化失败："+H()(e)})}));else if(F)console.log("geo:is_uplus"),window.plus.geolocation.getCurrentPosition((function(e){var n;console.log("定位成功"),console.log(e.coords),console.log("uplus.getLocation success"+H()(e)),t.resolve({lat:e.coords.latitude,lng:e.coords.longitude,accuracy:null!==(n=e.coords.accuracy)&&void 0!==n?n:0})}),(function(e){console.log("uplus.getLocation error"+H()(error)),t.reject({message:"uplus获取定位失败，错误代码是"+e.code+"错误信息是"+e.message})}),{timeout:4e3,enableHighAccuracy:!0,provider:"system",geocode:!1,coordsType:"wgs84"});else if(Ee){console.log("geo:is_c8dc");try{Se.getGeolocation({success:function(e){console.log("is_c8dc:success"),console.log(e),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:e.accuracy})},fail:function(e){console.log("is_c8dc:fail"),console.log(e)}})}catch(e){console.log("CSCEC.getGeolocation"),console.log(e)}}else if(ve)console.log("geo:is_ding"),console.log("钉钉定位: ".concat(ve)),Te().then((function(){console.log("in ding geolocation");var e={targetAccuracy:200,coordinate:0,withReGeocode:!1,useCache:!1,onSuccess:function(e){var n;(console.log("ding"),"android"==window.navigator.userAgent.toLowerCase().match(/Android/i))?(console.log("is android"),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.longitude,lat:e.latitude}).then((function(n){var i;console.log("encrypt position"),console.log(ie(ie({},e),{},{lat:n.latitude,lng:n.longitude})),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.accuracy)&&void 0!==i?i:0})}),(function(e){console.log("encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})}))):(console.log(e),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:null!==(n=e.accuracy)&&void 0!==n?n:0}))},onFail:function(e){console.log("ding获取定位失败，错误代码是"+e.errorCode+"错误信息是"+e.errorMessage),t.reject({message:"ding获取定位失败，错误代码是"+e.errorCode+"错误信息是"+e.errorMessage})}};console.log(e),ge.device.geolocation.get(e)}));else if(ae){var n=new Date;console.log("geo:is_lark:"+n.toLocaleString()),Re().then((function(e){var n=new Date;console.log("lark config success:"+n.toLocaleString()),window.h5sdk.ready((function(){console.log("lark geo ready step"),tt.getLocation({type:"gcj02",timeout:10,cacheTimeout:30,success:function(e){var n=new Date;console.log(H()(e)),console.log("lark geo success:"+n.toLocaleString()),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.longitude,lat:e.latitude}).then((function(n){var i,o=new Date;console.log("lar hcm api success:"+o.toLocaleString()),console.log({lat:n.latitude,lng:n.longitude,accuracy:e.accuracy}),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.accuracy)&&void 0!==i?i:0})}),(function(e){console.log("encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})}))},fail:function(e){console.log("lark getLocation fail: ".concat(H()(e))),t.reject({message:"飞书定位失败:"+H()(e)})}})}))}),(function(e){console.log("飞书组件初始化失败："+H()(e)),t.reject({message:"飞书组件初始化失败："+H()(e)})}))}else if(re){var i=new Date;console.log("geo:is_hope_sdk:"+i.toLocaleString());try{le.location.getCurrentPosition().then((function(e){console.log("is_hope_sdk data:"+(new Date).getTime()),console.log(e),u.callHcmOpenApi("position.gcj.encryptwgs",{lng:e.longitude,lat:e.latitude}).then((function(n){var i,o=new Date;console.log("is_hope_sdk success:"+o.toLocaleString()),console.log({lat:n.latitude,lng:n.longitude,accuracy:e.accuracy}),t.resolve({lat:n.latitude,lng:n.longitude,accuracy:null!==(i=e.accuracy)&&void 0!==i?i:0})}),(function(e){console.log("encrypt position error"),console.log(e),t.reject({message:"坐标转换失败"})}))}))}catch(e){console.log("is_hope_sdk geo error"),console.log(e),t.reject({message:"顺银智管获取定位失败"})}}else console.log("geo:other"),je().then((function(){try{console.log("调用wx接口"),319053==K&&alert("before wx getlocation"),ce.getLocation({type:"wgs84",isHighAccuracy:!0,highAccuracyExpireTime:4e3,success:function(e){319053==K&&alert("wx.getLocation success"+H()(e)),console.log("wx.getLocation success"+H()(e)),t.resolve({lat:e.latitude,lng:e.longitude,accuracy:e.accuracy})},fail:function(e){319053==K&&(alert("wx.getLocation error"+H()(e)),ce.checkJsApi({jsApiList:["getLocation"],success:function(e){alert(e)}})),console.log("wx.getLocation error"+H()(e)),t.reject({message:"微信定位失败:"+H()(e)})}})}catch(e){319053==K&&alert("微信组件初始化失败1"),t.reject({message:"微信定位组件调用失败"})}}),(function(e){319053==K&&alert("微信组件初始化失败"),console.log("微信组件初始化失败："+H()(e)),t.reject({message:"微信组件初始化失败："+H()(e)})}));return t.promise},uploadImage:function(e){var t=a.defer();return je().then((function(){ce.uploadImage({localId:e,isShowProgressTips:0,success:function(e){t.resolve(e)},fail:function(e){console.log("微信图片上传失败"),console.log(e),t.reject({message:"微信图片上传失败："+H()(e)})}})}),(function(e){t.reject({message:"微信组件初始化失败："+H()(e)})})),t.promise},getLocalImgData:function(e){var t=a.defer();return je().then((function(){ce.getLocalImgData({localId:e,success:function(e){t.resolve(e.localData)}})}),(function(e){t.reject({message:"微信组件初始化失败："+H()(e)})})),t.promise},selectImage:function(e){console.log("打开相机组件");var t=a.defer();if(Me)Be().then((function(){Ce.media.chooseImage({count:1,sourceType:["album","camera"],success:function(e){var n=e[0].localId;t.resolve(n)},fail:function(e){console.log("蓝信v1图片组件初始化失败:inner："+H()(e)),t.reject({message:"蓝信v1图片组件初始化失败:inner"+H()(e)})}})}),(function(e){console.log("蓝信v1图片组件初始化失败config:"+H()(e)),t.reject({message:"蓝信v1图片组件初始化失败config:"+H()(e)})}));else if(j)iCityBridge.init((function(e){e&&iCityBridge.openCamera((function(e){console.log("iCityBridge"+H()(e)),e.length>=1?t.resolve(e[0]):t.reject({message:"好时光打开摄像机失败"})}))}));else if(xe){var i=function(e){var n=W()({quality:"mid",mode:"camera",mark:"",family:"",size:"",color:"",isSaveFile:!0},e||{});we.init((function(e){console.log(e),we.ccworkGetPicsFromCameraAndAlbumV4(n,(function(e){if(console.info("ccworkGetPicsFromCameraAndAlbum结果：",e.status),1===e.status){console.log("成功了"),console.log("ccworkGetImageContentByPath start:"+e.result);var n="",i={imgPath:e.result,onprogress:function(e){0===e.result.currentBlockNum?t.resolve(e.result.currentContent):e.result.currentBlockNum<e.result.allBlockSize?n+=e.result.currentContent:(n+=e.result.currentContent,t.resolve(n))}};we.ccworkGetImageContentByPath(i)}else e.status,t.reject({message:"拍照组件初始化失败："+H()(e.status)})}))}))};if(e){console.log("云上协同+only拍照");i({mode:"camera"})}else{console.log("云+选图片");var o=n.$new();o.customGoToAlbum=function(){i({mode:"album"})},o.customGoToCamera=function(){i({mode:"camera"})};var l=document.getElementsByTagName("body"),r=angular.element("<select-img-methods custom-album='customGoToAlbum' custom-camera='customGoToCamera' ng-model='img_model' id='selectImgMethods'></select-img-methods>"),c=m(r)(o);angular.element(l).append(c)}}else if(ye)if(console.log("打开云+启动相机组件"),e){console.log("云+only拍照");var s={quality:100,encodingType:be.iCamera.EncodingType.JPEG};be.iCamera.open(s,(function(e){console.log("成功了");var n=e.thumbnailData;t.resolve(n)}),(function(e){console.log("失败了"),t.reject({message:"拍照组件初始化失败："+H()(e)})}))}else{console.log("云+选图片");var d=document.getElementsByTagName("body");r=angular.element("<select-img-methods ng-model='img_model' id='selectImgMethods'></select-img-methods>"),c=m(r)(n);angular.element(d).append(c),n.$watch("img_model",(function(e,i){console.log("选中图片"+e+" "+i),e!==i&&(console.log("img_model",n.img_model),t.resolve(n.img_model))}))}else if(de||_e||ue||se)console.log("企业微信相机"),je().then((function(){console.log("企业微信相机1"),ce.chooseImage({count:1,sizeType:["compressed"],sourceType:e?["camera"]:["album","camera"],success:function(e){console.log("企业微信相机1成功"),console.log(e);var n=e.localIds;t.resolve(n)}})}),(function(n){console.log("企业微信相机0"),ce.chooseImage({count:1,sourceType:e?["camera"]:["album","camera"],success:function(e){var n=e.localIds;t.resolve(n)}})}));else if($e)console.log("in kk 相机 只打开相机"),Le().then((function(){try{ke.media.getPicture({sourceType:e?"sysCamera":"album",destinationType:"data"},(function(e){console.log(e);var n=e.imageData.substring(22);t.resolve(n)}),(function(e,t){console.log("错误信息:"+t+", 错误代码:"+e)}))}catch(e){t.reject({message:"kk相机失败"})}}),(function(e){console.log("KK组件初始化失败："+H()(e)),t.reject({message:"kk相机失败："+H()(e)})}));else if(re){console.log("is_hope_sdk相机 只打开相机");try{le.camera.takePicture({scale:.7}).then((function(e){console.log("is_hope_sdk success");var n=e.imageBase64.substring(22);t.resolve(n)}))}catch(e){console.log("is_hope_sdk错误信息:"+e),t.reject({message:"集成相机失败"})}}else console.log("微信相机"),je().then((function(){console.log("微信相机"),ce.chooseImage({count:1,sourceType:e?["camera"]:["album","camera"],success:function(e){var n=e.localIds;t.resolve(n)}})}),(function(e){t.reject({message:"微信组件初始化失败："+H()(e)})}));return t.promise},showLocation:function(e){window.isApp?window.WebViewJavascriptBridge.callHandler("showLocation",e,(function(e){})):Me?Be().then((function(){e.coordinateType="wgs84",Ce.device.displayLocation(e)}),(function(e){console.log("蓝信v1位置组件初始化失败config:"+H()(e)),defer.reject({message:"蓝信v1位置组件初始化失败config"+H()(e)})})):ae?Re().then((function(t){console.log("lark openLocation"),console.log(e),window.h5sdk.ready((function(){console.log("lark showLocation ready step"),tt.openLocation(e)}))})):je().then((function(){ce.openLocation(e)}))},preViewImg:function(t){console.log("preViewImg obj:"+(null==t?void 0:t.urls)+(null==t?void 0:t.current_index));for(var i=0;i<t.urls.length;i++){var o,a;if(window.hcm_env&&t.urls[i])if(-1!==ee()(o=t.urls[i]).call(o,"?"))-1===ee()(a=t.urls[i]).call(a,"env=")&&(t.urls[i]=t.urls[i]+window.hcm_env_post);else t.urls[i]=t.urls[i]+window.hcm_env_pre}if(window.isApp)window.WebViewJavascriptBridge.callHandler("showImage",t.urls.join(","),(function(e){}));else if(Me){var l;if(t&&!Y()(l=t.current).call(l,"http")){t.current=location.protocol+"//"+location.host+t.current;for(i=0;i<t.urls.length;i++)t.urls[i]=location.protocol+"//"+location.host+t.urls[i]}t.fail=function(e){n.show_warning(e)},console.log("in lanxin preciewImage"),delete t.operate_list,Be().then((function(){t.actions=["save","share"],console.log(t),Ce.media.previewImage(t)}),(function(e){console.log("蓝信v1图片组件初始化失败config:"+H()(e)),defer.reject({message:"蓝信v1图片组件初始化失败config"+H()(e)})}))}else if(E){console.log("is_we_chat obj");var r="android"==window.navigator.userAgent.toLowerCase().match(/Android/i);je().then((function(){if(console.log("in wechat previewImage"),t){var e,n;Y()(e=t.current).call(e,"http")||(t.current=location.protocol+"//"+location.host+t.current),Q()(n=t.current).call(n,"?")||r||(t.current=t.current+"?sso=work_inner");for(var i=0;i<t.urls.length;i++){var o,a;Y()(o=t.urls[i]).call(o,"http")||(t.urls[i]=location.protocol+"//"+location.host+t.urls[i]),Q()(a=t.urls[i]).call(a,"?")||r||(t.urls[i]=t.urls[i]+"?sso=wechatcomponent")}}console.log(t),ce.previewImage(t)}),(function(){console.log("wx_error:"),console.log(t),p.showImg(t.urls,0,t.operate_list,t.config),console.log("wx_error:"+e)}))}else if(de||_e||ue||P){var c="android"==window.navigator.userAgent.toLowerCase().match(/Android/i);console.log("is_wx_work obj"),je().then((function(){if(console.log("in wx work previewImage"),t){var e,n;Y()(e=t.current).call(e,"http")||(t.current=location.protocol+"//"+location.host+t.current),Q()(n=t.current).call(n,"?")||c||(t.current=t.current+"?sso=work_inner");for(var i=0;i<t.urls.length;i++){var o,a;Y()(o=t.urls[i]).call(o,"http")||(t.urls[i]=location.protocol+"//"+location.host+t.urls[i]),Q()(a=t.urls[i]).call(a,"?")||c||(t.urls[i]=t.urls[i]+"?sso=work_inner")}}console.log(t);try{t.success=function(e){console.log("success",e)},t.fail=function(e){var n;console.log("fail",e),p.showImg(t.urls,ee()(n=t.urls).call(n,t.current),t.operate_list,t.config)},ce.previewImage(t)}catch(e){console.log(e)}})).catch((function(e){var n,i,o;if(t&&!Y()(n=t.current).call(n,"http")){var a;window.hcm_wengen&&Y()(a=t.current).call(a,window.hcm_wengen)?t.current=location.protocol+"//"+location.host+t.current:t.current=location.protocol+"//"+location.host+window.hcm_wengen+t.current;for(var l=0;l<t.urls.length;l++){var r;window.hcm_wengen&&Y()(r=t.urls[l]).call(r,window.hcm_wengen)?t.urls[l]=location.protocol+"//"+location.host+t.urls[l]:t.urls[l]=location.protocol+"//"+location.host+window.hcm_wengen+t.urls[l]}}(console.log("is_we_work fail"),console.log(t),c)?p.showImg(t.urls,ee()(i=t.urls).call(i,t.current),t.operate_list,t.config):p.showImg(t.urls,ee()(o=t.urls).call(o,t.current),t.operate_list,t.config)}))}else if(xe){var s={imgPaths:[]};if(console.log("in ccwork preciewImage"),(null==t?void 0:t.current_index)?s.index=null==t?void 0:t.current_index:s.index=0,t&&t.urls)for(i=0;i<t.urls.length;i++){var d,u,_="";if(Q()(d=t.urls[i]).call(d,"http"))_=t.urls[i];else _=window.hcm_wengen&&Y()(u=t.urls[i]).call(u,window.hcm_wengen)?location.protocol+"//"+location.host+t.urls[i]:location.protocol+"//"+location.host+window.hcm_wengen+t.urls[i];s.imgPaths.push(_)}we.init((function(e){console.log(s),we.ccworkPreviewPics(s,(function(e){console.log(e)}))})),console.log(s)}else if(ye){var m={img:[]};if((null==t?void 0:t.current_index)?m.index=null==t?void 0:t.current_index:m.index=0,console.log("in emmcloud preciewImage"),t&&t.urls)for(i=0;i<t.urls.length;i++){var f,h;_="";if(Q()(f=t.urls[i]).call(f,"http"))_=t.urls[i];else _=window.hcm_wengen&&Y()(h=t.urls[i]).call(h,window.hcm_wengen)?location.protocol+"//"+location.host+t.urls[i]:location.protocol+"//"+location.host+window.hcm_wengen+t.urls[i];m.img.push({imgUrl:_,originImgUrl:_})}be.iPhoto.browse(m),console.log(m)}else if(ae)console.log("in lark previewImage"),p.showImg(t.urls,g,t.operate_list,t.config);else if(ve)Te().then((function(){var e;if(console.log("in ding previewImage"),t&&!Y()(e=t.current).call(e,"http")){t.current=location.protocol+"//"+location.host+t.current;for(var n=0;n<t.urls.length;n++)t.urls[n]=location.protocol+"//"+location.host+t.urls[n]}t.onFail=function(e){console.log("ding previewImage error"),console.log(e)},console.log(t),ge.biz.util.previewImage(t)}));else{var g=0;U()(angular).call(angular,t.urls,(function(e,n){e==t.current&&(g=n)})),console.log(t),p.showImg(t.urls,g,t.operate_list,t.config)}},pageLoaded:function(e){window.isApp2&&window.WebViewJavascriptBridge.callHandler("pageLoaded",e,(function(e){}))},stateChange:function(e){window.isApp2&&window.WebViewJavascriptBridge.callHandler("stateChanged",e,(function(e){}))},tokenInvalid:function(){window.isApp2&&window.WebViewJavascriptBridge.callHandler("tokenInvalid","",(function(e){}))},scanWXQRCode:function(){var e=a.defer();return window.isApp?window.WebViewJavascriptBridge.callHandler("scanQr",{},(function(t){e.resolve(t)})):je().then((function(){ce.scanQRCode({desc:"scanQRCode",needResult:1,success:function(t){e.resolve(t.resultStr)}})})),e.promise},hideShareOption:function(){void 0!==ce&&je().then((function(){ce.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:copyUrl"]})}),(function(e){console.log(e)}))},setShareOption:function(e,t,n,o,a){void 0!==ce&&je().then((function(){ce.showMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline"]}),["share:appMessage","menuItem:share:timeline"],ce.onMenuShareAppMessage({title:e,desc:t,link:n||window.location.origin+window.location.pathname+window.location.hash.substr(0),imgUrl:o||i("tZg7"),type:"",dataUrl:"",success:function(){a&&a()},cancel:function(){}}),ce.onMenuShareTimeline({title:e,link:n||window.location.origin+window.location.pathname+"?hash="+window.encodeURIComponent(window.location.hash.substr(1)),imgUrl:o||i("tZg7"),success:function(){a&&a()},cancel:function(){}})}))},getNetworkType:function(){var e=a.defer();return window.isApp?window.WebViewJavascriptBridge.callHandler("getNetworkType","",(function(t){var n=JSON.parse(t);e.resolve(n.networkType)})):je().then((function(){ce.getNetworkType({success:function(t){var n=t.networkType;e.resolve(n)}})}),(function(t){e.reject({message:"微信组件初始化失败："+H()(t)})})),e.promise},onSearchBeacons:function(){var e=a.defer();return je().then((function(){ce.onSearchBeacons({complete:function(t){e.resolve(t)}})}),(function(t){e.reject({message:"微信组件初始化失败："+H()(t)})})),e.promise},startSearchBeacons:function(){var e=a.defer();return je().then((function(){ce.startSearchBeacons({complete:function(t){e.resolve(t)}})}),(function(t){e.reject({message:"微信组件初始化失败："+H()(t)})})),e.promise},stopSearchBeacons:function(){var e=a.defer();return je().then((function(){ce.stopSearchBeacons()}),(function(t){e.reject({message:"微信组件初始化失败："+H()(t)})})),e.promise},fileDownload:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;xe&&(console.log(J()(t=J()(n="is_ccwork downloadFile begin: ".concat(e," : ")).call(n,i," :")).call(t,o)),we.init((function(t){we.ccworkFileDownload({url:e,savename:i},(function(e){return console.log(e)}))})));if(ye&&(console.log("is_emmcloud downloadFile begin: ".concat(e)),be.iFile.download(e)),ve){var a=e;Te().then((function(){if(ee()(e).call(e,"loadsourcedocument")>0){var t=e.split("/"),n=t.pop(),l=t.join("/").replace("loadsourcedocumentpdf","get_file_by_type").replace("loadsourcedocument","get_file_by_type");a=l+"?index="+n+"&type="+o+"&file_name="+i}console.log("ding downloadFile begin: ".concat(a)),ge.biz.util.downloadFile({url:a,name:i,onProgress:function(e){console.log("ding downloadFile ing: ".concat(e))},onSuccess:function(e){console.log("ding downloadFile success: ".concat(e))},onFail:function(){console.log("ding downloadFile failed"),window.open(a)}})}))}De?Oe.ready((function(){Oe.do("previewDoc",{downloadUrl:e,fromType:5,fileName:i,needDownload:1,success:function(e){console.log("调用成功")},fail:function(e){console.log("调用失败")},complete:function(e){console.log("调用完成")}})})):window.open(e)},openNewPage:function(e,t){var n=a.defer();return ve?Te().then((function(){console.log("in ding openNewPage"),ge.runtime.permission.requestAuthCode({corpId:S.corpId,onSuccess:function(t){var i,o,a,l,r=(i=e,o=t.code,a="ding",l=encodeURI(i),location.protocol+"//"+location.host+window.hcm_wengen+"/api/auth/login_by_sso?sso="+a+"&next="+encodeURIComponent(l)+"&app_type="+window.app_type+"&code="+o+"&is_redirect=True"+window.hcm_env_post);console.log("ding requestOperateAuthCode success"+r),n.resolve(r)},onFail:function(e){console.log("ding requestOperateAuthCode failed"+H()(e)),n.reject()}})}),(function(e){console.log("ding requestOperateAuthCode failed"+H()(e)),n.reject()})):n.resolve(e),n.promise},client_back:function(e,t,i){var o,a=d.getContext("auth");if(a&&(null==a?void 0:a.sso)&&(null===(o=a.sso)||void 0===o?void 0:o.sso_type)){var l=a.sso.sso_type;if(!_e||"wwx_work"!==l&&"work"!==l)if(pe&&"wechatcomponent"===l)window.location.href=null==e?void 0:e.wechatcomponent;else if(ue&&"work_inner"===l)window.location.href=null==e?void 0:e.work_inner;else if(!ve||"ding_talk"!==l&&"ding"!==l)if(ee()(l).call(l,"platform")>=0){var r,c="platform_id_"+(null===(r=a.sso)||void 0===r?void 0:r.sso_platform_id);e[c]&&(window.location.href=e[c])}else"customer_sso"===l&&(window.location.href=null==e?void 0:e.customer_sso);else window.location.href=null==e?void 0:e.ding_talk;else window.location.href=null==e?void 0:e.wwx_work}else(null==e?void 0:e.other_url)?window.location.href=null==e?void 0:e.other_url:(console.log("client_back:no url map"),n.super_go(t,i,{location:"replace"}))},back:function(){var e,t=document.referrer,n=window.location.href,i=!1;if(n&&ee()(e=n.toString()).call(e,"message_id")>=1&&window.history.length<=2&&(i=!0),console.log("weChatService_back:parentUrl:"+t+":"+window.history.length+":"+i),window.history.length<=1||Q()(t).call(t,"/login")||Q()(t).call(t,"/oauth2/third/auth")||i)if(de||ue||E||_e||P)je().then((function(){try{console.log("weChatService_back:in:"),ce.closeWindow()}catch(e){console.log("weChatService_back:error:"+e+"微信关闭当前浏览器失败"),window.history.back()}}),(function(e){console.log("微信组件初始化失败："+H()(e)+"微信关闭当前浏览器失败"),window.history.back()}));else if(xe)we.closeWebView();else if(ye)be.iWindow.close();else if(ve)Te().then((function(){console.log("in ding close"),ge.biz.navigation.close({onSuccess:function(e){console.log("ding close success:".concat(H()(e)))},onFail:function(e){console.log("ding close failed:".concat(H()(e)))}})}));else if(re)console.log("is_hope_sdk:back"),le.common.popTo(-1,{}),console.log("is_hope_sdk:back:success");else if(Me)Be().then((function(){console.log("is_lanxin:close:into"),Ce.ui.onHistoryBack((function(){return window.history.go(-1),console.log("is_lanxin:close:success"),!0}))}),(function(e){console.log("is_lanxin:close:error"),console.log(e)}));else{var o,a,l,r;if("pc"===window.client)if("oa"===(null===(o=c.params)||void 0===o?void 0:o.refer)||"wenfeng"===(null===(a=c.params)||void 0===a?void 0:a.refer))Pe();else if(window.history.length>1){var s=location.href;window.history.back(),R()((function(){location.href===s&&(console.log("redirect.index.page"),c.go("index",{},{location:"replace"}))}),300)}else c.go("index",{},{location:"replace"});else if("ipadhome"===(null===(l=c.params)||void 0===l?void 0:l.refer))window.postMessage("hcm_back_apphome");else if("wenfeng"===(null===(r=c.params)||void 0===r?void 0:r.refer))window.location.href="http://58.221.216.60:9998/third/close.html";else try{Pe()}catch(e){var d;console.log(L()(d=H()(e)).call(d,0,2e3)),window.history.back()}}else"oa"===c.params.refer?Pe():"ipadhome"===c.params.refer?window.postMessage("hcm_back_apphome"):"oa_yubei"===c.params.refer?window.AlipayJSBridge.call("closeH5Page",{},(function(e){console.log("oa_yubei:"+e)})):(console.log("ready.windows.history.back"),window.history.back())},initConfig:function(){ve&&Te()},downloadTcMp4:function(e,t){n.show_waiting();var i=function(e,t){if(console.log("downloadRemoteVideo, fileUrl, fileName:",e,t),void 0===e||!e)return n.show_warning("文件路径不能为空"),!1;return function(e,t,n){var i=new XMLHttpRequest;return i.open("get",e,!0),n.responseType&&(i.responseType=n.responseType),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&t(i)},i.send()}(e,(function(e){!function(e,t){window.URL=window.URL||window.webkitURL;var n=document.createElement("a"),i=new Blob([e]),o=window.URL.createObjectURL(i);n.href=o,n.download=t,n.click(),window.URL.revokeObjectURL(o)}(e.response,t)}),{responseType:"blob"})};u.callHcmCacheOpenApi("train.parameter.get.video.upload.params",{is_video:!0}).then((function(o){if(o.IF_LOCAL_VIDEO){var a=o.LOCAL_UPLOAD_VIDEO_URL+"/upload_video_download?app_id="+o.LOCAL_VIDEO_APP_ID+"&app_secret="+o.LOCAL_VIDEO_APP_SECRET;console.log("本地视频服务器下载, file_index, url:",e,a),i(a+"&course_index="+e,t),n.hide_waiting()}else u.callHcmOpenApi("train.online.course.get.video.url",{video_index:e}).then((function(e){var i=e.download_url;console.log("begin to download video: ",i,t),t||(t="视频.mp4"),fetch(i).then((function(e){return e.blob()})).then((function(e){var n=(window.URL||window.webkitURL).createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t,i.click()})).then((function(e){n.hide_waiting(),n.show_warning("已下载完成")})).catch((function(e){return console.error(e)}))}))}))},downloadShortUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600;console.log("short url download begin: ".concat(e)),u.callHcmOpenApi("hcm.short.url.generator",{url_type:"source",expire_time:t,params:{uri:e},_host:window.location.host}).then((function(e){var t=$("<a style='display: none'></a>").attr("href",e).appendTo("body");t[0].click(),t.remove()}))}}}]),te.a.factory("weChatComponentService",["$rootScope","$http","$q","$timeout","$location","$state","$cacheFactory","contextService","dataService",function(e,t,n,i,o,a,l,r,c){return{getWeChatMessageTemplateList:function(e){return c.callHcmOpenApi("we.chat.template.list",{app_id:e},null,!0)}}}])},zuSw:function(e,t,n){var i=n("/FZm"),o=n("KYsz");window.app.controller("queryMorePanelController",["$scope","$controller","$timeout",function(e,t,n){t("SelectorPanelController",{$scope:e}),n((function(){var t;e.category_data_list=null===(t=e.data_list)||void 0===t?void 0:o(t).call(t,(function(e,t,n){var o=i(e).call(e,(function(e){return e.key===t.category_key}));return o?o.list.push(t):e.push({key:t.category_key,name:t.category_name,list:[t]}),e}),[])}))}])},zylf:function(e,t){e.exports='<div class="general-role-error-box {{role_name==\'员工\' && \'no-emp\'}}">\n    <div class="info"\n         style=" background: url(/img?type=photo&index={{ roleErrorBackgroundIndex }}) no-repeat {{ $root.mobile ? \'bottom\' : \'top\' }};\n                 background-size: 100%">\n        <div class="error-info" ng-if="role_name==\'员工\' && !isEmmcloud">\n            <div>未找到您的手机号码</div>\n            <div>{{mobile_number}}</div>\n            <div>在系统中的登记信息</div>\n            <div>&nbsp;</div>\n            <div>请与您的HR专员联系确认后再继续操作</div>\n        </div>\n\n        <div class="error-info" ng-if="role_name==\'员工\' && isEmmcloud">\n            <div>很抱歉，您在云+中登记的手机号码:</div>\n            <div>{{mobile_number}}</div>\n            <div>在HCM系统中未登记</div>\n            <div>&nbsp;</div>\n            <div>请您确认是修改云+中的手机号</div>\n            <div>还是修改HCM中的手机号</div>\n        </div>\n\n        <div class="error-info" ng-if="role_name!=\'员工\'">\n            <div>您的权限有误</div>\n            <div>&nbsp;</div>\n            <div ng-if="role_name">该操作需要具备 {{role_name}} 权限</div>\n            <div>&nbsp;</div>\n            <div>请确认您具备该权限后再继续操作</div>\n        </div>\n    </div>\n    <div ng-click="role_name==\'员工\'?(isSSO?reBind():reLogin()):goIndex()"\n         class="oper"\n         ng-if="!isEmmcloud || role_name==\'员工\'">\n        {{role_name==\'员工\'?\'重新绑定\':\'回到首页\'}}\n    </div>\n</div>\n'}}]);