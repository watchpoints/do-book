(window.webpackJsonp=window.webpackJsonp||[]).push([[152,19],{"+lK5":function(e,t,n){"use strict";var i=n("ZbhI"),a=n.n(i),o=n("M5Mt"),s=n.n(o),l=n("WxoT"),c=n.n(l),r=n("mnMc"),d=n.n(r),p=n("+oHS"),u=n.n(p),m=n("RXMP"),_=n.n(m),g=n("o+MX"),h=n.n(g),v=n("5PDf"),f=n.n(v),y=n("FLGM"),w=n.n(y);window.app.factory("portalService",["$rootScope","dataService","$q",function(e,t,n){return{pluginsConfig:function(){var e=n.defer();return t.callHcmOpenApi("portal.plugins.config",{},null,!0).then((function(t){var n,i,a={};w()(t).call(t,(function(e){a[e.category_key]?a[e.category_key].children.push(e):(a[e.category_key]=angular.copy(e.category),a[e.category_key].children=[e])})),e.resolve(f()(n=w()(i=u()(a)).call(i,(function(e){return a[e]}))).call(n,(function(e){return e.children.length>0})))})),e.promise},getPlugins:function(){return t.callHcmOpenApi("portal.plugins.list",{},null,!0)},modifyPlugins:function(e){return t.callHcmOpenApi("portal.plugins.modify",{info:e},null,!0)},resetPlugins:function(){return t.callHcmOpenApi("portal.plugins.reset",{},null,!0)}}}]);n("vjaz"),n("E0Ah"),n("gsMG");var b=n("KYsz"),$=n.n(b),x=(n("sStD"),n("o3ei"),n("UAhV")),k=n("z/LF"),S=n.n(k),A=n("CkDz");n("xAfy");window.app.controller("portalPluginsSetting",["$scope","dataService","hcPluginsSettingService","$hcForm","$hcDialog","dataToolService","contextService",function(e,t,n,i,o,s,l){e.init=function(){var t,n;e.show_new_portal=!!(null===(t=l.getContext("auth"))||void 0===t||null===(n=t.company_setting)||void 0===n?void 0:n.show_new_portal),e.getPluginsConfig(),e.plugin=null},e.getPluginsConfig=function(){n.pluginsConfig().then((function(t){var n=0===e.params.target||void 0===e.params.target?"pc":"mobile";e.pluginsConfig=$()(t).call(t,(function(t,i){var o;return i.target&&!((null===(o=i.target)||void 0===o?void 0:a()(o).call(o,n))>-1)||(i.is_new||i.is_old)&&i.is_new!==e.show_new_portal&&i.is_old!==!e.show_new_portal||t.push(i),t}),[])}))},e.choose_plugins=function(t){var n=angular.extend({"home-widget-message":x.a,"count-sec":{title:"组件设置",controller:A.a,template:S.a,size:"middle"}},s.getWidget());n[t.plugin]?o.getDialog(n[t.plugin]).show(t).then((function(n){n.params=n.params||{},n.message_show_sort&&(n.params.message_show_sort=n.message_show_sort,n.params.is_dynamic=n.is_dynamic),n.plugin=t.plugin,e.plugin=n,e.callback(n)})):(e.plugin=t,e.callback())},e.callback=function(){e.$dialog.resolve_data(e.plugin),e.$dialog.dialog_close()}}]);n("pNMO"),n("4Brf"),n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var C=n("OBge"),M=n.n(C),O=n("lHQ6"),D=n.n(O),j=n("a0dU"),P=n.n(j),E=(n("ls82"),n("SPx3")),I=n.n(E),T=(n("xxHt"),n("sGGm"),n("wd/R")),H=n.n(T);n("bmIa"),n("F6Fg"),n("UnGC");window.app.directive("homeWidgetTimeCalendar",(function(){return{restrict:"E",template:n("Pfe1"),scope:{model:"="},controller:["$scope","$rootScope","$q","dataService","homeWidgetAttendCalendarService","TimeCommonService","contextService","TimeDataService",function(e,t,n,i,a,o,s,l){e.reduce_permit=!0,e.auth=s.getContext("auth"),e.weeks=["一","二","三","四","五","六","日"],e.init=I()(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.current_date=e.selected_date=H()().format("YYYY-MM-DD"),e.year=e.calendar_year=H()(e.current_date).year(),e.month=e.calendar_month=H()(e.current_date).month()+1,e.employee_id=e.auth.employee.id,e.depart_id=e.auth.jobs[0].department_id,t.next=7,e.getPreMonthCount();case 7:e.checkInfo=t.sent,e.setCalendar(e.year,e.month);case 9:case"end":return t.stop()}}),t)}))),e.getPreMonthCount=function(){var e=n.defer();return i.callHcmOpenApi("time.parameters.setting.get.data.by.key.other",{time_depart:!0,key:"attend_calendar_data_view_month"}).then((function(t){t?e.resolve({check:!0,value:D()(t.value)}):e.resolve({check:!1,value:0})}),(function(){e.resolve({check:!1,value:0})})),e.promise},e.hex12Boolean=function(t,n){if(!e.checkInfo.check)return!0;if(t<e.year||t===e.year&&n<e.month){var i=e.month-n;if((i=i<1?i+12*(e.year-t):i)>e.checkInfo.value)return!1}return!0},e.calendarMinus=function(t,n){"m"===n?1===e.calendar_month?(e.calendar_month=12,e.calendar_year=e.calendar_year-1):e.calendar_month=e.calendar_month-1:e.calendar_year=e.calendar_year-1,t&&e.setCalendar(e.calendar_year,e.calendar_month,n)},e.calendarPlus=function(t,n){"m"===n?12===e.calendar_month?(e.calendar_month=1,e.calendar_year=e.calendar_year+1):e.calendar_month=e.calendar_month+1:e.calendar_year=e.calendar_year+1,t&&e.setCalendar(e.calendar_year,e.calendar_month,n)},e.setCalendar=function(n,i,a){if(!e.hex12Boolean(n,i))return t.show_warning("对不起，"+n+"年"+i+"月及以前数据已结转封存，无法查看！"),void e.calendarPlus(!1,a);e.reduce_permit=!0,e.calendar_data=o.getMonthCalendar(n,i),e._fetchSchedule(o.getMonthBegin(n,i),o.getMonthEnd(n,i)).then((function(t){e.month_calendar_data=t}))},e._fetchSchedule=function(t,i){var o=n.defer(),s=[a.getDataList(t,i,e.depart_id,[e.employee_id]),a.getDataListByEmp(t,i,e.employee_id)];return M.a.all(s).then((function(t){var n,i,a={};_()(n=t[0].list).call(n,(function(e){a[e.date]=e})),e.schedule_month=t[1].count_month,e.shift_month=t[1].shift_month,e.work_unusual=t[1]._countType,e.work_onjob_count=t[1].work_onjob_count,e.work_onjob=t[1].work_onjob,e.detail=t[1]._detail,e.item_keys=u()(t[1]._detail),w()(i=e.item_keys).call(i,(function(n){e.detail[n].count=t[1]._detail[n]._count,e.detail[n].sum=t[1]._detail[n]._sum})),o.resolve(a)})),o.promise},e.single_click=!1,e.refreshData=function(){if(e.single_click)t.show_warning("数据刷新中，请勿重复刷新。","warning");else{e.single_click=!0,t.show_waiting();var n=o.getMonthBegin(e.calendar_year,e.calendar_month),i=o.getMonthEnd(e.calendar_year,e.calendar_month);l.attendCalcService(n,i,e.depart_id,[e.employee_id]).then((function(){e._fetchSchedule(n,i).then((function(t){e.month_calendar_data=t})),e.single_click=!1,t.show_warning("刷新成功","warning"),t.hide_waiting()}),(function(n){t.show_warning(n.description,"warning"),e.single_click=!1,t.hide_waiting()}))}},e.dateView=function(t){e.selected_date=t}}]}}));n("XNyo"),n("b/Sd");window.app.directive("portal",[function(){return{restrict:"EA",replace:!0,template:n("0I+d"),scope:{model:"="},controller:["$scope","$rootScope","$hcDialog","portalService","dataToolService","hcAutoCopyService","contextService",function(e,t,i,o,l,r,p){e.init=function(){var t,n,i,a,o;e.roles=null!==(t=null===(n=p.getContext("auth"))||void 0===n?void 0:n.roles)&&void 0!==t?t:{},e.is_admin=(null===(i=e.roles)||void 0===i?void 0:i.onlyoneowner)||(null===(a=e.roles)||void 0===a?void 0:a["sys-manager"]),e.is_onlyoneowner=null===(o=e.roles)||void 0===o?void 0:o.onlyoneowner,e.getPlugins(),e.setOperate(),e.sortable_config={sort:!1,animation:300}},e.getPlugins=function(){o.getPlugins().then((function(t){e.plugins=t}))},e.modifyPlugins=function(n){o.modifyPlugins(n||e.plugins).then((function(n){e.plugins=n,t.show_warning("修改成功")}))},e.resetPlugins=function(){o.resetPlugins().then((function(n){e.plugins=n,t.show_warning("修改成功")}))},e.setOperate=function(){e.plugins_set=[],e.portal_operate=[{key:"add_plugins",label:"添加插件",click:e.add_plugins},{key:"restore_layout",label:"恢复默认布局",click:e.restore_layout},{key:"adjust_layout",label:"调整布局",click:e.adjust_layout}]},e.add_plugins=function(){i.getDialog({controller:"portalPluginsSetting",template:n("uMe+")}).params({}).title("新增插件").show().then((function(n){var i,a,o;"app_list"===(null==n||null===(i=n.category)||void 0===i?void 0:i.key)&&f()(a=e.plugins).call(a,(function(e){return"app_list"===e.category_key})).length?t.show_warning("主页中已经存在“最近应用”插件"):(n.params=n.params||{},n.is_dynamic&&(n.params.is_dynamic=n.is_dynamic,n.params.message_show_sort=n.message_show_sort),e.modifyPlugins(h()(o=e.plugins).call(o,[n])))}))},e.copy_plugin_config=function(e){var n,i=angular.copy(e);_()(n=u()(i)).call(n,(function(e){var t;d()(t=["key","params"]).call(t,e)||delete i[e]})),console.log("复制插件配置："+c()(i)),r.copy(c()(i))&&t.show_warning("已复制到剪贴板: "+c()(i))},e.delete_plugin=function(t){var n,i;s()(n=e.plugins).call(n,a()(i=e.plugins).call(i,t),1)},e.edit_plugin=function(t,n){var a=angular.extend({"home-widget-message":x.a},l.getWidget());"dashboard_child"===t.key&&i.getDialog(a[t.category.plugin]).params(t.params).show().then((function(t){e.plugins[n]=t}))},e.restore_layout=function(){i.confirm("是否恢复默认布局?",[{caption:"确认",func:function(){e.resetPlugins()}}])},e.adjust_layout=function(){e.sortable_config.sort=!0},e.cancel_adjust_layout=function(){e.sortable_config.sort=!1,e.getPlugins()},e.save_adjust_layout=function(){0===e.plugins.length?i.confirm("当前没有插件，即将恢复默认布局?",[{caption:"确认",func:function(){e.modifyPlugins(),e.sortable_config.sort=!1}}]):(e.modifyPlugins(),e.sortable_config.sort=!1)},e.showDelete=function(t){return"public"===t.shared_type&&e.is_onlyoneowner||"public"!==t.shared_type}}]}}])},"/443":function(e,t){e.exports='\x3c!--<home-widget-common-container class="home-widget-inner-recruit-job"--\x3e\n\x3c!--                              tabs="$ctrl.tabs" operates="$ctrl.operates" current-tab="\'inner-recruit\'">--\x3e\n\x3c!--    <div class="mobile-part" ng-if="$ctrl.client === \'mobile\'" ng-click="$ctrl.goToJobView($ctrl.job_list.list[0])">--\x3e\n\x3c!--        <div class="job-first-line">--\x3e\n\x3c!--            <div class="new-job">最新</div><div class="job-name">{{$ctrl.job_list.list[0].name}}</div>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--        <div class="job-second-line">--\x3e\n\x3c!--            <div>--\x3e\n\x3c!--                <span>{{$ctrl.job_list.list[0].department_name}}</span>--\x3e\n\x3c!--                <span>{{$ctrl.job_list.list[0].work_city}}</span>--\x3e\n\x3c!--            </div>--\x3e\n\x3c!--            <div class="release-time">{{$ctrl.job_list.list[0].release_date|timeFormatOne}}</div>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--    </div>--\x3e\n\x3c!--    <div class="pc-part" ng-if="$ctrl.client === \'pc\'">--\x3e\n\x3c!--        <ul>--\x3e\n\x3c!--            <li ng-repeat="job in $ctrl.job_list.list track by $index" ng-click="$ctrl.goToJobView(job)">--\x3e\n\x3c!--                <div class="job-first-line">--\x3e\n\x3c!--                    <div class="new-job" ng-if="$index === 0">最新</div><div ng-class="{\'job-name\': $index === 0}">{{job.name}}</div>--\x3e\n\x3c!--                </div>--\x3e\n\x3c!--                <div class="job-second-line">--\x3e\n\x3c!--                    <div>--\x3e\n\x3c!--                        <span>{{job.department_name}}</span>--\x3e\n\x3c!--                        <span>{{job.work_city}}</span>--\x3e\n\x3c!--                        <span>{{job.contacts}}</span>--\x3e\n\x3c!--                        <span ng-if="job.auto_offline_date">{{job.auto_offline_date.slice(0, 10)}}截止</span>--\x3e\n\x3c!--                    </div>--\x3e\n\x3c!--                    <div class="release-time">{{job.release_date|timeFormatOne}}</div>--\x3e\n\x3c!--                </div>--\x3e\n\x3c!--            </li>--\x3e\n\x3c!--        </ul>--\x3e\n\x3c!--    </div>--\x3e\n\x3c!--</home-widget-common-container>--\x3e\n\n<home-widget-common-container class="home-widget-inner-recruit-job"\n                              tabs="tabs" operates="operates" current-tab="\'inner-recruit\'">\n    <div ng-init="init()" class="portal-job-plugin" ng-class="{\'mobile-style\': client === \'mobile\'}">\n        <hc-list-new model="list_model"></hc-list-new>\n    </div>\n</home-widget-common-container>\n'},"/kcl":function(e,t){e.exports='<div class="home-widget-emp-card-info" ng-init="init()" ng-if="client===\'pc\'">\n    <div class="profile-info-content">\n        <div class="profile"><span class="content" ng-click="empProfile()">{{\'common_home_widget_emp_card_profile_title\'| translate}}</span></div>   \x3c!--个人资料--\x3e\n        <div class="photo" ng-if="view_meta_object.photo">\n            <hc-primary-photo options="view_meta_object.photo.options" ng-model="view_model.data.photo"\n                              class="hc_primary_photo_body"></hc-primary-photo>\n        </div>\n        <div class="desc">\n            <div class="name">{{view_model.data.name}}</div>\n            <div class="extend">\n                <div class="extend-item {{(view_meta_object[item_].options||{}).color}}"\n                     ng-repeat="item_ in extendModel.show_fields.list">\n                    <span ng-if="extendModel.show_fields.show_label && extendModel.show_fields.show_label.includes(item_)">{{view_meta_object[item_].label}}:</span>\n                    <span\n                        ng-bind-html="view_model.data|hcListCellData:view_meta_object[item_]|infoDefault|toTrusted"></span>\n                    <span class="hcm-tip" ng-if="(view_meta_object[item_].options||{}).tip">\n                        <span class="tip icon icon-hcm-question"></span>\n                        <span class="tip-detail">{{(view_meta_object[item_].options.tip|valueToFunc)()}}</span>\n                </span>\n                </div>\n            </div>\n        </div>\n        <div class="user-profile-sign" ng-if="!extendModel.show_sign.hide">\n            <span class="text">{{emp_slogan}}</span>\n            <span class="icon icon-hcm-edit" ng-click="editSlogan()"></span>\n        </div>\n    </div>\n</div>\n'},"/okm":function(e,t){e.exports='<div ng-style="sys_menu_style.sys_menu_box_style" class="sys-menu-box" ng-init="init()">\n    <div class="table-row" ng-repeat="row in menu_buttons">\n        <div class="table-cell menu-group" ng-repeat="button in row.buttons" ng-click="button.action()">\n            <div class="menu-button-icon {{button.icon}}" ng-click="button.action()"></div>\n            <div class="menu-button-title">{{button.title}}</div>\n            <div class="menu-button-desc">{{button.desc}}</div>\n        </div>\n    </div>\n</div>'},"0I+d":function(e,t){e.exports='<div class="portal" ng-init="init()">\n    <div class="plugins" ng-class="{\'sort\':sortable_config.sort}" ng-sortable="sortable_config" ng-if="plugins">\n        <div ng-repeat="plugin in plugins">\n            <home-widget-application ng-if="plugin.category.plugin===\'home-widget-application\'"\n                                     model="plugin"></home-widget-application>\n            <home-widget-dashboard ng-if="plugin.category.plugin===\'home-widget-dashboard\'"\n                                   model="plugin"></home-widget-dashboard>\n            <home-widget-message ng-if="plugin.category.plugin===\'home-widget-message\'"\n                                 model="plugin"></home-widget-message>\n            <home-widget-app-list ng-if="plugin.category.plugin===\'home-widget-app-list\'"\n                                  model="plugin"></home-widget-app-list>\n            <home-widget-time-calendar ng-if="plugin.category.plugin===\'home-widget-time-calendar\'"\n                                       model="plugin"></home-widget-time-calendar>\n            <home-widget-calendar ng-if="plugin.category.plugin===\'home-widget-calendar\'"\n                                  model="plugin"></home-widget-calendar>\n            <div class="drag-mask" ng-if="sortable_config.sort">\n                <div class="personal-operate">\n                    <span class="icon icon-hcm-edit" title="修改" ng-if="plugin.key===\'dashboard_child\'"\n                          ng-click="edit_plugin(plugin,$index)"></span>\n                    <span class="icon icon-hcm-copy" title="复制插件配置" ng-if="is_admin"\n                          ng-click="copy_plugin_config(plugin)"></span>\n                    <span class="icon icon-hcm-trash" title="删除" ng-click="delete_plugin(plugin)"\n                          ng-if="showDelete(plugin)"></span>\n                </div>\n                <div class="tip">拖拽进行移动</div>\n            </div>\n        </div>\n    </div>\n\n    <div class="add-operate" ng-class="{hover:operate}" ng-mouseover="operate=true" ng-mouseleave="operate=false"\n         ng-if="!sortable_config.sort">\n        <div class="details">\n            <div ng-repeat="item in portal_operate" ng-click="item.click()">\n                {{item.label}}\n            </div>\n        </div>\n        <div class="icon icon-hcm-add"></div>\n    </div>\n\n    <div class="layout_confirm" ng-if="sortable_config.sort">\n        <div class="operate-content">\n            <div class="btn-pc secondary" ng-click="cancel_adjust_layout()">取消</div>\n            <div class="btn-pc primary" ng-click="save_adjust_layout()">保存布局</div>\n        </div>\n        <div class="tip-content">\n            <div class="primary">\n                请拖拽卡片调整卡片的布局，再点击保存布局即可生效\n            </div>\n            <div class="secondary">\n                备注：取消 - 不保存当前布局直接退出\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},"0xni":function(e,t,n){"use strict";n("07d7"),n("5s+n");var i=n("FLGM"),a=n.n(i),o=n("6UaR"),s=n.n(o),l=n("eLKs"),c=n.n(l),r=n("/FZm"),d=n.n(r),p=n("Kwsy"),u=n.n(p),m=n("MoVH"),_=n.n(m),g=(n("JAQY"),n("4l1m"),n("8Auy")),h=function(){function e(e,t,n,i){this.$scope=e,this.$rootScope=t,this.$hcDialog=n,this.$element=i}return e.prototype.$onInit=function(){var e,t=this,i=this;(this.parsedOptions=this.funcParse(i.options),this.$scope.super_go=function(e,n,i,a){t.$rootScope.super_go(e,n,i,a)},this.model&&this.model.length>1)?u()((function(){n.e(92).then(n.bind(null,"TaHA")).then((function(e){var t,n,a=e.Swiper,o=e.Pagination,s=e.Autoplay,l=e.Navigation;a.use([o,s,l]);var c=d()(t=i.$element).call(t,".swiper-container")[0];i.carousel=new a(c,{direction:"horizontal",loop:!0,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:(null===(n=i.parsedOptions)||void 0===n?void 0:n.delay)||3e3,disableOnInteraction:!1},on:{click:function(e){var t=e.activeIndex;i.proxyClick(e,t)}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))}),1e3):this.$scope.imgClick=c()(e=this.proxyClick).call(e,this);this.$scope.$on("collapse-menu-plugins",(function(){u()((function(){var e,t;s()(i.carousel)?null===(e=i.carousel)||void 0===e||a()(e).call(e,(function(e){e.update()})):null===(t=i.carousel)||void 0===t||t.update()}),100)})),this.$scope.$watch("$ctrl.model",(function(e,t){e!==t&&u()((function(){var e,t;s()(i.carousel)?null===(e=i.carousel)||void 0===e||a()(e).call(e,(function(e){e.update()})):null===(t=i.carousel)||void 0===t||t.update()}))}),!0)},e.prototype.funcParse=function(e){var t={SCOPE:this.$scope,$hcDialog:this.$hcDialog,WINDOW:window};return g.a.jsonEval(e,t,{})},e.prototype.proxyClick=function(e,t){var n,i;null===(i=null===(n=this.parsedOptions)||void 0===n?void 0:n.drill)||void 0===i||i.call(n,e,t)},e.$inject=["$scope","$rootScope","$hcDialog","$element"],e}();window.app.component("hcCarousel",{bindings:{model:"<?",options:"<?"},template:_.a,controller:h})},"1lpt":function(e,t,n){e.exports=n.p+"resources/images/6a5810528d541033bcf97c708dee2309.png"},"21L5":function(e,t){e.exports='<div class="home-widget-emp-card-info-mobile" ng-init="init()" ng-if="client===\'mobile\'">\n    <div class="emp-card-sign">\n        <span class="text">{{emp_slogan}}</span>\n        <span class="icon icon-hcm-edit" ng-repeat="item in model_meta.extend"\n              ng-if="item[\'key\']==\'show_sign\'&& !item[\'value\'].hide" ng-click="editSlogan()"></span>\n    </div>\n    <div class="emp-card-content">\n    <hc-view model="view_model" class="view_model_mobile" ng-click="empProfile()"></hc-view>\n    <div class="emp-workflow" ng-click="unreadMessage()">\n        <span class="child-one">\n        </span>\n        <span class ="child-two">\n            <div class="high-light">{{unread_count.unread_count > 99 ? \'99+\' : unread_count.unread_count}}</div>\n            <div class="workflow-font">待办</div>\n        </span>\n    </div>\n    </div>\n</div>\n'},"2bDp":function(e,t){e.exports='<style>\n    .sumit_icon_select {\n        color: #03a9f4;\n        font-size: 25px;\n    }\n\n    .sumit_icon_unselect {\n        color: #bbb;\n        font-size: 25px;\n    }\n</style>\n<div class="employee-list-item tg" style="display: flex;align-items: center"\n     ng-repeat="_item in object.list" ng-class="{\'selected\': model.indexOf(_item.id) > -1}"\n     ng-click="choose(_item)" ng-model="model">\n    <div class="emp-photo">\n        <img ng-src="{{_item.photo|hcPhoto:46}}">\n    </div>\n    <div class="content" style="width: 100%">\n        <div>\n            <span class="name f16">{{_item.name}}</span>\n            <span class="alter-desc">{{desc}}</span>\n        </div>\n        <div class="desc" ng-if="!unit_position_mode">\n            {{_item.department}}\n            <span ng-if="!!_item.department&&!!_item.job_title">-</span>\n            {{_item.job_title}}\n        </div>\n        <div class="desc" ng-if="unit_position_mode">\n            {{_item.company_name}}\n            <span ng-if="!!_item.company_name&&!!_item.department">-</span>\n            {{_item.department}}\n            <span ng-if="!!_item.department&&!!_item.job_title">-</span>\n            {{_item.job_title}}\n        </div>\n    </div>\n    <span ng-class="model.indexOf(_item.id)> -1 ? \'icon-submit sumit_icon_select\' : \'icon-submit sumit_icon_unselect\'"></span>\n</div>'},"2dDx":function(e,t){e.exports='<div class="announce-container">\n    <div class="swiper-wrapper">\n        <div class="content swiper-slide" ng-repeat="announce in $ctrl.arrAnnounce" \n            data-id={{announce.id}}> \n            <div class="flex-left">\n                <div class="announce">\n                    <div class="icon icon-activity"></div>\n                    <div class="category" ng-if="announce.category">\n                        <span>{{announce.category}}</span>\n                    </div>\n                    <span class="text">{{announce.name}}</span>\n                </div> \n            </div>\n            <div class="flex-right" ng-if="$ctrl.client===\'pc\'&&announce.announce_time">\n                {{announce.announce_time|timeFormatOne}}\n            </div>\n        </div>\n    </div>\n</div>'},"4/ub":function(e,t,n){"use strict";n.r(t);var i=n("y/Cr");n("+4nQ");window.app.controller("userGuideListCtrl",["$scope","$controller","BaseCRUDService",function(e,t,n){var a=n.getModelService("UserGuide");t(i.a,{$scope:e,CRUDService:a,InfoDialog:null})}])},"5Y2l":function(e,t){e.exports='<div  ng-init="init()" ng-style="{\'height\':\'100%\'}">\n    <home-widget-common-container tabs="$ctrl.tabs" operates="$ctrl.operates" current-tab="$ctrl.currentTab">\n        <home-widget-body-list-container model-name="$ctrl.model">\n\n        </home-widget-body-list-container>\n    </home-widget-common-container>\n</div>\n'},"5cI2":function(e,t){e.exports='<div class="header_menu_box table">\n    <div>\n        <div class="title table_cell" ng-click="goToIndexPage()">HCM Cloud</div>\n        <div class="search table_cell">\n            <search-comp searchcompparams="searchcompparams"></search-comp>\n        </div>\n        <div class="button_box table_cell">\n            <div title="{{button.title}}" class="button {{button.icon}}"\n                 ng-click="button.action()"\n                 ng-repeat="button in headermenubuttons"></div>\n        </div>\n        <div ng-click="show_circle()" class="circle-icon icon-aperture-alt">\n            <div class="unread" ng-show="circle_notify.circle_unread"></div>\n        </div>\n        <div ng-click="show_message()" class="message-icon icon-hcm-email">\n            <div class="unread" ng-show="circle_notify.message_unread>0">{{circle_notify.message_unread}}</div>\n        </div>\n        <div class="user_box table_cell">\n            <div class="user_photo">\n                <img class="user_img" ng-src="{{user_img}}">\n            </div>\n            <div class="user_name">{{user_name}}</div>\n        </div>\n    </div>\n</div>\n'},"6Fiv":function(e,t,n){e.exports=n.p+"resources/images/4a6f7a0cffae5d63a42cf35e280e5258.png"},"7Ghx":function(e,t,n){"use strict";n.r(t);n("sMBO");var i=n("ZbhI"),a=n.n(i),o=n("8xC1");o.a.directive("dynamicDirectiveSearch",["$compile",function(e){return{restrict:"EA",replace:!0,template:"<div>{{directivename}}</div>",scope:{directivename:"=",object:"="},link:function(t,n,i){var a="";void 0!==t.directivename&&(a="<"+t.directivename,a+=" object='object'></"+t.directivename+">"),n.html(a),e(n.contents())(t)}}}]),o.a.directive("systemMenu",(function(){return{restrict:"E",scope:{menubuttons:"=menubuttons"},template:n("/okm"),controller:["$scope",function(e){e.menu_buttons=[],e.init=function(){for(var t={},n=[],i=0;i<e.menubuttons.length;i++)e.menubuttons[i].is_show&&n.push(e.menubuttons[i]);for(i=0;i<n.length;i++)i%4==0?((t={}).row_index=i/4,t.buttons=[],t.buttons.push(n[i])):t.buttons.push(n[i]),i%4==0&&e.menu_buttons.push(t);switch(e.menu_buttons.length){case 1:e.sys_menu_style={sys_menu_box_style:{"margin-top":"120px"}};break;case 2:case 3:e.sys_menu_style={sys_menu_box_style:{"margin-top":"70px"}}}},e.menubuttons_demo=[{icon:"icon icon-organizational",title:"组织架构1",action:function(){e.click_icon()}}]}]}})),o.a.directive("headerMenu",(function(){return{restrict:"E",scope:{headermenubuttons:"=headermenubuttons",headersearchcompparams:"=headersearchcompparams"},template:n("5cI2"),controller:["$scope","$state","contextService","dataService","$filter",function(e,t,n,i,o){var s=n.getContext("auth");e.user_img=o("hcPhoto")(s.employee.photo,60),e.user_name=s.employee.name,e.goToIndexPage=function(){t.go("main.index",{})},e.headersearchcompparams?e.searchcompparams=e.headersearchcompparams:e.searchcompparams={is_show_result:!0},e.is_header_menu_show=!1,e.$on("win_body_click_event",(function(t,n){var i,o;!(a()(i=n.target.className).call(i,"user_name")>=0||a()(o=n.target.className).call(o,"user_img")>=0)&&(e.is_header_menu_show=!1)})),e.show_header_menu=function(){e.is_header_menu_show=!e.is_header_menu_show},e.set_password=function(){t.go("pc/set_password",{},{location:"replace"})},e.go_my_profile=function(){t.go("main.emp",{},{location:"replace"})},e.logout=function(){i.callHcmCloudApi("/auth/logout",{},"POST").then((function(e){e.is_logout_success&&(n.setContext("auth",null),t.go("login",{}))}))},e.headermenubuttons_demo=[{icon:"icon icon-organizational",title:"组织架构",action:function(){e.click_icon()}},{icon:"icon icon-hcm-data",title:"组织架构",action:function(){e.click_icon()}}]}]}})),o.a.directive("selfserviceHeaderMenu",(function(){return{restrict:"E",scope:{headermenubuttons:"=headermenubuttons"},template:n("EQB0"),controller:["$scope","$state","contextService","$filter",function(e,t,n,i){var a=n.getContext("auth");e.user_img=i("hcPhoto")(a.employee.photo,60),e.user_name=a.employee.name,e.goToIndexPage=function(){t.go("pc/selfservicemenu",{})}}]}})),o.a.directive("personListBox",(function(){return{restrict:"EA",scope:{object:"="},template:n("sI+m"),controller:["$scope","$state",function(e,t){e.init=function(){},e.searchEmpGo=function(e){t.go("emp",{id:e.id})}}]}}))},"7MTh":function(e,t,n){"use strict";var i=n("FLGM"),a=n.n(i),o=n("8xC1"),s=n("TT7f"),l=n.n(s),c=(n("Utim"),n("nI6X"),n("h5m7"),n("wd/R")),r=n("8Auy");o.a.component("employeeWidget",{bindings:{searchKey:"<",resultState:"=",onHideSearch:"&"},template:l.a,controller:["SpecialistSearchService","$rootScope","$state","$filter","contextService","$scope","dataService",function(e,t,n,i,o,s,l){var d=this;this.$onInit=function(){s.empState="emp",e.searchPath().then((function(e){var a;if(null==e||null===(a=e.list_config)||void 0===a?void 0:a.operate_default){var o;d.operateDefault=i("valueToFunc")(function(e){"function"!=typeof s.super_go&&(s.super_go=t.super_go);var i={SCOPE:s,STATE:n,location:window.location,history:window.history,document:document,dataService:l,rootScope:t,WINDOW:window};return r.a.jsonEval(e,i,{})}(null==e||null===(o=e.list_config)||void 0===o?void 0:o.operate_default)),d.hasOperateDefault=!0}}))},this.getFilterDict=function(e){var t,n=c().format("YYYY-MM-DD"),i={begin_date:{lte:n},end_date:{gt:n},"employee.search_string":{like:e}},s=o.getContext("auth").company_setting.EMP_SEARCH_NEED_CHARGE,l=a()(t=o.getContext("auth").manager_departs).call(t,(function(e){return e.id}));return"1"==s&&0===l.length?0:("1"==s&&(i["department.origin_id"]={child_include:l}),i)},this.$onChanges=function(t){for(var n in s.dynamicMode=o.getContext("auth").company_setting.emp_use_dynamic_mode,s.develop=o.getContext("auth").company_setting.EMP_SEARCH_NEED_EXTEND,t)"searchKey"===n&&function(){d.resultState.is_searching++;var t=(new Date).getTime();if(d.api_flag=t,s.empResult=s.dynamicMode&&s.develop?{state:"search_list",params:{index:s.$ctrl.searchKey}}:{state:"search_result",params:{index:s.$ctrl.searchKey,group:"emp"}},s.dynamicMode&&s.develop){var n=d.getFilterDict(d.searchKey);0===n?(d.resultState.result_count=0,d.resultState.is_searching--):e.searchEmp(n,d.searchKey).then((function(n){d.emp_list=[],e.searchPath().then((function(t){var i;a()(i=n.data.list).call(i,(function(n){var i=e.getPathList(n,t);d.emp_list.push(i)}))})),d.api_flag===t?(d.count=n.data.count,d.searKey=n.searchKey,d.resultState.is_searching--,d.resultState.result_count+=n.data.count):d.resultState.is_searching--}))}else e.searchEmployee(d.searchKey).then((function(e){d.api_flag===t?(d.emp_list=e.list,d.count=e.count,d.resultState.is_searching--,d.resultState.result_count+=d.emp_list.length):d.resultState.is_searching--}))}()}}]})},"7QQP":function(e,t){e.exports='<div class="home-widget-message-task" ng-init="init()" ng-style="{\'height\':\'100%\'}">\n    <home-widget-common-container\n        class="home-widget-message-task-header"\n        tabs="$ctrl.tabs"\n        operates="$ctrl.operates"\n        current-tab="$ctrl.currentTab"\n    >\n        <home-widget-body-list-container\n            class="home-widget-message-task-container"\n            model-name="$ctrl.model"\n            filter-dict="$ctrl.filterDict"\n            refresh="$ctrl.refresh"\n        >\n\n        </home-widget-body-list-container>\n    </home-widget-common-container>\n</div>\n'},"7xSq":function(e,t,n){var i=n("KHwQ").module("myApp");e.exports=i},"8rxN":function(e,t,n){"use strict";n("sMBO");var i=n("M5Mt"),a=n.n(i),o=n("ZbhI"),s=n.n(o),l=n("5PDf"),c=n.n(l),r=n("RXMP"),d=n.n(r),p=n("WxoT"),u=n.n(p),m=n("FLGM"),_=n.n(m),g=n("Im7n"),h=n.n(g);n("8Auy");window.app.controller("MostUsedAppAdjustCtrl",["$scope","$hcConfigList","$hcDataset","contextService","$q","HomeWidgetMostUsedAppService","IndexService","$filter","$rootScope","hcAutoCopyService",function(e,t,n,i,o,l,r,p,m,g){e.init=function(){e.auth=i.getContext("auth"),e.initComponent()},e.submit=function(){var t=e.parse_app_list_order();t&&(e.$dialog.resolve_data(t),e.$dialog.dialog_close())},e.cancel=function(){e.$dialog.dialog_close()},e.cleanInvalidData=function(){var t,n=_()(t=e.invalid_id).call(t,(function(e){return l.delMostUsedApp(e)}));o.all(n).then((function(){m.show_warning("已清理"+e.invalid_id.length+"条无效记录"),e.initComponent()}))},e.copyAppList=function(){var t;g.copy(u()(_()(t=e.dataset_model.selected_list).call(t,(function(e){return{app_id:e.id,is_service:e.is_service}})))),m.show_warning("已将应用ID复制到剪贴板")},e.operate_meta=[{key:"cancel",label:"取消",func:e.cancel},{key:"submit",label:"确定",default:!0,func:e.submit},{key:"clear_invalid",default:!0,label:"清理无效记录",hide:function(){return!p("getValue")(e,["invalid_id","length"])},left:!0,func:e.cleanInvalidData},{key:"get_app_id_list",label:"复制应用列表",hide:function(){var t,n,i,a;return!((null===(t=e.auth)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.onlyoneowner)||(null===(i=e.auth)||void 0===i||null===(a=i.roles)||void 0===a?void 0:a["sys-manager"]))},left:!0,func:e.copyAppList}],e.$dialog.operates(e.operate_meta),e.initComponent=function(){var i={favor_app_list:l.getMostUsedAppList(e.auth.company.id,e.auth.employee.id),my_app:r.getMyApplication("pc")};o.all(i).then((function(i){var a,o;e.application_list=[],e.my_app=angular.copy(i.my_app),e.my_app=_()(a=e.my_app).call(a,(function(t){var n;return t.key=t.id,d()(n=t.applications).call(n,(function(t){t.key=t.id,t.label=t.name,e.application_list.push(t)})),t.fields=t.applications,t})),e.favor_app_list=[],e.invalid_id=[],e.origin_favor_app_list=angular.copy(i.favor_app_list),_()(o=i.favor_app_list.list).call(o,(function(t){var n,i=c()(n=e.application_list).call(n,(function(e){return e.id===t.app_id&&!!e.is_service==!!t.is_service}))[0];p("isValidValue")(i)?(i.sequence=t.sequence,i.favor_id=t.id,e.favor_app_list.push(i)):t.id&&e.invalid_id.push(t.id)})),e.invalid_id.length>0&&m.show_warning('存在不可用的最近应用，如需清理请点击"清理无效记录"'),e.dataset_model=n.createDataset({loader:e.getDatasetData,load_params:[]}),e.dataset_model.$initDataset(),e.dataset_model.selected_list=angular.copy(e.favor_app_list),e.config_model=t.createConfigList({meta:[{width:100,label:"名称",field:["name"]}],data:e.dataset_model.selected_list,show_index:!0,operates:[{icon:"icon-hcm-arrow-cross-up-solid",func:function(t,n){e.operateCondition.move_up(t,n)}},{icon:"icon-hcm-arrow-cross-down-solid",func:function(t,n){e.operateCondition.move_down(t,n)}},{icon:"icon-hcm-delete-circle-solid",func:function(t,n){e.operateCondition.delete(t,n)}}]})}))},e.getDatasetData=function(){var t=o.defer();return t.resolve(e.my_app),t.promise},e.parse_app_list_order=function(){var t,n,i,a;if(!(e.dataset_model.selected_list.length>32)){e.selectedAppList=_()(t=e.dataset_model.selected_list).call(t,(function(e,t){var n;return{id:e.id,sequence:t,is_service:null!==(n=e.is_service)&&void 0!==n&&n}}));var o=[],s=[];_()(n=e.selectedAppList).call(n,(function(t){var n,i=c()(n=e.favor_app_list).call(n,(function(e){return e.id===t.id}))[0];i?(i.parsed=!0,i.favor_id?(t.favor_id=i.favor_id,i.sequence!==t.sequence&&o.push(t)):s.push(t)):s.push(t)}));var l=_()(i=c()(a=e.favor_app_list).call(a,(function(e){return!e.parsed}))).call(i,(function(e){return{id:e.favor_id}}));return{data_to_add:s,data_to_modify:o,data_to_del:l}}m.show_warning("自定义保存的应用不得超过32个")},e.operateCondition={move_up:function(t){var n,i=s()(n=e.dataset_model.selected_list).call(n,t);if(0!==i){var o,l,c=a()(o=e.dataset_model.selected_list).call(o,i,1)[0];a()(l=e.dataset_model.selected_list).call(l,i-1,0,c)}},move_down:function(t){var n,i=s()(n=e.dataset_model.selected_list).call(n,t);if(i!==e.dataset_model.selected_list.length-1){var o,l,c=a()(o=e.dataset_model.selected_list).call(o,i,1)[0];a()(l=e.dataset_model.selected_list).call(l,i+1,0,c)}},delete:function(t){var n,i,o=s()(n=e.dataset_model.selected_list).call(n,t);a()(i=e.dataset_model.selected_list).call(i,o,1)}}}]),t.a={controller:"MostUsedAppAdjustCtrl",template:h.a,title:"常用应用设置"}},"8xC1":function(e,t,n){"use strict";var i=n("KHwQ").module("myApp");t.a=i},"9bPn":function(e,t){e.exports='<div class="home-widget-growth-record">\n    <div ng-init="init()" class="growth-record-plugin" ng-class="{\'mobile-style\': client === \'mobile\'}">\n        <hc-list-new class="list-style-display" model="list_model"></hc-list-new>\n    </div>\n</div>'},AGQQ:function(e,t){e.exports="<home-widget-emp-card-mobile></home-widget-emp-card-mobile>\n<home-widget-emp-card-pc></home-widget-emp-card-pc>\n"},Bwqw:function(e,t){e.exports='<div ng-if="$ctrl.searchKey && $ctrl.org_list.length">\n    <widget-header\n            name="组织"\n            result-count="$ctrl.count"\n            on-hide-search="$ctrl.onHideSearch()"\n            show-all-model="{state:\'org_list\', params: {filter_str: $ctrl.searchKey}}"\n    ></widget-header>\n    <widget-item\n            ng-repeat="org in $ctrl.org_list"\n            search-data="org"\n            search-key="$ctrl.searchKey"\n            icon\n            on-hide-search="$ctrl.onHideSearch()"\n            forward-model="{state: \'org_details_base\',\n            params: {id: org.id, effdt: current_date, model: org.org_type===10?\'OrgUnit\':\'OrgDepartment\'}}"\n    ></widget-item>\n</div>\n'},CCvc:function(e,t){e.exports='<div class="depart-list-item tg" ng-click="go_org(object.id)">\n    <div>\n        <div class="name">{{object.name}}</div>\n        <div class="number">{{object.number}}</div>\n    </div>\n    <div class="emp-count" ng-show="object.emp_count">{{object.emp_count}}</div>\n    <div class="go">\n        <div class="icon-hcm-arrow-right"></div>\n    </div>\n</div>'},CkDz:function(e,t,n){"use strict";n("sMBO");var i=n("eLKs"),a=n.n(i),o=n("FLGM"),s=n.n(o),l=n("OBge"),c=n.n(l),r=n("mrSG"),d=n("m5Re"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scheme_confirm=function(){t.form_model.data=t.scope.params,t.scope.$dialog.resolve_data(t.form_model.data),t.scope.$dialog.dialog_close()},t}return Object(r.d)(t,e),t.prototype.initFormBefore=function(){var e,t;return Object(r.c)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(n){return null===(t=null===(e=this.scope)||void 0===e?void 0:e.$dialog)||void 0===t||t.operates([{label:"取消",func:this.scope.$dialog.dialog_close},{label:"确定",func:this.scheme_confirm,default:!0}]),this.form_meta={fields:angular.copy(d.fields),groups:angular.copy(d.groups),tip:d.tip},[2]}))}))},t.prototype.getMeta=function(){var e,t;return Object(r.c)(this,void 0,c.a,(function(){var n,i;return Object(r.e)(this,(function(o){var l,c,r;return this,n=this.form_meta.fields,i=null===(t=null===(e=this.options)||void 0===e?void 0:e.context_meta)||void 0===t?void 0:s()(t).call(t,(function(e){return{label:e.label,category:"上下文参数",value:e.key,type:"var",key:e.key}})),n.getKey("data").options.mask=a()(l=this.dataBlockMask).call(l,this),n.getKey("data").options.onClick=a()(c=this.dataBlockSetting).call(c,this),n.getKey("drill").options.refer_data=[{label:"可选变量",items:i}],n.getKey("formula").options.computeService={getFieldList:a()(r=this.getDataRefer).call(r,this),domain:"base.report"},[2,n]}))}))},t.prototype.getDataRefer=function(){return Object(r.c)(this,void 0,void 0,(function(){var e,t,n,i,a,o,l,c,d,p;return Object(r.e)(this,(function(u){switch(u.label){case 0:var m;if(e=[],this.options.context_meta)e.push({key:"context_params",name:"上下文参数",list_fields:s()(m=this.options.context_meta).call(m,(function(e){return{name:e.label,category:"上下文参数",key:e.key,type:"var"}}))});if(!this.form_model.data.data)return[3,8];n=function(n){return Object(r.e)(this,(function(a){switch(a.label){case 0:return[4,i.dataBlockService.getAvailFields(n)];case 1:return t=a.sent(),e.push({key:n.key,name:n.name?n.name:n.key,list_fields:s()(t).call(t,(function(e){return{name:e.label,category:n.name?n.name:n.key,key:"main"===n.key?e.value:n.key+"."+e.value,type:"var"}}))}),[2]}}))},i=this,u.label=1;case 1:u.trys.push([1,6,7,8]),a=Object(r.i)(this.form_model.data.data),o=a.next(),u.label=2;case 2:return o.done?[3,5]:(l=o.value,[5,n(l)]);case 3:u.sent(),u.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return c=u.sent(),d={error:c},[3,8];case 7:try{o&&!o.done&&(p=a.return)&&p.call(a)}finally{if(d)throw d.error}return[7];case 8:return[2,e]}}))}))},t.prototype.getGroupMeta=function(){return Object(r.c)(this,void 0,c.a,(function(){return Object(r.e)(this,(function(e){return[2,this.form_meta.groups]}))}))},t.prototype.validateTemplateData=function(){var e;return Object(r.c)(this,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(n){return(t=null===(e=this.setting_panel_data.data)||void 0===e?void 0:e.getKey("main"))||this.rootScope.show_warning("可视化需要指定'main'数据块, 请前往数据定义进行指定"),[2,t]}))}))},t.prototype.refreshViewModel=function(e){return void 0===e&&(e=null),Object(r.c)(this,void 0,c.a,(function(){var t;return Object(r.e)(this,(function(n){switch(n.label){case 0:return e=e||this.setting_panel_data.chart,this.validateTemplateData(),e?(t=this.parent,[4,this.dataService.callHcmOpenApi("flex.template.calc",{template:e,block_info:this.setting_panel_data.data,params:this.options.context_data})]):[2];case 1:return t.preview_model=n.sent(),[2]}}))}))},t}(n("VxaH").a);t.a=p},DAXO:function(e,t){e.exports='<div class="home-widget-recruit" ng-init="init()">\n    <div class="home-widget-header">\n        <div class="menu">\n            <div class="icon-hcm-calendar"\n                 ng-class="{selected:true}">\n                {{"面试日历"}}\n            </div>\n            <div class="refresh icon-hcm-refresh" ng-click="$ctrl.refreshInterviewData()"></div>\n        </div>\n        <div class="calendar-header">\n            <div class="btn left icon-hcm-arrow-left-double" ng-click="$ctrl.calendarMinus(true, \'y\')"></div>\n            <div class="btn left icon-hcm-arrow-left" ng-click="$ctrl.calendarMinus(true, \'m\')"></div>\n            <div class="text">{{$ctrl.calendar_year}}年{{$ctrl.calendar_month}}月</div>\n            <div class="btn right icon-hcm-arrow-right" ng-click="$ctrl.calendarPlus(true, \'m\')"></div>\n            <div class="btn right icon-hcm-arrow-right-double" ng-click="$ctrl.calendarPlus(true, \'y\')"></div>\n        </div>\n    </div>\n    <div class="home-widget-content">\n        <table class="calendar-content">\n            <tr class="weekday">\n                <th ng-repeat="_w in $ctrl.weeks track by $index">\n                    <div class=\'week-item\'>\n                        {{_w}}\n                    </div>\n                </th>\n            </tr>\n            <tr ng-repeat="_c in $ctrl.calendar_data">\n                <td ng-repeat="_d in _c track by $index">\n                    <div ng-if="_d" class="calendar-item"\n                         ng-class="{current_date:_d.date==$ctrl.current_date,selected_date:_d.date==$ctrl.selected_date}">\n                        <div class="day">{{_d.date == $ctrl.current_date ? "今天" : _d.label}}</div>\n                        <div class="desc" ng-class="{\'is_important\':_d.high_light}">\n                            {{_d.lunar_date}}\n                        </div>\n                        <div class="interview-count-detail"\n                             ng-click="$ctrl.checkInterviewDetail(_d.date, $ctrl.month_calendar_data[_d.date])"\n                             hc-title="{{\'点击查看应聘者详情\'}}"\n                             options="{\'mode\': \'tip\',\'seconds\': 0, \'direction\': \'column\'}">{{$ctrl.month_calendar_data[_d.date].length}}</div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},E0Ah:function(e,t,n){"use strict";n("sMBO");var i=n("LYCE"),a=n.n(i),o=n("HnXd"),s=n.n(o),l=n("qjzJ"),c=n.n(l),r=n("RXMP"),d=n.n(r),p=n("fHi0"),u=n.n(p),m=n("5PDf"),_=n.n(m),g=n("OWCx"),h=n.n(g),v=n("+oHS"),f=n.n(v),y=n("04Ix"),w=n.n(y),b=n("ZbhI"),$=n.n(b),x=n("o+MX"),k=n.n(x),S=n("guyh"),A=n.n(S),C=n("UtpJ"),M=n.n(C),O=n("3xDC"),D=n.n(O),j=n("lHQ6"),P=n.n(j),E=n("a0dU"),I=n.n(E),T=(n("ls82"),n("SPx3")),H=n.n(T),R=(n("TpQQ"),n("F7HG"),n("v6AK"),n("mshF"));function B(e,t){var n=f()(e);if(h.a){var i=h()(e);t&&(i=_()(i).call(i,(function(t){return u()(e,t).enumerable}))),n.push.apply(n,i)}return n}window.app.component("homeWidgetMessage",{template:n("skWO"),bindings:{model:"=",options:"<"},require:{boardCtrl:"?^hcPortalBoard"},controller:["$scope","$filter","$rootScope","homeWidgetMessageService","messageService","contextService","$hcDialog",function(e,t,n,i,o,l,r){e.init=H()(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sizes=[10,20,50],void 0===e.model&&(e.model=e.$ctrl.options||e.$ctrl.model),e.message_show_control=e.model.params||{is_dynamic:!1,message_show_sort:"desc"},e.dynamic_controller=e.message_show_control.is_dynamic,e.currentkey=e.model.key,e.getBodyWidth(),e.initMenu(),e.refreshData();case 8:case"end":return t.stop()}}),t)}))),e.getBodyWidth=function(){var t=document.documentElement.clientWidth||740;e.elementwidth=(t-228-.024*t)/2},e.initMenu=function(){var n;if("message_todo"===e.model.key)null===(n=e.$ctrl.boardCtrl)||void 0===n||n.componentRegister("message_notify",e),e.menu=[{key:"task",label:t("translate")("common_home_widget_message_task_todo"),icon:"icon-list-pending",float:"left"},{key:"task_done",label:t("translate")("common_home_widget_message_task_done"),float:"left",icon:"icon-list-processed"}];else if("message_notify"===e.model.key){var i;null===(i=e.$ctrl.boardCtrl)||void 0===i||i.componentRegister("message_notify",e),e.menu=[{key:"work_warn",label:t("translate")("my_warning"),float:"left",icon:"icon-list-pending"},{key:"warn_done",label:t("translate")("resolved_alert"),float:"left",icon:"icon-list-processed"}]}else"message_normal"===e.model.key?e.menu=[{key:"message_normal",label:t("translate")("unread_messages"),float:"left",icon:"icon-list-pending"},{key:"message_normal_done",label:t("translate")("already_read_messages"),float:"left",icon:"icon-list-processed"}]:"message_process"===e.model.key&&(e.menu=[{key:"task_collect",label:t("translate")("pending_process"),float:"left",icon:"icon-list-pending"}]);(e.dynamic_controller||"message_process"===e.currentkey)&&(e.dynamic_controller=!0,e.menu.push({key:"see_more",label:"查看更多",icon:"icon-list-processed",float:"right"}))},e.pageText=t("translate")("/page"),e.refreshData=function(n){e.message_sort_oder=e.message_show_control.message_show_sort||"desc",e.page_index=1,e.page_size=e.page_size||"10".concat(t("translate")("/page")),e.message_show_control.is_dynamic&&(e.page_size="11".concat(t("translate")("/page"))),e.message_list=null,e.currentMenu=n||e.menu[0].key,e.getMessageList()},e.getMessageList=function(){("work_warn"===e.currentMenu||"warn_done"===e.currentMenu?i.getWarnList(e.currentMenu,e.page_index++,P()(e.page_size),{to:l.getContext("auth").employee.id},e.message_sort_oder):"message_normal"===e.currentMenu||"message_normal_done"===e.currentMenu?i.getMessageList(e.currentMenu,e.page_index++,P()(e.page_size),e.message_sort_oder):"task_collect"===e.currentMenu?i.getTaskCollect({}):i.getMessageList(e.currentMenu,e.page_index++,P()(e.page_size),e.message_sort_oder)).then((function(t){if("task_collect"===e.currentMenu){e.wf_count_list=t.count;var n=[];for(var i in e.wf_count_list)e.wf_count_list[i].count>0&&n.push({id:P()(i),name:e.wf_count_list[i].name,count:e.wf_count_list[i].count});var a,o,s=[];if(e.elementwidth<=800)s=D()(a=M()(o=A()(n).call(n,(function(e,t){return t.count-e.count}))).call(o,0,4)).call(a);else if(800<e.elementwidth<=980){var l,c;s=D()(l=M()(c=A()(n).call(n,(function(e,t){return t.count-e.count}))).call(c,0,5)).call(l)}else if(980<e.elementwidth<1180){var r,d;s=D()(r=M()(d=A()(n).call(n,(function(e,t){return t.count-e.count}))).call(d,0,6)).call(r)}else{var p,u;s=D()(p=M()(u=A()(n).call(n,(function(e,t){return t.count-e.count}))).call(u,0,7)).call(p)}e.message_list=s,e.haveMoreMessage=null}else{var m;e.message_list=k()(m=e.message_list||[]).call(m,t.list),e.message_show_control.is_dynamic||(e.haveMoreMessage=null!==t.next)}}))},e.jump=function(t,n){var i;n&&n.stopPropagation(),~$()(i=["message_todo","message_normal","message_process"]).call(i,e.model.key)?e.go_message(t):e.go_warn(t)},e.message_down=function(){var t=H()(I.a.mark((function t(n,a){var o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.stopPropagation(),o={id_:n.id,info:{status:2}},t.next=4,i.warnEdit(o).then((function(t){e.refreshData()}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.ge_message_list=function(t){switch(t){case"task":n.super_go("messages",{type:"task",message_display:"notify",message_sort_oder:e.message_sort_oder});break;case"task_done":n.super_go("messages",{type:"task_done",message_display:"notify",message_sort_oder:e.message_sort_oder});break;case"work_warn":n.super_go("messages",{type:"work_warn",message_display:"work_warn",message_sort_oder:e.message_sort_oder});break;case"warn_done":n.super_go("messages",{type:"warn_done",message_display:"work_warn",message_sort_oder:e.message_sort_oder});break;case"message_normal":n.super_go("messages",{type:"message_normal",message_display:"message_normal",message_sort_oder:e.message_sort_oder});break;case"message_normal_done":n.super_go("messages",{type:"message_normal_done",message_display:"message_normal",message_sort_oder:e.message_sort_oder});break;case"task_collect":n.super_go("workflow_online.pending",{current_biz:0});break;default:n.super_go("messages",{type:"notify",message_sort_oder:e.message_sort_oder})}},e.go_message=function(t){if("task_collect"!==e.currentMenu)if(t.unread=!1,t.go_state&&""!==t.go_state)if(o.getMessage(t.id),"messagerouter"===t.go_state)t.go_url?window.open(t.go_url):n.show_warning("消息类别错误,无法查看!");else if("show_robot"===t.go_state){var i=t.go_param;R.a.getCustomDialogCtrl("HCMChatDialog").then((function(e){r.getDialog(e).show(function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)d()(n=B(Object(i),!0)).call(n,(function(t){w()(e,t,i[t])}));else if(c.a)s()(e,c()(i));else{var o;d()(o=B(Object(i))).call(o,(function(t){a()(e,t,u()(i,t))}))}}return e}({target:"HCMRobot"},i))}))}else{if("show_comm_task_dialog"===t.go_state)return R.a.getCustomDialogCtrl("HCMChatTaskDialog").then((function(e){return r.getDialog(e).size("super-max").show({instance_id:t.go_param.instance_id,target:t.go_param.target,sender:t.go_param.sender,meta_state:t.go_param.meta_state,alter_data:t.go_param.alter_data})}));var l,p=(null===(l=t.go_param)||void 0===l?void 0:l.is_vue)||!1;n.super_go(t.go_state,t.go_param,{is_vue:p})}else n.super_go("message",{id:t.id});else n.super_go("workflow_online.pending",{current_biz:t.id})},e.go_warn=function(e){var t={id_:e.id,info:{status:2}};i.warnEdit(t).then((function(e){})),n.super_go(e.state.name,e.state.param)},e.$watch("model",(function(t,n){t!==n&&e.init()}))}]})},EC8D:function(e,t){e.exports='<home-widget-emp-card-new-mobile></home-widget-emp-card-new-mobile>\n<home-widget-emp-card-new-pc options="options" ></home-widget-emp-card-new-pc>\n'},EQB0:function(e,t){e.exports='<div class="selfservice_header_menu_box table">\n    <div class="title table_cell" ng-click="goToIndexPage()">员工自助</div>\n    <div class="button_box table_cell">\n        <div title="{{button.title}}" class="button {{button.icon}}"\n             ng-click="button.action()"\n             ng-repeat="button in headermenubuttons"></div>\n    </div>\n    <div class="user_box table_cell">\n        <div class="user_photo">\n            <img class="user_img" ng-src="{{user_img}}">\n        </div>\n        <div class="user_name">{{user_name}}</div>\n    </div>\n</div>'},EVMC:function(e,t){e.exports='<div class="home-widget" ng-init="init()">\n    <div class="home-widget-header">\n        <div class="icon icon-hcm-view-card"></div>\n        <div class="header-label">{{model.category.label||$ctrl.model.category.label}}</div>\n        <div class="icon right icon-hcm-set"\n             ng-click="adjust_most_used_app()"></div>\n    </div>\n    <div class="home-widget-body">\n        <div class="no-data" ng-if="app_list&&app_list.length<1">\n            <hc-svg options="{icon:\'hcm-no-content\'}"></hc-svg>\n            <div class="label">当前没有内容</div>\n        </div>\n        <div class="app-list" ng-show="app_list && app_list.length > 0">\n            <div class="item-container" ng-repeat="app_slice in app_slice_list track by $index">\n                <div class="app-item-wrapper"\n                     ng-repeat="_app in app_slice track by $index">\n                    <a class="app-item"\n                       ng-click="beforeJumpToApp(_app, $event)"\n                       ng-href="{{_app.href}}"\n                       ng-attr-target="{{(is_open_new_page || _app.open_new_page)?\'_blank\':\'\'}}"\n                       ng-class="{\'from-role\': _app.from_role}">\n                        <hc-icon app="_app" options="\'icon-top\'"></hc-icon>\n                        <div class="label">{{_app.name}}</div>\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class="page-index-bar"\n             ng-show="index_list.length > 1">\n            <div class="index-bar-item"\n                 ng-repeat="item in index_list track by $index"\n                 ng-class="{\'selected\': page_index === item}"\n                 ng-click="changePage(item)"\n            ></div>\n        </div>\n    </div>\n</div>\n'},F6Fg:function(e,t,n){"use strict";n("sMBO"),n("toAj");var i,a,o,s,l,c,r=n("5PDf"),d=n.n(r);n("d1Vp");d()(i=window.app).call(i,"timeAttendItem",(function(){return function(e,t){return e?e.result?"work_onjob"===e.result_item&&((null==e?void 0:e.status)&&-1===e.status||t)?e.shift.name:e.result.desc:e.shift?e.shift.name:"":""}})),d()(a=window.app).call(a,"timeAttendItemWithMode",(function(){return function(e,t){return e?e.result?"result"===t?e.result.desc:e.shift.name:e.shift?e.shift.name:"-":"-"}})),d()(o=window.app).call(o,"timeAttendData",(function(){return function(e){if(e){var t=0+e.work_onjob+e.overtime_normal+e.overtime_rest+e.overtime_holiday;return t>0?(t/60).toFixed(1):"-"}return"-"}})),d()(s=window.app).call(s,"timeAttendItemClass",(function(){return function(e,t){var n="";if(e){if(-1===e.shift_id&&e.result&&"work_rest"===e.result.name)return"rest";if(e.result){if(-1===e.status)return"forecast";t.length>0?n=(t=d()(t).call(t,(function(t){return e.result.priority>=t.min&&e.result.priority<t.max}))).length>0&&t[0].color||"invalid":(e.result&&e.result.priority>=60&&(n="abnormal"),e.result&&e.result.priority>=30&&e.result.priority<60&&(n="warning"))}else e.manual||(n="forecast")}else n="invalid";return n}})),d()(l=window.app).call(l,"timeAttendSchedule",(function(){return function(e){return e&&e.shift?e.shift.name:""}})),d()(c=window.app).call(c,"timeAttendResult",(function(){return function(e){return e&&e.result?e.status>=0?e.result.desc:"*"+e.result.desc:""}}))},F7HG:function(e,t,n){var i=n("LYCE"),a=n("HnXd"),o=n("qjzJ"),s=n("RXMP"),l=n("fHi0"),c=n("5PDf"),r=n("OWCx"),d=n("+oHS"),p=n("a0dU"),u=n("FLGM"),m=n("04Ix");n("ls82");var _=n("SPx3"),g=n("3xDC");function h(e,t){var n=d(e);if(r){var i=r(e);t&&(i=c(i).call(i,(function(t){return l(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n,c=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=h(Object(c),!0)).call(n,(function(t){m(e,t,c[t])}));else if(o)a(e,o(c));else{var r;s(r=h(Object(c))).call(r,(function(t){i(e,t,l(c,t))}))}}return e}window.app.factory("homeWidgetMessageService",["$rootScope","dataService","$q",function(e,t,n){return{getMessageList:function(e,i,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",s=n.defer();return t.callHcmOpenApi("message.list",{type:e,page_index:i,page_size:a,ch_read:!1}).then((function(e){var t;"asc"===o&&g(t=e.list).call(t);e.count>i*a?e.next=!0:e.next=null,s.resolve(e)})),s.promise},getWarnList:function(e,i,a,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"desc",l=n.defer(),c={sorts:[{type:"desc",key:"update_time"}]};return o.status="warn_done"===e?2:1,t.callHcmOpenApi("warn.message.list",{page_index:i,page_size:a,filter_dict:o,extra_property:c}).then((function(e){var t;"asc"===s&&g(t=e.list).call(t);e.count>(i+1)*a?e.next=!0:e.next=null,l.resolve(e)})),l.promise},warnEdit:function(e){return t.callHcmOpenApi("warn.message.edit",e)},getTaskCollect:function(e){return t.callHcmOpenApi("workflow.instance.detail.get.unprocess.list.count",e)},getMessageSetting:function(){return t.callHcmOpenApi("get.message.control.setting",{})},getModelList:(i=_(p.mark((function e(n){var i,a,o,s,l,c,r=arguments;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"desc",e.next=3,t.callHcmOpenApi("hcm.model.list",n);case 3:return o=e.sent.list,"asc"===a&&g(c).call(c),e.next=7,t.callHcmOpenApi("hcm.model.count",v(v({},n),{count_by:["id"],page_index:null}));case 7:if(e.t2=i=e.sent.list,e.t1=null===e.t2,e.t1){e.next=11;break}e.t1=void 0===i;case 11:if(!e.t1){e.next=15;break}e.t3=void 0,e.next=16;break;case 15:e.t3=i[0].id;case 16:if(e.t0=e.t3,e.t0){e.next=19;break}e.t0=0;case 19:return s=e.t0,l=s>(n.page_index+1)*n.page_size||null,c=u(o).call(o,(function(e){return{content:e.wf_inst.wf_inst_title,create_time:e.create_time}})),e.abrupt("return",{list:c,next:l});case 23:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})};var i}])},Fc5w:function(e,t,n){n("07d7"),n("JfAA");var i=n("M5Mt"),a=n("ZbhI");n("NcmB"),n("Wi0C"),n("Nnfo"),app.directive("employeeListItem",(function(){return{restrict:"E",scope:{object:"=",desc:"="},template:n("KBDq"),controller:["empHistoryService","$scope","$rootScope","contextService","$hcDialog",function(e,t,n,i,a){t.circle_close=i.getContext("auth").company_setting.IS_CIRCLE_PAUSE,t.unit_position_mode=i.getContext("auth").company_setting.EMP_CARD_UNIT_POSITION,t.dept_full_path=i.getContext("auth").company_setting.DEPT_FULL_PATH,t.go_emp=function(i){e().pushHistory(t.object),n.super_go("emp",{id:i}),a.closeAll()},t.message_to=function(e){t.$emit("article-new",{to_employee:e,callback:function(e){n.super_go("feed",{biz_id:e.feed.biz_id})}})}}]}})),app.directive("wfEmployeeListItem",(function(){return{restrict:"E",scope:{object:"=",options:"=",model:"=ngModel"},template:n("2bDp"),controller:["empHistoryService","$scope","$rootScope","contextService",function(e,t,n,o){t.circle_close=o.getContext("auth").company_setting.IS_CIRCLE_PAUSE,t.unit_position_mode=o.getContext("auth").company_setting.EMP_CARD_UNIT_POSITION,t.model=[],t.show_emp=[],t.choose=function(e){var n,o,s,l=a(n=t.model).call(n,e.id);~l?(i(o=t.model).call(o,l,1),i(s=t.show_emp).call(s,l,1)):(t.model.push(e.id),t.show_emp.push(e));t.options.onClick&&t.options.onClick(t,t.model,t.show_emp)},t.$on("delNode",(function(e,n){var a,o;i(a=t.model).call(a,n,1),i(o=t.show_emp).call(o,n,1)}))}]}})),app.directive("departListItem",(function(){return{restrict:"E",scope:{object:"="},template:n("CCvc"),controller:["$scope","$rootScope","$state",function(e,t,n){e.go_org=function(i){"org"===n.params.group&&"pc"===window.client?t.super_go("org_details_base",{id:i,model:"OrgUnit"}):"user"===e.object.user_type?t.super_go("org_emp",{id:i}):t.super_go("org",{id:i,part_time:e.object.part_time,on_loan:e.object.on_loan})}}]}})),app.directive("addressListItem",(function(){return{restrict:"E",scope:{object:"="},template:n("sNM4"),controller:["$scope","$rootScope",function(e,t){e.go_depart=function(n){"user"===e.object.user_type?t.super_go("org_emp",{id:n}):t.super_go("address_list",{id:n})}}]}})),app.directive("groupListItem",(function(){return{restrict:"E",scope:{object:"="},template:n("xCJu"),controller:["$scope","$rootScope",function(e,t){e.go_group=function(e){t.super_go("feed",{biz_id:"group:"+e.toString()})}}]}}))},H2rB:function(e,t,n){"use strict";n.r(t);n("sMBO"),n("srGB");var i=n("6hxS"),a=n("1hbj");window.app.controller("CommonModelNavController",["$scope","$rootScope","$state","BaseCRUDService","$controller",function(e,t,n,o,s){var l=o.getModelService(n.params.model,n.params.state);s(i.a,{$scope:e,CRUDService:l,InfoDialog:Object(a.a)(n.params.model)}),e.child_states={multi:"common_model_nav_multi",info:"common_model_nav_info",single:"common_model_nav_single"},"messages_multi"===n.current.name&&(e.child_states={multi:"messages_multi"}),e.getMetaState=function(){return n.params.nav_state||n.params.meta_state}}]),t.default="CommonModelNavController"},H3Dw:function(e,t,n){"use strict";n("rB9j"),n("EnZy");var i=n("lHQ6"),a=n.n(i),o=n("FLGM"),s=n.n(o),l=n("a0dU"),c=n.n(l),r=n("5PDf"),d=n.n(r),p=(n("ls82"),n("SPx3")),u=n.n(p),m=n("1hbj"),_=(n("srGB"),n("0Xdj")),g=(n("dOAv"),n("9DwR"));window.app.directive("homeWidgetEmpCard",[function(){return{restrict:"EA",template:n("AGQQ"),scope:{},controller:[function(){}]}}]),window.app.directive("homeWidgetEmpCardPc",[function(){return{restrict:"EA",template:n("crAE"),scope:{},controller:["$scope","$state","$rootScope","$hcDialog","$controller","contextService","BaseCRUDService","dataService","$filter",function(e,t,n,i,o,l,r,p,g){var h=r.getModelService("Employee");o(_.a,{$scope:e,CRUDService:h,InfoDialog:Object(m.a)("Employee")}),e.initBeforeAsync=u()(c.a.mark((function t(){var n,i,a,o,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.callHcmOpenApi("hcm.model.list",{model:"EmployeeSlogan",filter_dict:{employee_id:e.auth.employee.id}});case 2:if(n=t.sent,e.slogan_data=n.list,!e.slogan_data.length){t.next=8;break}e.emp_slogan=n.list[0].slogan,t.next=14;break;case 8:return t.next=10,p.callHcmOpenApi("hcm.model.meta",{model:"EmployeeSlogan",biz_type:"info",state:"home"});case 10:s=t.sent,l=d()(i=s.extend).call(i,(function(e){return"company_default"===e.key})),e.company_default=l.length>0?null===(a=l[0])||void 0===a||null===(o=a.value)||void 0===o?void 0:o.default:"",e.emp_slogan=e.company_default;case 14:case"end":return t.stop()}}),t)}))),e.setTitle=function(e){},e.getMetaState=function(){return"empCard"},e.getItemID=function(){return e.auth.employee.id},e.initAfter=function(){var n,i="mobile"===e.client?4:3;e.view_btn_model.$setShowMax(i),e.emp_id=t.params.id,e.extendModel={},s()(n=e.view_model.viewMeta.extend).call(n,(function(t){e.extendModel[t.key]=t.value}))},e.individualParse=function(e){var t;return s()(t=e.fields).call(t,(function(e){if("photo"===e.key){var t=e.options.photo_size.split(",");switch(window.screen.width){case 1680:t[0]=a()(1.25*t[0]),t[1]=a()(1.25*t[1]);break;case 1920:t[0]=a()(1.5*t[0]),t[1]=a()(1.5*t[1])}e.options.photo_size=t[0]+","+t[1]}})),e},e.empProfile=function(){n.super_go("emp")},e.editSlogan=u()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(m.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)})))}]}}]),window.app.directive("homeWidgetEmpCardMobile",[function(){return{restrict:"EA",template:n("ysBk"),scope:{},controller:["$scope","$state","$rootScope","$hcDialog","$controller","contextService","BaseCRUDService","dataService",function(e,t,n,i,a,o,s,l){var r=s.getModelService("Employee");a(g.a,{$scope:e,CRUDService:r,InfoDialog:Object(m.a)("Employee")}),e.initBeforeAsync=u()(c.a.mark((function t(){var n,i,a,o,s,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.callHcmOpenApi("hcm.model.list",{model:"EmployeeSlogan",filter_dict:{employee_id:e.auth.employee.id}});case 2:return n=t.sent,t.next=5,l.callHcmOpenApi("workflow.instance.detail.get.unprocess.list.count",{});case 5:if(e.process_count=t.sent,e.slogan_data=n.list,!e.slogan_data.length){t.next=11;break}e.emp_slogan=n.list[0].slogan,t.next=17;break;case 11:return t.next=13,l.callHcmOpenApi("hcm.model.meta",{model:"EmployeeSlogan",biz_type:"info",state:"home"});case 13:s=t.sent,r=d()(i=s.extend).call(i,(function(e){return"company_default"===e.key})),e.company_default=r.length>0?null===(a=r[0])||void 0===a||null===(o=a.value)||void 0===o?void 0:o.default:"",e.emp_slogan=e.company_default;case 17:case"end":return t.stop()}}),t)}))),e.setTitle=function(e){},e.getFilterDict=function(){return{id:e.auth.employee.id}},e.getMetaState=function(){return"empCard"},e.editSlogan=u()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(m.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)}))),e.showProcessTask=u()(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(m.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)})))}]}}])},HNFB:function(e,t,n){"use strict";n.r(t);n("oVuX");var i=n("8xC1"),a=(n("Utim"),n("JO1g")),o=n.n(a),s=(n("g6M4"),n("PTQ2"),n("7MTh"),n("a0dU")),l=n.n(s),c=(n("ls82"),n("SPx3")),r=n.n(c),d=n("UtpJ"),p=n.n(d),u=n("lIYI"),m=n.n(u),_=(n("pRBk"),n("h5m7"),n("o+MX")),g=n.n(_),h=n("ZnTZ"),v=n.n(h);n("bsgm"),n("NRto");i.a.component("widgetItem",{bindings:{searchData:"<",searchKey:"<",icon:"<",onHideSearch:"&",forwardModel:"<",forwardUrl:"<",onOperateDefault:"&?",hasOperateDefault:"<?"},template:v.a,controller:["$state",function(e){var t=this;this.$onInit=function(){},this.href=function(){var n,i,a;return g()(n="".concat(location.pathname)).call(n,e.href(null===(i=t.forwardModel)||void 0===i?void 0:i.state,null===(a=t.forwardModel)||void 0===a?void 0:a.params,{inherit:!1}))},this.url=function(){return t.forwardUrl},this.hideSearch=function(e){t.onHideSearch(),t.hasOperateDefault&&(null==e||e.preventDefault(),t.onOperateDefault())}}]});n("TWNs"),n("rB9j"),n("JfAA"),n("UxlC");var f=n("5PDf"),y=n.n(f);y()(i.a).call(i.a,"highLight",(function(){return function(e,t){if(!t)return e;var n=new RegExp(t,"g");return n.test(e)?e.replace(n,"<strong>".concat(t,"</strong>")):e}})),y()(i.a).call(i.a,"listToString",(function(){return function(e){return e&&e.join("/")}})),i.a.component("applicationWidget",{bindings:{searchKey:"<",resultState:"=",onHideSearch:"&"},template:m.a,controller:["SpecialistSearchService","$rootScope","$state","appHistoryService",function(e,t,n,i){var a=this;this.$onInit=function(){},this.$onChanges=function(t){for(var n in t)"searchKey"===n&&(a.resultState.is_searching++,e.searchApplication(a.searchKey).then((function(e){a.total=e.length,a.app_list="mobile"===window.client?e:p()(e).call(e,0,3),a.resultState.is_searching--,a.resultState.result_count+=a.app_list.length})))},this.click=function(){var e=r()(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"mobile"===window.client&&i().pushHistory(t),a.onHideSearch();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]});var w=n("Bwqw"),b=n.n(w);i.a.component("organizationWidget",{bindings:{searchKey:"<",resultState:"=",onHideSearch:"&"},template:b.a,controller:["SpecialistSearchService","$rootScope","$filter","$state","contextService","$scope",function(e,t,n,i,a,o){var s=this;this.$onInit=function(){o.current_date=n("dateFormat")(new Date,"yyyy-MM-dd")},this.$onChanges=function(t){for(var n in t)"searchKey"===n&&"cm-org-emp.org"in a.getContext("auth").roles&&function(){s.resultState.is_searching++;var t=(new Date).getTime();s.api_flag=t;var n=a.getContext("auth").roles["cm-org-emp.org"][0]&&a.getContext("auth").roles["cm-org-emp.org"][0].id;e.searchOrganization(s.searchKey,n).then((function(e){var n;s.api_flag===t?(s.org_list=p()(n=e.list).call(n,0,3),s.count=e.count,s.resultState.is_searching--,s.resultState.result_count+=s.org_list.length):s.resultState.is_searching--}))}()}}]}),i.a.component("specialistSearch",{bindings:{showSearch:"<",myRoles:"<roles",onClose:"&",searchReslute:"=",needNetconect:"="},template:o.a,controller:["SpecialistSearchService","$scope","appHistoryService",function(e,t,n){var i=this;this.$onInit=function(){i.has_permission=!1,i.search_key="",i.client=window.client,i.result_state={result_count:0,is_searching:0},t.$watch("$ctrl.search_key",(function(){i.result_state.result_count=0})),1===i.needNetconect?e.getPluginsConfig(i.myRoles).then((function(e){i.plugins=e.my_plugins,i.desc_list="pc"===i.client?e.desc_list:["应用"],i.placeholder="搜索 ".concat(i.desc_list.join("、"))})):t.$watch("$ctrl.searchReslute",(function(e,t){e&&(i.plugins=i.searchReslute.my_plugins,i.desc_list="pc"===i.client?i.searchReslute.desc_list:["应用"],i.placeholder="搜索 ".concat(i.desc_list.join("、")))}),!0),i.history=n().loadHistory()},this.$onChanges=function(e){for(var t in e)"showSearch"===t&&!0===i.showSearch&&document.querySelector("specialist-search input[autofocus]").focus()},this.inputClick=function(e){e.stopPropagation()},this.hide_search=function(){i.search_key="",i.onClose()},this.on_cross_click=function(){i.search_key?i.search_key="":i.hide_search()},this.clearHistory=function(){n().clearHistory(),i.history=n().loadHistory()}}]})},HTH0:function(e,t,n){e.exports='<div class="content flex" id="list_page">\n    <div class="model-list-style" ng-class="{\'view\':view}" ng-init="init()">\n        <div class="hcm-nav-content" ng-if="client===\'pc\'">\n            <div class="hcm-content flex">\n                '+n("Y23d")+"\n                "+n("jl73")+"\n                "+n("IGAs")+'\n                <div class="hcm-hc-list-container" data-ng-show="is_pdf_print" id="ModelPdfPrint">\n                </div>\n            </div>\n        </div>\n        \x3c!--        <div ng-if="client === \'mobile\'" class="model-mobile-container" ng-include="\'model_mobile.html\'"></div>--\x3e\n        \x3c!--        <ui-view ng-if="!$dialog"></ui-view>--\x3e\n    </div>\n</div>'},Im7n:function(e,t){e.exports='<div ng-init="init()" class="hcm-nav-content">\n    <div class="hcm-nav full-height">\n        <div class="hcm-nav-fixed">\n            <hc-dataset model="dataset_model"></hc-dataset>\n        </div>\n    </div>\n\n    <div class="hcm-content">\n        <div class="hcm-hc-list-container">\n            <hc-config-list model="config_model"></hc-config-list>\n        </div>\n    </div>\n</div>'},JO1g:function(e,t){e.exports='\x3c!--搜索界面--\x3e\n<div class="search-view" ng-if="$ctrl.myRoles">\n    \x3c!--搜索框--\x3e\n    <header ng-if="$ctrl.showSearch" ng-click="$ctrl.hide_search()">\n        <label ng-click="$ctrl.inputClick($event)">\n            <span class="icon-hcm-check icon"></span>\n            <input\n                autofocus\n                ng-model="$ctrl.search_key"\n                ng-model-options="{debounce:{default:800}}"\n                placeholder="{{$ctrl.placeholder}}"\n            >\n            <span class="waiting" ng-show="$ctrl.result_state.is_searching > 0"></span>\n            <span class="icon-hcm-delete icon" ng-click="$ctrl.on_cross_click()"></span>\n        </label>\n    </header>\n    \x3c!--下拉菜单--\x3e\n    <div class="drop-box" ng-if="$ctrl.showSearch" ng-show="$ctrl.showSearch">\n        <div class="none-input" ng-show="!$ctrl.search_key&&window.client===\'mobile\'">\n            <p id="slogan">{{\'search_the_entire_system\'|translate}}</p>\n            <p id="widgets-name"><span ng-repeat="name in $ctrl.desc_list">{{name}}</span></p>\n        </div>\n        <div class="none-result"\n             ng-show="$ctrl.search_key && $ctrl.result_state.result_count==0 && $ctrl.result_state.is_searching==0">\n            <hc-svg options="{icon:\'hcm-no-content\'}" class="no-data-svg"></hc-svg>\n            当前无结果\n        </div>\n        <div class="is-searching"\n             ng-show="$ctrl.search_key && $ctrl.result_state.result_count==0 && $ctrl.result_state.is_searching > 0">\n        </div>\n        <div class="plugin-box"\n             ng-if="$ctrl.search_key"\n             ng-repeat="plugin in $ctrl.plugins">\n            \x3c!-- 新的组件仿照一下格式，添加到这里 --\x3e\n            <employee-widget\n                ng-if="plugin.name===\'employee-widget\'&&$ctrl.client===\'pc\'"\n                search-key="$ctrl.search_key"\n                on-hide-search="$ctrl.hide_search()"\n                result-state="$ctrl.result_state"\n            ></employee-widget>\n            <organization-widget\n                ng-if="plugin.name===\'organization-widget\'&&$ctrl.client===\'pc\'"\n                search-key="$ctrl.search_key"\n                on-hide-search="$ctrl.hide_search()"\n                result-state="$ctrl.result_state"\n            ></organization-widget>\n            <application-widget\n                ng-if="plugin.name===\'application-widget\'"\n                search-key="$ctrl.search_key"\n                on-hide-search="$ctrl.hide_search()"\n                result-state="$ctrl.result_state"\n            ></application-widget>\n        </div>\n        <div class="search-history" ng-if="$ctrl.client===\'mobile\' && !$ctrl.search_key">\n            <div class="search-head">\n                <div class="title">>{{\'historical_searches\'|translate}}</div>\n                <div class="icon-hcm-trash icon" ng-click="$ctrl.clearHistory()"></div>\n            </div>\n            <div class="search-item" ng-repeat="_item in $ctrl.history track by $index">\n                <widget-item search-data="_item" icon="_item.icon" forward-url="_item.url"></search-result-item>\n            </div>\n        </div>\n    </div>\n    \x3c!--mask--\x3e\n    <div class=\'mask\' ng-show="$ctrl.showSearch && $ctrl.client===\'pc\'" ng-click="$ctrl.hide_search()"></div>\n</div>\n'},Jf2n:function(e,t){window.app.factory("HomeWidgetMostUsedAppService",["BaseCRUDService",function(e){return angular.extend(e.getModelService("HomeWidgetMostUsedApp"),{getMostUsedAppList:function(e,t){return this.getItemList(null,{company_id:e,employee_id:t},1,1e4,{sorts:[{key:"sequence",type:"asc"}]})},addMostUsedApp:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.createItem({company_id:e,employee_id:t,app_id:n,is_service:a,sequence:i})},delMostUsedApp:function(e){return this.removeItem(e)}})}])},Jvcg:function(e,t){e.exports='<div class="home-widget" ng-init="init()">\n    <div class="home-widget-header">企业通知</div>\n    <div class="hc-list-homepage swiper-container" name=\'{{ list_model.name }}\' ng-if="list_model.view===\'homepage\'">\n        <div class="list-content swiper-wrapper">\n            <div class="row-container swiper-slide" ng-repeat="_row in list_model.data track by $index">\n                <div class="row flexbox"\n                    ng-on-click="list_model.operate_default&&list_model.operate_default(_row,$event,list_model.name)"\n                    ng-class="{\n                     \'hide-row-padding-top-bottom\':list_model.homepage_meta.hide_row_padding_top_bottom===true,\n                     \'border-bottom-hide\':list_model.homepage_meta.border_bottom_hide===true\n                 }" ng-style="{\'min-height\':list_model.homepage_meta.row_min_height+\'px\'}">\n                    <div class="photo {{list_model.columns_metas[list_model.homepage_meta.content.img.key].class|| list_model.homepage_meta.content.img.class ||\'circle\'}}"\n                        ng-if="list_model.homepage_meta.content.img && list_model.homepage_meta.content.img.position === \'left\'"\n                        ng-include="\'home_widget_carousel_info_image.html\'">\n                    </div>\n                    <div class="row-content flex-1">\n                        <div ng-if="[undefined,false,null].includes(list_model.homepage_meta[\'dynamic_template\'])"\n                            ng-include="\'default_home_widget_carousel.html\'"></div>\n                        <div ng-if="list_model.homepage_meta[\'dynamic_template\']===true"\n                            ng-include="\'dynamic_home_widget_carousel.html\'"></div>\n                        <div ng-if="list_model.homepage_meta[\'dynamic_template\']&&list_model.homepage_meta[\'dynamic_template\']!==true"\n                            ng-include="list_model.homepage_meta[\'dynamic_template\']+\'_hc_list.html\'"></div>\n                    </div>\n                    <div class="photo {{list_model.columns_metas[list_model.homepage_meta.content.img.key].class|| list_model.homepage_meta.content.img.class ||\'circle\'}}"\n                        ng-if="list_model.homepage_meta.content.img && list_model.homepage_meta.content.img.position === \'right\'"\n                        ng-include="\'home_widget_carousel_info_image.html\'">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="carousel-pagination"></div>\n    <div class="swiper-button-next"></div>\n    <div class="swiper-button-prev"></div>\n</div>\n\x3c!--未设置，默认模板--\x3e\n<script id="default_home_widget_carousel.html" type="text/ng-template">\n    <div class="default-content {{ list_model.homepage_meta.defaultContentClass }}">\n        <div class="{{field.class}} {{getCellClass(_row, _col)}}"\n             ng-repeat="_col in list_model.columns track by $index"\n             ng-if="!_col.hide&&(_row|hcListCellData:_col||(!list_model.homepage_meta[\'hide_label\']&&_col.label))">\n            <span class="label"\n                  ng-if="_col.label&&!list_model.homepage_meta[\'hide_label\']">{{_col.label}}:</span>\n            <span class="value"\n                  ng-bind="_row|hcListCellData:_col|infoDefault"></span>\n        </div>\n    </div>\n<\/script>\n\x3c!--配置型模板--\x3e\n<script id="dynamic_home_widget_carousel.html" type="text/ng-template">\n    <div class="custom-content">\n        <div ng-repeat="_v in [\'top\',\'middle\',\'bottom\']"\n             class="flexbox {{_v+\'-area\'}} {{getCellClass(_row, _col)}}">\n            <div ng-repeat="_h in [\'left\',\'right\']"\n                 ng-if="list_model.homepage_meta.content[_v+\'_\'+_h+\'_area\']"\n                 class="area {{_v+\'-\'+_h+\'-area \'+list_model.homepage_meta.class[_v+\'_\'+_h+\'_area\']}}">\n                <div class="readPoint"\n                     ng-class="{read: !_row.is_read}"\n                     ng-if="list_model.homepage_meta.content.showPoint.includes(_v+\'_\'+_h+\'_area\')"></div>\n                <div\n                    ng-repeat="field in list_model.homepage_meta.content[_v+\'_\'+_h+\'_area\']"\n                    class="field {{(field.class|valueToFunc)(_row)}} {{(field[\'ng-class\']|valueToFunc)(_row,list_model.columns_metas[field.key])}}"\n                    ng-if="!(field.hide|valueToFunc)() && (\n                         ![undefined,null,\'\'].includes(_row|hcListCellData:list_model.columns_metas[field.key])\n                         ||(!list_model.homepage_meta[\'hide_label\']&&list_model.columns_metas[field.key].label)\n                     )"\n                    ng-click="onCellClick($event,_row,list_model.columns_metas[field.key])">\n                    <span class="label"\n                          ng-if="list_model.columns_metas[field.key].label&&!list_model.homepage_meta[\'hide_label\']">{{list_model.columns_metas[field.key].label}}:</span>\n                    <span class="value"\n                          ng-bind-html="chooseTimeTemplate(_row, list_model.columns_metas[field.key], field.type)"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n<\/script>\n<script id="home_widget_carousel_info_image.html" type="text/ng-template">\n    <img\n        ng-src="{{_row|hcListCellData:(list_model.columns_metas[list_model.homepage_meta.content.img.key])|commonImage:[list_model.homepage_meta.content.img[\'image_config\']||\'hcPhoto\',list_model.homepage_meta.content.img[\'photo_size\']]}}"\n        ng-style="{\n                            width:(list_model.columns_metas[list_model.homepage_meta.content.img.key][\'image_config\']||[])[1]||300,\n                            height:(list_model.columns_metas[list_model.homepage_meta.content.img.key].class||\'circle\')==\'circle\'\n                                ?(list_model.columns_metas[list_model.homepage_meta.content.img.key][\'image_config\']||[])[1]||160\n                                :((list_model.columns_metas[list_model.homepage_meta.content.img.key][\'image_config\']||[])[1]||90)*1.26\n                        }"\n    />\n<\/script>\n'},KBDq:function(e,t){e.exports='<div class="employee-list-item tg">\n    <div class="emp-photo" ng-click="go_emp(object.id)">\n        <img ng-src="{{object.photo|hcPhoto:46}}">\n    </div>\n    <div class="content" ng-click="go_emp(object.id)">\n        <div class="top-area">\n            <span class="name f16">{{object.name}}</span>\n            <span class="alter-desc">{{desc}}</span>\n        </div>\n        <div class="desc" ng-if="!unit_position_mode">\n            <span>{{object.department}}</span>\n            <span ng-if="!!object.department&&!!object.job_title">-</span>\n            <span>{{object.job_title}}</span>\n        </div>\n        <div class="desc" ng-if="unit_position_mode&&!dept_full_path">\n            <span>{{object.company_name}}</span>\n            <span ng-if="!!object.company_name&&!!object.department">-</span>\n            <span>{{object.department}}</span>\n            <span ng-if="!!object.department&&!!object.job_title">-</span>\n            <span>{{object.job_title}}</span>\n        </div>\n        <div class="desc" ng-if="unit_position_mode&&dept_full_path">\n            <span>{{object.full_path}}</span>\n            <span>-</span>\n            <span>{{object.job_title}}</span>\n        </div>\n    </div>\n    <div class="operate" ng-if="!circle_close">\n        <div class="tg icon-hcm-chat" ng-click="message_to(object.id)"></div>\n    </div>\n</div>\n'},MoVH:function(e,t){e.exports='<div class="swiper-container">\n    <div class="swiper-wrapper">\n        <div class="swiper-slide" ng-repeat="_src in $ctrl.model track by $index">\n            <img ng-src="{{_src.index}}" ng-click="imgClick(null, 0)">\n            <span class="description" ng-if="_src.description">{{_src.description}}</span>\n        </div>\n    </div>\n    <div class="swiper-pagination"></div>\n    <div class="swiper-button-next" ng-if="$ctrl.parsedOptions.use_navigation"></div>\n    <div class="swiper-button-prev" ng-if="$ctrl.parsedOptions.use_navigation"></div>\n</div>'},NR7K:function(e,t){e.exports='<div ng-init="init()" class="hcm-nav-content">\n    <div class="hcm-nav full-height">\n        <div class="hcm-nav-fixed">\n            <hc-dataset model="dataset_model"></hc-dataset>\n        </div>\n    </div>\n\n    <div class="hcm-content">\n        <div class="hcm-hc-list-container">\n            <hc-config-list model="config_model" ng-if="config_model"></hc-config-list>\n        </div>\n    </div>\n</div>'},OpN1:function(e,t){e.exports='<home-widget-common-container class="home-widget-time-calendar-assistant" tabs="$ctrl.tabs" operates="$ctrl.operates"\n                              current-tab="\'calendar_assistant\'">\n    <div class="week-calendar">\n        <div ng-repeat="_d in $ctrl.day_list track by $index">\n            <div class="calendar-head" ng-bind="[\'Sun\',\'Mon\',\'Tue\',\'Wed\',\'Thu\',\'Fri\',\'Sat\'][$index]|translate"></div>\n            <div class="calendar-item" ng-if="_d" ng-click="$ctrl.selectedDate(_d.date)"\n                 ng-class="_d.date === $ctrl.selected_date ? \'selected\': _d.date < $ctrl.current_date ? \'before\' : \'\'">\n                <div class="day"\n                     ng-bind="_d.date === $ctrl.current_date ? (\'time_today\'|translate) : _d.label"></div>\n                <div class="desc" ng-if="$ctrl.auth.language == \'zh_cn\'" ng-bind="_d.desc"></div>\n            </div>\n        </div>\n    </div>\n    <div class="punch-data">\n        <div class="punch-point">\n            <div class="notice-area">\n                <div class="notice-center"></div>\n            </div>\n            <div class="label" ng-bind="$ctrl.date_schedule.punch_begin_desc.label"></div>\n            <div class="punch-info" ng-class="$ctrl.date_schedule.punch_begin_desc.class"\n                 ng-bind="$ctrl.date_schedule.punch_begin_desc.content"></div>\n        </div>\n        <div class="transit-line"></div>\n        <div class="punch-point">\n            <div class="notice-area">\n                <div class="notice-center"></div>\n            </div>\n            <div class="label" ng-bind="$ctrl.date_schedule.punch_end_desc.label"></div>\n            <div class="punch-info" ng-class="$ctrl.date_schedule.punch_end_desc.class"\n                 ng-bind="$ctrl.date_schedule.punch_end_desc.content"></div>\n        </div>\n    </div>\n</home-widget-common-container>\n'},PCLm:function(e,t,n){"use strict";n("rB9j"),n("hByQ");var i=n("FLGM"),a=n.n(i),o=n("5PDf"),s=n.n(o),l=n("RXMP"),c=n.n(l),r=n("o+MX"),d=n.n(r);n("8xC1").a.factory("IndexService",["$rootScope","dataService","contextService","$q","templateService","$state",function(e,t,n,i,o,l){return self.last=null,self.stack=[],self.fetching=!1,{getMyApplication:function(e,o){var r,p,u=null===(r=n.getContext("auth"))||void 0===r||null===(p=r.company_setting)||void 0===p?void 0:p.enable_breadcrumb,m=function(e){if(e.url)e.href=e.url;else{var t,n,i,a;if(e.is_service)e.state="my_service_summary",e.param={id:e.id};else try{e.param="string"==typeof e.param?JSON.parse(e.param):e.param}catch(t){e.param={}}u&&e.id&&(e.param?e.param._menu_id=d()(t=d()(n="".concat(e.category_id,"!")).call(n,e.classify_id,"!")).call(t,e.id):e.param={_menu_id:d()(i=d()(a="".concat(e.category_id,"!")).call(a,e.classify_id,"!")).call(i,e.id)}),e.href=location.pathname+location.search+l.href(e.state,e.param,{inherit:!1})}},_=function(e,t){var n=[];return"list"===t?(c()(e).call(e,(function(e){m(e)})),n=e):t?c()(e).call(e,(function(e){var t;if(e.category){var i=s()(n).call(n,(function(t){return t.id===e.category.id}));i.length>0?i=i[0]:(i=angular.extend({},e.category),n.push(i)),i.classify_list=i.classify_list||[];var a=s()(t=i.classify_list).call(t,(function(t){return t.id===(e.classify||{id:"default"}).id}));a.length>0?a=a[0]:(a=angular.extend({},e.classify||{id:"default",name:"其他",number:"9999"}),i.classify_list.push(a)),m(e),a.applications=a.applications||[],a.applications.push(e)}})):c()(e).call(e,(function(e){if(e.category){var t=s()(n).call(n,(function(t){return t.id===e.category.id}));t.length>0?t=t[0]:(t=angular.extend({},e.category),n.push(t)),t.applications=t.applications||[],t.applications.push(e)}})),n},g=i.defer();if("pc"===e){if(self.stack.push(g),self._apps){for(var h=_(self._apps,o);self.stack.length;)self.stack.shift().resolve(h);return g.promise}self.fetching||(self.fetching=!0,t.callHcmOpenApi("hcm.application.my.all",{target:e},"application",!1).then((function(e){var t,n;self._apps=d()(t=e.app.list).call(t,a()(n=e.service.list).call(n,(function(e){return e.target=[],1===e.is_mobile&&e.target.push("mobile"),1===e.is_pc&&e.target.push("pc"),e.is_service=!0,e})));for(var i=_(self._apps,o);self.stack.length;)self.stack.shift().resolve(i)})))}else t.callHcmOpenApi("hcm.application.my.all",{target:e},"application",!1).then((function(e){var t,n,i=d()(t=e.app.list).call(t,a()(n=e.service.list).call(n,(function(e){return e.target=[],1===e.is_mobile&&e.target.push("mobile"),1===e.is_pc&&e.target.push("pc"),e.is_service=!0,e}))),s=_(i,o);g.resolve(s)}));return g.promise},searchEmp:function(e){var n=i.defer();return t.callHcmOpenApi("emp_search_service",{key:e},null,!0).then((function(t){self.lastEmpSearchKey=e,self.lastEmpSearchList=t.list,n.resolve(t)})),n.promise},searchDept:function(e){var n=i.defer();return t.callHcmOpenApi("dept_search_service",{key:e},null,!0).then((function(t){self.lastDeptSearchKey=e,self.lastDeptSearchList=t.list,n.resolve(t)})),n.promise},getSearchModel:function(e){return"emp"===e?{type:"emp",title:"员工搜索",place_holder:"员工：拼音、首字母、关键字...",search_func:"searchEmp",cache_key:"emp_search_cache",go_state:"emp"}:{type:"dept",title:"部门搜索",place_holder:"部门：拼音、首字母、关键字...",search_func:"searchDept",cache_key:"dept_search_cache",go_state:"org"}},getBarMeta:function(){return o.loadTemplate("index_bar_mobile.json")},scrollTop:this.scrollTop||0,setScrollTop:function(e){this.scrollTop=e},setAnchorClassify:function(e){this.anchor_classify_id=e},getAnchorClassify:function(){var e=this.anchor_classify_id;return this.anchor_classify_id=null,e}}}])},PH9r:function(e,t){e.exports='<div class="home-widget">\n    <div class="home-widget-body">\n        <hc-carousel model="$ctrl.carousel_model" options="$ctrl.options"></hc-carousel>\n    </div>\n</div>'},PTQ2:function(e,t,n){n("sMBO");var i=n("UtpJ"),a=n("M5Mt"),o=n("5PDf"),s=n("WxoT");window.app.factory("appHistoryService",["contextService","$http","$q",function(e,t,n){return function(){return self.getKey=function(){if(!self.hash_key_app){var t=null;e.getContext("auth").employee&&(t=e.getContext("auth").employee.id),self.hash_key_app=window.md5(s({user:t,state:"application-selector"}))}return self.hash_key_app},{loadHistory:function(){var e=window.storage.getItem("local",self.getKey());return null==e?[]:e},pushHistory:function(e){var t=window.storage.getItem("local",self.getKey()),n=null==t?[]:t;n=o(n).call(n,(function(t){return t.name!==e.name})),a(n).call(n,0,0,e),window.storage.setItem("local",self.getKey(),i(n).call(n,0,10))},clearHistory:function(){window.storage.setItem("local",self.getKey(),[])}}}}])},Pfe1:function(e,t){e.exports='<div class="home-widget" ng-init="init()">\n    <div class="home-widget-header flexbox">\n        <div class="menu">\n            <div class="icon-hcm-calendar"\n                 ng-class="{selected:true}">\n                {{"考勤日历"}}\n            </div>\n            <div class="refresh icon-hcm-refresh" ng-click="refreshData()"></div>\n        </div>\n        <div class="calendar-header">\n            <div class="btn left icon-hcm-arrow-left-double" ng-click="calendarMinus(true, \'y\')"></div>\n            <div class="btn left icon-hcm-arrow-left" ng-click="calendarMinus(true, \'m\')"></div>\n            <div class="text">{{calendar_year}}年{{calendar_month}}月</div>\n            <div class="btn right icon-hcm-arrow-right" ng-click="calendarPlus(true, \'m\')"></div>\n            <div class="btn right icon-hcm-arrow-right-double" ng-click="calendarPlus(true, \'y\')"></div>\n        </div>\n    </div>\n    <div class="home-widget-content">\n        <table class="calendar-content">\n            <tr class="weekday">\n                <th ng-repeat="_w in weeks track by $index">\n                    <div class=\'week-item\'>\n                        {{_w}}\n                    </div>\n                </th>\n            </tr>\n\x3c!--            <tr class=\'bu-la-bu-la\'></tr>--\x3e\n            <tr ng-repeat="_c in calendar_data">\n                <td ng-repeat="_d in _c track by $index">\n                    <div ng-if="_d" ng-click="dateView(_d.date)" class="calendar-item"\n                         ng-class="{selected:_d.date==selected_date}">\n                        <div class="day"\n                             ng-class="_d.date == current_date">{{_d.date == current_date ? "今天" : _d.label}}</div>\n                        <div class="sche {{month_calendar_data[_d.date]|timeAttendItemClass:[]}}">\n                            {{month_calendar_data[_d.date]|timeAttendItem}}\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n        <div class="calendar-statistic">\n            <div class="statistic-header">\n                {{"统计数据"}}\n            </div>\n            <div class="statistic-content">\n                <div class="content-item">\n                    <td>\n                        您本月应出勤<span class="input-number">{{schedule_month}}</span>天，共<span\n                        class="input-number">{{shift_month}}</span>小时，截止当前实出勤<span\n                        class="input-number">{{work_onjob_count}}</span>天，共<span\n                        class="input-number">{{work_onjob}}</span>小时。\n                    </td>\n                </div>\n                <table class="content-item">\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"请假:"}}</td>\n                        <td>\n                            <span class="input-number">{{detail.leave.count}}</span> 次，<span\n                            class="input-number">{{detail.leave.sum}}</span> 小时\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"出差:"}}</td>\n                        <td>\n                            <span class="input-number">{{detail.trip.count}}</span> 次，<span\n                            class="input-number">{{detail.trip.sum}}</span> 小时\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"加班:"}}</td>\n                        <td>\n                            <span class="input-number">{{detail.overtime.count}}</span> 次，<span\n                            class="input-number">{{detail.overtime.sum}}</span> 小时\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"补签:"}}</td>\n                        <td>\n                            <span class="input-number">{{detail.fillcard.count}}</span> 次\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"迟到:"}}</td>\n                        <td>\n                            <span class="input-number">{{work_unusual[\'work_late\']}}</span> 次\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"早退:"}}</td>\n                        <td>\n                            <span class="input-number">{{work_unusual[\'work_early\']}}</span> 次\n                        </td>\n                    </tr>\n                    <tr class="content-table">\n                        <td class="content-table-td">{{"旷工:"}}</td>\n                        <td>\n                            <span class="input-number">{{work_unusual[\'work_absence\']}}</span> 次\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n'},QQ65:function(e,t){e.exports='<div ng-init="init()" ng-style="{\'height\':\'100%\'}">\n    <home-widget-common-container current-tab="$ctrl.currentTab"\n                                  operates="$ctrl.operates" tabs="$ctrl.tabs">\n        <home-widget-body-list-container model-name="$ctrl.model">\n        </home-widget-body-list-container>\n    </home-widget-common-container>\n</div>\n'},QXFb:function(e,t){e.exports='<div class="content flex" ng-init="init()" id="list_page">\n    <div class="model-list-style" ng-class="{\'view\':view}" ng-init="init()">\n        <div class="hcm-nav-content" ng-if="client===\'pc\'" style="height: auto;">\n            <div class="hcm-content flex" style="overflow-y: auto;">\n                <hc-article ng-model="model"></hc-article>\n            </div>\n        </div>\n    </div>\n</div>'},RpSA:function(e,t,n){"use strict";n.r(t);n("rB9j"),n("EnZy");var i=n("FLGM"),a=n.n(i),o=n("mrSG");window.app.controller("portalArticleCtrl",["$scope","BaseCRUDService","$state","attachService",function(e,t,n,i){var s=this;e.init=function(){return Object(o.c)(s,void 0,void 0,(function(){var s,l;return Object(o.e)(this,(function(o){var c;switch(o.label){case 0:return[4,t.getModelService(n.params.model).getItemInfo(n.params.id)];case 1:return(s=o.sent()).attachment?(l=s,[4,i.annexInfoMore(s.attachment.split("#"))]):[3,3];case 2:return l.attachments=a()(c=o.sent()).call(c,(function(e){return{name:e.source_name,index:e.index,type:e.file_type,id:e.id}})),[3,4];case 3:s.attachments=null,o.label=4;case 4:return e.model=s,[2]}}))}))}}])},Seck:function(e,t,n){var i=n("UtpJ"),a=n("M5Mt"),o=n("5PDf"),s=n("WxoT");window.app.factory("empHistoryService",["contextService","$http","$q",function(e,t,n){return function(){return self.getKey=function(){return self.hash_key||(self.hash_key=window.md5(s({user:e.getContext("auth").employee.id,state:"employee-selector"}))),self.hash_key},{loadHistory:function(){var e=window.storage.getItem("local",self.getKey());return null==e?[]:e},pushHistory:function(e){var t=window.storage.getItem("local",self.getKey()),n=null==t?[]:t;n=o(n).call(n,(function(t){return t.id!==e.id})),a(n).call(n,0,0,e),window.storage.setItem("local",self.getKey(),i(n).call(n,0,20))},clearHistory:function(){window.storage.setItem("local",self.getKey(),[])}}}}])},T7v6:function(e,t){e.exports='<div class="home-widget-my-app">\n    <home-widget-common-container tabs="$ctrl.tabs" operates="$ctrl.operates" current-tab="$ctrl.currentTab"\n        hide-header="$ctrl.hideMobile">\n        <div class="no-data" ng-if="$ctrl.app_list&&$ctrl.app_list.length<1&&$ctrl.client===\'pc\'">\n            <hc-svg options="{icon:\'hcm-no-content\'}"></hc-svg>\n            <div class="label">{{\'common_home_widget_my_app_no_content\'|translate}}</div>  \x3c!--当前没有内容--\x3e\n        </div>\n        <div class="app-list" ng-show="$ctrl.app_list && $ctrl.app_list.length > 0">\n            <div class="item-container" ng-repeat="app_slice in $ctrl.app_slice_list track by $index">\n                <div class="app-item-wrapper" ng-repeat="_app in app_slice track by $index">\n                    <a class="app-item" ng-href="{{_app.href}}" ng-if="$ctrl.client===\'pc\'"\n                        ng-click="$ctrl.go_app(_app, $event)"\n                        ng-class="{\'from-role\': _app.from_role}"\n                        ng-attr-target="{{($ctrl.is_open_new_page || _app.open_new_page)?\'_blank\':\'_self\'}}">\n                        <hc-icon app="_app" options="\'icon-top\'"></hc-icon>\n                        <div class="label" hc-title="{{$ctrl.app_title_description ? _app.description : _app.name}}"\n                            options="{mode: \'tip\', showOnOverflow: !$ctrl.app_title_description}">\n                            {{_app.name}}\n                        </div>\n                    </a>\n                    <div class="app-item" ng-if="$ctrl.client===\'mobile\'"\n                        ng-class="{\'from-role\': _app.from_role}"\n                        ng-click="$ctrl.go_app(_app,$event)">\n                        <hc-icon app="_app" options="\'icon-top\'"></hc-icon>\n                        <div class="label" hc-title="{{$ctrl.app_title_description ? _app.description : _app.name}}"\n                            options="{mode: \'tip\', showOnOverflow: !$ctrl.app_title_description}">\n                            {{_app.name}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="page-index-bar" ng-show="$ctrl.index_list.length > 1">\n            <div class="index-bar-item" ng-repeat="item in $ctrl.index_list track by $index"\n                ng-class="{\'selected\': $ctrl.page_index === item}" ng-click="$ctrl.changePage(item)"></div>\n        </div>\n    </home-widget-common-container>\n</div>\n'},TT7f:function(e,t){e.exports='<div ng-if="$ctrl.searchKey && $ctrl.emp_list.length">\n    <widget-header\n            name="人员"\n            result-count="$ctrl.count"\n            on-hide-search="$ctrl.onHideSearch()"\n            show-all-model="empResult"\n    ></widget-header>\n    <widget-item\n            ng-repeat="emp in $ctrl.emp_list"\n            search-data="emp"\n            search-key="$ctrl.searchKey"\n            icon\n            on-hide-search="$ctrl.onHideSearch()"\n            on-operate-default="$ctrl.operateDefault(emp)"\n            has-operate-default="$ctrl.hasOperateDefault"\n            forward-model="{state: empState, params: {id: emp.id}}"\n    ></widget-item>\n</div>\n'},U5sc:function(e,t){e.exports='<div class="mainBox message_title" ng-init="init()">\n    <div class="top"\n         ng-show="!(message_type ==\'img_message\' || message_type ==\'pdf_message\' || message_type ==\'system_img\'||message_type ==\'high_level_message\')">\n        <div class="title">{{title}}</div>\n        <div class="time">{{time}}</div>\n    </div>\n    \x3c!--    判断类型--\x3e\n    <div class=\'message\' ng-show="message_type==\'pdf_message\'">\n        <div id="printAppointDismissal"></div>\n    </div>\n    <div class=\'message\' ng-show="message_type==\'high_level_message\'">\n        <hc-mark-down class="markdown"\n                      ng-if="message"\n                      ng-model="message"\n                      options="{mode:\'view\'}"\n        ></hc-mark-down>\n\n        <div  ng-repeat="att in go_param.photo_file_index track by $index">\n            <img ng-src="/img?type=image&index={{att}}">\n        </div>\n        <div>\n            <div style="float: left" ng-show="show_file_preview">\n                <hc-input-upload-multiple class="multi-image"\n                                          options="multi_image_data_preview.options"\n                                          ng-model="file_list_str_preview"\n                ></hc-input-upload-multiple>\n            </div>\n            <div style="float: left" ng-show="show_file">\n                <hc-input-upload-multiple class="multi-image"\n                                          options="multi_image_data.options"\n                                          ng-model="file_list_str"\n                ></hc-input-upload-multiple>\n            </div>\n        </div>\n    </div>\n    <div class=\'message\' ng-show="message_type==\'system_img\'">\n        <img src="/document/loadsourceimage?index={{go_param.file_index}}">\n    </div>\n    <div class="message"\n         ng-show="!(message_type ==\'img_message\' || message_type ==\'pdf_message\' || message_type ==\'system_img\'||message_type ==\'high_level_message\')">{{message}}</div>\n</div>\n'},UAhV:function(e,t,n){"use strict";var i=n("l6uO"),a=n.n(i);n("wrxE");window.app.controller("portalMessageSetCtrl",["$scope","$hcForm","portalService",function(e,t,n){e.initScheme=function(){e.plugin=e.params,e.item_list=e.params.children,e.init_scheme_step(),e.set_scheme_form_and_operate(),e.scheme_form&&e.$watch("scheme_form.data",(function(t,n){e.scheme_form.data.message_show_sort&&(e.add_plugin_config.message_show_sort=e.scheme_form.data.message_show_sort,e.add_plugin_config.is_dynamic=e.scheme_form.data.is_dynamic)}),!0)},e.init_scheme_step=function(){e.current_scheme_step=1,e.scheme_step=[{key:"second_step",label:"卡片详情设置"},{key:"third_step",label:"卡片预览"}],e.previous_scheme_step=function(){e.current_scheme_step=e.current_scheme_step-1,e.set_scheme_form_and_operate()},e.next_scheme_step=function(){e.current_scheme_step=e.current_scheme_step+1,e.set_scheme_form_and_operate()}},e.set_scheme_form_and_operate=function(){var n=[{component:"hc-input-radio",label:"展示:",key:"is_dynamic",options:{singleLine:!0,width:"col-6",default:!1,list:[{value:!0,name:"轮播"},{value:!1,name:"静态"}],items_inline:!0}},{component:"hc-input-radio",label:"排序:",key:"message_show_sort",options:{width:"col-6",default:"desc",singleLine:!0,list:[{value:"desc",name:"升序"},{value:"asc",name:"降序"}],items_inline:!0}}];e.plugin_key&&"message_process"===e.plugin_key&&(n=[]),e.scheme_form=t.createForm("portalMessageSet").$setData(e.data||{}).$setMeta(n),e.$dialog.operates([{label:"取消",func:e.$dialog.dialog_close},{label:"上一步",func:e.previous_scheme_step,hide:1===e.current_scheme_step},{label:"确定",func:e.scheme_confirm,default:!0,hide:1===e.current_scheme_step}])},e.choose_plugin=function(t){e.add_plugin_config=t,e.plugin_key=t.key,e.next_scheme_step()},e.scheme_confirm=function(){e.$dialog.resolve_data(e.add_plugin_config),e.$dialog.dialog_close()}}]),t.a={controller:"portalMessageSetCtrl",template:a.a,title:"新增插件"}},UnGC:function(e,t,n){"use strict";window.app.factory("TimeDataService",["$q","dataService","BaseCRUDService",function(e,t,n){return angular.extend(angular.copy(n.getModelService)("AttendData"),{getDataCountTemp:function(e,n,i,a,o,s,l,c){return t.callHcmOpenApi("time.data.count.by.dept",{filter_dict:e,filter_str:n,query_str:i,dimension:a,status:o,page_index:s,page_size:l,extra_property:c})},getDataCount:function(e,n,i,a,o,s,l,c,r){return t.callHcmOpenApi("time.data.count",{begin_date:e,end_date:n,depart_id:i,is_child_include:a,shift_id:o,dimension:s,status:l,page_index:c,page_size:r})},getDataList:function(e,n,i,a,o,s,l,c,r,d){return t.callHcmOpenApi("time.data.list",{begin_date:e,end_date:n,depart_id:i,result_items:s,shift_ids:l,is_child_include:a,employee_ids:o,search_key:c,page_index:r,page_size:d})},getExtendDataList:function(e,n,i,a,o){return t.callHcmOpenApi("hcm.model.list",{model:"AttendData",filter_str:e,filter_dict:n,page_index:i,page_size:a,extra_property:o})},getDataListByDate:function(e,n,i,a,o,s,l){return t.callHcmOpenApi("time.data.list.by.date",{depart_id:e,is_child_include:i,date_:n,result_items:a,shift_id:o,page_size:l,page_index:s})},getResultDetail:function(e,n,i,a,o){return t.callHcmOpenApi("time.data.result.detail",{begin_date:e,end_date:n,depart_id:i,is_child_include:a,employee_ids:o})},attendCalc:function(e,n,i,a){return t.callHcmOpenWebSocket("time.data.result.calc",{begin_date:e,end_date:n,employee_ids:i,depart_id:a})},attendCalcByDateList:function(e,n){return t.callHcmOpenWebSocket("time.attend.calc.by.date.list",{date_list:e,employee_ids:n})},exportResult:function(e,n,i,a,o,s){return t.callHcmOpenWebSocket("time.data.month.export",{begin_date:e,end_date:n,depart_id:i,employee_ids:a,model:o,mode:s})},exportResultWithTime:function(e,n,i,a,o){return t.callHcmOpenApi("time.data.month.export_api",{begin_date:e,end_date:n,depart_id:i,employee_ids:a,model:o})},exportDayResult:function(e,n,i,a){return t.callHcmOpenWebSocket("time.data.day.export",{begin_date:e,end_date:n,depart_id:i,employee_ids:a})},sealedDateResult:function(e){return t.callHcmOpenApi("time.bill.month.sealed",e)},sealDateResult:function(e){return t.callHcmOpenApi("time.parameters.setting.get.data.by.key",{key:"seal_date",depart_id:e})},submitMonthSummary:function(e){return t.callHcmOpenApi("time.data.month.submit",e)},attendCalcService:function(e,n,i,a){return t.callHcmOpenApi("time.data.result.calc",{begin_date:e,end_date:n,depart_id:i,employee_ids:a})},getMonthListDefine:function(){return t.callHcmCloudApi("/template/load_template?key=time_month_list_define.json",{},"GET")},getMonthResultListDefine:function(){return t.callHcmCloudApi("/template/load_template?key=time_month_result_list_define.json",{},"GET")},getMenuDefine:function(){return n.getModelService("AttendData").getBizMeta("list","time")},getShiftMenuDefine:function(){return n.getModelService("AttendData").getBizMeta("info","shift")},getProfileMatrixNew:function(e,n,i,a,o){return t.callHcmOpenApi("time.profile.matrix.new",{filter_str:e,filter_dict:n,query_str:i,page_index:a,page_size:o})},saveMonthSubmit:function(e){return t.callHcmOpenApi("time.month.submit.save",e)},getAttendItems:function(){return t.callHcmOpenApi("hcm.model.list",{model:"AttendVirtualMeta"})},getWfBusiness:function(e,n){return t.callHcmOpenApi("business.mode.and.version.get",{business_id:e,business_number:n})},getWfBizVersion:function(e){return t.callHcmOpenApi("wf.inst.get.business.mode.and.version",{inst_id:e})}})}]),t.a="TimeDataService"},UoIc:function(e,t){e.exports='<home-widget-common-container class="home-widget-time-my-unusual" tabs="$ctrl.tabs" operates="$ctrl.operates"\n                              current-tab="\'my_unusual\'">\n    <div class="unusual-counts">\n        <div class="unusual-count-content" ng-repeat="_c in $ctrl.count_list track by $index"\n             ng-class="_c.class">\n            <div class="unusual-count" title={{_c.count}}>\n                {{_c.count}}\n            </div>\n            <div class="unusual-type" title={{_c.name}}>{{_c.name}}</div>\n        </div>\n    </div>\n    <button class="btn-pc primary" ng-click="$ctrl.goToMyUnusual()"\n            ng-if="$ctrl.client===\'pc\'">\n        <span class="label">{{\'to_handle\'|translate}}</span>\n    </button>\n    <span class="unusual-tip" ng-bind-html="$ctrl.tip" ng-if="$ctrl.client===\'pc\'"></span>\n</home-widget-common-container>\n'},Utim:function(e,t,n){"use strict";n("sMBO"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA");var i=n("iYz8"),a=n.n(i),o=n("6UaR"),s=n.n(o),l=n("Dcj1"),c=n.n(l),r=n("O0yt"),d=n.n(r),p=n("0lTi"),u=n.n(p),m=n("UtpJ"),_=n.n(m),g=n("o+MX"),h=n.n(g),v=n("RXMP"),f=n.n(v),y=n("FLGM"),w=n.n(y),b=n("+oHS"),$=n.n(b),x=n("mnMc"),k=n.n(x),S=n("5PDf"),A=n.n(S),C=n("8xC1");n("PCLm");function M(e){if(void 0===d.a||null==c()(e)){if(s()(e)||(e=function(e,t){var n;if(!e)return;if("string"==typeof e)return O(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return u()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,l=!0,r=!1;return{s:function(){i=a()(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){r=!0,o=e},f:function(){try{l||null==i.return||i.return()}finally{if(r)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}C.a.factory("SpecialistSearchService",["dataService","IndexService","$q","$state","$filter",function(e,t,n,i,a){var o=[];return{getPluginsConfig:function(t){return e.callHcmCloudApi("/template/load_template?key=specialist_search.json&v=1",{},"GET").then((function(e){var n,i=A()(n=e.plugins||[]).call(n,(function(e){var n;return A()(n=e.roles).call(n,(function(e){var n;return k()(n=$()(t)).call(n,e)})).length>0}));return{plugins_config:e,my_plugins:i,desc_list:w()(i).call(i,(function(e){return e.search_description}))}}))},isPermitted:function(e){return this.getPluginsConfig(e).then((function(e){return e.my_plugins.length>0}))},_applicationFilter:function(e,t){var n,i=new RegExp(t,"g"),a=[],o=M(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;i.test(s.name)&&a.push(s)}}catch(e){o.e(e)}finally{o.f()}return a},searchApplication:function(e){var a=this,s=n.defer();return o.length?s.resolve(this._applicationFilter(o,e)):t.getMyApplication("pc"===window.client?"pc":"mobile",!0).then((function(t){f()(t).call(t,(function(e){var t;f()(t=e.classify_list).call(t,(function(e){var t;f()(t=e.applications).call(t,(function(e){var t;o.push({icon:e.icon||e.icon_str,png_icon:e.png_icon,name:e.name,path_list:[e.category.name,(e.classify||{}).name,e.name],state:e.state,param:e.param,url:h()(t="".concat(location.pathname)).call(t,i.href(e.state,e.param))})}))}))})),s.resolve(a._applicationFilter(o,e))})),s.promise},searchEmployee:function(t){return e.callHcmOpenApi("emp.search",{key:t,_from:"mini",fields:["id","name","job_title","department","company_name","dept_id","photo","life_photo","unit_id","job_id"]},null,null,!1).then((function(e){var t;return w()(t=e.list).call(t,(function(e){e.path_list=[e.company_name,e.department,e.job_title]})),e.count=e.count<=200?e.count:"200+",e}))},searchEmp:function(t,n){return e.callHcmOpenApi("emp.search.new",{search_key:n,filter_dict:t}).then((function(e){return e.count=e.count<=200?e.count:"200+",{searchKey:n,data:e}}))},searchPath:function(){return e.callHcmOpenApi("hcm.model.meta",{biz_type:"list",model:"JobInformation",state:"search"}).then((function(e){return e}))},searchOrganization:function(t,n){var i=[];return e.callHcmOpenApi("org.department.list",{filter_str:t,filter_dict:{enabled:!0,id:{child_include:n}}},null,null,!1).then((function(e){var t;return f()(t=e.list).call(t,(function(e){i.push({id:e.id,name:e.name,org_type:e.org_type,path_list:[e.list_name]})})),{list:i,count:e.count}}))},getMyEmpListEnabled:function(){return e.callHcmOpenApi("hcm.model.list",{model:"HCMApplication",filter_dict:{category_id:3,id:3001}}).then((function(e){return e.list.length>0}),null,null,!1)},getPathList:function(e,t){var n,i,o={},s=t.list_config.list_meta.content.middle_left_area,l=w()(s).call(s,(function(e){return e.key}));o.path_list=[],o.id=e.employee_id,o.photo=e.employee.photo,o.name=e.employee.name,o.job_info=e;var c=w()(n=t.fields).call(n,(function(t){return a("hcListCellData")(e,t)})),r=w()(i=t.fields).call(i,(function(e){return e.key})),d=[];if(r.length===c.length)for(var p=0;p<r.length;p++)d[r[p]]=c[p];return w()(l).call(l,(function(e){var t=d[e];o.path_list.push(t)})),o}}}])},Vviu:function(e,t){e.exports='<span id="name">{{$ctrl.name}}</span>\n<span id="count" ng-show="$ctrl.resultCount">共<strong>{{$ctrl.resultCount}}</strong>个结果</span>\n<a ng-href="{{$ctrl.href()}}" ng-click="$ctrl.onHideSearch()" ng-if="$ctrl.showAllModel && $ctrl.client===\'pc\'">查看全部</a>\n'},WGhI:function(e,t,n){e.exports='<div class="home-widget-emp-card-info" ng-init="init()" ng-if="client === \'pc\'">\n    \x3c!-- 上部分 包括标签、头像、机器人详情 --\x3e\n    <div class="top-content">\n        \x3c!-- 标签 --\x3e\n        <div class="types">\n            <div class="type type-1" ng-if="types.type_1">\n                <div class="icon"><img src="'+n("nCIt")+'"></img></div>\n                <div class="text">{{types.type_1}}</div>\n            </div>\n            <div class="type type-2" ng-if="types.type_2">\n                <div class="icon"><img src="'+n("ohwz")+'"></img></div>\n                <div class="text">{{types.type_2}}</div>\n            </div>\n        </div>\n        \x3c!-- 头像&详情 --\x3e\n        <div class="photo-desc">\n            <div class="photo" ng-if="view_meta_object.photo">\n                <hc-primary-photo options="view_meta_object.photo.options" ng-model="view_model.data.photo"></hc-primary-photo>\n            </div>\n            \x3c!-- 名称&跳转 --\x3e\n            <div class="name-go"  ng-click="goEdit()">\n                <div>{{view_model.data.name}}</div>\n                <span><img src="'+n("qg9n")+'"></img></span>\n            </div>\n            \x3c!-- 状态 --\x3e\n            <div class="status" ng-class="{\'offline\': !model, \'online\': model}" ng-if="showStatus">\n                <div ng-if="iconUpOrDown" ng-click="changeIcon()"><span class="icon-hcm-arrow-down"></span></div>\n                <div ng-if="!iconUpOrDown" ng-click="changeIcon()"><span class="icon-hcm-arrow-up"></span></div>\n                <div class="text" ng-if="model">在线</div>\n                <div class="text" ng-if="!model">离线</div>\n                <div class="dot" ng-class="{\'offline-dot\': !model, \'online-dot\': model}"></div>\n                \x3c!-- 切换状态的下拉弹窗 --\x3e\n                <div class="compose-selector-panel" ng-if="!iconUpOrDown">\n                    <div ng-repeat="v in options.list" ng-click="changeStatus(v)" class="selector-item" ng-hide="(v.hide|valueToFunc)()">{{v.name}}</div>\n                </div>\n            </div>\n\n            \x3c!-- view --\x3e\n            <div class="desc">\n                <div class="extend">\n                    <div class="extend-item {{(view_meta_object[item_].options||{}).color}}"\n                        ng-repeat="item_ in extendModel.show_fields.list">\n                        <span\n                            ng-if="extendModel.show_fields.show_label && extendModel.show_fields.show_label.includes(item_)">{{view_meta_object[item_].label}}:</span>\n                        <span ng-bind-html="view_model.data|hcListCellData:view_meta_object[item_]|infoDefault|toTrusted"></span>\n                        <span ng-if="item_ === \'number\'" class="icon" hc-auto-copy value="{{view_model.data.number}}"><img src="'+n("tpJm")+'"></img></span>\n                        <span class="hcm-tip" ng-if="(view_meta_object[item_].options||{}).tip">\n                            <span class="tip icon icon-hcm-question"></span>\n                            <span class="tip-detail">{{(view_meta_object[item_].options.tip|valueToFunc)()}}</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \x3c!-- 机器人 --\x3e\n        <div class="robot">\n            <div class="img" ng-click="openRobot()"><img src="'+n("1lpt")+'"></img></div>\n            <div class="name">小参</div>\n        </div>\n    </div>\n    \x3c!-- 下部分  包括两行文字 --\x3e\n    <div class="buttom-content">\n        \x3c!-- 在岗天数 --\x3e\n        <div class="day">\n            <div class="icon"><img src="'+n("6Fiv")+'"></div>\n            <div class="text">当前岗位{{nowJobDays}}天</div>\n        </div>\n        \x3c!-- 鼓励的话 --\x3e\n        <div class="harryup">感谢您在大参林{{daysOfInJob}}天的耕耘与付出！</div>\n    </div>\n</div>\n<div class="home-widget-emp-card-info" ng-init="init()" ng-if="client === \'mobile\'">\n    \x3c!-- 上部分 包括头像、详情、待办数量 --\x3e\n    <div class="top-content">\n        \x3c!-- 头像 --\x3e\n        <div class="photo">\n            <div class="photo" ng-if="view_meta_object.photo">\n                <hc-primary-photo options="view_meta_object.photo.options" ng-model="view_model.data.photo"></hc-primary-photo>\n            </div>\n        </div>\n        \x3c!-- desc --\x3e\n        <div class="desc">\n            <div>\n                \x3c!-- 称号--移动端固定取数或拼接  不支持扩展 --\x3e\n                <div class="name"><div>{{nameAndJob}}</div></div>\n                \x3c!-- 一段文字 --\x3e\n                <div class="harryup">感谢您在大参林{{daysOfInJob}}天的耕耘与付出！</div>\n            </div>\n        </div>\n        \x3c!-- 待办 --\x3e\n        <div class="undo">\n            <div class="undo-num" ng-click="go_pending()">{{undone}}</div>\n            <div class="undo-text">待办</div>\n        </div>\n    </div>\n    \x3c!-- 下部分  包括标签 --\x3e\n    <div class="buttom-content">\n        \x3c!-- 当前在岗--固定纯在 --\x3e\n        <div class="day">\n            <div class="icon"><img src="'+n("6Fiv")+'"></div>\n            <div class="text">当前岗位{{nowJobDays}}天</div>\n        </div>\n        \x3c!-- 标签--移动端就放两个   多了放不下 --\x3e\n        \x3c!-- <div class="types"> --\x3e\n            <div class="type type-1" ng-if="types.type_1">\n                <div class="icon"><img src="'+n("nCIt")+'"></img></div>\n                <div class="text">{{types.type_1}}</div>\n            </div>\n            <div class="type type-2" ng-if="types.type_2">\n                <div class="icon"><img src="'+n("ohwz")+'"></img></div>\n                <div class="text">{{types.type_2}}</div>\n            </div>\n        \x3c!-- </div> --\x3e\n    </div>\n</div>'},Wi0C:function(e,t,n){n("Seck")},Wkgt:function(e,t,n){"use strict";n.r(t);var i=n("8xC1");i.a.factory("fileService",["dataService","contextService","$q",function(e,t,n){return{getMyFiles:function(t){var i={id:t},a=n.defer();return e.callHcmOpenApi("file.get.my.files",i,null,!0).then((function(e){a.resolve(e)})),a.promise},getMyFilesByType:function(t,i){var a={id:t,type:i},o=n.defer();return e.callHcmOpenApi("file.get.my.files.by.type",a,null,!0).then((function(e){o.resolve(e)})),o.promise},getMyPicFiles:function(t){var i={id:t},a=n.defer();return e.callHcmOpenApi("file.get.my.pic.files",i,null,!0).then((function(e){a.resolve(e)})),a.promise},getMyFolders:function(t){var i={id:t},a=n.defer();return e.callHcmOpenApi("folder.get.my.folders",i,null,!0).then((function(e){a.resolve(e)})),a.promise},getMyAllFolders:function(){var t=n.defer();return e.callHcmOpenApi("folder.get.my.all.folders",{},null,!0).then((function(e){t.resolve(e)})),t.promise},moveFile:function(t,i){var a={target_folder_id:t,item_id:i},o=n.defer();return e.callHcmOpenApi("file.move",a,null,!0).then((function(e){o.resolve(e)})),o.promise},delFile:function(t){var i={item_id:t},a=n.defer();return e.callHcmOpenApi("file.del",i,null,!0).then((function(e){a.resolve(e)})),a.promise},reNameFile:function(t,i){var a={item_id:t,item_name:i},o=n.defer();return e.callHcmOpenApi("file.rename",a,null,!0).then((function(e){o.resolve(e)})),o.promise},createFolder:function(t,i){var a={id:t,name:i},o=n.defer();return e.callHcmOpenApi("folder.create",a,null,!0).then((function(e){o.resolve(e)})),o.promise},addFile:function(t,i,a,o,s){var l={id:t,name:i,index:a,type:o,size:s},c=n.defer();return e.callHcmOpenApi("file.add",l,null,!0).then((function(e){c.resolve(e)})),c.promise},getFileDetail:function(t){var i={id:t},a=n.defer();return e.callHcmOpenApi("file.detail",i,null,!0).then((function(e){a.resolve(e)})),a.promise},getFileById:function(t){var i={id:t},a=n.defer();return e.callHcmOpenApi("file.get.file.by.id",i,null,!0).then((function(e){a.resolve(e)})),a.promise},getFolderPath:function(t){var i=n.defer(),a={id:t};return e.callHcmOpenApi("folder.get.path",a,null,!0).then((function(e){i.resolve(e)})),i.promise}}}]),i.a.factory("documentService",["dataService","contextService","$q","$http",function(e,t,n,i){return{getDocument:function(t){return e.callHcmOpenApi("document.get",{index:t},null,!0)},saveDocument:function(e){var t=n.defer();return i.post("/document/savecmshtml",e).then((function(e){e=e.data,t.resolve()}),(function(){t.reject()})),t.promise}}}])},XNyo:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var i,a=n("FLGM"),o=n.n(a),s=n("+oHS"),l=n.n(s),c=n("RXMP"),r=n.n(c),d=n("OBge"),p=n.n(d),u=n("mrSG"),m=n("8xC1"),_=n("wd/R"),g=n.n(_),h=n("lPa1"),v=n.n(h),f=(n("7tsL"),n("9BZJ"),n("bmIa"),n("F6Fg"),n("yDEG")),y=n("p4uW");!function(e){e.y="y",e.m="m"}(i||(i={}));var w=function(){function e(e,t,n,i,a,o,s){this.$rootScope=e,this.homeWidgetCalendarService=t,this.$q=n,this.contextService=i,this.TimeCommonService=a,this.scope=o,this.templateService=s,this.weeks=["一","二","三","四","五","六","日"],this.calendarCategories=[{id:"moon",label:"日历"},{id:"attend",label:"考勤"}]}return e.prototype.$onInit=function(){var e,t,n,i,a;return Object(u.c)(this,void 0,void 0,(function(){var o,s=this;return Object(u.e)(this,(function(l){switch(l.label){case 0:return null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key,this),this.calendar_category=(null===(t=this.options)||void 0===t?void 0:t.calendar_category)||"moon",this.selected_date=this.current_date=g()().format("YYYY-MM-DD"),this.calendar_year=g()(this.current_date).year(),this.calendar_month=g()(this.current_date).month()+1,this.employee_id=this.contextService.getContext("auth").employee.id,[4,this.setCalendar(this.calendar_year,this.calendar_month)];case 1:return l.sent(),[4,this.templateService.getTemplate("time_attend_calendar_config.json")];case 2:return o=l.sent(),this.show_tip=null===(a=null===(i=null===(n=null==o?void 0:o.template_config)||void 0===n?void 0:n.portal_plugin)||void 0===i?void 0:i.attend_tip_show)||void 0===a||a,this.scope.$watch("$ctrl.calendar_category",(function(e){"attend"===e&&s.getCalendarData()})),[2]}}))}))},e.prototype.setCalendar=function(e,t){return Object(u.c)(this,void 0,void 0,(function(){var n;return Object(u.e)(this,(function(i){switch(i.label){case 0:return n=this,[4,this.homeWidgetCalendarService.getCalendarWithLunar(e,t)];case 1:return n.calendar_data=i.sent(),[2]}}))}))},e.prototype.selectDate=function(e){if(this.selected_date=e,"attend"===this.calendar_category){var t={employee_id:this.employee_id,date:e};this.$rootScope.super_go("time_view_employee",t)}},e.prototype.calendarMinus=function(e){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(t){switch(t.label){case 0:return"m"===e?1===this.calendar_month?(this.calendar_month=12,this.calendar_year=this.calendar_year-1):this.calendar_month=this.calendar_month-1:this.calendar_year=this.calendar_year-1,[4,this.setCalendar(this.calendar_year,this.calendar_month)];case 1:return t.sent(),"attend"===this.calendar_category&&this.getCalendarData(),[2]}}))}))},e.prototype.calendarPlus=function(e){return Object(u.c)(this,void 0,void 0,(function(){return Object(u.e)(this,(function(t){switch(t.label){case 0:return"m"===e?12===this.calendar_month?(this.calendar_month=1,this.calendar_year=this.calendar_year+1):this.calendar_month=this.calendar_month+1:this.calendar_year=this.calendar_year+1,[4,this.setCalendar(this.calendar_year,this.calendar_month)];case 1:return t.sent(),"attend"===this.calendar_category&&this.getCalendarData(),[2]}}))}))},e.prototype._fetchSchedule=function(e,t){var n=this,i=this.$q.defer(),a=[this.homeWidgetCalendarService.getDataList(e,t,[this.employee_id]),this.homeWidgetCalendarService.getDataListByEmp(e,t,this.employee_id)];return p.a.all(a).then((function(e){var t,a={};r()(t=e[0].list).call(t,(function(e){a[e.date]=e})),n.schedule_month=e[1].count_month,n.shift_month=e[1].shift_month,n.work_unusual=e[1]._countType,n.work_onjob_count=e[1].work_onjob_count,n.work_onjob=e[1].work_onjob,n.detail=e[1]._detail;var s=l()(e[1]._detail);o()(s).call(s,(function(t){n.detail[t].count=e[1]._detail[t]._count,n.detail[t].sum=e[1]._detail[t]._sum})),i.resolve(a)})),i.promise},e.prototype.$onResize=function(){},e.prototype.getSettingPanel=function(){return Object(f.c)(y.a)},e.prototype.getCalendarData=function(){var e=this;this._fetchSchedule(this.TimeCommonService.getMonthBegin(this.calendar_year,this.calendar_month),this.TimeCommonService.getMonthEnd(this.calendar_year,this.calendar_month)).then((function(t){e.month_calendar_data=t,e.statisticInfo="您本月应出勤"+e.schedule_month+"天，共"+e.shift_month+"小时，\n                                截止当前实出勤"+e.work_onjob_count+"天，共"+e.work_onjob+"小时。\n                                请假:\t"+e.detail.leave.count+" 次，"+e.detail.leave.sum+" 小时\n                                出差:\t"+e.detail.trip.count+" 次，"+e.detail.trip.sum+" 小时\n                                加班:\t"+e.detail.overtime.count+" 次，"+e.detail.overtime.sum+" 小时\n                                补签:\t"+e.detail.fillcard.count+" 次\n                                迟到:\t"+e.work_unusual.work_late+" 次\n                                早退:\t"+e.work_unusual.work_early+" 次\n                                旷工:\t"+e.work_unusual.work_absence+" 次"}))},e.$inject=["$rootScope","homeWidgetCalendarService","$q","contextService","TimeCommonService","$scope","templateService"],e}();m.a.component("homeWidgetCalendar",{bindings:{current_date:"<",options:"<",key:"<",context:"="},require:{boardCtrl:"?^hcmBoard"},controller:w,template:v.a})},ZnTZ:function(e,t){e.exports='<a ng-href="{{$ctrl.url()||$ctrl.href()}}" ng-click="$ctrl.hideSearch($event);">\n    <img alt="图标" ng-src="{{$ctrl.searchData.photo|hcPhoto:30}}" ng-if="!$ctrl.icon&&$root.client===\'pc\'"/>\n    \x3c!-- <span id="icon" ng-class="$ctrl.icon" ng-if="$ctrl.icon&&$root.client===\'pc\'"></span> --\x3e\n    <hc-icon app="$ctrl.searchData" options="\'icon-left\'" ng-if="$ctrl.icon && !$ctrl.searchData.photo"></hc-icon>\n    <div id="result">\n        <p id="title"\n           ng-bind-html="$ctrl.searchData.name | highLight:$ctrl.searchKey | toTrusted"></p>\n        <p id="path"\n           ng-bind-html="$ctrl.searchData.path_list | listToString | highLight:$ctrl.searchKey | toTrusted"></p>\n    </div>\n</a>\n'},Zt29:function(e,t,n){"use strict";n.r(t);var i=n("y/Cr");n("+4nQ");window.app.controller("industryInformationListCtrl",["$scope","$controller","BaseCRUDService",function(e,t,n){var a=n.getModelService("IndustryInformation");t(i.a,{$scope:e,CRUDService:a,InfoDialog:null})}])},aice:function(e,t){e.exports='<div class="pc-index" ng-init="init()" ng-class="{\'new-menu-style\': menu_style!==0}">\n    <div class="index-content"\n         ng-if="menu_style===1">\n\x3c!--        <home-widget-app-list></home-widget-app-list>--\x3e\n        <pc-main-side-nav></pc-main-side-nav>\n    </div>\n    <div ng-if="menu_style===0" style="height: 100%">\n\x3c!--        因为增加了中间层，高度的继承出现问题，加入页面内样式--\x3e\n        <div class="category-select">\n            <div class="category-item" ng-if="auth.company_setting[\'open_portal\']" ng-click="showPortal()"\n                 ng-class="{true:\'selected\',false:\'\'}[show_portal]">首页\n            </div>\n            <div class="category-item" ng-repeat="_c in application_category"\n                 ng-click="categoryChange(_c)"\n                 ng-class="{true:\'selected\',false:\'\'}[_c.id==curr_application_category&&!show_portal]">\n                {{_c.name}}\n            </div>\n        </div>\n        <div class="home-service"\n             ng-if="!show_portal||!auth.company_setting[\'open_portal\']">\n            <div ng-repeat="_app in application_data|orderBy:\'number\' track by $index" class="home-service-item">\n                <div class="tg">\n                    <a ng-href="{{_app.href}}">\n                        <div class="icon">\n                            <hc-icon app="_app" options="\'icon-top\'"></hc-icon>\n                            \x3c!-- <div class="{{_app.is_service?_app[\'icon_str\']:_app.icon}}"></div> --\x3e\n                            <div class="flag-dev" ng-show="_app.status==2">DEV</div>\n                        </div>\n                        <div class="title" title="{{_app.name}}">{{_app.name}}</div>\n                    </a>\n                </div>\n            </div>\n        </div>\n        <div class="home-service" ng-if="show_portal&&auth.company_setting[\'open_portal\']">\n            <portal></portal>\n        </div>\n    </div>\n\n    <file-selector-pc controller=\'file_selector_controller\' callback="alert_file_index"></file-selector-pc>\n</div>\n'},bmIa:function(e,t,n){"use strict";n.r(t);n("07d7"),n("JfAA");var i=n("lHQ6"),a=n.n(i),o=n("wd/R"),s=n.n(o);window.app.factory("TimeCommonService",["listCacheService2","$timeout","dataService","contextService","$q",function(e,t,n,i,o){return{getMenuDefine:function(e){var t="/template/load_template?key="+e+".json";return n.callHcmCloudApi(t,{},"GET")},getListDefine:function(e){var t="/template/load_template?key=time_mgt_"+e+"_list_define.json";return n.callHcmCloudApi(t,{},"GET")},getBillDefine:function(e){var t="/template/load_template?key=time_mgt_"+e+"_bill_define.json";return n.callHcmCloudApi(t,{},"GET")},getListData:function(e){return n.callHcmOpenApi("time.bill.common.get.list",e)},getListCount:function(e){return n.callHcmOpenApi("time.bill.common.get.list.count",e)},saveBillData:function(e){return n.callHcmOpenApi("time.bill.save.bill.info",e)},delBillData:function(e){return n.callHcmOpenApi("time.bill.delete",e)},getBillData:function(e){return n.callHcmOpenApi("time.bill.get",e)},getLeaveItemList:function(){return n.callHcmOpenApi("leave.item.list",{})},getTripItemList:function(){return n.callHcmOpenApi("business.trip.item.list",{})},getOvertimeItemList:function(){return n.callHcmOpenApi("overtime.item.list",{})},getOvertimeTypeList:function(){return n.callHcmOpenApi("time.overtime.type.new.list",{})},getShiftList:function(){return n.callHcmOpenApi("time.shift.item.new.list",{})},getAttendYears:function(){for(var e=[],t=s()().year(),n=t+5;n>t-5;n--)e.push({value:n.toString(),label:n});return e},getAttendMonths:function(){for(var e=[],t=1;t<=12;t++)e.push({value:t<10?"0"+t.toString():t.toString(),label:t.toString()+"月"});return e},getAttendDays:function(e,t){t=void 0===t?s()().month()+1:t,e=void 0===e?s()().year():e;var n=[],i=31;4==t||6===t||9==t||11==t?i=30:2==t&&(i=e%4==0&&e%100!=0||e%400==0?29:28);for(var a=1;a<=i;a++)n.push({value:a<10?"0"+a.toString():a.toString(),label:a.toString()+"日"});return n},getAttendItem:function(){return n.callHcmOpenApi("time.attend.items",{})},getEmployeePunchInList:function(e,t,i,a,o){return n.callHcmOpenApi("time.punchin.list.by.employee",{employee_id:e,begin_date:t,end_date:i,page_index:a,page_count:o})},getEmployeePunchInListNew:function(e,t){return n.callHcmOpenApi("time.punch.data.get.month.data.punch.list",{employee_id:e,date_:t})},getScheduleSectionListForEmployeeView:function(e,t,i,a){return n.callHcmOpenApi("time.schedule.section.list.join.shift",{date:e,employee_id:a,depart_id:t,is_child_include:i})},getEmployeeLeaveList:function(e,t,i,a,o){return n.callHcmOpenApi("time.leave.list.by.employee",{employee_id:e,begin_date:t,end_date:i,page_index:a,page_count:o})},getEmployeeTypeLeaveList:function(e,t,i,a){return n.callHcmOpenApi("time.leave.list.by.employee.type",{employee_id:e,begin_date:t,end_date:i,leave_type:a},"session")},getEmployeeTripList:function(e,t,i,a,o){return n.callHcmOpenApi("time.trip.list.by.employee",{employee_id:e,begin_date:t,end_date:i,page_index:a,page_count:o})},getEmployeeOverTimeList:function(e,t,i,a,o){return n.callHcmOpenApi("time.overtime.list.by.employee",{employee_id:e,begin_date:t,end_date:i,page_index:a,page_count:o})},getEmployeeFieldWorkList:function(e,t){return n.callHcmOpenApi("time.field_work.list.by.employee",{employee_id:e,date:t})},getMyBillList:function(e){return n.callHcmOpenApi("time.bill.common.get.list",e)},getMyBillListCount:function(e,t,i,a,o){return n.callHcmOpenApi("time.bill.common.get.list.count",{category:e,selector:t,filter:i,emp_filter:a,is_self:o})},getMyWfByBizCount:function(e){return n.callHcmOpenApi("workflow.instance.detail.get.self.list.by.business.count",{business_number:e})},getWfByBiz:function(e){return n.callHcmOpenApi("workflow.get.workflow.by.business.number.department",e)},getEmpMonthWorkinghours:function(e,t,i,a){return n.callHcmOpenApi("time.working_hours.get.emp.month.workinghours",{year:e,month:t,employee_ids:i,depart_id:a})},getMonthCalendar:function(e,t){var n=s()({year:e,month:t-1,day:1}).weekday(),i=[];if(n>0){i[0]=[];for(var o=0;o<n;)i[0].push(void 0),o++}for(var l=s()({year:e,month:t-1,day:1}).daysInMonth(),c=1;c<=l;c++){var r=a()((c+n-1)/7);void 0===i[r]&&(i[r]=[]),i[r].push({date:s()({year:e,month:t-1,day:c}).format("YYYY-MM-DD"),label:c})}return i},getMonthDays:function(e,t){for(var n=[],i=["一","二","三","四","五","六","日"],a=s()({year:e,month:t-1,day:1}).daysInMonth(),o=1;o<=a;o++){var l=s()({year:e,month:t-1,day:o});n.push({date:l.format("YYYY-MM-DD"),weekday:i[l.weekday()],label:o,is_today:l.isSame(s()(),"day")})}return n},getDepartParam:function(e){return n.callHcmOpenApi("time.parameters.setting.depart.param.list",e)},getMonthBegin:function(e,t){return s()({year:e,month:a()(t)-1}).format("YYYY-MM-DD")},getMonthEnd:function(e,t){return s()({year:e,month:a()(t)-1}).endOf("month").format("YYYY-MM-DD")},getMyCenterMenu:function(){return n.callHcmCloudApi("/template/load_template_merge?key=time_my_center_menu.json",{},"GET")},getMyLocation:function(e){return n.callHcmOpenApi("attend.get.emp.location.list",e)},getMyWorkingHours:function(e){return n.callHcmOpenApi("time.working_hours.get.by.year.month.range",e)},getMyWorkingHoursDetail:function(e){return n.callHcmOpenApi("time.working_hours.details.by.year.month",e)},getBizBillDefine:function(e){var t="/template/load_template?key=time_biz_"+e+"_bill_define.json";return n.callHcmCloudApi(t,{},"GET")},getOrgInfo:function(e){return n.callHcmOpenApi("department.get.json.info",e)},initReportWf:function(e,t){return n.callHcmOpenApi(e,t)},exportMgtList:function(e){return n.callHcmOpenApi("time.mgt.list.export",e)},commonModelBillList:function(e){return n.callHcmOpenApi("hcm.model.list",e)},commonModelBillData:function(e){return n.callHcmOpenApi("hcm.model.get",e)},getTreeId:function(e){var t=o.defer();return n.callHcmOpenApi("time.common.execute.model.method",{model_:"Department",_func:"get_tree_id",params:{dept_id:e}}).then((function(e){e.success?t.resolve(e.result):t.reject()})),t.promise},getBizPubInfo:function(e){return n.callHcmOpenApi("business.mode.and.version.get",e)},validateInfo:function(e,t,i){return n.callHcmOpenApi("time.model.validators.check",{info:e,model:t,state:i})}}}]),t.default="TimeCommonService"},crAE:function(e,t){e.exports='<div class="home-widget-emp-card-info" ng-init="init()" ng-if="client===\'pc\'">\n    <div class="profile-info-content">\n        <div class="profile"><span class="content" ng-click="empProfile()">{{\'common_home_widget_emp_card_profile_title\'| translate}}</span></div>   \x3c!--个人资料--\x3e\n        <div class="photo" ng-if="view_meta_object.photo">\n            <hc-primary-photo options="view_meta_object.photo.options" ng-model="view_model.data.photo"\n                              class="hc_primary_photo_body"></hc-primary-photo>\n        </div>\n        <div class="desc">\n            <div class="name">{{view_model.data.name}}</div>\n            <div class="extend">\n                <div class="extend-item {{(view_meta_object[item_].options||{}).color}}"\n                     ng-repeat="item_ in extendModel.show_fields.list">\n                    <span ng-if="extendModel.show_fields.show_label && extendModel.show_fields.show_label.includes(item_)">{{view_meta_object[item_].label}}:</span>\n                    <span\n                        ng-bind-html="view_model.data|hcListCellData:view_meta_object[item_]|infoDefault|toTrusted"></span>\n                    <span class="hcm-tip" ng-if="(view_meta_object[item_].options||{}).tip">\n                        <span class="tip icon icon-hcm-question"></span>\n                        <span class="tip-detail">{{(view_meta_object[item_].options.tip|valueToFunc)()}}</span>\n                </span>\n                </div>\n            </div>\n        </div>\n        <div class="user-profile-sign" ng-if="!extendModel.show_sign.hide">\n            <span class="text">{{emp_slogan}}</span>\n            <span class="icon icon-hcm-edit" ng-click="editSlogan()"></span>\n        </div>\n    </div>\n</div>\n'},eR5k:function(e,t,n){"use strict";n("sMBO");var i=n("M5Mt"),a=n.n(i),o=n("ZbhI"),s=n.n(o),l=n("/FZm"),c=n.n(l),r=n("RXMP"),d=n.n(r),p=n("mnMc"),u=n.n(p),m=n("5PDf"),_=n.n(m),g=n("WxoT"),h=n.n(g),v=n("FLGM"),f=n.n(v),y=n("NR7K"),w=n.n(y);window.app.controller("NewMostUsedAppAdjustCtrl",["$scope","$hcConfigList","$hcDataset","contextService","$q","homeWidgetMyAppService","IndexService","$filter","$rootScope","hcAutoCopyService",function(e,t,n,i,o,l,r,p,m,g){e.init=function(){e.auth=i.getContext("auth"),e.initComponent()},e.submit=function(){var t=e.parse_app_list_order();t&&(e.$dialog.resolve_data(t),e.$dialog.dialog_close())},e.cancel=function(){e.$dialog.dialog_close()},e.cleanInvalidData=function(){var t,n=f()(t=e.invalid_id).call(t,(function(e){return l.delMostUsedApp(e)}));o.all(n).then((function(){m.show_warning("已清理"+e.invalid_id.length+"条无效记录"),e.initComponent()}))},e.copyAppList=function(){var t;g.copy(h()(f()(t=e.dataset_model.selected_list).call(t,(function(e){return{app_id:e.id,is_service:e.is_service}})))),m.show_warning("已将应用ID复制到剪贴板")},e.operate_meta=[{key:"cancel",label:"取消",func:e.cancel},{key:"submit",label:"确定",default:!0,func:e.submit},{key:"clear_invalid",default:!0,label:"清理无效记录",hide:function(){return!p("getValue")(e,["invalid_id","length"])},left:!0,func:e.cleanInvalidData},{key:"get_app_id_list",label:"复制应用列表",hide:function(){var t,n,i,a;return!((null===(t=e.auth)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.onlyoneowner)||(null===(i=e.auth)||void 0===i||null===(a=i.roles)||void 0===a?void 0:a["sys-manager"]))},left:!0,func:e.copyAppList}],e.$dialog.operates(e.operate_meta),e.initComponent=function(){var i={favor_app_list:l.getMostUsedAppList(0===e.params.category?["myservice"]:["favorite"],"pc",!0),my_app:r.getMyApplication("pc")};o.all(i).then((function(i){var a,o,s;e.application_list=[],e.my_app=angular.copy(_()(a=i.my_app).call(a,(function(t){var n,i;return 0===e.params.category?u()(n=["员工服务","管理服务","全员服务"]).call(n,t.name):!u()(i=["员工服务","管理服务","全员服务"]).call(i,t.name)}))),e.my_app=f()(o=e.my_app).call(o,(function(t){var n;return t.key=t.id,d()(n=t.applications).call(n,(function(t){t.key=t.id,t.label=t.name,e.application_list.push(t)})),t.fields=t.applications,t})),e.favor_app_list=[],e.invalid_id=[],e.origin_favor_app_list=angular.copy(i.favor_app_list),f()(s=i.favor_app_list.list).call(s,(function(t){var n,i=c()(n=e.application_list).call(n,(function(e){return e.id===t.app_id&&!!e.is_service==!!t.is_service}));p("isValidValue")(i)?(i.sequence=t.sequence,i.favor_id=t.id,e.favor_app_list.push(i)):t.id&&e.invalid_id.push(t.id)})),e.invalid_id.length>0&&m.show_warning('存在不可用的最近应用，如需清理请点击"清理无效记录"'),e.dataset_model=n.createDataset({loader:e.getDatasetData,load_params:[]}),e.dataset_model.$initDataset(),e.dataset_model.selected_list=angular.copy(e.favor_app_list),e.config_model=t.createConfigList({meta:[{width:100,label:"名称",field:["name"]}],data:e.dataset_model.selected_list,show_index:!0,operates:[{icon:"icon-hcm-arrow-cross-up-solid",func:function(t,n){e.operateCondition.move_up(t,n)}},{icon:"icon-hcm-arrow-cross-down-solid",func:function(t,n){e.operateCondition.move_down(t,n)}},{icon:"icon-hcm-delete-circle-solid",func:function(t,n){e.operateCondition.delete(t,n)}}]})}))},e.getDatasetData=function(){var t=o.defer();return t.resolve(e.my_app),t.promise},e.parse_app_list_order=function(){var t,n,i,a;if(!(e.dataset_model.selected_list.length>32)){e.selectedAppList=f()(t=e.dataset_model.selected_list).call(t,(function(e,t){var n;return{id:e.id,sequence:t,is_service:null!==(n=e.is_service)&&void 0!==n&&n}}));var o=[],s=[];f()(n=e.selectedAppList).call(n,(function(t){var n,i=_()(n=e.favor_app_list).call(n,(function(e){return e.id===t.id}))[0];i?(i.parsed=!0,i.favor_id?(t.favor_id=i.favor_id,i.sequence!==t.sequence&&o.push(t)):s.push(t)):s.push(t)}));var l=f()(i=_()(a=e.favor_app_list).call(a,(function(e){return!e.parsed}))).call(i,(function(e){return{id:e.favor_id}}));return{data_to_add:s,data_to_modify:o,data_to_del:l}}m.show_warning("自定义保存的应用不得超过32个")},e.operateCondition={move_up:function(t){var n,i=s()(n=e.dataset_model.selected_list).call(n,t);if(0!==i){var o,l,c=a()(o=e.dataset_model.selected_list).call(o,i,1)[0];a()(l=e.dataset_model.selected_list).call(l,i-1,0,c)}},move_down:function(t){var n,i=s()(n=e.dataset_model.selected_list).call(n,t);if(i!==e.dataset_model.selected_list.length-1){var o,l,c=a()(o=e.dataset_model.selected_list).call(o,i,1)[0];a()(l=e.dataset_model.selected_list).call(l,i+1,0,c)}},delete:function(t){var n,i,o=s()(n=e.dataset_model.selected_list).call(n,t);a()(i=e.dataset_model.selected_list).call(i,o,1)}}}]),t.a={controller:"NewMostUsedAppAdjustCtrl",template:w.a}},gsMG:function(e,t,n){"use strict";var i=n("UtpJ"),a=n.n(i),o=n("Vi3r"),s=n.n(o),l=n("5PDf"),c=n.n(l),r=n("FLGM"),d=n.n(r),p=n("o+MX"),u=n.n(p),m=n("+oHS"),_=n.n(m),g=n("KYsz"),h=n.n(g),v=n("RXMP"),f=n.n(v),y=n("EVMC"),w=n.n(y),b=(n("Jf2n"),n("5QaF"),n("8rxN")),x=n("yDEG"),k=n("p4uW");window.app.component("homeWidgetAppList",{template:w.a,require:{boardCtrl:"?^hcmBoard"},bindings:{key:"<",context:"=",model:"<?",options:"<?"},controller:["$scope","$controller","$q","HomeWidgetMostUsedAppService","$state","$hcDialog","$rootScope","$filter","IndexService","contextService","CompanyMetaService","templateService","dataService",function(e,t,n,i,o,l,r,p,m,g,v,y,w){e.init=function(){var t,n,i,a,o,s,l,c;null===(t=e.$ctrl.boardCtrl)||void 0===t||t.componentRegister(e.$ctrl.key,e),e.auth=g.getContext("auth"),e.company_id=null===(n=e.auth)||void 0===n||null===(i=n.company)||void 0===i?void 0:i.id,e.is_open_new_page="pc"===window.client&&(null!==(a=null===(o=e.auth)||void 0===o||null===(s=o.company_setting)||void 0===s?void 0:s.open_new_page)&&void 0!==a?a:null),e.self_id=null===(l=e.auth)||void 0===l||null===(c=l.employee)||void 0===c?void 0:c.id,e.initMenu(),e.page_index=1},e.getSettingPanel=function(){return Object(x.c)(k.a)},e.$onResize=function(){},e.initMenu=function(){m.getMyApplication("pc","list").then((function(t){var n;e.my_app=t,e.my_app_dic={},f()(n=e.my_app).call(n,(function(t){e.my_app_dic[t.id]?e.my_app_dic[t.id].push(t):e.my_app_dic[t.id]=[t]})),e.getMostUsedApps()}))},e.getMostUsedApps=function(){w.callHcmOpenApi("hcm.home.widget.most.used.app.my.all",{}).then((function(t){var n,i=[];try{var a,o,s,l,r,m="string"==typeof t.role_apps?null!==(a=JSON.parse(t.role_apps||"{}").role_apps)&&void 0!==a?a:{}:null!==(o=t.role_apps)&&void 0!==o?o:{},g=null!==(s=null==t||null===(l=t.role_app_recommend)||void 0===l?void 0:l.template_config)&&void 0!==s?s:{};angular.extend(m,g),i=h()(r=_()(e.auth.roles)).call(r,(function(e,t){var n=p("getValue")(m,[t]);return n&&f()(n).call(n,(function(e){e.from_role=!0})),u()(e).call(e,n||[])}),[])}catch(e){i=[]}e.favor_app_list=u()(i).call(i,t.personal_apps.list),e.app_list=[],d()(n=e.favor_app_list).call(n,(function(t){var n,i=angular.copy(c()(n=e.my_app_dic[t.app_id]||[]).call(n,(function(e){return!!e.is_service==!!t.is_service}))[0]);p("isValidValue")(i)&&(i.from_role=t.from_role,e.app_list.push(i))})),e.refreshPaging()}))},e.refreshPaging=function(){var t,n,i;i=document.getElementsByTagName("body")[0].getBoundingClientRect().width<1280?4:8,e.index_list=d()(t=s()(Array(Math.ceil(e.app_list.length/i)))).call(t,(function(e,t){return t+1})),e.app_slice_list=d()(n=e.index_list).call(n,(function(t){var n;return a()(n=e.app_list).call(n,(t-1)*i,t*i)})),e.index_list.length&&e.page_index>=e.index_list.length&&e.changePage(e.index_list.length)},e.changePage=function(t){$(".item-container").css({left:"-"+100*(t-1)+"%"}),e.page_index=t},e.adjust_most_used_app=function(){var e=g.getContext("auth"),t=e.employee.id,a=e.company.id;l.getDialog(b.a).show().then((function(e){var o,s,l,c,p,m=u()(o=u()(s=d()(l=e.data_to_add).call(l,(function(e){return i.createItem({company_id:a,employee_id:t,app_id:e.id,is_service:e.is_service,sequence:e.sequence})}))).call(s,d()(c=e.data_to_modify).call(c,(function(e){return i.editItem(e.favor_id,{company_id:a,employee_id:t,app_id:e.id,sequence:e.sequence})})))).call(o,d()(p=e.data_to_del).call(p,(function(e){return i.removeItem(e.id)})));n.all(m).then((function(){r.show_warning("修改成功！"),r.$broadcast("refresh_most_used_app")}))}))},e.$on("refresh_most_used_app",(function(){e.getMostUsedApps()})),e.go_app=function(t){r.super_go(t.state,t.param,null,e.is_open_new_page||t.open_new_page)},e.beforeJumpToApp=function(t,n){if(null==n||n.stopPropagation(),"show_dialog"!==t.state);else switch(null==n||n.preventDefault(),t.param.dialog_name){case"chat_robot":e.$emit("chat-robot",t.param||{});break;default:r.show_warning("暂不支持")}}}]})},h5m7:function(e,t,n){"use strict";var i=n("o+MX"),a=n.n(i),o=n("8xC1"),s=n("Vviu"),l=n.n(s);n("cNuy");o.a.component("widgetHeader",{bindings:{name:"@",resultCount:"<",onHideSearch:"&",showAllModel:"<"},template:l.a,controller:["$state",function(e){var t=this;this.$onInit=function(){t.client=window.client},this.href=function(){var n;return a()(n="".concat(location.pathname)).call(n,e.href(t.showAllModel.state,t.showAllModel.params))}}]})},hAhF:function(e,t){e.exports='<div ng-init="init()">\n    <hc-article ng-model="model"></hc-article>\n</div>'},k37F:function(e,t){e.exports='<div class="hc-plugins-setting" ng-class="{\'plugins-setting-bg\':$ctrl.sortable_config.sort}"\n     ng-mouseup="$ctrl.mouseUp($event)" ng-mousemove="$ctrl.mouseMove($event)">\n    <div class="new-plugins" id="public" ng-class="{\'sort\':$ctrl.sortable_config.sort}" ng-show="$ctrl.isPublicShow()">\n        <div ng-repeat="plugin in $ctrl.publicPlugins track by $index" data-col=\'{{plugin.params.col}}\'\n             data-row=\'{{plugin.params.row}}\' data-size-x=\'{{plugin.params.sizeX}}\'\n             data-size-y=\'{{plugin.params.sizeY}}\'\n             ng-class="{\'resize\': $index===$ctrl.resizeIndex, \'moving\':$index===$ctrl.dragIndex}" class=\'plugin\'>\n            <home-widget-application ng-if="plugin.category.plugin===\'home-widget-application\'"\n                                     model="plugin"></home-widget-application>\n            <home-widget-dashboard ng-if="plugin.category.plugin===\'home-widget-dashboard\'"\n                                   model="plugin"></home-widget-dashboard>\n            <home-widget-hcm-dashboard ng-if="plugin.category.plugin===\'home-widget-hcm-dashboard\'"\n                                   model="plugin"></home-widget-hcm-dashboard>\n            <home-widget-message ng-if="plugin.category.plugin===\'home-widget-message\'"\n                                 model="plugin"></home-widget-message>\n            <home-widget-app-list ng-if="plugin.category.plugin===\'home-widget-app-list\'"\n                                  model="plugin"></home-widget-app-list>\n            <home-widget-calendar ng-if="plugin.category.plugin===\'home-widget-calendar\'"\n                                  model="plugin"></home-widget-calendar>\n            <home-widget-count ng-if="plugin.category.plugin===\'home-widget-count\'"\n                               model="plugin"></home-widget-count>\n            <div class="drag-mask" ng-if="$ctrl.sortable_config.sort" ng-mousedown="$ctrl.dragStart($event,$index)">\n                <div class="personal-operate">\n                    <span class="icon icon-hcm-edit" title="修改"\n                          ng-if="[\'dashboard_child\', \'count_data\'].includes(plugin.key)"\n                          ng-click="$ctrl.edit_plugin(plugin,$index)"></span>\n                    <span class="icon icon-hcm-copy" title="复制插件配置" ng-if="$ctrl.is_admin"\n                          ng-click="$ctrl.copy_plugin_config(plugin)"></span>\n                    <span class="icon icon-hcm-trash" title="删除" ng-click="$ctrl.delete_plugin(plugin)"></span>\n                </div>\n                <div class="tip">拖拽进行移动</div>\n                <div class="plugin-resize-handle icon icon-hcm-arrow-amplification-reverse"\n                     ng-mousedown="$ctrl.resizeStart($event,$index)"\n                ></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="new-plugins" id="private" ng-class="{\'sort\':$ctrl.sortable_config.sort}"\n         ng-show="$ctrl.isPrivateShow()">\n        <div ng-repeat="plugin in $ctrl.privatePlugins track by $index" data-col=\'{{plugin.params.col}}\'\n             data-row=\'{{plugin.params.row}}\' data-size-x=\'{{plugin.params.sizeX}}\'\n             data-size-y=\'{{plugin.params.sizeY}}\'\n             ng-class="{\'resize\': $index===$ctrl.resizeIndex, \'moving\':$index===$ctrl.dragIndex}" class=\'plugin\'>\n            <home-widget-application ng-if="plugin.category.plugin===\'home-widget-application\'"\n                                     model="plugin"></home-widget-application>\n            <home-widget-dashboard ng-if="plugin.category.plugin===\'home-widget-dashboard\'"\n                                   model="plugin"></home-widget-dashboard>\n            <home-widget-hcm-dashboard ng-if="plugin.category.plugin===\'home-widget-hcm-dashboard\'"\n                                   model="plugin"></home-widget-hcm-dashboard>\n            <home-widget-message ng-if="plugin.category.plugin===\'home-widget-message\'"\n                                 model="plugin"></home-widget-message>\n            <home-widget-app-list ng-if="plugin.category.plugin===\'home-widget-app-list\'"\n                                  model="plugin"></home-widget-app-list>\n            <home-widget-calendar ng-if="plugin.category.plugin===\'home-widget-calendar\'"\n                                  model="plugin"></home-widget-calendar>\n            <home-widget-count ng-if="plugin.category.plugin===\'home-widget-count\'"\n                               model="plugin"></home-widget-count>\n            <home-widget-time-my-unusual ng-if="plugin.category.plugin===\'home-widget-time-my-unusual\'"\n                                         model="plugin"></home-widget-time-my-unusual>\n            <home-widget-growth-record ng-if="plugin.category.plugin === \'home-widget-growth-recor\'"\n                                           model="\'plugin\'"></home-widget-growth-record>\n            <home-widget-inner-recruit-job ng-if="plugin.category.plugin === \'home-widget-inner-recruit-job\'"\n                                           model="\'plugin\'"></home-widget-inner-recruit-job>\n            <home-widget-recruit-interview-calendar\n                ng-if="plugin.category.plugin === \'home-widget-recruit-interview-calendar\'"\n                model="plugin"></home-widget-recruit-interview-calendar>\n            <div class="drag-mask" ng-if="$ctrl.sortable_config.sort" ng-mousedown="$ctrl.dragStart($event,$index)">\n                <div class="personal-operate">\n                    <span class="icon icon-hcm-edit" title="修改"\n                          ng-if="[\'dashboard_child\', \'count_data\', \'hcm_dashboard_child\'].includes(plugin.key)"\n                          ng-click="$ctrl.edit_plugin(plugin,$index)"></span>\n                    <span class="icon icon-hcm-copy" title="复制插件配置" ng-if="$ctrl.is_admin"\n                          ng-click="$ctrl.copy_plugin_config(plugin)"></span>\n                    <span class="icon icon-hcm-trash" title="删除" ng-click="$ctrl.delete_plugin(plugin)"></span>\n                </div>\n                <div class="tip">拖拽进行移动</div>\n                <span class="plugin-resize-handle icon icon-hcm-arrow-amplification-reverse"\n                      ng-mousedown="$ctrl.resizeStart($event,$index)"\n                ></span>\n            </div>\n        </div>\n    </div>\n\n    <div class="operate" ng-class="{hover:$ctrl.operate}" ng-mouseover="$ctrl.operate=true"\n         ng-mouseleave="$ctrl.operate=false"\n         ng-if="!$ctrl.sortable_config.sort">\n        <div class="details">\n            <div ng-repeat="item in $ctrl.portal_operate" ng-click="item.click($ctrl)"\n                 ng-if="item.show">\n                {{item.label}}\n            </div>\n        </div>\n        <div class="icon icon-hcm-add"></div>\n    </div>\n\n    <div class="layout_confirm" ng-if="$ctrl.sortable_config.sort">\n        <div class="operate-content">\n            <div class="btn-pc primary" ng-click="$ctrl.add_plugins()">新增插件</div>\n            <div class="btn-pc secondary" ng-click="$ctrl.cancel_adjust_layout()">取消</div>\n            <div class="btn-pc primary" ng-click="$ctrl.save_adjust_layout()">保存布局</div>\n        </div>\n        <div class="tip-content">\n            <div class="primary">\n                请拖拽卡片调整卡片的布局，再点击保存布局即可生效\n            </div>\n            <div class="secondary">\n                备注：取消 - 不保存当前布局直接退出\n            </div>\n        </div>\n    </div>\n</div>\n\n\n'},l6uO:function(e,t){e.exports='<div class="portal-plugin-item-set message-set" ng-init="initScheme()">\n    <div class="choose-scheme">\n        <div class="scheme-step">\n            <div class="step-content">\n                <div class="line"></div>\n                <div class="step" ng-repeat="item in scheme_step track by $index"\n                     ng-class="{active:($index+1<=current_scheme_step)}">\n                    <div class="icon">{{$index+1}}</div>\n                    <div>{{item.label}}</div>\n                </div>\n            </div>\n        </div>\n        <div class="scheme-content">\n            <div class="first-step choose-plugin flexbox" ng-if="current_scheme_step===1">\n                <div ng-repeat="item in plugin.children" ng-click="choose_plugin(item)">\n                    {{item.label}}\n                </div>\n            </div>\n            <div class="second-step" ng-if="current_scheme_step===2">\n                <div class="setting">\n                    <hc-form model="scheme_form"></hc-form>\n                </div>\n                <div class="preview">\n                    <home-widget-message model="add_plugin_config"></home-widget-message>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},lIYI:function(e,t){e.exports='<div ng-if="$ctrl.searchKey && $ctrl.app_list.length">\n    <widget-header\n        name="功能应用"\n        result-count="$ctrl.total"\n        on-hide-search="$ctrl.onHideSearch()"\n        show-all-model="{state: \'search_result\', params: {index: $ctrl.searchKey, group:\'app\'}}"\n    ></widget-header>\n    <widget-item\n            ng-repeat="app in $ctrl.app_list"\n            search-data="app"\n            search-key="$ctrl.searchKey"\n            icon="app.icon"\n            on-hide-search="$ctrl.click(app)"\n            forward-model="{state: app.state, params: app.param}"\n    ></widget-item>\n</div>\n'},lPa1:function(e,t){e.exports='<div class="home-widget">\n    <div class="home-widget-header flexbox">\n        <div class="menu">\n            \x3c!-- <div class="icon-hcm-calendar"\n                 ng-class="{selected:true}">\n                {{"日历"}}\n            </div> --\x3e\n            \x3c!--<div class="refresh icon-hcm-refresh" ng-click="refreshData()"></div>--\x3e\n            <div class="select-calendar-category">\n                <select ng-change="$ctrl.changeCategory()"\n                        ng-model="$ctrl.calendar_category"\n                        ng-options="_c.id as _c.label for _c in $ctrl.calendarCategories">\n                    \x3c!-- <option ng-repeat="_c in $ctrl.calendarCategories track by $index"\n                            value="_c.key"\n                        >{{_c.label}}</option> --\x3e\n                </select>\n            </div><div class="icon icon-hcm-info-normal" ng-if="$ctrl.calendar_category===\'attend\' && $ctrl.show_tip"\n            hc-title="{{$ctrl.statisticInfo}}" options="{mode: \'tip\', seconds: 0}"></div>\n        </div>\n        <div class="calendar-header">\n            <div class="btn left icon-hcm-arrow-left-double" ng-click="$ctrl.calendarMinus(\'y\')"></div>\n            <div class="btn left icon-hcm-arrow-left" ng-click="$ctrl.calendarMinus(\'m\')"></div>\n            <div class="text">{{$ctrl.calendar_year}}年{{$ctrl.calendar_month}}月</div>\n            <div class="btn right icon-hcm-arrow-right" ng-click="$ctrl.calendarPlus(\'m\')"></div>\n            <div class="btn right icon-hcm-arrow-right-double" ng-click="$ctrl.calendarPlus(\'y\')"></div>\n        </div>\n    </div>\n    <div class="home-widget-content">\n        <table class="calendar-content">\n            <tr class="weekday">\n                <th ng-repeat="_w in $ctrl.weeks track by $index">\n                    <div class=\'week-item\'>\n                        {{_w}}\n                    </div>\n                </th>\n            </tr>\n            <tr ng-repeat="_c in $ctrl.calendar_data">\n                <td ng-repeat="_d in _c track by $index">\n                    <div ng-if="_d" ng-click="$ctrl.selectDate(_d.date)" class="calendar-item"\n                         ng-class="{current_date:_d.date==$ctrl.current_date,selected_date:_d.date==$ctrl.selected_date}">\n                        <div class="day">{{_d.label}}\n                        </div>\n                        <div class="desc" ng-class="{\'is_important\':_d.high_light}"\n                             ng-if="$ctrl.calendar_category===\'moon\'">{{_d.lunar_date}}</div>\n                        <div class="sche {{$ctrl.month_calendar_data[_d.date]|timeAttendItemClass:[]}}"\n                             ng-if="$ctrl.calendar_category===\'attend\'">\n                            {{$ctrl.month_calendar_data[_d.date]|timeAttendItem}}\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},lrqK:function(e,t,n){"use strict";n.r(t);n("sMBO"),n("rB9j"),n("EnZy");var i=n("FLGM"),a=n.n(i),o=n("mrSG"),s=n("hAhF"),l=n.n(s);window.app.controller("announceDetailCtrl",["$scope","attachService","hcAnnounceService","$state",function(e,t,n,i){var s=this;e.init=function(){return Object(o.c)(s,void 0,void 0,(function(){var s,l,c,r;return Object(o.e)(this,(function(o){var d;switch(o.label){case 0:return s=e.$dialog?e.params.id:i.params.id,[4,n.getAnnounce(s)];case 1:return(l=o.sent()).create_time=l.announce_time,l.title=l.name,l.attachment?(c=l,[4,t.annexInfoMore(l.attachment.split("#"))]):[3,3];case 2:return c.attachments=a()(d=o.sent()).call(d,(function(e){return{name:e.source_name,index:e.index,type:e.file_type,id:e.id,att_type:e.file_type}})),[3,4];case 3:l.attachments=null,o.label=4;case 4:return e.model=l,null===(r=e.$dialog)||void 0===r||r.operates([{label:"确认",func:function(){var t;null===(t=e.$dialog)||void 0===t||t.dialog_close()}}]),[2]}}))}))}}]),t.default={controller:"announceDetailCtrl",template:l.a}},m5Re:function(e){e.exports=JSON.parse('{"tip":"","fields":[{"key":"data","label":"数据定义","component":"hc-input-mask","options":{"tip":"在此处定义图形需要使用的数据源","singleLine":true,"width":"col-12","placeholder":"请输入标识","required":false}},{"key":"drill","label":"穿透定义","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入穿透定义","required":false}},{"key":"countTitle","label":"统计标题","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入","required":false}},{"key":"formula","label":"取数公式","component":"hc-input-compute","options":{"singleLine":true,"width":"col-12","placeholder":"请输入取数公式","required":false,"need_check":false,"returnFormat":"content","formula_type":"only_formula","tip":"根据数据源的key获取计算结果并进行二次处理，可不填。eg:LIST_MAX(main, \'master_id\')"}},{"key":"getCountKey","label":"取数字段","component":"hc-input","options":{"singleLine":true,"width":"col-12","placeholder":"请输入","required":false,"tip":"对返回结果进行取值 \\n1. 返回结果为列表时取第一条数据对应该字段的值，\\n2. 返回结果为字典时直接取该字段的值，\\n3. 不填该字段则直接取返回结果 \\n（这里的返回结果指取数公式处理后的结果，没有取数公式的话则为数据源返回的第一条数据）"}},{"key":"require","label":"刷新依赖","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入过滤条件","required":false}}]}')},nCIt:function(e,t,n){e.exports=n.p+"resources/images/4d37f0528c81ffdb6a00e276ee70d187.png"},nI6X:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("4Brf");var i=n("FLGM"),a=n.n(i),o=n("+hqv"),s=(n("srGB"),n("1hbj"));n("opRW");n("tB8/").controller("searchEmpList",["$controller","$scope","BaseCRUDService","$timeout","$rootScope","$state","contextService","$filter","empHistoryService","SpecialistSearchService",function(e,t,n,i,l,c,r,d,p,u){var m=n.getModelService("JobInformation");e(o.a,{$scope:t,CRUDService:m,InfoDialog:Object(s.a)("JobInformation","search")}),t.initAfter=function(){t.model_meta&&t.model_meta.advance_query&&(t.model_meta.advance_query.close=!0),t.list_model.$setRowSelector(0),t.model_meta.description="关于"+c.params.index+"的搜索结果",$(".list-content").get(0).style.height=$(window).height()-106+"px"},t.defaultAction=function(e){if("mobile"===t.client){var n=u.getPathList(e,t.model_meta);p().pushHistory(n)}l.super_go("emp",{id:e.employee_id})},t.getMetaState=function(){return"search"},t.getFilterDict=function(){var e,t=d("dateFormat")(new Date,"yyyy-MM-dd"),n={begin_date:{lte:t},end_date:{gt:t},"employee.search_string":{like:c.params.index}},i=r.getContext("auth").company_setting.EMP_SEARCH_NEED_CHARGE,o=a()(e=r.getContext("auth").manager_departs).call(e,(function(e){return e.id}));return"1"==i&&(n["department.origin_id"]={child_include:o}),n},t.message_to=function(e){t.$emit("article-new",{to_employee:e.employee_id,callback:function(e){l.super_go("feed",{biz_id:e.feed.biz_id})}})}}])},ohwz:function(e,t,n){e.exports=n.p+"resources/images/65df08527f2dbfb993161812409033bd.png"},p4uW:function(e,t,n){"use strict";var i=n("OBge"),a=n.n(i),o=n("mrSG"),s=n("v8m2"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t.prototype.getMeta=function(){return Object(o.c)(this,void 0,a.a,(function(){return Object(o.e)(this,(function(e){return this,[2,s.fields]}))}))},t}(n("VxaH").a);t.a=l},qg9n:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAAEJwAABCcAFu8l9tAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAedSURBVHgB7d1bbhNXHMfx/zkOKqFUdaVWqqpKdd4qcIWRgER9YZIuAFgBYQVJV5BkBSErAFYA3UAyPJVLJYwUUN/iPLQvPNSVSFKV+Jz+z4Qhl5LEl3O1fx8pFaJWxh5/58zMmTEmAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPBEEQ9StZpkk2hKRq8RdK5eu/5TklBgF5ZsIhKZZJiMbR/8dvRktrur/+bHWJEoGAPPphcmZZE82f/kjR3BWdW78/yVsUOQTkCcdzj+OZ7fbxZjR6J9R07BEhIA96jaeUQkQIyLF+4ynFHhECcmjQeEoxR4SAHLEVTynWiBCQA7bjKcUYEQKyzFU8pdgiQkAWuY6nFFNECMgSX/GUYokIAVngO55SDBEhoAGFiqdkIqqMq8vNPG9TAJKgb6HjMXj5td0d8ZACqRD0JYZ49onal99MbL75c6NJnmEE6kNc8eyRUt+mAHAM1KMY4ymNjasvfB8LYQTqQczxGP9uUY08Q0Bdij0eQ+r3t8f6XCbBqVKIxxg7TziIjk0q8WjSrRBzQQjoBKnEY2ihg9yIj7OwYyQVD48+r56uTVAAGIE+IrV4OkJPUyAYgY5IMR5cTI0E4ukdAnoP8fQHARHiGcTIB4R4BjPSASGewY1sQIjHjpEMCPHYM3IBIR67RiogxGPfyASEeNwYiYAQjztDHxDicWuoA0I87g1tQIjHj6EMCPH4M3QBIR6/hiogxOPf0ASEeMIYioAQTzjJB4R4wko6IMQTXrIBIZ44JBkQ4olHcgEhnrgkFRDiiU8yASGeOCUREOKJV/QBIZ64RR0Q4olftAEhnjREGRDiSUd0ASGetEQVEOJJTzQBIZ40RREQ4klX8IAQT9qCBoR40hcsIMQzHIIEhHiGh/eARjmeWpZVP9uSN5WkS7zia7yE6t5yRJM6tKmFyl8/z71/YcogvAbE8SxzPPOUAJvx1K9kGVXEAq/u7LTHmi/R7ShaUhWV4593OaA+NbPA78oiJcBWPMWIsyMX+tloypBeP1+9TxHzEtDeFijXKAG24vl+Kqud0XJNF7uqAZ6Poruvnq/+TJFy/q3NZkVWhDRfS+392/R6ZSueC1ezxhjJX7Wgr2lAQtDUV99O1N78sfELRcj5t/XwVjg36Fbog82RpyLlQ47H2gbDu4nZi5MzUR47Ot2FmZU5puUGRc7mATOfKGw42mDau0Jdju3A2ukIVNFygSJn9WyLTxQcjrZV3hijG4WcjUD1KT5w1nEfONuMx9ZB8ynaY+NqIsR3ox7H2QiktbxNEbM9Scij7U0Px3rV3bfUoIg4CchsjSLi2WYXlyd4Rc6RB7oihz8gPoWdpUi5iOfCj1nD15mm0HFNhzgJiF9klLsvVxdGRYcyGlHWAzK7rxjnfVxeVRckr5MnHVJRXWwdI8vOqEpD8xAUE/e3ZIiqWYoPvGpbvTy+vAPA/Pmdgwu01kcgjiejiAzT/TzmtfRyu0d9Mps7vyP/0pLumR8zqXvx6swyWeTgGEhcokgM381gIu/2kSYefnvv/u83SJq3eVnEfkBaR3Ga6Tce7WViryPUUjePMxdzPxZPyeaUg9WAzOksifCnmQFGnk1yTdNSN6/HxFMR/q4A2B2B3oWf5Aqy2xLqETlkXtP6s9XF0x5ndltSyhen3Qmgtb0R02pAUoadZg91zLP+JM954U52Y+VrOukx5kyrfm3m4Um7rYOU1CtkieXTeHMAHeYUPvgBs6QVfhJW7z447TWZcM5vyzmxTfNd33+k6dHrp/l9ssRyQGFO4UPEY968c1tUq5BsmE9Z8PxFZnPjOe41FdHwBVW+JnZDbtOsCafbpfLvbG6d03fIImu3c4S6fcN1PAdD4Terxj/f8X4/cz3brohW5Pvdolkmv1FV/un7mlsRz7ieblm+FcTaCKQ1Nfx/SlHnvFJudbNSyhDkgYuRQlaq/MT3Ppu1F8fnVLxRuiZI1HitV/UOP17ujy3mNfrYSRen2mJ/mcVzpP64isewuAuT/iYQecvkN3vp1dO1rg4azdmJ2JaLPBtbPfxr9KExWBz4kz78Fylb4XgWW45uQrMWkNCiQV6ugel8V+o73e6yyhlZPRwxdO/DRrba1UbWL3sBCV11m4/OOdCl4pS5B3ylfD6uS7s+9LaRDcLeMRCJFv+3Rtb1F45R3FqiQ99aonNF4iXvFG8Ux1WOl9XvuuqXtYCU0A/4ADUjK8yKEI/fnlV3B9l3n/2H2rufkD97Z005HwG/5DWSvz1LzQPPf96cqWolZnlYvG4tJl6mEvRA8my4z3BKVo8M6temX/Ab39NstPkMuDIrndRLrSjf/pRaNg/46pM/rbmYnzLPm0e3Jr95mxVFzV7vtSkueJr7m/nsVZoJWHMRuovJwHK5WqjHQlAzRDRHno89xacylVgUQtw+ZmEfYjEv/sgW6kTxnLRY62eL33uzNB+MiiYfR/1tQjF3BNqO/KDiw5hH5npUh0eZCrVjvC3FyblJMamoZGYmwHzGcpILUzOzfJL44dZTE8T+RJ1qSyXbfFG03dEceaRvFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+w+LuVxEi+m0mQAAAABJRU5ErkJggg=="},sGGm:function(e,t){window.app.factory("homeWidgetAttendCalendarService",["$rootScope","dataService","$q",function(e,t,n){return{getDataList:function(e,n,i,a,o,s,l){return t.callHcmOpenApi("time.data.list",{begin_date:e,end_date:n,result_items:o,depart_id:i,employee_ids:a,page_index:s,page_size:l})},getDataListByEmp:function(e,n,i){return t.callHcmOpenApi("time.data.employee.list",{begin_date:e,end_date:n,employee_id:i})}}}])},"sI+m":function(e,t){e.exports='<div ng-init="init()">\n    <list-person ng-repeat="_item in object.list  track by $index"\n                 pic="_item.photo" name="_item.name" mobile="_item.mobile"\n                 desc="_item.department" id="_item.id" location-date="_item.position.datetime"\n                 location="_item.position.address" status="_item.position.status"\n                 ng-click="searchEmpGo(_item)"></list-person>\n</div>'},sNM4:function(e,t){e.exports='<div class="depart-list-item tg" ng-click="go_depart(object.id)">\n    <div>\n        <div class="name">{{object.name}}</div>\n        <div class="number">{{object.number}}</div>\n    </div>\n    <div class="emp-count" ng-show="object.emp_count">{{object.emp_count}}</div>\n    <div class="go">\n        <div class="icon-hcm-arrow-right"></div>\n    </div>\n</div>'},skWO:function(e,t){e.exports='<div class="home-widget" ng-class="message_show_control.is_dynamic ? \'dynamic\' : \'static\'">\n    <div class="home-widget-header flexbox" ng-init="init()">\n        <div class="menu">\n            <div ng-repeat="item in menu" class=" menu_left {{item.icon}}"\n                 ng-class="{selected:currentMenu===item.key}" ng-if="item.float===\'left\'"\n                 ng-click="refreshData(item.key)">\n                {{item.label}}\n            </div>\n            <div class="icon-hcm-arrow-right menu_right_sys"  ng-if="dynamic_controller" ng-click="ge_message_list(currentMenu )"></div>\n            <div ng-repeat="item in menu" class=" menu_right "\n                 ng-class="{selected:currentMenu===item.key}" ng-if="item.float===\'right\'"\n                 ng-click="ge_message_list(currentMenu )">\n                {{item.label}}\n            </div>\n\n        </div>\n        <div class="btn_right" ng-show="currentMenu != \'task_collect\'">\n            <span></span>\n            <select title="page"\n                    class="select"\n                    ng-model="page_size"\n                    ng-show="!message_show_control.is_dynamic"\n                    ng-change="refreshData()">\n                <option ng-repeat="x in sizes track by $index">{{x + pageText}}</option>\n            </select>\n        </div>\n\n    </div>\n    \x3c!-- 标准插件是home-widget-body，但是无法满足消息轮播，顾换成自己的样式  --\x3e\n    <div class="home-widget-body-dynamic" ng-if="message_show_control.is_dynamic &&message_list.length>10">\n        <div class="message" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title">\n                <div class="message-content">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_wan\'" class="message-icon icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n        \x3c!--轮播使用--\x3e\n        <div class="message" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title">\n                <div class="message-content">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_warn\'"  class="message-icon icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n        <div class="message" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title">\n                <div class="message-content">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_warn\'"  class="message-icon icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n        <div class="message" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title">\n                <div class="message-content">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_warn\'" class="message-icon icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n        <div class="process_collect" ng-if="currentMenu === \'task_collect\'">\n            <div class="process" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)">\n                <div class="process_content">\n                    <div class="count" title={{_msg.count}}>\n                        {{_msg.count}}\n                    </div>\n                    <div class="content" title={{_msg.name}}>{{_msg.name}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="home-widget-body-static" ng-if="message_show_control.is_dynamic && message_list.length<11">\n        <div class="no-data-static" ng-if="message_list && message_list.length<1">\n            <hc-svg class="hcm-no-content-static" options="{icon:\'hcm-no-content\'}"></hc-svg>\n            <div class="no-content-label-static">当前没有内容</div>\n        </div>\n        <div class="message-static" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title-static">\n                <div class="message-content-static">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time-static">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_warn\'"  class="message-icon-static icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n\n        <div class="process_collect-static" ng-if="currentMenu === \'task_collect\'">\n            <div class="process-static" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)">\n                <div class="process_content-static">\n                    <div class="count-static" title={{_msg.count}}>\n                        {{_msg.count}}\n                    </div>\n                    <div class="content-static" title={{_msg.name}}>{{_msg.name}}</div>\n                </div>\n            </div>\n        </div>\n\x3c!--        <div class="load-more-message-static" ng-if="haveMoreMessage" ng-click="getMessageList()">点击加载更多...</div>--\x3e\n        <div class="load-more-message-static"\n             ng-if="message_list.length>1 && !haveMoreMessage && currentMenu != \'task_collect\'">\n            已经没有更多了\n        </div>\n    </div>\n    <div class="home-widget-body-static" ng-if="!message_show_control.is_dynamic">\n        <div class="no-data-static" ng-if="message_list&&message_list.length<1">\n            <hc-svg class="hcm-no-content-static" options="{icon:\'hcm-no-content\'}"></hc-svg>\n            <div class="no-content-label-static">当前没有内容</div>\n        </div>\n        <div class="message-static" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)"\n             ng-if="currentMenu != \'task_collect\'">\n            <div class="title-static">\n                <div class="message-content-static">\n                    <span title={{_msg.content}}>{{_msg.content|convertFromHtml}}</span>\n                </div>\n                <div class="message-time-static">\n                    \x3c!--消息通知是send_date，预警是update_time，create_time--\x3e\n                    <span>{{(_msg[\'send_date\']|timeStampToDate|beforeCurrentTime)\n                    || (_msg[\'update_time\']|beforeCurrentTime)\n                    || (_msg[\'create_time\']|beforeCurrentTime)}}</span>\n                </div>\n                <div ng-if="currentMenu === \'work_warn\'"  class="message-icon-static icon icon-hcm-trash"\n                     ng-click="message_down(_msg,$event)">\n                </div>\n            </div>\n        </div>\n\n        <div class="process-collect-static" ng-if="currentMenu === \'task_collect\'">\n            <div class="process-static" ng-repeat="_msg in message_list" ng-click="jump(_msg,$event)">\n                <div class="process-content-static">\n                    <div class="count-static" title={{_msg.count}}>\n                        {{_msg.count}}\n                    </div>\n                    <div class="content-static" title={{_msg.name}}>{{_msg.name}}</div>\n                </div>\n            </div>\n        </div>\n        <div class="load-more-message-static" ng-if="haveMoreMessage" ng-click="getMessageList()">点击加载更多...</div>\n        <div class="load-more-message-static"\n             ng-if="message_list.length>1 && !haveMoreMessage && currentMenu != \'task_collect\'">\n            已经没有更多了\n        </div>\n\n    </div>\n</div>\n'},"tB8/":function(e,t,n){var i=n("KHwQ").module("myApp");e.exports=i},tpJm:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAACXBIWXMAAEJwAABCcAFu8l9tAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAS3SURBVHgB7d1NThxHGIfxfxUfyc5zg7S4QECyLXkV5gSObzA+AWaZWIhBFnJ2CScw3ICcwGRlKcaCHCBO5wZ4aWaoSveYJI4iho+3Grp6np+MsMyYxeihp7uHeksCAAAAAAAAAAAAAAAAAACwcmpQcTTs+fH8QM5/I8Xl+p80g6J07JyOQwh75YONA3VIYwEtHf6wJp0Nq7/2hM+4/TA6XS8fDUt1QCMBLb17uakYhsJFyhD0pHz4/FiZSx4Q8VzZSRVRP/eIkgZUvNse+KhXwlWVYW60Uq4MT5Qpr4SqeDaF6yj8eO6ZMpYsoProoxm9yjJxfq2+WlWmkgU0F/VYuImexnPLylSygKp7Hdk+CXfNyxGQePm6ORcLZSrpSTRuyPl7yhQBwYSAYEJAMCEgmBAQTAgIJgQEEwKCCQHBhIBgQkAwISCYEBBMCAgmBAQTAoIJAcFkXmi14u2LVe/dY8ldceVGPFGIH4J0cBvr8AmopSaDKc4WX1VBfFuvWLg6V/1x9UvL5tLhdinnd8Ppx72m1uLzEtZSPixuTuKxKepl5n5h4XXxZlioAQTUVjEOlE5RRXRU/LqdfPkQAbVQ8eZlofRjcXreK/mRiIDa6MuPTQ1b6LmFxaTDLwioheppHVHuQA1wiqv1lZ0SIaCWiiGuV59KNcA7WU/O//1eQivVg6fCyPerkPaUOiTnkw3C4D5Qi5WPviurT4Nr/JfJCbhfCK81bVZBTHeCzhGoYybRxbB3ycMICO1AQDAhIJgQEEwICCYEBBMCggkBwYSAYEJAMCEgmBAQTAgIJgQEEwKCCQHBhIBgQkAwISCYEBBMCAgmBAQTAoIJAcGEgGBCQDAhIJgQEEwICCYEBBMCgknKgJoaDNl9IfypTBFQK7hsn7uEAYWfhRsJsZmJrLchWUAhal+4tigd1wM1lalkAdU7wzQ127jLfNCOMpb0KiyO3FNxLnQNYef3h893lbGkAdUTQkNQX0R0qfpo/f7+xjNlLvl9oPMB2StqaMp6N4SdP+5/31cHNHIjcXIkGvm+YtgSIf0jKh6EGPpdOPL8rbFJ9edT1of1x2TbRmlVTj05f0+zJIYPiq4M4/F+U7sG3qVb2ergfO/OA6FzeC8MJgQEk84E1NSmspgu6+2eJltjhy/WqhPV+qqmt3S4Pbm/EkenT7t4wtpGWR+B/NnCj/W21vps+6J6S8fJDsUckW5FtgGd7/s5uODLPb8w15l7LW2WbUCT+0rTJNzWERfLNqDoXDH9AZr+dSTBZTxMCAgmBAQTAoIJAcGEgGBCQDAhIJgQEEyyDah60/TSlR/1u/WaRc5/pVuS769zRFdWFU1VvVt/tPT2xZ5myad4BtMfk26hQ7YBBcVjf1lB1UGoekI3hf+IQb8pkXzPgebP6vXkLGC8AZ9wjkG2AZUrw5PqRynrdeV3pEy5nDrrq7Awf/aTWLh4LS5oSwllHVB9FApBT8RL2dXEsJV6mEP294Ema/E/DXQohYtV8bx/sDFUYp24kXg+0KFfXZMx5Or/qnPFuN5EPLVLr4NzU/+yvYtuUP1ofO3kljWbyurjuArnlzA/3p1ccAAAAAAAAAAAAAAAAAAAALTWX53gT1R56C6pAAAAAElFTkSuQmCC"},tvXb:function(e,t){e.exports='<div class="hc-show-plugins">\n</div>\n'},"uMe+":function(e,t){e.exports='<div class="portal-plugins-setting" ng-init="init()">\n    <div class="choose-plugin">\n        <div ng-repeat="item in pluginsConfig" class="item" ng-click="choose_plugins(item)">\n            <div class="icon {{item.icon}}"></div>\n            <div class="text-content">{{item.label}}</div>\n        </div>\n    </div>\n</div>\n'},v6AK:function(e,t,n){n("7xSq").factory("messageService",["listCacheService","listCacheService2","dataService","$q",function(e,t,n,i){return{getMessageUnread:function(){return n.callHcmOpenApi("message.unread.count",{except:"10001"},null,!0)},getMessageStatus:function(){return n.callHcmOpenApi("message.status",{},null,!0)},getMessage:function(e){return n.callHcmOpenApi("message.get",{id:e},null,!0)},messageList:function(e,n){return t({class:"message_list",type:e},"message.list",{type:e,key_words:n})},messageHighLevelList:function(e){return n.callHcmOpenApi("message.list",{level:e,ch_read:!1})},warnMessageList:function(e,n,i){var a=1;return"warn_done"===e&&(a=2),t(null,"get.warn.message.list",{page_size:n,to:i,status:a})},messageSetRead:function(e){return n.callHcmOpenApi("message.set.read",{id:e},null,!0)},messageDelete:function(e){return n.callHcmOpenApi("message.batch.delete",{ids:e})},messageBatchSetRead:function(){return n.callHcmOpenApi("batch.set.message.read",{})},messageBatchDelete:function(){return n.callHcmOpenApi("batch.remove.notify",{})}}}])},v8m2:function(e){e.exports=JSON.parse('{"tip":"","fields":[{}]}')},vl5y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pNMO"),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4Brf"),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZbhI"),_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2__),_showMessage_html__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("U5sc"),_showMessage_html__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_showMessage_html__WEBPACK_IMPORTED_MODULE_3__),_showMessage_scss__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("L6CN"),_showMessage_scss__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_showMessage_scss__WEBPACK_IMPORTED_MODULE_4__),moment__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("wd/R"),moment__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__),PDFObject=__webpack_require__("JcNw");window.app.controller("showMessageController",["$controller","$scope","dataService","documentPreviewService",function($controller,$scope,dataService,documentPreviewService){if($scope.readed=function(e){(0==$scope.now||$scope.now>$scope.sended)&&dataService.callHcmOpenApi("message.set.read ",{id:e}).then((function(){$scope.sended=$scope.now}))},$scope.changeStatus=function(e){switch(e){case 1:return function(){return!$scope.ifOldCanClick};case 2:return function(){return!$scope.ifNewCanClick}}},$scope.resetOperate=function(){$scope.$dialog.operates([{key:333,label:"上一条",hide:!$scope.ifOldCanClick,func:function func(){if($scope.ifNewCanClick=!0,$scope.now-1>=0){if($scope.now=$scope.now-1,$scope.title=$scope.params.list[$scope.now].title.description,$scope.time=moment__WEBPACK_IMPORTED_MODULE_5___default()($scope.params.list[$scope.now].send_date).format("YYYY-MM-DD HH:mm:ss"),$scope.message=$scope.params.list[$scope.now].content,$scope.message_type=$scope.params.list[$scope.now].message_type,$scope.go_param=$scope.params.list[$scope.now].go_param,$scope.ifOldCanClick=!0,$scope.go_param=eval($scope.go_param),$scope.file_list_str="",$scope.file_list_str_preview="",$scope.go_param&&$scope.go_param.download_file_index&&$scope.go_param.download_file_type&&$scope.go_param.download_file_index.length===$scope.go_param.download_file_type.length)for(var i=0;i<$scope.go_param.download_file_index.length;i++){var _context;-1===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context=["xls","xlsx","png","jpg","jpeg","pdf"]).call(_context,$scope.go_param.download_file_type[i])?""===$scope.file_list_str?$scope.file_list_str=$scope.go_param.download_file_index[i]:$scope.file_list_str=$scope.file_list_str+"#"+$scope.go_param.download_file_index[i]:""===$scope.file_list_str_preview?$scope.file_list_str_preview=$scope.go_param.download_file_index[i]:$scope.file_list_str_preview=$scope.file_list_str_preview+"#"+$scope.go_param.download_file_index[i]}$scope.show_file=0!==$scope.file_list_str.length,$scope.show_file_preview=0!==$scope.file_list_str_preview.length,0==$scope.now&&($scope.ifOldCanClick=!1)}else $scope.ifOldCanClick=!1;$scope.resetOperate()},default:!1,disabled:$scope.changeStatus(1)},{key:999,label:"下一条",hide:!$scope.ifNewCanClick,func:function func(){if($scope.ifOldCanClick=!0,$scope.now+1<$scope.params.count){if($scope.now=$scope.now+1,$scope.title=$scope.params.list[$scope.now].title.description,$scope.time=moment__WEBPACK_IMPORTED_MODULE_5___default()($scope.params.list[$scope.now].send_date).format("YYYY-MM-DD HH:mm:ss"),$scope.message=$scope.params.list[$scope.now].content,$scope.message_type=$scope.params.list[$scope.now].message_type,$scope.go_param=$scope.params.list[$scope.now].go_param,$scope.ifNewCanClick=!0,$scope.go_param=eval($scope.go_param),$scope.file_list_str="",$scope.file_list_str_preview="",$scope.go_param&&$scope.go_param.download_file_index&&$scope.go_param.download_file_type&&$scope.go_param.download_file_index.length===$scope.go_param.download_file_type.length)for(var i=0;i<$scope.go_param.download_file_index.length;i++){var _context2;-1===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context2=["xls","xlsx","png","jpg","jpeg","pdf"]).call(_context2,$scope.go_param.download_file_type[i])?""===$scope.file_list_str?$scope.file_list_str=$scope.go_param.download_file_index[i]:$scope.file_list_str=$scope.file_list_str+"#"+$scope.go_param.download_file_index[i]:""===$scope.file_list_str_preview?$scope.file_list_str_preview=$scope.go_param.download_file_index[i]:$scope.file_list_str_preview=$scope.file_list_str_preview+"#"+$scope.go_param.download_file_index[i]}$scope.show_file=0!==$scope.file_list_str.length,$scope.show_file_preview=0!==$scope.file_list_str_preview.length,$scope.now==$scope.params.list.length-1&&($scope.ifNewCanClick=!1),$scope.readed($scope.params.list[$scope.now].id)}else $scope.ifNewCanClick=!1;$scope.resetOperate()},default:!0,disabled:$scope.changeStatus(2)},{key:123,label:"确认",func:function(){var e;null===(e=$scope.$dialog)||void 0===e||e.dialog_close()},hide:function(){return!window.app}}])},$scope.title=$scope.params.list[0].title.description,$scope.time=moment__WEBPACK_IMPORTED_MODULE_5___default()($scope.params.list[0].send_date).format("YYYY-MM-DD HH:mm:ss"),$scope.message=$scope.params.list[0].content,$scope.message_type=$scope.params.list[0].message_type,$scope.go_param=eval($scope.params.list[0].go_param),$scope.file_list_str="",$scope.file_list_str_preview="",$scope.go_param&&$scope.go_param.download_file_index&&$scope.go_param.download_file_type&&$scope.go_param.download_file_index.length===$scope.go_param.download_file_type.length)for(var i=0;i<$scope.go_param.download_file_index.length;i++){var _context3;-1===_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context3=["xls","xlsx","png","jpg","jpeg","pdf"]).call(_context3,$scope.go_param.download_file_type[i])?""===$scope.file_list_str?$scope.file_list_str=$scope.go_param.download_file_index[i]:$scope.file_list_str=$scope.file_list_str+"#"+$scope.go_param.download_file_index[i]:""===$scope.file_list_str_preview?$scope.file_list_str_preview=$scope.go_param.download_file_index[i]:$scope.file_list_str_preview=$scope.file_list_str_preview+"#"+$scope.go_param.download_file_index[i]}if($scope.show_file=0!==$scope.file_list_str.length,$scope.show_file_preview=0!==$scope.file_list_str_preview.length,$scope.multi_image_data_preview={options:{readOnly:!0,not_download:!1,not_preview:!1,hide_name:!1}},$scope.multi_image_data={options:{readOnly:!0,not_download:!1,not_preview:!0,hide_name:!1}},$scope.now=0,$scope.sended=0,$scope.ifOldCanClick=!1,$scope.ifNewCanClick=!0,$scope.readed($scope.params.list[$scope.now].id),$scope.params.count>1?$scope.ifNewCanClick=!0:$scope.ifNewCanClick=!1,$scope.resetOperate(),$scope.$dialog.setClose((function(){$scope.$dialog.resolve_data(),$scope.$dialog.dialog_close()})),"pc"===$scope.client){var file_name=$scope.params.list[0].go_param.file_name;PDFObject.embed(window.location.protocol+"//"+window.location.host+window.hcm_wengen+"/document/get_pdf_by_index/".concat(file_name,"?temp=use&index=")+$scope.go_param.file_index+window.hcm_env_post,"#printAppointDismissal")}}]),__webpack_exports__.default={controller:"showMessageController",template:_showMessage_html__WEBPACK_IMPORTED_MODULE_3___default.a,title:"重要消息预览",name:"showMessageDialog"}},w2Ej:function(e,t,n){"use strict";var i=function(){function e(e,t,n){this.$timeout=e,this.baseCRUDService=t,this.dataService=n,this.crudService=this.baseCRUDService.getModelService("HomeWidgetMostUsedApp")}return e.prototype.getAllMostUsedAppList=function(e,t,n){return this.dataService.callHcmOpenApi("hcm.home.widget.most.used.app.my.all",{category:e,target:t,role:n})},e.prototype.getMostUsedAppList=function(e,t,n){return void 0===n&&(n=!1),this.dataService.callHcmOpenApi("hcm.home.widget.most.used.app.my",{category:e,target:t},"session,0.015",n)},e.prototype.addMostUsedApp=function(e,t,n,i,a,o,s){return void 0===o&&(o=!1),this.crudService.createItem({company_id:e,employee_id:t,app_id:n,is_service:o,sequence:i,category:a,target:s})},e.prototype.delMostUsedApp=function(e){return this.crudService.removeItem(e)},e.$inject=["$timeout","BaseCRUDService","dataService"],e}();window.app.service("homeWidgetMyAppService",i)},wxWo:function(e){e.exports=JSON.parse('{"tip":"","fields":[{"label":"轮播图图片","key":"carousel_data","component":"hc-input-upload-multiple","options":{"type":"img","length":5,"file_type":["jpeg"],"src_type":"img","upload_img":true}},{"key":"drill","label":"穿透定义","component":"hc-input-script","options":{"singleLine":true,"mode":"json","width":"col-12","placeholder":"请输入穿透定义","required":false}}]}')},xCJu:function(e,t){e.exports='<div class="group-list-item tg" ng-click="go_group(object.id)">\n        <div class="group-photo">\n            <ul>\n                <li ng-repeat="_p in object.members_photo  track by $index">\n                    <img class=\'mini-photo\' ng-src="{{_p|hcPhoto:16}}">\n                </li>\n            </ul>\n        </div>\n        <div class="content">\n            {{object.name}}\n            <span class="desc">（{{object.members}}&nbsp;人）</span>\n        </div>\n</div>\n'},yT68:function(e){e.exports=JSON.parse('{"tip":"","fields":[{"key":"title","label":"插件标题","component":"hc-input","options":{"data_type":"string","maxlength":40,"placeholder":"请输入插件标题","require":"true","singleLine":true}},{"label":"列表模型","key":"model","component":"hc-super-selector","options":{"data_type":"string","individual_name":"name_description","placeholder":"请输入列表模型","returnFormat":"name","selectorObject":"hcm.db.object","maxlength":40,"require":true,"singleLine":true}},{"key":"state","label":"列表场景","component":"hc-input","options":{"data_type":"string","maxlength":40,"placeholder":"请输入列表场景","singleLine":true}},{"key":"operates","label":"操作定义","component":"hc-input-json","options":{"data_type":"JSON","singleLine":true}}]}')},ysBk:function(e,t){e.exports='<div class="home-widget-emp-card-info-mobile" ng-init="init()" ng-if="client===\'mobile\'">\n    <div class="emp-card-sign">\n        <span class="text">{{emp_slogan}}</span>\n        <span class="icon icon-hcm-edit" ng-repeat="item in model_meta.extend"\n              ng-if="item[\'key\']==\'show_sign\'&& !item[\'value\'].hide" ng-click="editSlogan()"></span>\n    </div>\n    <hc-list-new class="emp-card-height"  model="list_model"></hc-list-new>\n</div>\n'},"z+oF":function(e,t){e.exports='<div class="home-widget">\n    <div class="home-widget-body">\n        <hc-announce></hc-announce>\n    </div>\n</div>'},z1A0:function(e,t){e.exports='<div ng-init="init()" ng-style="{\'height\':\'100%\'}">\n    <home-widget-common-container tabs="$ctrl.tabs" operates="$ctrl.operates" current-tab="$ctrl.currentTab">\n        <home-widget-body-list-container options="$ctrl.options" no-advance-query="false">\n        </home-widget-body-list-container>\n    </home-widget-common-container>\n</div>\n'},zZl0:function(e,t){e.exports='<div class="content flex" id="list_page">\n    <div class="model-list-style" ng-class="{\'view\':view}" ng-init="init()">\n        <div class="hcm-nav-content" ng-if="client===\'pc\'" style="height: auto;">\n            <div class="hcm-content flex" style="overflow-y: auto;">\n                <hc-article ng-model="model"></hc-article>\n            </div>\n        </div>\n    </div>\n</div>'},zlw7:function(e,t,n){"use strict";n.r(t);var i=n("FLGM"),a=n.n(i),o=n("5PDf"),s=n.n(o),l=n("lHQ6"),c=n.n(l),r=n("WxoT"),d=n.n(r),p=(n("PCLm"),n("+lK5"),n("qePV"),n("07d7"),n("JfAA"),n("KYsz")),u=n.n(p),m=n("o+MX"),_=n.n(m),g=n("526F"),h=n.n(g),v=n("ZbhI"),f=n.n(v),y=n("M5Mt"),w=n.n(y),b=n("mnMc"),x=n.n(b),k=n("guyh"),S=n.n(k),A=n("RXMP"),C=n.n(A),M=n("/FZm"),O=n.n(M),D=n("Kwsy"),j=n.n(D),P=n("mrSG"),E=n("8xC1"),I=n("k37F"),T=n.n(I),H=(n("vXi1"),n("UAhV")),R=(n("E0Ah"),n("gsMG"),n("XNyo"),n("+oHS")),B=n.n(R),L=function(){function e(e,t){this.$q=e,this.dataService=t}return e.prototype.pluginsConfig=function(){var e=this.$q.defer();return this.dataService.callHcmOpenApi("portal.plugins.config",{},null,!0).then((function(t){var n,i,o={};a()(t).call(t,(function(e){o[e.category_key]?o[e.category_key].children.push(e):(o[e.category_key]=angular.copy(e.category),o[e.category_key].children=[e])})),e.resolve(s()(n=a()(i=B()(o)).call(i,(function(e){return o[e]}))).call(n,(function(e){return e.children.length>0})))})),e.promise},e.prototype.getPlugins=function(){return this.dataService.callHcmOpenApi("portal.plugins.list",{},null,!0)},e.prototype.getSharedPlugins=function(){return this.dataService.callHcmOpenApi("portal.plugins.share.list",{},null,!0)},e.prototype.getPersonalPlugins=function(){return this.dataService.callHcmOpenApi("portal.plugins.person.list",{},null,!0)},e.prototype.getMyPlugins=function(e){return void 0===e&&(e=!0),this.dataService.callHcmOpenApi("portal.plugins.my",{standard:e},null,!0)},e.prototype.modifyPlugins=function(e,t){return void 0===t&&(t=!0),this.dataService.callHcmOpenApi("portal.plugins.modify",{info:e,standard:t},null,!0)},e.prototype.resetPlugins=function(){return this.dataService.callHcmOpenApi("portal.plugins.reset",{},null,!0)},e.$inject=["$q","dataService"],e}();E.a.service("hcPluginsSettingService",L);n("DcX3");var z,W,U=document.getElementsByTagName("body")[0].getBoundingClientRect().width;U>1279&&U<1680?(z=42,W=10):U>1679&&U<1920?(z=52,W=12):U>1919?(z=62,W=12):(z=30,W=10);var F=function(){function e(e,t,n,i,a,o,s,l){this.$scope=e,this.$rootScope=t,this.$element=n,this.hcPluginsSettingService=i,this.contextService=a,this.$hcDialog=o,this.dataToolService=s,this.hcAutoCopyService=l,this.resizeConfig={startFlag:!1,position:{startX:0,startY:0,startWidth:0,startHeight:0},operatingPluginElement:null},this.dragConfig={startFlag:!1,position:{startX:0,startY:0,startLeft:0,startTop:0},operatingPluginElement:null}}return e.prototype.$onInit=function(){var e,t,n,i,a=this;this.roles=null!==(t=null===(e=this.contextService.getContext("auth"))||void 0===e?void 0:e.roles)&&void 0!==t?t:{},this.is_admin=null===(n=this.roles)||void 0===n?void 0:n.onlyoneowner,this.is_onlyoneowner=null===(i=this.roles)||void 0===i?void 0:i.onlyoneowner;var o=document.getElementsByClassName("category-content")[0].getBoundingClientRect().width;this.grid=Math.min(c()((o/24).toString(),10),70),this.getMyPlugins(),j()((function(){a.calcPlugin(["public","private"])}),300),this.setOperate(),this.sortable_config={sort:!1,animation:300},this.$scope.$on("collapse-menu-plugins",(function(e,t){var n=a.getCurMaxRow(a.publicPlugins)-1,i=a.getCurMaxRow(a.privatePlugins)-1;if(t){var o,s;a.calcPlugin(["public","private"]),O()(o=a.$element).call(o,"#public").height(n*a.grid),O()(s=a.$element).call(s,"#private").height(i*a.grid)}else{var l,r,d,p,u=24*(a.grid+7.5);O()(l=a.$element).call(l,".hc-plugins-setting").css("width",u),O()(r=a.$element).call(r,"#public").height(n*(a.grid+7.5)),O()(d=a.$element).call(d,"#private").height(i*(a.grid+7.5)),C()(p=["public","private"]).call(p,(function(e){var t,n;O()(t=O()(n=a.$element).call(n,"#"+e)).call(t,".plugin").each((function(e,t){var n=c()(t.getAttribute("data-size-x"),10)*(a.grid+7.5)-W,i=c()(t.getAttribute("data-size-y"),10)*(a.grid+7.5)-W,o=(c()(t.getAttribute("data-col"),10)-1)*(a.grid+7.5)+W/2,s=(c()(t.getAttribute("data-row"),10)-1)*(a.grid+7.5)+W/2;t.setAttribute("style","width:"+n+"px;height:"+i+"px;left:"+o+"px;top:"+s+"px")}))}))}}))},e.prototype.isPublicShow=function(){return!S()(this.sortable_config)||"public"===this.settingType},e.prototype.isPrivateShow=function(){return!S()(this.sortable_config)||"private"===this.settingType},e.prototype.getMyPlugins=function(){var e=this;this.hcPluginsSettingService.getMyPlugins(!1).then((function(t){var n,i;e.privatePlugins=t.person,e.publicPlugins=t.share;var a=e.getCurMaxRow(e.publicPlugins)-1;O()(n=e.$element).call(n,"#public").height(a*e.grid);var o=e.getCurMaxRow(e.privatePlugins)-1;O()(i=e.$element).call(i,"#private").height(o*e.grid)}))},e.prototype.calcPlugin=function(e){var t,n=this;O()(t=this.$element).call(t,".hc-plugins-setting").css("width",24*this.grid),C()(e).call(e,(function(e){var t,i;O()(t=O()(i=n.$element).call(i,"#"+e)).call(t,".plugin").each((function(e,t){var i=c()(t.getAttribute("data-size-x"),10)*n.grid-W,a=c()(t.getAttribute("data-size-y"),10)*n.grid-W,o=(c()(t.getAttribute("data-col"),10)-1)*n.grid+W/2,s=(c()(t.getAttribute("data-row"),10)-1)*n.grid+W/2;t.setAttribute("style","width:"+i+"px;height:"+a+"px;left:"+o+"px;top:"+s+"px")}))}))},e.prototype.removePluginStyle=function(e){var t,n,i;O()(t=this.$element).call(t,".hc-plugins-setting").removeAttr("style"),O()(n=O()(i=this.$element).call(i,"#"+e)).call(n,".plugin").each((function(e,t){t.removeAttribute("style")}))},e.prototype.modifyPlugins=function(e){var t=this;this.hcPluginsSettingService.modifyPlugins(e||this.plugins,!1).then((function(e){t.plugins=e,t.$rootScope.show_warning("修改成功")}))},e.prototype.resetPlugins=function(){var e=this;this.hcPluginsSettingService.resetPlugins().then((function(t){e.privatePlugins=e.plugins=t,e.$rootScope.show_warning("修改成功")}))},e.prototype.setOperate=function(){this.portal_operate=[{key:"adjust_layout",label:"调整共享布局",click:this.adjust_share_layout,show:this.is_admin},{key:"adjust_layout",label:"调整个人布局",click:this.adjust_private_layout,show:!0}]},e.prototype.add_plugins=function(){var e=this,t=this;this.$hcDialog.getDialog({controller:"portalPluginsSetting",template:n("uMe+")}).params({}).title("新增插件").show().then((function(n){var i,a,o;if(console.log(n),x()(i=["app_list","time_my_unusual"]).call(i,null===(o=null==n?void 0:n.category)||void 0===o?void 0:o.key)&&O()(a=e.plugins).call(a,(function(e){return e.category_key===n.category.key})))e.$rootScope.show_warning("主页中已经存在“"+n.category.label+"”插件");else{var s,l;"dashboard"===n.category.key?(s=8,l=6):"message"===n.category.key?(s=8,l=4):"calendar"===n.category.key?(s=8,l=8):"app_list"===n.category.key?(s=12,l=6):(s=6,l=4);var c=e.getCurMaxRow();n.params=Object(P.a)({sizeX:s,sizeY:l,col:1,row:c},n.params),n.is_dynamic&&(n.params.is_dynamic=n.is_dynamic,n.params.message_show_sort=n.message_show_sort),"public"===t.settingType?n.shared_type="public":n.shared_type="private",t.plugins.push(n)}}))},e.prototype.copy_plugin_config=function(e){this.$rootScope.show_warning("已复制到剪贴板")},e.prototype.delete_plugin=function(e){var t,n;w()(t=this.plugins).call(t,f()(n=this.plugins).call(n,e),1)},e.prototype.edit_plugin=function(e,t){var n=this,i=Object(P.a)({"home-widget-message":H.a},this.dataToolService.getWidget());"dashboard_child"===e.key?this.$hcDialog.getDialog(i[e.category.plugin]).params(e.params).show().then((function(e){this.plugins[t]=e})):"count_data"===e.key?this.$hcDialog.getDialog(i[e.category.plugin]).params(e.params).show().then((function(e){n.plugins[t].params=e.params})):"hcm_dashboard_child"===e.key&&this.$hcDialog.getDialog(i[e.category.plugin]).params(e.params).show().then((function(t){h()(e,t)}))},e.prototype.adjust_share_layout=function(e){var t;e.sortable_config.sort=!0,e.settingType="public",e.removePluginStyle(e.settingType),e.plugins=e.publicPlugins,e.temPlugins=JSON.parse(d()(e.publicPlugins));var n=O()(t=e.$element).call(t,"#public");0===n.height()?n.height(8*z):n.height(n.height()+z)},e.prototype.adjust_private_layout=function(e){var t;e.sortable_config.sort=!0,e.settingType="private",e.removePluginStyle(e.settingType),e.plugins=e.privatePlugins,e.temPlugins=JSON.parse(d()(e.privatePlugins));var n=O()(t=e.$element).call(t,"#private");0===n.height()?n.height(8*z):n.height(n.height()+z)},e.prototype.cancel_adjust_layout=function(){var e,t;this.sortable_config.sort=!1,"public"===this.settingType?this.publicPlugins=this.temPlugins:this.privatePlugins=this.temPlugins;var n=this.getCurMaxRow(this.temPlugins);("public"===this.settingType?O()(e=this.$element).call(e,"#public"):O()(t=this.$element).call(t,"#private")).height((n-1)*this.grid),this.calcPlugin([this.settingType])},e.prototype.save_adjust_layout=function(){var e,t,n;if(this.checkAllPluginsIsOverlap())this.$rootScope.show_warning("插件有重叠，请调整后再保存");else{var i=_()(e=this.publicPlugins).call(e,this.privatePlugins);this.modifyPlugins(i),this.sortable_config.sort=!1;var a=this.getCurMaxRow();("public"===this.settingType?O()(t=this.$element).call(t,"#public"):O()(n=this.$element).call(n,"#private")).height((a-1)*this.grid),this.calcPlugin([this.settingType])}},e.prototype.checkAllPluginsIsOverlap=function(){for(var e=0;e<this.plugins.length;e++)for(var t=e+1;t<this.plugins.length;t++)if(this.checkIsOverlap(this.plugins[e].params,this.plugins[t].params))return!0;return!1},e.prototype.checkIsOverlap=function(e,t){return e.col+e.sizeX>t.col&&t.col+t.sizeX>e.col&&e.row+e.sizeY>t.row&&t.row+t.sizeY>e.row},e.prototype.mouseUp=function(e){var t,n,i;(this.resizeConfig.startFlag||this.dragConfig.startFlag)&&(this.resizeConfig.startFlag&&(this.resizeEnd(),i=this.getCurMaxRow()),this.dragConfig.startFlag&&(this.dragEnd(),i=this.getCurMaxRow()),("public"===this.settingType?O()(t=this.$element).call(t,"#public"):O()(n=this.$element).call(n,"#private")).height((i+3)*z))},e.prototype.getCurMaxRow=function(e){var t;return u()(t=e||this.plugins).call(t,(function(e,t){var n=t.params.row+t.params.sizeY;return n>e&&(e=n),e}),1)},e.prototype.mouseMove=function(e){this.resizeConfig.startFlag?this.resizeMove(e):this.dragConfig.startFlag&&this.dragMove(e)},e.prototype.resizeStart=function(e,t){e.stopPropagation(),this.resizeIndex=t,this.resizeConfig.startFlag=!0,this.resizeConfig.position.startX=e.clientX,this.resizeConfig.position.startY=e.clientY,this.resizeConfig.operatingPluginElement=e.currentTarget.parentElement.parentElement,this.resizeConfig.position.startWidth=this.resizeConfig.operatingPluginElement.clientWidth,this.resizeConfig.position.startHeight=this.resizeConfig.operatingPluginElement.clientHeight},e.prototype.resizeMove=function(e){if(this.resizeConfig.startFlag){var t=e.clientX-this.resizeConfig.position.startX,n=this.resizeConfig.position.startWidth+t,i=e.clientY-this.resizeConfig.position.startY,a=this.resizeConfig.position.startHeight+i;"app_list"!==this.plugins[this.resizeIndex].category.key&&(this.resizeConfig.operatingPluginElement.style.width=n+"px"),this.resizeConfig.operatingPluginElement.style.height=a+"px"}},e.prototype.resizeEnd=function(){var e;this.resizeConfig.startFlag=!1;var t=this.resizeConfig.operatingPluginElement.clientWidth,n=this.resizeConfig.operatingPluginElement.clientHeight,i=Math.floor((t-this.resizeConfig.position.startWidth)/z),a=(t-this.resizeConfig.position.startWidth)%z;(a>-(z-W)&&a<0||a>W)&&i++;var o=Math.floor((n-this.resizeConfig.position.startHeight)/z),s=(n-this.resizeConfig.position.startHeight)%z;(s>-(z-W)&&s<0||s>W)&&o++;var l,c,r=Number(this.resizeConfig.operatingPluginElement.getAttribute("data-size-x")),d=Number(this.resizeConfig.operatingPluginElement.getAttribute("data-size-y"));this.resizeConfig.operatingPluginElement.style.width="",this.resizeConfig.operatingPluginElement.style.height="","dashboard"===this.plugins[this.resizeIndex].category.key?(l=8,c=6):"message"===this.plugins[this.resizeIndex].category.key?(l=8,c=4):"calendar"===this.plugins[this.resizeIndex].category.key?(l=8,c=8):(l=6,c=4);var p=Math.max(r+i,l),u=Math.max(d+o,c);this.plugins[this.resizeIndex].params.col+p>24&&(p=25-this.plugins[this.resizeIndex].params.col),"app_list"===this.plugins[this.resizeIndex].category.key?this.plugins[this.resizeIndex].params.sizeX=r:this.plugins[this.resizeIndex].params.sizeX=p,this.plugins[this.resizeIndex].params.sizeY=u,~f()(e=["dashboard","hcm_dashboard","hcm_dashboard_child"]).call(e,this.plugins[this.resizeIndex].category.key)&&this.$rootScope.$broadcast("onContainerResize"),this.resizeConfig.operatingPluginElement=null,this.resizeIndex=NaN},e.prototype.dragStart=function(e,t){e.stopPropagation(),this.dragIndex=t,this.dragConfig.startFlag=!0,this.dragConfig.position.startX=e.clientX,this.dragConfig.position.startY=e.clientY,this.dragConfig.operatingPluginElement=e.currentTarget.parentElement,this.dragConfig.position.startLeft=this.dragConfig.operatingPluginElement.offsetLeft,this.dragConfig.position.startTop=this.dragConfig.operatingPluginElement.offsetTop},e.prototype.dragMove=function(e){if(this.dragConfig.startFlag){var t=e.clientX-this.dragConfig.position.startX,n=e.clientY-this.dragConfig.position.startY,i=this.dragConfig.position.startLeft+t,a=this.dragConfig.position.startTop+n;this.dragConfig.operatingPluginElement.style.left=i+"px",this.dragConfig.operatingPluginElement.style.top=a+"px"}},e.prototype.dragEnd=function(){this.dragConfig.startFlag=!1;var e=this.dragConfig.operatingPluginElement.offsetLeft,t=this.dragConfig.operatingPluginElement.offsetTop,n=Math.round((e-this.dragConfig.position.startLeft)/z),i=Math.round((t-this.dragConfig.position.startTop)/z),a=Number(this.dragConfig.operatingPluginElement.getAttribute("data-col")),o=Number(this.dragConfig.operatingPluginElement.getAttribute("data-row"));this.dragConfig.operatingPluginElement.style.left="",this.dragConfig.operatingPluginElement.style.top="";var s=Math.max(a+n,1),l=Math.max(o+i,1);this.plugins[this.dragIndex].params.sizeX+s>24&&(s=25-this.plugins[this.dragIndex].params.sizeX),this.plugins[this.dragIndex].params.row=l,this.plugins[this.dragIndex].params.col=s,this.dragConfig.operatingPluginElement=null,this.dragIndex=NaN},e.$inject=["$scope","$rootScope","$element","hcPluginsSettingService","contextService","$hcDialog","dataToolService","hcAutoCopyService"],e}();E.a.component("hcPluginsSetting",{bindings:{model:"<"},controller:F,template:T.a});n("rB9j"),n("EnZy");var q=n("6UaR"),Y=n.n(q),N=n("tvXb"),J=n.n(N),K=(n("zIl2"),n("4mDm"),n("5s+n"),n("PKPk"),n("3bBZ"),n("OBge")),Q=n.n(K),G=function(){function e(e,t){this.dataService=e,this.$q=t}return e.prototype.getPlugins=function(e,t,n){return Object(P.c)(this,void 0,void 0,(function(){var i,o,s=this;return Object(P.e)(this,(function(l){switch(l.label){case 0:return void 0===t?[3,2]:[4,this.dataService.callHcmOpenApi("hcm.workbench.get.portal",{target:"pc"===e?0:1,id_:t,range_type:n})];case 1:return o=l.sent(),[3,4];case 2:return[4,this.dataService.callHcmOpenApi("portal.plugins.class.list",{target:"pc"===e?0:1})];case 3:o=l.sent(),l.label=4;case 4:return i=o,t?[4,Q.a.all(a()(i).call(i,(function(e){return Object(P.c)(s,void 0,void 0,(function(){var t,n;return Object(P.e)(this,(function(i){switch(i.label){case 0:return t={},e.board_number?[4,this.dataService.callHcmOpenApi("report.platform.info.by.number",{number:e.board_number,default:null})]:[3,2];case 1:return n=i.sent(),t={context:Object(P.a)(Object(P.a)({},e.context_params),e.extra_context_params),components:null==n?void 0:n.meta_info.components,color:null==n?void 0:n.meta_info.color,groups:(null==n?void 0:n.meta_info.groups)||[]},[3,3];case 2:t={context:e.context_params,components:e.params,groups:e.groups||[]},i.label=3;case 3:return t&&0!==B()(t).length?[2,t]:[2,{}]}}))}))})))]:[3,6];case 5:return[2,l.sent()];case 6:return[2,a()(i).call(i,(function(e){var t=e.params;return t&&0!==B()(t).length?{components:t}:[]}))]}}))}))},e.$inject=["dataService","$q"],e}();window.app.service("showPluginsService",G);n("vjaz"),n("mRH6");var V=n("UtpJ"),X=n.n(V),Z=n("eLKs"),ee=n.n(Z),te=n("T7v6"),ne=n.n(te),ie=(n("/Zuj"),n("w2Ej"),n("eR5k")),ae=function(){function e(e,t,n,i,o,s,l,c,r,d,p){this.$scope=e,this.$rootScope=t,this.contextService=n,this.IndexService=i,this.homeWidgetMyAppService=o,this.CompanyMetaService=s,this.templateService=l,this.$q=c,this.$filter=r,this.$hcDialog=d,this.$element=p,this.page_index=1,this.hideMobile={target:"mobile"},this.client=window.client,this.adjust_my_app=function(){var e=this,t=this.auth.employee.id,n=this.auth.company.id,i=this;this.$hcDialog.getDialog(ie.a).params({category:"myService"===this.currentTab?0:1}).title("myService"===this.currentTab?this.$filter("translate")("common_home_widget_my_app_setting_service"):this.$filter("translate")("common_home_widget_my_app_setting_app")).show().then((function(o){var s,l,c,r,d,p=_()(s=_()(l=a()(c=o.data_to_add).call(c,(function(a){return i.homeWidgetMyAppService.crudService.createItem({company_id:n,employee_id:t,app_id:a.id,is_service:a.is_service,sequence:a.sequence,category:"myService"===e.currentTab?0:1,target:0})}))).call(l,a()(r=o.data_to_modify).call(r,(function(e){return e.favor_id&&i.homeWidgetMyAppService.crudService.editItem(e.favor_id,{company_id:n,employee_id:t,app_id:e.id,sequence:e.sequence})})))).call(s,a()(d=o.data_to_del).call(d,(function(e){return e.id&&i.homeWidgetMyAppService.crudService.removeItem(e.id)})));i.$q.all(p).then((function(){i.$rootScope.show_warning(e.$filter("translate")("common_home_widget_my_app_modify_success")),i.$rootScope.$broadcast("refresh_most_used_app",i)}))}))},this.go_app=function(e,t){if("pc"!==window.client||e.state||!e.href)if(null==t||t.preventDefault(),this.beforeJumpToApp(e),e.is_service)this.$rootScope.super_go("my_service_summary",{id:e.id});else if(e.url)window.open(e.url);else{var n={};try{"string"==typeof e.param?e.param&&(n=JSON.parse(e.param)):n=e.param}catch(e){}e.link?window.open(location.protocol+"//"+window.location.host+"/"+e.pathname+"#/"+e.link,"_self"):this.$rootScope.super_go(e.state,n,null,e.open_new_page||this.is_open_new_page)}else null==t||t.stopPropagation()},this.beforeJumpToApp=function(e,t){if(null==t||t.stopPropagation(),"show_dialog"!==e.state);else switch(e.param.dialog_name){case"chat_robot":this.$scope.$emit("chat-robot",e.param||{});break;default:this.$rootScope.show_warning("暂不支持")}},this.listenTouchSwipe=function(){var e,t,n,i,a,o=this,s=O()(e=this.$element).call(e,".app-list")[0],l=function(e){t=e.touches[0].pageX,n=e.touches[0].pageY};s.addEventListener("touchstart",l);var c=function(e){i=e.touches[0].pageX,a=e.touches[0].pageY};s.addEventListener("touchmove",c);var r=function(e){var s=i-t,l=a-n;Math.abs(s)>Math.abs(l)&&s>0?(e.preventDefault(),o.page_index>1&&o.changePage(o.page_index-1)):Math.abs(s)>Math.abs(l)&&s<0&&(e.preventDefault(),o.page_index<o.index_list.length&&o.changePage(o.page_index+1)),t=n=i=a=0};s.addEventListener("touchend",r),this.$scope.$on("destroy",(function(){s.removeEventListener("touchstart",l),s.removeEventListener("touchmove",c),s.removeEventListener("touchend",r)}))}}return e.prototype.$onInit=function(){var e,t,n,i,a,o,s,l,c,r,d,p=this;null===(a=this.boardCtrl)||void 0===a||a.componentRegister(this.options.key,this),this.tabs=[{key:"myService",label:this.$filter("translate")("common_home_widget_my_app_service"),func:ee()(e=this.tabChange).call(e,this)},{label:this.$filter("translate")("common_home_widget_my_app_frequent"),key:"myApplication",func:ee()(t=this.tabChange).call(t,this)}],this.operates=[{label:this.$filter("translate")("common_home_widget_my_app_setting"),key:"myService",func:ee()(n=this.adjust_my_app).call(n,this)},{label:this.$filter("translate")("common_home_widget_my_app_setting"),key:"myApplication",func:ee()(i=this.adjust_my_app).call(i,this)}],this.currentTab=this.tabs[0].key,this.auth=this.contextService.getContext("auth"),this.is_open_new_page="pc"===this.client&&(null!==(l=null===(s=null===(o=this.auth)||void 0===o?void 0:o.company_setting)||void 0===s?void 0:s.open_new_page)&&void 0!==l?l:null),this.app_title_description=null!==(d=null===(r=null===(c=this.auth)||void 0===c?void 0:c.company_setting)||void 0===r?void 0:r.app_title_description)&&void 0!==d?d:null,this.initMenu(),this.$scope.$on("refresh_most_used_app",(function(){p.getMostUsedApps()}))},e.prototype.tabChange=function(e){this.currentTab!==e&&(this.currentTab=e,this.initMenu())},e.prototype.initMenu=function(){var e=this;this.IndexService.getMyApplication("pc"===this.client?"pc":"mobile","list").then((function(t){var n=t;e.my_app_dic={},C()(n).call(n,(function(t){e.my_app_dic[t.id]?e.my_app_dic[t.id].push(t):e.my_app_dic[t.id]=[t]})),e.getMostUsedApps(),"mobile"===window.client&&e.listenTouchSwipe()}))},e.prototype.getMostUsedApps=function(){var e,t=this;this.homeWidgetMyAppService.getAllMostUsedAppList("myService"===this.currentTab?["myservice"]:["favorite"],"pc"===this.client?"pc":"mobile",null===(e=this.options)||void 0===e?void 0:e.role).then((function(e){var n,i,o,s,l=[];try{var c,r="string"==typeof e.role_apps?null!==(n=JSON.parse(e.role_apps||"{}").role_apps)&&void 0!==n?n:{}:null!==(i=e.role_apps)&&void 0!==i?i:{},d=null!==(s=null===(o=null==e?void 0:e.role_app_recommend)||void 0===o?void 0:o.template_config)&&void 0!==s?s:{};angular.extend(r,d),l=u()(c=B()(t.auth.roles)).call(c,(function(e,n){var i=t.$filter("getValue")(r,[n]);return null==i||C()(i).call(i,(function(e){e.from_role=!0})),_()(e).call(e,i||[])}),[])}catch(e){l=[]}var p=_()(l).call(l,e.personal_apps.list);t.app_list=[],a()(p).call(p,(function(e){var n,i=angular.copy(O()(n=t.my_app_dic[e.app_id]||[]).call(n,(function(t){return!!t.is_service==!!e.is_service})));t.$filter("isValidValue")(i)&&(i.from_role=e.from_role,t.app_list.push(i))})),t.refreshPaging()}))},e.prototype.refreshPaging=function(){var e,t,n=this;this.index_list=a()(e=Object(P.h)(Array(Math.ceil(this.app_list.length/8)))).call(e,(function(e,t){return t+1})),this.app_slice_list=a()(t=this.index_list).call(t,(function(e){var t;return X()(t=n.app_list).call(t,8*(e-1),8*e)})),this.index_list.length&&this.page_index>=this.index_list.length&&this.changePage(this.index_list.length)},e.prototype.changePage=function(e){this.page_index=e,$(".home-widget-my-app .item-container").css({left:"-"+100*(e-1)+"%"}),"mobile"===window.client&&this.$scope.$apply()},e.$inject=["$scope","$rootScope","contextService","IndexService","homeWidgetMyAppService","CompanyMetaService","templateService","$q","$filter","$hcDialog","$element"],e}();window.app.component("homeWidgetMyApp",{bindings:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"},controller:ae,template:ne.a});var oe=n("TTrh"),se=n.n(oe),le=n("wd/R"),ce=n("UoIc"),re=n.n(ce),de=(n("v8yx"),n("xWLQ"),function(){function e(e,t,n,i,a,o,s,l){this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.$filter=a,this.dataService=o,this.contextService=s,this.templateService=l,this.client=window.client}return e.prototype.$onInit=function(){var e,t,n,i;return Object(P.c)(this,void 0,void 0,(function(){var a,o,s,l,c,r,d,p,u,m=this;return Object(P.e)(this,(function(_){switch(_.label){case 0:return null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.options.key,this),[4,this.templateService.getTemplate("time_attend_calendar_config.json")];case 1:return a=_.sent(),this.go_state=null===(i=null===(n=null===(t=null==a?void 0:a.template_config)||void 0===t?void 0:t.go_unusual)||void 0===n?void 0:n.new_url)||void 0===i||i,[4,this.getCountMeta()];case 2:return o=_.sent(),this.offset_days=o.offset_days,[4,this.get_mon_range()];case 3:return s=_.sent(),l=s.begin_moment,c=s.end_moment,this.begin_date=l.format("YYYY-MM-DD"),this.end_date=c.format("YYYY-MM-DD"),this.year_month=c.format("YYYY-MM"),r=l.split("-")[1]+"."+l.split("-")[2],d=c.split("-")[1]+"."+c.split("-")[2],p=r+"-"+d,this.tabs=[{key:"my_unusual",label:this.$filter("translate")("attendance_abnormality"),postscript:{content:"（"+p+"）",target:"mobile"}}],this.tip=this.$filter("translate")("time_for_statistics")+": "+p,this.operates=[{key:"my_unusual",label:this.$filter("translate")("to_handle"),target:"mobile",func:function(){m.goToMyUnusual()}}],u=this,[4,this.getCount(o)];case 4:return u.count_list=_.sent(),[2]}}))}))},e.prototype.get_mon_range=function(){return Object(P.c)(this,void 0,void 0,(function(){var e;return Object(P.e)(this,(function(t){switch(t.label){case 0:return le().subtract(this.offset_days,"day"),this.contextService.getContext("auth").company_setting.TIME_MONTH_RANGE,[4,this.dataService.callHcmOpenApi("get.current.time.month.range",{offset_days:this.offset_days})];case 1:return[2,{begin_moment:(e=t.sent())[0],end_moment:e[1]}]}}))}))},e.prototype.getCountMeta=function(){var e,t,n,i,o,s,l,c,r,d,p;return Object(P.c)(this,void 0,void 0,(function(){var u,m,_,g,h,v,f;return Object(P.e)(this,(function(y){switch(y.label){case 0:return u=this.go_state?"emp":"myUnusual",m=this.go_state?"AttendDataDetailEmpStatistics":"AttendData",[4,this.dataService.callHcmOpenApi("hcm.model.meta",{biz_type:"list",model:m,state:u},"application")];case 1:return _=y.sent(),g=null!==(t=null===(e=null==_?void 0:_.list_config)||void 0===e?void 0:e.category_field)&&void 0!==t?t:"attend_detail.attend_item",h=0<=(h=null!==(s=null===(o=null===(i=null===(n=null==_?void 0:_.extend)||void 0===n?void 0:O()(n).call(n,(function(e){return"offset_days"===(null==e?void 0:e.key)})))||void 0===i?void 0:i.value)||void 0===o?void 0:o.offset_days)&&void 0!==s?s:0)&&h<=31?se()(h):0,v=null!==(r=null===(c=null===(l=null==_?void 0:_.extend)||void 0===l?void 0:O()(l).call(l,(function(e){return"result_class_map"===(null==e?void 0:e.key)})))||void 0===c?void 0:c.value)&&void 0!==r?r:{work_early:"yellow-theme",work_late:"orange-theme",work_absence:"red-theme"},f=null!==(p=null===(d=null==_?void 0:_.list_config)||void 0===d?void 0:d.category_list)&&void 0!==p?p:[{id:"work_absence",name:"旷工"},{id:"work_late",name:"迟到"},{id:"work_early",name:"早退"}],f=a()(f).call(f,(function(e){var t;return Object(P.a)(Object(P.a)({},e),{class:null!==(t=null==v?void 0:v[e.id])&&void 0!==t?t:"red-theme"})})),[2,{category_field:g,category_list:f,offset_days:h}]}}))}))},e.prototype.getCount=function(e){return Object(P.c)(this,void 0,void 0,(function(){var t,n,i,o,s,l;return Object(P.e)(this,(function(c){switch(c.label){case 0:return t=e.category_field,n=e.category_list,i=this.go_state?"emp":"myUnusual",o=this.go_state?"AttendDataDetailEmpStatistics":"AttendData",[4,this.dataService.callHcmOpenApi("hcm.model.count",{count_by:"id",group_by:[t],model:o,filter_dict:{date:{gte:this.begin_date,lte:this.end_date},employee_id:this.contextService.getContext("auth").employee.id},page_size:999,extra_property:{state:i}})];case 1:return s=c.sent(),l=this.$filter("toObj")(s.list,t),[2,a()(n).call(n,(function(e){var t;return e.count=(null===(t=l[e.id])||void 0===t?void 0:t.id)||0,e}))]}}))}))},e.prototype.goToMyUnusual=function(){return Object(P.c)(this,void 0,void 0,(function(){var e;return Object(P.e)(this,(function(t){return this.go_state?(e={model:"AttendDataDetailEmpStatistics",meta_state:"emp",advance_filter_dict:{begin_date:this.begin_date,end_date:this.end_date}},this.$rootScope.super_go("common_model_category_list",e)):(e="pc"===this.client?{advance_filter_dict:{begin_date:this.begin_date,end_date:this.end_date}}:{advance_filter_dict:{year_month:this.year_month}},this.$rootScope.super_go("time_my_unusual",e)),[2]}))}))},e.$inject=["$scope","$rootScope","$element","$timeout","$filter","dataService","contextService","templateService"],e}());window.app.component("homeWidgetTimeMyUnusual",{controller:de,bindings:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"},template:re.a});var pe=n("PH9r"),ue=n.n(pe),me=n("yDEG"),_e=(n("DOKX"),n("0xni"),n("wxWo")),ge=n("VxaH"),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(P.d)(t,e),t.prototype.getMeta=function(){return Object(P.c)(this,void 0,Q.a,(function(){return Object(P.e)(this,(function(e){return this,[2,_e.fields]}))}))},t}(ge.a),ve=function(e){function t(t,n,i,a,o,s){var l=e.call(this,n,i)||this;return l.$scope=t,l.hcDialog=n,l.timeout=i,l.dataService=a,l.element=o,l.$filter=s,l}return Object(P.d)(t,e),t.prototype.$onInit=function(){var e,t,n;return Object(P.c)(this,void 0,void 0,(function(){var i,o=this;return Object(P.e)(this,(function(s){var l,c;return i=this,this.carousel_model=[],null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key,this),this.imgArr=a()(l=(null===(n=null===(t=this.options)||void 0===t?void 0:t.carousel_data)||void 0===n?void 0:n.split("#"))||[]).call(l,(function(e){return""+window.cdn_domain+window.hcm_wengen+(o.options.img_handler||"/img")+"?index="+e+window.hcm_env_post})),C()(c=this.imgArr).call(c,(function(e){i.carousel_model.push({index:e})})),this.$scope.$watch("$ctrl.options",(function(e,t){e!==t&&o.$onInit()}),!0),[2]}))}))},t.prototype.$onResize=function(){this.$scope.$broadcast("collapse-menu-plugins")},t.prototype.getSettingPanel=function(){return Object(me.c)(he)},t.prototype.$onRender=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(t){switch(t.label){case 0:return[4,e.prototype.$onRender.call(this)];case 1:return t.sent(),[2]}}))}))},t.$inject=["$scope","$hcDialog","$timeout","dataService","$element","$filter"],t}(me.a);window.app.component("homeWidgetCarousel",{bindings:{options:"<",key:"<",context:"="},require:{boardCtrl:"?^hcmBoard"},template:ue.a,controller:ve});var fe=n("z+oF"),ye=n.n(fe),we=(n("SwrD"),n("2dDx")),be=n.n(we),$e=(n("bkjC"),n("sMBO"),function(){function e(e,t){this.$timeout=e,this.dataService=t}return e.prototype.getData=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){var t;switch(e.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.model.list",{model:"Announce",filter_str:null,filter_dict:{publish_state:1},page_index:1,page_size:10,extra_property:{state:"query",filter_params:{meta_state:"query"},only_list:!0},biz_type:"list"})];case 1:return[2,a()(t=e.sent().list).call(t,(function(e){return{announce_time:e.announce_time,name:e.name,category:e.category,id:e.id}}))]}}))}))},e.prototype.getAnnounce=function(e){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(t){switch(t.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.model.get",{model:"Announce",fields:null,from_:"view",id_:e,state:"query"})];case 1:return[2,t.sent()]}}))}))},e.$inject=["$timeout","dataService"],e}());window.app.service("hcAnnounceService",$e);var xe=n("mJ0u"),ke=function(){function e(e,t,n,i,a){this.$scope=e,this.$rootScope=t,this.$element=n,this.$hcDialog=i,this.hcAnnounceService=a,this.client=window.client}return e.prototype.$onInit=function(){return Object(P.c)(this,void 0,void 0,(function(){var e,t,i=this;return Object(P.e)(this,(function(a){switch(a.label){case 0:return e=this,t=this,[4,this.hcAnnounceService.getData()];case 1:return t.arrAnnounce=a.sent(),0===this.arrAnnounce.length&&(this.arrAnnounce=[{name:"暂无公告"}]),j()((function(){n.e(92).then(n.bind(null,"TaHA")).then((function(t){var n=t.Swiper,a=t.Autoplay;n.use([a]),i.container=new n(".announce-container",{allowTouchMove:!0,direction:"vertical",loop:!0,autoplay:{delay:3e3,disableOnInteraction:!1},on:{click:function(t){var n=t.clickedSlide,a=n.getAttribute("data-id");a&&n&&("pc"===i.client?i.$rootScope.super_go("common_model_single_view",{id:a,model:"Announce",meta_state:"query"}):e.$hcDialog.getDialog(Object(xe.a)("Announce","query")).params({id:a}).show())}}})}))}),0),this.$scope.$on("collapse-menu-plugins",(function(){j()((function(){var t;null===(t=e.container)||void 0===t||t.update()}),100)})),[2]}}))}))},e.prototype.stopSwipe=function(){this.container.autoplay.stop()},e.prototype.startSwipe=function(){this.container.autoplay.start()},e.$inject=["$scope","$rootScope","$element","$hcDialog","hcAnnounceService"],e}();window.app.component("hcAnnounce",{bindings:{model:"<"},controller:ke,template:be.a});var Se=function(){function e(){}return e.prototype.$onInit=function(){var e;null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.options.key,this)},e}();window.app.component("homeWidgetAnnounce",{bindings:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"},template:ye.a,controller:Se});var Ae=n("QQ65"),Ce=n.n(Ae),Me=(n("PPZ0"),function(){function e(e,t){this.$timeout=e,this.$hcDialog=t}return e.prototype.getMyData=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){switch(e.label){case 0:return[4,this.$hcDialog.getDialog().params({}).show()];case 1:return[2,e.sent()]}}))}))},e.$inject=["$timeout","$hcDialog"],e}());window.app.service("homeWidgetUserGuideListService",Me);n("zYGM");var Oe=function(){function e(e,t,n,i){var a=this;this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.client=window.client,this.model="UserGuide",this.tabs=[{key:"test",label:"使用指引"}],this.operates=[{label:"更多",key:"test",func:function(){a.$rootScope.super_go("user_guide",{meta_state:"viewpage"})}}],this.currentTab=this.tabs[0].key}return e.prototype.$onInit=function(){var e;null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.options.key,this)},e.$inject=["$scope","$rootScope","$element","$timeout"],e}();window.app.component("homeWidgetUserGuideList",{controller:Oe,template:Ce.a,bindings:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"}});var De=n("5Y2l"),je=n.n(De),Pe=(n("66N3"),function(){function e(e,t){this.$timeout=e,this.$hcDialog=t}return e.prototype.getMyData=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){switch(e.label){case 0:return[4,this.$hcDialog.getDialog().params({}).show()];case 1:return[2,e.sent()]}}))}))},e.$inject=["$timeout","$hcDialog"],e}());window.app.service("homeWidgetIndustryInformationListService",Pe);var Ee=n("p4uW"),Ie=function(){function e(e,t,n,i){var a=this;this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.client=window.client,this.model="IndustryInformation",this.tabs=[{key:"test",label:"行业资讯"}],this.operates=[{label:"更多",key:"test",func:function(){a.$rootScope.super_go("industry_information",{meta_state:"viewpage"})}}],this.currentTab=this.tabs[0].key}return e.prototype.$onInit=function(){var e;null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key,this)},e.prototype.$onResize=function(){},e.prototype.getSettingPanel=function(){return Object(me.c)(Ee.a)},e.prototype.$onRender=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){return[2]}))}))},e.$inject=["$scope","$rootScope","$element","$timeout"],e}();window.app.component("homeWidgetIndustryInformationList",{controller:Ie,template:je.a,bindings:{key:"<",context:"=",options:"<"},require:{boardCtrl:"?^hcmBoard"}});n("H3Dw");var Te=n("a0dU"),He=n.n(Te),Re=(n("ls82"),n("SPx3")),Be=n.n(Re),Le=n("1hbj"),ze=(n("srGB"),n("0Xdj"));n("9Fhn"),n("9DwR"),n("zl2E");window.app.directive("homeWidgetEmpCardNew",[function(){return{restrict:"EA",template:n("EC8D"),scope:{options:"="},controller:[function(){}]}}]),window.app.directive("homeWidgetEmpCardNewPc",[function(){return{restrict:"EA",template:n("/kcl"),scope:{options:"="},controller:["$scope","$state","$rootScope","$hcDialog","$controller","contextService","BaseCRUDService","dataService","$filter",function(e,t,n,i,o,l,r,d,p){var u=e.options.is_base?"BaseEmployee":"Employee",m=r.getModelService(u);o(ze.a,{$scope:e,CRUDService:m,InfoDialog:Object(Le.a)(u)}),e.initBeforeAsync=Be()(He.a.mark((function t(){var n,i,a,o,l,c;return He.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.options.hide_slogan){t.next=3;break}t.next=17;break;case 3:return t.next=5,d.callHcmOpenApi("hcm.model.list",{model:"EmployeeSlogan",filter_dict:{employee_id:e.auth.employee.id}});case 5:if(n=t.sent,e.slogan_data=n.list,!e.slogan_data.length){t.next=11;break}e.emp_slogan=n.list[0].slogan,t.next=17;break;case 11:return t.next=13,d.callHcmOpenApi("hcm.model.meta",{model:"EmployeeSlogan",biz_type:"info",state:"home"});case 13:l=t.sent,c=s()(i=l.extend).call(i,(function(e){return"company_default"===e.key})),e.company_default=c.length>0?null===(a=c[0])||void 0===a||null===(o=a.value)||void 0===o?void 0:o.default:"",e.emp_slogan=e.company_default;case 17:case"end":return t.stop()}}),t)}))),e.setTitle=function(e){},e.getMetaState=function(){return"empCard"},e.getItemID=function(){return e.auth.employee.id},e.initAfter=function(){var n,i="mobile"===e.client?4:3;e.view_btn_model.$setShowMax(i),e.emp_id=t.params.id,e.extendModel={},a()(n=e.view_model.viewMeta.extend).call(n,(function(t){e.extendModel[t.key]=t.value}))},e.individualParse=function(e){var t;return a()(t=e.fields).call(t,(function(e){if("photo"===e.key){var t=e.options.photo_size.split(",");switch(window.screen.width){case 1680:t[0]=c()(1.25*t[0]),t[1]=c()(1.25*t[1]);break;case 1920:t[0]=c()(1.5*t[0]),t[1]=c()(1.5*t[1])}e.options.photo_size=t[0]+","+t[1]}})),e},e.empProfile=function(){n.super_go("emp")},e.editSlogan=Be()(He.a.mark((function t(){var n;return He.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(Le.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)})))}]}}]),window.app.directive("homeWidgetEmpCardNewMobile",[function(){return{restrict:"EA",template:n("21L5"),scope:{},controller:["$scope","$state","$rootScope","$hcDialog","$controller","contextService","BaseCRUDService","dataService",function(e,t,n,i,a,o,l,c){var r=l.getModelService("Employee");a(ze.a,{$scope:e,CRUDService:r,InfoDialog:Object(Le.a)("Employee")}),e.initBeforeAsync=Be()(He.a.mark((function t(){var n,i,a,o,l,r,d;return He.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===(n=e.options)||void 0===n?void 0:n.hide_slogan)){t.next=3;break}t.next=20;break;case 3:return t.next=5,c.callHcmOpenApi("hcm.model.list",{model:"EmployeeSlogan",filter_dict:{employee_id:e.auth.employee.id}});case 5:return i=t.sent,t.next=8,c.callHcmOpenApi("message.unread.count",{});case 8:if(e.unread_count=t.sent,e.slogan_data=i.list,!e.slogan_data.length){t.next=14;break}e.emp_slogan=i.list[0].slogan,t.next=20;break;case 14:return t.next=16,c.callHcmOpenApi("hcm.model.meta",{model:"EmployeeSlogan",biz_type:"info",state:"home"});case 16:r=t.sent,d=s()(a=r.extend).call(a,(function(e){return"company_default"===e.key})),e.company_default=d.length>0?null===(o=d[0])||void 0===o||null===(l=o.value)||void 0===l?void 0:l.default:"",e.emp_slogan=e.company_default;case 20:case"end":return t.stop()}}),t)}))),e.setTitle=function(e){},e.getFilterDict=function(){return{id:e.auth.employee.id}},e.getMetaState=function(){return"empNewCard"},e.editSlogan=Be()(He.a.mark((function t(){var n;return He.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(Le.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)}))),e.showProcessTask=Be()(He.a.mark((function t(){var n;return He.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDialog(Object(Le.a)("EmployeeSlogan","home")).size("small").show({mode:e.slogan_data.length?"edit":"new",data:e.slogan_data.length?e.slogan_data[0]:null,alter:{employee_id:e.auth.employee.id}});case 2:n=t.sent,e.emp_slogan=n.slogan;case 4:case"end":return t.stop()}}),t)}))),e.getItemID=function(){return e.auth.employee.id},e.empProfile=function(){n.super_go("user_profile")},e.empWorkflow=function(){n.super_go("workflow_center_pending")},e.unreadMessage=function(){n.super_go("messages_multi",{caption:"待处理",meta_state:"task",model:"Message",c_model:"Message"})}}]}}]);n("pMV1");window.app.directive("homeWidgetEmpCardSsc",[function(){return{restrict:"EA",template:n("WGhI"),scope:{},controller:["$scope","AuthService","$state","$element","$rootScope","$hcDialog","$controller","contextService","BaseCRUDService","dataService","$filter",function(e,t,n,i,o,s,l,r,d,p,u){var m,_,g=d.getModelService("Employee");l(ze.a,{$scope:e,CRUDService:g,InfoDialog:Object(Le.a)("Employee")}),e.iconUpOrDown=!0,e.changeIcon=function(){e.iconUpOrDown=!e.iconUpOrDown},e.openRobot=function(){e.$emit("chat-robot",{})},e.goEdit=function(){o.super_go("user_profile",{id:e.auth.employee.id})},e.model=!0,e.changeStatus=function(t){e.iconUpOrDown=!0,e.options.change(t.id).then((function(n){n&&(e.model=t.id)}))},e.go_pending=function(){o.super_go("workflow_center_pending")},e.options={list:[{id:0,name:"离线"},{id:1,name:"在线"}],change:(_=Be()(He.a.mark((function e(t){return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.callHcmOpenApi("hcm.model.action.params",{params:{status:t},model:"SSCWorkCenter",action:"change_seat_status"}));case 1:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)}),default:(m=Be()(He.a.mark((function e(){return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.callHcmOpenApi("hcm.model.action.params",{model:"SSCWorkCenter",action:"get_seat_status",params:{}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return m.apply(this,arguments)}),form_mode:"new"},e.undone=0,e.nowJobDays=0,e.daysOfInJob=0,e.nameAndJob="",e.types={},e.showStatus=!1,e.initBeforeAsync=Be()(He.a.mark((function e(){return He.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.setTitle=function(e){},e.getMetaState=function(){return"empCard"},e.getItemID=function(){return e.auth.employee.id},e.initAfter=function(){var i,o,s,l,c,r,d,u,m,_="mobile"===e.client?4:3;e.view_btn_model.$setShowMax(_),e.emp_id=n.params.id,e.extendModel={},a()(i=e.view_model.viewMeta.extend).call(i,(function(t){e.extendModel[t.key]=t.value})),e.options.default().then((function(t){e.model=t})),p.callHcmOpenApi("hcm.model.list",{model:"WorkFlowInstanceAssignment",extra_property:{state:"pending"},filter_dict:{"wf_inst_detail.wf_def_type":{in:["hand","wait"]},"wf_inst_detail.wf_def_key":{"not in":["submit"]},finish:null,"wf_inst.state":"running",state:0}}).then((function(t){t.count?e.undone=t.count>99?"99+":t.count:e.undone=0})),e.nowJobDays=null===(o=e.view_model.data)||void 0===o||null===(s=o.anniversary_title)||void 0===s?void 0:s.onduty_days,e.daysOfInJob=null===(l=e.view_model.data)||void 0===l||null===(c=l.anniversary_title)||void 0===c?void 0:c.entry_days,e.nameAndJob=e.view_model.data.name+"    "+e.view_model.data.position.name,e.types={type_1:null===(r=e.view_model.data)||void 0===r||null===(d=r.anniversary_title)||void 0===d?void 0:d.anniversary_title,type_2:null===(u=e.view_model.data)||void 0===u||null===(m=u.employee_dynamic_subset)||void 0===m?void 0:m.annual_title};try{t.checkRole("cm-ssc-manager"),e.showStatus=!0}catch(e){}try{t.checkRole("cm-ssc-seat"),e.showStatus=!0}catch(e){}},e.individualParse=function(e){var t;return a()(t=e.fields).call(t,(function(e){if("photo"===e.key){var t=e.options.photo_size.split(",");switch(window.screen.width){case 1680:t[0]=c()(1.25*t[0]),t[1]=c()(1.25*t[1]);break;case 1920:t[0]=c()(1.5*t[0]),t[1]=c()(1.5*t[1])}e.options.photo_size=t[0]+","+t[1]}})),e}}]}}]);var We=n("OpN1"),Ue=n.n(We),Fe=(n("0es6"),function(){function e(e,t,n,i,a,o,s){this.$rootScope=e,this.$element=t,this.$timeout=n,this.$filter=i,this.dataService=a,this.homeWidgetCalendarService=o,this.contextService=s}return e.prototype.$onInit=function(){var e,t,n,i,o,s,l;return Object(P.c)(this,void 0,void 0,(function(){var r,d,p,u,m,_,g,h=this;return Object(P.e)(this,(function(v){var f;switch(v.label){case 0:return null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.options.key,this),this.current_date=le().format("YYYY-MM-DD"),this.selected_date=this.current_date,this.auth=this.contextService.getContext("auth"),this.tabs=[{key:"calendar_assistant",label:this.$filter("translate")("time_attendance_calendar")}],this.operates=[{key:"calendar_assistant",label:this.$filter("translate")("common_menu_style_show_more"),target:"mobile",func:function(){h.goToMyCalendar()}}],r=null!==(i=null===(n=null===(t=this.options)||void 0===t?void 0:t.params)||void 0===n?void 0:n.content_type)&&void 0!==i?i:"begin_end_punch",d=le(this.current_date),p=d.weekday(),u=d.clone().subtract(p<6?p+1:0,"day"),m=u.clone().add(6,"day"),[4,this.dataService.callHcmOpenApi("time.calendar.get.assistant.days",{start_date:u.format("YYYY-MM-DD"),end_date:m.format("YYYY-MM-DD")})];case 1:return _=v.sent(),this.day_list=a()(_).call(_,(function(e){var t;return Object(P.a)(Object(P.a)({},e),{label:c()(X()(t=e.date).call(t,8,10),10),high_light:!!e.festival})})),[4,this.dataService.callHcmOpenApi("time.employee.schedule.for.calendar.assistant",{begin_date:null===(o=this.day_list)||void 0===o?void 0:o[0].date,end_date:null===(s=this.day_list)||void 0===s?void 0:s[(null===(l=this.day_list)||void 0===l?void 0:l.length)-1].date})];case 2:return g=v.sent(),this.week_schedule={},C()(f=this.day_list).call(f,(function(e){var t,n,i,a,o,s,l=e.date,c=null==g?void 0:g[l],d=c?c.is_begin_punch?null===(n=null===(t=c.work_begin_time)||void 0===t?void 0:t.split(" "))||void 0===n?void 0:n[1]:h.$filter("translate")("time_unnecessarily_punch"):h.$filter("translate")("time_without_scheduling"),p=c?c.is_end_punch?null===(a=null===(i=c.work_end_time)||void 0===i?void 0:i.split(" "))||void 0===a?void 0:a[1]:h.$filter("translate")("time_unnecessarily_punch"):h.$filter("translate")("time_without_scheduling");!function(){var e,t,n,i,a,l,u,m,_,g,v,f,y,w,b,$;o={label:h.$filter("translate")("time_begin_punch_record"),content:null!==(i=null===(n=null===(t=null===(e=null==c?void 0:c.begin_punch_record)||void 0===e?void 0:e.punch_time)||void 0===t?void 0:t.split(" "))||void 0===n?void 0:n[1])&&void 0!==i?i:d,class:(null==c?void 0:c.begin_punch_record)?"":"invalid"},s={label:h.$filter("translate")("time_end_punch_record"),content:null!==(m=null===(u=null===(l=null===(a=null==c?void 0:c.end_punch_record)||void 0===a?void 0:a.punch_time)||void 0===l?void 0:l.split(" "))||void 0===u?void 0:u[1])&&void 0!==m?m:p,class:(null==c?void 0:c.end_punch_record)?"":"invalid"},"first_last_punch"===r&&(o={label:h.$filter("translate")("time_first_punch_record"),content:null!==(f=null===(v=null===(g=null===(_=null==c?void 0:c.first_punch_record)||void 0===_?void 0:_.punch_time)||void 0===g?void 0:g.split(" "))||void 0===v?void 0:v[1])&&void 0!==f?f:d,class:(null==c?void 0:c.first_punch_record)?"":"invalid"},s={label:h.$filter("translate")("time_last_punch_record"),content:null!==($=null===(b=null===(w=null===(y=null==c?void 0:c.last_punch_record)||void 0===y?void 0:y.punch_time)||void 0===w?void 0:w.split(" "))||void 0===b?void 0:b[1])&&void 0!==$?$:p,class:(null==c?void 0:c.last_punch_record)?"":"invalid"})}(),h.week_schedule[l]=Object(P.a)(Object(P.a)({},null!=c?c:{}),{punch_begin_desc:o,punch_end_desc:s})})),this.date_schedule=this.week_schedule[this.selected_date],[2]}}))}))},e.prototype.selectedDate=function(e){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(t){return this.selected_date=e,this.date_schedule=this.week_schedule[this.selected_date],[2]}))}))},e.prototype.goToMyCalendar=function(){this.$rootScope.super_go("time_view_employee",{date:this.selected_date})},e.$inject=["$rootScope","$element","$timeout","$filter","dataService","homeWidgetCalendarService","contextService"],e}());window.app.component("homeWidgetTimeCalendarAssistant",{controller:Fe,template:Ue.a,require:{boardCtrl:"?^hcPortalBoard"},bindings:{options:"=?"}});var qe=n("7QQP"),Ye=n.n(qe),Ne=(n("cho9"),function(){function e(e,t){this.$timeout=e,this.$hcDialog=t}return e.prototype.getMyData=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){switch(e.label){case 0:return[4,this.$hcDialog.getDialog().params({}).show()];case 1:return[2,e.sent()]}}))}))},e.$inject=["$timeout","$hcDialog"],e}());window.app.service("homwWidgetMessageTaskService",Ne);var Je=function(){function e(e,t,n,i,a){var o,s,l,c,r=this;this.$scope=e,this.$rootScope=t,this.$element=n,this.$timeout=i,this.$filter=a,this.client=window.client,this.model="Message",this.tabs=[{key:"task",label:this.$filter("translate")("common_home_widget_message_task_todo"),func:ee()(o=this.refreshData).call(o,this),postscript:{content:""}},{key:"task_done",label:this.$filter("translate")("common_home_widget_message_task_done"),func:ee()(s=this.refreshData).call(s,this),postscript:{content:""}}],this.operates=[{key:"task",label:"更多",func:ee()(l=this.jump).call(l,this)},{key:"task_done",label:"更多",func:ee()(c=this.jump).call(c,this)}],this.hideHeader={target:"pc"},this.currentTab=this.tabs[0].key,this.filterDict={is_task_done:1},this.$rootScope.$on("task_message_refresh",(function(e,t){var n=(new Date).getTime().toString();"task"!==r.currentTab&&"task_done"!==r.currentTab?r.refreshData("task",n):r.refreshData(r.currentTab,n)}))}return e.prototype.jump=function(){this.$rootScope.super_go("common_model_category_list",{model:"Message",filter_dict:this.filterDict,meta_state:"todoMessage"})},e.prototype.refreshData=function(e,t){this.filterDict="task"===e?{is_task_done:1,timestamp:t}:{is_task_done:2,timestamp:t}},e.prototype.$onInit=function(){var e,t=this;null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key,this),window.addEventListener("message",(function(e){var n;e.data.undone&&(t.count_undone=e.data.undone),e.data.done&&(t.count_done=e.data.done),a()(n=t.tabs).call(n,(function(e){e.postscript.content="task"===e.key?'<div class="unread">'+(t.count_undone?t.count_undone>99?"99+":t.count_undone:"")+"</div>":'<div class="unread">'+(t.count_done?t.count_done>99?"99+":t.count_done:"")+"</div>"}))}))},e.prototype.getSettingPanel=function(){return Object(me.c)(Ee.a)},e.prototype.$onResize=function(){},e.$inject=["$scope","$rootScope","$element","$timeout","$filter"],e}();window.app.component("homeWidgetMessageTask",{controller:Je,template:Ye.a,bindings:{options:"<",key:"<",context:"="},require:{boardCtrl:"?^hcmBoard"}});var Ke=n("9bPn"),Qe=n.n(Ke),Ge=(n("nHDf"),n("+hqv"));window.app.directive("homeWidgetGrowthRecord",[function(){return{restrict:"EA",template:Qe.a,scope:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"},controller:["$scope","$rootScope","$element","$filter","dataService","contextService","$controller","BaseCRUDService",function(e,t,n,i,a,o,s,l){s(Ge.a,{$scope:e,CRUDService:l.getModelService(e.options.params.model),InfoDialog:null}),e.initBefore=function(){var t;null===(t=e.boardCtrl)||void 0===t||t.componentRegister(e.options.key,e)},e.getMetaState=function(){var t;return null!==(t=e.options.params.state)&&void 0!==t?t:"portal_plugins"},e.getFilterDict=function(){var t,n,i,a,o=null!==(t=null===(n=e.options.params)||void 0===n?void 0:n.filter_dict)&&void 0!==t?t:{};return e.paging.page_size=(null!==(i=null===(a=e.options.params)||void 0===a?void 0:a.page_size)&&void 0!==i?i:"pc"===window.client)?3:1,(null==o?void 0:o.release_range)&&(o.release_range=e.auth.jobs[0].department_id),angular.extend({},{job_class:e.job_class,status:"1",delivery:1},o)}}]}}]);var Ve=n("/443"),Xe=n.n(Ve);n("TuQ3");window.app.directive("homeWidgetInnerRecruitJob",[function(){return{restrict:"EA",template:Xe.a,scope:{options:"<"},require:{boardCtrl:"?^hcPortalBoard"},controller:["$scope","$rootScope","$element","$filter","dataService","contextService","$controller","BaseCRUDService",function(e,t,n,i,a,o,s,l){var c;e.job_class=null!==(c=e.options.params.job_class)&&void 0!==c?c:"内部招聘",s(Ge.a,{$scope:e,CRUDService:l.getModelService("ReleaseJobMgr"),InfoDialog:null}),e.initBefore=function(){var t,n,i;null===(t=e.boardCtrl)||void 0===t||t.componentRegister(e.options.key,e),e.tabs=[{key:"inner-recruit",label:null!==(n=e.options.params.label)&&void 0!==n?n:"行内竞聘",func:function(){return!0}}],e.operates=[{key:"inner-recruit",label:null!==(i=e.options.params.more_label)&&void 0!==i?i:"更多",func:function(){r()}}]},e.getMetaState=function(){var t;return null!==(t=e.options.params.state)&&void 0!==t?t:"portal_plugins"},e.getFilterDict=function(){var t,n,i,a,o=null!==(t=null===(n=e.options.params)||void 0===n?void 0:n.filter_dict)&&void 0!==t?t:{},s={};return e.paging.page_size=(null!==(i=null===(a=e.options.params)||void 0===a?void 0:a.page_size)&&void 0!==i?i:"pc"===window.client)?3:1,s="内部招聘"===e.job_class?{is_open:!0,"job_release_range.depart_id":e.auth.jobs[0].department_id,status:"1"}:{job_class:e.job_class,status:"1",delivery:1},angular.extend({},s,o)};var r=function(){"内部招聘"===e.job_class?t.super_go("recruit_inner_job_list",{}):t.super_go("common_model_view_multi",{c_model:"ReleaseJobMgr",meta_state:"internal",key:"recommend_job_list",model:"RecruitRecommend",nav_state:"internal",advance_filter_dict:{job_class:e.job_class}})}}]}}]);var Ze=n("DAXO"),et=n.n(Ze),tt=(n("po+d"),n("bmIa"),function(){function e(e,t,n,i,a,o,s,l){this.$rootScope=e,this.$element=t,this.$timeout=n,this.$filter=i,this.dataService=a,this.homeWidgetCalendarService=o,this.contextService=s,this.TimeCommonService=l,this.weeks=["一","二","三","四","五","六","日"],this.single_click=!1,this.contextAuth=this.contextService.getContext("auth")}return e.prototype.$onInit=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){return this.month_calendar_data={},this.current_date=this.selected_date=le().format("YYYY-MM-DD"),this.year=this.calendar_year=le(this.current_date).year(),this.month=this.calendar_month=le(this.current_date).month()+1,this.employee_id=this.contextAuth.employee.id,this.setCalendar(this.calendar_year,this.calendar_month),[2]}))}))},e.prototype.calendarMinus=function(e,t){"m"===t?1===this.calendar_month?(this.calendar_month=12,this.calendar_year=this.calendar_year-1):this.calendar_month=this.calendar_month-1:this.calendar_year=this.calendar_year-1,e&&this.setCalendar(this.calendar_year,this.calendar_month)},e.prototype.calendarPlus=function(e,t){"m"===t?12===this.calendar_month?(this.calendar_month=1,this.calendar_year=this.calendar_year+1):this.calendar_month=this.calendar_month+1:this.calendar_year=this.calendar_year+1,e&&this.setCalendar(this.calendar_year,this.calendar_month)},e.prototype.setCalendar=function(e,t){return Object(P.c)(this,void 0,void 0,(function(){var n;return Object(P.e)(this,(function(i){switch(i.label){case 0:return n=this,[4,this.homeWidgetCalendarService.getCalendarWithLunar(e,t)];case 1:return n.calendar_data=i.sent(),this.getInterviewData(this.TimeCommonService.getMonthBegin(e,t),this.TimeCommonService.getMonthEnd(e,t)),[2]}}))}))},e.prototype.getInterviewData=function(e,t){return Object(P.c)(this,void 0,void 0,(function(){var n,i;return Object(P.e)(this,(function(o){switch(o.label){case 0:return[4,this.dataService.callHcmOpenApi("hcm.model.list",{model:"InterviewerTask",filter_dict:{employee_id:this.employee_id,notice_date:{gte:e,lte:t}},extra_property:{state:"calendar",only_list:!0,sorts:[{key:"notice_date",type:"asc"}]}},null,!0)];case 1:return n=o.sent(),(i=this).month_calendar_data={},n=n.list,a()(n).call(n,(function(e){i.month_calendar_data[e.notice_date.substring(0,10)]||(i.month_calendar_data[e.notice_date.substring(0,10)]=[]),i.month_calendar_data[e.notice_date.substring(0,10)].push(e)})),[2]}}))}))},e.prototype.refreshInterviewData=function(){if(this.single_click)this.$rootScope.show_warning("数据刷新中，请勿重复刷新。","warning");else{this.single_click=!0,this.$rootScope.show_waiting();var e=this.TimeCommonService.getMonthBegin(this.calendar_year,this.calendar_month),t=this.TimeCommonService.getMonthEnd(this.calendar_year,this.calendar_month);this.getInterviewData(e,t),this.single_click=!1,this.$rootScope.show_warning("刷新成功","warning"),this.$rootScope.hide_waiting()}},e.prototype.checkInterviewDetail=function(e,t){if(this.selected_date=e,"v1"===this.contextAuth.company_setting.REC_INTERVIEW_VERSION)this.$rootScope.super_go("interviewer_task",{filter_dict:{notice_date:{eq:e}}});else if("v2"===this.contextAuth.company_setting.REC_INTERVIEW_VERSION){var n=e.split("-"),i=c()(n[0],10),a=c()(n[1],10),o=c()(n[2],10);a+1>12?(i+=1,a=1):a+=1,this.$rootScope.super_go("common_model_list",{model:"InterviewerTask",meta_state:"newInterviewCenter",filter_dict:{notice_date:{eq:e}},advance_filter_dict:{notice_date:{gte:e,lte:i+"-"+a+"-"+o}}})}},e.$inject=["$rootScope","$element","$timeout","$filter","dataService","homeWidgetCalendarService","contextService","TimeCommonService"],e}());window.app.component("homeWidgetRecruitInterviewCalendar",{controller:tt,template:et.a,bindings:{model:"<?"}});var nt=n("z1A0"),it=n.n(nt),at=(n("G8Sl"),n("yT68")),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(P.d)(t,e),t.prototype.getMeta=function(){return Object(P.c)(this,void 0,Q.a,(function(){return Object(P.e)(this,(function(e){return this,[2,at.fields]}))}))},t}(ge.a),st=n("8Auy"),lt=function(){function e(e,t,n,i,a){var o=this;this.$scope=e,this.$rootScope=t,this.$element=n,this.dataService=i,this.$state=a,this.client=window.client,this.funcParse=function(e){var t={SCOPE:o.$scope,STATE:o.$state,location:window.location,history:window.history,document:document,dataService:o.dataService};return st.a.jsonEval(e,t,{})}}return e.prototype.$onInit=function(){var e,t=this;null===(e=this.boardCtrl)||void 0===e||e.componentRegister(this.key||this.options.key,this),this.$scope.super_go=function(e,n,i,a){t.$rootScope.super_go(e,n,i,a)},this.options&&B()(this.options).length>0&&(this.tabs=[{label:this.options.title,key:"index"}],this.operates=this.funcParse(this.options.operates)),this.$scope.$watch("$ctrl.options",(function(e,n){e!==n&&(t.tabs=[{label:t.options.title,key:"index"}],t.operates=t.funcParse(t.options.operates))}))},e.prototype.getSettingPanel=function(){return Object(me.c)(ot)},e.$inject=["$scope","$rootScope","$element","dataService","$state"],e}();window.app.component("homeWidgetCommonList",{bindings:{model:"=ngModel",options:"<?",key:"<?"},controller:lt,template:it.a,require:{boardCtrl:"?^hcmBoard"}});var ct=n("Jvcg"),rt=n.n(ct);n("1uYX");window.app.component("homeWidgetCarouselInfo",{template:rt.a,require:{boardCtrl:"?^hcPortalBoard"},controller:["$scope","$controller","BaseCRUDService","$filter",function(e,t,i,a){var o;return Object(P.c)(this,void 0,void 0,(function(){var s;return Object(P.e)(this,(function(l){return s=i.getModelService("CarouselInformation"),t(Ge.a,{$scope:e,CRUDService:s,InfoDialog:null}),null===(o=e.$ctrl.boardCtrl)||void 0===o||o.componentRegister("carousel_info",e),e.getMetaState=function(){return"homepage"},e.no_advance_query=!0,e.fetchDataSuccess=function(t){t.list.length<=1||j()((function(){n.e(92).then(n.bind(null,"TaHA")).then((function(t){var n=t.Swiper,i=t.Autoplay,a=t.Pagination,o=t.Navigation;n.use([a,i,o]),e.swiper=new n(".swiper-container",{direction:"horizontal",allowTouchMove:!1,loop:!0,pagination:{el:".carousel-pagination",clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}))}),1e3)},e.chooseTimeTemplate=function(e,t,n){return n?a("infoDefault")(a(n)(a("hcListCellData")(e,t))):a("infoDefault")(a("hcListCellData")(e,t))},[2]}))}))}]});var dt=n("xAfy"),pt=function(){function e(e,t,n,i,a,o,s){this.$scope=e,this.showPluginsService=t,this.$element=n,this.hcPluginSettingService=i,this.$hcBoard=a,this.contextService=o,this.$compile=s,this.client=window.client,this.initExpendFlag=!1,this.board_models=[]}return e.prototype.$onInit=function(){var e,t;return Object(P.c)(this,void 0,void 0,(function(){var n,i,a=this;return Object(P.e)(this,(function(o){var s,l;switch(o.label){case 0:return'<hcm-board model="board" ng-repeat="board in $ctrl.board_models track by $index"></hcm-board>',O()(s=this.$element).call(s,".hc-show-plugins").html('<hcm-board model="board" ng-repeat="board in $ctrl.board_models track by $index"></hcm-board>'),this.childScope=this.$scope.$new(),this.$compile(O()(l=this.$element).call(l,".hc-show-plugins"))(this.childScope),(null===(t=null===(e=this.contextService.getContext("auth"))||void 0===e?void 0:e.company_setting)||void 0===t?void 0:t.open_workbench)?[3,2]:[4,this.initBoard()];case 1:return o.sent(),j()((function(){a.renderBoard()})),[3,3];case 2:sessionStorage.getItem("workbrench_id")&&(n=sessionStorage.getItem("workbrench_id").split("#")[0],i=sessionStorage.getItem("workbrench_id").split("#")[1],this.initBoard(n,i),j()((function(){a.renderBoard()}))),o.label=3;case 3:return this.$scope.$on("workbench_change",(function(e,t){var n,i,o,s;a.board_models=null,null===(s=a.childScope)||void 0===s||s.$destroy(),O()(n=a.$element).call(n,"hcm-board").remove();O()(i=a.$element).call(i,".hc-show-plugins").html('<hcm-board model="board" ng-repeat="board in $ctrl.board_models track by $index"></hcm-board>'),a.childScope=a.$scope.$new(),a.$compile(O()(o=a.$element).call(o,".hc-show-plugins"))(a.childScope);var l=t.value.split("#")[0],c=t.value.split("#")[1];a.initBoard(l,c),j()((function(){a.renderBoard()}))})),[2]}}))}))},e.prototype.initBoard=function(e,t){return Object(P.c)(this,void 0,void 0,(function(){var n,i,o=this;return Object(P.e)(this,(function(s){switch(s.label){case 0:return[4,this.showPluginsService.getPlugins(this.client,e,t)];case 1:return n=s.sent(),"pc"!==this.client||e?[3,3]:[4,this.hcPluginSettingService.getMyPlugins()];case 2:(i=s.sent().person).length&&n.push({components:i}),s.label=3;case 3:return this.board_models=[],C()(n).call(n,(function(e,t){var n,i,s,l;(null===(n=e.components)||void 0===n?void 0:n.length)&&(o.board_models[t]=o.$hcBoard.createBoard().setLazyContainer("pc"===o.client?O()(s=o.$element).call(s,".hc-show-plugins"):angular.element(".ui-view > .home-page.new-index > .plugin-flow")),Y()(e.color)&&(null===(i=o.board_models[t])||void 0===i||i.setColor(e.color)),o.board_models[t].setComponent(a()(l=e.components).call(l,(function(e){return Object(P.a)(Object(P.a)({},e),{key:e.key||"component_"+Object(dt.g)()})})),e.groups).setContext(e.context))})),[2]}}))}))},e.prototype.renderBoard=function(){return Object(P.c)(this,void 0,void 0,(function(){return Object(P.e)(this,(function(e){var t;return C()(t=this.board_models).call(t,(function(e){e.refreshBoard()})),[2]}))}))},e.$inject=["$scope","showPluginsService","$element","hcPluginsSettingService","$hcBoard","contextService","$compile"],e}();window.app.component("hcShowPlugins",{controller:pt,template:J.a});n("vl5y");window.app.controller("PCIndexCtrl",["$q","$scope","$rootScope","$state","contextService","dataService","ApplicationService","IndexService","$filter","AuthService","$hcDialog","messageService",function(e,t,n,i,o,l,r,p,u,m,_,g){t.init=function(){t.auth=o.getContext("auth");var e=function(){i.go("set_password_no_bottom",{next:d()({state:"index",params:{}})})};t.auth&&t.auth.company_setting&&t.auth.company_setting.isUserHadChangePassword&&t.auth.user&&l.callHcmOpenApi("user.need.change.password",{user_id:t.auth.user.id}).then((function(t){t&&e()})),t.auth&&t.auth.user&&0===t.auth.user.exist_password&&t.auth.company_setting.FirstLoginSetPassword?e():0===t.menu_style&&p.getMyApplication("pc").then((function(e){var n;t.application_category=u("orderBy")(e,"number"),t.show_portal=t.auth.company_setting.open_portal;var a=i.params.category?c()(i.params.category):null,o=s()(n=t.application_category).call(n,(function(e){return e.id===a}))[0];t.show_portal&&!o||t.categoryChange(o||t.application_category[0])}))},t.showPortal=function(){t.show_portal=!0,n.super_go("index",{category:""},{location:"replace",notify:!1})},t.categoryChange=function(e){var o;e||n.show_warning("未开通任何应用 请先开通"),t.show_portal=!1,n.main_history_state={state:"index",param:{category:e.id}},t.curr_application_category=e.id,t.application_data=a()(o=e.applications).call(o,(function(e){if(e.is_service)e.href=location.pathname+i.href("my_service_summary",{id:e.id});else if(e.url)e.href=e.url;else{var t={};try{"string"==typeof e.param?e.param&&(t=JSON.parse(e.param)):t=e.param}catch(e){}e.href=location.pathname+i.href(e.state,t)}return e})),t.$broadcast("main_index_refresh"),n.super_go("index",{category:e.id},{location:"replace",notify:!1})}}])}}]);